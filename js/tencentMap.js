
TMap = window.TMap || {};
if (!TMap.__load) {
    TMap.__load = function(onLoad) {
        onLoad({"key":"OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77","version":"1.0.27.1","highQualityRender":false}, 1643013694685);
        delete TMap.__load;
    };
}

/*! @version 1.0.27.1 */
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=628)}([function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(76),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports={default:n(181),__esModule:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(169),r=i(o),a=n(79),s=i(a),l=n(20),u=i(l);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,u.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(20),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){var i=n(8),o=n(2),r=n(24),a=n(19),s=n(22),l=function(t,e,n){var u,c,f,d=t&l.F,h=t&l.G,v=t&l.S,p=t&l.P,m=t&l.B,_=t&l.W,g=h?o:o[e]||(o[e]={}),y=g.prototype,x=h?i:v?i[e]:(i[e]||{}).prototype;h&&(n=e);for(u in n)(c=!d&&x&&void 0!==x[u])&&s(g,u)||(f=c?x[u]:n[u],g[u]=h&&"function"!=typeof x[u]?n[u]:m&&c?r(f,i):_&&x[u]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):p&&"function"==typeof f?r(Function.call,f):f,p&&((g.virtual||(g.virtual={}))[u]=f,t&l.R&&y&&!y[u]&&a(y,u,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(52),o=n(84),r=n(151),a=n(142),s=n(227),l=function(t,e,n){var u,c,f,d,h=t&l.F,v=t&l.G,p=t&l.S,m=t&l.P,_=t&l.B,g=v?i:p?i[e]||(i[e]={}):(i[e]||{}).prototype,y=v?o:o[e]||(o[e]={}),x=y.prototype||(y.prototype={});v&&(n=e);for(u in n)c=!h&&g&&void 0!==g[u],f=(c?g:n)[u],d=_&&c?s(f,i):m&&"function"==typeof f?s(Function.call,f):f,g&&a(g,u,f,t&l.U),y[u]!=f&&r(y,u,d),m&&x[u]!=f&&(x[u]=f)};i.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){t&&(0,d.default)(t).forEach(function(t){e.apply(void 0,(0,c.default)(t))})}var r=n(18),a=i(r),s=n(20),l=i(s),u=n(23),c=i(u),f=n(120),d=i(f),h=n(27),v=i(h),p=n(126),m=i(p),_=n(162),g=i(_),y=n(45),x=i(y),b=n(160);e.getMax=function(t){for(var e=t.length,n=-1/0;e;)e-=1,n=t[e]>n?t[e]:n;return n},e.getMin=function(t){for(var e=t.length,n=1/0;e;)e-=1,n=t[e]<n?t[e]:n;return n},e.isInRange=function(t,e,n){return t>=e&&t<=n},e.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},e.wrap=function(t,e,n){var i=n-e,o=((t-e)%i+i)%i+e;return o===e?n:o},e.round=function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},e.mix=function(t,e,n){return t*(1-n)+e*n},e.degreeToRadian=m.default,e.radianToDegree=g.default,e.extend=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=!0,a=!1,s=void 0;try{for(var l,u=(0,v.default)(n);!(r=(l=u.next()).done);r=!0){o(l.value,function(e,n){t[e]=n})}}catch(t){a=!0,s=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw s}}return t},e.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},e.forIn=o,e.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},e.isDefined=function(t){return null!==t&&void 0!==t},e.isUndefined=function(t){return void 0===t},e.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},e.parseJson=function(t){return!JSON||!JSON.stringify?new Function("return "+t)():JSON.parse(t)},e.colorToRGBA=function(t){if(t instanceof Array)return t;var e=t>>0&255,n=t>>8&255,i=t>>16&255,o=t>>24&255;return o/=255,new Array(e,n,i,o)},e.rgbaToGLColor=function(t){t=String(t).replace(/ /g,"");var e=t.substring(t.indexOf("(")+1,t.indexOf(")")).split(",");return 3===e.length&&(e[3]=1),e=e.map(function(t,e){return 3===e?Number(t):Number(t)/255})},e.uniqueId=function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=new Array(36),n=0,i=void 0;return function(){for(var o=0;o<36;o++)8===o||13===o||18===o||23===o?e[o]="-":14===o?e[o]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),i=15&n,n>>=4,e[o]=t[19===o?3&i|8:i]);return e.join("")}}(),e.objectClone=function(t){var e=this;if("object"!==(void 0===t?"undefined":(0,l.default)(t))||null===t)return t;if(t instanceof Array)return[].concat(t);var n=new Object;return o(t,function(t,i){n[t]=e.objectClone(i)}),n},e.keysDifference=function(t,e){var n=[];return o(t,function(t){t in e||n.push(t)}),n},e.bezier=function(t,e,n,i){var o=new b(t,e,n,i);return function(t){return o.solve(t)}},e.ease=e.bezier(.25,.1,.25,1),e.linearEase=function(t){return t},e.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,o=new Array(t.length),r=null;t.forEach(function(t,a){e(t,function(t,e){t&&(r=t),o[a]=e,0===i&&n(r,o),i-=1})})},e.deepEqual=function(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!e.deepEqual(t[i],n[i]))return!1;return!0}if("object"===(void 0===t?"undefined":(0,l.default)(t))&&null!==t&&null!==n){if("object"!==(void 0===n?"undefined":(0,l.default)(n)))return!1;if((0,a.default)(t).length!==(0,a.default)(n).length)return!1;for(var o in t)if(t.hasOwnProperty(o)&&!e.deepEqual(t[o],n[o]))return!1;return!0}return t===n};var S={};e.warnOnce=function(t){S[t]||("undefined"!=typeof console&&console.warn(t),S[t]=!0)},e.clone=function(t){if(null===t||"object"!==(void 0===t?"undefined":(0,l.default)(t)))return t;if(t instanceof x.default)return new x.default(t.getLat(),t.getLng(),t.getHeight());if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var n=[],i=0,o=t.length;i<o;++i)n[i]=this.clone(t[i]);return n}if(t instanceof Object){var r={};for(var a in t)t.hasOwnProperty(a)&&(r[a]=this.clone(t[a]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},e.insertSort=function(t,e){for(var n=1,i=n;i<t.length;n+=1,i+=1)for(var o=0;o<n;o++)if(t[i][e]<=t[o][e]){t.splice(o,0,t[i]),t.splice(i+1,1);break}},e.bubbleSort=function(t,e){t.sort(function(t,n){return t[e]-n[e]})}},function(t,e,n){var i=n(64)("wks"),o=n(49),r=n(8).Symbol,a="function"==typeof r;(t.exports=function(t){return i[t]||(i[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=i},function(t,e,n){t.exports=!n(31)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(7);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(13),o=n(87),r=n(66),a=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports={default:n(256),__esModule:!0}},function(t,e,n){var i=n(6),o=n(2),r=n(31);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*r(function(){n(1)}),"Object",a)}},function(t,e,n){var i=n(82),o=n(58);t.exports=function(t){return i(o(t))}},function(t,e,n){t.exports={default:n(185),__esModule:!0}},function(t,e,n){var i=n(14),o=n(38);t.exports=n(12)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(171),r=i(o),a=n(170),s=i(a),l="function"==typeof s.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===l(r.default)?function(t){return void 0===t?"undefined":l(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":l(t)}},function(t,e,n){t.exports={default:n(189),__esModule:!0}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(95),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o.default)(t)}},function(t,e,n){var i=n(46);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";var i={batchRender:!0,highQualityRender:!1,type:"default",minZoom:3,maxZoom:20,maxDataZoom:18,minPitch:0,maxPitch:80,minShowIndoorZoom:17,tileSize:256,checkKeySrc:"https://apikey.map.qq.com/mkey/index.php/mkey/check",overseaSrc:"https://overseactrl.map.qq.com",prSrc:"https://pr.map.qq.com/pingd?appid=jsapi_v3",verSrc:"https://confinfo.map.qq.com/confinfo",iconSize:16,iconSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/icon?id={id}&type=img&version={version}",iconIndexSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/icon?id={id}&type=json&version={version}",styleSrc:"https://vectorsdk.map.qq.com/fileupdate/jsapi/style?autoup=1&id={id}&version={version}",batchVectorSrc:["https://rt0.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&style=100&compress=1&mapType=hybrid","https://rt1.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&style=100&compress=1&mapType=hybrid","https://rt2.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&style=100&compress=1&mapType=hybrid","https://rt3.map.gtimg.com/tile?styleid=0&tiles={tiles}&version={version}&style=100&compress=1&mapType=hybrid"],vectorSrc:["https://rt0.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&style=100&compress=1&mapType=hybrid","https://rt1.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&style=100&compress=1&mapType=hybrid","https://rt2.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&style=100&compress=1&mapType=hybrid","https://rt3.map.gtimg.com/tile?styleid=0&z={z}&x={x}&y={y}&version={version}&style=100&compress=1&mapType=hybrid"],satelliteSrc:["https://p0.map.gtimg.com/sateTiles","https://p1.map.gtimg.com/sateTiles","https://p2.map.gtimg.com/sateTiles","https://p3.map.gtimg.com/sateTiles"],roadSrc:["https://rt0.map.gtimg.com/tile","https://rt1.map.gtimg.com/tile","https://rt2.map.gtimg.com/tile","https://rt3.map.gtimg.com/tile"],trafficSrc:["https://rtt2.map.qq.com/rtt/","https://rtt2a.map.qq.com/rtt/","https://rtt2b.map.qq.com/rtt/","https://rtt2c.map.qq.com/rtt/"],handdrawSrc:["https://p0.map.gtimg.com/scenic/","https://p1.map.gtimg.com/scenic/","https://p2.map.gtimg.com/scenic/","https://p3.map.gtimg.com/scenic/"],indoorIndexSrc:" https://mapvectors.map.qq.com/indoormap2/index?type=1",indoorBuildingSrc:"https://mapvectors.map.qq.com/indoormap",indoorStyleSrc:"https://mapvectors.map.qq.com/indoormap/style.js?version={version}",indoorIconSrc:"https://rt%$%.map.gtimg.com/icons/indoor/",dataVersion:{sat:231,tile:405,scenic:157},cesiumStaticSrc:"https://mapapi.qq.com/web/visualization/real3d/cesium-static/"};t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return!(self.navigator.userAgent.indexOf("MiniProgramEnv")<0)}function r(){for(var t=self.navigator.userAgent,e=["iOS","Android","MINA"],n=["Windows","Mac"],i="cannotrecongize",o=0;o<e.length;o++)if(t.indexOf("MiniProgramEnv/"+e[o])>=0){i="mobile";break}for(var r=0;r<n.length;r++)if(t.indexOf("MiniProgramEnv/"+n[r])>=0){i="pc";break}return i}function a(t,e,n){if(e.includes(":")){var i=n,o=e.split(":"),r=o[0].trim();e=o[1].trim(),n=function(t){for(var e=!1,n=t.target;n&&!(e=s(n,r));)n=n.parentNode;e&&(t.selectorTarget=n,i(t))}}return"addEventListener"in t?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):"attachEvent"in t?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):"on"in t?(t.on(e,n),{remove:function(){t.off&&t.off(e,n),t.removeListener&&t.removeListener(e,n)}}):void 0}function s(t,e){var n=["matches","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector"],i=!0,o=!1,r=void 0;try{for(var a,s=(0,u.default)(n);!(i=(a=s.next()).done);i=!0){var l=a.value;if(t[l]&&"function"==typeof t[l])return t[l](e)}}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return!1}var l=n(27),u=i(l),c=n(18),f=i(c),d=n(20),h=i(d),v=n(23),p=i(v);e.now=function(){return self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date)}();var m=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame;e.frame=function(t){return m(t)};var _=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame;e.cancelFrame=function(t){_(t)},e.timed=function(n,i,o,r){function a(i){l||(i=t.exports.now(),i>=u+o?n.call(r,1):(n.call(r,(i-u)/o),e.frame(a)))}var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!o)return n.call(r,1),null;var l=!1,u=t.exports.now()-s*o;return e.frame(a),function(){l=!0,i&&i.call(r)}},e.getImageData=function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height).data},e.hardwareConcurrency=self.navigator.hardwareConcurrency||4,Object.defineProperty(e,"devicePixelRatio",{get:function(){return self.devicePixelRatio||1}}),e.isPC=function(){var t=self.navigator.userAgent,e=["Android","iPhone","iPad","iPod","SymbianOS","selfs Phone"],n=!0;if(o()){if("mobile"===r())return!1;if("pc"===r())return!0}for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>=0){n=!1;break}return n},e.isMiniProgram=o,e.getMiniProgramEnv=r,e.isLowMobileDevice=function(){var t=self.navigator.userAgent;if(this.isPC())return!1;if(t.includes("SymbianOS")||t.includes("selfs Phone"))return!0;try{var e=t.includes("Android")&&parseFloat(t.match(/Android (\d+)/)[1]),n=(t.includes("iPhone")||t.includes("iPad")||t.includes("iPod"))&&t.match(/OS ((\d+_?){2,3})\s/)&&parseFloat(String(t.match(/OS ((\d+_?){2,3})\s/)[1]).replace("_","."));if(e&&e<6||n&&n<11)return!0}catch(t){return!1}return!1},e.mobileSystem=function(){var t=self.navigator.userAgent,e="";if(this.isPC())return!1;if(t.includes("SymbianOS")||t.includes("selfs Phone"))e=t.includes("SymbianOS")?"SymbianOS":"selfs Phone";else try{var n=t.includes("Android")&&parseFloat(t.match(/Android ([\d.]+?);/)[1]),i=(t.includes("iPhone")||t.includes("iPad")||t.includes("iPod"))&&t.match(/OS ((\d+_?){2,3})\s/)&&parseFloat(String(t.match(/OS ((\d+_?){2,3})\s/)[1]).replace("_","."));e=n?"Android"+n.toFixed(1):"iOS"+i.toFixed(1)}catch(e){return"无法识别: "+t}return e},e.debounce=function(t,e){var n=null;return function(){var i=arguments;n&&clearTimeout(n),n=setTimeout(function(){t.apply(void 0,(0,p.default)(i))},e)}},e.throttle=function(t,e){var n=0;return function(){var i=+new Date;if(i-n>e){n=i;for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];t.apply(this,r)}}},e.throttleWithFrame=function(t){var e=null;return function(){for(var n=this,i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];e||(e=m(function(){t.apply(n,o),e=null}))}};var g=function t(e,n,i,o){if(!e||!n)return void console.warn("arguments is invalid!",e,n,i);if("object"===(void 0===n?"undefined":(0,h.default)(n))){var r=null;return r="length"in n?n.map(function(n){return t(e,n.trim(),i,o)}):(0,f.default)(n).map(function(o){return t(e,o.trim(),n[o],i)}),{remove:function(){r.forEach(function(t){t&&t.remove&&t.remove()})}}}if(-1!==n.indexOf(",")){n=n.split(",");var s=n.map(function(n){return t(e,n.trim(),i,o)});return{remove:function(){s.forEach(function(t){t&&t.remove&&t.remove()})}}}return a(e,n,function(t){return i.call(o||e,t)})},y=function(t,e,n,i){var o=null,r=function(t){return function(){return o&&o.remove&&o.remove(),t.apply(this,arguments)}};return t&&e?("object"===(void 0===e?"undefined":(0,h.default)(e))&&("length"in e?n=r(n):(0,f.default)(e).forEach(function(t){e[t]=r(e[t])})),-1!==e.indexOf(",")&&(e=e.split(","),n=r(n)),o=g(t,e,n,i)):void console.warn("arguments is invalid!",t,e,n)};e.on=g,e.once=y},function(t,e,n){t.exports={default:n(130),__esModule:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.AJAXError=e.EnumError=e.ClassTypeError=e.BaseTypeError=void 0;var o=n(20),r=i(o),a=n(3),s=i(a),l=n(5),u=i(l),c=n(4),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=function(){function t(e){(0,h.default)(this,t),this.message=e}return(0,p.default)(t,[{key:"warn",value:function(){console.warn(this.message)}},{key:"error",value:function(){console.error(this.message)}},{key:"throw",value:function(){throw new Error(this.message)}}]),t}(),_=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"类型错误："+t+" 应该是 "+n.toUpperCase()+" 类型, 实际却是 "+(void 0===i?"undefined":(0,r.default)(i)).toUpperCase()+" 类型。"))}return(0,f.default)(e,t),e}(m),g=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"类型错误："+t+" 应该是 "+n+" 类型, 实际值为 "+i+"。"))}return(0,f.default)(e,t),e}(m),y=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,u.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"枚举错误："+t+" 的可枚举值为 "+n.join(",")+"，实际却是 "+i))}return(0,f.default)(e,t),e}(m),x=function t(e,n){(0,h.default)(this,t),this.message=e,this.status=n};e.BaseTypeError=_,e.ClassTypeError=g,e.EnumError=y,e.AJAXError=x},function(t,e){t.exports={}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(127),r=i(o),a=n(27),s=i(a);e.default=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,l=(0,s.default)(t);!(i=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(58);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";var i=n(136)(!0);n(70)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(3),r=i(o),a=n(129),s=i(a);e.default=function t(e,n,i){null===e&&(e=Function.prototype);var o=(0,s.default)(e,n);if(void 0===o){var a=(0,r.default)(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var l=o.get;if(void 0!==l)return l.call(i)}},function(t,e,n){var i=n(90),o=n(63);t.exports=Object.keys||function(t){return i(t,o)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){n(141);for(var i=n(8),o=n(19),r=n(29),a=n(11)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=i[u],f=c&&c.prototype;f&&!f[a]&&o(f,a,u),r[u]=r.Array}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(30),r=i(o),a=n(148),s=i(a),l=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,u=/^rgb\((\d+,?\s*){3}\)$/,c=/^rgba\((\d+,?\s*){3},\s*[0-9.]+\)$/,f={};!function(t){["Number","String","Function","Undefined","Boolean","Object","Array"].forEach(function(e){var n=function(t){return"[object "+e+"]"===Object.prototype.toString.call(t)};t["is"+e]=n})}(f),f.isNaN=s.default,f.isValidLatLng=function(){var t=void 0,e=void 0;if(1===arguments.length){var n=arguments[0];if(f.isArray(n)){var i=(0,r.default)(n,2);t=i[0],e=i[1]}else t=n.lat,e=n.lng}else{if(2!==arguments.length)return!1;t=arguments[0],e=arguments[1]}return!(!f.isNumber(t)||!f.isNumber(e))&&(Math.abs(t)<=90&&Math.abs(e)<=180)},f.isValidColor=function(t){return f.isArray(t)?(3===t.length||4===t.length)&&t.every(function(t){return t>=0&&t<=255}):!!f.isString(t)&&(l.test(t)||u.test(t)||c.test(t))},f.isValidOffset=function(t){return!!(f.isObject(t)&&"x"in t&&"y"in t&&f.isNumber(t.x)&&f.isNumber(t.y))},e.default=f},function(t,e,n){var i=n(49)("meta"),o=n(7),r=n(22),a=n(14).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(31)(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!r(t,i)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[i].w},h=function(t){return u&&v.NEED&&l(t)&&!r(t,i)&&c(t),t},v=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){return M?void 0:t.apply(null,arguments)}}function r(t,e){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i+"="+e[i]);return t+(-1===t.indexOf("?")?"?":"&")+n.join("&")}function a(t){var e=(0,A.isWebGLSupportedCached)();(0,P.sendByAjax)(r(b.default.prSrc,{logid:"pv",key:t.key||w.default.key,v:t.version||"null",lt:t.loadDeltaTime||-1,d:document.domain,dpr:window.devicePixelRatio,lss:T.default.support()?1:0,gls:e.context?1:0,ua:window.navigator.userAgent,dt:k.default.OS,dvn:e.renderer}))}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,n=t.code,i=t.message,o=void 0===i?"":i,a=t.key,s=void 0===a?w.default.key:a;(0,P.sendOnce)(r(b.default.prSrc,{logid:"err",key:s,type:e,code:n,msg:o,dt:k.default.OS}))}function l(t,e,n){t.once("tilesloaded",function(){(0,P.sendOnce)(r(b.default.prSrc,{logid:"rt",frt:Date.now()-e,device:n}))})}function u(t,e,n){(0,L.isPC)()||t.once("tilesloaded",function(){(0,P.sendOnce)(r(b.default.prSrc,{logid:"ds",lowdevice:e,systemid:n}))})}function c(t){var e=(0,A.isWebGLSupportedCached)(),n=null,i=0,o=null,a=function(){var a=(0,L.now)(),s=(a-o)/1e3,l=Math.round(i/(60*s)*60);t.removeRenderCallback(n),(0,P.sendOnce)(r(b.default.prSrc,{logid:"fps",dt:k.default.OS,num:l,cd:e.isIndependentDisplayCard?1:0}))};t.on("movestart",function(){n&&(t.removeListener("moveend",a),t.removeRenderCallback(n),i=0),o=(0,L.now)(),n=function(){i++},t.addRenderCallback(n),t.once("moveend",a)})}function f(t){(0,P.sendOnce)(r(b.default.prSrc,{logid:"cl",key:t.key||w.default.key,subkey:t.subkey||"",id:t.id||""}))}function d(t){(0,P.sendOnce)(r(b.default.prSrc,{logid:"cs",key:t.key||w.default.key,subkey:t.subkey||"",id:t.styleId}))}function h(t,e){(0,P.sendOnce)(r(b.default.prSrc,{logid:"os",key:t.key||w.default.key,num:e||0}))}function v(t){var e=t.lat,n=t.lng,i=t.zoom,o=t.pitch,a=t.rotation,s=t.width,l=t.height;(0,P.sendOnce)(r(b.default.prSrc,{logid:"minfo",lat:e.toFixed(4),lng:n.toFixed(4),zoom:Math.floor(i),pitch:o,rotation:a,width:s,height:l}))}function p(t,e){if("tile"===t){var n=e.id,i=e.status,o=e.time,a=C[n];a||(a=new R(n),C[n]=a),a.logStatus(i),0===i&&o&&a.logTime(o)}else{var s={logid:"qos",t:t,info:e.styleId+"|"+e.version};e.error||0===e.error?s.e=e.error:s.lt=e.loadTime,(0,P.sendOnce)(r(b.default.prSrc,s))}}Object.defineProperty(e,"__esModule",{value:!0}),e.statCn=e.qos=e.minfo=e.os=e.cs=e.cl=e.fps=e.ds=e.frt=e.err=e.pv=void 0;var m=n(0),_=i(m),g=n(1),y=i(g),x=n(25),b=i(x),S=n(112),w=i(S),E=n(85),T=i(E),A=n(158),P=n(157),I=n(144),k=i(I),L=n(26),M=!!w.default.isLocal,C=(e.pv=o(a),e.err=o(s),e.frt=o(l),e.ds=o(u),e.fps=o(c),e.cl=o(f),e.cs=o(d),e.os=o(h),e.minfo=o(v),{}),R=(e.qos=o(p),function(){function t(e){function n(){var t=this.id[0]+"_stat",e=this.id[0]+"_avg",n={},i=this.tilesStatus.join("|");if("0|0|0"!==i&&(n[t]=i,this.tilesStatus=[0,0,0]),this.tilesTime.length>0){var o=this.tilesTime.reduce(function(t,e){return t+e},0)/this.tilesTime.length;n[e]=Math.max(0,Math.floor(o)),this.tilesTime=[]}return n}(0,_.default)(this,t),this.id=e,this.tilesStatus=[0,0,0],this.tilesTime=[],(0,P.sendPeriodically)("tile",r(b.default.prSrc,{logid:"qos",t:"tile"}),n.bind(this))}return(0,y.default)(t,[{key:"logStatus",value:function(t){this.tilesStatus[t]+=1}},{key:"logTime",value:function(t){this.tilesTime.push(t)}}]),t}()),N=function(){function t(){setTimeout(function(){e.length>0&&((0,P.sendOnce)(r(b.default.prSrc,{logid:"cn",cn:e.join(",")})),e=[]),t()},5e3)}var e=[];return t(),function(t){t&&e.push(t)}}();e.statCn=o(N)},,function(t,e,n){var i=n(14).f,o=n(22),r=n(11)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(20),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(10),f=90,d=180,h=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments[3];if((0,s.default)(this,t),e=Number(e),n=Number(n),i=Number(i),isNaN(n)||isNaN(e)||isNaN(i))throw new Error("参数错误：LatLng 传入参数 ("+e+", "+n+") 非合法数字。");if(o)e=(0,c.clamp)(e,-f,f),n=(0,c.wrap)(n,-d,d);else{if(e>f||e<-f)throw new Error("参数错误：LatLng.lat 取值应在 ["+-f+", "+f+"] 区间内。");if(n>d||n<-d)throw new Error("参数错误：LatLng.lng 取值应在 ["+-d+", "+d+"] 区间内。")}this.lat=e,this.lng=n,this.height=i}return(0,u.default)(t,[{key:"toString",value:function(){return this.lat+", "+this.lng}},{key:"getLat",value:function(){return this.lat}},{key:"getLng",value:function(){return this.lng}},{key:"getHeight",value:function(){return this.height}},{key:"equals",value:function(t){return this.lat===t.lat&&this.lng===t.lng&&this.height===t.height}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e))return new t(e[0],e[1],e[2],!0);if(!Array.isArray(e)&&"object"===(void 0===e?"undefined":(0,r.default)(e))&&null!==e)return new t(e.lat,e.lng,e.height,!0);throw new Error("`LatLng` argument must be specified as a LatLng instance, an object {lat: <lat>, lng: <lng>}, or an array of [<lat>, <lng>]")}}]),t}();t.exports=h},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){!function(n,i){t.exports=e=i()}(0,function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},o=i.lib={},r=o.Base=function(){return{extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=o.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,o=t.sigBytes;if(this.clamp(),i%4)for(var r=0;r<o;r++){var a=n[r>>>2]>>>24-r%4*8&255;e[i+r>>>2]|=a<<24-(i+r)%4*8}else for(var r=0;r<o;r+=4)e[i+r>>>2]=n[r>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],o=0;o<e;o+=4){var r=function(e){var e=e,n=987654321,i=4294967295;return function(){n=36969*(65535&n)+(n>>16)&i,e=18e3*(65535&e)+(e>>16)&i;var o=(n<<16)+e&i;return o/=4294967296,(o+=.5)*(t.random()>.5?1:-1)}}(4294967296*(n||t.random()));n=987654071*r(),i.push(4294967296*r()|0)}return new a.init(i,e)}}),s=i.enc={},l=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],o=0;o<n;o++){var r=e[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new a.init(n,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],o=0;o<n;o++){var r=e[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new a.init(n,e)}},c=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=o.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,o=n.sigBytes,r=this.blockSize,s=4*r,l=o/s;l=e?t.ceil(l):t.max((0|l)-this._minBufferSize,0);var u=l*r,c=t.min(4*u,o);if(u){for(var f=0;f<u;f+=r)this._doProcessBlock(i,f);var d=i.splice(0,u);n.sigBytes-=c}return new a.init(d,c)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(o.Hasher=f.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math);return t})},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(53);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(36),o=n(11)("toStringTag"),r="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:r?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(13),o=n(88),r=n(63),a=n(59)("IE_PROTO"),s=function(){},l=function(){var t,e=n(62)("iframe"),i=r.length;for(e.style.display="none",n(86).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[r[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=l(),void 0===e?n:o(n,e)}},function(t,e,n){var i=n(60),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},function(t,e,n){"use strict";function i(t){return[s.circle,s.ellipse,s.rectangle,s.polygon,s.polyline,s.marker,s.label].some(function(e){return t===e})}function o(t){return[s.imageGround,s.canvasGround].some(function(e){return t===e})}function r(t){return[s.indoorRegion,s.indoorPoi,s.indoorEscalator,s.indoor].some(function(e){return t===e})}Object.defineProperty(e,"__esModule",{value:!0}),e.isOverlayLayer=i,e.isTextureLayer=o,e.isIndoorLayer=r;var a=e.BASE_LAYER_TYPE={arrow:"arrow",point:"point",label:"label",line:"line",region:"region",ground:"ground",base:"base",building3d:"building3d",building2d:"building2d",text:"text"},s=e.RENDER_LAYER_TYPE={base:a.base,arrow:a.arrow,building3d:a.building3d,building2d:a.building2d,text:a.text,visualPlugin:"VISUAL_PLUGIN",marker:"MARKER",polyline:"POLYLINE",polygon:"POLYGON",label:"LABEL",circle:"CIRCLE",rectangle:"RECTANGLE",ellipse:"ELLIPSE",imageTile:"IMAGE_TILE",imageGround:"IMAGE_Ground",canvasGround:"CANVAS_Ground",indoor:"INDOOR",indoorRegion:"INDOOR_REGION",indoorPoi:"INDOOR_POI",indoorEscalator:"INDOOR_ESCALATOR",mask:"MASK",highlight:"HIGHLIGHT",trafficFlow:"TRAFFIC_FLOW"}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(64)("keys"),o=n(49);t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){"use strict";t.exports="TMap"},function(t,e,n){var i=n(7),o=n(8).document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(2),o=n(8),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(37)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=function(){function t(e,n){(0,r.default)(this,t),this.x=e,this.y=n}return(0,s.default)(t,[{key:"toString",value:function(){return this.x+", "+this.y}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"add",value:function(t){return this.clone()._add(t)}},{key:"sub",value:function(t){return this.clone()._sub(t)}},{key:"mult",value:function(t){return this.clone()._mult(t)}},{key:"div",value:function(t){return this.clone()._div(t)}},{key:"rotate",value:function(t){return this.clone()._rotate(t)}},{key:"matMult",value:function(t){return this.clone()._matMult(t)}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"dist",value:function(t){return Math.sqrt(this.distSqr(t))}},{key:"distSqr",value:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"angleWith",value:function(t){return this.angleWithSep(t.x,t.y)}},{key:"angleWithSep",value:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)}},{key:"normalize",value:function(){return this.clone()._unit()}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"length",value:function(){return this.mag()}},{key:"lengthSq",value:function(){return this.magSq()}},{key:"_matMult",value:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this}},{key:"_add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"_sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"_mult",value:function(t){return this.x*=t,this.y*=t,this}},{key:"_div",value:function(t){return this.x/=t,this.y/=t,this}},{key:"_unit",value:function(){return 0===this.x&&0===this.y?this:(this._div(this.mag()),this)}},{key:"_perp",value:function(){var t=this.y;return this.y=this.x,this.x=-t,this}},{key:"_rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,o=n*this.x+e*this.y;return this.x=i,this.y=o,this}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}}]),t}();l.convert=function(t){return t instanceof l?t:Array.isArray(t)?new l(t[0],t[1]):"x"in t&&"y"in t&&"number"==typeof t.x&&"number"==typeof t.y?new l(t.x,t.y):t},t.exports=l},function(t,e,n){var i=n(7);t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(54),o=n(11)("iterator"),r=n(29);t.exports=n(2).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||r[i(t)]}},function(t,e,n){var i=n(24),o=n(100),r=n(99),a=n(13),s=n(56),l=n(67),u={},c={},e=t.exports=function(t,e,n,f,d){var h,v,p,m,_=d?function(){return t}:l(t),g=i(n,f,e?2:1),y=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(r(_)){for(h=s(t.length);h>y;y++)if((m=e?g(a(v=t[y])[0],v[1]):g(t[y]))===u||m===c)return m}else for(p=_.call(t);!(v=p.next()).done;)if((m=o(p,g,v.value,e))===u||m===c)return m};e.BREAK=u,e.RETURN=c},function(t,e,n){var i=n(350)("wks"),o=n(269),r=n(52).Symbol,a="function"==typeof r;(t.exports=function(t){return i[t]||(i[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=i},function(t,e,n){"use strict";var i=n(37),o=n(6),r=n(83),a=n(19),s=n(29),l=n(134),u=n(44),c=n(89),f=n(11)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,p,m,_){l(n,e,v);var g,y,x,b=function(t){if(!d&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",w="values"==p,E=!1,T=t.prototype,A=T[f]||T["@@iterator"]||p&&T[p],P=A||b(p),I=p?w?b("entries"):P:void 0,k="Array"==e?T.entries||A:A;if(k&&(x=c(k.call(new t)))!==Object.prototype&&x.next&&(u(x,S,!0),i||"function"==typeof x[f]||a(x,f,h)),w&&A&&"values"!==A.name&&(E=!0,P=function(){return A.call(this)}),i&&!_||!d&&!E&&T[f]||a(T,f,P),s[e]=P,s[S]=h,p)if(g={values:w?P:b("values"),keys:m?P:b("keys"),entries:I},_)for(y in g)y in T||r(T,y,g[y]);else o(o.P+o.F*(d||E),e,g);return g}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=o(e),this.reject=o(n)}var o=n(46);t.exports.f=function(t){return new i(t)}},function(t,e,n){var i=n(47),o=n(38),r=n(17),a=n(66),s=n(22),l=n(87),u=Object.getOwnPropertyDescriptor;e.f=n(12)?u:function(t,e){if(t=r(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(8),o=n(2),r=n(37),a=n(74),s=n(14).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){e.f=n(11)},function(t,e){},function(t,e,n){t.exports={default:n(176),__esModule:!0}},function(t,e,n){var i=n(230),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},function(t,e,n){"use strict";var i=n(21),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=n(28);e.getJSON=function(t,n,i,o){o=o||0;var a=void 0,s=void 0,l=new XMLHttpRequest;return l.open("GET",n,!0),l.setRequestHeader("Accept","application/json"),l.onloadstart=function(){return a=+new Date},l.onerror=function(){console.error(l.response,l,n),o>2?i(new r.AJAXError(n,0)):(o+=1,e.getJSON(t,n,i,o))},l.onload=function(){if(l.status>=200&&l.status<300&&l.response){s=+new Date;var t=void 0;try{t=JSON.parse(l.response)}catch(t){return i(t)}i(null,t,s-a)}else i(new r.AJAXError(l.statusText,l.status))},l.send(),l},e.getArrayBuffer=function(t,e){var n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(t){e(t)},n.onload=function(){if(0===n.response.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:n.response,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new r.AJAXError(n.statusText,n.status))},n.send(),n},e.getImage=function(t,e){var n=new XMLHttpRequest,i=new o.default(function(i,o){n.open("GET",t),n.responseType="blob",n.timeout=e,n.onload=function(){n.status>=200&&n.status<300&&n.response?(0===n.response.size&&o(new r.AJAXError("The size of image is 0",404)),i(n.response)):o(new r.AJAXError(n.statusText,n.status))},n.onerror=function(){o(new r.AJAXError("error",0))},n.ontimeout=function(){o(new r.AJAXError("timeout",0))},n.onabort=function(){o(new r.AJAXError("abort",0))},n.send()});return{xhr:n,promise:i}},e.getImageData=function(t,n){return e.getArrayBuffer(t,function(t,e){if(t)return n(t);n(null,e)})}},function(t,e,n){t.exports={default:n(174),__esModule:!0}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SOURCE_TYPE={vector:"vector",geojson:"geojson",geoTask:"geo_task",imageTile:"image_tile",indoor:"indoor",indoorIndex:"indoor_index",ground:"ground",trafficFlow:"traffic_flow"}},function(t,e,n){var i=n(36);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){t.exports=n(19)},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";var i=n(221),o=i&&i.setItem&&i.getItem;t.exports={set:function(t,e,n){(null!==e?i.setItem(t,e):i.removeItem(t)).then(function(){n&&n()},function(t){console.error(t),n&&n(t)})},get:function(t,e){i.getItem(t).then(function(t){e&&e(t)},function(t){console.error(t),e&&e(null)})},support:function(){return o}}},function(t,e,n){var i=n(8).document;t.exports=i&&i.documentElement},function(t,e,n){t.exports=!n(12)&&!n(31)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(14),o=n(13),r=n(35);t.exports=n(12)?Object.defineProperties:function(t,e){o(t);for(var n,a=r(e),s=a.length,l=0;s>l;)i.f(t,n=a[l++],e[n]);return t}},function(t,e,n){var i=n(22),o=n(32),r=n(59)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(22),o=n(17),r=n(133)(!1),a=n(59)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~r(u,n)||u.push(n));return u}},function(t,e,n){t.exports=!n(51)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(50),o=n(520),r=n(249),a=Object.defineProperty;e.f=n(91)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){n[t]=n[t]||[],n[t].push(e)}function r(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}var a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(10),_=n(123),g=function(t){function e(){(0,u.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return t.setMaxListeners(500),t}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_on",value:function(t,e){return this._listeners=this._listeners||{},o(t,e,this._listeners),this.on(t,e),e}},{key:"_off",value:function(t,e){return r(t,e,this._listeners),r(t,e,this._oneTimeListeners),this.off(t,e),this}},{key:"_once",value:function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},o(t,e,this._oneTimeListeners),this.once(t,e),e}},{key:"_fire",value:function(t,e,n){if(this._listens(t)){e=n?m.extend({},e,{type:t}):m.extend({},e,{type:t,target:this});for(var i=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],o=0;o<i.length;o++)i[o].call(this,e);for(var a=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[],s=0;s<a.length;s++)a[s].call(this,e),r(t,a[s],this._oneTimeListeners);this._eventedParent&&this._eventedParent._fire(t,m.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else m.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this.emit(t,e),this}},{key:"_listens",value:function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent._listens(t)||this.listenerCount(t)>0}},{key:"_setEventedParent",value:function(t,e){return this._eventedParent=t,this._eventedParentData=e,this}},{key:"_clearAllListeners",value:function(){this._listeners={},this.removeAllListeners()}}]),e}(_);t.exports=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector4=e.Vector3=e.Matrix4=void 0;var i=n(20),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=function(t){var e=void 0,n=void 0,i=void 0;if(t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&t.hasOwnProperty("elements")){for(n=t.elements,i=new Float32Array(16),e=0;e<16;++e)i[e]=n[e];this.elements=i}else{var r=new Float32Array(16);r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.elements=r}};r.prototype.setIdentity=function(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},r.prototype.clone=function(){var t=new r,e=this.elements,n=t.elements;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],t},r.prototype.set=function(t){var e=void 0,n=t.elements,i=this.elements;if(n!==i){for(e=0;e<16;++e)i[e]=n[e];return this}},r.prototype.concat=function(t){var e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=void 0,s=this.elements,l=this.elements;if(n=t.elements,s===n)for(n=new Float32Array(16),e=0;e<16;++e)n[e]=s[e];for(e=0;e<4;e++)i=l[e],o=l[e+4],r=l[e+8],a=l[e+12],s[e]=i*n[0]+o*n[1]+r*n[2]+a*n[3],s[e+4]=i*n[4]+o*n[5]+r*n[6]+a*n[7],s[e+8]=i*n[8]+o*n[9]+r*n[10]+a*n[11],s[e+12]=i*n[12]+o*n[13]+r*n[14]+a*n[15];return this},r.prototype.multiply=r.prototype.concat,r.prototype.multiplyVector3=function(t){var e=this.elements,n=t.elements,i=new a,o=i.elements;return o[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+e[12],o[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+e[13],o[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+e[14],i},r.prototype.multiplyVector4=function(t){var e=this.elements,n=t.elements,i=new s,o=i.elements;return o[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12],o[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+n[3]*e[13],o[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+n[3]*e[14],o[3]=n[0]*e[3]+n[1]*e[7]+n[2]*e[11]+n[3]*e[15],i},r.prototype.transpose=function(){var t=void 0,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},r.prototype.setInverseOf=function(t){var e=void 0,n=void 0,i=t.elements,o=this.elements,r=new Float32Array(16);if(r[0]=i[5]*i[10]*i[15]-i[5]*i[11]*i[14]-i[9]*i[6]*i[15]+i[9]*i[7]*i[14]+i[13]*i[6]*i[11]-i[13]*i[7]*i[10],r[4]=-i[4]*i[10]*i[15]+i[4]*i[11]*i[14]+i[8]*i[6]*i[15]-i[8]*i[7]*i[14]-i[12]*i[6]*i[11]+i[12]*i[7]*i[10],r[8]=i[4]*i[9]*i[15]-i[4]*i[11]*i[13]-i[8]*i[5]*i[15]+i[8]*i[7]*i[13]+i[12]*i[5]*i[11]-i[12]*i[7]*i[9],r[12]=-i[4]*i[9]*i[14]+i[4]*i[10]*i[13]+i[8]*i[5]*i[14]-i[8]*i[6]*i[13]-i[12]*i[5]*i[10]+i[12]*i[6]*i[9],r[1]=-i[1]*i[10]*i[15]+i[1]*i[11]*i[14]+i[9]*i[2]*i[15]-i[9]*i[3]*i[14]-i[13]*i[2]*i[11]+i[13]*i[3]*i[10],r[5]=i[0]*i[10]*i[15]-i[0]*i[11]*i[14]-i[8]*i[2]*i[15]+i[8]*i[3]*i[14]+i[12]*i[2]*i[11]-i[12]*i[3]*i[10],r[9]=-i[0]*i[9]*i[15]+i[0]*i[11]*i[13]+i[8]*i[1]*i[15]-i[8]*i[3]*i[13]-i[12]*i[1]*i[11]+i[12]*i[3]*i[9],r[13]=i[0]*i[9]*i[14]-i[0]*i[10]*i[13]-i[8]*i[1]*i[14]+i[8]*i[2]*i[13]+i[12]*i[1]*i[10]-i[12]*i[2]*i[9],r[2]=i[1]*i[6]*i[15]-i[1]*i[7]*i[14]-i[5]*i[2]*i[15]+i[5]*i[3]*i[14]+i[13]*i[2]*i[7]-i[13]*i[3]*i[6],r[6]=-i[0]*i[6]*i[15]+i[0]*i[7]*i[14]+i[4]*i[2]*i[15]-i[4]*i[3]*i[14]-i[12]*i[2]*i[7]+i[12]*i[3]*i[6],r[10]=i[0]*i[5]*i[15]-i[0]*i[7]*i[13]-i[4]*i[1]*i[15]+i[4]*i[3]*i[13]+i[12]*i[1]*i[7]-i[12]*i[3]*i[5],r[14]=-i[0]*i[5]*i[14]+i[0]*i[6]*i[13]+i[4]*i[1]*i[14]-i[4]*i[2]*i[13]-i[12]*i[1]*i[6]+i[12]*i[2]*i[5],r[3]=-i[1]*i[6]*i[11]+i[1]*i[7]*i[10]+i[5]*i[2]*i[11]-i[5]*i[3]*i[10]-i[9]*i[2]*i[7]+i[9]*i[3]*i[6],r[7]=i[0]*i[6]*i[11]-i[0]*i[7]*i[10]-i[4]*i[2]*i[11]+i[4]*i[3]*i[10]+i[8]*i[2]*i[7]-i[8]*i[3]*i[6],r[11]=-i[0]*i[5]*i[11]+i[0]*i[7]*i[9]+i[4]*i[1]*i[11]-i[4]*i[3]*i[9]-i[8]*i[1]*i[7]+i[8]*i[3]*i[5],r[15]=i[0]*i[5]*i[10]-i[0]*i[6]*i[9]-i[4]*i[1]*i[10]+i[4]*i[2]*i[9]+i[8]*i[1]*i[6]-i[8]*i[2]*i[5],0===(n=i[0]*r[0]+i[1]*r[4]+i[2]*r[8]+i[3]*r[12]))return this;for(n=1/n,e=0;e<16;e++)o[e]=r[e]*n;return this},r.prototype.invert=function(){return this.setInverseOf(this)},r.prototype.setOrtho=function(t,e,n,i,o,r){if(t===e||n===i||o===r)throw"null frustum";var a=1/(e-t),s=1/(i-n),l=1/(r-o),u=this.elements;return u[0]=2*a,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*s,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=-2*l,u[11]=0,u[12]=-(e+t)*a,u[13]=-(i+n)*s,u[14]=-(r+o)*l,u[15]=1,this},r.prototype.ortho=function(t,e,n,i,o,a){return this.concat((new r).setOrtho(t,e,n,i,o,a))},r.prototype.setFrustum=function(t,e,n,i,o,r){if(t===e||i===n||o===r)throw"null frustum";if(o<=0)throw"near <= 0";if(r<=0)throw"far <= 0";var a=1/(e-t),s=1/(i-n),l=1/(r-o),u=this.elements;return u[0]=2*o*a,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*o*s,u[6]=0,u[7]=0,u[8]=(e+t)*a,u[9]=(i+n)*s,u[10]=-(r+o)*l,u[11]=-1,u[12]=0,u[13]=0,u[14]=-2*o*r*l,u[15]=0,this},r.prototype.frustum=function(t,e,n,i,o,a){return this.concat((new r).setFrustum(t,e,n,i,o,a))},r.prototype.setPerspective=function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(n===i||0===e)throw"null frustum";if(n<=0)throw"near <= 0";if(i<=0)throw"far <= 0";t=Math.PI*t/180/2;var a=Math.sin(t);if(0===a)throw"null frustum";var s=1/(i-n),l=Math.cos(t)/a,u=this.elements;return u[0]=l/e,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=l,u[6]=0,u[7]=0,u[8]=-o,u[9]=-r,u[10]=-(i+n)*s,u[11]=-1,u[12]=0,u[13]=0,u[14]=-2*n*i*s,u[15]=0,this},r.prototype.perspective=function(t,e,n,i){return this.concat((new r).setPerspective(t,e,n,i))},r.prototype.setScale=function(t,e,n){var i=this.elements;return i[0]=t,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=e,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=n,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},r.prototype.scale=function(t,e,n){var i=this.elements;return i[0]*=t,i[4]*=e,i[8]*=n,i[1]*=t,i[5]*=e,i[9]*=n,i[2]*=t,i[6]*=e,i[10]*=n,i[3]*=t,i[7]*=e,i[11]*=n,this},r.prototype.setTranslate=function(t,e,n){var i=this.elements;return i[0]=1,i[4]=0,i[8]=0,i[12]=t,i[1]=0,i[5]=1,i[9]=0,i[13]=e,i[2]=0,i[6]=0,i[10]=1,i[14]=n,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},r.prototype.translate=function(t,e,n){var i=this.elements;return i[12]+=i[0]*t+i[4]*e+i[8]*n,i[13]+=i[1]*t+i[5]*e+i[9]*n,i[14]+=i[2]*t+i[6]*e+i[10]*n,i[15]+=i[3]*t+i[7]*e+i[11]*n,this},r.prototype.setRotate=function(t,e,n,i){var o=void 0,r=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0;t=Math.PI*t/180;var v=this.elements;o=Math.sin(t);var p=Math.cos(t);return 0!==e&&0===n&&0===i?(e<0&&(o=-o),v[0]=1,v[4]=0,v[8]=0,v[12]=0,v[1]=0,v[5]=p,v[9]=-o,v[13]=0,v[2]=0,v[6]=o,v[10]=p,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1):0===e&&0!==n&&0===i?(n<0&&(o=-o),v[0]=p,v[4]=0,v[8]=o,v[12]=0,v[1]=0,v[5]=1,v[9]=0,v[13]=0,v[2]=-o,v[6]=0,v[10]=p,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1):0===e&&0===n&&0!==i?(i<0&&(o=-o),v[0]=p,v[4]=-o,v[8]=0,v[12]=0,v[1]=o,v[5]=p,v[9]=0,v[13]=0,v[2]=0,v[6]=0,v[10]=1,v[14]=0,v[3]=0,v[7]=0,v[11]=0,v[15]=1):(r=Math.sqrt(e*e+n*n+i*i),1!==r&&(a=1/r,e*=a,n*=a,i*=a),s=1-p,l=e*n,u=n*i,c=i*e,f=e*o,d=n*o,h=i*o,v[0]=e*e*s+p,v[1]=l*s+h,v[2]=c*s-d,v[3]=0,v[4]=l*s-h,v[5]=n*n*s+p,v[6]=u*s+f,v[7]=0,v[8]=c*s+d,v[9]=u*s-f,v[10]=i*i*s+p,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1),this},r.prototype.rotate=function(t,e,n,i){return this.concat((new r).setRotate(t,e,n,i))},r.prototype.setLookAt=function(t,e,n,i,o,r,a,s,l){var u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,v=void 0;u=i-t,c=o-e,f=r-n;var p=1/Math.sqrt(u*u+c*c+f*f);u*=p,c*=p,f*=p,d=c*l-f*s,h=f*a-u*l,v=u*s-c*a;var m=1/Math.sqrt(d*d+h*h+v*v);d*=m,h*=m,v*=m;var _=h*f-v*c,g=v*u-d*f,y=d*c-h*u,x=this.elements;return x[0]=d,x[1]=_,x[2]=-u,x[3]=0,x[4]=h,x[5]=g,x[6]=-c,x[7]=0,x[8]=v,x[9]=y,x[10]=-f,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,this.translate(-t,-e,-n)},r.prototype.lookAt=function(t,e,n,i,o,a,s,l,u){return this.concat((new r).setLookAt(t,e,n,i,o,a,s,l,u))},r.prototype.dropShadow=function(t,e){var n=new r,i=n.elements,o=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];return i[0]=o-e[0]*t[0],i[1]=-e[1]*t[0],i[2]=-e[2]*t[0],i[3]=-e[3]*t[0],i[4]=-e[0]*t[1],i[5]=o-e[1]*t[1],i[6]=-e[2]*t[1],i[7]=-e[3]*t[1],i[8]=-e[0]*t[2],i[9]=-e[1]*t[2],i[10]=o-e[2]*t[2],i[11]=-e[3]*t[2],i[12]=-e[0]*t[3],i[13]=-e[1]*t[3],i[14]=-e[2]*t[3],i[15]=o-e[3]*t[3],this.concat(n)},r.prototype.dropShadowDirectionally=function(t,e,n,i,o,r,a,s,l){var u=i*t+o*e+r*n;return this.dropShadow([t,e,n,-u],[a,s,l,0])};var a=function(){var t=1===arguments.length?arguments[0]:arguments,e=new Float32Array(3);t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this.elements=e};a.prototype.normalize=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],o=Math.sqrt(e*e+n*n+i*i);return o?1===o?this:(o=1/o,t[0]=e*o,t[1]=n*o,t[2]=i*o,this):(t[0]=0,t[1]=0,t[2]=0,this)},a.prototype.scale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.elements;return i[0]*=t,i[1]*=e,i[2]*=n,this},a.prototype.cross=function(t){var e=this.elements,n=t.elements;return new a(e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0])},a.prototype.equals=function(t){var e=this.elements,n=t.elements;return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]};var s=function(){var t=1===arguments.length?arguments[0]:arguments,e=new Float32Array(4);t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),this.elements=e};s.prototype.set=function(t,e,n){this.elements[0]=t,this.elements[1]=e,this.elements[2]=n},s.prototype.multiply=function(t){return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this},s.prototype.add=function(t){return this.elements[0]+=t.elements[0],this.elements[1]+=t.elements[1],this.elements[2]+=t.elements[2],this.elements[3]+=t.elements[3],this},s.prototype.minus=function(t){return this.elements[0]-=t.elements[0],this.elements[1]-=t.elements[1],this.elements[2]-=t.elements[2],this.elements[3]-=t.elements[3],this},e.Matrix4=r,e.Vector3=a,e.Vector4=s},function(t,e,n){t.exports={default:n(173),__esModule:!0}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(19);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:i(t,o,e[o]);return t}},,function(t,e,n){var i=n(29),o=n(11)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[o]===t)}},function(t,e,n){var i=n(13);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&i(r.call(t)),e}}},function(t,e,n){var i=n(11)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r=[7],a=r[i]();a.next=function(){return{done:n=!0}},r[i]=function(){return a},t(r)}catch(t){}return n}},function(t,e,n){var i=n(17),o=n(103).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?s(t):o(i(t))}},function(t,e,n){var i=n(90),o=n(63).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(13),o=n(7),r=n(71);t.exports=function(t,e){if(i(t),o(e)&&e.constructor===t)return e;var n=r.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var i=n(13),o=n(46),r=n(11)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[r])?e:o(n)}},function(t,e,n){var i,o,r,a=n(24),s=n(194),l=n(86),u=n(62),c=n(8),f=c.process,d=c.setImmediate,h=c.clearImmediate,v=c.MessageChannel,p=c.Dispatch,m=0,_={},g=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){g.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++m]=function(){s("function"==typeof t?t:Function(t),e)},i(m),m},h=function(t){delete _[t]},"process"==n(36)(f)?i=function(t){f.nextTick(a(g,t,1))}:p&&p.now?i=function(t){p.now(a(g,t,1))}:v?(o=new v,r=o.port2,o.port1.onmessage=y,i=a(r.postMessage,r,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(271))}(0,function(t){t.lib.Cipher||function(e){var n=t,i=n.lib,o=i.Base,r=i.WordArray,a=i.BufferedBlockAlgorithm,s=n.enc,l=(s.Utf8,s.Base64),u=n.algo,c=u.EvpKDF,f=i.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?w:x}return function(e){return{encrypt:function(n,i,o){return t(i).encrypt(e,n,i,o)},decrypt:function(n,i,o){return t(i).decrypt(e,n,i,o)}}}}()}),d=(i.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),h=i.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),v=d.CBC=function(){function t(t,n,i){var o=this._iv;if(o){var r=o;this._iv=e}else var r=this._prevBlock;for(var a=0;a<i;a++)t[n+a]^=r[a]}var n=h.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var i=this._cipher,o=i.blockSize;t.call(this,e,n,o),i.encryptBlock(e,n),this._prevBlock=e.slice(n,n+o)}}),n.Decryptor=n.extend({processBlock:function(e,n){var i=this._cipher,o=i.blockSize,r=e.slice(n,n+o);i.decryptBlock(e,n),t.call(this,e,n,o),this._prevBlock=r}}),n}(),p=n.pad={},m=p.Pkcs7={pad:function(t,e){for(var n=4*e,i=n-t.sigBytes%n,o=i<<24|i<<16|i<<8|i,a=[],s=0;s<i;s+=4)a.push(o);var l=r.create(a,i);t.concat(l)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},_=(i.BlockCipher=f.extend({cfg:f.cfg.extend({mode:v,padding:m}),reset:function(){f.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else{var i=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==i?this._mode.init(this,e&&e.words):(this._mode=i.call(n,this,e&&e.words),this._mode.__creator=i)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{var e=this._process(!0);t.unpad(e)}return e},blockSize:4}),i.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),g=n.format={},y=g.OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var i=r.create([1398893684,1701076831]).concat(n).concat(e);else var i=e;return i.toString(l)},parse:function(t){var e=l.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var i=r.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return _.create({ciphertext:e,salt:i})}},x=i.SerializableCipher=o.extend({cfg:o.extend({format:y}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var o=t.createEncryptor(n,i),r=o.finalize(e),a=o.cfg;return _.create({ciphertext:r,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(n,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),b=n.kdf={},S=b.OpenSSL={execute:function(t,e,n,i){i||(i=r.random(8));var o=c.create({keySize:e+n}).compute(t,i),a=r.create(o.words.slice(e),4*n);return o.sigBytes=4*e,_.create({key:o,iv:a,salt:i})}},w=i.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:S}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var o=i.kdf.execute(n,t.keySize,t.ivSize);i.iv=o.iv;var r=x.encrypt.call(this,t,e,o.key,i);return r.mixIn(o),r},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var o=i.kdf.execute(n,t.keySize,t.ivSize,e.salt);return i.iv=o.iv,x.decrypt.call(this,t,e,o.key,i)}})}()})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=e.textures=void 0;var o=n(0),r=i(o),a=n(1),s=i(a),l=function(){},u=function(){function t(e,n,i,o){(0,r.default)(this,t),this.max=n||1e4,this.type=e||"default",this.count=0,this.store={},this.reduceRange=i||Math.max(1,~~this.max/100),this.deleteCallback=o||l}return(0,s.default)(t,[{key:"set",value:function(t,e){return this.count>=this.max&&this.reduce(),t in this.store||(this.count+=1),this.store[t]=e,e}},{key:"get",value:function(t){return this.store[t]}},{key:"reduce",value:function(){var t=0,e=this.reduceRange;for(var n in this.store)if(this.store.hasOwnProperty(n)){if(!(t<e))break;t+=1,this.deleteCallback(this.store[n]),delete this.store[n]}this.count-=e}},{key:"clear",value:function(){for(var t in this.store)this.store.hasOwnProperty(t)&&(this.deleteCallback(this.store[t]),this.store[t]=null);this.store={},this.count=0}},{key:"exist",value:function(t){return t in this.store}},{key:"remove",value:function(t){t in this.store&&(this.deleteCallback(this.store[t]),delete this.store[t],this.count-=1)}}]),t}(),c=new u("texture",1e3);e.textures=c,e.Store=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return{x:t/n.width*2-1,y:-e/n.height*2+1,z:1}}function r(t,e,n){return{x:(t+1)/2*n.width,y:(1-e)/2*n.height}}function a(t,e,n){var i=t.multiplyVector4(e),o=i.elements.map(function(t){return t/i.elements[3]}),a=r(o[0],o[1],n);return{x:a.x,y:a.y,depthScale:1}}function s(t,e){var n=t.multiplyVector4(e);return n.multiply(1/n.elements[3])}function l(t,e){var n=t.clone().invert(),i=new b.Vector4(e.x,e.y,0,1),o=new b.Vector4(e.x,e.y,1,1),r=n.multiplyVector4(i),a=n.multiplyVector4(o);r.multiply(1/r.elements[3]),a.multiply(1/a.elements[3]);var s=(0-r.elements[2])/(a.elements[2]-r.elements[2]),l=r.add(a.minus(r).multiply(s));return{x:l.elements[0],y:l.elements[1]}}function u(t,e,n){var i=t.clone().invert(),o=new b.Vector4(e.x,e.y,0,1),r=new b.Vector4(e.x,e.y,1,1),a=i.multiplyVector4(o),s=i.multiplyVector4(r);a.multiply(1/a.elements[3]),s.multiply(1/s.elements[3]);var l=new P.default(new b.Vector3(a.elements),new b.Vector3(s.elements)),u=new k.default(new b.Vector3(0,0,-n),n),c=u.intersectWithLine(l);if(c.length){var f=(0,v.default)(c,2),d=f[0],h=f[1],p=d.elements[2]>h.elements[2]?d:h,m=(0,v.default)(p.elements,3);return{x:m[0],y:m[1],z:m[2]}}return null}function c(t){return 2*Math.PI*m.default/(Math.pow(2,t)*g.default.tileSize)}function f(t){var e=t.x,n=t.y;return e=e/M*180,n=n/M*180,n=180/Math.PI*(2*Math.atan(Math.exp(n*Math.PI/180))-Math.PI/2),new w.default(n,e)}function d(t){var e=t.lng,n=t.lat;return e=e*M/180,n=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180),n=n*M/180,new T.default(e,n)}Object.defineProperty(e,"__esModule",{value:!0});var h=n(30),v=i(h);e.fromScreenToNdc=o,e.fromNdcToScreen=r,e.getScreenCoordsByCustomMatrix=a,e.getNdcCoordsByCustomMatrix=s,e.getZPlaneCoordsByCustomMatrix=l,e.getSphereCoordsByCustomMatrix=u,e.getSpatialResolution=c,e.mercatorToLatLng=f,e.latLngToMercator=d;var p=n(294),m=i(p),_=n(25),g=i(_),y=n(242),x=i(y),b=n(94),S=n(45),w=i(S),E=n(65),T=i(E),A=n(375),P=i(A),I=n(376),k=i(I),L=x.default[1],M=L/2},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(124),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default[0]},,,function(t,e,n){t.exports={default:n(405),__esModule:!0}},function(t,e,n){var i=n(240);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={QMAPI_style:"QMAPI__style__",QMAPI_style_indoor:"QMAPI__style__indoor__",QMAPI_poi_icon:"QMAPI__poi__icon",QMAPI_poi_icon_json:"QMAPI__poi__icon__json",QMAPI_indoor_buffer:"QMAPI__indoor__buffer__",QMAPI_indoor_index:"QMAPI__indoor__index__",VECTOR_SOURCE_ID:"vector_source",QMAPI_oversea:"QMAPI__oversea"};e.IMAGE_DISPLAY={ORIGIN:0,SCALE:1,REPEAT:2},e.VIEW_MODE={MAP_2D:"2D",MAP_3D:"3D",SPHERE:"SPHERE"};e.default=i},function(t,e,n){"use strict";function i(t){return t-(0,a.default)(t)}function o(t){var e=(0,a.default)(t);return{high:e,low:t-e}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(397),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.fp64LowPart=i,e.splitLatLngNumber=o},function(t,e,n){t.exports={default:n(175),__esModule:!0}},function(t,e,n){t.exports={default:n(177),__esModule:!0}},function(t,e,n){var i=n(36);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){"use strict";var i=n(8),o=n(2),r=n(14),a=n(12),s=n(11)("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:i[t];a&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";function i(t){console&&console.warn&&console.warn(t)}function o(){o.init.call(this)}function r(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function a(t,e,n,o){var a,s,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(s=t._events,void 0===s?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),l=s[e]),void 0===l)l=s[e]=n,++t._eventsCount;else if("function"==typeof l?l=s[e]=o?[n,l]:[l,n]:o?l.unshift(n):l.push(n),(a=r(t))>0&&l.length>a&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,i(u)}return t}function s(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,m(this.listener,this.target,t))}function l(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=s.bind(i);return o.listener=n,i.wrapFn=o,o}function u(t,e,n){var i=t._events;if(void 0===i)return[];var o=i[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?h(o):f(o,o.length)}function c(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function d(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function h(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}var v,p="object"==typeof Reflect?Reflect:null,m=p&&"function"==typeof p.apply?p.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};v=p&&"function"==typeof p.ownKeys?p.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var _=Number.isNaN||function(t){return t!==t};t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var g=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(t){if("number"!=typeof t||t<0||_(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");g=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||_(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return r(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var r;if(e.length>0&&(r=e[0]),r instanceof Error)throw r;var a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}var s=o[t];if(void 0===s)return!1;if("function"==typeof s)m(s,this,e);else for(var l=s.length,u=f(s,l),n=0;n<l;++n)m(u[n],this,e);return!0},o.prototype.addListener=function(t,e){return a(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return a(this,t,e,!0)},o.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,l(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,i,o,r,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===e||n[r].listener===e){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():d(n,o),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},o.prototype.listeners=function(t){return u(this,t,!0)},o.prototype.rawListeners=function(t){return u(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},o.prototype.listenerCount=c,o.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},function(t,e,n){"use strict";function i(t,e){t.loadScriptTime=e,l[0]=t;for(var n in t)r.hasOwnProperty(n)&&(r[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});var o=n(61),r=n(25),a=2*Math.PI*6378136.49,s=[6378136.49,a],l=[{},s],u=self[o]&&self[o].__load;u&&u(i),self.CESIUM_BASE_URL=r.cesiumStaticSrc,e.default=l},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.GROUND,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 1e4*t+(0,r.clamp)(e,0,9999)}function o(){return 1e4*a.TEXT}Object.defineProperty(e,"__esModule",{value:!0}),e.LAYER_LEVEL=void 0,e.getRank=i,e.getNAALine=o;var r=n(10),a=e.LAYER_LEVEL={UNDERGROUND:0,BASE:1,GROUND:2,BUILDING:3,OVERLAY_AA:4,POST_PROCESS:5,TEXT:6,OVERLAY_NAA:7}},function(t,e,n){"use strict";function i(t){return t*(Math.PI/180)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){t.exports={default:n(131),__esModule:!0}},function(t,e,n){t.exports={default:n(304),__esModule:!0}},function(t,e,n){t.exports={default:n(179),__esModule:!0}},function(t,e,n){n(39),n(33),t.exports=n(139)},function(t,e,n){n(39),n(33),t.exports=n(140)},function(t,e){t.exports=function(){}},function(t,e,n){var i=n(17),o=n(56),r=n(137);t.exports=function(t){return function(e,n,a){var s,l=i(e),u=o(l.length),c=r(a,u);if(t&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){"use strict";var i=n(55),o=n(38),r=n(44),a={};n(19)(a,n(11)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:o(1,n)}),r(t,e+" Iterator")}},function(t,e,n){var i=n(12),o=n(35),r=n(17),a=n(47).f;t.exports=function(t){return function(e){for(var n,s=r(e),l=o(s),u=l.length,c=0,f=[];u>c;)n=l[c++],i&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var i=n(60),o=n(58);t.exports=function(t){return function(e,n){var r,a,s=String(o(e)),l=i(n),u=s.length;return l<0||l>=u?t?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):r:t?s.slice(l,l+2):a-56320+(r-55296<<10)+65536)}}},function(t,e,n){var i=n(60),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},function(t,e,n){var i=n(7);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var i=n(13),o=n(67);t.exports=n(2).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){var i=n(54),o=n(11)("iterator"),r=n(29);t.exports=n(2).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||r.hasOwnProperty(i(e))}},function(t,e,n){"use strict";var i=n(132),o=n(111),r=n(29),a=n(17);t.exports=n(70)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(52),o=n(151),r=n(150),a=n(269)("src"),s=n(819),l=(""+s).split("toString");n(84).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(r(n,"name")||o(n,"name",e)),t[e]!==n&&(u&&(r(n,a)||o(n,a,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,n){var i=n(9),o=n(51),r=n(240),a=/"/g,s=function(t,e,n,i){var o=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(i).replace(a,"&quot;")+'"'),s+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),i(i.P+i.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var e=0;e<t.length;e++){var n=t[e].string,i=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,n){if(-1!==n.indexOf(t[e].subString))return t[e].identity}else if(i)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:self.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};i.init(),e.default=i},function(t,e,n){"use strict";function i(t,e,n){var i=window.document.createElement(t);return e&&(i.className=e),n&&n.appendChild(i),i}function o(t){for(var e=0;e<t.length;e++)if(t[e]in w)return t[e];return t[0]}function r(){E&&(T=w[E],w[E]="none")}function a(){E&&(w[E]=T)}function s(t,e){t.style[A]=e}function l(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",l,!0)}function u(){window.addEventListener("click",l,!0),window.setTimeout(function(){window.removeEventListener("click",l,!0)},0)}function c(t,e){var n=t.getBoundingClientRect();return e=e.touches?("touchend"===e.type?e.changedTouches:e.touches)[0]:e,d(t,new S(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop))}function f(t,e){for(var n=t.getBoundingClientRect(),i=[],o="touchend"===e.type?e.changedTouches:e.touches,r=0;r<o.length;r++){var a=new S(o[r].clientX-n.left-t.clientLeft,o[r].clientY-n.top-t.clientTop),s=d(t,a);i.push(s)}return i}function d(t,e){var n=null,i=getComputedStyle(t),o=i.width,r=i.height,a=i.transform;for(o=o.replace("px",""),r=r.replace("px","");null!==t;){if(!a){a=getComputedStyle(t).transform}if("none"!==a){var s=a.match(/\(([^)]*)\)/),l=(0,x.default)(s,2),u=l[1],c=u.split(","),f=new b.Matrix4;f.elements[0]=parseFloat(c[0].trim()),f.elements[1]=parseFloat(c[1].trim()),f.elements[4]=parseFloat(c[2].trim()),f.elements[5]=parseFloat(c[3].trim()),n=n?f.multiply(n):f}t=t.parentElement,a=null}if(!n)return e;var d=new b.Vector3([o,0,0]),h=new b.Vector3([0,r,0]),v=new b.Vector3([o,r,0]),p=n.multiplyVector3(d),m=n.multiplyVector3(h),_=n.multiplyVector3(v),g=Math.min.apply(null,[0,p.elements[0],m.elements[0],_.elements[0]]),y=Math.min.apply(null,[0,p.elements[1],m.elements[1],_.elements[1]]),w=n.invert(),E=new b.Vector3([e.x+g,e.y+y,0]),T=w.multiplyVector3(E);return new S(T.elements[0],T.elements[1])}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function v(t){var e=document.createElement("div");e.innerHTML=t;var n=document.createDocumentFragment();return Array.prototype.slice.apply(e.childNodes).forEach(function(t){n.appendChild(t)}),n}function p(t){if("pageX"in t&&"pageY"in t)return{x:t.pageX,y:t.pageY};if("touches"in t&&t.touches.length>0){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}if("changedTouches"in t&&t.changedTouches.length>0){var n=t.changedTouches[0];return{x:n.pageX,y:n.pageY}}}function m(t,e){t&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){g(t,e)||(t.className+=" "+e)}))}function _(t,e){t&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){g(t,e)&&(t.className=t.className.replace(" "+e,""))}))}function g(t,e){if(t){var n=" "+e+" ";return(" "+t.className+" ").includes(n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSITIONTIMINGFUNCTION=e.TRANSITIONDURATION=e.TRANSITIONEND=e.TRANSITION=e.TRANSFORM=e.TRANSFORMORIGIN=void 0;var y=n(30),x=function(t){return t&&t.__esModule?t:{default:t}}(y);e.create=i,e.disableDrag=r,e.enableDrag=a,e.setTransform=s,e.suppressClick=u,e.mousePos=c,e.touchPos=f,e.remove=h,e.toDom=v,e.getPointerXY=p,e.addClass=m,e.removeClass=_,e.hasClass=g;var b=n(94),S=n(65),w=window.document.documentElement.style,E=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T=void 0,A=(e.TRANSFORMORIGIN=o(["TRANSFORMORIGIN","WebkitTransformOrigin","OTransformOrigin","MozTransformOrigin","msTransformOrigin"]),e.TRANSFORM=o(["transform","WebkitTransform","OTransform","MozTransform","msTransform"])),P=e.TRANSITION=o(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);e.TRANSITIONEND="transition"===P?P+"end":P+"End",e.TRANSITIONDURATION=P+"Duration",e.TRANSITIONTIMINGFUNCTION=P+"TimingFunction"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(279),p=i(v),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createBuffer()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteBuffer(this._object),this.gl.disableVertexAttribArray(this.location)}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.target=t.target||this.gl.ARRAY_BUFFER,t.data&&(this.bind(),this.bufferData(t.data,t))}},{key:"bind",value:function(t,e){t=t||this.gl,e=e||this.target,t.bindBuffer(e,this._object)}},{key:"unbind",value:function(t,e){t=t||this.gl,e=e||this.target,t.bindBuffer(e,null)}},{key:"bufferData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl.bufferData(this.target,t,e.usage||this.gl.STATIC_DRAW)}},{key:"bufferSubData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl.bufferSubData(this.target,e.offset||0,t)}},{key:"pointToAttrib",value:function(t){var e=t.location,n=t.size,i=t.type,o=t.normalized,r=void 0!==o&&o,a=t.stride,s=void 0===a?0:a,l=t.offset,u=void 0===l?0:l,c=t.enable,f=void 0===c||c;this.location=e,this.gl.vertexAttribPointer(e,n,i,r,s,u),f&&this.gl.enableVertexAttribArray(e)}},{key:"buffer",get:function(){return this._object}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(279),p=i(v),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,e);var i=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n));return i._initialize(n),i}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createTexture()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteTexture(this._object)}},{key:"_initialize",value:function(t){var e=t.pixels,n=t.originalWidth,i=t.originalHeight,o=t.width,r=t.height,a=t.internalformat,s=t.type,l=void 0===s?"UNSIGNED_BYTE":s,u=t.format,c=void 0===u?"RGBA":u,f=t.target,d=void 0===f?"TEXTURE_2D":f,h=e&&e.width,v=e&&e.height;this.pixels=e||null,this.originalWidth=n||h,this.originalHeight=i||v,this.width=o||h,this.height=r||v,this.type=l,this.format=c,this.internalformat=a||c,this.target=d,this._uploaded=!1}},{key:"bind",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||this.gl;var n=this.target,i=this._object,o=t.TEXTURE0+(e.textureIndex||0);t.activeTexture(o),t.bindTexture(t[n],i)}},{key:"unbind",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||this.gl;var n=this.target,i=t.TEXTURE0+(e.textureIndex||0);t.activeTexture(i),t.bindTexture(this.gl[n],null)}},{key:"resize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.width=t,this.height=e;var i=this.gl,o=this.target;i&&(this.bind(null,n),this._preSet(n),i.texImage2D(i[o],0,i[this.internalformat],t,e,0,i[this.format],i[this.type],this.pixels))}},{key:"update",value:function(t,e){t&&(this.originalWidth=t.width,this.width=t.width,this.height=t.height,this.originalHeight=t.height,this.pixels=t||null,this._uploaded=!1,this.upload(e))}},{key:"updateSub",value:function(t,e){if(t){this.bind(null,e),this._preSet(e);var n=this.gl,i=this.target,o=this.format,r=this.type,a=e.xOffset,s=e.yOffset;n.texSubImage2D(n[i],0,a,s,n[o],n[r],t)}}},{key:"upload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.gl||console.error("Texture donnot have gl, unable upload to GPU!");var e=this.gl,n=this.target;this.bind(null,t),this._preSet(t),this._uploaded||(e.isWebGL2?e.texImage2D(e[n],0,e[this.internalformat],this.width,this.height,0,e[this.format],e[this.type],this.pixels):e.texImage2D(e[n],0,e[this.internalformat],e[this.format],e[this.type],this.pixels),t.useMipmap&&e.generateMipmap(e[n])),this._uploaded=!0}},{key:"copy",value:function(t){var e=this.gl,n=this.width,i=this.height,o=this.target;e||console.error("Texture donnot have gl, unable upload to GPU!"),this.bind(null,t),this._preSet(t),e.copyTexImage2D(e[o],0,e[this.internalformat],0,0,n,i,0)}},{key:"destroy",value:function(){this.gl&&this.delete()}},{key:"_preSet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl,n=this.target;t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),t.premultiply&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texParameteri(e[n],e.TEXTURE_MIN_FILTER,t.minFilter||e.LINEAR),e.texParameteri(e[n],e.TEXTURE_MAG_FILTER,t.magFilter||e.LINEAR),e.texParameteri(e[n],e.TEXTURE_WRAP_S,t.wrapS||e.CLAMP_TO_EDGE),e.texParameteri(e[n],e.TEXTURE_WRAP_T,t.wrapT||e.CLAMP_TO_EDGE)}},{key:"texture",get:function(){return this._object}}]),e}(p.default);e.default=m},function(t,e,n){t.exports={default:n(237),__esModule:!0}},function(t,e,n){t.exports={default:n(178),__esModule:!0}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(92),o=n(267);t.exports=n(91)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(316),o=n(240);t.exports=function(t){return i(o(t))}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UNIFORM_PART="\n    uniform mat4 uMatrix;\n    uniform vec4 uCenter;\n    uniform float uZoom;\n\n    uniform vec3 uPixelsPerMeter;\n\n    uniform vec2 uResolution;\n    uniform vec3 uProject_uCommonUnitsPerWorldUnit;\n    uniform vec3 uProject_uCommonUnitsPerWorldUnit2;\n",e.PROJECTION_PART="\n    float PI = 3.141592653589793;\n\n    float degreeToRadian(float deg) {\n      \treturn deg * PI / 180.;\n\t}\n\tconst float THRESHOLD_ZOOM = 9.0;\n\tfloat radianToDegree(float rad) {\n\t\treturn rad / PI * 180.;\n\t}\n\t\n\t\n\tvec2 fromPointToLatLng(vec2 point) {\n\t\tvec2 c = vec2(128.0, 128.0);\n\t\tfloat lng = (point.x - c.x) / 256. * 360.;\n\t\tfloat a = - (point.y - c.y) / 256. * 2. * PI;\n\t\tfloat lat = radianToDegree(2. * atan(exp(a)) - PI / 2.);\n\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\treturn vec2(lng, lat);\n\t}\n\n\n    vec2 fromLatLngToPoint(vec2 latlng) {\n      \tvec2 c = vec2(0.0, 0.0);\n      \tvec2 d = vec2(128.0, 128.0);\n      \tc.x = d.x + latlng.x * (256. / 360.);\n      \tfloat e = clamp(sin(degreeToRadian(latlng.y)), -(1. - 1E-15), 1. - 1E-15);\n      \tc.y = d.y + 0.5 * log((1. + e) / (1. - e)) * -(256. / (2. * PI));\n      \treturn c;\n    }\n\n\n\n    vec2 project_position(vec2 latlng, float mapzoom) {\n      \tvec2 tileCoord = fromLatLngToPoint(latlng);\n      \tfloat dimension = pow(2., mapzoom);\n      \ttileCoord.xy *= dimension;\n\n      \treturn tileCoord;\n    }\n\n\n    vec2 project_view_local_position(vec2 latlng) {\n      \tvec2 centerCoord = project_position(uCenter.xy, uZoom);\n      \tvec2 p = project_position(latlng.xy, uZoom);\n\n      \t\n      \treturn vec2(p.x - centerCoord.x, centerCoord.y - p.y);\n    }\n\n    vec3 project_offset(vec3 offset) {\n      \tfloat dy = offset.y;\n\t\t\n      \tdy = clamp(dy, -1., 1.);\n      \tvec3 commonUnitsPerWorldUnit = uProject_uCommonUnitsPerWorldUnit + uProject_uCommonUnitsPerWorldUnit2 * dy;\n\t\t\n      \treturn vec3(offset.xyz * commonUnitsPerWorldUnit.xyz);\n    }\n    \n\n\tvec3 project_view_local_position_precision(vec3 latlngHigh, vec2 latlngLow) {\n\t\t\n\n\t\t\n\t\tvec3 temp_latlng_high = vec3(latlngHigh.x ,latlngHigh.y, latlngHigh.z);\n\t\t\n\t\tif (uCenter.x > 0.0) {\n\t\t\ttemp_latlng_high = vec3(latlngHigh.x ,latlngHigh.y, latlngHigh.z);\n\t\t} else {\n\t\t\ttemp_latlng_high = vec3(latlngHigh.x ,latlngHigh.y, latlngHigh.z);\n\t\t}\n\n\t\tvec2 high = temp_latlng_high.xy - uCenter.xy;\n\t\tvec2 low = latlngLow.xy - uCenter.zw;\n\n\t\treturn mix(\n\t\t\tvec3(project_view_local_position(temp_latlng_high.xy), uProject_uCommonUnitsPerWorldUnit.z * temp_latlng_high.z),\n\t\t\tproject_offset(vec3(high + low, temp_latlng_high.z)),\n\t\t\tstep(9.0, uZoom)\n\t\t);\n\t}\n\n\n    vec2 project_view_local_position_precision(vec2 latlngHigh, vec2 latlngLow) {\n      \tvec3 result = project_view_local_position_precision(vec3(latlngHigh.xy, 0.0), latlngLow);\n\n      \treturn result.xy;\n\t}\n\t\n  vec2 centerPositiveCross0( vec3 startTemp, vec3 endTemp,vec3 latlngHigh,vec3 endLatlngHigh,float startLng,float endLng,float centerLng, float halfPixelDegree){\n    startTemp.x = mix(latlngHigh.x ,latlngHigh.x + 360.0, step(halfPixelDegree, centerLng - startLng) * step( halfPixelDegree, centerLng - endLng));\n    endTemp.x = mix(endLatlngHigh.x ,endLatlngHigh.x + 360.0, step(halfPixelDegree, centerLng - startLng) * step( halfPixelDegree, centerLng - endLng));\n    return vec2(startTemp.x, endTemp.x);\n  }\n\n  vec2 centerPositiveCross180( vec3 startTemp, vec3 endTemp,vec3 latlngHigh,vec3 endLatlngHigh,float startLng,float endLng,float centerLng, float halfPixelDegree){\n    float transit = 1.0;\n\n    startTemp.x = mix(latlngHigh.x , latlngHigh.x + 360.0, step( halfPixelDegree,centerLng -startLng));\n\n    endTemp.x = mix(endLatlngHigh.x , endLatlngHigh.x + 360.0, step( halfPixelDegree, centerLng -endLng));\n    transit = step(halfPixelDegree,centerLng -startLng) * step(halfPixelDegree, centerLng -endLng);\n\n\n\n    endTemp.x = mix(\n      endTemp.x,\n      mix(endLatlngHigh.x , endLatlngHigh.x + 360.0, step(startLng - endLng,180.0)),\n      transit\n    );\n\n    startTemp.x = mix(\n      startTemp.x,\n      mix(latlngHigh.x , latlngHigh.x + 360.0, step( endLng - startLng ,180.0)),\n      transit\n    );\n     return vec2(startTemp.x, endTemp.x);\n  }\n\n  vec2 centerNegativeCross0( vec3 startTemp, vec3 endTemp,vec3 latlngHigh,vec3 endLatlngHigh,float startLng,float endLng,float centerLng, float halfPixelDegree){\n    startTemp.x = mix(latlngHigh.x , latlngHigh.x - 360.0, step(halfPixelDegree, startLng - centerLng ) * step( halfPixelDegree, endLng - centerLng));\n    endTemp.x = mix(endLatlngHigh.x , endLatlngHigh.x - 360.0, step(halfPixelDegree, startLng - centerLng ) * step( halfPixelDegree, endLng - centerLng));\n    return vec2(startTemp.x, endTemp.x);\n  }\n\n  vec2 centerNegativeCross180( vec3 startTemp, vec3 endTemp,vec3 latlngHigh,vec3 endLatlngHigh,float startLng,float endLng,float centerLng, float halfPixelDegree){\n    float transit = 1.0;\n    startTemp.x = mix(latlngHigh.x , latlngHigh.x - 360.0, step( halfPixelDegree, startLng - centerLng));\n    endTemp.x = mix(endLatlngHigh.x , endLatlngHigh.x - 360.0, step( halfPixelDegree, endLng - centerLng));\n\n    transit = step(halfPixelDegree,centerLng -startLng) * step(halfPixelDegree, centerLng -endLng);\n    startTemp.x = mix(\n      startTemp.x,\n      mix(latlngHigh.x , latlngHigh.x - 360.0, step( startLng - endLng  ,180.0)),\n      transit\n    );\n    endTemp.x = mix(\n      endTemp.x,\n      mix(endLatlngHigh.x , endLatlngHigh.x - 360.0, step(endLng - startLng ,180.0)),\n      transit\n    );\n    return vec2(startTemp.x, endTemp.x);\n  }\n\n\tvoid geodesic_project_view_local_precision(vec3 latlngHigh, vec2 latlngLow,vec3 endLatlngHigh, vec2 endLatlngLow, inout vec3 geodesic_Position_Start, inout vec3 geodesic_Position_End, vec2 uProject_uDegreePerPixels) {\n\t\t\n    float halfPixelDegree = uResolution.x * uProject_uDegreePerPixels.x / 2.0;\n\t\tvec3 startTemp = latlngHigh;\n\t\tvec3 endTemp = endLatlngHigh;\n\t\tfloat startLng = latlngHigh.x + latlngLow.x;\n    float endLng = endLatlngHigh.x + endLatlngLow.x;\n    float centerLng = uCenter.x + uCenter.z;\n    vec2 startEndLngCross0 = mix(\n      centerNegativeCross0(startTemp,endTemp,latlngHigh,endLatlngHigh,startLng,endLng,centerLng, halfPixelDegree),\n      centerPositiveCross0(startTemp,endTemp,latlngHigh,endLatlngHigh,startLng,endLng,centerLng, halfPixelDegree),\n      step(0.0, uCenter.x)\n    );\n    vec2 startEndLngCross180 = mix(\n      centerNegativeCross180(startTemp,endTemp,latlngHigh,endLatlngHigh,startLng,endLng,centerLng, halfPixelDegree),\n      centerPositiveCross180(startTemp,endTemp,latlngHigh,endLatlngHigh,startLng,endLng,centerLng, halfPixelDegree),\n      step(0.0, uCenter.x)\n    );\n    startTemp.x = mix(\n      startEndLngCross180.x,\n      startEndLngCross0.x,\n      step(abs(startLng - endLng), 180.0));\n    endTemp.x = mix(\n      startEndLngCross180.y,\n      startEndLngCross0.y,\n      step(abs(startLng - endLng), 180.0));\n  \n\t\tvec3 startNew = project_view_local_position_precision(startTemp, latlngLow);\n\t\tvec3 endNew = project_view_local_position_precision(endTemp, endLatlngLow);\n\t\tgeodesic_Position_Start = startNew;\n\t\tgeodesic_Position_End = endNew;\n\t}\n\tvec3 latlng_to_cartesian(vec2 latlng) {\n\t\t\n\t\tvec2 spherical = vec2(degreeToRadian(latlng.x), degreeToRadian(latlng.y));\n\t\t\n\t\t\n\t\tvec3 cartesian = vec3(\n\t\t\tcos(spherical.y) * sin(spherical.x),\n\t\t\tsin(spherical.y),\n\t\t\tcos(spherical.y) * cos(spherical.x)\n\t\t);\n\n\t\treturn cartesian;\n\t}\n\t\n\t\n\tvec4 project_view_sphere_position(vec2 latlng) {\n\t\tvec3 cartesian = latlng_to_cartesian(latlng);\n\n\t\t\n\t\tfloat rotateY = - degreeToRadian(uCenter.x);\n\t\tfloat rotateX = degreeToRadian(uCenter.y);\n\t\tfloat r = 256. * pow(2., uZoom) / (2. * PI);\n\t\tmat4 rotate1 = mat4(\n\t\t\tcos(rotateY), 0., -sin(rotateY), 0.,\n\t\t\t0., 1., 0., 0.,\n\t\t\tsin(rotateY), 0., cos(rotateY), 0.,\n\t\t\t0., 0., 0., 1.\n\t\t);\n\t\tmat4 rotate2 = mat4(\n\t\t\t1., 0., 0., 0.,\n\t\t\t0., cos(rotateX), sin(rotateX), 0.,\n\t\t\t0., -sin(rotateX), cos(rotateX), 0.,\n\t\t\t0., 0., 0., 1.\n\t\t);\n\t\tmat4 scaleAndTrans = mat4(\n\t\t\tr, 0., 0., 0.,\n\t\t\t0., r, 0., 0.,\n\t\t\t0., 0., r, 0.,\n\t\t\t0., 0., -r, 1.\n\t\t);\n\t\tvec4 position = scaleAndTrans * rotate2 * rotate1 * vec4(cartesian, 1.0);\n\t\treturn position;\n\t}\n\n\n    vec2 proj_position_to_screen(vec4 device) {\n\t\tvec3 device_normal = device.xyz / device.w;\n\t\tvec2 clip_pos = (device_normal * 0.5 + 0.5).xy;\n\t\treturn clip_pos * uResolution;\n    }\n    \n\n\tvec4 screen_to_proj_position(vec2 screen, float z, float w) {\n\t    vec2 clip_pos = screen / uResolution;\n\t    vec2 device_normal = clip_pos * 2.0 - 1.0;\n\t    return vec4(device_normal * w, z, w);\n\t}\n\n    vec3 project_scale(vec3 meters) {\n      \treturn meters * uPixelsPerMeter;\n    }\n\n    vec2 rotate_by_angle_onScreen(vec2 vertex, float angle) {\n      \tfloat angle_radian = angle * PI / 180.0;\n      \tfloat cos_angle = cos(angle_radian);\n      \tfloat sin_angle = sin(angle_radian);\n      \tmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n      \treturn rotationMatrix * vertex;\n    }\n",e.SDF_PART="\n\t\n\tfloat distance = texture2D(u_sampler, vTextureCoords).a;\n\n\t\n\tfloat finalAlpha = smoothstep(usedBuff - vGamma, usedBuff + vGamma, distance);\n\n\t\n\tfloat outlineFactor = smoothstep(u_buffer - vGamma, u_buffer + vGamma, distance);\n\n\t\n\tvec4 color = mix(vStrokeColor, vColor, outlineFactor) * finalAlpha;\n"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(28),u=n(45),c=function(){function t(e,n){return(0,r.default)(this,t),!e||e instanceof u?!n||n instanceof u?void(e&&(n?((e.getLat()>n.getLat()||e.getLng()>n.getLng())&&console.error("LatLngBounds中sw 的经纬度必须小于ne的经纬度，实际传入sw为：",e,"ne 为：",n),this.setSouthWest(e).setNorthEast(n)):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):2===e.length&&this.setSouthWest(e[0]).setNorthEast(e[1]))):void new l.BaseTypeError("LatLngBounds.ne","LatLng",n).error():void new l.BaseTypeError("LatLngBounds.sw","LatLng",e).error()}return(0,s.default)(t,[{key:"setNorthEast",value:function(t){return this._ne=u.convert(t),this}},{key:"setSouthWest",value:function(t){return this._sw=u.convert(t),this}},{key:"getCenter",value:function(){return new u((this._sw.lat+this._ne.lat)/2,(this._sw.lng+this._ne.lng)/2,0,!0)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"extend",value:function(e){var n=this._sw,i=this._ne,o=void 0,r=void 0;if(e instanceof u)o=e,r=e;else{if(!(e instanceof t))return Array.isArray(e)?e.every(Array.isArray)?this.extend(t.convert(e)):this.extend(u.convert(e)):this;if(o=e._sw,r=e._ne,!o||!r)return this}return n||i?(this._sw=new u(Math.min(o.lat,n.lat),Math.min(o.lng,n.lng),0,!0),this._ne=new u(Math.max(r.lat,i.lat),Math.max(r.lng,i.lng),0,!0)):(this._sw=new u(o.lat,o.lng,0,!0),this._ne=new u(r.lat,r.lng,0,!0)),this}},{key:"union",value:function(t){return this.extend(t)}},{key:"equals",value:function(t){var e=this._sw,n=this._ne,i=t.getSouthWest(),o=t.getNorthEast();return e.equals(i)&&n.equals(o)}},{key:"intersects",value:function(t){var e=this._sw,n=this._ne,i=t.getSouthWest(),o=t.getNorthEast();return!(i.lat>n.lat||o.lat<e.lat||i.lng>n.lng||o.lng<e.lng)}},{key:"covers",value:function(t){var e=t.getSouthWest(),n=t.getNorthEast(),i=t.getSouthEast(),o=t.getNorthWest();return this.contains(e)&&this.contains(n)&&this.contains(i)&&this.contains(o)}},{key:"isEmpty",value:function(){return!this._sw||!this._ne||this._sw.lat===this._ne.lat||this._sw.lng===this._ne.lng}},{key:"contains",value:function(t){return this._sw.lat<=t.lat&&this._sw.lng<=t.lng&&this._ne.lat>=t.lat&&this._ne.lng>=t.lng}},{key:"getNorthWest",value:function(){return new u(this.getNorth(),this.getWest(),0,!0)}},{key:"getSouthEast",value:function(){return new u(this.getSouth(),this.getEast(),0,!0)}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toString",value:function(){return"LatLngBounds("+this._sw.toString()+", "+this._ne.toString()+")"}}]),t}();c.convert=function(t){return!t||t instanceof c?t:new c(t)},c._convertFromWorker=function(t){return t._sw&&t._ne?new c(u.convert(t._sw),u.convert(t._ne)):t},t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.EllipseStyle=e.RectangleStyle=e.CircleStyle=e.ExtrudablePolygonStyle=e.PolygonStyle=void 0;var o=n(3),r=i(o),a=n(5),s=i(a),l=n(4),u=i(l),c=n(0),f=i(c),d=n(10),h={color:"rgba(55,119,255,0.16)",borderColor:"#3777FF",showBorder:!0,borderWidth:2,borderDashArray:[0,0],extrudeHeight:1},v=e.PolygonStyle=function t(e){(0,f.default)(this,t),e=(0,d.extend)({},h,e),this.color=e.color,this.borderColor=e.borderColor,this.showBorder=!0===e.showBorder,this.borderWidth=e.borderWidth,this.borderDashArray=e.borderDashArray};e.ExtrudablePolygonStyle=function t(e){(0,f.default)(this,t),e=(0,d.extend)({},h,e),this.color=e.color,this.borderColor=e.borderColor,this.showBorder=!0===e.showBorder,this.extrudeHeight=e.extrudeHeight},e.CircleStyle=function(t){function e(t){return(0,f.default)(this,e),(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,u.default)(e,t),e}(v),e.RectangleStyle=function(t){function e(t){return(0,f.default)(this,e),(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,u.default)(e,t),e}(v),e.EllipseStyle=function(t){function e(t){return(0,f.default)(this,e),(0,s.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,u.default)(e,t),e}(v)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return"&random="+(+new Date).toString(36)}function r(t){(0,b.getImage)(t+o())}function a(t){if(self.window){(new Image).src=t+o()}}function s(t,e,n){var i=S[t];return i||(i=new w({id:t,path:e})),i.on("send",function(){i.receiveData(n())}),S[t]}Object.defineProperty(e,"__esModule",{value:!0});var l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(4),_=i(m);e.sendByAjax=r,e.sendOnce=a,e.sendPeriodically=s;var g=n(123),y=n(10),x=i(y),b=n(78),S={},w=function(t){function e(t){var n=t.id,i=t.path;(0,f.default)(this,e);var o=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this));return o.id=n,o.path=i,o.dataList=[],setInterval(function(){o.send()},5e3),window.addEventListener("beforeunload",function(){o.send()}),o}return(0,_.default)(e,t),(0,h.default)(e,[{key:"receiveData",value:function(t){var e=this;x.default.forIn(t,function(t,n){e.dataList.push(t+"="+n)})}},{key:"send",value:function(){if(this.emit("send"),this.dataList.length>0){var t=this.path+(-1===this.path.indexOf("?")?"?":"&")+this.dataList.join("&");this.dataList=[],a(t)}}}]),e}(g.EventEmitter)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return!!(r()&&a()&&s()&&l()&&u()&&c()&&f()&&d())}function r(){return"undefined"!=typeof window&&"undefined"!=typeof document}function a(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function s(){return Function.prototype&&Function.prototype.bind}function l(){return V.default&&D.default&&B.default&&R.default&&M.default&&k.default&&P.default&&T.default&&w.default&&b.default&&y.default&&_.default&&p.default}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function c(){return"Worker"in window}function f(){return"Uint8ClampedArray"in window}function d(){var t=F.context||null;if(!t){t=h(),F.context=t;var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e.UNMASKED_VENDOR_WEBGL),i=t.getParameter(e.UNMASKED_RENDERER_WEBGL);F.vendor=n,F.renderer=i,F.isIndependentDisplayCard=!/(\bHD\b)|(\bUHD\b)/.test(i)}return F}function h(){var t=document.createElement("canvas"),e=(0,D.default)(o.webGLContextAttributes);return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)}Object.defineProperty(e,"__esModule",{value:!0});var v=n(167),p=i(v),m=n(149),_=i(m),g=n(168),y=i(g),x=n(119),b=i(x),S=n(76),w=i(S),E=n(129),T=i(E),A=n(164),P=i(A),I=n(165),k=i(I),L=n(166),M=i(L),C=n(163),R=i(C),N=n(3),B=i(N),O=n(79),D=i(O),z=n(18),V=i(z);e.isSupported=o,e.isWebGLSupportedCached=d;var F={};o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(146),f=i(c),d=n(773),h=i(d),v=void 0,p={},m=function(){function t(e){(0,s.default)(this,t),this.gl=e.gl,this.location={},this.store=null,this.shaderSource=null,this.shaderParams=null}return(0,u.default)(t,[{key:"preDraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.programId;e!==v&&(v=e,this.enableProgram()),this.loadTexture(t),this.applyLight(t.lightUniforms,t.shadowTexture)}},{key:"afterDraw",value:function(){if(this.enableLight){var t=this.gl;t.activeTexture(t.TEXTURE3),t.bindTexture(t.TEXTURE_2D,null)}}},{key:"loadTexture",value:function(){}},{key:"applyLight",value:function(t,e){if(t&&this.enableLight){var n=this.gl,i=t.lighting_uBase,o=t.lighting_uToneMapping,r=t.lighting_uAmbientColor,a=t.lighting_uDirDirection,s=t.lighting_uDirColor,l=t.lighting_uDirCount,u=t.lighting_uPointPosition,c=t.lighting_uPointAtt,f=t.lighting_uPointColor,d=t.lighting_uPointCount,h=t.lighting_uShadow,v=t.lighting_uViewPos,p=t.lighting_uShadowLightPVMatrix;e&&e.bind(n,{textureIndex:3}),n.uniform4f(this.lighting_uBase,i[0],i[1],i[2],i[3]),n.uniform4f(this.lighting_uAdvanced,o[0],o[1],h[0],h[1]),n.uniform3f(this.lighting_uAmbientColor,r[0],r[1],r[2]),n.uniform3fv(this.lighting_uDirDirection,a),n.uniform3fv(this.lighting_uDirColor,s),n.uniform3fv(this.lighting_uPointPosition,u),n.uniform3fv(this.lighting_uPointAtt,c),n.uniform3fv(this.lighting_uPointColor,f),n.uniform2f(this.lighting_uLightCount,l,d),n.uniform3f(this.lighting_uViewPos,v[0],v[1],v[2]),n.uniformMatrix4fv(this.lighting_uShadowLightPVMatrix,!1,p),e&&n.uniform1i(this.lighting_uShadowSampler,3)}}},{key:"createBuffer",value:function(t,e,n,i){var o=this.gl,r={};return e&&(r.vertices=new f.default(o,{data:e,usage:o.DYNAMIC_DRAW})),n&&(r.indices=new f.default(o,{target:o.ELEMENT_ARRAY_BUFFER,data:n,usage:o.DYNAMIC_DRAW}),r.length=n.byteLength/n.BYTES_PER_ELEMENT),i&&(r.fillCoordinates=new f.default(o,{data:i,usage:o.DYNAMIC_DRAW})),r}},{key:"bindVertexBuffer",value:function(t,e){var n=this.gl,i=t.attributes,o=void 0;e?e.bind():e=new f.default(n,{data:t.arrayBuffer,usage:n.DYNAMIC_DRAW});for(var r=0,a=i.length;r<a;r++){o=i[r],o.name in this.location||(this.location[o.name]=n.getAttribLocation(n.program,o.name));var s=this.location[o.name];s<0||e.pointToAttrib({location:s,size:o.components,type:n[o.type],stride:t.bytesPerElement,offset:o.offset})}return e}},{key:"unbindVertexBuffer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.gl;n.forEach(function(t){t.name in e.location||(e.location[t.name]=i.getAttribLocation(i.program,t.name));var n=e.location[t.name];n<0||e.gl.disableVertexAttribArray(n)}),t.unbind()}},{key:"bindElementBuffer",value:function(t,e){var n=this.gl;return e?e.bind():e=new f.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:t.arrayBuffer,usage:n.DYNAMIC_DRAW}),e}},{key:"getVariableLocations",value:function(t){var e=(0,r.default)({},this.shaderParams);if(this.enableLight){var n;(n=e.uniforms).push.apply(n,["lighting_uBase","lighting_uAdvanced","lighting_uAmbientColor","lighting_uDirDirection","lighting_uDirColor","lighting_uPointPosition","lighting_uPointAtt","lighting_uPointColor","lighting_uLightCount","lighting_uViewPos","lighting_uShadowLightPVMatrix","lighting_uShadowSampler"])}return(0,r.default)({},t.getLocations("attributes",e.attributes),t.getLocations("uniforms",e.uniforms))}},{key:"enableProgram",value:function(){var t=this.gl,e=this.programId,n=this.shaderSource,i=p[e];i||(i=new h.default(t,{vShader:n.v,fShader:n.f}),i.locations=this.getVariableLocations(i),p[e]=i),i.enable(),(0,r.default)(this,i.locations)}},{key:"clearStore",value:function(){this.store&&this.store.clear()}},{key:"destroy",value:function(){this.store&&(this.store.clear(),this.store=null);var t=this.shaderSource.name+this.gl.id;p[t]&&(p[t].delete(),delete p[t]),this.shaderParams=null,this.shaderSource=null,this.location=null,this.gl=null}},{key:"isBufferChanged",value:function(t,e){if(t&&e){for(var n in t)if(t.hasOwnProperty(n)&&e[n]&&t[n].data!==e[n])return!0;return!1}}},{key:"programId",get:function(){return this.shaderSource.name+this.gl.id}}]),t}();e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=function(){function t(e,n,i,o){(0,r.default)(this,t),this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(o-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=i,this.p2y=o}return(0,s.default)(t,[{key:"sampleCurveX",value:function(t){return((this.ax*t+this.bx)*t+this.cx)*t}},{key:"sampleCurveY",value:function(t){return((this.ay*t+this.by)*t+this.cy)*t}},{key:"sampleCurveDerivativeX",value:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx}},{key:"solveCurveX",value:function(t,e){void 0===e&&(e=1e-6);var n=void 0,i=void 0,o=void 0,r=void 0,a=void 0;for(o=t,a=0;a<8;a++){if(r=this.sampleCurveX(o)-t,Math.abs(r)<e)return o;var s=this.sampleCurveDerivativeX(o);if(Math.abs(s)<1e-6)break;o-=r/s}if(n=0,i=1,(o=t)<n)return n;if(o>i)return i;for(;n<i;){if(r=this.sampleCurveX(o),Math.abs(r-t)<e)return o;t>r?n=o:i=o,o=.5*(i-n)+n}return o}},{key:"solve",value:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}}]),t}();t.exports=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GEOMETRY_TYPES={POINT:"POINT",POLYLINE:"POLYLINE",POLYGON:"POLYGON",LABEL:"LABEL",CIRCLE:"CIRCLE",RECTANGLE:"RECTANGLE",ELLIPSE:"ELLIPSE",MASK:"MASK",HIGHLIGHT:"HIGHLIGHT"}},function(t,e,n){"use strict";function i(t){return t/(Math.PI/180)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){t.exports={default:n(180),__esModule:!0}},function(t,e,n){t.exports={default:n(182),__esModule:!0}},function(t,e,n){t.exports={default:n(183),__esModule:!0}},function(t,e,n){t.exports={default:n(184),__esModule:!0}},function(t,e,n){t.exports={default:n(186),__esModule:!0}},function(t,e,n){t.exports={default:n(187),__esModule:!0}},function(t,e,n){t.exports={default:n(188),__esModule:!0}},function(t,e,n){t.exports={default:n(190),__esModule:!0}},function(t,e,n){t.exports={default:n(191),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(76),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,n){return e in t?(0,o.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){n(33),n(198),t.exports=n(2).Array.from},function(t,e,n){n(199);var i=n(2).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){n(200);var i=n(2).Object;t.exports=function(t,e){return i.defineProperties(t,e)}},function(t,e,n){n(201);var i=n(2).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){n(215),t.exports=n(2).Object.entries},function(t,e,n){n(202),t.exports=n(2).Object.freeze},function(t,e,n){n(203);var i=n(2).Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},function(t,e,n){n(204);var i=n(2).Object;t.exports=function(t){return i.getOwnPropertyNames(t)}},function(t,e,n){n(205),t.exports=n(2).Object.getPrototypeOf},function(t,e,n){n(206),t.exports=n(2).Object.isExtensible},function(t,e,n){n(207),t.exports=n(2).Object.isFrozen},function(t,e,n){n(208),t.exports=n(2).Object.isSealed},function(t,e,n){n(209),t.exports=n(2).Object.keys},function(t,e,n){n(210),t.exports=n(2).Object.preventExtensions},function(t,e,n){n(211),t.exports=n(2).Object.seal},function(t,e,n){n(212),t.exports=n(2).Object.setPrototypeOf},function(t,e,n){n(75),n(33),n(39),n(213),n(216),n(217),t.exports=n(2).Promise},function(t,e,n){n(214),n(75),n(218),n(219),t.exports=n(2).Symbol},function(t,e,n){n(33),n(39),t.exports=n(74).f("iterator")},function(t,e,n){"use strict";var i=n(14),o=n(38);t.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var i=n(35),o=n(80),r=n(47);t.exports=function(t){var e=i(t),n=o.f;if(n)for(var a,s=n(t),l=r.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(8),o=n(107).set,r=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(36)(a);t.exports=function(){var t,e,n,u=function(){var i,o;for(l&&(i=a.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(u)};else if(!r||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){o.call(i,u)};else{var f=!0,d=document.createTextNode("");new r(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var i=n(7),o=n(13),r=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(24)(Function.call,n(72).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},function(t,e,n){var i=n(8),o=i.navigator;t.exports=o&&o.userAgent||""},function(t,e,n){"use strict";var i=n(24),o=n(6),r=n(32),a=n(100),s=n(99),l=n(56),u=n(192),c=n(67);o(o.S+o.F*!n(101)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,d=r(t),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,m=void 0!==p,_=0,g=c(d);if(m&&(p=i(p,v>2?arguments[2]:void 0,2)),void 0==g||h==Array&&s(g))for(e=l(d.length),n=new h(e);e>_;_++)u(n,_,m?p(d[_],_):d[_]);else for(f=g.call(d),n=new h;!(o=f.next()).done;_++)u(n,_,m?a(f,p,[o.value,_],!0):o.value);return n.length=_,n}})},function(t,e,n){var i=n(6);i(i.S,"Object",{create:n(55)})},function(t,e,n){var i=n(6);i(i.S+i.F*!n(12),"Object",{defineProperties:n(88)})},function(t,e,n){var i=n(6);i(i.S+i.F*!n(12),"Object",{defineProperty:n(14).f})},function(t,e,n){var i=n(7),o=n(41).onFreeze;n(16)("freeze",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(17),o=n(72).f;n(16)("getOwnPropertyDescriptor",function(){return function(t,e){return o(i(t),e)}})},function(t,e,n){n(16)("getOwnPropertyNames",function(){return n(102).f})},function(t,e,n){var i=n(32),o=n(89);n(16)("getPrototypeOf",function(){return function(t){return o(i(t))}})},function(t,e,n){var i=n(7);n(16)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(7);n(16)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(7);n(16)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(32),o=n(35);n(16)("keys",function(){return function(t){return o(i(t))}})},function(t,e,n){var i=n(7),o=n(41).onFreeze;n(16)("preventExtensions",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(7),o=n(41).onFreeze;n(16)("seal",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(6);i(i.S,"Object",{setPrototypeOf:n(196).set})},function(t,e,n){"use strict";var i,o,r,a,s=n(37),l=n(8),u=n(24),c=n(54),f=n(6),d=n(7),h=n(46),v=n(96),p=n(68),m=n(106),_=n(107).set,g=n(195)(),y=n(71),x=n(104),b=n(197),S=n(105),w=l.TypeError,E=l.process,T=E&&E.versions,A=T&&T.v8||"",P=l.Promise,I="process"==c(E),k=function(){},L=o=y.f,M=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[n(11)("species")]=function(t){t(k,k)};return(I||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==A.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var i=t._v,o=1==t._s,r=0;n.length>r;)!function(e){var n,r,a,s=o?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{s?(o||(2==t._h&&O(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),a=!0)),n===e.promise?u(w("Promise-chain cycle")):(r=C(n))?r.call(n,l,u):l(n)):u(i)}catch(t){c&&!a&&c.exit(),u(t)}}(n[r++]);t._c=[],t._n=!1,e&&!t._h&&N(t)})}},N=function(t){_.call(l,function(){var e,n,i,o=t._v,r=B(t);if(r&&(e=x(function(){I?E.emit("unhandledRejection",o,t):(n=l.onunhandledrejection)?n({promise:t,reason:o}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=I||B(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},B=function(t){return 1!==t._h&&0===(t._a||t._c).length},O=function(t){_.call(l,function(){var e;I?E.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},z=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=C(t))?g(function(){var i={_w:n,_d:!1};try{e.call(t,u(z,i,1),u(D,i,1))}catch(t){D.call(i,t)}}):(n._v=t,n._s=1,R(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};M||(P=function(t){v(this,P,"Promise","_h"),h(t),i.call(this);try{t(u(z,this,1),u(D,this,1))}catch(t){D.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(97)(P.prototype,{then:function(t,e){var n=L(m(this,P));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=I?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i;this.promise=t,this.resolve=u(z,t,1),this.reject=u(D,t,1)},y.f=L=function(t){return t===P||t===a?new r(t):o(t)}),f(f.G+f.W+f.F*!M,{Promise:P}),n(44)(P,"Promise"),n(122)("Promise"),a=n(2).Promise,f(f.S+f.F*!M,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!M),"Promise",{resolve:function(t){return S(s&&this===a?P:this,t)}}),f(f.S+f.F*!(M&&n(101)(function(t){P.all(t).catch(k)})),"Promise",{all:function(t){var e=this,n=L(e),i=n.resolve,o=n.reject,r=x(function(){var n=[],r=0,a=1;p(t,!1,function(t){var s=r++,l=!1;n.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--a||i(n))},o)}),--a||i(n)});return r.e&&o(r.v),n.promise},race:function(t){var e=this,n=L(e),i=n.reject,o=x(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}})},function(t,e,n){"use strict";var i=n(8),o=n(22),r=n(12),a=n(6),s=n(83),l=n(41).KEY,u=n(31),c=n(64),f=n(44),d=n(49),h=n(11),v=n(74),p=n(73),m=n(193),_=n(121),g=n(13),y=n(7),x=n(32),b=n(17),S=n(66),w=n(38),E=n(55),T=n(102),A=n(72),P=n(80),I=n(14),k=n(35),L=A.f,M=I.f,C=T.f,R=i.Symbol,N=i.JSON,B=N&&N.stringify,O=h("_hidden"),D=h("toPrimitive"),z={}.propertyIsEnumerable,V=c("symbol-registry"),F=c("symbols"),U=c("op-symbols"),Y=Object.prototype,j="function"==typeof R&&!!P.f,G=i.QObject,Z=!G||!G.prototype||!G.prototype.findChild,H=r&&u(function(){return 7!=E(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=L(Y,e);i&&delete Y[e],M(t,e,n),i&&t!==Y&&M(Y,e,i)}:M,W=function(t){var e=F[t]=E(R.prototype);return e._k=t,e},X=j&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},Q=function(t,e,n){return t===Y&&Q(U,e,n),g(t),e=S(e,!0),g(n),o(F,e)?(n.enumerable?(o(t,O)&&t[O][e]&&(t[O][e]=!1),n=E(n,{enumerable:w(0,!1)})):(o(t,O)||M(t,O,w(1,{})),t[O][e]=!0),H(t,e,n)):M(t,e,n)},q=function(t,e){g(t);for(var n,i=m(e=b(e)),o=0,r=i.length;r>o;)Q(t,n=i[o++],e[n]);return t},J=function(t,e){return void 0===e?E(t):q(E(t),e)},K=function(t){var e=z.call(this,t=S(t,!0));return!(this===Y&&o(F,t)&&!o(U,t))&&(!(e||!o(this,t)||!o(F,t)||o(this,O)&&this[O][t])||e)},$=function(t,e){if(t=b(t),e=S(e,!0),t!==Y||!o(F,e)||o(U,e)){var n=L(t,e);return!n||!o(F,e)||o(t,O)&&t[O][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=C(b(t)),i=[],r=0;n.length>r;)o(F,e=n[r++])||e==O||e==l||i.push(e);return i},et=function(t){for(var e,n=t===Y,i=C(n?U:b(t)),r=[],a=0;i.length>a;)!o(F,e=i[a++])||n&&!o(Y,e)||r.push(F[e]);return r};j||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===Y&&e.call(U,n),o(this,O)&&o(this[O],t)&&(this[O][t]=!1),H(this,t,w(1,n))};return r&&Z&&H(Y,t,{configurable:!0,set:e}),W(t)},s(R.prototype,"toString",function(){return this._k}),A.f=$,I.f=Q,n(103).f=T.f=tt,n(47).f=K,P.f=et,r&&!n(37)&&s(Y,"propertyIsEnumerable",K,!0),v.f=function(t){return W(h(t))}),a(a.G+a.W+a.F*!j,{Symbol:R});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)h(nt[it++]);for(var ot=k(h.store),rt=0;ot.length>rt;)p(ot[rt++]);a(a.S+a.F*!j,"Symbol",{for:function(t){return o(V,t+="")?V[t]:V[t]=R(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in V)if(V[e]===t)return e},useSetter:function(){Z=!0},useSimple:function(){Z=!1}}),a(a.S+a.F*!j,"Object",{create:J,defineProperty:Q,defineProperties:q,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var at=u(function(){P.f(1)});a(a.S+a.F*at,"Object",{getOwnPropertySymbols:function(t){return P.f(x(t))}}),N&&a(a.S+a.F*(!j||u(function(){var t=R();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(y(e)||void 0!==t)&&!X(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),i[1]=e,B.apply(N,i)}}),R.prototype[D]||n(19)(R.prototype,D,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){var i=n(6),o=n(135)(!0);i(i.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){"use strict";var i=n(6),o=n(2),r=n(8),a=n(106),s=n(105);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,o.Promise||r.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(6),o=n(71),r=n(104);i(i.S,"Promise",{try:function(t){var e=o.f(this),n=r(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(73)("asyncIterator")},function(t,e,n){n(73)("observable")},function(t,e,n){"use strict";var i=n(51);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){(function(e){var n,n;/*!
    localForage -- Offline Storage, Improved
    Version 1.7.3
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
    !function(e){t.exports=e()}(function(){return function t(e,i,o){function r(s,l){if(!i[s]){if(!e[s]){var u="function"==typeof n&&n;if(!l&&u)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=i[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return r(n||t)},f,f.exports,t,e,i,o)}return i[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,n,i){(function(t){"use strict";function e(){c=!0;for(var t,e,n=f.length;n;){for(e=f,f=[],t=-1;++t<n;)e[t]();n=f.length}c=!1}function i(t){1!==f.push(t)||c||o()}var o,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var a=0,s=new r(e),l=t.document.createTextNode("");s.observe(l,{characterData:!0}),o=function(){l.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)o="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var n=t.document.createElement("script");n.onreadystatechange=function(){e(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},t.document.documentElement.appendChild(n)}:function(){setTimeout(e,0)};else{var u=new t.MessageChannel;u.port1.onmessage=e,o=function(){u.port2.postMessage(0)}}var c,f=[];n.exports=i}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";function i(){}function o(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,t!==i&&l(this,t)}function r(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(t,e,n){v(function(){var i;try{i=e(n)}catch(e){return p.reject(t,e)}i===t?p.reject(t,new TypeError("Cannot resolve promise with itself")):p.resolve(t,i)})}function s(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function l(t,e){function n(e){r||(r=!0,p.reject(t,e))}function i(e){r||(r=!0,p.resolve(t,e))}function o(){e(i,n)}var r=!1,a=u(o);"error"===a.status&&n(a.value)}function u(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function c(t){return t instanceof this?t:p.resolve(new this(i),t)}function f(t){var e=new this(i);return p.reject(e,t)}function d(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);for(var r=new Array(n),a=0,s=-1,l=new this(i);++s<n;)!function(t,i){function s(t){r[i]=t,++a!==n||o||(o=!0,p.resolve(l,r))}e.resolve(t).then(s,function(t){o||(o=!0,p.reject(l,t))})}(t[s],s);return l}function h(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);for(var r=-1,a=new this(i);++r<n;)!function(t){e.resolve(t).then(function(t){o||(o=!0,p.resolve(a,t))},function(t){o||(o=!0,p.reject(a,t))})}(t[r]);return a}var v=t(1),p={},m=["REJECTED"],_=["FULFILLED"],g=["PENDING"];e.exports=o,o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if("function"!=typeof t&&this.state===_||"function"!=typeof e&&this.state===m)return this;var n=new this.constructor(i);if(this.state!==g){a(n,this.state===_?t:e,this.outcome)}else this.queue.push(new r(n,t,e));return n},r.prototype.callFulfilled=function(t){p.resolve(this.promise,t)},r.prototype.otherCallFulfilled=function(t){a(this.promise,this.onFulfilled,t)},r.prototype.callRejected=function(t){p.reject(this.promise,t)},r.prototype.otherCallRejected=function(t){a(this.promise,this.onRejected,t)},p.resolve=function(t,e){var n=u(s,e);if("error"===n.status)return p.reject(t,n.value);var i=n.value;if(i)l(t,i);else{t.state=_,t.outcome=e;for(var o=-1,r=t.queue.length;++o<r;)t.queue[o].callFulfilled(e)}return t},p.reject=function(t,e){t.state=m,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},o.resolve=c,o.reject=f,o.all=d,o.race=h},{1:1}],3:[function(t,n,i){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,i=new n,o=0;o<t.length;o+=1)i.append(t[o]);return i.getBlob(e.type)}}function r(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function a(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function s(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function u(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),o=0;o<e;o++)i[o]=t.charCodeAt(o);return n}function c(t){return new _t(function(e){var n=t.transaction(gt,wt),i=o([""]);n.objectStore(gt).put(i,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}function f(t){return"boolean"==typeof yt?_t.resolve(yt):c(t).then(function(t){return yt=t})}function d(t){var e=xt[t.name],n={};n.promise=new _t(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function h(t){var e=xt[t.name],n=e.deferredOperations.pop();if(n)return n.resolve(),n.promise}function v(t,e){var n=xt[t.name],i=n.deferredOperations.pop();if(i)return i.reject(e),i.promise}function p(t,e){return new _t(function(n,i){if(xt[t.name]=xt[t.name]||T(),t.db){if(!e)return n(t.db);d(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var r=mt.open.apply(mt,o);e&&(r.onupgradeneeded=function(e){var n=r.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(gt)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),r.onerror=function(t){t.preventDefault(),i(r.error)},r.onsuccess=function(){n(r.result),h(t)}})}function m(t){return p(t,!1)}function _(t){return p(t,!0)}function g(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,o=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var r=t.db.version+1;r>t.version&&(t.version=r)}return!0}return!1}function y(t){return new _t(function(e,n){var i=new FileReader;i.onerror=n,i.onloadend=function(n){var i=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:i,type:t.type})},i.readAsBinaryString(t)})}function x(t){return o([u(atob(t.data))],{type:t.type})}function b(t){return t&&t.__local_forage_encoded_blob}function S(t){var e=this,n=e._initReady().then(function(){var t=xt[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return a(n,t,t),n}function w(t){d(t);for(var e=xt[t.name],n=e.forages,i=0;i<n.length;i++){var o=n[i];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,m(t).then(function(e){return t.db=e,g(t)?_(t):e}).then(function(i){t.db=e.db=i;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=i}).catch(function(e){throw v(t,e),e})}function E(t,e,n,i){void 0===i&&(i=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(o){if(i>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return _t.resolve().then(function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),_(t)}).then(function(){return w(t).then(function(){E(t,e,n,i-1)})}).catch(n);n(o)}}function T(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function A(t){function e(){return _t.resolve()}var n=this,i={db:null};if(t)for(var o in t)i[o]=t[o];var r=xt[i.name];r||(r=T(),xt[i.name]=r),r.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=S);for(var a=[],s=0;s<r.forages.length;s++){var l=r.forages[s];l!==n&&a.push(l._initReady().catch(e))}var u=r.forages.slice(0);return _t.all(a).then(function(){return i.db=r.db,m(i)}).then(function(t){return i.db=t,g(i,n._defaultConfig.version)?_(i):t}).then(function(t){i.db=r.db=t,n._dbInfo=i;for(var e=0;e<u.length;e++){var o=u[e];o!==n&&(o._dbInfo.db=i.db,o._dbInfo.version=i.version)}})}function P(t,e){var n=this;t=s(t);var i=new _t(function(e,i){n.ready().then(function(){E(n._dbInfo,St,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=a.get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),b(t)&&(t=x(t)),e(t)},s.onerror=function(){i(s.error)}}catch(t){i(t)}})}).catch(i)});return r(i,e),i}function I(t,e){var n=this,i=new _t(function(e,i){n.ready().then(function(){E(n._dbInfo,St,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=a.openCursor(),l=1;s.onsuccess=function(){var n=s.result;if(n){var i=n.value;b(i)&&(i=x(i));var o=t(i,n.key,l++);void 0!==o?e(o):n.continue()}else e()},s.onerror=function(){i(s.error)}}catch(t){i(t)}})}).catch(i)});return r(i,e),i}function k(t,e,n){var i=this;t=s(t);var o=new _t(function(n,o){var r;i.ready().then(function(){return r=i._dbInfo,"[object Blob]"===bt.call(e)?f(r.db).then(function(t){return t?e:y(e)}):e}).then(function(e){E(i._dbInfo,wt,function(r,a){if(r)return o(r);try{var s=a.objectStore(i._dbInfo.storeName);null===e&&(e=void 0);var l=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=l.error?l.error:l.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return r(o,n),o}function L(t,e){var n=this;t=s(t);var i=new _t(function(e,i){n.ready().then(function(){E(n._dbInfo,wt,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=a.delete(t);r.oncomplete=function(){e()},r.onerror=function(){i(s.error)},r.onabort=function(){var t=s.error?s.error:s.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return r(i,e),i}function M(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){E(e._dbInfo,wt,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(t){n(t)}})}).catch(n)});return r(n,t),n}function C(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){E(e._dbInfo,St,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.count();a.onsuccess=function(){t(a.result)},a.onerror=function(){n(a.error)}}catch(t){n(t)}})}).catch(n)});return r(n,t),n}function R(t,e){var n=this,i=new _t(function(e,i){if(t<0)return void e(null);n.ready().then(function(){E(n._dbInfo,St,function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=!1,l=a.openCursor();l.onsuccess=function(){var n=l.result;if(!n)return void e(null);0===t?e(n.key):s?e(n.key):(s=!0,n.advance(t))},l.onerror=function(){i(l.error)}}catch(t){i(t)}})}).catch(i)});return r(i,e),i}function N(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){E(e._dbInfo,St,function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName),a=r.openCursor(),s=[];a.onsuccess=function(){var e=a.result;if(!e)return void t(s);s.push(e.key),e.continue()},a.onerror=function(){n(a.error)}}catch(t){n(t)}})}).catch(n)});return r(n,t),n}function B(t,e){e=l.apply(this,arguments);var n=this.config();t="function"!=typeof t&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,o=this;if(t.name){var a=t.name===n.name&&o._dbInfo.db,s=a?_t.resolve(o._dbInfo.db):m(t).then(function(e){var n=xt[t.name],i=n.forages;n.db=e;for(var o=0;o<i.length;o++)i[o]._dbInfo.db=e;return e});i=t.storeName?s.then(function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;d(t);var i=xt[t.name],o=i.forages;e.close();for(var r=0;r<o.length;r++){var a=o[r];a._dbInfo.db=null,a._dbInfo.version=n}return new _t(function(e,i){var o=mt.open(t.name,n);o.onerror=function(t){o.result.close(),i(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}}).then(function(t){i.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,h(n._dbInfo)}}).catch(function(e){throw(v(t,e)||_t.resolve()).catch(function(){}),e})}}):s.then(function(e){d(t);var n=xt[t.name],i=n.forages;e.close();for(var o=0;o<i.length;o++){i[o]._dbInfo.db=null}return new _t(function(e,n){var i=mt.deleteDatabase(t.name);i.onerror=i.onblocked=function(t){var e=i.result;e&&e.close(),n(t)},i.onsuccess=function(){var t=i.result;t&&t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<i.length;e++)h(i[e]._dbInfo)}).catch(function(e){throw(v(t,e)||_t.resolve()).catch(function(){}),e})})}else i=_t.reject("Invalid arguments");return r(i,e),i}function O(t){var e,n,i,o,r,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(e=0;e<s;e+=4)n=Tt.indexOf(t[e]),i=Tt.indexOf(t[e+1]),o=Tt.indexOf(t[e+2]),r=Tt.indexOf(t[e+3]),c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|o>>2,c[l++]=(3&o)<<6|63&r;return u}function D(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=Tt[n[e]>>2],i+=Tt[(3&n[e])<<4|n[e+1]>>4],i+=Tt[(15&n[e+1])<<2|n[e+2]>>6],i+=Tt[63&n[e+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}function z(t,e){var n="";if(t&&(n=Yt.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===Yt.call(t.buffer))){var i,o=It;t instanceof ArrayBuffer?(i=t,o+=Lt):(i=t.buffer,"[object Int8Array]"===n?o+=Ct:"[object Uint8Array]"===n?o+=Rt:"[object Uint8ClampedArray]"===n?o+=Nt:"[object Int16Array]"===n?o+=Bt:"[object Uint16Array]"===n?o+=Dt:"[object Int32Array]"===n?o+=Ot:"[object Uint32Array]"===n?o+=zt:"[object Float32Array]"===n?o+=Vt:"[object Float64Array]"===n?o+=Ft:e(new Error("Failed to get type for BinaryArray"))),e(o+D(i))}else if("[object Blob]"===n){var r=new FileReader;r.onload=function(){var n=At+t.type+"~"+D(this.result);e(It+Mt+n)},r.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}}function V(t){if(t.substring(0,kt)!==It)return JSON.parse(t);var e,n=t.substring(Ut),i=t.substring(kt,Ut);if(i===Mt&&Pt.test(n)){var r=n.match(Pt);e=r[1],n=n.substring(r[0].length)}var a=O(n);switch(i){case Lt:return a;case Mt:return o([a],{type:e});case Ct:return new Int8Array(a);case Rt:return new Uint8Array(a);case Nt:return new Uint8ClampedArray(a);case Bt:return new Int16Array(a);case Dt:return new Uint16Array(a);case Ot:return new Int32Array(a);case zt:return new Uint32Array(a);case Vt:return new Float32Array(a);case Ft:return new Float64Array(a);default:throw new Error("Unkown type: "+i)}}function F(t,e,n,i){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function U(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var o=new _t(function(t,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction(function(o){F(o,n,function(){e._dbInfo=n,t()},function(t,e){i(e)})},i)});return n.serializer=jt,o}function Y(t,e,n,i,o,r){t.executeSql(n,i,o,function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(t,s){s.rows.length?r(t,a):F(t,e,function(){t.executeSql(n,i,o,r)},r)},r):r(t,a)},r)}function j(t,e){var n=this;t=s(t);var i=new _t(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Y(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=o.serializer.deserialize(i)),e(i)},function(t,e){i(e)})})}).catch(i)});return r(i,e),i}function G(t,e){var n=this,i=new _t(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Y(n,o,"SELECT * FROM "+o.storeName,[],function(n,i){for(var r=i.rows,a=r.length,s=0;s<a;s++){var l=r.item(s),u=l.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()},function(t,e){i(e)})})}).catch(i)});return r(i,e),i}function Z(t,e,n,i){var o=this;t=s(t);var a=new _t(function(r,a){o.ready().then(function(){void 0===e&&(e=null);var s=e,l=o._dbInfo;l.serializer.serialize(e,function(e,u){u?a(u):l.db.transaction(function(n){Y(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){r(s)},function(t,e){a(e)})},function(e){if(e.code===e.QUOTA_ERR){if(i>0)return void r(Z.apply(o,[t,s,n,i-1]));a(e)}})})}).catch(a)});return r(a,n),a}function H(t,e,n){return Z.apply(this,[t,e,n,1])}function W(t,e){var n=this;t=s(t);var i=new _t(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Y(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){i(e)})})}).catch(i)});return r(i,e),i}function X(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){Y(e,i,"DELETE FROM "+i.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return r(n,t),n}function Q(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){Y(e,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],function(e,n){var i=n.rows.item(0).c;t(i)},function(t,e){n(e)})})}).catch(n)});return r(n,t),n}function q(t,e){var n=this,i=new _t(function(e,i){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){Y(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)},function(t,e){i(e)})})}).catch(i)});return r(i,e),i}function J(t){var e=this,n=new _t(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){Y(e,i,"SELECT key FROM "+i.storeName,[],function(e,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).key);t(i)},function(t,e){n(e)})})}).catch(n)});return r(n,t),n}function K(t){return new _t(function(e,n){t.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,i){for(var o=[],r=0;r<i.rows.length;r++)o.push(i.rows.item(r).name);e({db:t,storeNames:o})},function(t,e){n(e)})},function(t){n(t)})})}function $(t,e){e=l.apply(this,arguments);var n=this.config();t="function"!=typeof t&&t||{},t.name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,o=this;return i=t.name?new _t(function(e){var i;i=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),e(t.storeName?{db:i,storeNames:[t.storeName]}:K(i))}).then(function(t){return new _t(function(e,n){t.db.transaction(function(i){for(var o=[],r=0,a=t.storeNames.length;r<a;r++)o.push(function(t){return new _t(function(e,n){i.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(t,e){n(e)})})}(t.storeNames[r]));_t.all(o).then(function(){e()}).catch(function(t){n(t)})},function(t){n(t)})})}):_t.reject("Invalid arguments"),r(i,e),i}function tt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function et(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}function nt(){return!et()||localStorage.length>0}function it(t){var e=this,n={};if(t)for(var i in t)n[i]=t[i];return n.keyPrefix=tt(t,e._defaultConfig),nt()?(e._dbInfo=n,n.serializer=jt,_t.resolve()):_t.reject()}function ot(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(t)&&localStorage.removeItem(i)}});return r(n,t),n}function rt(t,e){var n=this;t=s(t);var i=n.ready().then(function(){var e=n._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i});return r(i,e),i}function at(t,e){var n=this,i=n.ready().then(function(){for(var e=n._dbInfo,i=e.keyPrefix,o=i.length,r=localStorage.length,a=1,s=0;s<r;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(o),a++)))return u}}});return r(i,e),i}function st(t,e){var n=this,i=n.ready().then(function(){var e,i=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e});return r(i,e),i}function lt(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,i=[],o=0;o<n;o++){var r=localStorage.key(o);0===r.indexOf(t.keyPrefix)&&i.push(r.substring(t.keyPrefix.length))}return i});return r(n,t),n}function ut(t){var e=this,n=e.keys().then(function(t){return t.length});return r(n,t),n}function ct(t,e){var n=this;t=s(t);var i=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return r(i,e),i}function ft(t,e,n){var i=this;t=s(t);var o=i.ready().then(function(){void 0===e&&(e=null);var n=e;return new _t(function(o,r){var a=i._dbInfo;a.serializer.serialize(e,function(e,i){if(i)r(i);else try{localStorage.setItem(a.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||r(t),r(t)}})})});return r(o,n),o}function dt(t,e){if(e=l.apply(this,arguments),t="function"!=typeof t&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var i,o=this;return i=t.name?new _t(function(e){e(t.storeName?tt(t,o._defaultConfig):t.name+"/")}).then(function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):_t.reject("Invalid arguments"),r(i,e),i}function ht(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function vt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Xt(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();"undefined"==typeof Promise&&t(3);var _t=Promise,gt="local-forage-detect-blob-support",yt=void 0,xt={},bt=Object.prototype.toString,St="readonly",wt="readwrite",Et={_driver:"asyncStorage",_initStorage:A,_support:function(){try{if(!mt)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:I,getItem:P,setItem:k,removeItem:L,clear:M,length:C,key:R,keys:N,dropInstance:B},Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",At="~~local_forage_type~",Pt=/^~~local_forage_type~([^~]+)~/,It="__lfsc__:",kt=It.length,Lt="arbf",Mt="blob",Ct="si08",Rt="ui08",Nt="uic8",Bt="si16",Ot="si32",Dt="ur16",zt="ui32",Vt="fl32",Ft="fl64",Ut=kt+Lt.length,Yt=Object.prototype.toString,jt={serialize:z,deserialize:V,stringToBuffer:O,bufferToString:D},Gt={_driver:"webSQLStorage",_initStorage:U,_support:function(){return"function"==typeof openDatabase}(),iterate:G,getItem:j,setItem:H,removeItem:W,clear:X,length:Q,key:q,keys:J,dropInstance:$},Zt={_driver:"localStorageWrapper",_initStorage:it,_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:at,getItem:rt,setItem:ft,removeItem:ct,clear:ot,length:ut,key:st,keys:lt,dropInstance:dt},Ht=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Wt=function(t,e){for(var n=t.length,i=0;i<n;){if(Ht(t[i],e))return!0;i++}return!1},Xt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Qt={},qt={},Jt={INDEXEDDB:Et,WEBSQL:Gt,LOCALSTORAGE:Zt},Kt=[Jt.INDEXEDDB._driver,Jt.WEBSQL._driver,Jt.LOCALSTORAGE._driver],$t=["dropInstance"],te=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($t),ee={description:"",driver:Kt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},ne=function(){function t(e){i(this,t);for(var n in Jt)if(Jt.hasOwnProperty(n)){var o=Jt[n],r=o._driver;this[n]=r,Qt[r]||this.defineDriver(o)}this._defaultConfig=vt({},ee),this._config=vt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":pt(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new _t(function(e,n){try{var i=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var a=te.concat("_initStorage"),s=0,l=a.length;s<l;s++){var u=a[s];if((!Wt($t,u)||t[u])&&"function"!=typeof t[u])return void n(o)}!function(){for(var e=0,n=$t.length;e<n;e++){var i=$t[e];t[i]||(t[i]=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=_t.reject(e);return r(n,arguments[arguments.length-1]),n}}(i))}}();var c=function(n){Qt[i]&&console.info("Redefining LocalForage driver: "+i),Qt[i]=t,qt[i]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(c,n):c(!!t._support):c(!0)}catch(t){n(t)}});return a(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var i=Qt[t]?_t.resolve(Qt[t]):_t.reject(new Error("Driver not found."));return a(i,e,n),i},t.prototype.getSerializer=function(t){var e=_t.resolve(jt);return a(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return a(n,t,t),n},t.prototype.setDriver=function(t,e,n){function i(){s._config.driver=s.driver()}function o(t){return s._extend(t),i(),s._ready=s._initStorage(s._config),s._ready}function r(t){return function(){function e(){for(;n<t.length;){var r=t[n];return n++,s._dbInfo=null,s._ready=null,s.getDriver(r).then(o).catch(e)}i();var a=new Error("No available storage method found.");return s._driverSet=_t.reject(a),s._driverSet}var n=0;return e()}}var s=this;Xt(t)||(t=[t]);var l=this._getSupportedDrivers(t),u=null!==this._driverSet?this._driverSet.catch(function(){return _t.resolve()}):_t.resolve();return this._driverSet=u.then(function(){var t=l[0];return s._dbInfo=null,s._ready=null,s.getDriver(t).then(function(t){s._driver=t._driver,i(),s._wrapLibraryMethodsWithReady(),s._initDriver=r(l)})}).catch(function(){i();var t=new Error("No available storage method found.");return s._driverSet=_t.reject(t),s._driverSet}),a(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!qt[t]},t.prototype._extend=function(t){vt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=te.length;t<e;t++)ht(this,te[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),ie=new ne;e.exports=ie},{3:3}]},{},[4])(4)})}).call(e,n(153))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.deleteInstanceCacllback=function(t){t.data&&(t.data=null),t.buffer&&t.buffer.delete()},e.deleteBuffersCallback=function(t){t.vertices&&t.vertices.delete(),t.indeices&&t.indeices.delete()}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(4===t.length){for(var e="#",n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}var i=t.slice(1);return{r:parseInt(i.slice(0,2),16),g:parseInt(i.slice(2,4),16),b:parseInt(i.slice(4),16)}}function r(t){return t=t.replace(/rgb/,"rgba").replace(")",",")+"1)",a(t)}function a(t){return t=t.replace(/rgba\(/,"").replace(")","").split(","),{r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2]),a:parseFloat(t[3])}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),l=i(s),u=n(1),c=i(u),f=n(40),d=i(f),h=n(395),v=d.default.isString,p=d.default.isArray,m=d.default.isUndefined,_=function(){function t(e,n){if((0,l.default)(this,t),this.r=1,this.g=1,this.b=1,this.a=1,n&&n.defaultColor&&this.turnStr2Rgba(n.defaultColor),v(e))this.turnStr2Rgba(e);else if(p(e)){var i=n&&n.max||255;this.r=e[0]/i,this.g=e[1]/i,this.b=e[2]/i,this.a=m(e[3])?1:e[3]}}return(0,c.default)(t,[{key:"turnStr2Rgba",value:function(t){t=t.toLowerCase();var e=h.HEX_REG,n=h.RGB_REG,i=h.RGBA_REG,s=null;e.test(t)?s=o(t):n.test(t)?s=r(t):i.test(t)&&(s=a(t)),s&&(this.r=s.r/255,this.g=s.g/255,this.b=s.b/255,this.a=m(s.a)?1:s.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toUpArray",value:function(){return this.toArray().map(function(t){return 255*t})}},{key:"toString",value:function(){return"rgba("+[""+Math.round(255*this.r),""+Math.round(255*this.g),""+Math.round(255*this.b),""+this.a].join(",")+")"}}]),t}();e.default=_},function(t,e,n){"use strict";e.__esModule=!0;var i=n(15),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(227),o=n(316),r=n(116),a=n(77),s=n(516);t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,v){for(var p,m,_=r(e),g=o(_),y=i(s,v,3),x=a(g.length),b=0,S=n?h(e,x):l?h(e,0):void 0;x>b;b++)if((d||b in g)&&(p=g[b],m=y(p,b,_),t))if(n)S[b]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:S.push(p)}else if(c)return!1;return f?-1:u||c?c:S}}},function(t,e,n){var i=n(225);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(317),o=n(267),r=n(152),a=n(249),s=n(150),l=n(520),u=Object.getOwnPropertyDescriptor;e.f=n(91)?u:function(t,e){if(t=r(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(9),o=n(84),r=n(51);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*r(function(){n(1)}),"Object",a)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},,,function(t,e,n){"use strict";function i(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.result,o=void 0===n?[]:n,r=e.dimensions,a=void 0===r?3:r,s=0;s<t.length;){var l=t[s];Array.isArray(l)||ArrayBuffer.isView(l)?i(l,{result:o,dimensions:a}):o.push(l.lng,l.lat),s+=1}return o}function o(t,e){var n=t.getBounds();return n.covers(e)||n.intersects(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isInFrustum=o,e.default={to3DVertices:function(t,e){e=e||0;for(var n=[],i=0,o=t.length/2;i<o;i++)n.push(t[2*i],t[2*i+1],e,1);return n},mixCoords:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=[];if(i=i||0,n)for(var a=0,s=t.length/2;a<s;a++)r.push([t[2*a]*o+i,-1*t[2*a+1]*o+i].concat(n));else for(var l=0,u=t.length/2;l<u;l++)r.push([t[2*l]*o+i,-1*t[2*l+1]*o+i,0,1]);return"polygon"===e&&r.push(r[0]),r},flattenVertices:i,fillArray:function(t){for(var e=t.target,n=t.source,i=t.start,o=void 0===i?0:i,r=t.count,a=void 0===r?1:r,s=n.length,l=a*s,u=0,c=o;u<s;u++)e[c]=n[u],c+=1;for(;u<l;)u<l-u?(e.copyWithin(o+u,o,o+u),u*=2):(e.copyWithin(o+u,o,o+l-u),u=l);return e}}},,,function(t,e,n){t.exports={default:n(408),__esModule:!0}},function(t,e,n){n(238),t.exports=n(2).Number.isNaN},function(t,e,n){var i=n(6);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";if(n(91)){var i=n(262),o=n(52),r=n(51),a=n(9),s=n(351),l=n(439),u=n(227),c=n(282),f=n(267),d=n(151),h=n(284),v=n(230),p=n(77),m=n(539),_=n(268),g=n(249),y=n(150),x=n(315),b=n(53),S=n(116),w=n(426),E=n(263),T=n(265),A=n(264).f,P=n(441),I=n(269),k=n(69),L=n(226),M=n(341),C=n(318),R=n(442),N=n(283),B=n(347),O=n(285),D=n(419),z=n(514),V=n(92),F=n(228),U=V.f,Y=F.f,j=o.RangeError,G=o.TypeError,Z=o.Uint8Array,H=Array.prototype,W=l.ArrayBuffer,X=l.DataView,Q=L(0),q=L(2),J=L(3),K=L(4),$=L(5),tt=L(6),et=M(!0),nt=M(!1),it=R.values,ot=R.keys,rt=R.entries,at=H.lastIndexOf,st=H.reduce,lt=H.reduceRight,ut=H.join,ct=H.sort,ft=H.slice,dt=H.toString,ht=H.toLocaleString,vt=k("iterator"),pt=k("toStringTag"),mt=I("typed_constructor"),_t=I("def_constructor"),gt=s.CONSTR,yt=s.TYPED,xt=s.VIEW,bt=L(1,function(t,e){return At(C(t,t[_t]),e)}),St=r(function(){return 1===new Z(new Uint16Array([1]).buffer)[0]}),wt=!!Z&&!!Z.prototype.set&&r(function(){new Z(1).set({})}),Et=function(t,e){var n=v(t);if(n<0||n%e)throw j("Wrong offset!");return n},Tt=function(t){if(b(t)&&yt in t)return t;throw G(t+" is not a typed array!")},At=function(t,e){if(!(b(t)&&mt in t))throw G("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return It(C(t,t[_t]),e)},It=function(t,e){for(var n=0,i=e.length,o=At(t,i);i>n;)o[n]=e[n++];return o},kt=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},Lt=function(t){var e,n,i,o,r,a,s=S(t),l=arguments.length,c=l>1?arguments[1]:void 0,f=void 0!==c,d=P(s);if(void 0!=d&&!w(d)){for(a=d.call(s),i=[],e=0;!(r=a.next()).done;e++)i.push(r.value);s=i}for(f&&l>2&&(c=u(c,arguments[2],2)),e=0,n=p(s.length),o=At(this,n);n>e;e++)o[e]=f?c(s[e],e):s[e];return o},Mt=function(){for(var t=0,e=arguments.length,n=At(this,e);e>t;)n[t]=arguments[t++];return n},Ct=!!Z&&r(function(){ht.call(new Z(1))}),Rt=function(){return ht.apply(Ct?ft.call(Tt(this)):Tt(this),arguments)},Nt={copyWithin:function(t,e){return z.call(Tt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return K(Tt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return D.apply(Tt(this),arguments)},filter:function(t){return Pt(this,q(Tt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(Tt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Tt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Tt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(Tt(this),arguments)},lastIndexOf:function(t){return at.apply(Tt(this),arguments)},map:function(t){return bt(Tt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Tt(this),arguments)},reduceRight:function(t){return lt.apply(Tt(this),arguments)},reverse:function(){for(var t,e=this,n=Tt(e).length,i=Math.floor(n/2),o=0;o<i;)t=e[o],e[o++]=e[--n],e[n]=t;return e},some:function(t){return J(Tt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ct.call(Tt(this),t)},subarray:function(t,e){var n=Tt(this),i=n.length,o=_(t,i);return new(C(n,n[_t]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,p((void 0===e?i:_(e,i))-o))}},Bt=function(t,e){return Pt(this,ft.call(Tt(this),t,e))},Ot=function(t){Tt(this);var e=Et(arguments[1],1),n=this.length,i=S(t),o=p(i.length),r=0;if(o+e>n)throw j("Wrong length!");for(;r<o;)this[e+r]=i[r++]},Dt={entries:function(){return rt.call(Tt(this))},keys:function(){return ot.call(Tt(this))},values:function(){return it.call(Tt(this))}},zt=function(t,e){return b(t)&&t[yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Vt=function(t,e){return zt(t,e=g(e,!0))?f(2,t[e]):Y(t,e)},Ft=function(t,e,n){return!(zt(t,e=g(e,!0))&&b(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};gt||(F.f=Vt,V.f=Ft),a(a.S+a.F*!gt,"Object",{getOwnPropertyDescriptor:Vt,defineProperty:Ft}),r(function(){dt.call({})})&&(dt=ht=function(){return ut.call(this)});var Ut=h({},Nt);h(Ut,Dt),d(Ut,vt,Dt.values),h(Ut,{slice:Bt,set:Ot,constructor:function(){},toString:dt,toLocaleString:Rt}),kt(Ut,"buffer","b"),kt(Ut,"byteOffset","o"),kt(Ut,"byteLength","l"),kt(Ut,"length","e"),U(Ut,pt,{get:function(){return this[yt]}}),t.exports=function(t,e,n,l){l=!!l;var u=t+(l?"Clamped":"")+"Array",f="get"+t,h="set"+t,v=o[u],_=v||{},g=v&&T(v),y=!v||!s.ABV,S={},w=v&&v.prototype,P=function(t,n){var i=t._d;return i.v[f](n*e+i.o,St)},I=function(t,n,i){var o=t._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[h](n*e+o.o,i,St)},k=function(t,e){U(t,e,{get:function(){return P(this,e)},set:function(t){return I(this,e,t)},enumerable:!0})};y?(v=n(function(t,n,i,o){c(t,v,u,"_d");var r,a,s,l,f=0,h=0;if(b(n)){if(!(n instanceof W||"ArrayBuffer"==(l=x(n))||"SharedArrayBuffer"==l))return yt in n?It(v,n):Lt.call(v,n);r=n,h=Et(i,e);var _=n.byteLength;if(void 0===o){if(_%e)throw j("Wrong length!");if((a=_-h)<0)throw j("Wrong length!")}else if((a=p(o)*e)+h>_)throw j("Wrong length!");s=a/e}else s=m(n),a=s*e,r=new W(a);for(d(t,"_d",{b:r,o:h,l:a,e:s,v:new X(r)});f<s;)k(t,f++)}),w=v.prototype=E(Ut),d(w,"constructor",v)):r(function(){v(1)})&&r(function(){new v(-1)})&&B(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=n(function(t,n,i,o){c(t,v,u);var r;return b(n)?n instanceof W||"ArrayBuffer"==(r=x(n))||"SharedArrayBuffer"==r?void 0!==o?new _(n,Et(i,e),o):void 0!==i?new _(n,Et(i,e)):new _(n):yt in n?It(v,n):Lt.call(v,n):new _(m(n))}),Q(g!==Function.prototype?A(_).concat(A(g)):A(_),function(t){t in v||d(v,t,_[t])}),v.prototype=w,i||(w.constructor=v));var L=w[vt],M=!!L&&("values"==L.name||void 0==L.name),C=Dt.values;d(v,mt,!0),d(w,yt,u),d(w,xt,!0),d(w,_t,v),(l?new v(1)[pt]==u:pt in w)||U(w,pt,{get:function(){return u}}),S[u]=v,a(a.G+a.W+a.F*(v!=_),S),a(a.S,u,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*r(function(){_.of.call(v,1)}),u,{from:Lt,of:Mt}),"BYTES_PER_ELEMENT"in w||d(w,"BYTES_PER_ELEMENT",e),a(a.P,u,Nt),O(u),a(a.P+a.F*wt,u,{set:Ot}),a(a.P+a.F*!M,u,Dt),i||w.toString==dt||(w.toString=dt),a(a.P+a.F*r(function(){new v(1).slice()}),u,{slice:Bt}),a(a.P+a.F*(r(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!r(function(){w.toLocaleString.call([1,2])})),u,{toLocaleString:Rt}),N[u]=M?L:C,i||M||d(w,vt,C)}}else t.exports=function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(124),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default[1]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TILE_STATE=void 0;var o=n(15),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(10),f=e.TILE_STATE={unloaded:"tile_unloaded",loading:"tile_loading",loaded:"tile_loaded",errored:"tile_errored",reloading:"tile_reloading",expired:"tile_expired"},d=function(){function t(e,n){(0,s.default)(this,t),this.coord=e,this.uid=c.uniqueId(),this.tileSize=n,this.state=f.loading,this.visible=!0}return(0,u.default)(t,[{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"setData",value:function(t){if(t&&!t.baseData&&(this.state=f.loaded),t&&t.incrementData)return void(this._data=(0,r.default)({},this._data,t));this._data=t}},{key:"updateData",value:function(t){this.setData(t)}},{key:"getData",value:function(){return this._data}},{key:"getQueryData",value:function(t){return this._data&&this.visible?t&&""!==t?this._data[t]:this._data:null}},{key:"hasData",value:function(){return this.state===f.loaded||this.state===f.reloading||this.state===f.expired}},{key:"isLoading",value:function(){return this.state===f.loading||this.state===f.reloading}},{key:"isLoaded",value:function(){return this.state===f.loaded||this.state===f.errored||this.state===f.expired}},{key:"clear",value:function(){this.unloadData()}},{key:"unloadData",value:function(){this._data=null,this.state=f.unloaded}}]),t}();e.default=d},function(t,e,n){"use strict";var i=n(8),o=n(6),r=n(41),a=n(31),s=n(19),l=n(97),u=n(68),c=n(96),f=n(7),d=n(44),h=n(14).f,v=n(257)(0),p=n(12);t.exports=function(t,e,n,m,_,g){var y=i[t],x=y,b=_?"set":"add",S=x&&x.prototype,w={};return p&&"function"==typeof x&&(g||S.forEach&&!a(function(){(new x).entries().next()}))?(x=e(function(e,n){c(e,x,t,"_c"),e._c=new y,void 0!=n&&u(n,_,e[b],e)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in S&&(!g||"clear"!=t)&&s(x.prototype,t,function(n,i){if(c(this,x,t),!e&&g&&!f(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,i);return e?this:o})}),g||h(x.prototype,"size",{get:function(){return this._c.size}})):(x=m.getConstructor(e,t,_,b),l(x.prototype,n),r.NEED=!0),d(x,t),w[t]=x,o(o.G+o.W+o.F,w),g||m.setStrong(x,t,_),x}},function(t,e,n){"use strict";var i=n(12),o=n(35),r=n(80),a=n(47),s=n(32),l=n(82),u=Object.assign;t.exports=!u||n(31)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,c=1,f=r.f,d=a.f;u>c;)for(var h,v=l(arguments[c++]),p=f?o(v).concat(f(v)):o(v),m=p.length,_=0;m>_;)h=p[_++],i&&!d.call(v,h)||(n[h]=v[h]);return n}:u},function(t,e,n){"use strict";var i=n(6),o=n(46),r=n(24),a=n(68);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,s,l=arguments[1];return o(this),e=void 0!==l,e&&o(l),void 0==t?new this:(n=[],e?(i=0,s=r(l,arguments[2],2),a(t,!1,function(t){n.push(s(t,i++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";var i=n(6);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){var i=n(269)("meta"),o=n(53),r=n(150),a=n(92).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(51)(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!r(t,i)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[i].w},h=function(t){return u&&v.NEED&&l(t)&&!r(t,i)&&c(t),t},v=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(t,e,n){var i=n(53);t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var o in n)i(n,o)&&(t[o]=n[o])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,o){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+i),o);for(var r=0;r<i;r++)t[o+r]=e[n+r]},flattenChunks:function(t){var e,n,i,o,r,a;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),o=0,e=0,n=t.length;e<n;e++)r=t[e],a.set(r,o),o+=r.length;return a}},a={arraySet:function(t,e,n,i,o){for(var r=0;r<i;r++)t[o+r]=e[n+r]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(o)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(93),p=i(v),m=n(275),_=n(10),g=n(40),y=i(g),x=y.default.isNumber,b={},S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));n.options=t;var i=t.id;return n.id=y.default.isUndefined(i)?(0,_.uniqueId)():i,n.init(t),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"init",value:function(t){this.onInit(t),this.dom=this.createDOM(t)}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.CONTROL_POSITION.TOP_LEFT;return t!==this.position&&(this.appendToContainer(t),this.position=t),this}},{key:"setClassName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.dom&&(this.dom.className=t),this.className=t,this}},{key:"getDomPositionContainer",value:function(t){var e=t.id,n=this.options,i=n.position,o=n.className;return this.setPosition(i),this.setClassName(o),b[e][i]}},{key:"appendToContainer",value:function(t){if(!this.map||!this.map.id)return void console.error("当前没有添加该控件，请先添加控件再设置位置！");var e=this.map.id;if(b[e]||(b[e]={}),!b[e][t]){b[e][t]=document.createElement("div");var n=b[e][t];n.style.right="auto",n.style.left="auto",n.style.top="auto",n.style.bottom="auto",n.style.cssText+=m.CONTROL_POSITION_STYLE[t],m.CONTROL_POSITION.BOTTOM_LEFT,this.dom.parentNode&&this.dom.parentNode.parentNode&&this.dom.parentNode.parentNode.appendChild(n)}return b[e][t].firstChild?b[e][t].insertBefore(this.dom,b[e][t].firstChild):b[e][t].appendChild(this.dom),b[e][t]}},{key:"createDOM",value:function(){}},{key:"onInit",value:function(){}},{key:"onDestroy",value:function(){}},{key:"onAdd",value:function(){}},{key:"onRemove",value:function(){}},{key:"addTo",value:function(t,e){this.map=t;var n=this.getDomPositionContainer(t);e.appendChild(n),this.onAdd()}},{key:"remove",value:function(){var t=this.map&&this.map.id;if(this.dom){var e=this.dom.parentNode;this.dom.remove(),e&&!e.firstChild&&(e.remove(),e=null,x(this.position)&&t&&delete b[t][this.position]),this.position=null,this.onRemove(),this.map=null}}},{key:"destroy",value:function(){this.remove(),this.onDestroy(),this.removeAllListeners(),this.dom=null,this.className=null,this.position=null,this.id=null}}]),e}(p.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(332),p=i(v),m=n(28),_=n(40),g=i(_),y=n(125),x=n(25),b=n(93),S=n(10),w=g.default.isNumber,E=g.default.isUndefined,T=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.id=t.id||S.uniqueId(),n.type=t.type||null,n.sourceId=t.sourceId||null,n.setZoomRange(t.minZoom,t.maxZoom),n.setDataZoomRange(t.minDataZoom||t.minZoom,t.maxDataZoom||t.maxZoom),n.visible=!!E(t.visible)||Boolean(t.visible),n.setLevel(t.level||y.LAYER_LEVEL.GROUND),n.setZIndex(t.zIndex||0),n.setOpacity(t.opacity),n._childLayers={},n._initialize(t),t.map&&n.setMap(t.map),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getId",value:function(){return this.id}},{key:"setVisible",value:function(t){return t=Boolean(t),this._forEachChild(function(e,n){n.setVisible(t)}),this.visible===t?this:(this.visible=t,this._fire("layer",{}),this)}},{key:"setZIndex",value:function(t){return w(t)||(new m.BaseTypeError("Layer.zIndex","number",t).error(),t=0),this._forEachChild(function(e,n){n.setZIndex(t)}),this.zIndex=t,this.setRank((0,y.getRank)(this.level,this.zIndex)),this}},{key:"setLevel",value:function(t){this.level=t,this.setRank((0,y.getRank)(this.level,this.zIndex))}},{key:"setRank",value:function(t){this.rank=t,this._forEachChild(function(e,n){n.setRank(t)}),this.emit("rank_changed")}},{key:"getRank",value:function(){return this.rank}},{key:"setMap",value:function(t){return t instanceof p.default||null===t?this.map===t?this:(this.map&&(this.map.removeLayer(this.id),this._removeSource(),this.map=null),t&&(this.map=t,t.addLayer(this),this._addSource()),this):(console.error("传入的map参数并非TMap.Map实例"),this)}},{key:"getMap",value:function(){return this.map}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setZoomRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.minZoom,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.maxZoom;return w(t)||(new m.BaseTypeError("Layer.minZoom","number",t).error(),t=x.minZoom),w(e)||(new m.BaseTypeError("Layer.maxZoom","number",e).error(),e=x.maxZoom),this._forEachChild(function(n,i){i.setZoomRange(t,e)}),this.minZoom=t,this.maxZoom=e,this}},{key:"setDataZoomRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.minZoom,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.maxZoom;return w(t)||(new m.BaseTypeError("Layer.minDataZoom","number",t).error(),t=x.minZoom),w(e)||(new m.BaseTypeError("Layer.maxDataZoom","number",e).error(),e=x.maxZoom),this._forEachChild(function(n,i){i.setDataZoomRange(t,e)}),this.minDataZoom=t,this.maxDataZoom=e,this}},{key:"setOpacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return w(t)||(new m.BaseTypeError("Layer.opacity","number",t).error(),t=1),(t<0||t>1)&&(console.error("Layer.opacity 传入参数值范围应当在0~1之间！"),t=S.clamp(t,0,1)),this.opacity=t,this}},{key:"_removeSource",value:function(){}},{key:"_addSource",value:function(){}},{key:"_initialize",value:function(){}},{key:"isHidden",value:function(t){return!!(this.minZoom&&t<this.minZoom)||(!!(this.maxZoom&&t>this.maxZoom)||!this.visible)}},{key:"appendChild",value:function(t){var n=t instanceof e?t:new e(t);return n.setMap(null),n.setZIndex(this.zIndex),n.setRank(this.rank),n.setZoomRange(this.minZoom,this.maxZoom),n.setVisible(this.visible),this._childLayers[n.id]=n,n}},{key:"removeChild",value:function(t){this._childLayers[t]&&delete this._childLayers[t]}},{key:"hasChild",value:function(t){return!!this._childLayers[t]}},{key:"getChild",value:function(t){return this.hasChild(t)?this._childLayers[t]:null}},{key:"_forEachChild",value:function(t){S.forIn(this._childLayers,function(e,n){t(e,n)})}},{key:"flat",value:function(){var t=[];return this.sourceId&&t.push(this),this._forEachChild(function(e,n){t=t.concat(n.flat())}),t}}]),e}(b);e.default=T},,function(t,e,n){"use strict";function i(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function o(t){var e=(0,a.default)(t,3);return e[0]+256*e[1]+65536*e[2]-1}Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.encodePickingColor=i,e.decodePickingColor=o},function(t,e,n){t.exports={default:n(409),__esModule:!0}},function(t,e,n){n(260),t.exports=n(2).Object.assign},function(t,e,n){var i=n(24),o=n(82),r=n(32),a=n(56),s=n(308);t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,v){for(var p,m,_=r(e),g=o(_),y=i(s,v,3),x=a(g.length),b=0,S=n?h(e,x):l?h(e,0):void 0;x>b;b++)if((d||b in g)&&(p=g[b],m=y(p,b,_),t))if(n)S[b]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:S.push(p)}else if(c)return!1;return f?-1:u||c?c:S}}},function(t,e,n){"use strict";var i=n(14).f,o=n(55),r=n(97),a=n(24),s=n(96),l=n(68),u=n(70),c=n(111),f=n(122),d=n(12),h=n(41).fastKey,v=n(138),p=d?"_s":"size",m=function(t,e){var n,i=h(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var c=t(function(t,i){s(t,c,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=i&&l(i,n,t[u],t)});return r(c.prototype,{clear:function(){for(var t=v(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var n=v(this,e),i=m(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[p]--}return!!i},forEach:function(t){v(this,e);for(var n,i=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(v(this,e),t)}}),d&&i(c.prototype,"size",{get:function(){return v(this,e)[p]}}),c},def:function(t,e,n){var i,o,r=m(t,e);return r?r.v=n:(t._l=r={i:o=h(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[p]++,"F"!==o&&(t._i[o]=r)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){var i=n(54),o=n(306);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},function(t,e,n){var i=n(6);i(i.S+i.F,"Object",{assign:n(245)})},function(t,e,n){var i=n(69)("unscopables"),o=Array.prototype;void 0==o[i]&&n(151)(o,i,{}),t.exports=function(t){o[i][t]=!0}},function(t,e){t.exports=!1},function(t,e,n){var i=n(50),o=n(529),r=n(422),a=n(433)("IE_PROTO"),s=function(){},l=function(){var t,e=n(421)("iframe"),i=r.length;for(e.style.display="none",n(424).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[r[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=l(),void 0===e?n:o(n,e)}},function(t,e,n){var i=n(531),o=n(422).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},function(t,e,n){var i=n(150),o=n(116),r=n(433)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(531),o=n(422);t.exports=Object.keys||function(t){return i(t,o)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(230),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(53);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(444),n(443))}(0,function(t){return function(){var e=t,n=e.lib,i=n.Base,o=n.WordArray,r=e.algo,a=r.MD5,s=r.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=n.hasher.create(),r=o.create(),a=r.words,s=n.keySize,l=n.iterations;a.length<s;){u&&i.update(u);var u=i.update(t).finalize(e);i.reset();for(var c=1;c<l;c++)u=i.finalize(u),i.reset();r.concat(u)}return r.sigBytes=4*s,r}});e.EvpKDF=function(t,e,n){return s.create(n).compute(t,e)}}(),t.EvpKDF})},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},,function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=d[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(l(i.parts[r],e))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(l(i.parts[r],e));d[i.id]={id:i.id,refs:1,parts:a}}}}function i(t){for(var e=[],n={},i=0;i<t.length;i++){var o=t[i],r=o[0],a=o[1],s=o[2],l=o[3],u={css:a,media:s,sourceMap:l};n[r]?n[r].parts.push(u):e.push(n[r]={id:r,parts:[u]})}return e}function o(t,e){var n=p(),i=g[g.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function l(t,e){var n,i,o;if(e.singleton){var l=_++;n=m||(m=a(e)),i=u.bind(null,n,l,!1),o=u.bind(null,n,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(e),i=f.bind(null,n),o=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),i=c.bind(null,n),o=function(){r(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}function u(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=y(e,o);else{var r=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function c(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var d={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},v=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),p=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,_=0,g=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},void 0===e.singleton&&(e.singleton=v()),void 0===e.insertAt&&(e.insertAt="bottom");var o=i(t);return n(o,e),function(t){for(var r=[],a=0;a<o.length;a++){var s=o[a],l=d[s.id];l.refs--,r.push(l)}if(t){n(i(t),e)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete d[l.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTROL_POSITION_STYLE=e.CONTROL_POSITION=e.DEFAULT_CONTROL_ID=void 0;var i=n(236),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=(e.DEFAULT_CONTROL_ID={SCALE:"scale",ZOOM:"zoom",FLOOR:"floor",LOGO:"logo",ROTATION:"rotation"},e.CONTROL_POSITION={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER:4,CENTER_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8});e.CONTROL_POSITION_STYLE=function(){var t={};return(0,o.default)(r).forEach(function(e){var n=e%3,i=Math.floor(e/3),o="position: absolute;";switch(i){case 0:o+="top:0px;";break;case 1:o+="top:50%;";break;case 2:o+="bottom:0px;"}switch(n){case 0:o+="left:0px;";break;case 1:o+="left:50%;";break;case 2:o+="right:0px;"}o+="transform: translate("+(1===n?"-50%":"0")+", "+(1===i?"-50%":"0")+");",t[e]=o}),t}()},function(t,e,n){"use strict";function i(t){var e=t.geometries.map(function(t){return t.paths||[]}),n=new o.PolygonParseHelper({complexPolygons:e,IndexType:Uint32Array});n.updatePositions({fp64:!0,extruded:!0});var i=n.getPositions(),r=n.getIndices(),s=n.getPositions64xyLow(),l=n.getVertexValid(),u=n.getPickingColors(),c=n.getElevations({getElevation:function(e){var n=t.geometries[e],i=t.styles[n.styleId];return i&&i.extrudeHeight?i.extrudeHeight:0}}),f=n.getColors({key:"fillColors",getColor:function(e){var n=t.geometries[e],i=t.styles[n.styleId];if(i){return new a.default(i.color).toUpArray()}return[0,0,0,0]}}),d=n.getColors({key:"lineColors",getColor:function(e){var n=t.geometries[e],i=t.styles[n.styleId];if(i){if(i.showBorder){var o=new a.default(i.borderColor);return"borderWidth"in i?[0,0,0,0]:o.toUpArray()}return[0,0,0,0]}return[0,0,0,0]}}),h=i.slice(3),v=s.slice(2),p=i.slice(),m=s.slice();return p.set(h),m.set(v),{positions:i,indices:r,positions64xyLow:s,vertexValid:l,pickingColors:u,elevations:c,fillColors:f,lineColors:d,nextPositions:p,nextPositions64xyLow:m}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(327),r=n(223),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i},function(t,e,n){"use strict";function i(t,e,n,i){n=n||2;var r=e&&e.length,s=r?e[0]*n:t.length,l=o(t,0,s,n,!0),u=[];if(!l)return u;var c=void 0,d=void 0,h=void 0,v=void 0,p=void 0,m=void 0,_=void 0;if(r&&(l=f(t,e,l,n)),t.length>80*n){var g=(0,R.default)(t,2);h=g[0],v=g[1],c=h,d=v;for(var y=n;y<s;y+=n)p=t[y],m=t[y+1],p<c&&(c=p),m<d&&(d=m),p>h&&(h=p),m>v&&(v=m);_=Math.max(h-c,v-d)}return a(l,u,n,c,d,_,void 0,i),u}function o(t,e,n,i,o){var r=void 0,a=void 0;if(o===M(t,e,n,i)>0)for(r=e;r<n;r+=i)a=I(r,t[r],t[r+1],a);else for(r=n-i;r>=e;r-=i)a=I(r,t[r],t[r+1],a);return a&&S(a,a.next)&&(k(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var n=t,i=void 0;do{if(i=!1,n.steiner||!S(n,n.next)&&0!==b(n.prev,n,n.next))n=n.next;else{if(k(n),e=n.prev,(n=e)===n.next)return null;i=!0}}while(i||n!==e);return e}function a(t,e,n,i,o,f,d,h){if(h=h||0,t){!d&&f&&p(t,i,o,f);for(var v=t,m=void 0,_=void 0;t.prev!==t.next;)if(m=t.prev,_=t.next,f?l(t,i,o,f):s(t))e.push(m.i/n+h),e.push(t.i/n+h),e.push(_.i/n+h),k(t),t=_.next,v=_.next;else if((t=_)===v){d?1===d?(t=u(t,e,n,h),a(t,e,n,i,o,f,2,h)):2===d&&c(t,e,n,i,o,f,h):a(r(t),e,n,i,o,f,1,h);break}}}function s(t){var e=t.prev,n=t,i=t.next;if(b(e,n,i)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(y(e.x,e.y,n.x,n.y,i.x,i.y,o.x,o.y)&&b(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function l(t,e,n,i){var o=t.prev,r=t,a=t.next;if(b(o,r,a)>=0)return!1;for(var s=o.x<r.x?o.x<a.x?o.x:a.x:r.x<a.x?r.x:a.x,l=o.y<r.y?o.y<a.y?o.y:a.y:r.y<a.y?r.y:a.y,u=o.x>r.x?o.x>a.x?o.x:a.x:r.x>a.x?r.x:a.x,c=o.y>r.y?o.y>a.y?o.y:a.y:r.y>a.y?r.y:a.y,f=_(s,l,e,n,i),d=_(u,c,e,n,i),h=t.nextZ;h&&h.z<=d;){if(h!==t.prev&&h!==t.next&&y(o.x,o.y,r.x,r.y,a.x,a.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&y(o.x,o.y,r.x,r.y,a.x,a.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function u(t,e,n,i){var o=t;do{var r=o.prev,a=o.next.next;!S(r,a)&&w(r,o,o.next,a)&&T(r,a)&&T(a,r)&&(e.push(r.i/n+i),e.push(o.i/n+i),e.push(a.i/n+i),k(o),k(o.next),t=a,o=t),o=o.next}while(o!==t);return o}function c(t,e,n,i,o,s,l){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&x(u,c)){var f=P(u,c);return u=r(u,u.next),f=r(f,f.next),a(u,e,n,i,o,s,void 0,l),void a(f,e,n,i,o,s,void 0,l)}c=c.next}u=u.next}while(u!==t)}function f(t,e,n,i){var a=[],s=void 0,l=void 0,u=void 0,c=void 0,f=void 0;for(s=0,l=e.length;s<l;s++)u=e[s]*i,c=s<l-1?e[s+1]*i:t.length,f=o(t,u,c,i,!1),f===f.next&&(f.steiner=!0),a.push(g(f));for(a.sort(d),s=0;s<a.length;s++)h(a[s],n),n=r(n,n.next);return n}function d(t,e){return t.x-e.x}function h(t,e){if(e=v(t,e)){var n=P(e,t);r(n,n.next)}}function v(t,e){var n=e,i=t.x,o=t.y,r=-1/0,a=void 0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>r){if(r=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!a)return null;if(i===r)return a.prev;var l=a,u=a.x,c=a.y,f=1/0,d=void 0;for(n=a.next;n!==l;)i>=n.x&&n.x>=u&&i!==n.x&&y(o<c?i:r,o,u,c,o<c?r:i,o,n.x,n.y)&&((d=Math.abs(o-n.y)/(i-n.x))<f||d===f&&n.x>a.x)&&T(n,t)&&(a=n,f=d),n=n.next;return a}function p(t,e,n,i){var o=t;do{null===o.z&&(o.z=_(o.x,o.y,e,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,m(o)}function m(t){var e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=void 0,s=void 0,l=void 0,u=1;do{for(n=t,t=null,r=null,a=0;n;){for(a+=1,i=n,s=0,e=0;e<u&&(s+=1,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(o=n,n=n.nextZ,s-=1):(o=i,i=i.nextZ,l-=1),r?r.nextZ=o:t=o,o.prevZ=r,r=o;n=i}r&&(r.nextZ=null),u*=2}while(a>1);return t}function _(t,e,n,i,o){return t=32767*(t-n)/o,e=32767*(e-i)/o,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,i,o,r,a,s){return(o-a)*(e-s)-(t-a)*(r-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(r-s)-(o-a)*(i-s)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!E(t,e)&&T(t,e)&&T(e,t)&&A(t,e)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function S(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,i){return!!(S(t,e)&&S(n,i)||S(t,i)&&S(n,e))||b(t,e,n)>0!=b(t,e,i)>0&&b(n,i,t)>0!=b(n,i,e)>0}function E(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function T(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function A(t,e){var n=t,i=!1,o=(t.x+e.x)/2,r=(t.y+e.y)/2;do{n.y>r!=n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function P(t,e){var n=new L(t.i,t.x,t.y),i=new L(e.i,e.x,e.y),o=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function I(t,e,n,i){var o=new L(t,e,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function L(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,n,i){for(var o=0,r=e,a=n-i;r<n;r+=i)o+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return o}var C=n(30),R=function(t){return t&&t.__esModule?t:{default:t}}(C);t.exports=i,i.deviation=function(t,e,n,i){var o=e&&e.length,r=o?e[0]*n:t.length,a=Math.abs(M(t,0,r,n));if(o)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(M(t,u,c,n))}for(var f=0,d=0;d<i.length;d+=3){var h=i[d]*n,v=i[d+1]*n,p=i[d+2]*n;f+=Math.abs((t[h]-t[p])*(t[v+1]-t[h+1])-(t[h]-t[v])*(t[p+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,o=0;o<t.length;o++){for(var r=0;r<t[o].length;r++)for(var a=0;a<e;a++)n.vertices.push(t[o][r][a]);o>0&&(i+=t[o-1].length,n.holes.push(i))}return n}},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(10),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,t),e&&(this.gl=e,this.id=n.id||"resource-"+(0,l.uniqueId)(),this._object=this._onCreate(n),this._initialize(n))}return(0,s.default)(t,[{key:"delete",value:function(){this._onDelete(),this._object=null,this.gl=null}},{key:"_onCreate",value:function(){}},{key:"_onDelete",value:function(){}},{key:"_initialize",value:function(){}},{key:"bind",value:function(){}},{key:"unbind",value:function(){}}]),t}();e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var i=n(21),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){return function(){var e=t.apply(this,arguments);return new o.default(function(t,n){function i(r,a){try{var s=e[r](a),l=s.value}catch(t){return void n(t)}if(!s.done)return o.default.resolve(l).then(function(t){i("next",t)},function(t){i("throw",t)});t(l)}return i("next")})}}},function(t,e,n){t.exports=n(398)},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e){t.exports={}},function(t,e,n){var i=n(142);t.exports=function(t,e,n){for(var o in e)i(t,o,e[o],n);return t}},function(t,e,n){"use strict";var i=n(52),o=n(92),r=n(91),a=n(69)("species");t.exports=function(t){var e=i[t];r&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(92).f,o=n(150),r=n(69)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e,n){var i=n(9),o=n(240),r=n(51),a=n(437),s="["+a+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),f=function(t,e,n){var o={},s=r(function(){return!!a[t]()||l[t]()!=l}),u=o[t]=s?e(d):a[t];n&&(o[n]=u),i(i.P+i.F*s,"String",o)},d=f.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=f},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){return function(){function e(t,e,n){for(var i=[],r=0,a=0;a<e;a++)if(a%4){var s=n[t.charCodeAt(a-1)]<<a%4*2,l=n[t.charCodeAt(a)]>>>6-a%4*2;i[r>>>2]|=(s|l)<<24-r%4*8,r++}return o.create(i,r)}var n=t,i=n.lib,o=i.WordArray,r=n.enc;r.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var o=[],r=0;r<n;r+=3)for(var a=e[r>>>2]>>>24-r%4*8&255,s=e[r+1>>>2]>>>24-(r+1)%4*8&255,l=e[r+2>>>2]>>>24-(r+2)%4*8&255,u=a<<16|s<<8|l,c=0;c<4&&r+.75*c<n;c++)o.push(i.charAt(u>>>6*(3-c)&63));var f=i.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(t){var n=t.length,i=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var r=0;r<i.length;r++)o[i.charCodeAt(r)]=r}var a=i.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(n=s)}return e(t,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64})},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){return function(e){function n(t,e,n,i,o,r,a){var s=t+(e&n|~e&i)+o+a;return(s<<r|s>>>32-r)+e}function i(t,e,n,i,o,r,a){var s=t+(e&i|n&~i)+o+a;return(s<<r|s>>>32-r)+e}function o(t,e,n,i,o,r,a){var s=t+(e^n^i)+o+a;return(s<<r|s>>>32-r)+e}function r(t,e,n,i,o,r,a){var s=t+(n^(e|~i))+o+a;return(s<<r|s>>>32-r)+e}var a=t,s=a.lib,l=s.WordArray,u=s.Hasher,c=a.algo,f=[];!function(){for(var t=0;t<64;t++)f[t]=4294967296*e.abs(e.sin(t+1))|0}();var d=c.MD5=u.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var a=0;a<16;a++){var s=e+a,l=t[s];t[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var u=this._hash.words,c=t[e+0],d=t[e+1],h=t[e+2],v=t[e+3],p=t[e+4],m=t[e+5],_=t[e+6],g=t[e+7],y=t[e+8],x=t[e+9],b=t[e+10],S=t[e+11],w=t[e+12],E=t[e+13],T=t[e+14],A=t[e+15],P=u[0],I=u[1],k=u[2],L=u[3];P=n(P,I,k,L,c,7,f[0]),L=n(L,P,I,k,d,12,f[1]),k=n(k,L,P,I,h,17,f[2]),I=n(I,k,L,P,v,22,f[3]),P=n(P,I,k,L,p,7,f[4]),L=n(L,P,I,k,m,12,f[5]),k=n(k,L,P,I,_,17,f[6]),I=n(I,k,L,P,g,22,f[7]),P=n(P,I,k,L,y,7,f[8]),L=n(L,P,I,k,x,12,f[9]),k=n(k,L,P,I,b,17,f[10]),I=n(I,k,L,P,S,22,f[11]),P=n(P,I,k,L,w,7,f[12]),L=n(L,P,I,k,E,12,f[13]),k=n(k,L,P,I,T,17,f[14]),I=n(I,k,L,P,A,22,f[15]),P=i(P,I,k,L,d,5,f[16]),L=i(L,P,I,k,_,9,f[17]),k=i(k,L,P,I,S,14,f[18]),I=i(I,k,L,P,c,20,f[19]),P=i(P,I,k,L,m,5,f[20]),L=i(L,P,I,k,b,9,f[21]),k=i(k,L,P,I,A,14,f[22]),I=i(I,k,L,P,p,20,f[23]),P=i(P,I,k,L,x,5,f[24]),L=i(L,P,I,k,T,9,f[25]),k=i(k,L,P,I,v,14,f[26]),I=i(I,k,L,P,y,20,f[27]),P=i(P,I,k,L,E,5,f[28]),L=i(L,P,I,k,h,9,f[29]),k=i(k,L,P,I,g,14,f[30]),I=i(I,k,L,P,w,20,f[31]),P=o(P,I,k,L,m,4,f[32]),L=o(L,P,I,k,y,11,f[33]),k=o(k,L,P,I,S,16,f[34]),I=o(I,k,L,P,T,23,f[35]),P=o(P,I,k,L,d,4,f[36]),L=o(L,P,I,k,p,11,f[37]),k=o(k,L,P,I,g,16,f[38]),I=o(I,k,L,P,b,23,f[39]),P=o(P,I,k,L,E,4,f[40]),L=o(L,P,I,k,c,11,f[41]),k=o(k,L,P,I,v,16,f[42]),I=o(I,k,L,P,_,23,f[43]),P=o(P,I,k,L,x,4,f[44]),L=o(L,P,I,k,w,11,f[45]),k=o(k,L,P,I,A,16,f[46]),I=o(I,k,L,P,h,23,f[47]),P=r(P,I,k,L,c,6,f[48]),L=r(L,P,I,k,g,10,f[49]),k=r(k,L,P,I,T,15,f[50]),I=r(I,k,L,P,m,21,f[51]),P=r(P,I,k,L,w,6,f[52]),L=r(L,P,I,k,v,10,f[53]),k=r(k,L,P,I,b,15,f[54]),I=r(I,k,L,P,d,21,f[55]),P=r(P,I,k,L,y,6,f[56]),L=r(L,P,I,k,A,10,f[57]),k=r(k,L,P,I,_,15,f[58]),I=r(I,k,L,P,E,21,f[59]),P=r(P,I,k,L,p,6,f[60]),L=r(L,P,I,k,S,10,f[61]),k=r(k,L,P,I,h,15,f[62]),I=r(I,k,L,P,x,21,f[63]),u[0]=u[0]+P|0,u[1]=u[1]+I|0,u[2]=u[2]+k|0,u[3]=u[3]+L|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var r=e.floor(i/4294967296),a=i;n[15+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,l=s.words,u=0;u<4;u++){var c=l[u];l[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return s},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}});a.MD5=u._createHelper(d),a.HmacMD5=u._createHmacHelper(d)}(Math),t.MD5})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LIGHT_FRAG=e.LIGHT_VERTEX=e.LIGHT_VARYING=e.LIGHT_UNIFORM=void 0;var i=n(374),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=o.default?"\nvec4 lighting_apply_on_color(vec4 color) {\n\tfloat isInShadow = isInShadow();\n\tvec3 colorInLight = color.rgb * mix(\n\t\tlighting_vLightWeight,\n\t\tlighting_vLightWeight - lighting_vShadowWeight,\n\t\tisInShadow\n\t) + mix(\n\t\tlighting_vLightSpecular,\n\t\tlighting_vLightSpecular - lighting_vShadowSpecular,\n\t\tisInShadow\n\t);\n\tcolorInLight = mix(\n\t\tcolorInLight,\n\t\ttoneMapping(colorInLight, lighting_vToneMapping.y),\n\t\tlighting_vToneMapping.x\n\t);\n\treturn vec4(colorInLight, color.a);\n}\n":"\nvec4 lighting_apply_on_color(vec4 color) {\n\tvec3 colorInLight = color.rgb * lighting_vLightWeight + lighting_vLightSpecular;\n\treturn vec4(colorInLight, color.a);\n}\n";e.LIGHT_UNIFORM="\n#define LIGHT_MAX 4\n\n\nuniform vec4 lighting_uBase;\nuniform vec4 lighting_uAdvanced;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirDirection[LIGHT_MAX];\nuniform vec3 lighting_uDirColor[LIGHT_MAX];\nuniform vec3 lighting_uPointPosition[LIGHT_MAX];\nuniform vec3 lighting_uPointAtt[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform vec2 lighting_uLightCount;\nuniform vec3 lighting_uViewPos;\nuniform mat4 lighting_uShadowLightPVMatrix;\n",e.LIGHT_VARYING="\n\nvarying vec3 lighting_vLightWeight;\nvarying vec3 lighting_vLightSpecular;\nvarying vec3 lighting_vShadowWeight;\nvarying vec3 lighting_vShadowSpecular;\nvarying mediump vec4 lighting_vShadowInfo;\nvarying vec2 lighting_vToneMapping;\n",e.LIGHT_VERTEX="\nvec3 lighting_vPosition;\nvec3 lighting_vNormal;\nvec3 lighting_vViewDir;\nvec2 lighting_vObjSpec;\n\n\nfloat lighting_calcDiffuse(vec3 lightDir) {\n\treturn max(dot(lightDir, lighting_vNormal), 0.);\n}\n\n\nfloat lighting_calcSpecular(vec3 lightDir) {\n\t\n\t\n\t\n\t\n\tvec3 halfwayDir = normalize(lighting_vViewDir + lightDir);\n\tfloat reflectStrength = max(dot(halfwayDir, lighting_vNormal), 0.);\n\n\treturn pow(reflectStrength, lighting_vObjSpec.y) * lighting_vObjSpec.x;\n}\n\n\nvoid lighting_setObjInfo(vec3 position, vec3 normal, mat4 modelMatrix, vec2 objSpec) {\n\tlighting_vPosition = (modelMatrix * vec4(position, 1.)).xyz;\n\tlighting_vNormal = normalize(modelMatrix * vec4(normal, 0.)).xyz;\n\tlighting_vViewDir = normalize(lighting_uViewPos - lighting_vPosition);\n\tlighting_vObjSpec = objSpec;\n\tlighting_vToneMapping = lighting_uAdvanced.xy;\n\t\n\tvec4 posInLightView = lighting_uShadowLightPVMatrix * vec4(lighting_vPosition, 1.0);\n\tvec3 normalized = (posInLightView.xyz/ posInLightView.w + 1.0) / 2.0;\n\tlighting_vShadowInfo = vec4(normalized, lighting_uAdvanced.z);\n}\n\n\nvoid lighting_calcDirLights(float enable) {\n\tvec3 diffuse = vec3(0.0);\n\tvec3 specular = vec3(0.0);\n\tvec3 shadowDiffuse = vec3(0.0);\n\tvec3 shadowSpecular = vec3(0.0);\n\n\tfor (int i = 0; i < LIGHT_MAX; i++) {\n\t\tfloat isValid = (1.0 - step(float(lighting_uLightCount.x), float(i))) * enable;\n\n\t\t\n\t\tdiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisValid\n\t\t);\n\t\t\n\t\t\n\t\tspecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisValid\n\t\t);\n\n\t\t\n\t\tfloat isShadowLight = isValid * step(0., lighting_uAdvanced.z) * float((float(i) == lighting_uAdvanced.w));\n\t\tshadowDiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisShadowLight\n\t\t);\n\t\tshadowSpecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(lighting_uDirDirection[i]) * lighting_uDirColor[i],\n\t\t\tisShadowLight\n\t\t);\n\t}\n\n\tlighting_vLightWeight += diffuse * lighting_uBase.z;\n\tlighting_vLightSpecular += specular * lighting_uBase.w;\n\tlighting_vShadowWeight = shadowDiffuse * lighting_uBase.z * lighting_uAdvanced.z;\n\tlighting_vShadowSpecular = shadowSpecular * lighting_uBase.w * lighting_uAdvanced.z;\n}\n\n\nvoid lighting_calcPointLights(float enable) {\n\tvec3 diffuse = vec3(0.0);\n\tvec3 specular = vec3(0.0);\n\n\tfor (int i = 0; i < LIGHT_MAX; i++) {\n\t\tfloat isValid = (1.0 - step(float(lighting_uLightCount.y), float(i))) * enable;\n\n\t\tvec3 posToLight = lighting_uPointPosition[i] - lighting_vPosition;\n\t\tvec3 direction = normalize(posToLight);\n\t\tfloat distance = length(posToLight);\n\t\t\n\t\t\n\t\tfloat attenuation = 1.0 / dot(vec3(1.0, 0.014, 0.0007), vec3(1.0, distance, distance * distance));\n\n\t\t\n\t\tdiffuse += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcDiffuse(direction) * lighting_uPointColor[i] * attenuation,\n\t\t\tisValid\n\t\t);\n\t\t\n\t\t\n\t\tspecular += mix(\n\t\t\tvec3(0.0),\n\t\t\tlighting_calcSpecular(direction) * lighting_uPointColor[i] * attenuation,\n\t\t\tisValid\n\t\t);\n\t}\n\n\tlighting_vLightWeight += diffuse * lighting_uBase.z;\n\tlighting_vLightSpecular += specular * lighting_uBase.w;\n}\n\n\nvoid lighting_apply_on_vertex(vec3 position, vec3 normal, mat4 modelMatrix, vec2 objSpec) {\n\tlighting_setObjInfo(position, normal, modelMatrix, objSpec);\n\n\t\n\tlighting_vLightWeight = mix(\n\t\tvec3(1.0),\n\t\tlighting_uAmbientColor * lighting_uBase.y,\n\t\tlighting_uBase.x\n\t);\n\tlighting_vLightSpecular = vec3(0.0);\n\tlighting_vShadowWeight = vec3(0.0);\n\tlighting_vShadowSpecular = vec3(0.0);\n\n\t\n\tlighting_calcDirLights(lighting_uBase.x);\n\tlighting_calcPointLights(lighting_uBase.x);\n}\n\nvoid lighting_apply_on_vertex(vec3 position, vec3 normal, mat4 modelMatrix) {\n\tlighting_apply_on_vertex(position, normal, modelMatrix, vec2(0.4, 32.0));\n}\n",e.LIGHT_FRAG="\nuniform sampler2D lighting_uShadowSampler;\n\nvec3 toneMapping(vec3 hdrColor, float exposure) {\n\tconst float gamma = 2.2;\n\n\n\tvec3 mapped = vec3(1.0) - exp(-hdrColor * exposure);\n\t\n\n\tmapped = pow(mapped, vec3(1.0 / gamma));\n\t\n\treturn mapped;\n}\n\nfloat getShadowSceneDepth() {\n\treturn texture2D(lighting_uShadowSampler, lighting_vShadowInfo.xy).x;\n}\n\nfloat isInShadow() {\n  float isInSideTexture = float(abs(lighting_vShadowInfo.x - 0.5) < 0.5 && abs(lighting_vShadowInfo.y - 0.5) < 0.5);\n\tfloat sceneDepth = getShadowSceneDepth();\n\treturn mix(\n\t\t0.0,\n\t\tstep(0.0005, abs(lighting_vShadowInfo.z - sceneDepth)) * step(sceneDepth, lighting_vShadowInfo.z),\n\t\tstep(0., lighting_vShadowInfo.w) * isInSideTexture\n  );\n}\n\n"+r+"\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PICK_UNIFORM="\nuniform float picking_usePickingColor;\nuniform vec3 picking_selectedPickingColor;\n",e.PICK_FUNCTION="\n    vec4 picking_getFinalColor(vec4 vertexColor, vec3 instancePickingColors) {\n        \n        return mix(\n            vertexColor,\n\n            vec4(instancePickingColors.rgb,  255.0).rgba / 255.0,\n\n            picking_usePickingColor);\n    }\n"},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!y.has(t)){var n=new l.default(function(t){if(!d.default||m.default.isLocal)return void t(null);var n=e.subkey,i=e.subpid,o=["key="+d.default,"pid="+document.domain,"channel=0"];n&&o.push("key2="+n,"pid2="+i);var r=v.default.checkKeySrc+"?"+o.join("&");g(null,r,function(e){var i=void 0;e&&e.info&&0===e.info.error?(i=e.detail&&e.detail.cfg)&&(i.subkey=n):console.error("鉴权失败："+e.info.msg),t(i)},function(){console.error("鉴权失败：网络请求失败。"),t(null)})});y.set(t,n)}return y.get(t)}function r(){return new l.default(function(t){(0,_.getStorageFrontier)().then(function(e){var n=["apikey="+d.default,"ctrlver=-1","ctrlpf=grid","ctrlmb=jsapi","frontier="+(e&&e.version||0),"callback"],i=v.default.overseaSrc+"?"+n.join("&");g(null,i,function(e){t(e)},function(){console.error("鉴权失败：海外图请求失败。"),t(null)})})})}function a(t){y.delete(t)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(21),l=i(s),u=n(128),c=i(u);e.checkKey=o,e.overseaCheckKey=r,e.revokeKeyCheck=a;var f=n(466),d=i(f),h=n(25),v=i(h),p=n(112),m=i(p),_=n(502),g=n(335).send,y=new c.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(242),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default[0]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return Math.sqrt(t*t+e*e)}function r(t,e){var n=t.pageX,i=t.pageY;if(t.touches){var o=t.touches[e||0];n=o.pageX,i=o.pageY}return{x:n,y:i}}function a(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),e.Finger=void 0;var s=n(23),l=i(s),u=n(18),c=i(u),f=n(3),d=i(f),h=n(0),v=i(h),p=n(1),m=i(p),_=n(5),g=i(_),y=n(4),x=i(y),b=n(26),S=n(123),w={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"],cancel:["","touchcancel"],leave:["mouseleave",""]},E=0,T=(e.Finger=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.default)(this,e);var i=(0,g.default)(this,(e.__proto__||(0,d.default)(e)).call(this));if(!t)throw new Error("element is invalid");return i.options=n,i.identifier="Finger__"+E,E+=1,i.touched=!1,i.panning=!1,i.element=t,i.element.__Finger__identifier=i.identifier,i.handlers=[],i.isDoubleTap=!1,i.y1=null,i.x1=i.y1,i.y2=null,i.x2=i.y2,i.deltaTime=null,i.lastStartTime=null,i.panSpeedStartTime=null,i.panSpeedStartPos=null,i.now=null,i.tapTimeout=null,i.holdTimeout=null,i.swipeTimeout=null,i.startVector=null,i.startDistance=null,i.init(),i}return(0,x.default)(e,t),(0,m.default)(e,[{key:"init",value:function(){var t=this,e="ontouchstart"in document?1:0,n=(0,c.default)(w).forEach(function(n){if(w[n][e]){if("leave"===n)return void(0,b.on)(t.element,w[n][e],T.end,t);(0,b.on)(t.element,w[n][e],T[n],t)}});this.handlers.concat(n)}},{key:"destroy",value:function(){clearTimeout(this.tapTimeout),clearTimeout(this.holdTimeout),clearTimeout(this.swipeTimeout),this.removeAllListeners("touch-start"),this.removeAllListeners("multi-touch-start"),this.removeAllListeners("hold"),this.removeAllListeners("pinch"),this.removeAllListeners("rotate"),this.removeAllListeners("pan-start"),this.removeAllListeners("pan"),this.removeAllListeners("pan-end"),this.removeAllListeners("swipe"),this.removeAllListeners("tap"),this.removeAllListeners("doubletap"),this.removeAllListeners("touch-end"),this.removeAllListeners("multi-touch-end"),this.removeAllListeners("touch-cancel"),this.identifier=null,delete this.element.__Finger__identifier,this.handlers.forEach(function(t){t&&t.remove&&t.remove()}),this.touched=!1,this.handlers=[],this.isDoubleTap=!1,this.y1=null,this.x1=this.y1,this.y2=null,this.x2=this.y2,this.deltaTime=null,this.lastStartTime=null,this.now=null,this.tapTimeout=null,this.holdTimeout=null,this.swipeTimeout=null,this.startVector=null,this.startDistance=null}}]),e}(S),{start:function(t){var e=this;if(t&&t.target){this.touched=!0,this.now=Date.now(),this.deltaTime=this.now-(this.lastStartTime||this.now);var n=r(t);"number"==typeof this.x1&&"number"==typeof this.y1&&(this.isDoubleTap=this.deltaTime<300&&Math.abs(n.x-this.x1)<10&&Math.abs(n.y-this.y1)<10),this.x1=n.x,this.y1=n.y;var i=a(t);if(this.emit("touch-start",i),t.touches&&t.touches.length>1){var s=r(t,0),u=r(t,1);this.startVector=[u.x-s.x,u.y-s.y],this.startDistance=o.apply(void 0,(0,l.default)(this.startVector)),i.vector=this.startVector,i.vectorDistance=this.startDistance,clearTimeout(this.holdTimeout),this.emit("multi-touch-start",i)}this.lastStartTime=this.now,this.holdTimeout=setTimeout(function(){e.emit("hold",i)},750),this.options.stopPropagation&&t.stopPropagation()}},move:function(t){if(t&&t.target&&this.touched){var e=r(t),n=a(t);if(this.isDoubleTap=!1,clearTimeout(this.holdTimeout),null!==this.x2?(n.deltaX=e.x-this.x2,n.deltaY=e.y-this.y2):(n.deltaX=0,n.deltaY=0),t.touches&&t.touches.length>1&&this.startVector&&null!==this.startVector.x){var i=r(t,0),s=r(t,1),l=[s.x-i.x,s.y-i.y],u=o.apply(void 0,l),c=u/this.startDistance,f=Math.acos((this.startVector[0]*l[0]+this.startVector[1]*l[1])/(u*this.startDistance));f=l[0]*this.startVector[1]-this.startVector[0]*l[1]>=0?f:-f,Math.abs(c-1)>.01&&(n.scale=c,this.emit("pinch",n)),0!==f&&(n.angle=f,this.emit("rotate",n)),t.preventDefault()}else if(this.touched&&(0!==n.deltaY||0!==n.deltaX))if(this.panning){this.emit("pan",n);var d=Date.now();d-this.panSpeedStartTime>300&&(this.panSpeedStartTime=d,this.panSpeedStartPos=e)}else this.emit("pan-start",n),this.panning=!0,this.panSpeedStartTime=Date.now(),this.panSpeedStartPos=e;this.options.preventDefaultMove&&t.preventDefault(),this.x2=e.x,this.y2=e.y,this.options.stopPropagation&&t.stopPropagation()}},end:function(t){var e=this;if(t&&t.target){clearTimeout(this.holdTimeout),this.now=Date.now();var n=this.x2-this.x1,i=this.y2-this.y1,o=null===this.x2||Math.abs(n)<10&&Math.abs(i)<10,r=this.now-this.lastStartTime<200&&o,s=a(t);if(null!==this.x2&&null!==this.y2&&this.panning){var l=Math.abs(n)>Math.abs(i)?n>0?"RIGHT":"LEFT":i>0?"DOWN":"TOP",u=0,c=0;if(this.now-this.panSpeedStartTime<300){var f=this.x2-this.panSpeedStartPos.x,d=this.y2-this.panSpeedStartPos.y,h=this.now-this.panSpeedStartTime;c=f/h,u=d/h}s.swipeDirection=l,s.speedX=c,s.speedY=u,s.deltaX=n,s.deltaY=i,this.panning&&(this.emit("pan-end",s),this.panning=!1),this.swipeTimeout=setTimeout(function(){e.emit("swipe",s)})}else o&&r&&(this.tapTimeout=setTimeout(function(){e.emit("tap",s),e.isDoubleTap&&(e.emit("doubletap",s),e.isDoubleTap=!1)},0));this.emit("touch-end",s),t.touches&&t.touches.length>0&&t.touches.length<2&&this.emit("multi-touch-end",s),this.startDistance=null,this.startVector=[0,0],this.y2=null,this.x2=this.y2,this.touched=!1,this.options.preventDefaultEnd&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation()}},cancel:function(t){clearTimeout(this.tapTimeout),clearTimeout(this.holdTimeout),clearTimeout(this.swipeTimeout),this.touched=!1,this.emit("touch-cancel",t)}})},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r(t,e);return(0,o.toDom)(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.Template=void 0,e.templeteToDom=i;var o=n(145),r=e.Template=function(){var t={},e=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/[ ]/g,"&nbsp;")};return function(n,i){if("string"==typeof n){var o=t[n];if(!t[n]){var r=n.replace(/<%\s*([^=][^%>]*)\s*%>/g,function(){return"';"+arguments[1]+" tmp+='"}).replace(/<%=\s*([^%>]+)\s*%>/g,function(){return"' + strip("+arguments[1]+") +'"}).replace(/<%=\s*([^%>]+)\s*%>/g,function(){return"' + "+arguments[1]+"+ '"});r='var tmp = ""; with(obj){ tmp = \''+r+"'; } return tmp;",o=new Function("obj","strip",r),t[n]=o}return o(i,e)}}}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.length>=3&&(0,w.default)(t[0].lat)&&(0,w.default)(t[0].lng)}function r(t){return t.length>=1&&t.every(function(t){return t.length>=3&&o(t)})}function a(t){return t.length>=1&&t.every(function(t){return r(t)})}function s(t){var e=t[0],n=t[t.length-1];return e.lat===n.lat&&e.lng===n.lng?t:t.concat([e])}function l(t){for(var e=0,n=1,i=void 0,o=void 0;n<t.length;)i=o||t[0],o=t[n],e+=(o.lng-i.lng)*(o.lat+i.lat),n+=1;return e>0}function u(t){return(o(t)?[[s(t)]]:r(t)?[t.map(function(t){return s(t)})]:t.map(function(t){return t.map(s)})).map(function(t){return t.map(function(t,e){var n=[];return t.forEach(function(t){if(n.length>0){var e=n[n.length-1];t.lat===e.lat&&t.lng===e.lng||n.push(t)}else n.push(t)}),0===e?l(n)?n.reverse():n:l(n)?n:n.reverse()})})}function c(t){return u(t).reduce(function(t,e){var n=e.reduce(function(t,e){return t.push(e),t},[]);return t.push.apply(t,(0,b.default)(n)),t},[])}function f(t){return o(t)?t.length:t.reduce(function(t,e){return t+e.reduce(function(t,e){return t+e.length},0)},0)}function d(t){return t.reduce(function(t,e){return t+h(e)},0)}function h(t){var e=0,n=!0,i=!0,o=!1,r=void 0;try{for(var a,s=(0,y.default)(t);!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.length;e+=n?u>=3?u-3:0:u+1,n=!1}}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return e}function v(t){var e=null;if(t.length>1){var n=0;e=[],t.forEach(function(t){n+=t.length,e.push(n)}),e.pop()}return e}function p(t,e){var n=3*d(t),i=_(t),o=new e(n),r=0;return t.forEach(function(t,e){var n=m(t),a=!0,s=!1,l=void 0;try{for(var u,c=(0,y.default)(n);!(a=(u=c.next()).done);a=!0){var f=u.value;o[r]=f+i[e],r+=1}}catch(t){s=!0,l=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}}),o}function m(t){var e=v(t),n=I(t,{dimensions:2,result:[]});return(0,P.default)(n,e,2)}function _(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,i){n+=t.reduce(function(t,e){return t+e.length},0),e[i+1]=n}),e}Object.defineProperty(e,"__esModule",{value:!0});var g=n(27),y=i(g),x=n(23),b=i(x),S=n(340),w=i(S);e.isSimple=o,e.isPart=r,e.isComplex=a,e.isClockWise=l,e.normalize=u,e.getBorderPolyline=c,e.getVertexCount=f,e.getTriangleCount=d,e.getTriangleCountOfPart=h,e.getSurfaceIndices=p;var E=n(233),T=i(E),A=n(277),P=i(A),I=T.default.flattenVertices},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function r(t,e,n,i,o){var r=Math.max(n,Math.floor(e.y0)),a=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,f=e.dx<0,d=r;d<a;d++){var h=l*Math.max(0,Math.min(t.dy,d+c-t.y0))+t.x0,v=u*Math.max(0,Math.min(e.dy,d+f-e.y0))+e.x0;o(Math.floor(v),Math.ceil(h),d)}}function a(t,e,n,i,a,s){var l=o(t,e),u=o(e,n),c=o(n,t),f=void 0;l.dy>u.dy&&(f=l,l=u,u=f),l.dy>c.dy&&(f=l,l=c,c=f),u.dy>c.dy&&(f=u,u=c,c=f),l.dy&&r(c,l,i,a,s),u.dy&&r(c,u,i,a,s)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(18),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f),h=n(25),v=i(h),p=function(){function t(e,n,i,o,r){(0,c.default)(this,t),this.z=e,this.x=n,this.y=i,this.w=o,this.tileSize=r||v.default.tileSize,this.id=n+"_"+i+"_"+e,this._children=null,this._parent=null}return(0,d.default)(t,[{key:"url",value:function(t){var e=this.getServiceCoord(),n=e.x,i=e.y,o=e.z;return t[(this.x+this.y)%t.length].replace("{z}",o).replace("{x}",n).replace("{y}",i).replace("{version}",v.default.dataVersion.tile)}},{key:"setIconUrls",value:function(t){this._iconUrls=t}},{key:"getServiceCoord",value:function(){var t=this.tileSize?v.default.tileSize/this.tileSize:1;return{x:this.x,y:Math.pow(2,this.z)*t-this.y-1,z:this.z}}},{key:"urlForBatchChildren",value:function(t){var e=this.children().map(function(t){return t.getServiceCoord()}).map(function(t){return t.z+"_"+t.x+"_"+t.y}).join();return t[(this.x+this.y)%t.length].replace("{tiles}",e).replace("{version}",v.default.dataVersion.tile)}},{key:"parent",value:function(e){return 0===this.z?null:this._parent?this._parent:(this.z>e?this._parent=new t(this.z-1,this.x,this.y,this.w):this._parent=new t(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w),this._parent)}},{key:"ancestor",value:function(e){var n=Math.round(this.z)-Math.round(e);if(n<=0)return null;var i=Math.pow(2,n);return new t(this.z-n,Math.floor(this.x/i),Math.floor(this.y/i),this.w)}},{key:"children",value:function(e){if(this._children)return this._children;if(this.z>=e)return this._children=[new t(this.z+1,this.x,this.y,this.w)],this._children;var n=this.z+1,i=2*this.x,o=2*this.y;return this._children=[new t(n,i,o,this.w),new t(n,i+1,o,this.w),new t(n,i,o+1,this.w),new t(n,i+1,o+1,this.w)],this._children}},{key:"descendant",value:function(e){var n=this.x,i=this.y,o=this.z,r=this.w,a=Math.round(e)-Math.round(o);if(a<=0)return null;for(var s=Math.pow(2,a),l=[],u=0;u<s;u++)for(var c=0;c<s;c++)l.push(new t(e,n*s+u,i*s+c,r));return l}},{key:"isVirtualCoord",value:function(){return this.z<=0}},{key:"wrapXAroundCenter",value:function(t){var e=this.x,n=this.z,i=Math.pow(2,n),o=t.getLng()/360+.5,r=e/i,a=r-o;return a>.5?e-i:a<-.5?e+i:e}}],[{key:"converter",value:function(t){return new this(t.z,t.x,t.y,t.w,t.tileSize)}},{key:"cover",value:function(e,n){function i(n,i,a){var s=void 0,l=void 0,u=void 0,c=void 0;if(a>=0&&a<=o)for(s=n;s<i;s++)l=Math.floor(s/o),u=(s%o+o)%o,c=new t(e,u,a,l),r[c.id]=c}var o=1<<e,r={};return a(n[0],n[1],n[2],0,o,i),a(n[2],n[3],n[0],0,o,i),(0,l.default)(r).map(function(t){return r[t]})}},{key:"coverAll",value:function(e){for(var n=1<<e,i=[],o=0;o<n;o++)for(var r=0;r<n;r++){var a=new t(e,o,r,0);i.push(a)}return i}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t){return t===o.DEFAULT||o[t]===o.DEFAULT}Object.defineProperty(e,"__esModule",{value:!0}),e.isDefaultStyle=i;var o=e.STYLE_ID={DEFAULT:0,DARK:1,LIGHT:2,GAME:3}},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return{state:0,transition:function(t){var e="overlay"===t;switch(this.state){case 0:this.state=e?1:0;break;case 1:this.state=e?1:2;break;case 2:this.state=e?1:0}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),s=n(3),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f),h=n(5),v=i(h),p=n(34),m=i(p),_=n(4),g=i(_),y=n(10),x=i(y),b=n(498),S=i(b),w=n(26),E=i(w),T=n(478),A=i(T),P=n(155),I=i(P),k=n(28),L=n(40),M=i(L),C=n(42),R=n(110),N=function(t){function e(t){(0,c.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,l.default)(e)).call(this));return t.geometries=t.geometries||[],n.id=t.id||x.default.uniqueId(),n.zIndex=t.zIndex>=0?t.zIndex:0,n.styles=t.styles||{},n.minZoom=t.minZoom,n.maxZoom=t.maxZoom,n._setGeometryType(),n._checkGeometries(t.geometries,n.styles),n._rawGeometries=n._assignIdToGeometry(t.geometries),n._idSet=n._updateGeometryIdSet(n._rawGeometries),n.geometries=n._transferFromGeometry(n._rawGeometries),n._checkStyles(n.styles),n._initialize(t),n._bubbleHandler=[],n._lastestOverlayMouseMoveObj=null,n._mousemoveFSM=o(),t.map&&n.setMap(t.map),(0,C.statCn)(n._className),n}return(0,g.default)(e,t),(0,d.default)(e,[{key:"_initialize",value:function(){}},{key:"_emitGeoEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.emit(t,(0,a.default)({},n,{geometry:e,type:t,target:this}))}},{key:"_bindBubbleHandler",value:function(){var t=this;this._bubbleHandler.push(E.default.on(this.map._bubbleMiddleware,"mousemove",function(e){2===t._mousemoveFSM.state&&(t._lastestOverlayMouseMoveObj=null,t._emitGeoEvent("mouseout",null,e),t._emitGeoEvent("hover",null,e)),t._mousemoveFSM.transition.call(t._mousemoveFSM,"map")})),this._bubbleHandler.push(E.default.on(this.map._bubbleMiddleware,"action",function(e){if(e&&e.layerId===t.id){var n=t.geometries[e.objectIndex];t._emitGeoEvent(e.eventType,n,e.mapEvent),"mousemove"===e.eventType&&(t._mousemoveFSM.transition.call(t._mousemoveFSM,"overlay"),t._lastestOverlayMouseMoveObj?n!==t._lastestOverlayMouseMoveObj&&t._emitGeoEvent("hover",n,e.mapEvent):(t._emitGeoEvent("mouseover",n,e.mapEvent),t._emitGeoEvent("hover",n,e.mapEvent)),t._lastestOverlayMouseMoveObj=n)}})),this._bubbleHandler.push(E.default.on(this.map,"destroy",function(){t.setMap(null)}))}},{key:"_removeBubbleHander",value:function(){this._bubbleHandler.forEach(function(t){t&&t.remove&&t.remove()})}},{key:"_setGeometryType",value:function(){}},{key:"_createLayer",value:function(){this.layer=new A.default({map:this.map,id:this.id,type:this._layerType,zIndex:this.zIndex,minZoom:this.minZoom,maxZoom:this.maxZoom,sourceData:this._getRenderSourceData()})}},{key:"_removeLayer",value:function(){this.layer&&this.layer.setMap(null)}},{key:"setVisible",value:function(t){return t=Boolean(t),this.layer&&this.layer.setVisible(t),this}},{key:"setMap",value:function(t){return null===t||t instanceof window.TMap.Map?t===this.map?this:(t?this.map?(this.setMap(null),this.setMap(t)):this.id&&t.getLayer(this.id)?console.error("Map中已存在id为"+this.id+"的图层，无法重复添加"):(this.map=t,this._bindBubbleHandler(),this._createLayer()):(this._removeBubbleHander(),this._removeLayer(),this.map=null),this):(console.error("所传入参数并非TMap.Map的实例！"),this)}},{key:"setGeometries",value:function(t){return Array.isArray(t)?t===this._rawGeometries?this:((0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"setGeometries",this).call(this,t,this.styles),this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this):(new k.BaseTypeError("geometries","Array",t).error(),this)}},{key:"setStyles",value:function(t){return t?(t.hasOwnProperty||new k.BaseTypeError("styles","Object",t).error(),this._checkStyles(t),t===this.styles?this:(this.styles=t,this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this)):this}},{key:"setZIndex",value:function(t){return M.default.isNumber(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):(this.layer&&this.layer.setZIndex(t),this.zIndex=t,this):(new k.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"getMap",value:function(){return this.map}},{key:"getVisible",value:function(){return this.layer&&this.layer.visible}},{key:"getStyles",value:function(){return(0,a.default)({},this.styles)}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"updateGeometries",value:function(t,n){return t?((0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"updateGeometries",this).call(this,t,n),this.map&&this.map.getSource(this.id).setData(this._getRenderSourceData()),this):this}},{key:"add",value:function(t){return(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"add",this).call(this,t)}},{key:"remove",value:function(t){return(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"remove",this).call(this,t)}},{key:"destroy",value:function(){(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"destroy",this).call(this),this.removeAllListeners(),this.setMap(null),this.styles=null,this.id=null,this.zIndex=null,this.minZoom=null,this.maxZoom=null}},{key:"getGeometryType",value:function(){return this._geometryType}},{key:"snap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments[2];this._snapTargets||(this._updateSnapTargets(),this.on("geometry_changed",this._updateSnapTargets.bind(this)));var i=null;return i=this._snapToPoints(t,e,n),i||(i=this._snapToSegments(t,e,n)),i}},{key:"_snapToPoints",value:function(t,e,n){var i=this._snapTargets.points,o=this.map;n&&!n.isEmpty()&&(i=i.filter(function(t){return n.contains(t)}));var r=o.projectToContainer(t),a=null,s=1/0;return i.forEach(function(t){var n=o.projectToContainer(t),i=r.dist(n);i<e&&i<s&&(a=t,s=i)}),a?{latLng:a,dist:s}:null}},{key:"_snapToSegments",value:function(t,e,n){var i=this._snapTargets.segments,o=this.map;n&&!n.isEmpty()&&(i=i.filter(function(t){var e=new I.default;return e.extend(t[0]),e.extend(t[1]),n.intersects(e)}));for(var r=o.projectToContainer(t),a=null,s=1/0,l=0;l<i.length;l++){var u=i[l],c=o.projectToContainer(u[0]),f=o.projectToContainer(u[1]),d=f.sub(c),h=r.sub(c),v=h.dot(d)/d.lengthSq();if(v>0&&v<1){var p=d.mult(v),m=h.sub(p),_=m.length();_<e&&_<s&&(a=o.unprojectFromContainer(c.add(p)),s=_)}}return a?{latLng:a,dist:s}:null}},{key:"_updateSnapTargets",value:function(){this._snapTargets={points:this._getAllPoints(),segments:this._getAllSegments()}}},{key:"_getAllPoints",value:function(){return[]}},{key:"_getAllSegments",value:function(){return[]}},{key:"_getRenderableGeometries",value:function(){var t=this;return this.geometries.filter(function(e){return e&&t.styles}).map(function(e){var n=(0,a.default)({},e);return t.styles[e.styleId]||(n.styleId="default"),n})}},{key:"_getRenderSourceData",value:function(){return{type:this._geometryType,styles:this.styles,geometries:this._getRenderableGeometries()}}},{key:"_checkStyles",value:function(t){t.default||(t.default=this._getDefaultStyle())}}]),e}(S.default);e.default=N,N.LatLngBoundsToBoundingBox=function(t){var e=t.getNorthEast(),n=t.getSouthWest(),i=new TMap.LatLng((e.lat+n.lat)/2,(e.lng+n.lng)/2),o=(0,R.latLngToMercator)(e),r=(0,R.latLngToMercator)(n),a=o.x-r.x,s=o.y-r.y;return i.height=((e.height||0)+(0|n.height))/2,{center:i,width:a,height:s}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MAP_ZOOM_TYPE={DEFAULT:0,CENTER:1}},function(t,e,n){t.exports={default:n(305),__esModule:!0}},function(t,e,n){n(75),n(33),n(39),n(310),n(314),n(313),n(312),t.exports=n(2).Map},function(t,e,n){n(311),t.exports=n(2).Math.log2},function(t,e,n){var i=n(68);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(7),o=n(121),r=n(11)("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(307);t.exports=function(t,e){return new(i(t))(e)}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){"use strict";var i=n(258),o=n(138);t.exports=n(244)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(o(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(6);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){n(246)("Map")},function(t,e,n){n(247)("Map")},function(t,e,n){var i=n(6);i(i.P+i.R,"Map",{toJSON:n(259)("Map")})},function(t,e,n){var i=n(239),o=n(69)("toStringTag"),r="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),o))?n:r?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(239);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(50),o=n(225),r=n(69)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[r])?e:o(n)}},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.attributePart="\n\tattribute vec2 a_Positions;\n\tattribute vec3 a_InstanceTrans;\n\tattribute vec4 a_InstanceCoords;\n\tattribute vec4 a_InstanceTextBounds;\n\tattribute vec4 a_InstanceInfo;\n",e.uniformPart="\n\tuniform mat4 u_matrix;\n\tuniform vec2 u_resolution;\n\tuniform float u_fadeChange;\n\tuniform vec2 u_InstanceTileTextureOffset;\n\tuniform vec2 u_iconTextureResolution;\n\tuniform vec2 u_textTextureResolution;\n\tuniform float u_showPoint;\n\tuniform float u_showLabel;\n\tuniform float u_mapScale;\n",e.varyingPart="\n\tvarying vec2 v_TexCoord;\n\tvarying float v_isShow;\n\tvarying float v_isIcon;\n\tvarying float v_opacity;\n\tvarying vec4 v_ndcCoord;\n",e.filterPart="\nfloat getFilterOpacity(float opacity, float type) {\n\treturn mix(\n\t\tmix(0.0, opacity, u_showPoint),\n\t\tmix(0.0, opacity, u_showLabel),\n\t\ttype\n\t);\n}\n",e.projectScreenPart="\nvec2 project(vec4 device) {\n    vec3 device_normal = device.xyz / device.w;\n    vec2 clip_pos = (device_normal * 0.5 + 0.5).xy;\n    return clip_pos * u_resolution;\n}\n\nvec4 unproject(vec2 screen, float z, float w) {\n    vec2 clip_pos = screen / u_resolution;\n    vec2 device_normal = clip_pos * 2.0 - 1.0;\n    return vec4(device_normal * w, z, w);\n}\n",e.glPositionPart="\n\t\tvec4 center_proj = u_matrix * vec4(transCoord, 0., 1.);\n\t\tvec2 center_screen = project(center_proj);\n        \n\t\tfloat s_rotate = a_InstanceInfo.x;\n\t\tfloat angle_sin = sin(s_rotate);\n    float angle_cos = cos(s_rotate);\n\t\tmat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n        \n\t\tvec2 positions = a_Positions * 0.5 + 0.5;\n\t\tvec2 corner_screen = rotation_matrix * vec2(\n\t\t\t(a_InstanceCoords.x * positions.x - a_InstanceCoords.z) * u_mapScale,\n\t\t\t(a_InstanceCoords.y * (positions.y - 1.0) + a_InstanceCoords.w) * u_mapScale\n\t\t) + center_screen.xy;\n\t\tvec4 corner_proj = unproject(corner_screen, center_proj.z, center_proj.w);\n\t\tgl_Position = corner_proj;\n\n\t\tv_ndcCoord = center_proj;\n",e.glPositionCusPart="\n\t\tvec4 center_proj = u_matrix * vec4(transCoord, 0., 1.);\n\t\tvec2 center_screen = project(center_proj);\n        \n\t\tfloat s_rotate = a_InstanceInfo.x;\n\t\tfloat angle_sin = sin(s_rotate);\n    float angle_cos = cos(s_rotate);\n\t\tmat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n        \n\t\tvec2 positions = a_Positions * 0.5 + 0.5;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tvec2 corner_screen = rotation_matrix * vec2(\n\t\t\t(a_InstanceCoords.x  * positions.x - a_InstanceCoords.z) * u_mapScale * mix(1.0 , a_InstanceStrentchinglens.x , a_InstanceInfo.z),\n\t\t\t(a_InstanceCoords.y * (positions.y - 1.0) + a_InstanceCoords.w) * mix(1.0 , a_InstanceStrentchinglens.y , a_InstanceInfo.z) * u_mapScale\n\t\t) + center_screen.xy;\n\t\tvec4 corner_proj = unproject(corner_screen, center_proj.z, center_proj.w);\n\t\tgl_Position = corner_proj;\n\t\t\n\t\tv_ndcCoord = center_proj;\n",e.fragPart="\n\tuniform sampler2D u_SamplerMask;\n\tuniform sampler2D u_SamplerText;\n\tuniform sampler2D u_SamplerIcon;\n\tuniform float u_asbackground;\n\tuniform float u_maskScale;\n",e.maskPart="\n\tvec2 v_texCoord = (v_ndcCoord.xy / v_ndcCoord.w * u_maskScale + 1.0) / 2.0;\n\t\n\tfloat maskCull = texture2D(u_SamplerMask, v_texCoord).r;\n\tfloat clipCull = texture2D(u_SamplerMask, v_texCoord).g;\n\tfloat isCulledByMask = step(0.99, clipCull) * step(maskCull, 0.1);\n\t\n\t\n\t\n\t\n"},,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.getSouthWest(),n=t.getNorthEast(),i=t.getSouthEast();return[n,t.getNorthWest(),e,i]}function r(t,e,n){var i=(0,u.latLngToMercator)(t);return[new f.default(e/2,n/2),new f.default(e/2,-n/2),new f.default(-e/2,-n/2),new f.default(-e/2,n/2)].map(function(t){return t.x=i.x+t.x,t.y=i.y+t.y,(0,u.mercatorToLatLng)(t)})}function a(t){return(0,l.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getBoundsPath=o,e.getRectanglePath=r;var s=n(276),l=i(s),u=n(110),c=n(65),f=i(c);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i="highlightRegion"===t?T:983040&t,o=n[i]&&n[i][t];return o?f(o,e):k[t]?k[t]:null}function r(t){var e={};return e[T]=a(t.regionStyles),e[A]=s(t.labelStyles),e[E]=l(t.lineStyles),e[w]=u(t.pointStyles),e[P]=c(t.arrowStyles),e[T].highlightRegion=[{minScale:16,maxScale:22,fillStyle:"rgba(0, 0, 0, 0.1)",strokeStyle:"#888888",lineWidth:.5}],e}function a(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,topStyle:(0,b.convertColorToHex)(t.top_color),bottomStyle:(0,b.convertColorToHex)(t.bottom_color),insideStyle:(0,b.convertColorToHex)(t.bottom_color),outsideStyle:(0,b.convertColorToHex)(t.outside_color),lineWidth:t.sidewidth}})}),e}function s(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){var e=(0,b.getFontStyle)(t.effect),n=(0,b.getFontWeight)(),i=t.font_size,o=(0,b.getFontFamily)(t.font_name);return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,effect:t.effect,font:e+" "+n+" "+i+"px "+o,fontStyle:e,fontWeight:n,fontSize:i,fontFamily:o,fillStyle:(0,b.convertColorToHex)(t.font_color),strokeStyle:(0,b.convertColorToHex)(t.background_color),lineWidth:t.effect_size}})}),e}function l(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,fillStyle:(0,b.convertColorToHex)(t.color_fill),fillWidth:t.width,fillLineCap:"round",fillLineJoin:"bevel",strokeStyle:(0,b.convertColorToHex)(t.color_side),strokeWidth:t.sidewidth,strokeLineCap:"butt",strokeLineJoin:"bevel"}})}),e}function u(t){var e={};return(0,h.default)(t).forEach(function(n){e[n]={},e[n]=t[n].map(function(t){return{minScale:t.minScaleVal,maxScale:t.maxScaleVal,icon_offset:t.icon_offset,labelid:t.labelid,density:t.density}})}),e}function c(){return{}}function f(t,e){var n=null;return t.some(function(t){return n=t,e>=t.minScale&&e<=t.maxScale||22===e&&21===t.maxScale})&&n||null}Object.defineProperty(e,"__esModule",{value:!0}),e.IndoorStyleMap=e.customStyle=e.ARROW_NUM=e.LABEL_NUM=e.REGION_NUM=e.LINE_NUM=e.POINT_NUM=void 0;var d=n(18),h=i(d),v=n(128),p=i(v),m=n(0),_=i(m),g=n(1),y=i(g);e.getStyle=o;var x=n(639),b=n(640),S=null,w=e.POINT_NUM=65536,E=e.LINE_NUM=131072,T=e.REGION_NUM=196608,A=e.LABEL_NUM=262144,P=e.ARROW_NUM=327680,I=r(x.STYLE),k=e.customStyle={};e.IndoorStyleMap=function(){function t(){(0,_.default)(this,t),this.styleMap=new p.default,this.styleMap.set("default",I)}return(0,y.default)(t,[{key:"set",value:function(t,e){var n=r(e);this.styleMap.set(t,n)}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.has(t)?this.styleMap.get(t):this.styleMap.get("default")}},{key:"has",value:function(t){return this.styleMap.has(t)}},{key:"getFeatureStyle",value:function(t,e,n){return o(t,e,this.get(n))}}],[{key:"getInstance",value:function(){return null===S&&(S=new t),S}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.reduce(function(t,e){return t+y.getVertexCount(e)},0)}function r(t){return t.reduce(function(t,e){return t+y.getTriangleCount(e)},0)}function a(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,i){n+=y.getVertexCount(t),e[i+1]=n}),e}function s(t){var e=t.complexPolygons,n=t.IndexType,i=void 0===n?Uint32Array:n,o=3*r(e),s=a(e),l=new i(o),u=0;return e.forEach(function(t,e){var n=y.getSurfaceIndices(t,i),o=!0,r=!1,a=void 0;try{for(var c,f=(0,h.default)(n);!(o=(c=f.next()).done);o=!0){var d=c.value;l[u]=d+s[e],u+=1}}catch(t){r=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(r)throw a}}}),l}function l(t){var e=t.cache,n=e.positions,i=e.positions64xyLow,o=e.vertexValid,r=t.complexPolygons,a=t.fp64,s=0;r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){var e=t.lng,o=t.lat,r=t.z||0;n[3*s]=e,n[3*s+1]=o,n[3*s+2]=r,a&&(i[2*s]=(0,S.fp64LowPart)(e),i[2*s+1]=(0,S.fp64LowPart)(o)),s+=1}),o[s-1]=0})})})}function u(t){var e=t.cache,n=t.complexPolygons,i=t.pointCount,o=t.getElevation,r=e||new Float32Array(i),a=0;return n.forEach(function(t,e){var n=o(e),i=y.getVertexCount(t);E({target:r,source:[n],start:a,count:i}),a+=i}),r}function c(t){var e=t.cache,n=t.complexPolygons,i=t.pointCount,o=t.getColor,r=e||new Uint8ClampedArray(4*i),a=0;return n.forEach(function(t,e){var n=o(e);isNaN(n[3])&&(n[3]=255);var i=y.getVertexCount(t);E({target:r,source:n,start:a,count:i}),a+=n.length*i}),r}function f(t){var e=t.complexPolygons,n=t.pointCount,i=new Uint8ClampedArray(3*n),o=0;return e.forEach(function(t,e){var n=(0,w.encodePickingColor)(e),r=y.getVertexCount(t);E({target:i,source:n,start:o,count:r}),o+=n.length*r}),i}Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonParseHelper=void 0;var d=n(27),h=i(d),v=n(0),p=i(v),m=n(1),_=i(m),g=n(297),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(g),x=n(233),b=i(x),S=n(118),w=n(254),E=b.default.fillArray,T=[0,0,0,255];e.PolygonParseHelper=function(){function t(e){var n=e.complexPolygons,i=e.IndexType;(0,p.default)(this,t),n=n.map(function(t){return y.normalize(t)});var r=o(n);this.complexPolygons=n,this.pointCount=r,this.IndexType=i,this.attributes={pickingColors:f({complexPolygons:n,pointCount:r})}}return(0,_.default)(t,[{key:"updatePositions",value:function(t){var e=t.fp64,n=t.extruded;e=!0;var i=this.attributes,o=this.complexPolygons,r=this.pointCount;i.positions=i.positions||new Float32Array(3*r),i.vertexValid=i.vertexValid||new Uint8ClampedArray(r).fill(1),e&&(i.positions64xyLow=i.positions64xyLow||new Float32Array(2*r)),l({cache:i,complexPolygons:o,extruded:n,fp64:e})}},{key:"getIndices",value:function(){return s({complexPolygons:this.complexPolygons,IndexType:this.IndexType})}},{key:"getPositions",value:function(){return this.attributes.positions}},{key:"getPositions64xyLow",value:function(){return this.attributes.positions64xyLow}},{key:"getVertexValid",value:function(){return this.attributes.vertexValid}},{key:"getElevations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"elevations":e,i=t.getElevation,o=void 0===i?function(){return 100}:i,r=this.attributes,a=this.complexPolygons,s=this.pointCount,l=u({cache:r[n],complexPolygons:a,pointCount:s,getElevation:o});return r[n]=l,l}},{key:"getColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"colors":e,i=t.getColor,o=void 0===i?function(){return T}:i,r=this.attributes,a=this.complexPolygons,s=this.pointCount,l=c({cache:r[n],complexPolygons:a,pointCount:s,getColor:o});return r[n]=l,l}},{key:"getPickingColors",value:function(){return this.attributes.pickingColors}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(e){var n=e.find(function(e){return e.layerid===t});return n?{minZoom:n.zoom_min,maxZoom:n.zoom_max,getTileUrl:function(t,e,i){var o=n.url;return n.params.forEach(function(i){var r=n[i];Array.isArray(r)&&(r=r[(t+e)%r.length]),o=o.replace("{"+i+"}",r)}),o=o.replace("{x}",t).replace("{y}",e).replace("{z}",i)}}:void 0}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),s=n(3),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f),h=n(5),v=i(h),p=n(34),m=i(p),_=n(4),g=i(_),y=n(380),x=i(y),b=n(81),S=n(57),w=n(125),E=n(40),T=i(E),A=n(28),P=n(293),I=n(42),k=T.default.isFunction,L=T.default.isString,M=T.default.isNumber,C=function(t){function e(t){(0,c.default)(this,e),t.type=S.RENDER_LAYER_TYPE.imageTile;var n=(0,v.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return(0,I.statCn)("ImageTileLayer"),n}return(0,g.default)(e,t),(0,d.default)(e,[{key:"_initialize",value:function(t){(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"_initialize",this).call(this,t),this._setTileUrlGetter(t.getTileUrl),this.sourceId=this.sourceId||this.id}},{key:"setZIndex",value:function(t){return M(t)||new A.BaseTypeError("ImageTileLayer.zIndex","number",t).error(),(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"setZIndex",this).call(this,t)}},{key:"_setTileUrlGetter",value:function(t){k(t)?L(t(0,0,0))?this.getTileUrl=t:new A.BaseTypeError("ImageTileLayerOptions.getTileUrl返回值","string",t(0,0,0)).throw():new A.BaseTypeError("ImageTileLayerOptions.getTileUrl","function",t).throw()}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:b.SOURCE_TYPE.imageTile,tileSize:this.tileSize,data:this.getTileUrl,minZoom:this.minDataZoom,maxZoom:this.maxDataZoom}),this._fire("layer",{}))}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId),this._fire("source_removed",{})}}],[{key:"createCustomLayer",value:function(t){var n=t.map,i=t.layerId;return n?(0,P.checkKey)(n.id).then(function(r){if(!r)throw"请传入正确的key";if(!r.custom_layer||!r.custom_layer.enable)throw"无个性化图层权限";var s=o(i,r.custom_layer.layers);if(!s)throw"请传入正确的layerId";(0,I.cl)({id:i,subkey:r.subkey});var l=new e((0,a.default)(s,t));return l.setZIndex((0,w.getRank)(w.LAYER_LEVEL.BUILDING+1,0)-(0,w.getRank)(w.LAYER_LEVEL.BUILDING,0)-1),n.moveLayer(l.getId(),w.LAYER_LEVEL.BUILDING),l}).catch(function(t){return console.error("个性化图层鉴权失败："+t),null}):(console.error("个性化图层鉴权失败：未绑定地图对象。"),null)}}]),e}(x.default);e.default=C},,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){var t=["position:absolute;","left:0;","top:0;","overflow:hidden;","z-index:1000;","width:100%;","height:100%;"],e=document.createElement("div");e.style.cssText=t.join("");var n=document.createElement("div");return n.style.cssText="left:0;top:0;z-index:101;",e.appendChild(n),{root:e,childs:{domOverlayLayer:n}}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(224),a=i(r),s=n(148),l=i(s),u=n(115),c=i(u),f=n(18),d=i(f),h=n(15),v=i(h),p=n(3),m=i(p),_=n(0),g=i(_),y=n(1),x=i(y),b=n(5),S=i(b),w=n(4),E=i(w),T=n(764),A=i(T),P=n(738),I=i(P),k=n(726),L=i(k),M=n(620),C=i(M),R=n(275),N=n(622),B=i(N),O=n(467),D=i(O),z=n(469),V=i(z),F=n(468),U=i(F),Y=n(293),j=n(373),G=n(717),Z=n(42),H=n(396),W=i(H),X=n(25),Q=i(X),q=n(112),J=i(q),K=n(630),$=i(K),tt=n(727),et=i(tt),nt=n(110),it=n(28),ot=n(40),rt=i(ot),at=n(117),st=n(302),lt=n(655),ut=i(lt),ct=n(480),ft=i(ct),dt=n(125),ht=n(783),vt=n(741),pt=n(662),mt=n(26),_t=n(460),gt=n(623),yt=n(93),xt=n(45),bt=n(155),St=n(65),wt=n(10),Et=rt.default.isString,Tt=rt.default.isUndefined,At=rt.default.isBoolean,Pt=rt.default.isNumber,It=rt.default.isObject,kt={center:new xt(39.88795,116.49369),zoom:13,minZoom:Q.default.minZoom,maxZoom:Q.default.maxZoom,minPitch:Q.default.minPitch,maxPitch:Q.default.maxPitch,rotation:0,pitch:0,scale:1,offset:{x:0,y:0},draggable:!0,scrollable:!0,pitchable:!0,rotatable:!0,doubleClickZoom:!0,mapZoomType:st.MAP_ZOOM_TYPE.DEFAULT,viewMode:at.VIEW_MODE.MAP_3D,mapStyleId:"DEFAULT",showControl:!0,enableExtendZoom:!1},Lt=mt.isLowMobileDevice()?30:55,Mt=function(t){function e(t,n){(0,g.default)(this,e);var i=(0,S.default)(this,(e.__proto__||(0,m.default)(e)).call(this)),o=Date.now();n=wt.extend({},kt,n),n.heading=360-n.rotation;var r=n,a=r.minZoom,s=r.maxZoom,l=r.minPitch,u=r.maxPitch;if("number"==typeof a?n.minZoom=Math.max(a,Q.default.minZoom):(new it.ClassTypeError("MapOptions的minZoom参数","Number",a).warn(),n.minZoom=Q.default.minZoom),"number"==typeof s)if(n.enableExtendZoom){if(s>Q.default.maxZoom){var c=Math.min(s,25);Q.default.maxZoom=c,n.maxZoom=c}}else n.maxZoom=Math.min(n.maxZoom,Q.default.maxZoom);else new it.ClassTypeError("MapOptions的maxZoom参数","Number",s).warn(),n.maxZoom=Q.default.maxZoom;"number"==typeof l?n.minPitch=Math.max(l,Q.default.minPitch):(new it.ClassTypeError("MapOptions的minPitch参数","Number",l).warn(),n.minPitch=Q.default.minPitch),"number"==typeof u?n.maxPitch=Math.min(u,Q.default.maxPitch):(new it.ClassTypeError("MapOptions的maxPitch参数","Number",u).warn(),n.maxPitch=Q.default.maxPitch),i._destroyed=!1,i._glContextLost=!1,i.drawContainer=Et(t)?document.getElementById(t):t,i._uniqueId="map-"+i.drawContainer.id+"_"+wt.uniqueId(),i._initContainer();var f=n,d=f.subkey,h=f.subpid;(0,Y.checkKey)(i.id,{subkey:d,subpid:h}),i.subkey=d,i.subpid=h,n.map=i;var p=new A.default(i.canvasContainer,n);i.renderEngine=p,i.drawManager=new vt(p),i.transform=new ht(n,p),i.transform._setEventedParent(i,null),i.controlManager=new C.default(i),i.layerResource=new pt(n,i),i.indoorManager=new $.default({map:i}),i.OverseaManager=new et.default({map:i}),i.fpsManager=new I.default,i.fpsManager.map=i,i.fpsManager.setCallback(i._render.bind(i)),i._shouldKeepHighFps=!1,i._renderCallbackList=[],(0,v.default)(i,j.easableMixin),(0,v.default)(i,G.animatableMap),wt.bindAll(["_onData","_render"],i),i._initListeners(),i.jumpTo({center:n.center,zoom:n.zoom,heading:n.heading||0,pitch:n.pitch||0,scale:n.scale||0}),i.highFpsReferIndex=0;var _=p.getDrawContainer();return i.resize(_.clientWidth,_.clientHeight),i._update(),i.handler=new _t(i,{mapZoomType:n.mapZoomType}),i._bubbleMiddleware=new L.default(i),i.setDraggable(n.draggable),i.setScrollable(n.scrollable),i.setDoubleClickZoom(n.doubleClickZoom),i.setViewMode(n.viewMode),i.setShowControl(n.showControl),i.dragRotate.setRotatable(n.rotatable),i.dragRotate.setPitchable(n.pitchable),i._initControls(),i.enableAreaClip(n.clip),(0,Z.minfo)({lat:n.center.lat,lng:n.center.lng,zoom:n.zoom,pitch:n.pitch,rotation:n.rotation,width:i.transform.width,height:i.transform.height}),(0,Z.fps)(i),(0,Z.frt)(i,o,mt.isPC()?"pc":"mobile"),(0,Z.ds)(i,mt.isLowMobileDevice(),mt.mobileSystem()),i}return(0,E.default)(e,t),(0,x.default)(e,[{key:"_initListeners",value:function(){var t=this;this._on("preload",this._preLoad),this._on("data",this._onData),this._on("data",function(e){"metadata"===e.sourceDataType&&t._update()}),mt.on(this,"layer,transit_end",this._update.bind(this,!1)),this._on("move",mt.debounce(function(){t._update()},10)),this._on("tilesloaded",mt.debounce(function(){t._update()},250)),mt.on(this,"movestart,transit_start",function(){t._changeFPS(Lt)}),mt.on(this,"data,moveend,transit_end",mt.debounce(function(){t._destroyed||t._shouldKeepHighFps||t._changeFPS(6)},3e3)),mt.on(this,"moveend,data",mt.debounce(function(){t.renderEngine.updateLabel(t.layerResource.getDrawLayers())},10)),this.on("mapstyle_changed",function(e){var n=e.styleId;t.renderEngine.onMapStyleUpdate(n),t.drawManager.resetGradualPlacement(),t._update()})}},{key:"resetRenderEngine",value:function(){this.renderEngine=new A.default(this.canvasContainer,{})}},{key:"_changeFPS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;this.fpsManager.updateFPS(t)}},{key:"keepHighFps",value:function(t){t?this.highFpsReferIndex+=1:this.highFpsReferIndex-=1,this.highFpsReferIndex=Math.max(this.highFpsReferIndex,0),this.highFpsReferIndex<=0?this._shouldKeepHighFps=!1:(this._changeFPS(Lt),this._shouldKeepHighFps=!0)}},{key:"setCenter",value:function(t,e){return this.jumpTo({center:t},e)}},{key:"getCenter",value:function(){return this.transform.center}},{key:"setZoom",value:function(t,e){return this.jumpTo({zoom:t},e),this}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setPitch",value:function(t,e){return this._viewMode!==at.VIEW_MODE.MAP_2D&&this.getPitchable()?(this.jumpTo({pitch:t},e),this):this}},{key:"setMaxZoom",value:function(t,e){var n=this.transform;return isNaN(t)||!Pt(t)?(new it.BaseTypeError("maxZoom","number",t).error(),this):n.maxZoom===+t?this:(+t<n.minZoom||+t>Q.default.maxZoom?console.error("无法设置maxZoom,请检查maxZoom值是否大于"+Q.default.maxZoom+"，或小于当前minZoom。"):(n.zoom>t&&this.jumpTo({zoom:t},e),n.maxZoom=+t),this)}},{key:"setMinZoom",value:function(t,e){var n=this.transform;return isNaN(t)||!Pt(t)?(new it.BaseTypeError("minZoom","number",t).error(),this):n.minZoom===+t?this:(+t>n.maxZoom||+t<Q.default.minZoom?console.error("无法设置minZoom,请检查minZoom值是否小于"+Q.default.minZoom+"，或大于当前maxZoom。"):(n.zoom<t&&this.jumpTo({zoom:t},e),n.minZoom=+t),this)}},{key:"setMaxPitch",value:function(t,e){var n=this.transform;return isNaN(t)||!Pt(t)?(new it.BaseTypeError("maxPitch","number",t).error(),this):n.maxPitch===+t?this:(+t>n.maxPitch||+t>Q.default.maxPitch?console.error("无法设置maxPitch,请检查maxPitch值是否大于"+Q.default.maxPitch+"，或小于当前minPitch。"):(n.pitch>t&&this.jumpTo({pitch:t},e),n.maxPitch=+t),this)}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"getRoll",value:function(){return this.transform.roll}},{key:"setRoll",value:function(t){this.transform.roll=t}},{key:"frequentEaseTo",value:function(t){var e=this;if(this._once("moveend",function(){e._easeToStore=null}),!this.moving)return this._easeToStore=t,void this.easeTo(t);(0,d.default)(t).forEach(function(n){e._easeToStore[n]=t[n]}),this.easeTo(this._easeToStore)}},{key:"setPitchable",value:function(t){return At(t)?"2D"===this.getViewMode()||t===this.getPitchable()?this:(t?(this.dragRotate.setPitchable(!0),this.touchTilt.enable(),this.controlManager.setViewMode("3D")):(this.frequentEaseTo({pitch:0}),this.dragRotate.setPitchable(!1),this.touchTilt.disable(),this.controlManager.setViewMode("3D")),this):(new it.BaseTypeError("setPitchable参数","Boolean",t).error(),this)}},{key:"getPitchable",value:function(){return this.dragRotate.pitchable}},{key:"setRotatable",value:function(t){return At(t)?"2D"===this.getViewMode()||t===this.getRotatable()?this:(t?(this.dragRotate.setRotatable(!0),this.touchZoomRotate.enableRotation(),this.controlManager.setViewMode("3D")):(this.frequentEaseTo({rotation:0}),this.dragRotate.setRotatable(!1),this.touchZoomRotate.disableRotation(),this.controlManager.setViewMode("3D")),this):(new it.BaseTypeError("setRotatable参数","Boolean",t).error(),this)}},{key:"getRotatable",value:function(){return this.dragRotate.rotatable}},{key:"setScale",value:function(t,e){return Pt(t)?t<=0?this:(this.jumpTo({scale:t},e),this):(new it.BaseTypeError("scale","number",t).error(),this)}},{key:"getScale",value:function(){return this.transform.scale}},{key:"setOffset",value:function(t){return It(t)&&Pt(t.x)&&Pt(t.y)?(this.renderEngine.camera.setOffset(t),this.emit("offset_changed")):new it.ClassTypeError("Map.offset","Object:{x,y}",t).error(),this}},{key:"getOffset",value:function(){return this.renderEngine.camera.offset}},{key:"setRotation",value:function(t,e){return this._viewMode!==at.VIEW_MODE.MAP_2D&&this.getRotatable()?(this.jumpTo({heading:360-t},e),this):this}},{key:"getRotation",value:function(){return 360-this.transform.heading}},{key:"getHeading",value:function(){return this.transform.heading}},{key:"getContainer",value:function(){return this.drawContainer}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getRenderContainer",value:function(){return this.renderEngine.getDrawContainer()}},{key:"setDraggable",value:function(t){var e=t?"enable":"disable";return this.dragPan[e](),this.dragRotate[e](),this.longPress[e](),this.draggable=!!t,this}},{key:"getDraggable",value:function(){return this.draggable}},{key:"setScrollable",value:function(t){var e=t?"enable":"disable";return this.scrollZoom[e](),this}},{key:"getScrollable",value:function(){return this.scrollZoom.isEnabled()}},{key:"setDoubleClickZoom",value:function(t){var e=t?"enable":"disable";return this.doubleClickZoom[e](),this}},{key:"getDoubleClickZoom",value:function(){return this.doubleClickZoom.isEnabled()}},{key:"setBoundary",value:function(t){return this.transform.boundary=t,this._update(),this}},{key:"getBoundary",value:function(){return this.transform.boundary}},{key:"getIndoorManager",value:function(){return this.indoorManager}},{key:"getLightManager",value:function(){return this.renderEngine.lightManager}},{key:"setViewMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at.VIEW_MODE.MAP_3D,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=String(t).toUpperCase(),this._viewMode===t)return this;switch(t){case at.VIEW_MODE.MAP_2D:this.easeTo({pitch:0,heading:0,roll:0},e),this.dragRotate.disable(),this.touchZoomRotate.disableRotation(),this.touchTilt.disable();break;default:if(new it.EnumError("viewMode",[at.VIEW_MODE.MAP_2D,at.VIEW_MODE.MAP_3D,at.VIEW_MODE.SPHERE],t).error(),!Tt(this.getViewMode()))return this;t=at.VIEW_MODE.MAP_3D;case at.VIEW_MODE.SPHERE:case at.VIEW_MODE.MAP_3D:this.draggable&&(this.dragRotate.enable(),this.touchZoomRotate.enableRotation(),this.touchTilt.enable())}return this.controlManager.setViewMode(t),this.transform.transitTo(t,e),this._viewMode=t,this}},{key:"getViewMode",value:function(){return this._viewMode}},{key:"getBaseMap",value:function(){return this.layerResource.baseMap}},{key:"setBaseMap",value:function(t){return this.layerResource.baseMap=t,this}},{key:"setMapStyleId",value:function(t){return t&&Et(t)?this.layerResource.setMapStyleId(t):console.error("传入的mapStyleId有误："+t),this}},{key:"setMapStyleConfig",value:function(t){return It(t)?"{}"===(0,c.default)(t)?(console.error("setMapStyleConfig传入的参数为空对象"),this):(this.layerResource.setMapStyleConfig(t),this):(new it.BaseTypeError("StyleConfig","object",t).error(),this)}},{key:"getShowControl",value:function(){return this._showControl}},{key:"setShowControl",value:function(t){this._showControl=t}},{key:"getControl",value:function(t){return this.controlManager.getControl(t)}},{key:"removeControl",value:function(t){return this.controlManager.removeControl(t),this}},{key:"addControl",value:function(t){return this.controlManager.addControl(t),this}},{key:"panTo",value:function(t,e,n){return this.easeTo({center:t},e,n)}},{key:"panBy",value:function(t,e,n){return t=St.convert(t).mult(-1),this.panTo(this.transform.center,wt.extend({offset:t},e),n)}},{key:"flyTo",value:function(){}},{key:"zoomBy",value:function(t,e,n){var i=this.getZoom()+t,o=this.transform;i=Math.max(Math.min(i,o.maxZoom),o.minZoom),this.zoomTo(i,e,n)}},{key:"zoomTo",value:function(t,e,n){return this.easeTo({zoom:t},e,n)}},{key:"rotateTo",value:function(t,e,n){return this.easeTo({rotation:t},e,n)}},{key:"headTo",value:function(t,e,n){return this.easeTo({heading:t},e,n)}},{key:"pitchTo",value:function(t,e){return this.easeTo({pitch:t},e)}},{key:"naviTo",value:function(t,e,n,i){return this.easeTo({heading:e,center:t},wt.extend({isMatrix:!1},n),i)}},{key:"jumpTo",value:function(t,e){this.stopMoving();var n=this.transform,i=!1,o=!1,r=!1,a=!1,s=!1;return"zoom"in t&&n.zoom!==+t.zoom&&((0,l.default)(+t.zoom)?new it.BaseTypeError("zoom","number",t.zoom).error():(i=!0,n.zoom=+t.zoom)),"center"in t&&(n.center=xt.convert(t.center),a=!0),"heading"in t&&n.heading!==+t.heading&&(o=!0,n.heading=+t.heading),"pitch"in t&&n.pitch!==+t.pitch&&(r=!0,n.pitch=+t.pitch),"roll"in t&&n.roll!==+t.roll&&(s=!0,n.roll=+t.roll),"scale"in t&&n.scale!==t.scale&&(n.scale=t.scale),this._fire("movestart",e)._fire("move",e),i&&this._fire("zoomstart",e)._fire("zoom",e)._fire("zoomend",e),o&&this._fire("rotate",e),r&&this._fire("pitchstart",e)._fire("pitch",e)._fire("pitchend",e),s&&this._fire("rollstart",e)._fire("roll",e)._fire("rollend",e),a&&this._fire("panstart",e)._fire("pan",e)._fire("panend",e),this._fire("moveend",e)}},{key:"easeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];this.stopMoving(),n=wt.extend({offset:[0,0],duration:500,easing:wt.ease},n),!1===n.animate&&(n.duration=0);var o=this.transform,r=this.getZoom(),a=this.getHeading(),s=this.getPitch(),l=this.getRoll(),u=this.getCenter(),c=r,f=a,d=s,h=l;Pt(t.zoom)?c=t.zoom:Tt(t.zoom)||new it.BaseTypeError("mapStatus.zoom","number",t.zoom).error(),Pt(t.rotation)?f=this._normalizeHeading(360-t.rotation,a):Tt(t.rotation)||new it.BaseTypeError("mapStatus.rotation","number",t.rotation).error(),Pt(t.heading)&&(f=this._normalizeHeading(t.heading,a)),Pt(t.pitch)?d=t.pitch:Tt(t.pitch)||new it.BaseTypeError("mapStatus.pitch","number",t.pitch).error(),Pt(t.roll)?h=t.roll:Tt(t.roll)||new it.BaseTypeError("mapStatus.roll","number",t.roll).error();var v=null,p=null;n.around&&(v=n.around,p=this.projectToContainer(v));var m=this.projectToContainer(u),_=St.convert(n.offset),g=xt.convert(t.center||u);this._normalizeCenter(g);var y=o.latLngToCoord(u),x=o.latLngToCoord(g),b=x.sub(y),S=o.zoomScale(c-r);return this.zooming=c!==r&&c<=o.maxZoom&&c>=o.minZoom,this.rotating=a!==f,this.pitching=d!==s,this.panning=0!==b.add(_).length(),this.rolling=l!==h,this._viewMode===at.VIEW_MODE.MAP_2D&&(this.rotating=!1,this.pitching=!1,this.rolling=!1),this.zooming+this.rotating+this.pitching+this.rolling+this.panning?(this._prepareMoving(i,n.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(this.zooming&&(o.zoom=(0,W.default)(r,c,t)),this.rotating&&(o.heading=(0,W.default)(a,f,t)),this.pitching&&(o.pitch=(0,W.default)(s,d,t)),this.rolling&&(o.roll=(0,W.default)(l,h,t)),n.around)o.setLocationAtPoint(v,p);else{var e=o.zoomScale(o.zoom-r),u=c>r?Math.min(2,S):Math.max(.5,S),g=Math.pow(u,1-t),x=b.mult(t*g),w=m.add(_.mult(t*g)),E=o.coordToLatLng(y.add(x).mult(e),o.zoom);o.setLocationAtPoint(E,w)}this._fireMoveEvents(i)},function(){n.delayEndEvents?e._onEaseEnd=setTimeout(function(){return e._moveToEnd(i)},n.delayEndEvents):e._moveToEnd(i)},function(){e._moveToEnd(i,!0)},n),this):this}},{key:"getNonStopRotate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];if(!this.rotateTickTimer){this.rotating=!0;var i=this.transform;this.rotateTickTimer=function(o){t.isRotateAnimationRunning&&(-1===o?i.heading-=.8*e:i.heading+=.8*e,mt.frame(t.rotateTickTimer.bind(t,o)),t._fireMoveEvents(n))}}return{begin:function(e){t._prepareMoving(n),t.rotating=!0,t.isRotateAnimationRunning=!0,t.rotateTickTimer(e)},cancel:function(){t.isRotateAnimationRunning&&(t._moveToEnd(n),t.isRotateAnimationRunning=!1)}}}},{key:"getNonStopPitch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];if(!this.pitchTickTimer){this.pitching=!0;var i=this.transform;this.pitchTickTimer=function(o){t.isPitchAnimationRunning&&(-1===o?i.pitch-=.8*e:i.pitch+=.8*e,mt.frame(t.pitchTickTimer.bind(t,o)),t._fireMoveEvents(n))}}return{begin:function(e){t._prepareMoving(n),t.isPitchAnimationRunning=!0,t.pitching=!0,t.pitchTickTimer(e)},cancel:function(){t.isPitchAnimationRunning&&(t.pitching=!1,t._moveToEnd(n),t.isPitchAnimationRunning=!1)}}}},{key:"_prepareMoving",value:function(t,e){this.moving=!0,e||(this._fire("movestart",t),this.zooming&&this._fire("zoomstart",t),this.rotating&&this._fire("rotatestart",t),this.pitching&&this._fire("pitchstart",t),this.panning&&this._fire("panstart",t))}},{key:"_fireMoveEvents",value:function(t){this._fire("move",t),this.zooming&&this._fire("zoom",t),this.rotating&&this._fire("rotate",t),this.pitching&&this._fire("pitch",t),this.panning&&this._fire("pan",t)}},{key:"_moveToEnd",value:function(t,e){var n=this.zooming,i=this.rotating,o=this.pitching,r=this.panning;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.panning=!1,n&&this._fire(e?"zoomcancel":"zoomend",t),i&&this._fire(e?"rotatecancel":"rotateend",t),o&&this._fire(e?"pitchcancel":"pitchend",t),r&&this._fire(e?"pancancel":"panend",t),this._fire(e?"movecancel":"moveend",t)}},{key:"resetNorth",value:function(t,e){return this.rotateTo(0,wt.extend({duration:1e3},t),e),this}},{key:"snapToNorth",value:function(t,e){return Math.abs(this.getHeading())<7?this.resetNorth(t,e):this}},{key:"fitBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t&&t instanceof bt))return new it.ClassTypeError("Map.fitBounds的bounds参数","LatLngBounds",t).error(),this;var n=e.minZoom,i=void 0===n?this.transform.minZoom:n,o=e.maxZoom,r=void 0===o?this.transform.maxZoom:o,a=e.animate,s=void 0===a||a,l=e.ease,u=void 0;if(Pt(e.padding)){var c=e.padding;u={top:c,bottom:c,right:c,left:c}}else u=(0,v.default)({top:0,bottom:0,right:0,left:0},e.padding);if(!wt.deepEqual((0,d.default)(u).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return void wt.warnOnce("FitBoundsOptions.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");t=bt.convert(t);var f=u,h=f.top,p=f.bottom,m=f.left,_=f.right,g=[(m-_)/2,(h-p)/2],y=St.convert(g),x=this.transform,b=x.latLngToCoord(t.getNorthWest()),S=x.latLngToCoord(t.getSouthEast()),w=x._minZoom,E=x.coordToLatLng(b.add(S).div(2));if(0===x.pitch){var T=S.sub(b),A=(x.width-_-m)/T.x,P=(x.height-h-p)/T.y;if(P<0||A<0)return wt.warnOnce("传入参数无效导致map无法进行fitBounds操作"),this;w=x.scaleZoom(x.scrollScale*Math.min(A,P))}else w=this._getZoomByBounds(t,{padding:u});w=Math.max(Math.min(w,r),i);var I={center:E,zoom:w,heading:0};return s?this.easeTo(I,(0,v.default)({offset:y},l)):this.jumpTo(I),this}},{key:"_getZoomByBounds",value:function(t,e){var n=e.padding,i=n.top,o=n.bottom,r=n.left,a=n.right,s=[(r-a)/2,(i-o)/2],l=St.convert(s),u=this.transform,c=u._minZoom,f=u._maxZoom,d=u._minPitch,h=u._maxPitch,v=u._fov,p=u.width,m=u.height,_=u.zoom,g=u.tileZoom,y=u._center,x=u._pitch,b=u._roll,S=u._scale,w=u.viewTransition,E=u._boundary,T={minZoom:c,maxZoom:f,minPitch:d,maxPitch:h,fov:v,width:p,height:m,zoom:_,tileZoom:g,center:y,pitch:x,roll:b,scale:S,viewTransition:w,boundary:E,heading:0},A=x/Math.PI*180,P=b/Math.PI*180;this.renderEngine.camera.setRotate(A,0,P);var I=new ht(T,this.renderEngine),k=c,L=c,M=f,C=!1,R=this._getCenterByBounds(t),N={x:p/2,y:m/2};for(N.x=N.x+l.x,N.y=N.y+l.y;M-L>.001;){k=(L+M)/2,I.zoom=k,I.setLocationAtPoint(R,N);var B=I.latLngToScreen(t.getNorthWest()),O=I.latLngToScreen(t.getSouthEast()),D=I.latLngToScreen(t.getSouthWest()),z=I.latLngToScreen(t.getNorthEast()),V=Math.min.apply(null,[B.x,O.x,D.x,z.x]),F=Math.max.apply(null,[B.x,O.x,D.x,z.x]),U=Math.min.apply(null,[B.y,O.y,D.y,z.y]),Y=Math.max.apply(null,[B.y,O.y,D.y,z.y]);V>r&&U>i&&F<p-a&&Y<m-o?(C=!0,L=k):(M=k,C=!1)}return C||(k=L),k}},{key:"_getCenterByBounds",value:function(t){var e=this.transform,n=e.latLngToCoord(t.getNorthWest()),i=e.latLngToCoord(t.getSouthEast());return e.coordToLatLng(n.add(i).div(2))}},{key:"getZoomByBounds",value:function(t){var e=this.transform,n=e.latLngToCoord(t.getNorthWest()),i=e.latLngToCoord(t.getSouthEast()),o=i.sub(n),r=e.width/o.x,a=e.height/o.y;return a<0||r<0?void wt.warnOnce("bounds error!"):Math.min(e.scaleZoom(e.scrollScale*Math.min(r,a)),e.maxZoom)}},{key:"stopMoving",value:function(){return this.stopEase(),this.stopAnimation(),this}},{key:"stopEase",value:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this}},{key:"getSource",value:function(t){return this.layerResource.getSource(t)}},{key:"addSource",value:function(t,e){this.layerResource.addSource(t,e)}},{key:"removeSource",value:function(t){this.layerResource.removeSource(t)}},{key:"addLayer",value:function(t){this.layerResource.addLayer(t)}},{key:"removeLayer",value:function(t){this.layerResource.removeLayer(t)}},{key:"moveLayer",value:function(t,e){return this.layerResource.moveLayer(t,e),this}},{key:"getLayer",value:function(t){return this.layerResource.getLayer(t)}},{key:"findLayer",value:function(t){return this.layerResource.findLayer(t)}},{key:"addVisualPlugin",value:function(t){this.layerResource.addVisualPlugin(t),this._update()}},{key:"removeVisualPlugin",value:function(t){this.layerResource.removeVisualPlugin(t),this._update()}},{key:"indoorStateChange",value:function(t,e){this.layerResource.updateIndoorData(t,e)}},{key:"unprojectFromContainer",value:function(t){return t instanceof St?this.transform.screenToLatLng(t):t&&t.x&&t.y?this.transform.screenToLatLng(new St(t.x,t.y)):(new it.ClassTypeError("Map.unprojectFromContainer的point参数","Point",t).error(),null)}},{key:"projectToContainer",value:function(t){if(t instanceof xt){var e=this.transform.latLngToScreen(t);return new St(e.x,e.y)}return new it.ClassTypeError("Map.projectToContainer的latLng参数","LatLng",t).error(),null}},{key:"projectToCenterLocalPlane",value:function(t){if(t instanceof xt){return this.transform.latLngToCenterLocalPixel(t)}return new it.ClassTypeError("Map.projectToCenterLocalPlane的latLng参数","LatLng",t).error(),null}},{key:"projectToWorldPlane",value:function(t,e){if(t instanceof xt){return this.transform.latLngToCoord(t,e)}return new it.ClassTypeError("Map.projectToWorldPlane的latLng参数","LatLng",t).error(),null}},{key:"_getSpatialResolution",value:function(t,e){t=t||this.getZoom();var n=(e||this.getCenter().getLat())*Math.PI/180;return(0,nt.getSpatialResolution)(t)*Math.cos(n)/this.getScale()}},{key:"_onData",value:function(){this.drawManager.updatePlace(),this._rerender()}},{key:"_preLoad",value:function(){this.layerResource._sources.vector_source.preload(this.transform)}},{key:"_normalizeHeading",value:function(t,e){t=wt.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t}},{key:"_normalizeCenter",value:function(t){var e=this.transform,n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},{key:"_rerender",value:function(){this._changeFPS(Lt),this.fpsManager.start()}},{key:"_render",value:function(){var t=this.getRenderContainer();this.resize(t.clientWidth,t.clientHeight);var e=this.drawManager.render(this.layerResource,this.transform);this._bubbleMiddleware&&this._bubbleMiddleware.runPick(),e&&this._rerender(),this._renderCallbackList.forEach(function(t){return t&&t()})}},{key:"addRenderCallback",value:function(t){this._renderCallbackList.push(t)}},{key:"removeRenderCallback",value:function(t){var e=this._renderCallbackList.indexOf(t);this._renderCallbackList.splice(e,1)}},{key:"resize",value:function(t,e){t&&e&&(t===this.width&&e===this.height||(this.width=t,this.height=e,this.transform.resize(t,e),this.drawManager.resize(t,e),this._update(),this._frameId=null,this._fire("resize",{width:t,height:e},!0)))}},{key:"_update",value:function(){this._destroyed||this._glContextLost||(this.layerResource._updateSource(this.transform,this.renderEngine.camera,{causedBy:"move"}),this.drawManager.updatePlace(),this._rerender())}},{key:"_initContainer",value:function(){this.drawContainer.style.webkitTapHighlightColor="rgba(0,0,0,0)","static"===getComputedStyle(this.drawContainer).getPropertyValue("position")&&(this.drawContainer.style.position="relative");var t=document.createElement("canvas");t.style.cssText="width:100%; height: 100%;";var e=o();this.drawContainer.appendChild(t),this.drawContainer.appendChild(e.root),this.canvasContainer=t,this._overlayer=e}},{key:"_initControls",value:function(){var t=this;if((0,Y.checkKey)(this.id).then(function(e){void 0!==e||J.default.isLocal||t.addControl(new B.default({position:R.CONTROL_POSITION.BOTTOM_CENTER}))}),this.addControl(new gt({id:R.DEFAULT_CONTROL_ID.LOGO,position:R.CONTROL_POSITION.BOTTOM_LEFT})),!1===this._showControl)return this;this.addControl(new D.default({id:R.DEFAULT_CONTROL_ID.SCALE,position:R.CONTROL_POSITION.BOTTOM_LEFT,center:this.getCenter(),zoom:this.getZoom()})),this.addControl(new V.default({id:R.DEFAULT_CONTROL_ID.ZOOM,position:R.CONTROL_POSITION.TOP_RIGHT})),this.addControl(new U.default({id:R.DEFAULT_CONTROL_ID.ROTATION,position:R.CONTROL_POSITION.TOP_RIGHT}))}},{key:"_onContextError",value:function(t){"restored"===t?(this._rerender(),this._glContextLost=!1,(0,Z.err)({type:"ctx",code:1}),this._fire("context_restored")):(this.stop(),this._glContextLost=!0,(0,Z.err)({type:"ctx",code:0}),this._fire("context_lost"))}},{key:"enableAreaHighlight",value:function(t){var e=t.layerId||"$tmap_highlight",n=this.getLayer(e);if(n||(n=new ut.default({id:e,map:this,geometries:[]})),t){var i=t.paths,o=void 0===i?[]:i,r=t.highlightColor,a=t.shadeColor;n.update([{id:"highlight",paths:o}],{highlightColor:r,shadeColor:a})}return n.setVisible(!0),this}},{key:"disableAreaHighlight",value:function(t){var e=t&&t.layerId||"$tmap_highlight",n=this.getLayer(e);return n?(n.setVisible(!1),this):this}},{key:"enableAreaClip",value:function(t){if(t&&t.paths&&this._checkMaskPaths(t.paths)){t.layerId="$tmap_clip_highlight",t.shadeColor=this.renderEngine.getBgColor(),this.enableAreaHighlight(t),this.moveLayer("$tmap_clip_highlight",dt.LAYER_LEVEL.OVERLAY_AA);var e=this.getLayer("$tmap_clip_clip");e||(e=new ft.default({map:this,id:"$tmap_clip_clip",geometries:[],isMaskReverse:!0})),e.add([{id:"$tmap_clip_clip",paths:t.paths}]),this.clipOptions=t,this.on("bgcolor_change",this._updateClipBgColor)}}},{key:"disableAreaClip",value:function(){this.disableAreaHighlight({layerId:"$tmap_clip_highlight"}),this.removeLayer("$tmap_clip_clip"),this.removeSource("$tmap_clip_clip"),this.off("bgcolor_change",this._updateClipBgColor)}},{key:"_updateClipBgColor",value:function(t){this.enableAreaHighlight((0,a.default)({},this.clipOptions,{shadeColor:t})),this.moveLayer("$tmap_clip_highlight",dt.LAYER_LEVEL.OVERLAY_AA)}},{key:"_checkMaskPaths",value:function(t){if(!Array.isArray(t))return!1;var e=!0;return t.forEach(function(t,n){rt.default.isValidLatLng(t)||(e=!1,console.error("areaClip.paths: 希望传入Geometry数组，实际第"+n+"元素非latlng格式！"))}),e}},{key:"stop",value:function(){this.fpsManager.stop()}},{key:"destroy",value:function(){this._destroyed||(this.emit("destroy"),this.stopMoving(),(0,Y.revokeKeyCheck)(this.id),this.controlManager.destroy(),this.handler.destroy(),this.fpsManager.destroy(),this.layerResource.destroy(),this._bubbleMiddleware.destroy(),this.renderEngine.destroy(),this.drawManager.destroy(),this.indoorManager=null,this.fpsManager=null,this.handler=null,this.layerResource=null,this._bubbleMiddleware=null,this.renderEngine=null,this.drawManager=null,this.transform=null,this._clearAllListeners(),this.drawContainer.innerHTML="",this.canvasContainer.width=1,this.canvasContainer.height=1,this.canvasContainer=null,this._overlayer=null,this.drawContainer=null,this.isPitchAnimationRunning=null,this.isRotateAnimationRunning=null,this.pitchTickTimer=null,this.rotateTickTimer=null,this._destroyed=!0)}},{key:"_getPoiInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.drawManager.getPoi(t);if(e){e.latLng=this.unprojectFromContainer(e.coord);var n=Math.round(this.getZoom())>=Q.default.minShowIndoorZoom&&this.indoorManager.getVisible()&&this.indoorManager.getIndoorBuildingList().length;if(!e.isIndoor&&n)for(var i=this.indoorManager.getIndoorBuildingList(),o=0;o<i.length;o++){var r=i[o],a=r.getBuildingInfo();if(a&&a.bounds.contains(e.latLng)){e=null;break}}}return e}},{key:"id",get:function(){return this._uniqueId}}]),e}(yt);e.default=Mt},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if((0,T.isSimple)(t)){for(var e=[],n=t.length,i=0;i<n;i++){var r=void 0;if(i<n-1)r=[t[i],t[i+1]];else{if(t[i].equals(t[0]))continue;r=[t[i],t[0]]}e.push(r)}return e}return t.map(function(t){return o(t)}).flat()}var r=n(15),a=i(r),s=n(18),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(5),m=i(p),_=n(34),g=i(_),y=n(4),x=i(y),b=n(301),S=i(b),w=n(161),E=n(57),T=n(297),A=n(334),P=i(A),I=n(500),k=i(I),L=n(28),M=n(40),C=i(M),R=n(10),N=i(R),B=n(156),O=B.PolygonStyle,D=n(156),z=D.ExtrudablePolygonStyle,V=C.default.isValidColor,F=C.default.isNumber,U=function(t){function e(t){(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t));return n._createSubOverlay(t),n}return(0,x.default)(e,t),(0,v.default)(e,[{key:"_initialize",value:function(){this._childGeometryOverlays=[]}},{key:"_setGeometryType",value:function(){this._geometryType=w.GEOMETRY_TYPES.POLYGON,this._layerType=E.RENDER_LAYER_TYPE.polygon,this._className="MultiPolygon"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiPolygon.geometries: 希望传入PolygonGeometry数组，实际第"+e+"元素不存在！"),t.paths&&((0,T.isSimple)(t.paths)||(0,T.isPart)(t.paths)||(0,T.isComplex)(t.paths))||console.error("MultiPolygon.geometries: 希望传入PolygonGeometry数组，实际第"+e+"元素的paths属性无效！")})}},{key:"_getDefaultStyle",value:function(){return new O}},{key:"_checkStyles",value:function(t){(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"_checkStyles",this).call(this,t),(0,l.default)(t).forEach(function(e){var n=t[e];n&&(n instanceof O||n instanceof z)?n instanceof O?V(n.color)?V(n.borderColor)||console.error("MultiPolygon.styles: 样式id ",e," 对应的PolygonStyle.borderColor属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的PolygonStyle.color属性无效",n):n instanceof z&&(V(n.color)?V(n.borderColor)?F(n.extrudeHeight)||console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.extrudeHeight属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.borderColor属性无效",n):console.error("MultiPolygon.styles: 样式id ",e," 对应的ExtrudablePolygonStyle.color属性无效",n)):console.error("MultiPolygon.styles: 样式id ",e,"希望传入PolygonStyle或ExtrudablePolygonStyle实例，实际传入：",n)})}},{key:"_createSubOverlay",value:function(t){var e=this._extractSubStyles(),n=this._extractSubGeometries(),i=new k.default((0,a.default)(t,{id:this.id+"_border",styles:e,geometries:n}));this._childGeometryOverlays.push(i)}},{key:"_extractSubGeometries",value:function(){var t=this;return this.geometries.reduce(function(e,n){var i=t.styles[n.styleId]||t.styles.default;if(i&&i.showBorder&&i instanceof O){var o=(0,T.getBorderPolyline)(n.paths);e.push({styleId:n.styleId,paths:o,rank:n.rank})}return e},[])}},{key:"_extractSubStyles",value:function(){var t={};return N.default.forIn(this.styles,function(e,n){n&&n.showBorder&&n instanceof O&&(t[e]=new P.default({id:e,color:n.borderColor,width:n.borderWidth,lineCap:"round",dashArray:n.borderDashArray}))}),t}},{key:"setVisible",value:function(t){return t=Boolean(t),(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setVisible",this).call(this,t),this._childGeometryOverlays.forEach(function(e){e.setVisible(t)}),this}},{key:"setMap",value:function(t){return(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setMap",this).call(this,t),this._childGeometryOverlays.forEach(function(e){return e.setMap(t)}),this}},{key:"setZIndex",value:function(t){return F(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):((0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setZIndex",this).call(this,t),this._childGeometryOverlays.forEach(function(e){return e.setZIndex(t)}),this):(new L.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"updateGeometries",value:function(t,n){return t?((0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"updateGeometries",this).call(this,t,n),this._updateSubGeometries(),this):this}},{key:"_updateSubGeometries",value:function(){var t=this._extractSubGeometries();this._childGeometryOverlays.forEach(function(e){return e.setGeometries(t)})}},{key:"_updateSubStyles",value:function(){var t=this._extractSubStyles();this._childGeometryOverlays.forEach(function(e){return e.setStyles(t)}),this._updateSubGeometries()}},{key:"setGeometries",value:function(t){return t?((0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setGeometries",this).call(this,t),this._updateSubGeometries(),this):this}},{key:"setStyles",value:function(t){return t?((0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setStyles",this).call(this,t),this._updateSubStyles(),this):this}},{key:"destroy",value:function(){this._childGeometryOverlays.forEach(function(t){return t.destroy()}),(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"destroy",this).call(this)}},{key:"_getAllPoints",value:function(){return this.geometries.map(function(t){return t.paths.flat(1/0)}).flat()}},{key:"_getAllSegments",value:function(){return this.geometries.map(function(t){return o(t.paths)}).flat()}}]),e}(S.default);t.exports=U},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(_(t)){var n=(0,u.default)(t,2),i=n[0],o=n[1];return m(i)&&m(o)?(i=Math.max(Math.round(i),0),o=Math.max(Math.round(o),0),[i,o]):(new p.BaseTypeError("PolylineStyle."+e+"[index]","number",i),[0,0])}return new p.BaseTypeError("PolylineStyle."+e,"array",t).error(),[0,0]}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=["width","height","space"],n={};if(e.forEach(function(e){if(e in t){var i=t[e];m(i)?n[e]=Math.min(Math.max(i,0),255):new p.BaseTypeError("ArrowOptions."+e,"number",i).error()}}),!g(t.align)){var i=t.align;i in x?n.align=i:new p.EnumError("ArrowOptions.align",(0,s.default)(x),i).error()}return n}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),s=i(a),l=n(30),u=i(l),c=n(0),f=i(c),d=n(10),h=n(40),v=i(h),p=n(28),m=v.default.isNumber,_=v.default.isArray,g=v.default.isUndefined,y={color:"#3777FF",width:3,borderWidth:0,borderColor:"#3777FF",lineCap:"butt",dashArray:[0,0],showArrow:!1,arrowOptions:{width:6,height:4,space:50,align:"middle"},eraseColor:"#C2CBD2",enableBloom:!1},x={middle:0,left:1,right:2},b=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,t),e=(0,d.extend)({},y,e),this.color=e.color,this.width=e.width,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth||0,this.lineCap="round"===e.lineCap?2:"square"===e.lineCap?1:0,this.dashArray=o(e.dashArray,"dashArray"),this.eraseColor=e.eraseColor,this.enableBloom=!!e.enableBloom;var n=(0,d.extend)({},y.arrowOptions,r(e.arrowOptions)),i=n.width,a=n.height,s=n.space,l=n.align;this.arrowInfo=[i,a*!!e.showArrow,s,x[l]]};e.default=b},function(t,e,n){"use strict";function i(){return document.getElementsByTagName("head")[0]}function o(){return"cb"+(new Date).getTime().toString(36)+(y++).toString(36)}function r(t,e){g.push({name:t,sender:e})}function a(t){t.clearAttributes&&t.clearAttributes(),t[p]=null,t.onerror=null,t.parentNode&&t.parentNode.removeChild(t)}function s(t,e,n,o,a){var s=null,l=!1,c=[];e.indexOf("callback")>-1?(e=e.replace("&callback",""),c=["output=jsonp","callback="+_+"."+t]):c=["output=jsonp","pf=jsapi","ref=jsapi","cb="+_+"."+t];var f=h.createElement("script");f.setAttribute("type","text/javascript"),f.setAttribute("charset",a||"GBK"),f.async=!0,f.src=e+(-1===e.indexOf("?")?"?":"&")+c.join("&"),f.onerror=function(){l=!0,o&&o(),u(t)},m[t]=function(t){s=t},f[p]=function(){v.test(this.readyState)&&(u(t),s?(s.id=t,n&&n(s)):l||o&&o())};var d=i();d.insertBefore(f,d.firstChild),r(t,f)}function l(t,e,n,i){return t||(t=o()),d(function(){u(t),s(t,e,n,i)}),t}function u(t){if(t){for(var e=0,n=null,i=g.length;e<i;e++)if(g[e].name===t){n=g.splice(e,1)[0];break}n&&a(n.sender),m[t]&&delete m[t]}}var c=n(61),f=n(389),d=f.domReady,h=window.document,v=/loaded|complete|undefined/i,p=h.dispatchEvent?"onload":"onreadystatechange",m=window[c]._svcb||(window[c]._svcb={}),_=c+"._svcb",g=[],y=0;e.send=l,e.cancel=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LIGHT_TYPE={AMBIENT:"ambient",DIRECTION:"dir",POINT:"point",SPOT:"spot"}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(159),_=i(m),g=[-1,-1,1,-1,-1,1,1,1],y=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderParams={attributes:["aClipSpacePosition"],uniforms:t.uniformList||[]},n.vertices=new Float32Array(g),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"preDraw",value:function(){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"preDraw",this).call(this),this.buffers||(this.buffers=this.createBuffer(null,this.vertices)),this.bindBuffer()}},{key:"bindBuffer",value:function(){var t=this.gl;this.buffers.vertices.bind(),this.buffers.vertices.pointToAttrib({location:this.aClipSpacePosition,size:2,type:t.FLOAT})}},{key:"draw",value:function(t){var e=this.gl;e.useProgram(e.program),this.setUniforms(t),e.drawArrays(e.TRIANGLE_STRIP,0,4)}},{key:"setUniforms",value:function(){}}]),e}(_.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(159),p=i(v),m=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.textureShader=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"afterDraw",value:function(){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRAFFIC_LAYER_ID=e.SATELLITE_LAYER_ID=e.VECTOR_LAYER_ID=e.DEFAULT_BASEMAP=e.TRAFFIC_FEATURE=e.SATELLITE_FEATURE=e.MAP_TYPE=void 0;var i=n(57),o=e.MAP_TYPE={vector:"vector",satellite:"satellite",traffic:"traffic",handdraw:"handdraw",oversea:"oversea"},r=e.SATELLITE_FEATURE={satellite:"base",road:"road"},a=e.TRAFFIC_FEATURE={base:"base",flow:"flow"};e.DEFAULT_BASEMAP={vector:{type:o.vector,features:[i.BASE_LAYER_TYPE.base,i.BASE_LAYER_TYPE.building3d,i.BASE_LAYER_TYPE.point,i.BASE_LAYER_TYPE.label,i.BASE_LAYER_TYPE.arrow]},satellite:{type:o.satellite,features:[r.satellite,r.road]},traffic:{type:o.traffic,features:[a.base]},handdraw:{type:o.handdraw},oversea:{type:o.oversea}},e.VECTOR_LAYER_ID={base:"vector_bottom",arrow:"vector_bottom_arrow",building:"vector_top_building",poi:"vector_top_poi"},e.SATELLITE_LAYER_ID={base:"satellite",road:"road"},e.TRAFFIC_LAYER_ID={base:"traffic_base",flow:"traffic_flow"}},function(t,e,n){t.exports={default:n(407),__esModule:!0}},function(t,e,n){var i=n(152),o=n(77),r=n(268);t.exports=function(t){return function(e,n,a){var s,l=i(e),u=o(l.length),c=r(a,u);if(t&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){"use strict";var i=n(52),o=n(9),r=n(142),a=n(284),s=n(248),l=n(345),u=n(282),c=n(53),f=n(51),d=n(347),h=n(286),v=n(425);t.exports=function(t,e,n,p,m,_){var g=i[t],y=g,x=m?"set":"add",b=y&&y.prototype,S={},w=function(t){var e=b[t];r(b,t,"delete"==t?function(t){return!(_&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(_&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(_||b.forEach&&!f(function(){(new y).entries().next()}))){var E=new y,T=E[x](_?{}:-0,1)!=E,A=f(function(){E.has(1)}),P=d(function(t){new y(t)}),I=!_&&f(function(){for(var t=new y,e=5;e--;)t[x](e,e);return!t.has(-0)});P||(y=e(function(e,n){u(e,y,t);var i=v(new g,e,y);return void 0!=n&&l(n,m,i[x],i),i}),y.prototype=b,b.constructor=y),(A||I)&&(w("delete"),w("has"),m&&w("get")),(I||T)&&w(x),_&&b.clear&&delete b.clear}else y=p.getConstructor(e,t,m,x),a(y.prototype,n),s.NEED=!0;return h(y,t),S[t]=y,o(o.G+o.W+o.F*(y!=g),S),_||p.setStrong(y,t,m),y}},function(t,e,n){"use strict";n(542);var i=n(142),o=n(151),r=n(51),a=n(240),s=n(69),l=n(431),u=s("species"),c=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=s(t),h=!r(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),v=h?!r(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[d](""),!e}):void 0;if(!h||!v||"replace"===t&&!c||"split"===t&&!f){var p=/./[d],m=n(a,d,""[t],function(t,e,n,i,o){return e.exec===l?h&&!o?{done:!0,value:p.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),_=m[0],g=m[1];i(String.prototype,t,_),o(RegExp.prototype,d,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},function(t,e,n){"use strict";var i=n(50);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(227),o=n(523),r=n(426),a=n(50),s=n(77),l=n(441),u={},c={},e=t.exports=function(t,e,n,f,d){var h,v,p,m,_=d?function(){return t}:l(t),g=i(n,f,e?2:1),y=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(r(_)){for(h=s(t.length);h>y;y++)if((m=e?g(a(v=t[y])[0],v[1]):g(t[y]))===u||m===c)return m}else for(p=_.call(t);!(v=p.next()).done;)if((m=o(p,g,v.value,e))===u||m===c)return m};e.BREAK=u,e.RETURN=c},function(t,e,n){var i=n(239);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(69)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r=[7],a=r[i]();a.next=function(){return{done:n=!0}},r[i]=function(){return a},t(r)}catch(t){}return n}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(315),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){var i=n(84),o=n(52),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(262)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){for(var i,o=n(52),r=n(151),a=n(269),s=a("typed_array"),l=a("view"),u=!(!o.ArrayBuffer||!o.DataView),c=u,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(i=o[d[f++]])?(r(i.prototype,s,!0),r(i.prototype,l,!0)):c=!1;t.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},function(t,e,n){var i=n(52),o=i.navigator;t.exports=o&&o.userAgent||""},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){return function(e){var n=t,i=n.lib,o=i.Base,r=i.WordArray,a=n.x64={};a.Word=o.extend({init:function(t,e){this.high=t,this.low=e}}),a.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],i=0;i<e;i++){var o=t[i];n.push(o.high),n.push(o.low)}return r.create(n,this.sigBytes)},clone:function(){for(var t=o.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;i<n;i++)e[i]=e[i].clone();return t}})}(),t})},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.easableMixin=void 0;var i=n(26);e.easableMixin={_abortFn:null,_finishFn:null,_ease:function(t,e,n,o){var r=this;this._finishFn=e;var a=!1;this._abortFn=(0,i.timed)(function(e){t.call(this,o.easing(e)),1===e&&this._finishEase()},function(){a||(delete r._finishFn,n&&n.call(r),a=!0,delete r._abortFn)},!1===o.animate?0:o.duration,this)},_finishEase:function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t&&t.call(this)},_stopEase:function(){this._abortFn&&(this._abortFn(),this._finishEase())}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default.highQualityRender},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(30),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=function(){function t(e,n){(0,s.default)(this,t),this.p0=e,this.p1=n}return(0,u.default)(t,[{key:"getXYCoefficient",value:function(){var t=(0,r.default)(this.p0.elements,3),e=t[0],n=t[1],i=t[2],o=(0,r.default)(this.p1.elements,3),a=o[0],s=o[1],l=o[2];return[(a-e)/(l-i),(e*l-a*i)/(l-i),(s-n)/(l-i),(n*l-s*i)/(l-i)]}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(30),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(94),f=function(){function t(e,n){(0,s.default)(this,t),this.center=e,this.radius=n}return(0,u.default)(t,[{key:"intersectWithLine",value:function(t){var e=t.getXYCoefficient(),n=(0,r.default)(e,4),i=n[0],o=n[1],a=n[2],s=n[3],l=(0,r.default)(this.center.elements,3),u=l[0],f=l[1],d=l[2],h=this.radius,v=o-u,p=s-f,m=-d,_=i*i+a*a+1,g=2*(i*v+a*p+m),y=v*v+p*p+m*m-h*h,x=g*g-4*_*y;if(x<0)return[];var b=(-g+Math.sqrt(x))/(2*_),S=(-g-Math.sqrt(x))/(2*_),w=i*b+o,E=a*b+s,T=i*S+o,A=a*S+s;return[new c.Vector3(w,E,b),new c.Vector3(T,A,S)]}}]),t}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigUtil=e.INDOOR_ICON_SIZE=void 0;var i=n(25),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=0;e.INDOOR_ICON_SIZE=o.default.iconSize,e.ConfigUtil={setBV:function(t){r=t},getBV:function(){return r},getIconPath:function(){var t=Math.floor(3*Math.random());return o.default.indoorIconSrc.replace("%$%",0===t?1:t)},getIconSrc:function(t){return""+this.getIconPath()+t+".png?v="+this.getBV()}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t[0]+(t[1]<<8)+(t[2]<<16)}function r(t,e){var n={};n.x=360*t/268435456-180;var i=180-360*e/268435456;n.y=Math.atan(Math.exp(.017453292519943295*i))/.008726646259971648-90;var o=new m.default(n.y,n.x);return o.x=n.x,o.y=n.y,o}function a(t){return(0,v.default)({},t)}function s(t,e){var n=(0,S.mercatorToLatLng)(new g.default(t,e));return n.x=t,n.y=e,n}function l(t,e){return(0,S.latLngToMercator)(new m.default(e,t))}function u(t){var e=t.map(function(t){return{lng:t.x,lat:t.y}});return(0,b.isClockWise)(e)}function c(t,e,n,i){var o=(0,y.getStyle)(t,e,i);if(!o)return!1;var r=(0,y.getStyle)(o.labelid,e,i);if(!r)return!1;if(o.icon_offset&&65535!==o.icon_offset||r.effect&&5===r.effect){var a=o.icon_offset;if(n&&"number"==typeof o.icon_offset&&isFinite(o.icon_offset)&&65535!==o.icon_offset&&-1!==o.icon_offset){if(r.fontSize>0)return!0}else if(r.fontSize>0)return!0;return!!("number"==typeof a&&isFinite(a)&&a>=0&&a<500)}return r.fontSize>0}function f(t,e,n,i){var o=c(t,e,n,i),r=!1,a=!1;if(!o)return{isValid:o,drawIcon:r,drawLabel:a};var s=(0,y.getStyle)(t,e,i),l=(0,y.getStyle)(s.labelid,e,i);if(s.icon_offset&&65535!==s.icon_offset||l.effect&&5===l.effect){var u=s.icon_offset;a=(n&&"number"==typeof s.icon_offset&&isFinite(s.icon_offset)&&65535!==s.icon_offset&&s.icon_offset,l.fontSize>0),r=!!("number"==typeof u&&isFinite(u)&&u>=0&&u<500)}else r=!1,a=l.fontSize>0;return{isValid:o,drawLabel:a,drawIcon:r}}function d(t,e,n,i){var o=(0,y.getStyle)(t.styleId,e,i);if(!o)return void console.warn("style is invalid!");var r=(0,y.getStyle)(o.labelid,e,i);if(!r)return void console.warn("labelStyle is invalid!");var a=t.drawInfo||f(t.styleId,e,t.direct,i),s=x.INDOOR_ICON_SIZE,l=x.INDOOR_ICON_SIZE,u=/\\/g,c=null,d=null,h=s/2,v=l/2,p=t.text.split(u);return p.map(function(e,i){var o={x:0,y:0},s={w:0,h:0},l={x:0,y:0},u={text:e,coords:[l.x,l.y],anchor:o,textBounds:s};if(!a.drawLabel)return u;switch(t.direct){case 2:c="right",d="middle";break;case 3:c="center",d="top";break;case 4:c="center",d="bottom";break;case 1:c="left",d="middle";break;default:c="center",d="middle"}var f=0;return n.font!==r.font&&(n.font=r.font),f=n.measureText(e).width,s.w=Math.ceil(f),s.h=t.fontSize,"left"===c&&a.drawIcon?(o.x=0+h+2+f/2,l.x=o.x):"right"===c&&a.drawIcon?(o.x=0-h-2-f/2,l.x=o.x):(o.x=0,l.x=0),"top"===d?(o.y=0+v+(r.fontSize+2)*(i+1)-r.fontSize/2,l.y=o.y):"bottom"===d?(o.y=0-v-(r.fontSize+2)*(p.length-i)+r.fontSize/2,l.y=o.y):a.drawIcon&&a.drawLabel?(o.y=0+(1===p.length?0:(r.fontSize/2+2)*(0===i?-1:1)),l.y=o.y):a.drawIcon?(o.y=0,l.y=0):a.drawLabel&&(1===p.length?(o.y=0,l.y=0):(o.y=0+(r.fontSize/2+2)*(0===i?-1:1),l.y=o.y)),u.coords=[l.x,l.y],u})}Object.defineProperty(e,"__esModule",{value:!0});var h=n(224),v=i(h);e.readUint24=o,e.pixels2LongLat=r,e.extendCopy=a,e.mercator2latLng=s,e.latLng2Mercator=l,e.isClockWise=u,e.isValidPointStyle=c,e.getPoiDrawInfo=f,e.getPoiRect=d;var p=n(45),m=i(p),_=n(65),g=i(_),y=n(326),x=n(377),b=n(297),S=n(110)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=null;e.default={setStyleTag:function(t){i=t},isDefaultNoSideLine:function(t){var e=i,n=e.lineTag,o=["street","path","secondaryroad"],r=o.some(function(e){return n[e]&&n[e].some(function(e){return e===Number(t)})});return Number(r)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(252),p=i(v),m=n(40),_=i(m),g=n(28),y=_.default.isNumber,x=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){this._setTileSize(t.tileSize)}},{key:"_setTileSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;y(t)||(new g.BaseTypeError("TileLayer.tileSize","number",t).error(),t=256),this.tileSize=t}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(128),r=i(o),a=n(21),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(34),_=i(m),g=n(4),y=i(g),x=n(380),b=i(x),S=n(117),w=i(S),E=n(81),T=n(57),A=n(28),P=n(25),I=function(t){function e(t){return(0,f.default)(this,e),(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t))}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_initialize",value:function(t){(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_initialize",this).call(this,t),t.type&&("string"!=typeof t.type?new A.BaseTypeError("Layer.type","string",t.type).error():this.features=k[t.type]),this.features=this.features||t.features||[],this.maxDataZoom=t.maxDataZoom||P.maxDataZoom,this.vectorSrc=t.vectorSrc,this._checkSourceId()}},{key:"setMap",value:function(t){return(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"setMap",this).call(this,t),t&&this._init(),this}},{key:"_init",value:function(){var t=this;this._createSource().then(function(){t.features.forEach(function(e){var n=new b.default({id:e.id||e.type+"_"+t.id,type:e.type,maxDataZoom:t.maxDataZoom,sourceId:t.layerSourceId,tileSize:256});n.filter=e.filter,t.appendChild(n)}),t._fire("layer",{})})}},{key:"_createSource",value:function(){var t=this,e=this._checkVectorSrc();return this.map.getSource(this.layerSourceId)?s.default.resolve():(this.map.addSource(this.layerSourceId,{tileSize:P.tileSize,minZoom:this.minZoom,maxZoom:this.maxZoom,minDataZoom:this.minDataZoom,maxDataZoom:this.maxDataZoom,type:E.SOURCE_TYPE.vector,data:{vectorSrc:e.vectorSrc||P.vectorSrc,batchVectorSrc:e.batchVectorSrc||P.batchVectorSrc},enc:!1}),this.map.layerResource.getStyleIdPromise().then(function(e){t.map.getSource(t.layerSourceId).setStyleId(e)},function(t){return console.warn("底图样式未能加载：",t),s.default.resolve()}))}},{key:"_checkSourceId",value:function(){if(this.layerSourceId)return void(this.layerSourceId=this.layerSourceId);var t=this.vectorSrc;return this.layerSourceMap=P.layerSourceMap||new r.default,P.layerSourceMap=this.layerSourceMap,Array.isArray(t)?void this._checkSourceIdUpdate(t.sort().toString()):"string"==typeof t?void this._checkSourceIdUpdate(t):void(this.layerSourceId=w.default.VECTOR_SOURCE_ID)}},{key:"_checkSourceIdUpdate",value:function(t){var e=this,n=!0;if(this.layerSourceMap.forEach(function(i,o){i===t&&(n=!1,e.layerSourceId=o)}),n){var i=w.default.VECTOR_SOURCE_ID+"_"+this.id;this.layerSourceMap.set(i,t),this.layerSourceId=i}}},{key:"_checkVectorSrc",value:function(){var t=this,e=this.vectorSrc,n={};return Array.isArray(e)&&e.forEach(function(e){n.vectorSrc=n.vectorSrc||[],n.batchVectorSrc=n.batchVectorSrc||[],n.vectorSrc.push(t._concatVectorSrc(e)),n.batchVectorSrc.push(t._concatVectorSrc(e))}),"string"==typeof e&&(n.vectorSrc=[this._concatVectorSrc(e,"vector")],n.batchVectorSrc=[this._concatVectorSrc(e,"batchvector")]),n}},{key:"_concatVectorSrc",value:function(t){return"batchvector"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"batchvector")?t+"?"+P.batchVectorSrc[0].split("?")[1]:t+"?"+P.vectorSrc[0].split("?")[1]}},{key:"_removeSource",value:function(){if(this.map){!this.map.findLayer(function(t){return t instanceof e})&&(this.map.removeSource(this.layerSourceId),P.layerSourceMap&&P.layerSourceMap.delete(this.layerSourceId),this.layerSourceMap=P.layerSourceMap)}}}]),e}(b.default);e.default=I;var k={base:[{type:T.BASE_LAYER_TYPE.base,filter:T.BASE_LAYER_TYPE.base},{type:T.BASE_LAYER_TYPE.ground,filter:T.BASE_LAYER_TYPE.ground}],arrow:[{type:T.BASE_LAYER_TYPE.arrow,filter:T.BASE_LAYER_TYPE.arrow}],building2d:[{type:T.BASE_LAYER_TYPE.building2d,filter:T.BASE_LAYER_TYPE.building3d}],building3d:[{type:T.BASE_LAYER_TYPE.building3d,filter:T.BASE_LAYER_TYPE.building3d}],point:[{type:T.BASE_LAYER_TYPE.point,filter:T.BASE_LAYER_TYPE.point},{type:T.BASE_LAYER_TYPE.text,filter:T.BASE_LAYER_TYPE.text}],label:[{type:T.BASE_LAYER_TYPE.label,filter:T.BASE_LAYER_TYPE.label},{type:T.BASE_LAYER_TYPE.text,filter:T.BASE_LAYER_TYPE.text}]}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(10),u=i(l),c=function(){function t(e,n){(0,r.default)(this,t),this.max=e,this.onRemove=n,this.reset()}return(0,s.default)(t,[{key:"reset",value:function(){var t=this;return u.default.forIn(this.data,function(e,n){t.onRemove(n)}),this.data={},this.order=[],this}},{key:"add",value:function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this}},{key:"has",value:function(t){return t in this.data}},{key:"keys",value:function(){return this.order}},{key:"get",value:function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e}},{key:"getWithoutRemoving",value:function(t){return this.has(t)?this.data[t]:null}},{key:"remove",value:function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this}},{key:"setMaxSize",value:function(t){for(this.max=t;this.order.length>this.max;){var e=this.get(this.order[0]);e&&this.onRemove(e)}return this}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=y.default.QMAPI_style+t;return a(e).then(function(n){var i=n.version,o=n.cacheJson;return u({styleId:t,version:i,serviceSrc:T.styleSrc,qosId:"st"}).then(function(n){if(n?l(e,n):n=o,!n)throw Error("未知错误：获取样式文件失败。");return(0,_.setBgColor)(t,n.data),n.data})}).catch(function(t){console.error(t)})}function r(t){var e=y.default.QMAPI_style_indoor+t;return a(e).then(function(n){var i=n.version,o=n.cacheJson;return u({styleId:t,version:i,serviceSrc:T.indoorStyleSrc,qosId:"in_st"}).then(function(t){return t?(l(e,t),t.data):o?o.data:null},function(t){return t&&console.error(t.status+": "+t.message),null})})}function a(t){return new m.default(function(e){E.support()?E.get(t,function(t){var n=JSON.parse(t)||null,i=n?n.version:-1;e({version:i,cacheJson:n})}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),e({version:-1}))})}function s(t,e){return new m.default(function(n){if(E.support()){(0,_.setBgColor)(e,t);var i=y.default.QMAPI_style+"config";E.set(i,(0,v.default)({data:t}),function(){n(!0)})}else console.error("兼容性错误：当前浏览器不支持LocalStorage。"),n(!1)})}function l(t,e){E.support()&&E.set(t,(0,v.default)(e))}function u(t){var e=t.styleId,n=t.version,i=void 0===n?-1:n,o=t.serviceSrc,r=void 0===o?T.styleSrc:o,a=t.qosId,s=void 0===a?"st":a,l=d(r,{id:e,version:i});return new m.default(function(t,n){w.getJSON(null,l,function(o,r,a){"in_st"===s?c({err:o,result:r,time:a,resolve:t,reject:n,styleId:e,version:i}):f({err:o,result:r,time:a,resolve:t,reject:n,styleId:e,version:i})})})}function c(t){var e=t.err,n=t.result,i=t.time,o=t.resolve,r=t.reject,a=t.styleId,s=t.version;if(!e&&n&&n.data){var l=!0;for(var u in n.data)if(n.data.hasOwnProperty(u)){l=!1;break}l?o(null):((0,x.qos)("in_st",{styleId:a,version:s,loadTime:i}),o(n))}else(0,x.qos)("in_st",{styleId:a,version:s,error:e&&e.status||0}),r(e||"未知错误：获取样式文件失败。")}function f(t){var e=t.err,n=t.result,i=t.time,o=t.resolve,r=t.reject,a=t.styleId,s=t.version;if(e||!n)(0,x.qos)("st",{styleId:a,version:s,error:e&&e.status||0}),r(e||"未知错误：获取样式文件失败。");else if(n&&0===n.isup)o(null);else{var l=n&&n.url;l||r("未返回cdn地址，获取样式失败。"),w.getJSON(null,l,function(t,n,l){t||!n?((0,x.qos)("st",{styleId:a,version:s,error:e&&e.status||0}),r(e||"未知错误：获取样式文件失败。")):((0,x.qos)("st",{styleId:a,version:s,loadTime:i+l}),o(n))})}}function d(t,e){var n=t;return S.default.forIn(e,function(t,e){n=n.replace("{"+t+"}",e)}),n}Object.defineProperty(e,"__esModule",{value:!0});var h=n(115),v=i(h),p=n(21),m=i(p);e.loadStyleFile=o,e.loadIndoorStyleFile=r,e.setStyleConfig=s,e.loadStyleFileFromServer=u;var _=n(490),g=n(117),y=i(g),x=n(42),b=n(10),S=i(b),w=n(78),E=n(85),T=n(25)},function(t,e,n){"use strict";function i(t,e){var n=(0,r.default)(t.getLat()),i=(0,r.default)(e.getLat());return 2*Math.asin(Math.sqrt(Math.pow(Math.sin((n-i)/2),2)+Math.cos(n)*Math.cos(i)*Math.pow(Math.sin(((0,r.default)(t.getLng())-(0,r.default)(e.getLng()))/2),2)))}Object.defineProperty(e,"__esModule",{value:!0});var o=n(126),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return(0,a.default)(t,e)*(n||l.default)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(384),a=i(r),s=n(294),l=i(s);e.default=o},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(93),p=i(v),m=n(332),_=i(m),g=n(26),y=n(42),x=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.onInit(t),n.dom=n.createDOM(),n.map=null,n.setMap(t.map),(0,y.statCn)("DOMOverlay"),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_addToMap",value:function(){this.map&&(this.map._overlayer.childs.domOverlayLayer.appendChild(this.dom),this.updateDOM(),this._listener=(0,g.throttleWithFrame)(this.updateDOM.bind(this)),this.map.on("move",this._listener),this.map.on("resize",this._listener),this.map.on("offset_changed",this._listener),this._onMapdestroy=this._onMapdestroy.bind(this),this.map.on("destroy",this._onMapdestroy))}},{key:"_onMapdestroy",value:function(){this.setMap(null)}},{key:"_removeFromMap",value:function(){this.map&&(this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.map.off("move",this._listener),this.map.off("resize",this._listener),this.map.off("offset_changed",this._listener),this.map.off("destroy",this._onMapdestroy),this._listener=null)}},{key:"getMap",value:function(){return this.map}},{key:"setMap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.map===t?this:!t||t instanceof _.default?(this._removeFromMap(),this.map=t,this._addToMap(),this):(console.error("类型错误: map参数类型错误，应为TMap.Map。"),this)}},{key:"destroy",value:function(){return this.onDestroy(),this.setMap(null),this.removeAllListeners(),this}},{key:"onInit",value:function(){}},{key:"onDestroy",value:function(){}},{key:"createDOM",value:function(){return document.createElement("div")}},{key:"updateDOM",value:function(){}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(65),s=i(a),l=n(10),u={color:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0, 0, 0, 0)",borderColor:"rgba(0, 0, 0, 0)",strokeColor:"rgba(0, 0, 0, 0)",borderWidth:0,size:14,scale:1,borderRadius:0,offset:new s.default(0,0),angle:0,alignment:"center",verticalAlignment:"middle"},c=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t),e=(0,l.extend)({},u,e),this.color=e.color,this.backgroundColor=e.backgroundColor,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth,this.strokeColor=e.strokeColor,this.size=e.size,this.width=e.width,this.height=e.height,this.padding=e.padding,this.borderRadius=e.borderRadius,this.scale=e.scale,this.offset=e.offset,this.angle=e.angle,this.alignment=e.alignment,this.verticalAlignment=e.verticalAlignment};e.default=c},function(t,e,n){"use strict";function i(){r.removeEventListener("DOMContentLoaded",i,!1),o.fireReady()}var o=[],r=document;o.isReady=!1,o._used=!1,o.ready=function(t){o.initReady(),o.isReady?t():o.push(t)},o.initReady=function(){if(!o._used){if(o._used=!0,"complete"===r.readyState||"interactive"===r.readyState)return o.fireReady();r.addEventListener("DOMContentLoaded",i,!1)}},o.fireReady=function(){if(!o.isReady){if(!r.body)return setTimeout(o.fireReady,16);if(o.isReady=!0,o.length)for(var t,e=0;t=o[e];e++)t()}},e.domReady=o.ready},function(t,e,n){"use strict";function i(t,e){if(!t.unprojectFromContainer(e))return!1;var n=!0,i=t.renderEngine.camera.getFogEdge()[1]+.15;if(i<1){var o=(1-i)*t.transform.height/2;e.y<o&&(n=!1)}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.isResponsible=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(159),_=i(m),g=n(109),y=n(118),x=n(110),b=n(222),S=n(10),w=i(S),E=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new g.Store("buffer",128,16,b.deleteInstanceCacllback),n.commonUniformList=["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uRelativeCenter"],n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){if(t&&n){var o=this.gl;o.useProgram(o.program),this.setUniforms(t,e,n,i);var r=this.setBuffers(t);o.drawElements(o.TRIANGLES,r.index.length,r.index.type,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null)}}},{key:"setBuffers",value:function(t){var e=this.gl,n=this.store,i=t.uid,o=!1;if(n){n.exist(i)?this.isBufferChanged(n.get(i),t)&&(o=!0):n.set(i,this.createBuffer(t));var r=n.get(i);return w.default.forIn(r,function(n,i){var r=i.buffer,a=i.location,s=i.size,l=i.type;r.bind(),o&&(r.bufferData(t[n],{usage:e.DYNAMIC_DRAW}),i.data=t[n]),"index"!==n&&r.pointToAttrib({location:a,size:s,type:l})}),r}}},{key:"setUniforms",value:function(t,e,n,i){var o=this.gl,r=e.center,a=e.zoom,s=1/(0,x.getSpatialResolution)(a),l=i.distanceScales||e.getDistanceScales(),u=(0,y.splitLatLngNumber)(r.lat),c=(0,y.splitLatLngNumber)(r.lng),f={latPart:(0,y.splitLatLngNumber)(t.center.lat),lngPart:(0,y.splitLatLngNumber)(t.center.lng)};o.uniformMatrix4fv(this.uMatrix,!1,n.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,s,s,s),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,e.width,e.height),o.uniform4f(this.uRelativeCenter,f.lngPart.high,f.latPart.high,f.lngPart.low,f.latPart.low)}},{key:"destroy",value:function(){this.commonUniformList=null,(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(_.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(507),f=i(c),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-1,1,0,1]),h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,t);var i=n.id,o=void 0===i?"pass":i;this.id=o,this.gl=e,this.props={},(0,r.default)(this.props,n)}return(0,u.default)(t,[{key:"setProps",value:function(t){(0,r.default)(this.props,t)}},{key:"render",value:function(t){var e=t.inputBuffer,n=t.outputBuffer,i=t.preserve,o=void 0!==i&&i,r=t.colorIndex,a=void 0===r?0:r,s=this.gl;n?n.bind(s):s.frameBuffer&&s.frameBuffer.unbind(),o||s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._renderPass({inputBuffer:e,colorIndex:a})}},{key:"destroy",value:function(){this._onDestroy(),this._painter&&this._painter.destroy(),this.id=null,this.gl=null,this.props=null}},{key:"_onDestroy",value:function(){}},{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.gl;this._painter||(this._painter=new f.default({gl:n})),e.color.bind(n),this._painter.preDraw(),this._painter.draw({matrix:{elements:d},size:{width:2,height:2},texInfo:{s:0,t:0,w:1,h:1},opacity:1})}}]),t}();e.default=h},function(t,e,n){"use strict";function i(t){return Math.pow(2,Math.ceil((0,r.default)(t)))}Object.defineProperty(e,"__esModule",{value:!0});var o=n(303),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.getPowerOf2=i,e.default={extendCanvasToPow2:function(t,e){function n(t){if(t<2)return!1;var e=(0,r.default)(t);return e===~~e}return e=e||1,t&&t.isPow2&&1===e?t:n(t.width)&&n(t.height)&&1===e?(t.isPow2=!0,t):function(t,e){var n=document.createElement("canvas"),o=n.getContext("2d");return n.width=i(t.width*e),n.height=i(t.height*e),o.drawImage(t,0,0,n.width,n.height),n.isPow2=!0,n}(t,e)}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(470),u=i(l),c=n(242).default,f=n(65),d=n(45),h=n(10),v=c[0],p=function(){function t(){(0,r.default)(this,t),this.a=new f(128,128),this.b=256/360,this.c=256/(2*Math.PI),this.d=!0}return(0,s.default)(t,[{key:"fromLatLngToPoint",value:function(t){var e=new f(0,0),n=this.a;e.x=n.x+t.lng*this.b;var i=h.clamp(Math.sin(h.degreeToRadian(t.lat)),-(1-1e-15),1-1e-15);return e.y=n.y+.5*Math.log((1+i)/(1-i))*-this.c,e.z=t.height*this.c/v*Math.cos(h.degreeToRadian(t.lat)),e}},{key:"fromPointToLatLng",value:function(t){var e=this.a,n=h.radianToDegree(2*Math.atan(Math.exp((t.y-e.y)/-this.c))-Math.PI/2),i=(t.x-e.x)/this.b,o=(t.z||0)*v*Math.cos(h.degreeToRadian(n))/this.c;return new d(n,i,o,!0)}},{key:"latLngToCoord",value:function(t,e){var n=this.fromLatLngToPoint(t);if(n){var i=e,o=Math.pow(2,i);n.x=n.x*o,n.y=n.y*o,n.z=n.z*o}return n}},{key:"coordToLatLng",value:function(t,e){var n=e,i=Math.pow(2,n),o=new u.default(t.x/i,t.y/i,(t.z||0)/i);return this.fromPointToLatLng(o)}}]),t}();t.exports=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.HEX_REG=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,e.RGB_REG=/^rgb\((\d+,?\s*){3}\)$/,e.RGBA_REG=/^rgba\((\d+,?\s*){3},\s*[0-9.]+\)$/},function(t,e,n){"use strict";function i(t,e,n){return t*(1-n)+e*n}function o(t,e){t=a.default.wrap(t,0,360);var n=Math.abs(t,e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t}Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),a=function(t){return t&&t.__esModule?t:{default:t}}(r);i.number=i,i.vec2=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n)]},i.color=function(t,e,n){return[i(t[0],e[0],n),i(t[1],e[1],n),i(t[2],e[2],n),i(t[3],e[3],n)]},i.array=function(t,e,n){return t.map(function(t,o){return i(t,e[o],n)})},i.latlng=function(t,e,n){return[i(t.getLat(),e.getLat(),n),i(t.getLng(),e.getLng(),n)]},i.rotation=function(t,e,n){return e=o(e,t),i(t,e,n)},e.default=i},function(t,e,n){t.exports={default:n(406),__esModule:!0}},function(t,e,n){var i=function(){return this}()||Function("return this")(),o=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,r=o&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(399),o)i.regeneratorRuntime=r;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";function n(t,e,n,i){var r=e&&e.prototype instanceof o?e:o,a=Object.create(r.prototype),s=new h(i||[]);return a._invoke=u(t,n,s),a}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function r(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(n,o,r,a){var s=i(t[n],t,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&g.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,r,a)},function(t){e("throw",t,r,a)}):Promise.resolve(u).then(function(t){l.value=t,r(l)},a)}a(s.arg)}function n(t,n){function i(){return new Promise(function(i,o){e(t,n,i,o)})}return o=o?o.then(i,i):i()}var o;this._invoke=n}function u(t,e,n){var o=T;return function(r,a){if(o===P)throw new Error("Generator is already running");if(o===I){if("throw"===r)throw a;return p()}for(n.method=r,n.arg=a;;){var s=n.delegate;if(s){var l=c(s,n);if(l){if(l===k)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===T)throw o=I,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=P;var u=i(t,e,n);if("normal"===u.type){if(o=n.done?I:A,u.arg===k)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=I,n.method="throw",n.arg=u.arg)}}}function c(t,e){var n=t.iterator[e.method];if(n===m){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=m,c(t,e),"throw"===e.method))return k;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var o=i(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,k;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=m),e.delegate=null,k):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,k)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function v(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=m,e.done=!0,e};return i.next=i}}return{next:p}}function p(){return{value:m,done:!0}}var m,_=Object.prototype,g=_.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},x=y.iterator||"@@iterator",b=y.asyncIterator||"@@asyncIterator",S=y.toStringTag||"@@toStringTag",w="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(w&&(t.exports=E));E=e.regeneratorRuntime=w?t.exports:{},E.wrap=n;var T="suspendedStart",A="suspendedYield",P="executing",I="completed",k={},L={};L[x]=function(){return this};var M=Object.getPrototypeOf,C=M&&M(M(v([])));C&&C!==_&&g.call(C,x)&&(L=C);var R=a.prototype=o.prototype=Object.create(L);r.prototype=R.constructor=a,a.constructor=r,a[S]=r.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===r||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,S in t||(t[S]="GeneratorFunction")),t.prototype=Object.create(R),t},E.awrap=function(t){return{__await:t}},s(l.prototype),l.prototype[b]=function(){return this},E.AsyncIterator=l,E.async=function(t,e,i,o){var r=new l(n(t,e,i,o));return E.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},s(R),R[S]="Generator",R[x]=function(){return this},R.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},E.values=v,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return r.type="throw",r.arg=t,n.next=e,i&&(n.method="next",n.arg=m),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=g.call(o,"catchLoc"),s=g.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&g.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,k):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),k},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),k}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;d(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=m),k}}}(function(){return this}()||Function("return this")())},,,,,,function(t,e,n){var i=n(2),o=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,n){n(411),t.exports=n(2).Math.fround},function(t,e,n){n(412),t.exports=n(2).Number.isFinite},function(t,e,n){n(414),t.exports=n(2).Object.values},function(t,e,n){n(75),n(33),n(39),n(413),n(417),n(416),n(415),t.exports=n(2).Set},function(t,e,n){var i=n(309),o=Math.pow,r=o(2,-52),a=o(2,-23),s=o(2,127)*(2-a),l=o(2,-126),u=function(t){return t+1/r-1/r};t.exports=Math.fround||function(t){var e,n,o=Math.abs(t),c=i(t);return o<l?c*u(o/l/a)*l*a:(e=(1+a/r)*o,n=e-(e-o),n>s||n!=n?c*(1/0):c*n)}},function(t,e,n){var i=n(6);i(i.S,"Math",{fround:n(410)})},function(t,e,n){var i=n(6),o=n(8).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,n){"use strict";var i=n(258),o=n(138);t.exports=n(244)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(o(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){var i=n(6),o=n(135)(!1);i(i.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){n(246)("Set")},function(t,e,n){n(247)("Set")},function(t,e,n){var i=n(6);i(i.P+i.R,"Set",{toJSON:n(259)("Set")})},function(t,e,n){"use strict";var i=n(434)(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},function(t,e,n){"use strict";var i=n(116),o=n(268),r=n(77);t.exports=function(t){for(var e=i(this),n=r(e.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,u=void 0===l?n:o(l,n);u>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var i=n(92),o=n(267);t.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var i=n(53),o=n(52).document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(69)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var i=n(52).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(53),o=n(432).set;t.exports=function(t,e,n){var r,a=e.constructor;return a!==n&&"function"==typeof a&&(r=a.prototype)!==n.prototype&&i(r)&&o&&o(t,r),t}},function(t,e,n){var i=n(283),o=n(69)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[o]===t)}},function(t,e,n){var i=n(53),o=n(239),r=n(69)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==o(t))}},function(t,e,n){"use strict";var i=n(262),o=n(9),r=n(142),a=n(151),s=n(283),l=n(524),u=n(286),c=n(265),f=n(69)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,p,m,_){l(n,e,v);var g,y,x,b=function(t){if(!d&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",w="values"==p,E=!1,T=t.prototype,A=T[f]||T["@@iterator"]||p&&T[p],P=A||b(p),I=p?w?b("entries"):P:void 0,k="Array"==e?T.entries||A:A;if(k&&(x=c(k.call(new t)))!==Object.prototype&&x.next&&(u(x,S,!0),i||"function"==typeof x[f]||a(x,f,h)),w&&A&&"values"!==A.name&&(E=!0,P=function(){return A.call(this)}),i&&!_||!d&&!E&&T[f]||a(T,f,P),s[e]=P,s[S]=h,p)if(g={values:w?P:b("values"),keys:m?P:b("keys"),entries:I},_)for(y in g)y in T||r(T,y,g[y]);else o(o.P+o.F*(d||E),e,g);return g}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){"use strict";var i=n(344),o=RegExp.prototype.exec,r=String.prototype.replace,a=o,s=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=void 0!==/()??/.exec("")[1];(s||l)&&(a=function(t){var e,n,a,u,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),s&&(e=c.lastIndex),a=o.call(c,t),s&&a&&(c.lastIndex=c.global?a.index+a[0].length:e),l&&a&&a.length>1&&r.call(a[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(a[u]=void 0)}),a}),t.exports=a},function(t,e,n){var i=n(53),o=n(50),r=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(227)(Function.call,n(228).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},function(t,e,n){var i=n(350)("keys"),o=n(269);t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,n){var i=n(230),o=n(240);t.exports=function(t){return function(e,n){var r,a,s=String(o(e)),l=i(n),u=s.length;return l<0||l>=u?t?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):r:t?s.slice(l,l+2):a-56320+(r-55296<<10)+65536)}}},function(t,e,n){var i=n(427),o=n(240);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},function(t,e,n){"use strict";var i=n(230),o=n(240);t.exports=function(t){var e=String(o(this)),n="",r=i(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i,o,r,a=n(227),s=n(521),l=n(424),u=n(421),c=n(52),f=c.process,d=c.setImmediate,h=c.clearImmediate,v=c.MessageChannel,p=c.Dispatch,m=0,_={},g=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){g.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++m]=function(){s("function"==typeof t?t:Function(t),e)},i(m),m},h=function(t){delete _[t]},"process"==n(239)(f)?i=function(t){f.nextTick(a(g,t,1))}:p&&p.now?i=function(t){p.now(a(g,t,1))}:v?(o=new v,r=o.port2,o.port1.onmessage=y,i=a(r.postMessage,r,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){"use strict";function i(t,e,n){var i,o,r,a=new Array(n),s=8*n-e-1,l=(1<<s)-1,u=l>>1,c=23===e?z(2,-24)-z(2,-77):0,f=0,d=t<0||0===t&&1/t<0?1:0;for(t=D(t),t!=t||t===B?(o=t!=t?1:0,i=l):(i=V(F(t)/U),t*(r=z(2,-i))<1&&(i--,r*=2),t+=i+u>=1?c/r:c*z(2,1-u),t*r>=2&&(i++,r/=2),i+u>=l?(o=0,i=l):i+u>=1?(o=(t*r-1)*z(2,e),i+=u):(o=t*z(2,u-1)*z(2,e),i=0));e>=8;a[f++]=255&o,o/=256,e-=8);for(i=i<<e|o,s+=e;s>0;a[f++]=255&i,i/=256,s-=8);return a[--f]|=128*d,a}function o(t,e,n){var i,o=8*n-e-1,r=(1<<o)-1,a=r>>1,s=o-7,l=n-1,u=t[l--],c=127&u;for(u>>=7;s>0;c=256*c+t[l],l--,s-=8);for(i=c&(1<<-s)-1,c>>=-s,s+=e;s>0;i=256*i+t[l],l--,s-=8);if(0===c)c=1-a;else{if(c===r)return i?NaN:u?-B:B;i+=z(2,e),c-=a}return(u?-1:1)*i*z(2,c-e)}function r(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function a(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function l(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function u(t){return i(t,52,8)}function c(t){return i(t,23,4)}function f(t,e,n){A(t[k],e,{get:function(){return this[n]}})}function d(t,e,n,i){var o=+n,r=E(o);if(r+e>t[j])throw N(L);var a=t[Y]._b,s=r+t[G],l=a.slice(s,s+e);return i?l:l.reverse()}function h(t,e,n,i,o,r){var a=+n,s=E(a);if(s+e>t[j])throw N(L);for(var l=t[Y]._b,u=s+t[G],c=i(+o),f=0;f<e;f++)l[u+f]=c[r?f:e-f-1]}var v=n(52),p=n(91),m=n(262),_=n(351),g=n(151),y=n(284),x=n(51),b=n(282),S=n(230),w=n(77),E=n(539),T=n(264).f,A=n(92).f,P=n(419),I=n(286),k="prototype",L="Wrong index!",M=v.ArrayBuffer,C=v.DataView,R=v.Math,N=v.RangeError,B=v.Infinity,O=M,D=R.abs,z=R.pow,V=R.floor,F=R.log,U=R.LN2,Y=p?"_b":"buffer",j=p?"_l":"byteLength",G=p?"_o":"byteOffset";if(_.ABV){if(!x(function(){M(1)})||!x(function(){new M(-1)})||x(function(){return new M,new M(1.5),new M(NaN),"ArrayBuffer"!=M.name})){M=function(t){return b(this,M),new O(E(t))};for(var Z,H=M[k]=O[k],W=T(O),X=0;W.length>X;)(Z=W[X++])in M||g(M,Z,O[Z]);m||(H.constructor=M)}var Q=new C(new M(2)),q=C[k].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||y(C[k],{setInt8:function(t,e){q.call(this,t,e<<24>>24)},setUint8:function(t,e){q.call(this,t,e<<24>>24)}},!0)}else M=function(t){b(this,M,"ArrayBuffer");var e=E(t);this._b=P.call(new Array(e),0),this[j]=e},C=function(t,e,n){b(this,C,"DataView"),b(t,M,"DataView");var i=t[j],o=S(e);if(o<0||o>i)throw N("Wrong offset!");if(n=void 0===n?i-o:w(n),o+n>i)throw N("Wrong length!");this[Y]=t,this[G]=o,this[j]=n},p&&(f(M,"byteLength","_l"),f(C,"buffer","_b"),f(C,"byteLength","_l"),f(C,"byteOffset","_o")),y(C[k],{getInt8:function(t){return d(this,1,t)[0]<<24>>24},getUint8:function(t){return d(this,1,t)[0]},getInt16:function(t){var e=d(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=d(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return r(d(this,4,t,arguments[1]))},getUint32:function(t){return r(d(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return o(d(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return o(d(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){h(this,1,t,a,e)},setUint8:function(t,e){h(this,1,t,a,e)},setInt16:function(t,e){h(this,2,t,s,e,arguments[2])},setUint16:function(t,e){h(this,2,t,s,e,arguments[2])},setInt32:function(t,e){h(this,4,t,l,e,arguments[2])},setUint32:function(t,e){h(this,4,t,l,e,arguments[2])},setFloat32:function(t,e){h(this,4,t,c,e,arguments[2])},setFloat64:function(t,e){h(this,8,t,u,e,arguments[2])}});I(M,"ArrayBuffer"),I(C,"DataView"),g(C[k],_.VIEW,!0),e.ArrayBuffer=M,e.DataView=C},function(t,e,n){e.f=n(69)},function(t,e,n){var i=n(315),o=n(69)("iterator"),r=n(283);t.exports=n(84).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||r[i(t)]}},function(t,e,n){"use strict";var i=n(261),o=n(525),r=n(283),a=n(152);t.exports=n(428)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){!function(){var e=t,n=e.lib,i=n.Base,o=e.enc,r=o.Utf8,a=e.algo;a.HMAC=i.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),a=this._iKey=e.clone(),s=o.words,l=a.words,u=0;u<n;u++)s[u]^=1549556828,l[u]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})}()})},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,o=n.Hasher,r=e.algo,a=[],s=r.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],s=n[3],l=n[4],u=0;u<80;u++){if(u<16)a[u]=0|t[e+u];else{var c=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=c<<1|c>>>31}var f=(i<<5|i>>>27)+l+a[u];f+=u<20?1518500249+(o&r|~o&s):u<40?1859775393+(o^r^s):u<60?(o&r|o&s|r&s)-1894007588:(o^r^s)-899497514,l=s,s=r,r=o<<30|o>>>2,o=i,i=f}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=o._createHelper(s),e.HmacSHA1=o._createHmacHelper(s)}(),t.SHA1})},,,,,function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(t&&e)return e.y-t.y<=x&&e.x-t.x<=x}var r=n(27),a=i(r),s=n(0),l=i(s),u=n(1),c=i(u),f=n(733),d=i(f),h=n(145),v=n(65),p=n(93),m=n(26),_=n(10),g=_.forIn,y={scrollZoom:n(735),touchZoomRotate:n(737),touchTilt:n(736),doubleClickZoom:n(730),dragRotate:n(732),dragPan:n(731),longPress:n(734)},x=10,b=function(){function t(e,n){(0,l.default)(this,t),e.handler||(this.members=[e],this.map=e,this.eventHandlers=[],this.eventHandlers.push(m.on(window,"resize",this.onWindowResize.bind(this))),this.el=e.getContainer(),this.rl=e.getRenderContainer(),this.transform=e.transform,this.controlManager=e.controlManager,this.idleHandler=new d.default(this.transform),this.contextMenuEvent=null,this.mouseDown=!1,this.startPos=null,this.startTouchPoints=null,this.tapped=null,g(y,function(t,i){e[t]=new i(e,n),n&&n.disInteractive||e[t].enable()}),this.eventHandlers.push(m.on(this.controlManager,{control_added:function(t){e._fire("control_added",t,!0)},control_removed:function(t){e._fire("control_removed",t,!0)}})),this.eventHandlers.push(m.on(this.idleHandler,"idle",function(){e._fire("idle",null,!0)})),this.eventHandlers.push(m.on(e.canvasContainer,{webglcontextlost:e._onContextError.bind(e,"lost"),webglcontaxtrestored:e._onContextError.bind(e,"restored")})),this.eventHandlers.push(m.on(this.el,{mouseout:this.onMouseOut.bind(this),mousedown:this.onMouseDown.bind(this),mouseup:this.onMouseUp.bind(this),mousemove:this.onMouseMove.bind(this),touchstart:this.onTouchStart.bind(this),touchend:this.onTouchEnd.bind(this),touchmove:this.onTouchMove.bind(this),touchcancel:this.onTouchCancel.bind(this),click:this.onClick.bind(this),dblclick:this.onDblClick.bind(this),contextmenu:this.onContextMenu.bind(this)})))}return(0,c.default)(t,[{key:"destroy",value:function(){var t=this;g(y,function(e){t.map[e]&&(t.map[e].disable(),delete t.map[e])}),this.eventHandlers.forEach(function(t){t&&t.remove&&t.remove()}),this.members=null,this.map=null,this.eventHandlers=[],this.el=null,this.rl=null,this.transform=null,this.idleHandler=null,this.contextMenuEvent=null,this.mouseDown=!1,this.startPos=null,this.tapped=null}},{key:"onWindowResize",value:function(){var t=this.rl.clientWidth,e=this.rl.clientHeight;this.map.resize(t,e)}},{key:"onMouseOut",value:function(t){this.fireMouseEvent("mouseout",t)}},{key:"onMouseDown",value:function(t){this.map.stopMoving(),this.startPos=h.mousePos(this.el,t),this.fireMouseEvent("mousedown",t),this.mouseDown=!0}},{key:"onMouseUp",value:function(t){if(this.contextMenuEvent&&!this.rotating&&this.fireMouseEvent("contextmenu",this.contextMenuEvent),this.contextMenuEvent=null,this.mouseDown=!1,this.fireMouseEvent("mouseup",t),t&&2===t.button){var e=h.mousePos(this.el,t);this.startPos&&e.equals(this.startPos)&&this.fireMouseEvent("rightclick",t)}}},{key:"onMouseMove",value:function(t){if(!(this.map.dragPan&&this.map.dragPan.isActive()||this.map.dragRotate&&this.map.dragRotate.isActive())){for(var e=t.toElement||t.target;e&&e!==this.el;)e=e.parentNode;e===this.el&&this.fireMouseEvent("mousemove",t)}}},{key:"onTouchStart",value:function(t){if(t.preventDefault(),this.map.stopMoving(),this.fireTouchEvent("touchstart",t),t.touches&&!(t.touches.length>1)){var e=this.startTouchPoints;if(this.startTouchPoints=h.touchPos(this.el,t),this.tapped){clearTimeout(this.tapped),this.tapped=null;var n=e&&e[0],i=this.startTouchPoints&&this.startTouchPoints[0];n&&i&&(this.maybeDoubleTap=o(n,i)),this.tapped=setTimeout(this.onTouchTimeout.bind(this),300)}else this.tapped=setTimeout(this.onTouchTimeout.bind(this),300)}}},{key:"onTouchMove",value:function(t){this.fireTouchEvent("touchmove",t);var e=this.startTouchPoints[0],n=h.touchPos(this.el,t)[0];this.maybeDoubleTap&&e&&n&&(this.maybeDoubleTap=o(e,n))}},{key:"onTouchEnd",value:function(t){var e=this;this.fireTouchEvent("touchend",t),setTimeout(function(){if(e.tapped){var n=e.startTouchPoints[0],i=h.touchPos(e.el,t)[0];if(n&&i){var r=o(n,i);r&&e.fireTouchEvent("click",t),r&&e.maybeDoubleTap&&setTimeout(function(){e.fireTouchEvent("dblclick",t),e.maybeDoubleTap=!1},50)}}},50)}},{key:"onTouchCancel",value:function(t){this.maybeDoubleTap=!1,this.fireTouchEvent("touchcancel",t)}},{key:"onTouchTimeout",value:function(){this.maybeDoubleTap=!1,this.tapped=null}},{key:"onClick",value:function(t){var e=h.mousePos(this.el,t);this.startPos&&e.dist(this.startPos)<x&&this.fireMouseEvent("click",t)}},{key:"onDblClick",value:function(t){this.fireMouseEvent("dblclick",t),t.preventDefault()}},{key:"onContextMenu",value:function(t){var e=this.map.dragRotate&&this.map.dragRotate.isActive();this.mouseDown||e?this.mouseDown&&(this.contextMenuEvent=t):this.fireMouseEvent("contextmenu",t),t.preventDefault()}},{key:"fireMouseEvent",value:function(t,e){var n=h.mousePos(this.el,e),i={latLng:this.map.unprojectFromContainer(n),point:n,originalEvent:e};"click"===t&&(i.poi=this.map._getPoiInfo(n));var o=!0,r=!1,s=void 0;try{for(var l,u=(0,a.default)(this.members);!(o=(l=u.next()).done);o=!0){l.value._fire(t,i)}}catch(t){r=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw s}}}},{key:"fireTouchEvent",value:function(t,e){var n=this,i=h.touchPos(this.el,e),o=i.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new v(0,0)),r={latLng:this.map.unprojectFromContainer(o),point:o,latLngs:i.map(function(t){return n.map.unprojectFromContainer(t)},this),points:i,originalEvent:e};"click"===t&&(r.poi=this.map._getPoiInfo(i[0]));var s=!0,l=!1,u=void 0;try{for(var c,f=(0,a.default)(this.members);!(s=(c=f.next()).done);s=!0){c.value._fire(t,r)}}catch(t){l=!0,u=t}finally{try{!s&&f.return&&f.return()}finally{if(l)throw u}}}},{key:"registe",value:function(t){if(!(t instanceof p))throw new Error("illegal event type!");var e=!0,n=!1,i=void 0;try{for(var o,r=(0,a.default)(this.members);!(e=(o=r.next()).done);e=!0){if(o.value===t)return}}catch(t){n=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}this.members.push(t)}},{key:"cancel",value:function(t){if(!(t instanceof p))throw new Error("illegal event type!");for(var e=this.members,n=e.length-1;n>-1;n--)e[n]===t&&e.splice(n,1)}}]),t}();t.exports=b},function(t,e,n){"use strict";n(790),n(792),n(791),n(798),n(797),n(800),n(799),n(801),n(794),n(795),n(793),n(796),n(971),n(1014)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.INSTANCE_PARTS="\nattribute vec2 positions;\n        \nattribute vec3 instancePositions;\nattribute vec2 instancePositions64xyLow;\nattribute vec2 instanceSizes;\nattribute vec4 instanceInfos;\n\n\nattribute vec3 instancePickingColors;\nattribute vec4 instanceFrames;\nattribute vec3 instancePixelOffset;\n",e.UNIFORM_PARTS="\nuniform float u_sizeScale;\nuniform float u_sizeMinPixels;\nuniform float u_sizeMaxPixels;\nuniform vec2 u_textureDim;\nuniform float u_opacity;\nuniform float u_mapScale;\n\n",e.generateMainPart=function(t,e){return"\n    \n    vec2 imageSize = instanceFrames.zw;\n            \n    vec2 sizePixels = clamp(instanceSizes * u_sizeScale, vec2(u_sizeMinPixels), vec2(u_sizeMaxPixels));\n    \n    "+t+"\n\n    if (bool(instanceInfos.w))  {\n        vec4 center_proj = uMatrix * vec4(project_view_local_position_precision(instancePositions, instancePositions64xyLow.xy), 1.0);\n        vec2 center_screen = proj_position_to_screen(center_proj);\n        vec2 corner_screen = center_screen + pixelOffset * u_mapScale;\n    \n        gl_Position = screen_to_proj_position(corner_screen, center_proj.z, center_proj.w);\n    } else {\n        gl_Position = uMatrix * vec4(project_view_local_position_precision(instancePositions.xy, instancePositions64xyLow.xy) + pixelOffset, 0.0, 1.0);\n    }\n    \n    vTextureCoords = mix(\n        instanceFrames.xy,\n        instanceFrames.xy + imageSize,\n        (positions.xy + 1.0) / 2.0\n    ) / u_textureDim;\n    \n    vTextureCoords.y = 1.0 - vTextureCoords.y;\n    \n\n    "+e+"\n    vColor = picking_getFinalColor(vColor, instancePickingColors);\n    vOpacity = instancePixelOffset.z;\n    "}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154),o=n(291),r=n(290);e.default={v:"\n\t\t#define SHADER_NAME polygon-vertex-shader\n\n\t\tattribute vec2 vertexPositions;\n\t\t\n\t\tattribute float vertexValid;\n\t\tattribute vec3 positions;\n\t\tattribute vec2 positions64xyLow;\n\t\tattribute vec3 nextPositions;\n\t\tattribute vec2 nextPositions64xyLow;\n\t\tattribute float elevations;\n\t\tattribute vec4 fillColors;\n\t\tattribute vec4 lineColors;\n\t\tattribute vec3 pickingColors;\n\n\t\t"+i.UNIFORM_PART+"\n        \n\t\t"+o.PICK_UNIFORM+"\n\t\t\n\t\t"+r.LIGHT_UNIFORM+"\n\t\t\n\t\tuniform bool u_isSideVertex;\n\t\tuniform bool u_extruded;\n\t\tuniform bool u_isWireframe;\n\t\tuniform float u_elevationScale;\n\t\tuniform float u_opacity;\n\t\t\n\t\tvarying vec4 vColor;\n\t\tvarying float isValid;\n\n\t\t"+r.LIGHT_VARYING+"\n\n\t\t"+i.PROJECTION_PART+"\n        \n\t\t"+o.PICK_FUNCTION+"\n\t\t\n\t\t"+r.LIGHT_VERTEX+"\n\t\t"+r.LIGHT_FRAG+"\n\t\t\n\t\tvoid main(void) {\n\t\t\tvec3 pos;\n\t\t\tvec2 pos64xyLow;\n\t\t\tvec3 normal;\n\t\t\tvec4 colors = mix(fillColors, lineColors, float(u_isWireframe));\n\n\t\t\tfloat isSideVertex = float(u_isSideVertex);\n\t\t\tfloat extruded = float(u_extruded);\n\n\t\t\tpos = mix(\n\t\t\t\tpositions,\n\t\t\t\t\n\t\t\t\tmix(positions, nextPositions, vertexPositions.x),\n\t\t\t\tisSideVertex\n\t\t\t);\n\t\t\tpos64xyLow = mix(\n\t\t\t\tpositions64xyLow,\n\t\t\t\tmix(positions64xyLow, nextPositions64xyLow, vertexPositions.x),\n\t\t\t\tisSideVertex\n\t\t\t);\n\t\t\tisValid = mix(1.0, vertexValid, isSideVertex);\n\t\t\tpos.z += mix(\n\t\t\t\t0.0,\n\t\t\t\tabs(elevations) * mix(1.0, vertexPositions.y, isSideVertex),\n\t\t\t\textruded\n\t\t\t) * u_elevationScale;\n\t\t\t\n\t\t\t\n\t\t\tpos.z = mix(pos.z, mix(pos.z - abs(elevations), pos.z, float(elevations >= 0.0)), extruded);\n\t\t\t\n\t\t\tvec3 local_position = project_view_local_position_precision(pos.xyz, pos64xyLow.xy);\n\t\t\tvec3 current_local_position = project_view_local_position_precision(positions.xyz, positions64xyLow.xy);\n\t\t\tvec3 next_local_position = project_view_local_position_precision(nextPositions.xyz, nextPositions64xyLow.xy);\n\n\t\t\tgl_Position = uMatrix * vec4(local_position, 1.0);\n\t\t\t\n\t\t\tnormal = mix(\n\t\t\t\tvec3(0., 0., 1.),\n\t\t\t\tmix(\n\t\t\t\t\tvec3(0.0, 0.0, 1.0),\n\t\t\t\t\tnormalize(\n\t\t\t\t\t\tcross(\n\t\t\t\t\t\t\tnormalize(vec3(next_local_position.xy - current_local_position.xy, 0.0)),\n\t\t\t\t\t\t\tvec3(0.0, 0.0, 1.0)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tfloat(u_isSideVertex && !u_isWireframe)\n\t\t\t\t),\n\t\t\t\textruded\n\t\t\t);\n\n\t\t\tlighting_apply_on_vertex(local_position.xyz, normal, mat4(1.0));\n\t\t\tvec4 color = vec4(colors.rgb, colors.a * u_opacity) / 255.0;\n\t\t\tvec4 lightingColor = mix(\n\t\t\t\tcolor,\n\t\t\t\tlighting_apply_on_color(color),\n\t\t\t\t\n\t\t\t\textruded\n\t\t\t);\n\t\t\tvColor = picking_getFinalColor(lightingColor, pickingColors);\n\t\t}\n\t",f:"\n\t\t#define SHADER_NAME polygon-fragment-shader\n\n\t\tprecision highp float;\n\t\t\n\t\tvarying vec4 vColor;\n\t\tvarying float isValid;\n\t\t\n\t\tvoid main(void) {\n\t\t\tif (isValid < 0.5) {\n\t\t\t\tdiscard;\n\t\t\t}\n\t\t\tgl_FragColor = vColor;\n\t\t}\n\t",name:"polygon"}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(10),u=i(l),c=function(){function t(e,n,i){(0,r.default)(this,t),this.worker=e,this.parent=n,this.mapId=i,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.worker.addEventListener("message",this.receive,!1)}return(0,s.default)(t,[{key:"send",value:function(t,e,n,i){var o=this;if(this.worker){var r=n?u.default.uniqueId()+":"+this.callbackID:null;if(this.callbackID+=1,n&&(this.callbacks[r]=n),e.dataFinishCallback){var a=e.dataFinishCallback;a.finishPromise().then(function(t){o.worker.postMessage({targetMapId:i,sourceMapId:o.mapId,type:a.type,id:String(r),data:t})}),e.dataFinishCallback=null}this.worker.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(r),data:e})}}},{key:"receive",value:function(t){var e=this,n=t.data,i=n.id,o=void 0;if(!n.targetMapId||this.mapId===n.targetMapId){var r=function(t,n,o){if(e.worker){var r=null;n&&n.transferableList&&(r=n.transferableList,delete n.transferableList),e.worker.postMessage({sourceMapId:e.mapId,type:"<response>",id:String(i),error:t,data:n,time:o},r||[])}};if("<response>"===n.type)o=this.callbacks[n.id],n.data&&n.data.baseData||delete this.callbacks[n.id],o&&o(n.error||null,n.data,n.time);else if(void 0!==n.id&&this.parent[n.type])this.parent[n.type](n.sourceMapId,n.data,r);else if(void 0!==n.id&&this.parent.getWorkerSource){var a=n.type.split("."),s=this.parent.getWorkerSource(n.sourceMapId,a[0]);s[a[1]](n.data,r)}}}},{key:"remove",value:function(){this.worker.removeEventListener("message",this.receive,!1),this.worker=null}}]),t}();t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i={};return d.default.forIn(t,function(t,o){if(e.hasOwnProperty(t)){var r=e[t];if(m.default.isNumber(o))i[t]="rotation"===t||"heading"===t?v.default.rotation(o,r,n):(0,v.default)(o,r,n);else if(o instanceof g.default){var a=v.default.latlng(o,r,n);i[t]=new g.default(a[0],a[1])}else o instanceof Array&&(i[t]=v.default.array(o,r,n))}}),i}function r(t,e){for(var n=1;n<t.length;n++){var i=t[n];if(i.percentage>=e){var r=t[n-1];return o(r,i,(e-r.percentage)/(i.percentage-r.percentage))}}}function a(t,e){t.sort(function(t,e){return t.percentage-e.percentage}),0!==t[0].percentage&&t.unshift((0,u.default)({},e,{percentage:0}));var n=t[t.length-1];1!==n.percentage&&t.push((0,u.default)({},n,{percentage:1}))}function s(){delete this._onAnimateFrame,delete this._onAnimateLoopEnd,delete this._onAnimateResume,delete this._onStop,delete this._onPause,delete this._abortTimeProcess}Object.defineProperty(e,"__esModule",{value:!0}),e.animatableMixin=void 0;var l=n(15),u=i(l),c=n(26),f=n(10),d=i(f),h=n(396),v=i(h),p=n(40),m=i(p),_=n(45),g=i(_);e.animatableMixin={_animateStatus:"done",_animate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=e.onFrame,i=void 0===n?function(){}:n,o=e.onEnd,l=void 0===o?function(){}:o,u=e.onLoop,c=void 0===u?function(){}:u,f=e.onStop,h=void 0===f?function(){}:f,v=e.onPause,p=void 0===v?function(){}:v,_=e.onResume,g=void 0===_?function(){}:_,y=this,x=arguments[2],b=x.duration,S=void 0===b?1e3:b,w=x.loop,E=void 0===w?1:w,T=x.initTick,A=void 0===T?0:T,P=x.id,I=void 0===P?d.default.uniqueId():P,k=x.easing,L=void 0===k?d.default.linearEase:k,M=arguments[3];if(this._isIdle()||this._stopAnimate(),t.length<2)return void console.error("参数错误：关键帧数量不足2："+t.length+"。");if(a(t,M),!((E=Number(E))<1)&&m.default.isNumber(E)){var C=1,R=A;return c.call(this,C),this._onAnimateLoopEnd=function(){C<E?(C+=1,c.call(y,C),y._startLoop(S,0)):(y._animateStatus="done",l.call(y),s.call(y))},this._onAnimateFrame=function(e){R=e,e=L(e);var n=r(t,e);i.call(y,{percentage:e,frame:n}),1===e&&y._onAnimateLoopEnd()},this._onAnimateResume=function(){y._startLoop(S,R),g.call(y)},this._onStop=h,this._onPause=p,this._animateStatus="doing",this._startLoop(S,A),i.call(this,{percentage:0,frame:t[0]}),I}},_startLoop:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._abortTimeProcess=(0,c.timed)(this._onAnimateFrame,null,t,this,e)},_stopAnimate:function(){this._isIdle()||(this._animateStatus="done",this._abortTimeProcess&&this._abortTimeProcess(),this._onStop&&this._onStop.call(this),s.call(this))},_pauseAnimate:function(){this._isAnimating()&&(this._animateStatus="paused",this._abortTimeProcess&&this._abortTimeProcess(),this._onPause&&this._onPause.call(this))},_resumeAnimate:function(){this._isPaused()&&(this._animateStatus="doing",this._onAnimateResume&&this._onAnimateResume())},_isAnimating:function(){return"doing"===this._animateStatus},_isPaused:function(){return"paused"===this._animateStatus},_isIdle:function(){return"done"===this._animateStatus}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(112),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default.key||""},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(251),p=i(v),m={Scale:{m:"米",km:"公里",mile:"英里",feet:"英尺"}},_=function(t,e){"[object String]"===Object.prototype.toString.call(t.innerText)?t.innerText=e:t.textContent=e},g="position:absolute;border:1px solid #ffffff;width:2px;height:6px;background:#000;font-size:0;line-height:0;",y=g+"border-bottom-width:0px;",x=g+"border-top-width:0px;",b=function(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=2?2:1,e*n},S=function(t){return Math.round(125*t)-10},w=function(t,e){if(t&&e)return Math.abs(156543.04*Math.cos(t.lat*Math.PI/180))/Math.pow(2,e)},E=function(t){var e=document.createElement("div");return"up"===t?(e.style.cssText=y+";border-right-width:0px",e.style.top="7px",e.style.height="9px"):"down"===t&&(e.style.cssText=x+";border-right-width:0px",e.style.top="17px",e.style.height="6px"),e.style.left=0,e.style.zIndex=0,e.className="tmap-scale-line",e},T=function(t){var e=document.createElement("div");return"up"===t?(e.style.cssText=y,e.style.top="0px"):"down"===t&&(e.style.cssText=x,e.style.top="9px"),e.style.left="81px",e.style.zIndex=2,e.className="tmap-scale-line",e},A=function(){var t=document.createElement("div");return t.style.cssText="position:absolute;border:1px solid #ffffff;width:2px;height:6px;background:#000;font-size:0;line-height:0;z-index:1;border-left-width:0px;",t.style.left="3px",t.style.width="80px",t.style.height="2px",t.style.top="6px",t.className="tmap-scale-line",t},P=function(t){var e=document.createElement("div"),n="up"===t?"top: 0px;":"bottom:-17px;";return e.style.cssText="position:relative; "+n+" font:11px arial,simsun;color:#000;text-align:left; left:5px;",e.className="tmap-scale-text",e},I=function(t){for(var e=[],n=["up","down"],i=0;i<2;i++){var o=n[i],r=document.createElement("div");r.style.cssText="width:100px;position:absolute;";var a=document.createElement("div");a.style.cssText="position:absolute;height:7px;width:84px;bottom:0px;";var s=E(o),l=T(o),u=A(),c=P(o);r.appendChild(s),a.appendChild(l),a.appendChild(u),r.appendChild(c),r.appendChild(a),e[o+"_rr"]=l,e[o+"_rl"]=s,e[o+"_rm"]=u,e[o+"_ruler"]=a,e[o+"_text"]=c,e[o+"_rl"]=s,t.appendChild(r)}var f=void 0;return{getMaxWidth:function(){return f},refresh:function(t){var n=void 0,i=void 0,o=e.up_rr,r=e.up_rm,a=e.up_text,s=e.up_ruler,l=e.down_rr,u=e.down_rm,c=e.down_ruler,d=e.down_text,h=b(t);n=S(h/t);var v=n;i=h<1e3?h+" "+m.Scale.m:h/1e3+" "+m.Scale.km,_(a,i),a.style.width="80px",r.style.width=n+"px",o.style.left=n+0+"px";var p=3.2808399*t,g=void 0,y=void 0,x=void 0;p>5280?(g=p/5280,y=b(g),n=S(y/g),i=y+" "+m.Scale.mile):(x=b(p),n=S(x/p),i=x+" "+m.Scale.feet),_(d,i);var w=parseInt(r.style.width,10),E=n>w?n:w;d.style.width="80px",u.style.width=E+"px",l.style.left=n+"px",u.style.visibility=n>w?"":"hidden",r.style.visibility=n>w?"hidden":"",c.style.zIndex=n>w?0:1,s.style.zIndex=n>w?1:0,f=Math.max(v,E)}}},k=function(t,e,n){var i=document.createElement("div");i.style.cssText="position:absolute;";var o=I(i),r=function(e,n){var i=w(e,n);if(i){var r=125*i;o.refresh(r),t.style.width=o.getMaxWidth()+10+"px"}};return r(e,n),t.style.width="100px",t.style.height="35px",t.appendChild(i),{node:t,updateZoom:r}},L=function(t,e){var n=document.createElement("div");return n.className="tmap-scale-control",k(n,t,e)},M=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(t){var e=t.center,n=t.zoom,i=document.createElement("div");return i.style.width="125px",i.style.height="35px",this.scaleControlView=L(e,n),i.appendChild(this.scaleControlView.node),i}},{key:"onAdd",value:function(){this.onZoomChange=this.onZoomChange.bind(this),this.map.on("zoom_changed",this.onZoomChange)}},{key:"onRemove",value:function(){this.map.off("zoom_changed",this.onZoomChange)}},{key:"onZoomChange",value:function(){var t=this.map.getCenter(),e=this.map.getZoom();this.scaleControlView.updateZoom(t,e)}}]),e}(p.default);e.default=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(251),p=i(v),m=n(296),_=n(295),g=n(26),y=i(g),x=n(117),b=n(1016),S=n(1031),w=n(1032),E=n(1030);n(1020);var T=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.clickStrategy={compassCircle:function(t){if("end"!==t&&"2D"!==n.getViewMode())return!n.getPitchable()&&n.getRotatable()?void(n.map&&n.map.easeTo({heading:0})):n.getPitchable()&&!n.getRotatable()?void(n.map&&n.map.easeTo({pitch:0})):void(n.map&&n.map.easeTo({pitch:0,heading:0,roll:0}))},rotateTop:function(t){"2D"!==n.getViewMode()&&n.getPitchable()&&n.map&&(n.pitchHandle||(n.pitchHandle=n.map.getNonStopPitch()),"start"===t?n.pitchHandle.begin(1):"end"===t&&n.pitchHandle.cancel())},rotateBottom:function(t){"2D"!==n.getViewMode()&&n.getPitchable()&&n.map&&(n.pitchHandle||(n.pitchHandle=n.map.getNonStopPitch()),"start"===t?n.pitchHandle.begin(-1):"end"===t&&n.pitchHandle.cancel())},rotateLeft:function(t){"2D"!==n.getViewMode()&&n.getRotatable()&&n.map&&(n.rotateHandle||(n.rotateHandle=n.map.getNonStopRotate()),"start"===t?n.rotateHandle.begin(1):"end"===t&&n.rotateHandle.cancel())},rotateRight:function(t){"2D"!==n.getViewMode()&&n.getRotatable()&&n.map&&(n.rotateHandle||(n.rotateHandle=n.map.getNonStopRotate()),"start"===t?n.rotateHandle.begin(-1):"end"===t&&n.rotateHandle.cancel())}},n._bindEvents(),n._construct(),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_construct",value:function(){this.compassImg=this.dom.querySelector(".compass-img"),this.compassCircle=this.dom.querySelector(".compass-circle"),this.rotateLeftImg=this.dom.querySelector(".rotate-left-img"),this.rotateRightImg=this.dom.querySelector(".rotate-right-img"),this.rotateTopImg=this.dom.querySelector(".rotate-top-img"),this.rotateBottomImg=this.dom.querySelector(".rotate-bottom-img"),this.compassImg.src=E,this.rotateLeftImg.src=w,this.rotateRightImg.src=w,this.rotateTopImg.src=S,this.rotateBottomImg.src=S}},{key:"createDOM",value:function(){var t=document.createElement("div"),e=(0,m.Template)(b,{});return t.innerHTML?t.insertAdjacentHTML("afterbegin",e):t.innerHTML=e,t}},{key:"onAdd",value:function(){var t=this.onRotateChange.bind(this),e=this.onPitchChange.bind(this);if(this.throttleRotateChange=y.default.throttle(t,50),this.throttlePitchChange=y.default.throttle(e,50),this.map.on("rotate",this.throttleRotateChange),this.map.on("pitch",this.throttlePitchChange),"3D"===this.getViewMode()){var n=this.map.getPitch(),i=this.map.getRotation();this.setButtonUseful(!0),this.checkButtonState(n),this.checkCompassState(n,i)}else this.setButtonUseful(!1)}},{key:"_bindEvents",value:function(){var t=this;this.handlers=[],["compass-circle","rotate-left","rotate-right","rotate-top","rotate-bottom"].forEach(function(e){t.handleListen(e)}),this.handlers.push((0,g.on)(this.dom,"dblclick",function(t){t.stopPropagation()})),this.handlers.push((0,g.on)(this.dom,"mousedown,mousemove,mouseup,mouseover,mouseleave,click,dblclick, touchstart,touchmove,touchend",function(t){t.stopPropagation()}))}},{key:"onRotateChange",value:function(t){var e=t.target.getRotation();this.compassImg.style.transform="rotateZ("+e+"deg)"}},{key:"onPitchChange",value:function(t){var e=Math.round(t.target.getPitch());this.compassCircle.style.transform="rotatex("+e+"deg)",this.checkButtonState(e)}},{key:"handleListen",value:function(t){var e=this,n=this.toCamel(t),i=this.dom.querySelector("."+t),o=new _.Finger(i,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0});this.handlers.push((0,g.on)(o,"touch-start",function(){e.clickStrategy[n]&&e.clickStrategy[n]("start")})),this.handlers.push((0,g.on)(o,"touch-end",function(){e.clickStrategy[n]&&e.clickStrategy[n]("end")}))}},{key:"toCamel",value:function(t){return t&&t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})}},{key:"setButtonUseful",value:function(t){if(!t){return void["rotate-bottom","rotate-top","rotate-left","rotate-right"].forEach(function(t){document.getElementsByClassName(t)[0].classList.add("unclickable-"+t),document.getElementsByClassName(t)[0].classList.remove("clickable-"+t)})}var e=this.getPitchable(),n=this.getRotatable(),i=[],o=[];e?i=i.concat(["rotate-bottom","rotate-top"]):o=o.concat(["rotate-bottom","rotate-top"]),n?i=i.concat(["rotate-left","rotate-right"]):o=o.concat(["rotate-left","rotate-right"]),i.forEach(function(t){document.getElementsByClassName(t)[0].classList.add("clickable-"+t),document.getElementsByClassName(t)[0].classList.remove("unclickable-"+t)}),o.forEach(function(t){document.getElementsByClassName(t)[0].classList.add("unclickable-"+t),document.getElementsByClassName(t)[0].classList.remove("clickable-"+t)})}},{key:"checkButtonState",value:function(t){0===t&&this.lastPitch!==t?(document.getElementsByClassName("rotate-bottom")[0].classList.add("unclickable-rotate-bottom"),document.getElementsByClassName("rotate-bottom")[0].classList.remove("clickable-rotate-bottom")):0===this.lastPitch&&0!==t?(document.getElementsByClassName("rotate-bottom")[0].classList.add("clickable-rotate-bottom"),document.getElementsByClassName("rotate-bottom")[0].classList.remove("unclickable-rotate-bottom")):80===t&&this.lastPitch!==t?(document.getElementsByClassName("rotate-top")[0].classList.add("unclickable-rotate-top"),document.getElementsByClassName("rotate-top")[0].classList.remove("clickable-rotate-top")):80===this.lastPitch&&80!==t&&(document.getElementsByClassName("rotate-top")[0].classList.add("clickable-rotate-top"),document.getElementsByClassName("rotate-top")[0].classList.remove("unclickable-rotate-top")),this.lastPitch=t}},{key:"checkCompassState",value:function(t,e){this.compassImg.style.transform="rotateZ("+e+"deg)",this.compassCircle.style.transform="rotatex("+t+"deg)"}},{key:"getViewMode",value:function(){return this.map.getViewMode()}},{key:"getPitchable",value:function(){return this.map.getPitchable()}},{key:"getRotatable",value:function(){return this.map.getRotatable()}},{key:"setViewMode",value:function(t){t===x.VIEW_MODE.MAP_2D?this.setButtonUseful(!1):this.setButtonUseful(!0)}},{key:"onRemove",value:function(){this.map.off("rotate",this.throttleRotateChange),this.map.off("pitch",this.throttlePitchChange),this.rotateHandle=null,this.lastPitch=null,this.throttleRotateChange=null,this.throttlePitchChange=null}},{key:"onDestroy",value:function(){this.handlers.forEach(function(t){t&&t.remove()})}}]),e}(p.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(251),p=i(v),m=n(296),_=n(295),g=n(26),y=n(1017),x=n(1033),b=n(1034);n(1021);var S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.dom.querySelector(".tmap-zoom-in-image").src=x,n.dom.querySelector(".tmap-zoom-out-image").src=b,n._bindEvents(),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(){var t=document.createElement("div"),e=(0,m.Template)(y,{});return t.innerHTML?t.insertAdjacentHTML("afterbegin",e):t.innerHTML=e,t}},{key:"setNumVisible",value:function(t){t?(this.dom.querySelector(".tmap-zoom-control").style.height="102px",this.dom.querySelector(".tmap-zoom-number").style.display="block",this.dom.querySelector(".tmap-zoom-spliter").style.display="none",this.dom.querySelector(".tmap-zoom-out").style.top="70px"):(this.dom.querySelector(".tmap-zoom-control").style.height="80px",this.dom.querySelector(".tmap-zoom-number").style.display="none",this.dom.querySelector(".tmap-zoom-spliter").style.display="block",this.dom.querySelector(".tmap-zoom-out").style.top="48px")}},{key:"_bindEvents",value:function(){var t=this;this.zoomIn=this.dom.querySelector(".tmap-zoom-in"),this.zoomOut=this.dom.querySelector(".tmap-zoom-out"),this.zoomNumberShow=this.dom.querySelector(".tmap-zoom-number"),this.updateZoomNumberDisplay=function(){t.zoomNumberShow.innerHTML=t.map.getZoom().toFixed(1)},this.handlers=[],this.zoomInFinger=new _.Finger(this.zoomIn,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0}),this.zoomOutFinger=new _.Finger(this.zoomOut,{preventDefaultMove:!0,preventDefaultEnd:!0,stopPropagation:!0}),this.handlers.push((0,g.on)(this.zoomInFinger,"tap",function(){t.map&&t.map.zoomBy(1)})),this.handlers.push((0,g.on)(this.zoomOutFinger,"tap",function(){t.map&&t.map.zoomBy(-1)})),this.handlers.push((0,g.on)(this.dom,"dblclick",function(t){t.stopPropagation()})),this.handlers.push((0,g.on)(this.dom,"mousedown,mousemove,mouseup,mouseover,mouseleave,click,dblclick, touchstart,touchmove,touchend",function(t){t.stopPropagation()}))}},{key:"onAdd",value:function(){this.updateZoomNumberDisplay(),this.map.on("zoom",this.updateZoomNumberDisplay)}},{key:"onRemove",value:function(){this.updateZoomNumberDisplay&&this.map.off("zoom",this.updateZoomNumberDisplay)}},{key:"onDestroy",value:function(){this.handlers.forEach(function(t){t&&t.remove()})}}]),e}(p.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(65),p=i(v),m=function(t){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,s.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n));return o.z=i,o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getZ",value:function(){return this.z}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n=(0,l.latLngToMercator)(t),i=[],o=0;o<=f;o++){var r=o*d,a=new c.default(0,0);a.x=Math.cos(r),a.y=Math.sin(r),i.push(a)}for(var s=i.length-1;s>=0;s--){var u=i[s];i.push(new c.default(u.y,u.x))}for(var h=i.length-1;h>=0;h--){var v=i[h];i.push(new c.default(-v.x,v.y))}for(var p=i.length-1;p>=0;p--){var m=i[p];i.push(new c.default(m.x,-m.y))}var _=t.getLat()*Math.PI/180;return i.map(function(t){return t.x=n.x+e/Math.cos(_)*t.x,t.y=n.y+e/Math.cos(_)*t.y,(0,l.mercatorToLatLng)(t)})}function r(t){return(0,s.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getCirclePath=o;var a=n(276),s=i(a),l=n(110),u=n(65),c=i(u),f=9,d=5*Math.PI/180;e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){for(var i=(0,l.latLngToMercator)(t),o=[],r=0;r<=f;r++){var a=r*d,s=new c.default(0,0);s.x=Math.cos(a),s.y=Math.sin(a),o.push(s)}for(var u=o.length-1;u>=0;u--){var h=o[u];o.push(new c.default(h.y,h.x))}for(var v=o.length-1;v>=0;v--){var p=o[v];o.push(new c.default(-p.x,p.y))}for(var m=o.length-1;m>=0;m--){var _=o[m];o.push(new c.default(_.x,-_.y))}var g=t.getLat()*Math.PI/180;return o.map(function(t){return t.x=i.x+e/Math.cos(g)*t.x,t.y=i.y+n/Math.cos(g)*t.y,(0,l.mercatorToLatLng)(t)})}function r(t){return(0,s.default)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getEllipsePath=o;var a=n(276),s=i(a),l=n(110),u=n(65),c=i(u),f=9,d=5*Math.PI/180;e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(45),u=i(l),c=n(155),f=i(c),d=function(){function t(e,n){(0,r.default)(this,t),this.markerCluster=e,this.gridSize=e.gridSize,this.averageCenter=e.averageCenter,this.zoom=n,this.center=null,this.geometries=[],this.geometrySet={},this.bounds=null}return(0,s.default)(t,[{key:"getClusterInfo",value:function(){return{center:this.center,geometries:this.geometries,bounds:this.bounds}}},{key:"getCenter",value:function(){return this.center}},{key:"add",value:function(t){if(!this.geometrySet[t.id]){if(this.center){if(this.averageCenter){var e=this.geometries.length+1,n=(this.center.lat*(e-1)+t.position.lat)/e,i=(this.center.lng*(e-1)+t.position.lng)/e;this.center=new u.default(n,i),this._calculateBounds()}}else this.center=t.position,this._calculateBounds();this.geometrySet[t.id]=t,this.geometries.push(t)}}},{key:"_calculateBounds",value:function(){var t=new f.default(this.center,this.center);this.bounds=this.markerCluster._getExtendedBounds(t,this.zoom)}},{key:"getBounds",value:function(){var t=new f.default(this.center,this.center);return this.geometries.forEach(function(e){t.extend(new u.default(e.position.lat,e.position.lng))}),t}},{key:"getGeometries",value:function(){return this.geometries}},{key:"isInBounds",value:function(t){return this.bounds.contains(t.position)}},{key:"remove",value:function(){this.markerCluster=null,this.gridSize=null,this.averageCenter=null,this.center=null,this.geometries=[],this.geometrySet={},this.bounds=null}}],[{key:"normalizeClusterInfo",value:function(t){return{center:u.default.convert(t.center),geometries:t.geometries.map(function(t){return t.position=u.default.convert(t.position),t}),bounds:f.default._convertFromWorker(t.bounds)}}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=/^[og]\s*(.+)?/,f=/^mtllib /,d=/^usemtl /,h=function(){function t(e){var n=e.index,i=e.name,o=void 0===i?"":i,r=e.mtllib,a=e.smooth,l=e.groupStart;(0,s.default)(this,t),this.index=n,this.name=o,this.mtllib=r,this.smooth=a,this.groupStart=l,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}return(0,u.default)(t,[{key:"clone",value:function(){return new t({index:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})}}]),t}(),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,s.default)(this,t),this.name=e,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0}return(0,u.default)(t,[{key:"startMaterial",value:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i=new h({index:this.materials.length,name:t,mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0});return this.materials.push(i),i}},{key:"currentMaterial",value:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]}},{key:"_finalize",value:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}}]),t}(),p=function(){function t(){(0,s.default)(this,t),this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}return(0,u.default)(t,[{key:"startObject",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.object&&!this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=e);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object=new v(t),this.object.fromDeclaration=e,n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)}},{key:"finalize",value:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)}},{key:"parseVertexIndex",value:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)}},{key:"parseNormalIndex",value:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)}},{key:"parseUVIndex",value:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)}},{key:"addVertex",value:function(t,e,n){var i=this.vertices,o=this.object.geometry.vertices;o.push(i[t+0],i[t+1],i[t+2]),o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2])}},{key:"addVertexPoint",value:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}},{key:"addVertexLine",value:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])}},{key:"addNormal",value:function(t,e,n){var i=this.normals,o=this.object.geometry.normals;o.push(i[t+0],i[t+1],i[t+2]),o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2])}},{key:"addColor",value:function(t,e,n){var i=this.colors,o=this.object.geometry.colors;o.push(i[t+0],i[t+1],i[t+2]),o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2])}},{key:"addUV",value:function(t,e,n){var i=this.uvs,o=this.object.geometry.uvs;o.push(i[t+0],i[t+1]),o.push(i[e+0],i[e+1]),o.push(i[n+0],i[n+1])}},{key:"addUVLine",value:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])}},{key:"addFace",value:function(t,e,n,i,o,r,a,s,l){var u=this.vertices.length,c=this.parseVertexIndex(t,u),f=this.parseVertexIndex(e,u),d=this.parseVertexIndex(n,u);if(this.addVertex(c,f,d),void 0!==i&&""!==i){var h=this.uvs.length;c=this.parseUVIndex(i,h),f=this.parseUVIndex(o,h),d=this.parseUVIndex(r,h),this.addUV(c,f,d)}if(void 0!==a&&""!==a){var v=this.normals.length;c=this.parseNormalIndex(a,v),f=a===s?c:this.parseNormalIndex(s,v),d=a===l?c:this.parseNormalIndex(l,v),this.addNormal(c,f,d)}this.colors.length>0&&this.addColor(c,f,d)}},{key:"addPointGeometry",value:function(t){this.object.geometry.type="Points";var e=this.vertices.length,n=!0,i=!1,o=void 0;try{for(var a,s=(0,r.default)(t);!(n=(a=s.next()).done);n=!0){var l=a.value;this.addVertexPoint(this.parseVertexIndex(l,e))}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}},{key:"addLineGeometry",value:function(t,e){this.object.geometry.type="Line";var n=this.vertices.length,i=this.uvs.length,o=!0,a=!1,s=void 0;try{for(var l,u=(0,r.default)(t);!(o=(l=u.next()).done);o=!0){var c=l.value;this.addVertexLine(this.parseVertexIndex(c,n))}}catch(t){a=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var f=!0,d=!1,h=void 0;try{for(var v,p=(0,r.default)(e);!(f=(v=p.next()).done);f=!0){var m=v.value;this.addUVLine(this.parseUVIndex(m,i))}}catch(t){d=!0,h=t}finally{try{!f&&p.return&&p.return()}finally{if(d)throw h}}}}]),t}();e.default=function(t){var e=new p;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var n=t.split("\n"),i="",o="",a=[],s="function"==typeof"".trimLeft,l=0,u=n.length;l<u;l++)if(i=n[l],i=s?i.trimLeft():i.trim(),0!==i.length&&"#"!==(o=i.charAt(0)))if("v"===o){var h=i.split(/\s+/);switch(h[0]){case"v":e.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),8===h.length&&e.colors.push(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]));break;case"vn":e.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":e.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===o){for(var v=i.substr(1).trim(),m=v.split(/\s+/),_=[],g=0,y=m.length;g<y;g++){var x=m[g];if(x.length>0){var b=x.split("/");_.push(b)}}for(var S=_[0],w=1,E=_.length-1;w<E;w++){var T=_[w],A=_[w+1];e.addFace(S[0],T[0],A[0],S[1],T[1],A[1],S[2],T[2],A[2])}}else if("l"===o){var P=i.substring(1).trim().split(" "),I=void 0,k=[];if(-1===i.indexOf("/"))I=P;else{I=[];for(var L=0,M=P.length;L<M;L++){var C=P[L].split("/");""!==C[0]&&I.push(C[0]),""!==C[1]&&k.push(C[1])}}e.addLineGeometry(I,k)}else if("p"===o){var R=i.substr(1).trim(),N=R.split(" ");e.addPointGeometry(N)}else if(null!==(a=c.exec(i))){var B=(" "+a[0].substr(1).trim()).substr(1);e.startObject(B)}else if(d.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(f.test(i))e.materialLibraries.push(i.substring(7).trim());else{if("s"!==o){if("\0"===i)continue;throw new Error('Unexpected line: "'+i+'"')}if(a=i.split(" "),a.length>1){var O=a[1].trim().toLowerCase();e.object.smooth="0"!==O&&"off"!==O}else e.object.smooth=!0;var D=e.object.currentMaterial();D&&(D.smooth=e.object.smooth)}e.finalize();var z=[],V=[],F=!0,U=!1,Y=void 0;try{for(var j,G=(0,r.default)(e.objects);!(F=(j=G.next()).done);F=!0){var Z=j.value,H=Z.geometry;if(0!==H.vertices.length){var W={header:{vertexCount:H.vertices.length/3},attributes:{}};switch(H.type){case"Points":W.mode=0;break;case"Line":W.mode=1;break;default:W.mode=4}W.attributes.POSITION={value:new Float32Array(H.vertices),size:3},H.normals.length>0&&(W.attributes.NORMAL={value:new Float32Array(H.normals),size:3}),H.colors.length>0&&(W.attributes.COLOR_0={value:new Float32Array(H.colors),size:3}),H.uvs.length>0&&(W.attributes.TEXCOORD_0={value:new Float32Array(H.uvs),size:2}),W.materials=[];var X=!0,Q=!1,q=void 0;try{for(var J,K=(0,r.default)(Z.materials);!(X=(J=K.next()).done);X=!0){var $=J.value,tt={name:$.name,flatShading:!$.smooth};W.materials.push(tt),V.push(tt)}}catch(t){Q=!0,q=t}finally{try{!X&&K.return&&K.return()}finally{if(Q)throw q}}W.name=Z.name,z.push(W)}}}catch(t){U=!0,Y=t}finally{try{!F&&G.return&&G.return()}finally{if(U)throw Y}}return{meshes:z,materials:V}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.length>=2&&(0,h.default)(t[0].lat)&&(0,h.default)(t[0].lng)}function r(t){return t.length>=1&&t.every(function(t){return o(t)})}function a(t){return(o(t)?[t]:t).map(function(t){return s(t)})}function s(t){var e=t.length>0?[t[0]]:[];return t.forEach(function(t){var n=e[e.length-1];t.lat===n.lat&&t.lng===n.lng||e.push(t)}),e}function l(t){var e=[];return t.forEach(function(n,i){if(i>0){var o=t[i-1],r=[o.lng,o.lat],a=[n.lng,n.lat],s=u(n.lng,o.lng);if(s<5){var l=n.lng,c=n.lat;e.push({lng:l,lat:c,height:0})}else{(0,p.default)(r,a,{npoints:Math.ceil(s/5)}).geometry.coordinates.forEach(function(t){if(Array.isArray(t[0]))t.forEach(function(t){var n=(0,f.default)(t,2),i=n[0],o=n[1];e.push({lng:i,lat:o,height:0})});else{var n=(0,f.default)(t,2),i=n[0],o=n[1];e.push({lng:i,lat:o,height:0})}})}return!0}var d=n.lng,h=n.lat;e.push({lng:d,lat:h,height:0})}),e}function u(t,e){return Math.abs(e-t)<180?Math.abs(e-t):360-Math.abs(e-t)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(30),f=i(c),d=n(340),h=i(d);e.isSimple=o,e.isComplexLine=r,e.normalize=a,e.deduplicatePoint=s,e.cross180=l;var v=n(642),p=i(v)},function(t,e,n){"use strict";function i(t,e){return function(n){return new r.default(n,t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(644),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i},function(t,e,n){"use strict";function i(t,e){return f.default.batchRender&&(e+=1),e===f.default.maxDataZoom&&t>e}function o(t,e){return e<f.default.maxDataZoom&&t<=e}function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f.default.batchRender&&(e+=1),Math.abs(t-e)<=n}function a(t,e,n){return!(r(t,e,1)||n&&o(e,n)||i(t,e))}function s(t,e,n){return!(r(Math.round(t),e)||n&&o(e,n)||i(t,e))}function l(t,e,n){return s(t,e,n)}function u(t,e){return s(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isInterceptForBase64=a,e.isInterceptForGPU=s,e.isInterceptForTileData=l,e.isInterceptForPlacement=u;var c=n(25),f=function(t){return t&&t.__esModule?t:{default:t}}(c)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t===S.RENDER_LAYER_TYPE.marker||t===S.RENDER_LAYER_TYPE.label}function r(t){return t===S.RENDER_LAYER_TYPE.polygon||t===S.RENDER_LAYER_TYPE.circle||t===S.RENDER_LAYER_TYPE.ellipse||t===S.RENDER_LAYER_TYPE.rectangle}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m);e.hasBorderLayer=r;var g=n(252),y=i(g),x=n(81),b=n(125),S=n(57),w=function(t){function e(t){return(0,u.default)(this,e),o(t.type)?t.level=b.LAYER_LEVEL.OVERLAY_NAA:t.level=b.LAYER_LEVEL.OVERLAY_AA,(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t))}return(0,_.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(t){(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"_initialize",this).call(this,t),this.sourceData=t.sourceData,this.sourceId=this.id}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:x.SOURCE_TYPE.geojson,tileSize:this.tileSize,data:this.sourceData})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(y.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(252),p=i(v),m=n(81),_=n(155),g=i(_),y=n(28),x=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.sourceId=this.sourceId||this.id}},{key:"getBounds",value:function(){return this._bounds}},{key:"setBounds",value:function(t){return t instanceof g.default?(this._bounds=t,this._resetData(),this):(new y.BaseTypeError("bounds","LatLngBounds",t).error(),this)}},{key:"_updateMediaSource",value:function(t){this._mediaSource=t,this._resetData()}},{key:"_resetData",value:function(){this.map&&this.map.getSource(this.id).setData({mediaSource:this._mediaSource,bounds:this._bounds})}},{key:"_addSource",value:function(){this._mediaSource&&this._bounds&&this._mediaSource&&this._bounds&&this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:m.SOURCE_TYPE.ground,tileSize:this.tileSize,data:{mediaSource:this._mediaSource,bounds:this._bounds}}),this._fire("layer",{}))}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(L(t)){var e=t.id,n=void 0===e?(0,b.uniqueId)():e,i=t.paths;return t.id=n,k(i)?i.flat(3).every(function(t,e){var n=M(t);return n||new P.ClassTypeError("MaskGeometry.path["+e+"]","LatLng",t).error(),n}):(new P.BaseTypeError("MaskGeometry.paths","Array",i).error(),!1)}return new P.BaseTypeError("MaskGeometry","Object",t).error(),!1}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=i(r),s=n(128),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(5),m=i(p),_=n(4),g=i(_),y=n(252),x=i(y),b=n(10),S=n(81),w=n(161),E=n(57),T=n(40),A=i(T),P=n(28),I=n(125),k=A.default.isArray,L=A.default.isObject,M=A.default.isValidLatLng,C=function(t){function e(t){return(0,d.default)(this,e),t.type=E.RENDER_LAYER_TYPE.mask,t.level=I.LAYER_LEVEL.UNDERGROUND,(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t))}return(0,g.default)(e,t),(0,v.default)(e,[{key:"_initialize",value:function(t){var e=t.geometries,n=void 0===e?[]:e,i=new l.default;this.isMaskReverse=t.isMaskReverse||!1,this.sourceId=this.id,this.maskGeoMap=i,this.add(n)}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:S.SOURCE_TYPE.geojson,data:{type:w.GEOMETRY_TYPES.MASK,geometries:[].concat((0,a.default)(this.maskGeoMap.values()))}})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}},{key:"add",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return k(e)?(e.forEach(function(e){if(o(e)){var n=e.id;t.maskGeoMap.has(n)?console.warn("MaskLayer.add: 已存在id为"+n+"的MaskGeometry对象。"):t.maskGeoMap.set(n,e)}}),this._updateData(),this):(new P.BaseTypeError("MaskLayer.add()传入参数","Array",e).error(),this)}},{key:"get",value:function(t){return this.maskGeoMap.get(t)}},{key:"getAll",value:function(){return[].concat((0,a.default)(this.maskGeoMap.values()))}},{key:"remove",value:function(t){if(!k(t))return new P.BaseTypeError("MaskLayer.remove()传入参数","Array",t).error(),this;var e=this.maskGeoMap;return t.forEach(function(t){e.has(t)?e.delete(t):console.warn("MaskLayer.remove: 不存在id为"+t+"的MaskGeometry对象。")}),this._updateData(),this}},{key:"clear",value:function(){return this.maskGeoMap.clear(),this._updateData(),this}},{key:"update",value:function(t){if(!k(t))return new P.BaseTypeError("MaskLayer.update()传入参数","Array",t).error(),this;var e=this.maskGeoMap;return t.forEach(function(t){o(t)&&e.set(t.id,t)}),this._updateData(),this}},{key:"_updateData",value:function(){this.map&&this.map.getSource(this.sourceId).setData({type:w.GEOMETRY_TYPES.MASK,geometries:[].concat((0,a.default)(this.maskGeoMap.values()))})}}]),e}(x.default);e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=Array.isArray(e.features)?e.features:v.DEFAULT_BASEMAP.vector.features,i=[];if(n.includes(h.BASE_LAYER_TYPE.base)){var o=new c.default({map:t,id:v.VECTOR_LAYER_ID.base,features:[{type:h.BASE_LAYER_TYPE.base,filter:h.BASE_LAYER_TYPE.base},{type:h.BASE_LAYER_TYPE.ground,filter:h.BASE_LAYER_TYPE.ground}]});t.moveLayer(o.id,_.LAYER_LEVEL.BASE),i.push(o)}if(n.includes(h.BASE_LAYER_TYPE.arrow)){var r=new c.default({map:t,id:h.BASE_LAYER_TYPE.arrow,features:[{type:h.BASE_LAYER_TYPE.arrow,filter:h.BASE_LAYER_TYPE.arrow}]});r.setRank((0,_.getRank)(_.LAYER_LEVEL.GROUND)-1),i.push(r)}var a=n.includes(h.BASE_LAYER_TYPE.building3d)||n.includes("building"),s=n.includes(h.BASE_LAYER_TYPE.building2d);if(a||s){var l=new c.default({map:t,id:v.VECTOR_LAYER_ID.building,zIndex:1,features:[a?{type:h.BASE_LAYER_TYPE.building3d,filter:h.BASE_LAYER_TYPE.building3d}:{type:h.BASE_LAYER_TYPE.building2d,filter:h.BASE_LAYER_TYPE.building3d}]});t.moveLayer(l.id,_.LAYER_LEVEL.BUILDING),i.push(l)}var u=n.includes(h.BASE_LAYER_TYPE.point),f=n.includes(h.BASE_LAYER_TYPE.label);if(u||f){var d=new c.default({map:t,id:v.VECTOR_LAYER_ID.poi,features:[u?{type:h.BASE_LAYER_TYPE.point,filter:h.BASE_LAYER_TYPE.point}:null,f?{type:h.BASE_LAYER_TYPE.label,filter:h.BASE_LAYER_TYPE.label}:null,{type:h.BASE_LAYER_TYPE.text,filter:h.BASE_LAYER_TYPE.text}].filter(function(t){return!!t})});t.moveLayer(d.id,_.LAYER_LEVEL.TEXT),i.push(d)}return i}function r(t){var e=new d.default({map:t,id:v.DEFAULT_BASEMAP.handdraw.type,getTileUrl:function(t,e,n){e=Math.pow(2,n)-1-e;var i=m.default.handdrawSrc;return i[(t+e)%i.length]+"?z="+n+"&x="+t+"&y="+e+"&version="+m.default.dataVersion.scenic},maxDataZoom:20});return e.setZIndex(2),t.moveLayer(e.getId(),_.LAYER_LEVEL.BUILDING),e}function a(t){var e=t.map,n=t.tilesrc,i=t.encrypt,o=t.key;window.onbeforeunload=function(){var t=e.getSource(v.DEFAULT_BASEMAP.oversea.type),n=t&&t.overseaNum;(0,x.os)(o,n),t&&(t.overseaNum=0)};var r=function(){return 1===this.layerResource.getFinalUsedMapStyleId()?1:0}.bind(e);return new d.default({map:e,id:v.DEFAULT_BASEMAP.oversea.type,maxDataZoom:18,getTileUrl:function(t,e,a){var s=["z="+a,"x="+t,"y="+e,"styleid="+n.style,"scene="+r(),"version="+n.version,"size=256","ch=zh"],l=s.join("&"),u=i(l);return n.url+"&key="+o+"&param="+u}})}function s(t,e){var n=Array.isArray(e.features)?e.features:v.DEFAULT_BASEMAP.satellite.features,i=[];if(n.includes(v.SATELLITE_FEATURE.satellite)){var o=new d.default({map:t,id:v.SATELLITE_LAYER_ID[v.SATELLITE_FEATURE.satellite],getTileUrl:function(t,e,n){e=Math.pow(2,n)-1-e;var i=m.default.satelliteSrc;return i[(t+e)%i.length]+"/"+n+"/"+(t>>4)+"/"+(e>>4)+"/"+t+"_"+e+".jpg?version="+m.default.dataVersion.sat},maxDataZoom:18});t.moveLayer(o.id,_.LAYER_LEVEL.BASE),i.push(o)}if(n.includes(v.SATELLITE_FEATURE.road)){var r=new d.default({map:t,id:v.SATELLITE_LAYER_ID[v.SATELLITE_FEATURE.road],getTileUrl:function(t,e,n){e=Math.pow(2,n)-e-1;var i=m.default.roadSrc;return i[(t+e)%i.length]+"?z="+n+"&x="+t+"&y="+e+"&styleid=2&scene=0&version="+m.default.dataVersion.tile},maxDataZoom:18});t.moveLayer(r.id,_.LAYER_LEVEL.BASE),i.push(r)}return i}function l(t,e){var n=Array.isArray(e.features)?e.features:v.DEFAULT_BASEMAP.traffic.features,i=e.opacity,o=e.flowColor,r=e.flowSpeed,a=[];if(n.includes(v.TRAFFIC_FEATURE.base)){var s=new d.default({map:t,id:v.TRAFFIC_LAYER_ID[v.TRAFFIC_FEATURE.base],getTileUrl:function(t,e,n){e=Math.pow(2,n)-1-e;var i=m.default.trafficSrc,o=(t+e)%i.length,r=window.devicePixelRatio>1?2:1;return i[o]+"?z="+n+"&x="+t+"&y="+e+"&times="+r+"&time="+(new Date).getTime()},maxDataZoom:18,opacity:i});t.moveLayer(s.id,_.LAYER_LEVEL.BASE),a.push(s)}if(n.includes(v.TRAFFIC_FEATURE.flow)){var l=new y.default({map:t,id:v.TRAFFIC_LAYER_ID[v.TRAFFIC_FEATURE.flow],flowColor:o,flowSpeed:r});t.moveLayer(l.id,_.LAYER_LEVEL.BASE),a.push(l)}return a.forEach(function(e){var n=t.getSource(e.sourceId);e._interval=setInterval(function(){n.isFrozen||(n.reload(),n.once("tilesloaded",function(){t.renderEngine.getImageCache(e.id).clear()}))},6e4),e.once("source_removed",function(){clearInterval(e._interval),delete e._interval})}),a}Object.defineProperty(e,"__esModule",{value:!0}),e.createOverseaLayer=e.createHanddrawLayer=e.createTrafficLayer=e.createSatelliteLayer=e.createVectorLayer=void 0;var u=n(381),c=i(u),f=n(328),d=i(f),h=n(57),v=n(339),p=n(25),m=i(p),_=n(125),g=n(659),y=i(g),x=n(42);e.createVectorLayer=o,e.createSatelliteLayer=s,e.createTrafficLayer=l,e.createHanddrawLayer=r,e.createOverseaLayer=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(236),r=i(o),a=n(21),s=i(a),l=n(15),u=i(l),c=n(3),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(5),_=i(m),g=n(4),y=i(g),x=n(243),b=i(x),S=n(663),w=i(S),E=n(26),T=i(E),A=n(25),P=i(A),I=n(10),k=n(664),L=i(k),M=T.default.isPC()?800:200,C=function(t){function e(t,n,i){(0,h.default)(this,e);var o=(0,_.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t,n,i)),r=n.tileSize,a=void 0===r?P.default.tileSize:r,s=n.minZoom,l=void 0===s?P.default.minZoom:s,c=n.maxZoom,d=void 0===c?P.default.maxZoom:c,v=n.isPixelGeo,p=void 0!==v&&v,m=n.tileManager,g=n.data;return(0,u.default)(o,{tileSize:a,minZoom:l,maxZoom:d,isPixelGeo:p}),o._items={},o._data=g,o.tileManager=m||new L.default({add:o.addTile.bind(o),remove:o.removeTile.bind(o),show:o.showTile.bind(o),minZoom:l,maxZoom:d}),o}return(0,y.default)(e,t),(0,p.default)(e,[{key:"getDrawItems",value:function(){return this._items}},{key:"onCacheRemove",value:function(t){this.unloadTile(t)}},{key:"onUpdate",value:function(t,e,n){this.updateCacheSize(t),this.tileManager.update(t.zoom,t,{reason:n})}},{key:"updateCacheSize",value:function(t){var e=Math.ceil(t.width/this.tileSize)+1,n=Math.ceil(t.height/this.tileSize)+1,i=e*n,o=Math.floor(5*i),r=Math.max(M,o);this.cache.setMaxSize(r)}},{key:"onClear",value:function(){this.clearTiles()}},{key:"clearTiles",value:function(){this.tileManager.clear()}},{key:"onReload",value:function(){var t=this;(0,I.forIn)(this._items,function(e,n){t.reloadTile(n)})}},{key:"addTile",value:function(t,e){var n=this.cache.get(t.id);if(n)return n.hide(),this._items[t.id]=n,s.default.resolve();n=new b.default(t,this.tileSize),n.hide(),this._items[t.id]=n,n.state=x.TILE_STATE.loading;var i=this.loadTile(n,e);return i.then(this._tileLoaded.bind(this,n)),i}},{key:"removeTile",value:function(t){var e=t.id,n=this._items[e];if(n)if(delete this._items[e],n.isLoading())n.aborted=!0,n.state=x.TILE_STATE.unloaded,this.abortTile(n);else if(n.hasData()){var i=n.coord.id;this.cache.add(i,n)}}},{key:"showTile",value:function(t){var e=this._items[t.id];e&&!e.visible&&(e.show(),this._fire("data",{dataType:"source",tile:e}))}},{key:"reloadTile",value:function(t){var e=this;t.isLoading()||(t.state=x.TILE_STATE.reloading,this.loadTile(t,{}).then(function(n){e._fire("data",{dataType:"source",tile:t}),e._tileLoaded.call(e,t,n)}))}},{key:"loadTile",value:function(){}},{key:"unloadTile",value:function(t){t.unloadData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type},null,t.workerID)}},{key:"abortTile",value:function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type},null,t.workerID)}},{key:"_tileLoaded",value:function(t,e){e&&(t.state=x.TILE_STATE.loaded,404!==e.status&&this._fire("loaderror",{tile:t,error:e})),(0,r.default)(this._items).every(function(t){return t.isLoaded()})&&this._fire("tilesloaded",{dataType:"source",tiles:this._items})}}]),e}(w.default);e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(93),p=n(25),m=function(t){function e(t,n,i){(0,s.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return o.id=t,o.dispatcher=i,o.minZoom=n.minZoom||p.minZoom,o.maxZoom=n.maxZoom||p.maxZoom,o.maxDataZoom=n.maxDataZoom||p.maxDataZoom,o._items={},o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getDrawItems",value:function(){return this._items}},{key:"clear",value:function(){}},{key:"freeze",value:function(){this.isFrozen=!0}},{key:"unfreeze",value:function(){this.isFrozen=!1}},{key:"onAdd",value:function(t){this.map=t}},{key:"onRemove",value:function(){this.map=null}},{key:"update",value:function(t,e){this.transform=t,this.camera=e}}]),e}(v);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(115),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(243),_=i(m),g=n(486),y=i(g),x=n(298),b=i(x),S=n(10),w=n(25),E=function(t){function e(t,n,i){(0,u.default)(this,e);var o=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i));return o._metaData=null,o._initialize(),o.workerOptions=S.extend({source:o.getUniqueId(),tileSize:o.tileSize},n.workerOptions),o}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(){}},{key:"load",value:function(){var t=this;this._loadOriginData(function(){t._fire("data",{dataType:"source",sourceDataType:"metadata"})})}},{key:"onAdd",value:function(t){this.map=t,this.load()}},{key:"getMetaData",value:function(){return this._metaData}},{key:"update",value:function(t){this.transform=t;var e=new b.default(0,0,0,0);this.addItem(e)}},{key:"addItem",value:function(t){this.addTile(t,null,null)}},{key:"_loadOriginData",value:function(t){var e=this;this._fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(){e.reload(),e.transform&&e.update(e.transform),t&&t()})}},{key:"_updateWorkerData",value:function(t){var e=this,n=S.extend({},this.workerOptions),i=this._data;n.data=(0,r.default)(i),this._onLoadDataStart(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n,i){n?(e._onLoadDataError(n),t(n)):(e._loaded=!0,e._metaData=i,e._onLoadDataEnd(),t(null))},this.workerID)}},{key:"_onLoadDataStart",value:function(){}},{key:"_onLoadDataEnd",value:function(){}},{key:"_onLoadDataError",value:function(t){this._fire("error",{error:t})}},{key:"addTile",value:function(t,e,n){var i=this._items[t.id];return i||((i=this._cache.get(t.id))?(this._items[t.id]=i,i):(i=new _.default(t,this.tileSize),this._items[t.id]=i,t.z<=w.maxDataZoom&&this.loadTile(i,e,n?n.bind(this):this._tileLoaded.bind(this,i)),i))}},{key:"loadTile",value:function(t,e,n){var i={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxZoom,tileSize:this.tileSize,source:this.getUniqueId()};t.workerID=this.dispatcher.send("loadTile",i,function(e,i){if(t.clear(),!t.aborted)return e||!i?void(t.state=m.TILE_STATE.loaded):(t.setData(i),n(null))},this.workerID)}},{key:"abortTile",value:function(t){t.aborted=!0}},{key:"unloadTile",value:function(t){t.clear(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.getUniqueId()},function(){},t.workerID)}},{key:"onRemove",value:function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.getUniqueId()},function(){}),this.map=null,this._metaData=null}}]),e}(y.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(20),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(78),f=function(){function t(e,n,i){(0,s.default)(this,t),i&&(this.loadGeoJSON=i),this._geoDataIndexes={},this.actor=e}return(0,u.default)(t,[{key:"loadVectorData",value:function(t,e){var n=t.source;if(!this._geoDataIndexes[n])return e(null,null);var i=this._geoDataIndexes[n];if(!i)return e(null,null);e(null,i)}},{key:"loadData",value:function(t,e){var n=function(n,i){var o=this;return n?e(n):"object"!==(void 0===i?"undefined":(0,r.default)(i))?e(new Error("Input data is not a valid GeoJSON object.")):void this._indexData(t,i,function(n,i){if(n)return e(n);o._geoDataIndexes[t.source]=i,e(null)})}.bind(this);this.loadGeoJSON(t,n)}},{key:"loadGeoJSON",value:function(t,e){if(t.url)c.getJSON(t.url,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}}},{key:"removeSource",value:function(t){this._geoDataIndexes[t.source]&&delete this._geoDataIndexes[t.source]}},{key:"_indexData",value:function(){}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(243),p=n(382),m=i(p),_=n(483),g=i(_),y=n(26),x=i(y),b=n(10),S=function(t){function e(t,n,i){(0,s.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i));return o.tileSize=n.tileSize||256,o._isPixelGeo=n.isPixelGeo||!1,o._data=n.data,o._cache=new m.default(0,o.unloadTile.bind(o)),o._maxTileCacheSize=x.default.isPC()?800:200,o._on("error",function(){o._sourceErrored=!0}),o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getUniqueId",value:function(){return this._uniqueId||(this._uniqueId=(this.map&&this.map.id||b.uniqueId())+"_"+this.id),this._uniqueId}},{key:"addTile",value:function(){}},{key:"loadTile",value:function(){}},{key:"unloadTile",value:function(){}},{key:"abortTile",value:function(){}},{key:"reload",value:function(){var t=this;this._cache.reset(),b.forIn(this._items,function(e,n){t.reloadTile(n)})}},{key:"reloadTile",value:function(t){t.state!==v.TILE_STATE.loading&&(t.state=v.TILE_STATE.reloading,this.loadTile(t,{},this._tileLoaded.bind(this,t)))}},{key:"removeTile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._items[t];if(n)if(delete this._items[t],n.hasData()){var i=n.coord.id;!e&&this._cache.add(i,n)}else n.aborted=!0,this.abortTile(n),this.unloadTile(n)}},{key:"clear",value:function(){this.clearTiles(),this._cache.reset()}},{key:"clearTiles",value:function(){var t=this;b.forIn(this._items,function(e){t.removeTile(e)})}},{key:"_tileLoaded",value:function(){this.updateIndoorData&&this.updateIndoorData(null,!1,!0)}},{key:"getDrawItems",value:function(){return this._items}},{key:"onAdd",value:function(t){this.map=t}},{key:"onRemove",value:function(){this.map=null}},{key:"updateCacheSize",value:function(t){var e=Math.ceil(t.width/this.tileSize)+1,n=Math.ceil(t.height/this.tileSize)+1,i=e*n,o=Math.floor(5*i);if(x.default.isPC()){var r="number"==typeof this._maxTileCacheSize?Math.max(this._maxTileCacheSize,o):o;this._cache.setMaxSize(r)}else this._cache.setMaxSize(o)}},{key:"update",value:function(){}}]),e}(g.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(484),p=i(v),m=n(81),_=n(243),g=function(t){function e(t,n,i){(0,s.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i));return o.on("data",function(){o.hasGeoChanged_inLoading=!0}),o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.type=m.SOURCE_TYPE.geojson}},{key:"setData",value:function(t){var e=this;return this._data=t,this._loadOriginData(function(){e._fire("data",{dataType:"source",sourceDataType:"content"})}),this}},{key:"reloadTile",value:function(t){var e=this;t.state!==_.TILE_STATE.loading?(t.state=_.TILE_STATE.reloading,this.hasGeoChanged_inLoading=!1,this.updateTileCallback?(this.updateTileCallback(),this.updateTileCallback=null):this.loadTile(t,{},this._tileLoaded.bind(this,t))):this.hasGeoChanged_inLoading&&(this.updateTileCallback=function(){e.loadTile(t,{},function(){e._tileLoaded.bind(e,t),e._fire("data",{dataType:"source"}),e.hasGeoChanged_inLoading=!1})})}},{key:"updateIndoorData",value:function(t,e){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(t=this.indoorOption);var i=this._data.geometries,o=this._data.type,r=0;i.forEach(function(i,a){var s=0;if("POLYLINE"===o&&(i.paths&&i.paths.forEach(function(t){s+=t.length||1}),s=s-1>0?s-1:0),!i.floorName||!i.buildingId)return void(r+=s);var l=1;l=t?t.floorName===i.floorName&&t.buildingId===i.buildingId?1:0:e?1:0;var u=n._items["0_0_0"];if("POINT"===o)u._data["0_0_0"].instancePixelOffsetList[3*a+2]=l,u._data["0_0_0"].uid=(new Date).getTime();else if("POLYLINE"===o){for(var c=r;c<r+s;c++)u._data["0_0_0"].instanceColorList[4*c+3]=255*l,u._data["0_0_0"].instanceBorderColorList[4*c+3]=255*l;r+=s,u._data["0_0_0"].uid=(new Date).getTime()}}),this.indoorOption=t}},{key:"setStyle",value:function(t){var e=this;return this._data.styles=t,this._loadOriginData(function(){e._fire("data",{dataType:"source",sourceDataType:"content"})}),this}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return 64===f.indexOf(t.charAt(t.length-1))?t.substring(0,t.length-1):t}function o(t){if(!t)return null;t=i(t),t=i(t);var e=parseInt(t.length/4*3,10),n=[];t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var o=void 0,r=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=0,h=0;for(d=0;d<e;d+=3)s=f.indexOf(t.charAt(h)),h+=1,l=f.indexOf(t.charAt(h)),h+=1,u=f.indexOf(t.charAt(h)),h+=1,c=f.indexOf(t.charAt(h)),h+=1,o=s<<2|l>>4,r=(15&l)<<4|u>>2,a=(3&u)<<6|c,n.push(o),64!==u&&n.push(r),64!==c&&n.push(a);return n}function r(t,e){return t>>8-e&255|t<<e&255}function a(t){return r(t,2)^r(t,1)&r(t,3)}function s(t,e){return{x:e,y:t^a(e)}}function l(t){for(var e=t.length,n=[],i=0;i<e;i+=2){var o=t[i],r=0;i+1<e&&(r=t[i+1]);for(var a=0,l=0,u=0;u<3;u++){var c=s(o,r);a=c.x,o=a,l=c.y,r=l}n.push(a),n.push(l)}return n}function u(t){for(var e="",n=0;n<t.length;){var i=t[n],o=0,r=0;i<128?(e+=String.fromCharCode(i),n+=1):i>191&&i<224?(o=t[n+1],e+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=t[n+1],r=t[n+2],e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),n+=3)}return e}function c(t){var e=t.lastIndexOf("}");return t.substring(0,e+1)}var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.decode=function(t){return c(u(l(o(t))))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t[t.length-1];return e===O.BASE_LAYER_TYPE.region?t.cidx+String(1e5*(n>>16&65535)):t.cidx+String(1e5*(n>>16&65535)+(65535&n))}function r(t,e){var n=void 0;return j.forIn(t,function(t,i){i.minScaleVal<=e&&i.maxScaleVal>=e&&(n=i)}),n}function a(t,e){if(e){for(var n=t[1],i=e.transX,o=e.transY,r=e.scale,a=0;a<n.length;a+=2)n[a]=(n[a]+i)*r,n[a+1]=(n[a+1]+o)*r;t[0]===Q&&(t[2]=t[2]*r)}}function s(t,e){var n=e.enc,i=e.imgUploadHook,o=e.childIdx,r=void 0===o?0:o;if(t instanceof Array){var l=-1,u=[],c=[],f=[],d=[];return t.forEach(function(t,e){var i=s(t,{enc:n,childIdx:e});0===i.ret&&(l=0),u.push(i.img),c.push(i.ext_img),f=f.concat(i.features||[]),d=d.concat(i.pois||[])}),i&&(u.length||c.length)&&i(u,c),{ret:l,img:u,ext_img:c,features:f,pois:d}}if(!t.data)return{};var h=n?t:Y(z(t.data));if(0!==h.ret)return{};i&&i(h.img,h.ext_img);var v=F(V(h.features))||[],p=F(V(h.pois))||[];return v.unshift([q,[0,0,256,0,256,256,0,256],"",0]),v.forEach(function(e){e[0]instanceof Array?e.forEach(function(e){a(e,t.tileTransform)}):a(e,t.tileTransform),e.cidx=r,e.transform=t.tileTransform||{}}),p.forEach(function(e){e[0]instanceof Array?e.forEach(function(e){a(e,t.tileTransform)}):a(e,t.tileTransform),e.cidx=r,e.transform=t.tileTransform||{}}),h.features=v,h.pois=p,h}var l=n(95),u=i(l),c=n(23),f=i(c),d=n(27),h=i(d),v=n(236),p=i(v),m=n(18),_=i(m),g=n(30),y=i(g),x=n(115),b=i(x),S=n(21),w=i(S),E=n(0),T=i(E),A=n(1),P=i(A),I=n(645),k=i(I),L=n(646),M=i(L),C=n(647),R=i(C),N=n(379),B=i(N),O=n(57),D=n(299),z=n(488).decode,V=n(685).restores,F=n(684).merge,U=n(10),Y=U.parseJson,j=n(10),G=n(491),Z=G.getVectorStyle,H=n(10),W=H.uniqueId,X={65536:O.BASE_LAYER_TYPE.point,131072:O.BASE_LAYER_TYPE.line,196608:O.BASE_LAYER_TYPE.region,262144:O.BASE_LAYER_TYPE.label,327680:O.BASE_LAYER_TYPE.arrow},Q=196619,q=196613,J=function(){function t(e){(0,T.default)(this,t),this.uid=e.uid,this.coord=e.coord,this.dataZoom=e.coord.z,this._needUploadTileImage=!1,this._billboardFeatures=[];var n=e.styleId;this.styleId=n,this.parse=(0,D.isDefaultStyle)(n)?this.parseForDefaultStyle.bind(this):this.parseForCustomStyle.bind(this)}return(0,P.default)(t,[{key:"parseForCustomStyle",value:function(t,e,n,i,o,r,a){var s=this,l=this.coord.id,u=this.parseOriginData(t,e,n,i,null,a),c=u.layerstiles,f=u.jsonData;if(!c||!f)return void r(null,null);var d=c.point&&c.point[l],h=c.label&&c.label[l],v=[];d&&d.forEach(function(t){t&&t.datas&&t.datas[0].textName&&t.datas[0].textName.split("").forEach(function(e){v.findIndex(function(n){return n.text===e&&n.font_weight===t.datas[0].font_weight})<0&&v.push({text:e,font_weight:t.datas[0].font_weight})})}),h&&h.forEach(function(t){t&&t.roadName&&t.roadName.split("").forEach(function(e){v.findIndex(function(n){return n.text===e&&n.font_weight===t.font_weight})<0&&v.push({text:e,font_weight:t.font_weight})})});var p=this.getOriginalGroundFeatures(f.features,!0),m=(0,k.default)(p.ranks,l);c[O.BASE_LAYER_TYPE.base]={},c[O.BASE_LAYER_TYPE.base][l]=m;var _={};_.base=c.base,delete c.base,_=this.transferData(l,_,"base"),_.id=l,r(null,_);var g=(0,M.default)(p.buildings,l),x=(0,k.default)(p.ranksSide,l);if(c[O.BASE_LAYER_TYPE.building3d]={},c[O.BASE_LAYER_TYPE.building3d][l]={},c[O.BASE_LAYER_TYPE.building3d][l].buildings=g,c[O.BASE_LAYER_TYPE.building3d][l].buildSideShapes=x,c.arrow){var S=this.parseInstanceArrow(c.arrow,l);c[O.BASE_LAYER_TYPE.arrow]=c.arrow||{},c[O.BASE_LAYER_TYPE.arrow][l]=c.arrow[l]||[],c[O.BASE_LAYER_TYPE.arrow][l].instance=S}new w.default(function(t){var e="";s._needUploadTileImage&&f.img&&(e={tileImage64:f.img,tileId:l,billboardData:(0,b.default)(s._billboardFeatures)}),o.send("uploadTileTexture",{zoom:s.coord.z,uid:s.uid,billboard:e,glyphs:v},function(e,n){if(e)console.error(e),t([{},{}]);else{var i=JSON.parse(n.billboardMapping),o=JSON.parse(n.glyphMapping[0]),r=JSON.parse(n.glyphMapping[1]);t([i,o,r])}})}).then(function(t){var e=(0,y.default)(t,3),o=e[0],a=e[1],u=e[2],f=s.parseInstancePoint(c,l,n,{glyphMapping:a,glyphMappingBold:u,billboardMapping:o});c[O.BASE_LAYER_TYPE.point]=c.point||{},c[O.BASE_LAYER_TYPE.point][l]=c.point[l]||[],c[O.BASE_LAYER_TYPE.point][l].instance=f,c[O.BASE_LAYER_TYPE.label]=c.label||{},c[O.BASE_LAYER_TYPE.label][l]=c.label[l]||[],c[O.BASE_LAYER_TYPE.label][l].instance=f,c=s.transferData(l,c,"increment"),c.id=l,c.styleId=i.styleId,r(null,c)})}},{key:"transferData",value:function(t,e,n){var i=[];return(0,_.default)(e).forEach(function(n){if(n===O.BASE_LAYER_TYPE.base){var o=e[n]&&e[n][t];if(!o)return;e[n][t]={id:t,indeices:{arrayBuffer:o.indeices.dataView,length:o.indeices.length},lineCount:o.lineCount,size:o.size,vertices:{arrayBuffer:o.vertices.dataView,attributes:o.vertices.attributes,bytesPerElement:o.vertices.bytesPerElement},vertiesCount:o.vertiesCount}}else if(n===O.BASE_LAYER_TYPE.region)delete e[O.BASE_LAYER_TYPE.region];else if(n===O.BASE_LAYER_TYPE.line)delete e[O.BASE_LAYER_TYPE.line];else if(n===O.BASE_LAYER_TYPE.building3d){var r=e[n]&&e[n][t]&&e[n][t].buildings;if(!r)return;e[n][t].buildings={id:t,indeices:{arrayBuffer:r.indeices.dataView,length:r.indeices.length},size:r.size,vertices:{arrayBuffer:r.vertices.dataView,attributes:r.vertices.attributes,bytesPerElement:r.vertices.bytesPerElement}};var a=e[n]&&e[n][t].buildSideShapes;if(!a)return;e[n][t].buildSideShapes={id:t,indeices:{arrayBuffer:a.indeices.dataView,length:a.indeices.length},lineCount:a.lineCount,size:a.size,vertices:{arrayBuffer:a.vertices.dataView,attributes:a.vertices.attributes,bytesPerElement:a.vertices.bytesPerElement},vertiesCount:a.vertiesCount}}else if(n===O.BASE_LAYER_TYPE.arrow){var s=e[O.BASE_LAYER_TYPE.arrow]&&e[O.BASE_LAYER_TYPE.arrow][t];if(!s)return;s.forEach(function(t){t.datas&&t.datas.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),i.push(t.coords.buffer)),t.color_fill&&(t.color_fill=new Uint8ClampedArray(t.color_fill),i.push(t.color_fill.buffer))})})}else if(n===O.BASE_LAYER_TYPE.point){var l=e[O.BASE_LAYER_TYPE.point]&&e[O.BASE_LAYER_TYPE.point][t];if(!l)return;l.forEach(function(t){t.translate&&!i.includes(t.translate.buffer)&&i.push(t.translate.buffer),t.vertices&&!i.includes(t.vertices.buffer)&&i.push(t.vertices.buffer),t.datas&&t.datas.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),i.push(t.coords.buffer)),t.icon_coords&&(t.icon_coords=new Int16Array(t.icon_coords),i.push(t.icon_coords.buffer)),t.text_bounds&&(t.text_bounds=new Int16Array(t.text_bounds),i.push(t.text_bounds.buffer)),t.text&&t.text.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),i.push(t.coords.buffer))}),t.font_color&&(t.font_color=new Uint8ClampedArray(t.font_color),i.push(t.font_color.buffer)),t.background_color&&(t.background_color=new Uint8ClampedArray(t.background_color),i.push(t.background_color.buffer))})});var u=e[O.BASE_LAYER_TYPE.point][t].instance;(0,_.default)(u).forEach(function(t){"count"!==t&&i.push(u[t].buffer)})}else if(n===O.BASE_LAYER_TYPE.label){var c=e[O.BASE_LAYER_TYPE.label]&&e[O.BASE_LAYER_TYPE.label][t];if(!c)return;c.forEach(function(t){t.roads&&t.roads.forEach(function(t){t.datas&&t.datas.forEach(function(t){t.coords&&(t.coords=new Int16Array(t.coords),i.push(t.coords.buffer)),t.text_bounds&&(t.text_bounds=new Int16Array(t.text_bounds),i.push(t.text_bounds.buffer)),t.glyph_text_bounds&&(t.glyph_text_bounds=new Int16Array(t.glyph_text_bounds),i.push(t.glyph_text_bounds.buffer)),t.font_color&&(t.font_color=new Uint8ClampedArray(t.font_color),i.push(t.font_color.buffer)),t.background_color&&(t.background_color=new Uint8ClampedArray(t.background_color),i.push(t.background_color.buffer))})})})}}),"base"===n?(i.push(e[O.BASE_LAYER_TYPE.base][t].vertices.arrayBuffer.buffer),i.push(e[O.BASE_LAYER_TYPE.base][t].indeices.arrayBuffer.buffer),e.baseData=!0):"increment"===n&&(i.push(e[O.BASE_LAYER_TYPE.building3d][t].buildings.vertices.arrayBuffer.buffer),i.push(e[O.BASE_LAYER_TYPE.building3d][t].buildings.indeices.arrayBuffer.buffer),i.push(e[O.BASE_LAYER_TYPE.building3d][t].buildSideShapes.vertices.arrayBuffer.buffer),i.push(e[O.BASE_LAYER_TYPE.building3d][t].buildSideShapes.indeices.arrayBuffer.buffer),e.incrementData=!0),e.transferableList=i,e}},{key:"getOriginalGroundFeatures",value:function(t,e){for(var n=this.dataZoom,i={},a={},s=[],l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,v=void 0,m=void 0,_=0,g=t.length;_<g;_++){l=t[_];var x=l,b=(0,y.default)(x,3);if(u=b[0],d=b[1],c=b[2],v=this.mapStyle.layerMeta[u],(m=v?r(v.styles,n):void 0)&&(u===Q&&c>0&&s.push({datas:d,h:l[2]*(n>=18?2:1),colorFill:m.color_fill,colorSide:m.color_side,transform:l.transform}),m&&m.color_fill[3])){var S=r(v.styles,n+1),w=r(v.styles,n-1);f=v.name,h=o(l,v.type);var E=void 0;if(v.type!==O.BASE_LAYER_TYPE.region&&v.type!==O.BASE_LAYER_TYPE.line)continue;if(d instanceof Array&&d.length&&"number"==typeof d[0]&&(d=[d]),v.type===O.BASE_LAYER_TYPE.region);else if(v.type===O.BASE_LAYER_TYPE.line){if(0===m.width)continue;E=l[l.length-2]}i[h]=i[h]||{};var T=i[h][f],A={};if(v.type===O.BASE_LAYER_TYPE.line&&"number"==typeof l[2]&&(A.startDistance=l[2]),T)if(T.datas[0]instanceof Array||(T.datas=[T.datas]),d[0]instanceof Array)for(var P=0,I=d.length;P<I;P++)T.datas.push(d[P]);else T.datas.push(d);else i[h][f]={id:this.coord.id+"_"+f,layerId:u,layerName:f,type:v.type,datas:d,style:m,nextStyle:S,preStyle:w,zLevel:E,transform:l.transform,options:A},T=i[h][f]}}return e&&(j.forIn(i,function(t,e){var n=(0,p.default)(e).sort(function(t,e){return t.style.layerseq-e.style.layerseq});j.forIn(n,function(e,i){i.layerId===Q&&(a[t]={},a[t][e]=n[e],n.splice(e,1))}),i[t]=n}),j.forIn(a,function(t,e){var n=(0,p.default)(e).sort(function(t,e){return t.style.layerseq-e.style.layerseq});a[t]=n})),{ranks:i,ranksSide:a,buildings:s}}},{key:"parseOriginData",value:function(t,e,n,i,r,a){var l=this;this.status="parsing",this.data=e,this.mapStyle=i;var u=this.coord.id,c={},f={};B.default.setStyleTag(this.mapStyle.styleTag);var d=s(e,{enc:a,imgUploadHook:r});if(0!==d.ret)return{};for(var v=d.features,p=0,m=v.length;p<m;p++){var _=v[p],g=_[0]instanceof Array?_[0][0]:_[0];if(!g)return void console.warn("featureId is not exist",g);var y=983040&g;c[X[y]]?c[X[y]].push(_):(c[X[y]]=[],f[X[y]]={},c[X[y]].push(_))}var x=this.mapStyle.style;return j.forIn(x,function(t,e){if(c[t]){for(var i=e.type,r=e.style,a=e.relyStyle,s=e.relyStyleField,v=c[t],p=l.dataZoom,m=[],_={},g=0,y=v.length;g<y;g++){var x=v[g],b=[];if(x[0]instanceof Array)(b=l.parseRoadName(x,r,a,s,p,u,l.coord.tileSize))&&m.push(b);else{var S=x[0],w=Z(r,a,s,S,p);if(w){if(i===O.BASE_LAYER_TYPE.point){var E=""+x[2],T=l.parsePoi(x,w,l.coord);if(!T)continue;_[E]=!0,b.push(T)}else if(i===O.BASE_LAYER_TYPE.arrow){var A=l.parseArrow(x,w,l.coord);b.push(A)}else if(x[1][0]instanceof Array){var P=!0,I=!1,k=void 0;try{for(var L,M=(0,h.default)(x[1]);!(P=(L=M.next()).done);P=!0){var C=L.value,N={coords:C};b.push(N)}}catch(t){I=!0,k=t}finally{try{!P&&M.return&&M.return()}finally{if(I)throw k}}}else{var B={coords:x[1]};b.push(B)}var D={type:i,datas:b,id:u+"_"+g,rank:o(x,i)};m.push(D)}}}if(i===O.BASE_LAYER_TYPE.point&&d.pois&&d.pois.length>0&&d.ext_img)for(var z=0,V=d.pois.length;z<V;z++){var F=d.pois[z],U=[],Y=""+F[2],j=F[0],G=Z(r,a,s,j,p);if(G&&!_[Y]){var H=l.parsePoi(F,G,l.coord,{isExt:!0});if(H){U.push(H);var W={type:i,datas:U,isExt:!0,id:u+"_ext_"+z,rank:o(F,i)};m.push(W)}}}var X=void 0;switch(i){case O.BASE_LAYER_TYPE.point:X=(0,R.default)(m,n);break;default:X=m}f[t][u]=X}}),{layerstiles:f,jsonData:d}}},{key:"parseForDefaultStyle",value:function(t,e,n,i,o,r,a){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u&&d){var e=this.parseInstancePoint(d,c,n,t);d[O.BASE_LAYER_TYPE.point]=d.point||{},d[O.BASE_LAYER_TYPE.point][c]=d.point[c]||[],d[O.BASE_LAYER_TYPE.point][c].instance=e,d[O.BASE_LAYER_TYPE.label]=d.label||{},d[O.BASE_LAYER_TYPE.label][c]=d.label[c]||[],d[O.BASE_LAYER_TYPE.label][c].instance=e,d=this.transferData(c,d,"increment"),d.id=c,r(null,d)}}var l=this,u=!1,c=this.coord.id,f=this.parseOriginData(t,e,n,i,function(e,n){e?o.send("uploadTileImage",{zoom:l.coord.z,maxDataZoom:t.maxDataZoom,sourceId:t.sourceId,uid:l.uid,tileId:c,imgBase64:e,extImgBase64:n},function(t,e){e&&(u=!0,s.call(l,e))}):u=!0},a),d=f.layerstiles,h=f.jsonData;if(!d||!h)return void r(null,null);var v=this.getOriginalGroundFeatures(h.features,!0),p=(0,k.default)(v.ranks,c);d[O.BASE_LAYER_TYPE.base]={},d[O.BASE_LAYER_TYPE.base][c]=p;var m={};m.base=d.base,delete d.base,m=this.transferData(c,m,"base"),m.id=c,r(null,m);var _=(0,M.default)(v.buildings,c),g=(0,k.default)(v.ranksSide,c);if(d[O.BASE_LAYER_TYPE.building3d]={},d[O.BASE_LAYER_TYPE.building3d][c]={},d[O.BASE_LAYER_TYPE.building3d][c].buildings=_,d[O.BASE_LAYER_TYPE.building3d][c].buildSideShapes=g,d.arrow){var y=this.parseInstanceArrow(d.arrow,c);d[O.BASE_LAYER_TYPE.arrow]=d.arrow||{},d[O.BASE_LAYER_TYPE.arrow][c]=d.arrow[c]||[],d[O.BASE_LAYER_TYPE.arrow][c].instance=y}s.call(this)}},{key:"parseInstanceArrow",value:function(t,e){if(!t||!t[e])return null;var n=[],i=[],o=[];t[e].forEach(function(t){var e=t.datas[0];i.push(e.width),o.push.apply(o,(0,f.default)(e.color_fill)),n.push.apply(n,(0,f.default)(e.coords))});var r=new Float32Array(n),a=new Float32Array(o);return{instanceCoordsTypeArray:r,instanceWidthTypeArray:new Float32Array(i),instanceColorTypeArray:a,count:n.length/4}}},{key:"parseInstancePoint",value:function(t,e,n,i){var o=this,r=0,a=i.extOffset,s=void 0===a?0:a,l=i.yOffsetList,c=void 0===l?[]:l,d=i.glyphMapping,h=i.billboardMapping,v=i.glyphMappingBold,p=[],m=[],_=[],g=[],x=[],b=[],S=[],w=[],E=t.point&&t.point[e]||[],T=t.point&&t.point[e].filter(function(t){return t&&t.datas&&t.datas[0]&&t.datas[0].icon_coords})||[],A=[];return t.label&&t.label[e].forEach(function(t){A=A.concat(t.roads)}),T.forEach(function(t){var e=n.scale,i=n.info,o=t.datas[0];if(o&&o.icon&&o.icon_coords){var a=i[String(o.icon)];if(!a)return;var s=a.width/e/2,l=a.height/e/2,c=o.icon_coords[0],f=-o.icon_coords[1];if(p.push(c,f,0),_.push(a.left,a.bottom,a.right-a.left,a.top-a.bottom),o.stretching_len){for(var h=o.text,y=0,E=0,T=0,A=h.length;T<A;T++)!function(t,e){var n=h[t],i=n.text.length,r=[0],a=0;(0,u.default)(n.text).forEach(function(t){var e="normal"===o.font_weight?d[t]:v[t],n=o.font_size/e.fontSize;r.push(r[r.length-1]+e.width*n),a=Math.max(a,e.height*n)});var s=r[i],l=a;E=E>s?E:s,y+=l}(T);m.push(2*s,2*l,s,l),o.screenW=o.stretching_len[0]+E,o.screenH=o.stretching_len[1]+y;var P=(o.stretching_len[0]+E)/(2*s),I=(o.stretching_len[1]+y)/(2*l);g.push(P,I)}else m.push(2*s,2*l,s,l),g.push(1,1);x.push(0,1,1,1),b.push(1,1,1,1),S.push(0,0,0,0),w.push(0),t.iconSymbolIndex=r,r+=1}}),E.forEach(function(t){var e=t.datas[0];if(e.coords.length)for(var i=e.text,a=e.text_bounds,l=void 0,h=e.cidx||0,E=0,T=i.length;E<T;E++){l=2===T?a.slice(4*(1-E),4*(1-E)+4):a.slice(4*E,4*E+4);var A=0;if(A=t.isExt?c[h+s]||0:c[h]||0,l[1]+=A,!(l[2]<10||l[3]<10||0===l.length)){var P=i[E],I=(0,y.default)(P.coords,2),k=I[0],L=I[1],M=P.centerOffset,C=l[2]/n.scale,R=l[3]/n.scale,N={x:C/2,y:R/2};M&&(N={x:C/2-M.x,y:R/2-M.y}),(0,D.isDefaultStyle)(o.styleId)?(p.push(k,-L,0),m.push(C,R,N.x,N.y),_.push.apply(_,(0,f.default)(l)),x.push(0,1,0,1),P.textSymbolIndexList=[r],r+=1):"center"===e.text_align&&function(){var t=new Uint16Array(P.text.length),n=P.text.length,i=[0],o=0;(0,u.default)(P.text).forEach(function(t){var n="normal"===e.font_weight?d[t]:v[t],r=e.font_size/n.fontSize;i.push(i[i.length-1]+n.width*r),o=Math.max(o,n.height*r)});var a=i[n],s=o,l=Math.max(1,a/C,s/R);C=a,R=s,N={x:M?C/2-M.x*(e.stretching_len?1:l):C/2,y:M?R/2-M.y*(e.stretching_len?1:l):R/2};for(var c=0;c<n;c++){var h="normal"===e.font_weight?d[P.text[c]]:v[P.text[c]],y=e.font_size/h.fontSize;p.push(k,-L,0),g.push(1,1),m.push(h.width*y,h.height*y,N.x-i[c],N.y),_.push(h.x,h.y,h.width,h.height),x.push(0,1,0,1),b.push.apply(b,(0,f.default)(e.font_color)),S.push.apply(S,(0,f.default)(e.stroke_color)),w.push(e.stroke_width),t[c]=r,r+=1}P.textSymbolIndexList=t}(),P.instance_trans=[k,-L],P.instance_coords=[C,R,N.x,N.y]}}}),A.forEach(function(t){var e=t.datas[0];if(e){var n=e.text_bounds;n[1]+=c[e.cidx]||0;var i=null;if(i=e.isBillboard&&e.font_size?{w:n[2]/1.5,h:n[3]/1.5}:{w:e.font_size,h:e.font_size},p.push(e.coords[0],-e.coords[1],1),m.push(i.w,i.h,i.w/2,i.h/2),g.push(1,1),(0,D.isDefaultStyle)(o.styleId))_.push(n[0],n[1],n[2],n[3]),x.push(0,1,0,1);else if(e.isBillboard){var a=h&&h[e.text];e.text_bounds=[a.x,a.y,a.width,a.height],t.datas[1].text_bounds=[a.x,a.y,a.width,a.height],_.push(a.x,a.y,a.width,a.height),x.push(0,1,-1,1),b.push(1,1,1,1),S.push(0,0,0,0),w.push(0)}else{var s=d[e.text];e.glyph_text_bounds=[s.x,s.y,s.width,s.height],t.datas[1].glyph_text_bounds=[s.x,s.y,s.width,s.height],_.push(s.x,s.y,s.width,s.height),x.push(0,1,0,1),b.push.apply(b,(0,f.default)(e.font_color)),S.push.apply(S,(0,f.default)(e.stroke_color)),w.push(e.stroke_width)}t.roadSymbolIndex=r,r+=1}}),{instanceTransTypeArray:new Float32Array(p),instanceCoordsTypeArray:new Float32Array(m),instanceTextBoundsTypeArray:new Float32Array(_),instanceStrentchinglensTypeArray:new Float32Array(g),instanceInfosTypeArray:new Float32Array(x),instanceColorsTypeArray:new Uint8ClampedArray(b),instanceStrokeColorsTypeArray:new Uint8ClampedArray(S),instanceStrokeWidthTypeArray:new Float32Array(w),count:x.length/4}}},{key:"parsePoi",value:function(t,e,n,i){var o=n.tileSize,r={};r.cidx=t.cidx,r.coords=t[1],r.text=[],r.text_mix=t[3]||0,r.text_align="center",r.text_bounds=t[5],r.font_size=e.font_size,r.font_color=e.font_color?[].concat((0,f.default)(e.font_color.slice(0,3)),[255*e.font_color[3]]):[0,0,0,0],r.stroke_color=e.background_color?[].concat((0,f.default)(e.background_color.slice(0,3)),[255*e.background_color[3]]):[0,0,0,0];var a=t.transform,s=a.transX,l=void 0===s?0:s,u=a.transY,c=void 0===u?0:u,d=a.scale,h=void 0===d?1:d,v=(0+l)*h,p=(o+l)*h,m=(0+c)*h,_=(o+c)*h,g=t[2];switch(r.textName=g,r.font_weight=1===e.font_weight?"bold":"normal",r.font_family=e.font_family?e.font_family:"",e.effect){case 5:r.stroke_width=e.effect_size+1;break;case 6:(0,D.isDefaultStyle)(this.styleId)?(r.isBillboard=!0,this._needUploadTileImage=!0):(r.stretching_len=e.stretching_len||[0,0],r.icon=e.icon_offset,r.icon_coords=[t[1][0],t[1][1]]);case 1:case 2:default:r.background_color=null,r.stroke_width=0}if(e.icon_offset&&"65535"!==e.icon_offset&&"-1"!==e.icon_offset&&6!==e.effect){var x=e.icon_offset;r.icon=x,r.icon_coords=[t[1][0],t[1][1]],r.coords.shift(),r.coords.shift(),i&&i.isExt&&e.font_size>0&&0===r.coords.length&&(r.coords.push(r.icon_coords[0]),r.coords.push(r.icon_coords[1]+(8+e.font_size/2+2)*h),/\//.test(r.textName)&&(r.coords.push(r.icon_coords[0]),r.coords.push(r.coords[1]+(e.font_size+2)*h)))}if(r.coords[0]<v||r.coords[0]>=p||r.coords[1]<m||r.coords[1]>=_)return null;if(!r.font_size||void 0===g||"@"===g)return r;var b=g.toString(),S=r.isBillboard?[b]:b.split(/\//),w=null;r.icon_coords&&!r.stretching_len?w={x:r.icon_coords[0],y:r.icon_coords[1]}:2===S.length&&(w={x:(r.coords[0]+r.coords[2])/2,y:(r.coords[1]+r.coords[3])/2},r.stretching_len&&(r.icon_coords=[w.x,w.y]));for(var E=0,T=S.length;E<T;E++){var A=r.coords[2*E],P=r.coords[2*E+1],I=r.text_bounds,k=null;if(r.stretching_len&&4===r.text_bounds.length){var L=(0,y.default)(r.text_bounds,4),M=L[0],C=L[1],R=L[2],N=L[3];k=2===T?[M,C/2-2,R,N/2]:[M,C,R,N/2],r.text_bounds=[M,C,R,N/2,M,C/2-2,R,N/2]}else k=2===T?I.slice(4*(1-E),4*(1-E)+4):I.slice(4*E,4*E+4);var B=w?{x:(A-w.x)/h,y:(P-w.y)/h}:null,O={text:S[E],coords:w?[w.x,w.y]:[A,P],centerOffset:B,rank:t[4]};if(!(A&&P||0===A||0===P))break;r.text.push(O),r.isBillboard&&this._billboardFeatures.push({text:S[E],bounds:k,cidx:r.cidx})}return r}},{key:"parseRoadName",value:function(t,e,n,i,o,r,a){var s=a||256,l=[],u="",c=t.transform,d=c.transX,h=void 0===d?0:d,v=c.transY,p=void 0===v?0:v,m=c.scale,_=void 0===m?1:m,g=(0+h)*_,y=(s+h)*_,x=(0+p)*_,b=(s+p)*_,S=t.length/2-.5,w=void 0;if(S%1==0)w=t[S][1];else{var E=t[Math.floor(S)][1],T=t[Math.ceil(S)][1];w=[(E[0]+T[0])/2,(E[1]+T[1])/2]}if(w[0]<g||w[0]>y||w[1]<x||w[1]>b)return null;for(var A=0,P=t.length;A<P;A++){var I=t[A],k=I[0],L=Z(e,n,i,k,o);if(L){var M=[],C={};switch(C.coordScale=_,C.cidx=t.cidx,C.coords=I[1],C.text=I[2],C.text_mix=I[3]||0,C.text_bounds=I[5],C.rank=I[4],C.font_size=L.font_size,C.font_color=L.font_color?[].concat((0,f.default)(L.font_color.slice(0,3)),[255*L.font_color[3]]):[0,0,0,0],C.stroke_color=L.background_color?[].concat((0,f.default)(L.background_color.slice(0,3)),[255*L.background_color[3]]):[0,0,0,0],L.effect){case 5:C.stroke_width=L.effect_size+1;break;case 6:C.isBillboard=!0,this._needUploadTileImage=!0;case 1:case 2:default:C.background_color=null,C.stroke_width=0}u+=I[2],C.font_weight=1===L.font_weight?"bold":"normal",C.font_family=L.font_family?L.font_family:"",M.push(C),M.push(j.clone(C)),C.isBillboard&&this._billboardFeatures.push({text:C.text,bounds:C.text_bounds,cidx:C.cidx}),l.push({datas:M,font_size:L.font_size,id:r+"_"+W()})}}return{roads:l,roadName:u}}},{key:"parseArrow",value:function(t,e){var n={};return n.coords=[t[1][0],-t[1][1],t[1][2],-t[1][3]],n.color_fill=e.color_fill,n.width=e.width,n}}]),t}();t.exports=J},function(t,e,n){"use strict";function i(t,e){f[t]={};for(var n=3;n<=20;n++){var i=a(e.regionStyles,null,null,u,n);i&&(f[t][n]="rgba("+l(i.color_fill).join(",")+")")}}function o(t,e){return f[t]&&f[t][Math.floor(e)]||c}Object.defineProperty(e,"__esModule",{value:!0}),e.setBgColor=i,e.getBgColor=o;var r=n(491),a=r.getVectorStyle,s=n(10),l=s.colorToRGBA,u="196613",c="rgba(0, 0, 0, 0)",f={}},function(t,e,n){"use strict";function i(t,e){var n=t.length,i=void 0;if(1===n)e<=t[0].maxScaleVal&&e>=t[0].minScaleVal&&(i=a.objectClone(t[0]));else{var o=!0,s=!1,l=void 0;try{for(var u,c=(0,r.default)(t);!(o=(u=c.next()).done);o=!0){var f=u.value;if(e<=f.maxScaleVal&&e>=f.minScaleVal){i=a.objectClone(f);break}}}catch(t){s=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}}return i}var o=n(27),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=n(10);e.getVectorStyle=function(t,e,n,o,r){var s=t[o];if(s){var l=i(s,r);if(l&&e&&n&&l[n]){var u=e[l[n]];if(u){var c=i(u,r);c&&"-1"===c.icon_offset&&6===c.effect&&(c.icon_offset=l.icon_offset||"-1"),l=a.extend({},l,c)}}else if(e&&n){var f=s[0]&&s[0][n],d=e[f];l=i(d,r)}return l}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return new f.default(function(n){var i=t||0,o=p.default.QMAPI_poi_icon_json+i,r=-1,l="",c=null;_.default.support()?_.default.get(o,function(t){var f=JSON.parse(t);r=t?f.version:r,l=e.replace("{id}",i).replace("{version}",r),h.default.getJSON(null,l,function(t,e,l){if(!t&&e&&e.data){if("{}"!==(0,u.default)(e.data))return s({styleId:i,version:r,time:l}),c=e.data,void _.default.set(o,(0,u.default)(e),function(){n(c)});c=f.data}else a({styleId:i,version:r,err:t}),console.error(t,e),c=f.data;n(c)})}):(l=e.replace("{id}",i).replace("{version}",r),h.default.getJSON(null,l,function(t,e,o){return!t&&e&&e.data?"{}"===(0,u.default)(e.data)?(a({styleId:i,version:r,err:null}),console.error(e),void n(null)):(s({styleId:i,version:r,time:o}),c=e.data,void n(c)):(a({styleId:i,version:r,err:t}),console.error(t,e),void n(null))}))})}function r(t){var e=t.data,n=t.styleId,i=t.iconIndexSrc;return new f.default(function(t){e?_.default.support()?_.default.set(y,(0,u.default)({data:e}),function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null)):o(n,i).then(function(e){_.default.support()?_.default.set(y,(0,u.default)({data:e}),function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null))})})}function a(t){var e=t.styleId,n=t.version,i=t.err;(0,g.qos)("ii",{styleId:e,version:n,error:i&&i.status||0})}function s(t){var e=t.styleId,n=t.version,i=t.time;(0,g.qos)("ii",{styleId:e,version:n,loadTime:i})}Object.defineProperty(e,"__esModule",{value:!0}),e.setPoiIconIndex=e.loadPoiIconIndexFile=void 0;var l=n(115),u=i(l),c=n(21),f=i(c),d=n(78),h=i(d),v=n(117),p=i(v),m=n(85),_=i(m),g=n(42),y=p.default.QMAPI_poi_icon_json+"config";e.loadPoiIconIndexFile=o,e.setPoiIconIndex=r},,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),r=i(o),a=n(27),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(4),_=i(m),g=n(93),y=i(g),x=n(10),b=i(x),S=function(t){function e(){(0,f.default)(this,e);var t=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this));return t._rawGeometries=[],t._idSet={},t.geometries=[],t}return(0,_.default)(e,t),(0,h.default)(e,[{key:"_checkGeometries",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},{key:"_assignIdToGeometry",value:function(t){var e=[];return t.forEach(function(t){0===t.id||t.id?e.includes(t.id)&&(t.id=t.id+"-"+b.default.uniqueId()):t.id=b.default.uniqueId(),e.push(t.id)}),t}},{key:"_updateGeometryIdSet",value:function(t){var e={};return t.forEach(function(t,n){e[t.id]=n}),e}},{key:"_transferFromGeometry",value:function(t){var e=b.default.clone(t);return e.forEach(function(t){t.rank=t.rank||0}),e.sort(function(t,e){return t.rank-e.rank}),e}},{key:"setGeometries",value:function(t,e){this._checkGeometries(t,e),this._rawGeometries=this._assignIdToGeometry(t),this._idSet=this._updateGeometryIdSet(this._rawGeometries),this.geometries=this._transferFromGeometry(this._rawGeometries),this.emit("geometry_changed")}},{key:"getGeometries",value:function(){return b.default.clone(this._rawGeometries)}},{key:"getGeometryById",value:function(t){var e=!0,n=!1,i=void 0;try{for(var o,r=(0,s.default)(this._rawGeometries);!(e=(o=r.next()).done);e=!0){var a=o.value;if(a.id===t)return a}}catch(t){n=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}return null}},{key:"updateGeometries",value:function(t,e){var n=this;Array.isArray(t)||(t=[t]),e||this._checkGeometries(t,this.styles),[].concat((0,r.default)(this._assignIdToGeometry(t))).forEach(function(t){n._idSet.hasOwnProperty(t.id)?n._rawGeometries[n._idSet[t.id]]=t:(n._idSet[t.id]=n._rawGeometries.length,n._rawGeometries.push(t))}),this._idSet=this._updateGeometryIdSet(this._rawGeometries),this.geometries=this._transferFromGeometry(this._rawGeometries),this.emit("geometry_changed")}},{key:"add",value:function(t){var e=this;return t?(Array.isArray(t)||(t=[t]),this._checkGeometries(t,this.styles),this._assignIdToGeometry(t).forEach(function(t){e._idSet.hasOwnProperty(t.id)||(e._idSet[t.id]=e._rawGeometries.length,e._rawGeometries.push(t))}),this.updateGeometries(this._rawGeometries,!0),this):this}},{key:"remove",value:function(t){if(!t)return this;Array.isArray(t)||(t=[t]);var e=this._rawGeometries.length,n=this._rawGeometries.filter(function(e){return-1===t.indexOf(e.id)});return n.length===e?this:(this.setGeometries(n),this)}},{key:"destroy",value:function(){this._rawGeometries=[],this._idSet={},this.geometries=[]}}]),e}(y.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(40),u=i(l),c=n(28),f=n(553),d=i(f),h=n(65),v={map:0,screen:1},p={center:0,top:1,bottom:2,left:3,right:4},m={src:d.default,width:34,height:50,rotate:0,opacity:1,faceTo:"screen",color:"rgba(0, 0, 0, 1)",strokeColor:"rgba(0, 0, 0, 0)",strokeWidth:1,size:14,direction:"center",offset:new h(0,0)},_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t),this._checkMarkerPartStyle(e),this._checkLabelPartStyle(e)}return(0,s.default)(t,[{key:"_checkMarkerPartStyle",value:function(t){var e=t.src,n=void 0===e?m.src:e,i=t.width,o=void 0===i?m.width:i,r=t.height,a=void 0===r?m.height:r,s=t.anchor,l=t.rotate,f=void 0===l?m.rotate:l,d=t.opacity,v=void 0===d?m.opacity:d;u.default.isNumber(o)?o<=0&&(console.error("参数错误：MarkerStyle.width 取值要大于0，实际传入: "+o+"."),o=m.width):(new c.BaseTypeError("MarkerStyle.width","number",o).error(),o=m.width),u.default.isNumber(a)?a<=0&&(console.error("参数错误：MarkerStyle.height 取值要大于0，实际传入: "+a+"."),a=m.height):(new c.BaseTypeError("MarkerStyle.height","number",a).error(),a=m.height),u.default.isString(n)||(new c.BaseTypeError("MarkerStyle.src","string",n).error(),n=m.src),s?u.default.isValidOffset(s)||(console.error("参数错误：MarkerStyle.anchor不合法",s),s=new h(o/2,a)):s=new h(o/2,a),u.default.isNumber(f)?f<0&&(console.error("参数错误：MarkerStyle.rotate 取值要大于等于0，实际传入: "+f+"."),f=m.rotate):(new c.BaseTypeError("MarkerStyle.rotate","number",f).error(),f=m.rotate),u.default.isNumber(v)?v<0&&(console.error("参数错误：MarkerStyle.opacity 取值要大于等于0，实际传入: "+v+"."),v=m.opacity):(new c.BaseTypeError("MarkerStyle.opacity","number",v).error(),v=m.opacity);var p=new Image;/^data:/.test(n)||(p.crossOrigin="anonymous"),p.src=n,this.src=p.src,this.width=o,this.height=a,this.rotate=f,this.anchor=s,this.opacity=v}},{key:"_checkLabelPartStyle",value:function(t){var e=t.faceTo,n=void 0===e?m.faceTo:e,i=t.color,o=void 0===i?m.color:i,r=t.strokeColor,a=void 0===r?m.strokeColor:r,s=t.strokeWidth,l=void 0===s?m.strokeWidth:s,f=t.size,d=void 0===f?m.size:f,h=t.direction,_=void 0===h?m.direction:h,g=t.offset,y=void 0===g?m.offset:g;u.default.isString(n)||(new c.BaseTypeError("MarkerStyle.faceTo","string",n).error(),n=m.faceTo),u.default.isValidColor(o)||(console.error("MarkerStyle.color属性无效",o),o=m.color),u.default.isValidColor(a)||(console.error("MarkerStyle.color属性无效",a),a=m.strokeColor),u.default.isNumber(l)?l<0&&(console.error("参数错误：MarkerStyle.strokeWidth 取值要大于等于0，实际传入: "+l+"."),l=m.strokeWidth):(new c.BaseTypeError("MarkerStyle.strokeWidth","number",l).error(),l=m.strokeWidth),u.default.isNumber(d)?d<0&&(console.error("参数错误：MarkerStyle.size 取值要大于等于0，实际传入: "+d+"."),d=m.size):(new c.BaseTypeError("MarkerStyle.size","number",d).error(),d=m.size),u.default.isString(_)||(new c.BaseTypeError("MarkerStyle.direction","string",_).error(),_=m.direction),y&&!u.default.isObject(y)?(new c.BaseTypeError("MarkerStyle.offset","object",y).error(),y=m.offset):u.default.isValidOffset(y)||(console.error("参数错误：MarkerStyle.offset不合法",y),y=m.offset),this.faceTo=n in v?v[n]:v.screen,this.color=o,this.strokeColor=a,this.strokeWidth=l,this.size=d,this.direction=_ in p?p[_]:p.center,this.offset=y}}]),t}();t.exports=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if((0,k.isSimple)(t)){for(var e=[],n=0;n<t.length-1;n++){var i=[t[n],t[n+1]];e.push(i)}return e}return t.map(function(t){return o(t)}).flat()}var r=n(148),a=i(r),s=n(18),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(5),m=i(p),_=n(34),g=i(_),y=n(4),x=i(y),b=n(334),S=i(b),w=n(40),E=i(w),T=n(301),A=i(T),P=n(161),I=n(57),k=n(475),L=n(28),M=E.default.isValidColor,C=E.default.isValidLatLng,R=function(t){function e(t){return(0,d.default)(this,e),(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t))}return(0,x.default)(e,t),(0,v.default)(e,[{key:"_initialize",value:function(t){this.enableGeodesic=t.enableGeodesic||!1,this._eraseOpts={}}},{key:"_setGeometryType",value:function(){this._geometryType=P.GEOMETRY_TYPES.POLYLINE,this._layerType=I.RENDER_LAYER_TYPE.polyline,this._className="MultiPolyline"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素不存在！");var n=t.paths,i=t.rainbowPaths;n||i||console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的未传入路径信息！"),!n||(0,k.isSimple)(n)||(0,k.isComplexLine)(n)||console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的paths属性无效！"),Array.isArray(i)&&i.length>0&&(i.map(function(t,n){return t.color&&!M(t.color)&&console.error("MultiPolyline.geometries: 第"+e+"元素的rainbowPaths中的第"+n+"个元素的color属性无效！"),t.borderColor&&!M(t.borderColor)&&console.error("MultiPolyline.geometries: 第"+e+"元素的rainbowPaths中的第"+n+"个元素的borderColor属性无效！"),t.path}).every(function(t){return(0,k.isSimple)(t)})?delete t.paths:console.error("MultiPolyline.geometries: 希望传入PolylineGeometry数组，实际第"+e+"元素的rainbowPath属性无效！"))})}},{key:"_getRenderSourceData",value:function(){return{type:this._geometryType,styles:this.styles,enableGeodesic:this.enableGeodesic||!1,_eraseOpts:this._eraseOpts||null,geometries:this._getRenderableGeometries()}}},{key:"_getDefaultStyle",value:function(){return new S.default}},{key:"_checkStyles",value:function(t){var n=this;(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"_checkStyles",this).call(this,t),(0,l.default)(t).forEach(function(e){var i=t[e];i&&i instanceof S.default?i.width&&i.width>0&&i.width%1==0?M(i.color)?"borderWidth"in i&&!(i.borderWidth>=0&&i.borderWidth%1==0)?console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.borderWidth属性无效",i):"borderColor"in i&&!M(i.borderColor)?console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.borderColor属性无效",i):M(i.eraseColor)||(console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.eraseColor属性无效",i),t[e].eraseColor=n._getDefaultStyle().eraseColor):console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.color属性无效",i):console.error("MultiPolyline.styles: 样式id ",e," 对应的PolylineStyle.width属性无效",i):console.error("MultiPolyline.styles: 样式id ",e,"希望传入PolylineStyle实例，实际传入：",i)})}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.paths.flat(1/0)}).flat()}},{key:"_getAllSegments",value:function(){return this.getGeometries().map(function(t){return o(t.paths)}).flat()}},{key:"eraseTo",value:function(t,e,n){if(this._checkEraseParams(t,e,n)){var i=this.getGeometryById(t);if(!i)return console.error("eraseTo: 不存在id为"+t+"的polyline geometry 对象"),this;if(e>i.paths.length-1||e<=0)return console.error("eraseTo: 坐标索引index："+e+" 不在对应path点串区间内"),this;this._eraseOpts[t]={index:e,point:n},this.map.getSource(this.id).setData(this._getRenderSourceData())}return this}},{key:"_checkEraseParams",value:function(t,e,n){return C(n)?"number"!=typeof e||(0,a.default)(e)?(console.error("eraseTo方法中参数index: "+e+"不合法!"),!1):"string"==typeof t||(new L.ClassTypeError("eraseTo的参数id["+t+"]","String",t).error(),!1):(new L.ClassTypeError("eraseTo方法中的参数point["+n+"]","LatLng",n).error(),!1)}}]),e}(A.default);t.exports=R},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.defaultLogoRules=[{level:[0,6],districts:[{rule:0,priority:0,frontier:"default",logo_name:"tencent",logo:"https://mapapi.qq.com/sdk/overseamap/logo/202107/tencent_color_logo.png",logo_night:"https://mapapi.qq.com/sdk/overseamap/logo/202107/tencent_color_logo_night.png"}]},{level:[7,18],districts:[{rule:0,priority:0,frontier:"taiwan",logo_name:"taiwan",logo:"https://mapapi.qq.com/sdk/overseamap/logo/HERE_Logo_black.png",logo_night:""},{rule:0,priority:0,frontier:"default",logo_name:"tencent",logo:"https://mapapi.qq.com/sdk/overseamap/logo/202107/tencent_color_logo.png",logo_night:"https://mapapi.qq.com/sdk/overseamap/logo/202107/tencent_color_logo_night.png"}]}],e.defaultFrontier={version:7,china:"124.240000,39.863000:127.060000,41.420000:128.320000,41.340000:128.338164,41.966811:129.070015,42.006633:129.392187,42.394602:129.544000,42.337000:129.757733,42.443019:129.915455,42.958121:130.581000,42.411000:130.664000,42.409000:130.660000,42.750000:131.056800,42.832500:131.362267,43.147780:131.359097,44.050378:131.184574,44.758711:131.911825,45.219501:133.163642,44.937724:135.144366,48.211013:135.144366,48.597000:131.071828,48.211013:130.773650,49.035551:128.751969,49.726565:125.969075,53.154351:123.347269,53.704738:120.827269,53.390754:119.713597,52.637780:120.321762,52.210396:118.926328,50.226355:117.662701,49.700280:116.622716,49.956516:115.284508,48.000368:116.104389,47.451176:118.485448,47.755809:119.550866,46.911548:117.463642,46.804509:113.640000,45.105329:111.969090,45.243847:111.267254,44.465714:111.589045,43.737317:109.905388,42.763982:107.448179,42.614694:105.337313,41.946215:100.992746,42.800196:96.838239,42.914056:95.070866,44.957807:91.816477,45.242319:91.161836,46.742245:90.130007,47.948495:88.699097,48.336174:87.883642,49.202090:86.809933,49.172099:85.459963,48.255788:85.328157,47.119427:82.919985,47.328453:82.134523,45.619623:82.396343,45.291415:81.735685,45.446091:79.797183,45.018009:80.618157,43.259401:80.112694,42.868284:80.120896,42.260590:77.976351,41.282314:76.788172,41.096389:76.197254,40.491205:75.361880,40.846808:73.365418,39.794560:73.634523,38.503352:74.669067,38.423003:74.896815,37.310540:74.429528,37.294106:74.454501,36.972073:75.734530,36.578999:75.962701,35.784605:77.852731,35.299899:78.205470,34.574291:78.973568,32.910437:78.263619,32.582183:78.649985,30.992536:81.199112,29.930890:81.625396,30.231654:85.988179,27.769037:88.674612,27.787987:88.840910,27.047339:89.241858,27.247275:89.644552,28.077447:90.426358,28.002589:91.425425,27.605415:92.127284,26.721880:93.834582,26.907073:95.855604,28.198876:97.000074,27.593593:97.491836,27.849236:97.700896,28.296779:98.301769,27.394792:98.605433,27.417494:98.502702,26.026786:97.440895,25.088802:97.485448,23.745403:98.497224,24.030523:98.809985,23.174956:99.324515,22.945024:99.099993,22.084196:100.205485,21.391178:101.003735,21.463004:101.278198,21.122876:101.931836,21.129823:101.785481,22.197373:102.650063,22.558783:103.074619,22.382137:103.979093,22.474798:104.809933,22.767793:105.399978,23.049961:106.469971,22.704082:106.610899,21.787060:107.897261,21.372454:107.490036,19.305984:109.748489,14.674666:110.039063,11.480025:107.666016,6.271618:111.752930,3.281824:112.939454,3.413421:115.018257,6.054474:118.674316,10.790140:119.164223,12.212996:119.707031,18.020528:121.959229,21.677848:122.699226,23.809795:127.303391,24.447079:127.390663,31.568056:124.335754,32.823666",inland:"124.240000,39.863000:127.060000,41.420000:128.320000,41.340000:128.338164,41.966811:129.070015,42.006633:129.392187,42.394602:129.544000,42.337000:129.757733,42.443019:129.915455,42.958121:130.581000,42.411000:130.664000,42.409000:130.660000,42.750000:131.056800,42.832500:131.362267,43.147780:131.359097,44.050378:131.184574,44.758711:131.911825,45.219501:133.163642,44.937724:135.144366,48.211013:135.144366,48.597000:131.071828,48.211013:130.773650,49.035551:128.751969,49.726565:125.969075,53.154351:123.347269,53.704738:120.827269,53.390754:119.713597,52.637780:120.321762,52.210396:118.926328,50.226355:117.662701,49.700280:116.622716,49.956516:115.284508,48.000368:116.104389,47.451176:118.485448,47.755809:119.550866,46.911548:117.463642,46.804509:113.640000,45.105329:111.969090,45.243847:111.267254,44.465714:111.589045,43.737317:109.905388,42.763982:107.448179,42.614694:105.337313,41.946215:100.992746,42.800196:96.838239,42.914056:95.070866,44.957807:91.816477,45.242319:91.161836,46.742245:90.130007,47.948495:88.699097,48.336174:87.883642,49.202090:86.809933,49.172099:85.459963,48.255788:85.328157,47.119427:82.919985,47.328453:82.134523,45.619623:82.396343,45.291415:81.735685,45.446091:79.797183,45.018009:80.618157,43.259401:80.112694,42.868284:80.120896,42.260590:77.976351,41.282314:76.788172,41.096389:76.197254,40.491205:75.361880,40.846808:73.365418,39.794560:73.634523,38.503352:74.669067,38.423003:74.896815,37.310540:74.429528,37.294106:74.454501,36.972073:75.734530,36.578999:75.962701,35.784605:77.852731,35.299899:78.205470,34.574291:78.973568,32.910437:78.263619,32.582183:78.649985,30.992536:81.199112,29.930890:81.625396,30.231654:85.988179,27.769037:88.674612,27.787987:88.840910,27.047339:89.241858,27.247275:89.644552,28.077447:90.426358,28.002589:91.425425,27.605415:92.127284,26.721880:93.834582,26.907073:95.855604,28.198876:97.000074,27.593593:97.491836,27.849236:97.700896,28.296779:98.301769,27.394792:98.605433,27.417494:98.502702,26.026786:97.440895,25.088802:97.485448,23.745403:98.497224,24.030523:98.809985,23.174956:99.324515,22.945024:99.099993,22.084196:100.205485,21.391178:101.003735,21.463004:101.278198,21.122876:101.931836,21.129823:101.785481,22.197373:102.650063,22.558783:103.074619,22.382137:103.979093,22.474798:104.809933,22.767793:105.399978,23.049961:106.469971,22.704082:106.610899,21.787060:107.897261,21.372454:107.490036,19.305984:109.748489,14.674666:110.039063,11.480025:107.666016,6.271618:111.752930,3.281824:112.939454,3.413421:115.018257,6.054474:118.674316,10.790140:119.164223,12.212996:119.707031,18.020528:121.397269,20.720622:118.487770,21.778166:119.578789,24.089008:120.465831,25.121382:121.207406,25.815692:121.869972,25.849447:122.599226,25.209509:122.699226,23.809795:127.303391,24.447079:127.390663,31.568056:124.335754,32.823666",japan:"130.058874,35.187485:133.208436,36.728760:135.302372,36.335340:136.056445,37.097326:137.028118,38.068999:138.937959,39.610275:139.004971,42.659319:140.278198,45.741869:141.661984,45.763377:144.566964,44.736690:148.890681,46.139089:149.266393,45.455293:147.984574,43.664498:142.757641,41.453104:142.925171,39.610275:141.098416,34.356762:142.992183,27.280073:141.450908,24.432065:131.432619,25.504256:127.303391,24.447079:127.390663,31.568056:127.210208,33.397935:127.728060,33.848258:128.693979,34.488846:129.402013,35.158401",taiwan:"121.397269,20.720622:118.487770,21.778166:119.578789,24.089008:120.465831,25.121382:121.207406,25.815692:121.869972,25.849447:122.599226,25.209509:122.699226,23.809795:121.959229,21.677848"}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return new l.default(function(t){var e=c.default.QMAPI_oversea;d.default.support()?d.default.get(e,function(e){e||t(null);try{g=JSON.parse(e),t(g)}catch(e){t(null)}}):t(null)})}function r(t){var e=c.default.QMAPI_oversea;d.default.support()&&d.default.set(e,t)}function a(t){var e=t&&t.info&&t.info.frontier&&t.info.frontier.path;return e?new l.default(function(t){m(e,function(e,n){e&&t(g||p.defaultFrontier);try{var i=_.inflate(n.data,{to:"string"});r(i);var o=JSON.parse(i);t(o)}catch(e){t(g||p.defaultFrontier)}})}):new l.default(function(t){o().then(function(e){t(e||p.defaultFrontier)})})}Object.defineProperty(e,"__esModule",{value:!0});var s=n(21),l=i(s);e.getStorageFrontier=o,e.getOnlineFrontier=a;var u=n(117),c=i(u),f=n(85),d=i(f),h=n(78),v=i(h),p=n(501),m=v.default.getArrayBuffer,_=n(546),g=null},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ScheduleTaskQueue=e.ScheduleTaskNode=void 0;var o=n(0),r=i(o),a=n(1),s=i(a),l=n(26),u=i(l);e.ScheduleTaskNode=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t),this.prev=null,this.next=null,this.callback=null,this._expirationTime=e.expirationTime||u.default.now()+150}return(0,s.default)(t,[{key:"isTimeout",value:function(){return u.default.now()>=this._expirationTime}},{key:"setCallback",value:function(t){this.callback=t}},{key:"runTask",value:function(){var t=null;try{this.callback&&(t=this.callback())}catch(t){console.error(t)}"function"==typeof t?this.setCallback(t):this.remove()}},{key:"remove",value:function(){this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.queue&&this.queue.first===this&&(this.queue.first=this.next),this.queue&&this.queue.last===this&&(this.queue.last=this.prev),this.prev=null,this.next=null,this.callback=null,this.queue=null}},{key:"addToQueue",value:function(t){this.queue=t,this.queue.last?(this.queue.last.next=this,this.prev=this.queue.last,this.queue.last=this):this.queue.last=this,this.queue.first||(this.queue.first=this)}}]),t}(),e.ScheduleTaskQueue=function t(){(0,r.default)(this,t),this.first=null,this.last=null}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(332),p=i(v),m=n(505),_=i(m),g=n(10),y=n(125),x=n(782),b=n(40),S=i(b),w=n(28),E=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this)),i=t.map,o=t.id,a=void 0===o?(0,g.uniqueId)():o,l=t.zIndex,u=void 0===l?0:l;return n.id=a,n.level=y.LAYER_LEVEL.OVERLAY_AA,n.zIndex=0,n.rank=(0,y.getRank)(n.level,n.zIndex),n.setZIndex(u),n.onInit(t),i&&i instanceof p.default&&n.addTo(i),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"onInit",value:function(){}},{key:"addTo",value:function(t){if(t!==this.map)return this.remove(),t.addVisualPlugin(this),this.map=t,this.gl=t.renderEngine.gl,this.onAddToMap({canvas:t.canvasContainer,camera:t.renderEngine.camera}),this}},{key:"remove",value:function(){return this.map&&(this.map.removeVisualPlugin(this.id),this.onRemoveFromMap(),this.map=null,this.gl=null),this}},{key:"redraw",value:function(){return this.map&&this.map._render(),this}},{key:"draw",value:function(){var t=this,e=this.gl;e&&(0,x.preserveParameters)(e,{DEPTH_TEST:!1,STENCIL_TEST:!1,BLEND:!0,CULL_FACE:!1,CULL_FACE_MODE:e.BACK,BLEND_SRC_RGB:e.ONE,BLEND_DST_RGB:e.ONE_MINUS_SRC_ALPHA,BLEND_SRC_ALPHA:e.ONE,BLEND_DST_ALPHA:e.ONE_MINUS_SRC_ALPHA,VIEWPORT:[0,0,e.canvas.width,e.canvas.height],UNPACK_FLIP_Y_WEBGL:!1,UNPACK_PREMULTIPLY_ALPHA_WEBGL:!1},function(){t.onDraw()})}},{key:"setZIndex",value:function(t){return S.default.isNumber(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):(this.zIndex=t,this.rank=(0,y.getRank)(this.level,this.zIndex),this):(new w.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setLevel",value:function(t){this.level=t,this.rank=(0,y.getRank)(t,this.zIndex)}},{key:"getId",value:function(){return this.id}},{key:"onAddToMap",value:function(){}},{key:"onRemoveFromMap",value:function(){}},{key:"onDraw",value:function(){}}]),e}(_.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(3),r=i(o),a=n(0),s=i(a),l=n(5),u=i(l),c=n(4),f=i(c),d=n(93),h=function(t){function e(){return(0,s.default)(this,e),(0,u.default)(this,(e.__proto__||(0,r.default)(e)).call(this))}return(0,f.default)(e,t),e}(d);t.exports=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){switch(t.type){case p.LIGHT_TYPE.POINT:return new S(t);case p.LIGHT_TYPE.DIRECTION:return new b(t);case p.LIGHT_TYPE.AMBIENT:default:return new x(t)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),s=n(5),l=i(s),u=n(4),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h);e.default=o;var p=n(336),m=n(10),_=n(94),g=n(223),y=i(g),x=function(){function t(e){var n=e.id,i=e.color,o=void 0===i?"#FFFFFF":i,r=e.intensity,a=void 0===r?1:r,s=e.type;(0,d.default)(this,t),this.id=n||(0,m.uniqueId)(),this.color=o,this.intensity=a,this.type=s}return(0,v.default)(t,[{key:"color",get:function(){var t=this;return this._color.map(function(e){return e*t.intensity})},set:function(t){this._color=new y.default(t,{max:1}).toArray().slice(0,3)}}]),t}(),b=function(t){function e(t){(0,d.default)(this,e);var n=(0,l.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.direction=t.direction,n}return(0,c.default)(e,t),(0,v.default)(e,[{key:"direction",get:function(){return this._direction.elements},set:function(t){this._direction=new _.Vector3(t||[0,0,-1]).normalize().scale(-1,-1,-1)}}]),e}(x),S=function(t){function e(t){(0,d.default)(this,e);var n=(0,l.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n.position=t.position,n.height=t.height,n.attenuation=t.attenuation||[1,.045,.0075],n}return(0,c.default)(e,t),e}(x)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=new Float32Array(8*t*t),n=new Uint8Array(6*t*t),i=0,o=0;o<t;o++)for(var r=0;r<t;r++){var a=[r/t,o/t],s=1/t,l=8*i;e[l]=a[0],e[l+1]=a[1],e[l+2]=a[0],e[l+3]=a[1]+s,e[l+4]=a[0]+s,e[l+5]=a[1],e[l+6]=a[0]+s,e[l+7]=a[1]+s;var u=6*i,c=4*i;n[u+0]=c+0,n[u+1]=c+2,n[u+2]=c+1,n[u+3]=c+1,n[u+4]=c+2,n[u+5]=c+3,i+=1}return{vertices:e,indices:n}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=i(r),s=n(3),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f),h=n(5),v=i(h),p=n(34),m=i(p),_=n(4),g=i(_),y=n(338),x=i(y),b=n(589),S=n(118),w=function(t){function e(t){(0,c.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.defaultShaderConfig={source:b.defaultShader,params:{attributes:["a_position"],uniforms:["u_matrix","u_size","u_texInfo","u_opacity","u_sampler"]},geometry:{vertices:new Float32Array([0,0,0,1,1,0,1,1]),indices:new Uint8Array([0,2,1,1,2,3])}},n.sphereShaderConfig={source:b.sphereShader,params:{attributes:["a_position"],uniforms:["u_matrix","u_size","u_texInfo","u_opacity","u_sampler","u_mercator","uZoom","uCenter","uMatrix","u_ratio","u_wireframe"]},geometry:o(4)},n.shaderSource=n.defaultShaderConfig.source,n.shaderParams=n.defaultShaderConfig.params,n}return(0,g.default)(e,t),(0,d.default)(e,[{key:"preDraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isSphere,i=n?this.sphereShaderConfig:this.defaultShaderConfig,o=i.source,r=i.params,a=i.geometry;if(this.shaderSource=o,this.shaderParams=r,(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"preDraw",this).call(this),!i.buffers){var s=a.vertices,u=a.indices;i.buffers=this.createBuffer(null,s,u)}this.buffers=i.buffers,this.bindBuffer()}},{key:"bindBuffer",value:function(){var t=this.gl;this.buffers.vertices.bind(),this.buffers.vertices.pointToAttrib({location:this.a_position,size:2,type:t.FLOAT}),this.buffers.indices.bind()}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isSphere?this.drawOnSphere(t):this.drawOnPlane(t)}},{key:"drawOnPlane",value:function(t){var e=t.matrix,n=t.size,i=t.texInfo,o=t.opacity,r=this.gl;r.uniformMatrix4fv(this.u_matrix,!1,e.elements),r.uniform1i(this.u_sampler,0),r.uniform2f(this.u_size,n.width,n.height),r.uniform4f(this.u_texInfo,i.s,i.t,i.w,i.h),r.uniform1f(this.u_opacity,o),r.drawElements(r.TRIANGLES,this.buffers.length,r.UNSIGNED_BYTE,0)}},{key:"drawOnSphere",value:function(t){var e=t.mercator,n=t.zoom,i=t.center,o=t.pvMatrix,r=t.matrix,s=t.size,l=t.texInfo,u=t.opacity,c=t.viewTransition,f=void 0===c?1:c,d=this.gl,h=(0,S.splitLatLngNumber)(i.lat),v=(0,S.splitLatLngNumber)(i.lng);d.uniformMatrix4fv(this.u_matrix,!1,r.elements),d.uniform1i(this.u_sampler,0),d.uniform2f(this.u_size,s.width,s.height),d.uniform4f(this.u_texInfo,l.s,l.t,l.w,l.h),d.uniform1f(this.u_opacity,u),d.uniform3f.apply(d,[this.u_mercator].concat((0,a.default)(e))),d.uniform1f(this.u_ratio,f),d.uniform1f(this.uZoom,n),d.uniform4f(this.uCenter,v.high,h.high,v.low,h.low),d.uniformMatrix4fv(this.uMatrix,!1,o.elements),d.uniform1f(this.u_wireframe,0),d.drawElements(d.TRIANGLES,this.buffers.length,d.UNSIGNED_BYTE,0)}},{key:"destroy",value:function(){this.buffers&&(this.buffers.vertices.delete(),this.buffers.indices.delete()),this.vertices=null,this.indices=null,(0,m.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"destroy",this).call(this)}}]),e}(x.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m),g=n(159),y=i(g),x=n(109),b=n(118),S=n(146),w=i(S),E=n(222),T=n(10),A=i(T),P=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t)),i=t.attribList||[],o=t.uniformList||[];return n.shaderParams={attributes:i.concat(["positions","instancePositions","instancePositions64xyLow","instanceSizes","instanceInfos","instancePickingColors","instanceFrames","instancePixelOffset"]),uniforms:o.concat(["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","picking_zindex","u_sizeScale","u_sizeMinPixels","u_sizeMaxPixels","u_textureDim","u_opacity","u_sampler","u_mapScale"])},n.modelPositions=new Int16Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),n.store=new x.Store("buffer",128,16,E.deleteInstanceCacllback),n.symbolManager=null,n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e&&this.symbolManager.canvas){var r=t.center,a=t.zoom,s=t.getDistanceRatio(),l=i.distanceScales,u=(0,b.splitLatLngNumber)(r.lat),c=(0,b.splitLatLngNumber)(r.lng);o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,s,s,s),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,t.width,t.height),o.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),o.uniform1f(this.picking_zindex,i.picking_zindex||0),o.uniform1f(this.u_sizeScale,1),o.uniform1f(this.u_sizeMinPixels,0),o.uniform1f(this.u_sizeMaxPixels,1e3),o.uniform2f(this.u_textureDim,this.symbolManager.canvas.width,this.symbolManager.canvas.height),o.uniform1f(this.u_opacity,1),o.uniform1f(this.u_mapScale,t.scale),this._onDraw(),this.drawTileInstance(n.uid,n)}}},{key:"drawTileInstance",value:function(t,e){var n=this.gl,i=this.store,o=!1;if(i){if(i.exist(t)){var r=i.get(t).instanceBuffers;this.isBufferChanged(r,e)&&(o=!0)}else i.set(t,this.createBuffer(t,e));var a=i.get(t);a.positions.bind(),a.positions.pointToAttrib({location:this.positions,size:3,type:n.SHORT}),A.default.forIn(a.instanceBuffers,function(t,i){var r=i.buffer,a=i.location,s=i.size,l=i.type;r.bind(),o&&(r.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),r.pointToAttrib({location:a,size:s,type:l}),n.vertexAttribDivisor(a,1)}),n.drawArraysInstanced(n.TRIANGLE_FAN,0,4,e.count),n.bindBuffer(n.ARRAY_BUFFER,null),n.vertexAttribDivisor(this.instancePositions,0),n.vertexAttribDivisor(this.instancePositions64xyLow,0),n.vertexAttribDivisor(this.instanceSizes,0),n.vertexAttribDivisor(this.instanceInfos,0),n.vertexAttribDivisor(this.instancePickingColors,0),n.vertexAttribDivisor(this.instanceFrames,0),n.vertexAttribDivisor(this.instancePixelOffset,0),this._onDrawInstanceTile()}}},{key:"getInstanceConfig",value:function(){var t=this.gl;return{instancePositionList:{location:this.instancePositions,size:3,type:t.FLOAT},instancePosition64xyLowList:{location:this.instancePositions64xyLow,size:2,type:t.FLOAT},instanceSizeList:{location:this.instanceSizes,size:2,type:t.UNSIGNED_SHORT},instanceInfoList:{location:this.instanceInfos,size:4,type:t.FLOAT},instancePickingColorList:{location:this.instancePickingColors,size:3,type:t.UNSIGNED_BYTE},instanceFrameList:{location:this.instanceFrames,size:4,type:t.FLOAT},instancePixelOffsetList:{location:this.instancePixelOffset,size:3,type:t.FLOAT}}}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.modelPositions&&(i.positions=new w.default(n,{data:this.modelPositions})),e){var o=this.getInstanceConfig();A.default.forIn(o,function(t,o){i.instanceBuffers[t]=(0,r.default)({data:e[t],buffer:new w.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},o)})}return i}},{key:"afterDraw",value:function(){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"loadTexture",value:function(){this.symbolManager.canvas&&this.symbolManager.uploadToGPU({textureIndex:0,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}},{key:"_onDraw",value:function(){}},{key:"_onDrawInstanceTile",value:function(){}},{key:"destroy",value:function(){this.modelPositions=null,this.symbolManager=null,(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=P},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return{x:t&&t.width||1,y:t&&t.height||1}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),s=n(18),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(5),m=i(p),_=n(34),g=i(_),y=n(4),x=i(y),b=n(338),S=i(b),w=n(598),E=i(w),T=n(599),A=i(T),P=n(147),I=i(P),k=n(109),L=n(146),M=i(L),C=n(10),R=i(C),N=n(26),B=i(N),O=1/16/B.default.devicePixelRatio,D=function(t){function e(t){(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t));return n.textCache=t.textCache,n.glyphManager=t.glyphManager,n.markerManager=t.markerManager,n.shaderSource=n.textCache?A.default:E.default,n._store=new k.Store("buffer",100,16,function(t){t.positions&&t.positions.delete(),t.indices&&t.indices.delete(),t.instanceBuffers&&(0,l.default)(t.instanceBuffers).forEach(function(e){var n=t.instanceBuffers[e];n.data=null,n.buffer.delete()})}),n.shaderParams={attributes:["a_Positions","a_InstanceTrans","a_InstanceCoords","a_InstanceTextBounds","a_InstanceStrentchinglens","a_InstanceInfo","a_InstanceColors","a_InstanceStrokeColors","a_InstanceStrokeWidth"],uniforms:["u_matrix","u_resolution","u_fadeChange","u_showPoint","u_showLabel","u_mapScale","u_InstanceTileTextureOffset","u_iconTextureResolution","u_billboardTextureResolution","u_textTextureResolution","u_glyphTextureResolution","u_SamplerGlyph","u_SamplerText","u_SamplerIcon","u_SamplerMask","u_asbackground","u_gamma","u_buffer","u_maskScale","u_sdfRadius"]},n.positions=new Int16Array([-1,1,1,1,-1,-1,1,-1]),n.indices=new Uint8Array([0,2,1,1,2,3]),n}return(0,x.default)(e,t),(0,v.default)(e,[{key:"setCommonUniforms",value:function(t,e){var n=this.gl;n.uniform2f(this.u_resolution,t.width,t.height),n.uniform2f(this.u_billboardTextureResolution,o(this.markerManager.canvas).x,o(this.markerManager.canvas).y),n.uniform2f(this.u_textTextureResolution,o(this.textCache).x,o(this.textCache).y),n.uniform2f(this.u_glyphTextureResolution,o(this.glyphManager.canvas).x,o(this.glyphManager.canvas).y),n.uniform2f(this.u_iconTextureResolution,o(e.iconsLoader.img).x,o(e.iconsLoader.img).y),n.uniform1f(this.u_asbackground,e.asBackground?1:0),n.uniform1f(this.u_fadeChange,e.fadeChange||0),n.uniform1f(this.u_maskScale,e.maskScale||1),n.uniform1f(this.u_showPoint,!1===e.showPoint?0:1),n.uniform1f(this.u_showLabel,!1===e.showLabel?0:1),n.uniform1f(this.u_mapScale,t.scale),n.uniform1i(this.u_SamplerText,0),n.uniform1i(this.u_SamplerGlyph,2),n.uniform1f(this.u_gamma,O),n.uniform1f(this.u_buffer,.71),n.uniform1f(this.u_sdfRadius,this.glyphManager.setting.radius)}},{key:"draw",value:function(t,e,n,i){var o=this,r=this.gl;n&&((0,l.default)(n.textDataSet).length>0||(0,l.default)(n.poiDataSet).length>0)&&(r.useProgram(r.program),this.setCommonUniforms(t,i),r.uniform1i(this.u_SamplerIcon,1),r.uniform1i(this.u_SamplerMask,3),R.default.forIn(e,function(t,e){if(n.instanceSet[t]&&!n.instanceSet[t].isIndoor&&(!o.textCache||o.textCache.tiles[t])){var a=o.textCache&&o.textCache.tiles[t]||{};r.uniformMatrix4fv(o.u_matrix,!1,e.elements),r.uniform2f(o.u_InstanceTileTextureOffset,a.x||0,a.y||0),o.drawTileInstance(t,n.instanceSet[t],i.updateSubData)}}))}},{key:"drawTileInstance",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(e.count<1)){var o=this.gl,r=this._store;r.exist(t)||r.set(t,this.createBuffer(t,e,i));var a=r.get(t);a.positions.bind(),a.positions.pointToAttrib({location:this.a_Positions,size:2,type:o.SHORT}),a.indices.bind(),R.default.forIn(a.instanceBuffers,function(t,i){var r=i.buffer,a=i.location,s=i.size,l=i.type;r.bind(),n&&i.updatable&&(r.bufferData(e[t],{usage:o.DYNAMIC_DRAW}),i.data=e[t]),r.pointToAttrib({location:a,size:s,type:l}),o.vertexAttribDivisor(a,1)}),o.drawElementsInstanced(o.TRIANGLES,this.indices.length,o.UNSIGNED_BYTE,0,e.count),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),o.vertexAttribDivisor(this.a_InstanceTrans,0),o.vertexAttribDivisor(this.a_InstanceCoords,0),o.vertexAttribDivisor(this.a_InstanceTextBounds,0),o.vertexAttribDivisor(this.a_InstanceInfo,0),this.textCache||(!i&&o.vertexAttribDivisor(this.a_InstanceStrentchinglens,0),o.vertexAttribDivisor(this.a_InstanceColors,0),o.vertexAttribDivisor(this.a_InstanceStrokeColors,0),!i&&o.vertexAttribDivisor(this.a_InstanceStrokeWidth,0))}}},{key:"createBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.gl,o={positions:null,indices:null,instanceBuffers:{}};if(this.positions&&(o.positions=new M.default(i,{data:this.positions})),this.indices&&(o.indices=new M.default(i,{target:i.ELEMENT_ARRAY_BUFFER,data:this.indices})),e){var r={instanceTransTypeArray:{location:this.a_InstanceTrans,size:3,type:i.FLOAT,updatable:!0},instanceCoordsTypeArray:{location:this.a_InstanceCoords,size:4,type:i.FLOAT},instanceTextBoundsTypeArray:{location:this.a_InstanceTextBounds,size:4,type:i.FLOAT,updatable:!0},instanceInfosTypeArray:{location:this.a_InstanceInfo,size:4,type:i.FLOAT,updatable:!0}};this.textCache||(!n&&(r.instanceStrentchinglensTypeArray={location:this.a_InstanceStrentchinglens,size:2,type:i.FLOAT,updatable:!0}),r.instanceColorsTypeArray={location:this.a_InstanceColors,size:4,type:i.UNSIGNED_BYTE},r.instanceStrokeColorsTypeArray={location:this.a_InstanceStrokeColors,size:4,type:i.UNSIGNED_BYTE},!n&&(r.instanceStrokeWidthTypeArray={location:this.a_InstanceStrokeWidth,size:1,type:i.FLOAT})),R.default.forIn(r,function(t,n){o.instanceBuffers[t]=(0,a.default)({data:e[t],buffer:new M.default(i,{data:e[t],usage:i.DYNAMIC_DRAW})},n)})}return o}},{key:"afterDraw",value:function(){(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"afterDraw",this).call(this),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"loadTexture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.textCache?this.textCache.loadTexture():this.loadManagerTexture(this.markerManager,0),this.loadIconTexture(t),this.loadManagerTexture(this.glyphManager,2),t.maskTexture&&t.maskTexture.bind(this.gl,{textureIndex:3})}},{key:"loadIconTexture",value:function(t){var e=t.iconsLoader;if(e&&e.img){var n=this.gl;if(this.texture)this.texture.bind(null,{textureIndex:1});else{n.useProgram(n.program);var i=new I.default(n,{pixels:e.img});i.upload({flipY:!0,textureIndex:1});var o=n.getUniformLocation(n.program,"u_SamplerIcon");n.uniform1i(o,1),this.texture=i}}}},{key:"loadManagerTexture",value:function(t,e){t&&t.canvas&&t.uploadToGPU({textureIndex:e,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}},{key:"clear",value:function(){this._store.clear(),this.texture&&(this.texture.destroy(),this.texture=null)}},{key:"destroy",value:function(){this.textCache=null,this.glyphManager=null,this.markerManager=null,this.positions=null,this.indices=null,this._store.clear(),this._store=null,this.texture&&(this.texture.destroy(),this.texture=null),(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"destroy",this).call(this)}}]),e}(S.default);e.default=D},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(279),_=i(m),g=n(147),y=i(g),x=n(511),b=i(x),S=n(40),w=i(S),E=function(t){function e(t,n){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n))}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_onCreate",value:function(){return this.gl.createFramebuffer()}},{key:"_onDelete",value:function(t){t||(this._colorAttach.forEach(function(t){return t.delete()}),this._depthAttach.delete()),this._colorAttach=null,this._depthAttach=null,this.unbind(!0),this.gl.deleteFramebuffer(this._object)}},{key:"_initialize",value:function(t){var e=this,n=t.width,i=void 0===n?1:n,o=t.height,r=void 0===o?1:o,a=t.attachments,s=void 0===a?{}:a,l=t.drawBuffers;this.width=i,this.height=r,this._colorAttach=[],this._depthAttach=null;var u=void 0,c=void 0;s&&(u=s.color,c=s.depth),w.default.isArray(u)?u.forEach(function(t,n){e.attach("color",t,{colorIndex:n})}):this.attach("color",u),this.attach("depth",c),l&&this.setDrawBuffers(l)}},{key:"_createDefaultAttachment",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.gl,i=null;switch(t){case"color":i=new y.default(n,(0,r.default)({pixels:null},e));break;case"depth":i=new b.default(n,e)}return i}},{key:"bind",value:function(t){t=t||this.gl,t.bindFramebuffer(t.FRAMEBUFFER,this._object),t.frameBuffer=this}},{key:"unbind",value:function(t){t||(this._colorAttach.forEach(function(t){return t.unbind()}),this._depthAttach.unbind()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.frameBuffer=null}},{key:"attach",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.resizeAttach,o=void 0===i||i,r=n.colorIndex,a=void 0===r?0:r,s=this.gl,l=this.width,u=this.height;switch(this.bind(),e instanceof y.default||e instanceof b.default||(e=this._createDefaultAttachment(t,e)),o&&e.resize(l,u),t){case"color":s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+a,s.TEXTURE_2D,e.texture,0),this._colorAttach[a]=e;break;case"depth":var c="DEPTH24_STENCIL8"===e.internalformat?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;e instanceof b.default?s.framebufferRenderbuffer(s.FRAMEBUFFER,c,s.RENDERBUFFER,e.buffer):e instanceof y.default&&s.framebufferTexture2D(s.FRAMEBUFFER,c,s.TEXTURE_2D,e.texture,0),this._depthAttach=e}}},{key:"checkStatus",value:function(){this.bind();var t=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);return t===this.gl.FRAMEBUFFER_COMPLETE||(console.error("Framebuffer object is incomplete: "+t.toString()+"."),!1)}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.width=t,this.height=e,this._colorAttach.forEach(function(n){return n.resize(t,e)}),this._depthAttach.resize(t,e,{minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST})}},{key:"copy",value:function(t){var e=this.gl,n=this.width,i=this.height;if(e.isWebGL2){this.bind();var o=t?t._object:null;e.bindFramebuffer(e.READ_FRAMEBUFFER,o),e.blitFramebuffer(0,0,n,i,0,0,n,i,e.COLOR_BUFFER_BIT,e.NEAREST)}else t&&t.bind(e),this.color.copy()}},{key:"setDrawBuffers",value:function(t){this.bind();var e=this.gl,n=t.map(function(t){return e[t]});e.drawBuffers(n)}},{key:"getColorAttach",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._colorAttach[t]}},{key:"color",get:function(){return this._colorAttach[0]}},{key:"depth",get:function(){return this._depthAttach}},{key:"texture",get:function(){return this._colorAttach[0].texture}},{key:"buffer",get:function(){return this._object}}]),e}(_.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(279),p=i(v),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createRenderbuffer()}},{key:"_onDelete",value:function(){this.unbind(),this.gl.deleteRenderbuffer(this._object)}},{key:"_initialize",value:function(t){var e=t.width,n=void 0===e?1:e,i=t.height,o=void 0===i?1:i,r=t.internalformat,a=void 0===r?"DEPTH_COMPONENT16":r;this.width=n,this.height=o,this.internalformat=a}},{key:"bind",value:function(t){t=t||this.gl,t.bindRenderbuffer(t.RENDERBUFFER,this._object)}},{key:"unbind",value:function(){this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null)}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.width=t,this.height=e,this.bind();var n=this.internalformat,i=this.gl;this.gl.renderbufferStorage(i.RENDERBUFFER,i[n],t,e)}},{key:"buffer",get:function(){return this._object}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";function i(t,e,n,i,o,r){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=o||"sans-serif",this.fontWeight=r||"normal",this.radius=n||8,this.size=this.fontSize+2*this.buffer;var a=this.size;this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(t,e,n,i,o,a,s){for(var l=0;l<e;l++){for(var u=0;u<n;u++)i[u]=t[u*e+l];r(i,o,a,s,n);for(var c=0;c<n;c++)t[c*e+l]=o[c]}for(var f=0;f<n;f++){for(var d=0;d<e;d++)i[d]=t[f*e+d];r(i,o,a,s,e);for(var h=0;h<e;h++)t[f*e+h]=Math.sqrt(o[h])}}function r(t,e,n,i,o){n[0]=0,i[0]=-a,i[1]=+a;for(var r=1,s=0;r<o;r++){for(var l=(t[r]+r*r-(t[n[s]]+n[s]*n[s]))/(2*r-2*n[s]);l<=i[s];)s-=1,l=(t[r]+r*r-(t[n[s]]+n[s]*n[s]))/(2*r-2*n[s]);s+=1,n[s]=r,i[s]=l,i[s+1]=+a}for(var u=0,c=0;u<o;u++){for(;i[c+1]<u;)c+=1;e[u]=(u-n[c])*(u-n[c])+t[n[c]]}}t.exports=i,t.exports.default=i;var a=1e20;i.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var r=e.data[4*i+3]/255;this.gridOuter[i]=1===r?0:0===r?a:Math.pow(Math.max(0,.5-r),2),this.gridInner[i]=1===r?a:0===r?0:Math.pow(Math.max(0,r-.5),2)}o(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),o(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(var s=0;s<this.size*this.size;s++){var l=this.gridOuter[s]-this.gridInner[s];n[s]=Math.max(0,Math.min(255,Math.round(255-255*(l/this.radius+this.cutoff))))}return n}},function(t,e,n){var i=n(239);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var i=n(116),o=n(268),r=n(77);t.exports=[].copyWithin||function(t,e){var n=i(this),a=r(n.length),s=o(t,a),l=o(e,a),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?a:o(u,a))-l,a-s),f=1;for(l<s&&s<l+c&&(f=-1,l+=c-1,s+=c-1);c-- >0;)l in n?n[s]=n[l]:delete n[s],s+=f,l+=f;return n}},function(t,e,n){var i=n(225),o=n(116),r=n(316),a=n(77);t.exports=function(t,e,n,s,l){i(e);var u=o(t),c=r(u),f=a(u.length),d=l?f-1:0,h=l?-1:1;if(n<2)for(;;){if(d in c){s=c[d],d+=h;break}if(d+=h,l?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:f>d;d+=h)d in c&&(s=e(s,c[d],d,u));return s}},function(t,e,n){var i=n(814);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(225),o=n(53),r=n(521),a=[].slice,s={},l=function(t,e,n){if(!(e in s)){for(var i=[],o=0;o<e;o++)i[o]="a["+o+"]";s[e]=Function("F,a","return new F("+i.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=a.call(arguments,1),s=function(){var i=n.concat(a.call(arguments));return this instanceof s?l(e,i.length,i):r(e,i,t)};return o(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e,n){"use strict";var i=n(92).f,o=n(263),r=n(284),a=n(227),s=n(282),l=n(345),u=n(428),c=n(525),f=n(285),d=n(91),h=n(248).fastKey,v=n(270),p=d?"_s":"size",m=function(t,e){var n,i=h(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var c=t(function(t,i){s(t,c,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=i&&l(i,n,t[u],t)});return r(c.prototype,{clear:function(){for(var t=v(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var n=v(this,e),i=m(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[p]--}return!!i},forEach:function(t){v(this,e);for(var n,i=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(v(this,e),t)}}),d&&i(c.prototype,"size",{get:function(){return v(this,e)[p]}}),c},def:function(t,e,n){var i,o,r=m(t,e);return r?r.v=n:(t._l=r={i:o=h(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[p]++,"F"!==o&&(t._i[o]=r)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var i=n(284),o=n(248).getWeak,r=n(50),a=n(53),s=n(282),l=n(345),u=n(226),c=n(150),f=n(270),d=u(5),h=u(6),v=0,p=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},_=function(t,e){return d(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,r){var u=t(function(t,i){s(t,u,e,"_i"),t._t=e,t._i=v++,t._l=void 0,void 0!=i&&l(i,n,t[r],t)});return i(u.prototype,{delete:function(t){if(!a(t))return!1;var n=o(t);return!0===n?p(f(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=o(t);return!0===n?p(f(this,e)).has(t):n&&c(n,this._i)}}),u},def:function(t,e,n){var i=o(r(e),!0);return!0===i?p(t).set(e,n):i[t._i]=n,t},ufstore:p}},function(t,e,n){t.exports=!n(91)&&!n(51)(function(){return 7!=Object.defineProperty(n(421)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(53),o=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&o(t)===t}},function(t,e,n){var i=n(50);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&i(r.call(t)),e}}},function(t,e,n){"use strict";var i=n(263),o=n(267),r=n(286),a={};n(151)(a,n(69)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:o(1,n)}),r(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=o(e),this.reject=o(n)}var o=n(225);t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var i=n(91),o=n(266),r=n(348),a=n(317),s=n(116),l=n(316),u=Object.assign;t.exports=!u||n(51)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,c=1,f=r.f,d=a.f;u>c;)for(var h,v=l(arguments[c++]),p=f?o(v).concat(f(v)):o(v),m=p.length,_=0;m>_;)h=p[_++],i&&!d.call(v,h)||(n[h]=v[h]);return n}:u},function(t,e,n){var i=n(92),o=n(50),r=n(266);t.exports=n(91)?Object.defineProperties:function(t,e){o(t);for(var n,a=r(e),s=a.length,l=0;s>l;)i.f(t,n=a[l++],e[n]);return t}},function(t,e,n){var i=n(152),o=n(264).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?s(t):o(i(t))}},function(t,e,n){var i=n(150),o=n(152),r=n(341)(!1),a=n(433)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~r(u,n)||u.push(n));return u}},function(t,e,n){var i=n(91),o=n(266),r=n(152),a=n(317).f;t.exports=function(t){return function(e){for(var n,s=r(e),l=o(s),u=l.length,c=0,f=[];u>c;)n=l[c++],i&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var i=n(264),o=n(348),r=n(50),a=n(52).Reflect;t.exports=a&&a.ownKeys||function(t){var e=i.f(r(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(52).parseFloat,o=n(287).trim;t.exports=1/i(n(437)+"-0")!=-1/0?function(t){var e=o(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){var i=n(52).parseInt,o=n(287).trim,r=n(437),a=/^[-+]?0[xX]/;t.exports=8!==i(r+"08")||22!==i(r+"0x16")?function(t,e){var n=o(String(t),3);return i(n,e>>>0||(a.test(n)?16:10))}:i},function(t,e,n){var i=n(50),o=n(53),r=n(527);t.exports=function(t,e){if(i(t),o(e)&&e.constructor===t)return e;var n=r.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(77),o=n(436),r=n(240);t.exports=function(t,e,n,a){var s=String(r(t)),l=s.length,u=void 0===n?" ":String(n),c=i(e);if(c<=l||""==u)return s;var f=c-l,d=o.call(u,Math.ceil(f/u.length));return d.length>f&&(d=d.slice(0,f)),a?d+s:s+d}},function(t,e,n){var i=n(230),o=n(77);t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=o(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var i=n(52),o=n(84),r=n(262),a=n(440),s=n(92).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){"use strict";var i,o,r,a,s=n(262),l=n(52),u=n(227),c=n(315),f=n(9),d=n(53),h=n(225),v=n(282),p=n(345),m=n(318),_=n(438).set,g=n(821)(),y=n(527),x=n(822),b=n(352),S=n(536),w=l.TypeError,E=l.process,T=E&&E.versions,A=T&&T.v8||"",P=l.Promise,I="process"==c(E),k=function(){},L=o=y.f,M=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[n(69)("species")]=function(t){t(k,k)};return(I||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==A.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),C=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var i=t._v,o=1==t._s,r=0;n.length>r;)!function(e){var n,r,a,s=o?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{s?(o||(2==t._h&&O(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),a=!0)),n===e.promise?u(w("Promise-chain cycle")):(r=C(n))?r.call(n,l,u):l(n)):u(i)}catch(t){c&&!a&&c.exit(),u(t)}}(n[r++]);t._c=[],t._n=!1,e&&!t._h&&N(t)})}},N=function(t){_.call(l,function(){var e,n,i,o=t._v,r=B(t);if(r&&(e=x(function(){I?E.emit("unhandledRejection",o,t):(n=l.onunhandledrejection)?n({promise:t,reason:o}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=I||B(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},B=function(t){return 1!==t._h&&0===(t._a||t._c).length},O=function(t){_.call(l,function(){var e;I?E.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},z=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=C(t))?g(function(){var i={_w:n,_d:!1};try{e.call(t,u(z,i,1),u(D,i,1))}catch(t){D.call(i,t)}}):(n._v=t,n._s=1,R(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};M||(P=function(t){v(this,P,"Promise","_h"),h(t),i.call(this);try{t(u(z,this,1),u(D,this,1))}catch(t){D.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(284)(P.prototype,{then:function(t,e){var n=L(m(this,P));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=I?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i;this.promise=t,this.resolve=u(z,t,1),this.reject=u(D,t,1)},y.f=L=function(t){return t===P||t===a?new r(t):o(t)}),f(f.G+f.W+f.F*!M,{Promise:P}),n(286)(P,"Promise"),n(285)("Promise"),a=n(84).Promise,f(f.S+f.F*!M,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!M),"Promise",{resolve:function(t){return S(s&&this===a?P:this,t)}}),f(f.S+f.F*!(M&&n(347)(function(t){P.all(t).catch(k)})),"Promise",{all:function(t){var e=this,n=L(e),i=n.resolve,o=n.reject,r=x(function(){var n=[],r=0,a=1;p(t,!1,function(t){var s=r++,l=!1;n.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--a||i(n))},o)}),--a||i(n)});return r.e&&o(r.v),n.promise},race:function(t){var e=this,n=L(e),i=n.reject,o=x(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}})},function(t,e,n){"use strict";var i=n(431);n(9)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(t,e,n){n(91)&&"g"!=/./g.flags&&n(92).f(RegExp.prototype,"flags",{configurable:!0,get:n(344)})},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){return function(e){var n=t,i=n.lib,o=i.WordArray,r=i.Hasher,a=n.algo,s=[],l=[];!function(){function t(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)(function(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0})(n)&&(i<8&&(s[i]=t(e.pow(n,.5))),l[i]=t(e.pow(n,1/3)),i++),n++}();var u=[],c=a.SHA256=r.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],c=n[5],f=n[6],d=n[7],h=0;h<64;h++){if(h<16)u[h]=0|t[e+h];else{var v=u[h-15],p=(v<<25|v>>>7)^(v<<14|v>>>18)^v>>>3,m=u[h-2],_=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[h]=p+u[h-7]+_+u[h-16]}var g=s&c^~s&f,y=i&o^i&r^o&r,x=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),b=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),S=d+b+g+l[h]+u[h],w=x+y;d=f,f=c,c=s,s=a+S|0,a=r,r=o,o=i,i=S+w|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+c|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(i/4294967296),n[15+(o+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=r._createHelper(c),n.HmacSHA256=r._createHmacHelper(c)}(Math),t.SHA256})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(353))}(0,function(t){return function(){function e(){return a.create.apply(a,arguments)}var n=t,i=n.lib,o=i.Hasher,r=n.x64,a=r.Word,s=r.WordArray,l=n.algo,u=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=e()}();var f=l.SHA512=o.extend({_doReset:function(){this._hash=new s.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],l=n[5],f=n[6],d=n[7],h=i.high,v=i.low,p=o.high,m=o.low,_=r.high,g=r.low,y=a.high,x=a.low,b=s.high,S=s.low,w=l.high,E=l.low,T=f.high,A=f.low,P=d.high,I=d.low,k=h,L=v,M=p,C=m,R=_,N=g,B=y,O=x,D=b,z=S,V=w,F=E,U=T,Y=A,j=P,G=I,Z=0;Z<80;Z++){var H=c[Z];if(Z<16)var W=H.high=0|t[e+2*Z],X=H.low=0|t[e+2*Z+1];else{var Q=c[Z-15],q=Q.high,J=Q.low,K=(q>>>1|J<<31)^(q>>>8|J<<24)^q>>>7,$=(J>>>1|q<<31)^(J>>>8|q<<24)^(J>>>7|q<<25),tt=c[Z-2],et=tt.high,nt=tt.low,it=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,ot=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),rt=c[Z-7],at=rt.high,st=rt.low,lt=c[Z-16],ut=lt.high,ct=lt.low,X=$+st,W=K+at+(X>>>0<$>>>0?1:0),X=X+ot,W=W+it+(X>>>0<ot>>>0?1:0),X=X+ct,W=W+ut+(X>>>0<ct>>>0?1:0);H.high=W,H.low=X}var ft=D&V^~D&U,dt=z&F^~z&Y,ht=k&M^k&R^M&R,vt=L&C^L&N^C&N,pt=(k>>>28|L<<4)^(k<<30|L>>>2)^(k<<25|L>>>7),mt=(L>>>28|k<<4)^(L<<30|k>>>2)^(L<<25|k>>>7),_t=(D>>>14|z<<18)^(D>>>18|z<<14)^(D<<23|z>>>9),gt=(z>>>14|D<<18)^(z>>>18|D<<14)^(z<<23|D>>>9),yt=u[Z],xt=yt.high,bt=yt.low,St=G+gt,wt=j+_t+(St>>>0<G>>>0?1:0),St=St+dt,wt=wt+ft+(St>>>0<dt>>>0?1:0),St=St+bt,wt=wt+xt+(St>>>0<bt>>>0?1:0),St=St+X,wt=wt+W+(St>>>0<X>>>0?1:0),Et=mt+vt,Tt=pt+ht+(Et>>>0<mt>>>0?1:0);j=U,G=Y,U=V,Y=F,V=D,F=z,z=O+St|0,D=B+wt+(z>>>0<O>>>0?1:0)|0,B=R,O=N,R=M,N=C,M=k,C=L,L=St+Et|0,k=wt+Tt+(L>>>0<St>>>0?1:0)|0}v=i.low=v+L,i.high=h+k+(v>>>0<L>>>0?1:0),m=o.low=m+C,o.high=p+M+(m>>>0<C>>>0?1:0),g=r.low=g+N,r.high=_+R+(g>>>0<N>>>0?1:0),x=a.low=x+O,a.high=y+B+(x>>>0<O>>>0?1:0),S=s.low=S+z,s.high=b+D+(S>>>0<z>>>0?1:0),E=l.low=E+F,l.high=w+V+(E>>>0<F>>>0?1:0),A=f.low=A+Y,f.high=T+U+(A>>>0<Y>>>0?1:0),I=d.low=I+G,d.high=P+j+(I>>>0<G>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(i+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});n.SHA512=o._createHelper(f),n.HmacSHA512=o._createHmacHelper(f)}(),t.SHA512})},function(t,e,n){"use strict";var i=n(250).assign,o=n(1004),r=n(1005),a=n(549),s={};i(s,o,r,a),t.exports=s},function(t,e,n){"use strict";function i(t,e){if(e<65534&&(t.subarray&&a||!t.subarray&&r))return String.fromCharCode.apply(null,o.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}var o=n(250),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var s=new o.Buf8(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,e.string2buf=function(t){var e,n,i,r,a,s=t.length,l=0;for(r=0;r<s;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new o.Buf8(l),a=0,r=0;a<l;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return i(t,t.length)},e.binstring2buf=function(t){for(var e=new o.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,o,r,a,l=e||t.length,u=new Array(2*l);for(o=0,n=0;n<l;)if((r=t[n++])<128)u[o++]=r;else if((a=s[r])>4)u[o++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&n<l;)r=r<<6|63&t[n++],a--;a>1?u[o++]=65533:r<65536?u[o++]=r:(r-=65536,u[o++]=55296|r>>10&1023,u[o++]=56320|1023&r)}return i(u,o)},e.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+s[t[n]]>e?n:e}},function(t,e,n){"use strict";function i(t,e,n,i){for(var o=65535&t|0,r=t>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do{o=o+e[i++]|0,r=r+o|0}while(--a);o%=65521,r%=65521}return o|r<<16|0}t.exports=i},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";function i(t,e,n,i){var r=o,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^r[255&(t^e[s])];return-1^t}var o=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=i},function(t,e,n){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAAA5CAYAAABK8dV5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDQ2MCwgMjAyMC8wNS8xMi0xNjowNDoxNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjIgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDAzNUE1RDhENkE2MTFFQkJCMzRFRDEzMzQ4RjlDQjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDAzNUE1RDlENkE2MTFFQkJCMzRFRDEzMzQ4RjlDQjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MDM1QTVENkQ2QTYxMUVCQkIzNEVEMTMzNDhGOUNCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MDM1QTVEN0Q2QTYxMUVCQkIzNEVEMTMzNDhGOUNCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Psj7GSgAACaDSURBVHja7H0JnFTF1e+5fXud6dlnGPYdWYewbwJGEaM8FZWgGPf4vZ8vfprw9ClGSMQNFeIWl3zk98zT5HMBBRM1uCMqguzrQFgcBllngBlmn17vO+d21VC35t7u2z0N4vdxtJju2/fWreX86yx1qkoBJE3TwC4pSPjHYZL0nyF50hI8pwl/o1LStCQKHys6yyyJOp+jc5QsOZMAk8qSW0gulji4lDjAaAtxUIUxhTAFecKi0bVIsiA7R+foBwOWIJ0IPF5MmZj8V1xxRacbbrhhbK9evQYWFRX1dLlc3mg0qqmq6sbkRP6O0rN4LRoOh4PJAAgfcyDpAKXnCSv4nT6HamtrK8rLy0tXrFixfsGCBTvwlnpMDZiaGMgi9O5z3XqOzgoi5pUTAxRJpWxMnUaNGjVi5cqVL1ZVVX2nnQXU3Nx8cuPGjW8uXLjwFixfd0z5DPxqiirpOTpHpxdYDFTEpAWYer3//vtz6+rqjmpnKSHAXsdyDsBUjCnjHLjO0VkHLAFURcSspaWl72k/Ajpy5Mj22bNnX41l7iCAKyVpnUpiQHYw9Zrbnk4B5Eq63nUunT3J0owSPWTMpiKGyKLRv6KiYlG7du0GyQ9F8fbGUBSawxoEIvQCgDD+U+BTIcOp6F4GyiiMN1Y2RmNuP8UoQzQT74QDWTDYCBBqUvR7PX60r1AZjUbwN/zuQrbNUB36OzyO1gLp+PHj+xYtWvTQXXfd9Rl+rcHUzJweVnV3JHC8iMUTE3fmiM8qApA4mLjDJcKS6Ijh16KyXWjieVVkr+iZctQIZVGF5BDqFxHrYuVEkhxgYj5gkk9EzoM9LyYQ2uVMkiJ5qsVkCSwnc1C027dv3yvdu3ef0Ip5GyNQE4hAJGrMmUDUI9cFmS5Hy70RvLarOhQDjcLeHAdc9PamWkRDHX4mEOUhmLwxYMnPZuF7OnlVcEsAQxuwbOzYsdfv3r17H36tZd5DzQRQNIB4WHLHUR95FSMCY6tcKl1zzTV5S5cuJSeK2qdPn8w5c+aMHDx48PCjSAeRtmzZcuDFF18sZwDT8H4/3l+FnwPM6dLEPJ0RAbROVi4f++tg7w2wFOJjkc2Bwa7XVQYJB4OXlSWDlcfJfouw9m2S68KBYeIA87HkFbSKMKtXI8uDBsQQd4IJbeISvNFinbUzCCqxvbiHOsT7F0RWpTYgbxxrtIKvv/76vvHjx/9azDGA0qmiPqz/1aQujDJgdctxQZb7FLCCKM32njwFLID44CKJ1YAs2lSv6cDy5ygtwLJ6tovPCfnCO4mQn9d16dLlRvxYwbyGYeFnzij+Z555Zujw4cPH470jjyFFo9FWzOlwOMhTqeHf6IYNGzbPmzdv85133tl33LhxI0tKSibl5OR0q66uPrBu3bpVeO0Sv9+fJ+fR0NBQtWrVqk9GjBhxfl5eXpeampr9O3fu/OTjjz9eNnfu3M1sAGhijOpkDJyzcuXKf+vcufMI1BoGI063Yb02TJw48TXGeJow/eGURvJkQaUx5uBgb2SfFdZWuZs2bbq3qKhoJGkwLpcrgz9cWVm5AzWbTdg2y2677bYv8FIdK58OLmw7lfFV5qBBgzqgRvF/MI9hhYWFAyVtoxS7YMOAAQMewa/VrN9C7Gc3a5MsHLgGXnjhhWPD4bBaVlZ29IcwnXr27Nne6XRGvvjii9WPPfZYKatzIwNZ1GBnsM7Jmzp16gRiBNF+CSJq9hwLaLuFtOu4MW2rbNZqAxGD3RPA53bgb9sx7ThxKpVSqjqVtrO0syagrT3YrC3f3ait2NOkbcI8S2sD2tbqU2kLpZOxtJmlStRJZUJG/w/yZjLGEFUH+l68evXqh8iFn6wtV1tbW50uuzASiYRRor2FDHkBlqkjpkIqc25u7k/27t37udkze/bsWTVmzJjr1q9fvwgZujSddioy9vYdO3YQcHuT1sLs7F4I6m/sPI/ge4a1eRZrZy/7TID6n3V1dYcS5YEA28renyNIqPxHH330YgTxurPNtqcyPf7445OYV9otD26c4TpjR78uP1x2IqgDKx64tscBVqkELCtw7awJamsONWmf7anXlu+t1zYea9Z21AYNwJLBxQFWG4rIFd6F9enHpgscgrTK/cMf/nBZKqA6jVMHNe+9994sLFsJ2ofTjhw5siMB8x0/neUh5kbJOhjL0xcB/HIyzz733HO343N9MHXF1I36AE2KC3BAOmw3DwbujlxKYeqBg8j6s9VxRuBiUz5+zmtOAViEtqyuXbuOFxF3oiGi20pmlpuiga4WapICmkg5bclHCGbiekwUM40q0Vi+dIPWoq+C5nRDOCv2gPNEADQ15uSgK/sbwzAw293yHlRbznvttdcuvuWWWxYzMc1tI++oUaN+yuzJNlNTUxP4fL5T7XXiBHz11VeA6g6VAQoKCvRkdT+Rx+PJnjx58uzp06fXPvDAAzPbt29/Xrx3FogZngbC7Eu+/fbbJ/r27TuvuLh4RDLP9ujR4+Knn366/YQJE/qRJhgMBl2NjY2+rKysDnbzQCBOwT+PMnXQ9c4770zB9hx+tnrVsZ9HoEo/BNPXTJVuAZY+GTxz5sz+qIZ0Fb1/JxsjukdPs3CLKFrqlmMrcOl5aRBWIsCCL0AhOGS4IeCOGSDZX68CteEkNE64BJTwKWdMhMoaikKe4Dzp16/fKPzzHqtnmAOrU6dOBmb505/+BMjMCcuL9k0LSAhAr7zyCqA9qj+PtpB+nUC1YMGClmcmTZoEqMbon7/55ht48sknYcqUKXDFFVe0PEPk9XqzUF+/B8vWW3zn7t27Aa/DPffcA0OGDDljzHLeeedNQTD8GYFlsIWo3FR3TldddRXcf//9Yhv9jyuvvHJGvLzfffddQxsRvf/++y1tiwNP4axZs3o99dRTZHt6evXqNUa8l9qRMfQPAiRUmfW/559/fsu18ePHUxnXMCxFRGB5cNQcbTC6A6dcf/HA5Yjjl1EkcaaYuOg4uBT8T8MHIggsemG0wAtBzDyIkMhZvBhyP3gViv72IZyY8VOovnQK+GojoJFng0mt6qARWF26dBnCDGdVKKoLQVQilhHtLUCbJmGDDhw4UO/8zZs3w+9+97sWBvvVr34Fr776KpgJkmHDhrV8/uijj/Rn/va3v+mJnrvppptEZu4tM9B9992nf77zzjv1z1dffXVcBm0LUR2wDC3f77333mGogh3EAaDlIoH7888/b7mnT58+hjxwYM5K9B6S5iZS0vAdQVXD1PgMBLdBWlE7imX4IYj6TQQWSuphbAB3gGB76BILRfBAoycwavAdKRbqnQFAFjqg+LvsvlJE3xSWpLFzAVR1y4fwwUrI+48XoPdlw6DPTddB0aIPdZgcv2VWzCccDp16llxREWMh0E7oJgCLv1ZFff+YeF+3bt2SalRUkShvg/r38MMP65/37NnTCoxEBEaZGUhyWZEIKk4EIpKOp1FKye/bS+rcaVCd7NxGUTSdb7zxxlGbNm06aDVY/VAkazhol1aKUzaixHLiqNFTvDmIqpZBwlhILrtRr9wmayX1KNDW5YEIjk8nsUiuDVth8Jt/gq4fvQEZO2tj/qG+5EcHqB/RHfaNvRQ8FQFwOzRwqrFMSOpFSI3Ev06lRb3KRrul3dtvv30onY1KNtK8efPg2muvbbmGRr4Ohu3btxvuRamp21Uk4eQRL56pRGAfMWKEnq9IJOl27txJI/ppZ56GhgZIBVjczpQHGBm48ejDDz+8G+vfv7CwsOOPIXpJnqoRgaW6XC6PMdzHCACNSx5hTsru5IkmSCbeVQoacYrLDcEcRZdAGV9/AyWL/gzF7/0V3IdifiFtIAM0mx7dNfUeqEHbv/h4PThyMg3KZVRjDg9h3RVKFl+y8ztcUmzcuNFS5SD7iO7jqhjZGmjTGVTK3r176yAkYJF0IlBwtUcEpVX+BJ4XXngB/v73vxt+I7ChDQIXXnjh6eaXTGQYRyrAklVU+p4MsC699NJJdu+ldhZVZJmoH0ljIDW2Y8eOtuxpM7vQjrkgA0vHRyQSMQgfYtSwoF6J8TyaYvTy0X1RrTWYaOKYAnYUh4QwFUVNoVMHlOfLVVD00lzI++xTcFAMA9r02iBh/l8PqUBpNSAH9k6+FdxHm0H1uPRZ52D0VMyWYu61Swb/OomdJAPLyq4h5pcBQB0xbtw4U8YjJ4CZg0OWjOQYyMrKagElp/79++vOFK5qciovL4e5c+e2sp1kMrtPJizTpFAo5EqWCUlKp6j+pUQk3a2ARYMa9Rm1Oe9L2eFihwicqQBL50taTyX+mJ+JzJ+pJvahMxD6XEbedSHjd8+R+sXhAIcz5qJr3r4N1CcfgoJl78Yc4mjqaJ3hVHANCLNPFQDHbr8Vis/LgvaHqqEwzw8etwpiRJkY4SEY0174kUe6k5ODq4FcjeTX7Hjek5EUIs2ZM+fnqarK6SICBjG17IVLxiEjA4IGKgKbTNw+vvvuu9tcB6eR5x0GFGV6HG3KnJjc7zbJo/IwRJ99HLL/8jJafaDPs2teSUKJ+D0JEOrjhvob7oPOgSi0y/FCdob5QCpLzYyMDCf8FyACUl1dnc4UHFT/VYmDiWxWrgXIjhw7RM/Lkl4coKxInkJpM7DkiGKaGFYd6Rvs9UjFZ58C9bm54Pq+WZ+r1sjxHZYkFEjS6iCqT/dcD4F+ncB/pAac+RmWdpzsnAyHw2ldUWymfhGtWbPG4LEjx8Ndd91lK08Ev637klVffkxEqtqGDRvggw8+aOWwSYXaMhVBZaHBi+bW0gIsRdxthXg6TaDS/Q7L/gHKE78Fz8qd4CCnxGDQbS9DeKyZtklz7+0A6qb9Ro9tyUUBlOFxWWqmcomdTqcjlU7herVM1Pndu3dvdf3TTz81fB85cqTt9zU2NsInn3wCl1xySdJtW1ZWVt+zZ0//6WJ4aosvvvgCcnJy9O/kBJB/5+1E0jRV8Is2Z1ulnZnDJ1l64IEH0qcKRqNRg9xoRLVLUcwlQ6treNGLNlYrMDZ8B47Zc8H5wn+Ci5x4JczbGLGjS2I6jObVjMlweORQKDxUB8FsNzSEzReZkUMlQzXCC5k2nGyjxBvpEhn8nEh6JTvnRMCiSAsy/q10fBpNScLx308nqEQvpBWR/cJtGHLCJCICJg0iyZKZlmCm+lFkixgZIhJpEeRpFdvWbL5QnvxtK7Ao2tqw8Ut1fQSaQtHWYJLmsugzzXn1KHCD32sE1sLnt8AdzyOoSEoVJZZQhtfQwgUUU6XXzoUTdfh8UxCCbhc4wyEcBDRTgA/Mc4MqFOHkyZPNPyaV6NZbb7VlkKfqkPihiOwaApUV07eF9u/fDzfffHNCrx0NENR21MYELjNQEfjs9EFSEkvWpByOmDoozmO1TBLL4FKhlXSb+SHA84eugSV3fw7vfTIVvFX1oOWCvRllsq2+Azhy1USoHDcOCiuqwZ/pAY/qYGVTWklQM8WV7fiU9oVw5I2Tw3vE6zLV1NS0GvlphD9dzPZD20sy2QlBIjc4SQqaD0xGNSR3O81PycAiyTN48GADePgE++WXX95K+6C+I1U2HV7N+NufgXEhkzh/pUhRGLIhs/4ggmoJqocopT7teBEMy94MX787HgpOHAWtIDG4yLbSUK3feet88OC9XkcUvG4nSiOF1qWboihdbhY+70PMIHuQVq1aZbAvZIah+SgzYJHuf8cddxg6f8KECabzV2cTyc6aF1980TBAEPPSAEE2DXktf/3rX6fkfKB2bAtDk5QhwNC7acJYDFom1V4EF90jl5FA1VZPoG1g8fhAq+BbLr2igp3F6XraNwnbKdsL4D+GACnoBcOu3Qyf/+Mi6H10h77/k9WuDfqa0wP4/79Nh6MXjob2ZcfBhxk5VRW4AiiGR6VbJHE1q7S0NK4+L9tiNOJaRaAT01BnUzCtaK9R2FC8qAE7ThaRjh49aus+s0BYK8kszpVxJwYnimKg9rLrLLCS9G2VEnwyfd26dRS1YciPpKAYJWNlE6cLVImBJap+CcDFVUei51eiUbsTIL87xPbGwN/bVQF8n1cMI6ath5V/nwCDjmwAyDNBBOV1EsGK/b7txofBX6uB26WAD6WVHpcoG3dK8tKqrYGl1AlmcyFm0Rd2HCXkVZs5c6bOdMQAfC1XIrvLrjvZ7L5U5oXiEUmteOoeDTrknCFQkYMm2eh0OxPhBAwZHKSWLl68OOHc1YMPPqhrFG11WtgHlg1wkfQghs9wU0Q8wJx/ArgKY+ohvyeCX9pVA1Rm+2Do9PWwYckoGPz9OtAKjeDSQVoB8PWsO+HA0P5Qsu8E+HK8oDLbSpFtKimwN5E/pC0aI4UByapQOoiYjGytX/7yl7akl1nI0Omg6urq+ry8PFteR4o4TwQsuw4XAl4qwJLzMFPleV60OkFUy+kzDTakRk6ePFmPw0zbBLEVJ2o2wMWjmWZ9CFCPql9hFzZPJZAOrloEF2oTP73yS1izdCT0OVoKWj6c2nPoMEDjwGxYeesj0LuyAXweJ/hcsb1SxJhAQzkktTBBdRwmJqEtsutqtzsCi0Y+fa6vr7et9pwJys/PfwQZ7t979eqVcF0N2WEiUyYKMk43kQ27a9cu2LZtmz6naOUhJK8fqYzU/mRLy8Dj0weklVB9xo4dqztAyPmUdomVCFzkke+DmstWBMXzOGj5iqydEzq4sIyVeT4Yc/Ua2PL2YOhcXaZ7CxUKzWgCWH7HPGjGiucePAwZ+fngQGmlRY0Oi1Z2lQZ2ZZGjQ4cOfa08VtSYVhPENOqKqh7de+ONNxomjK1GZdkdTOqJOJFJHf3znycXmmc2b2TlfZQpMzPTzivqVVW1M+Oo1/uvf/1rWkBCE+bJSCvqPzuqJeVDbfPGG2/oKh9FV1Db0AptMyCKc3TJSkzbcXTxwEVheyRMfvO+om8AlZUHEInj9SNwFaFaeCw3E0ZN2wD/WtQLsuvQCEO7e9/U82Hddf8O7Q6Ug9efjfaVE8ImDgsrtdBGNeJKK2pIK9uFgEWeL+pE7qgQpZhVlDpJI7Hj6FlubCPI9dGRZvqTlURm7yIVSLbJzO6jEV6mgwcPGtSfX/ziFz3PlMQhVZgmvglU8tq1RFsS8IHDClzcc8nbhdvCBBZazkNr62gubOHChaYAIwAmaxcmdLcnAhcJkk55Gry5UYUVWxTILogPKk60yqfoJMCRglz42RVfwuo/l+iTwR//ZiFkNoXAi3qkz+MGp0OBcDRqqval4BFsk41FRE6GadOm6Z0tMwBdNyMKg7JiFOr0kpKSM7qfhZU6KUuK2bNn/zwUCqlnojykwllFqtAclZ1+ERmfr3kj4NDn+fPnmw54fJsEAt6cOXP0/SwWLVrUIvW5JkHgS5vE4sO7Fgdcbmp2VBb+73o1ti202jrC3NInQmohgutb/yC4ZtKbMHtKGdT1GQiFB78DZ3YGuJyq/o5WAE8NXOJWyW2yjbh9JHekFTgoWlqk4cOHJzUi/1A0YMCA7tu3b69MxmGQakTI6NGjLYFFNo6dfiHnA003kF0ktylKX107sLK/qC8JwCSdSE2k/l22bBkUFxenZNM6W/v/BGMEeVFlLGm21zqpfx3zovDxLgcs36UA7QFrF1QUD0EexNpqWuWrQdF9M2Btl2YoPFAGrgwfuFwufLcCDsxPZf582dPOy2WIDIkvqRxoWOfGU4nE1ajxVhDLS8+pI8wWNZqRWVSBOPF8pojqKjIZjdYyMAYNGtTODqBo1Ke2EndbSoasAElltLvHhexRJdVWdMOTdkCJrlM5ZceF6HChOogb/bQJWHRonPh9fygIJ4MR4/bQEjjqm6Iwf5VfXxPicyYGlq5C4j3HamOsftFP6uG64SegY24QjlQgoLwZkOHzYN4OOBQIQoUjZPCDaHGkFF3rmu03VAr1dlX4WZ0xY0Z/8ZkDBw4Y8pBXo5oBi8D4l7/8Ja0ewlSpLVKC6ioCq7IyJpxo8tvufI5sj9IAk2p9uA0rgo3UsFQkBvURSR9eHpJgBFC+9wb9RjYX7fhEfclVxnSRM55hfxJtm8pIxKA7cWYmAHXJj8Jn37lg+Q4VsnLig4pPIh8nj3IAoE+XAMwYXgWju9VBXVCFQ7UEKLeeXOQFxLxq0Vij5VSKDT8638g8KrkHVT4BxtRAtBniqr92RkdS7dIZ35eqKsiDSFOVdrTMQyQetUER4umORIhny3GSl5yQQ4PuTQVYfKs5DnbZc0g2FfU1Le+hSI10k1PiTYPbIduhQoTbONJhBMSl7ZxR+GSrTweKN9scWAoDVRVqXBFszx4dInDFwBq4sHct+NxROFafiWqfGzrkuMDtju2BEWYZ+RUVCBaaiUfdTDVVmPpquH5qfYm+pyDaDf3E32nSNwXbw3QfCbtkZ7+JRGQV/ZEMyXsCHj58WFeTiBFJLSJpxO2NdC5C3Ldvn637lixZooOB5p5oboxAYAfsZpvZxHPRc++gmW2WFlUwgmRQFZxO6OBRTe2aDtkabDzkgI+2OS1B5eCAagDIRzvq2qH1cMuQOijwhxBQdIwIAirfDV6PC5yIIDrzan8gBIeaI/qEc2efS9+AMxA9tV2UZmUQQsyh4ZQkW319fRhOHQPjzsvL6yT+XlFRYbg/UQwdrSUyW+hoh8iGMVOxkt0nL9VAV5nkunIJwYlHItjZRIUkANkkdtRSUsfkkKp4KiQPmrWazjBTAyl/2sOCtqNLVH7RO0j1JQ9gW6W104JHW4Z4+RCi2HbqCrh8GiwpVSGEtlJu+1PAMqh8CKji4ihMH14Pl5/XCH0LQnCiyYmgygJ/hgsy3C7d8ydKQQeiw6Hviavo66rIceHgu30ysSSHMNn0l9CyY19xcXEf2UYRKdFuQm2VNKS2xQvuNWMSM0ZLB8kblcqeTjugSgZQou1k536aW0plAJJjBsWoDArSjdd+1dXVabG1DKqgYI/E7CgT/ZC+53hRhTuuwKJSB6j+GNgIUDR/VV0bs6F6d43C1eMb4ZLu9dC/KAjHmlxwsD5DX1Zf4EVAuciVrug2EVfWIvhBn7KK0FbTir4fe0SLMjCL6DaCK54Uc7vdLScJPvvss6PiRV0QnYk4PDkCPd7q2Hfeeee0OT7MRmVRveTAk8HFVSdSF+2+38quiidFktluLB6RjUYqHiUaBMTNamR7meqVzvVY+mJ5OtpGto9aeeDwQzbavC+vVOH7w9jIhXTAHEBtXey3kk4RmF7SBDcNbYbO2SEoxXvKajIhC8FUlO1EQDlRAsVy1M9xlV+IiNHCDn2OS45etwwCBuvNQxsaGvgKYt/EiRMvllUf2bV7JuLwaN2QHXBQh8db3s/VlraQHKZl5gLnDE62znXXXadLjmTbiSbTrdaqyRKapIuZ19XuUhc7QCOVnBI5TIgPaP9+GlTStfeGUxBO4ePHj5cXFha2yGgXGizBkDHwlcKX6usVWLjRoYcvnaDty7CNJ/dphmtLmmFK/xB08EfhOEqo/QgokhXtcpzgRnuNr/qNCguxFPkYoCjoUovmrxSt9R7vhuUqYAy+peyd0p4by5YtO860TE+/fv0ulu0lkQYNGqSPYjyOzqxzk1kWL+9fQY4Byl9UReT1TjiyhzIyYnu70XUrdYwAkY7974i5rIDVs2dPfYKUJk7l01GSJRokxLVoqRCtLE7kiGgrpSt4mAOLnBahQ4cO7cTCt2wV5KKTOxqjBqlRkKPBq+tU2LpRgeJeAFf2C8EFnethePsG6FSoQkPUCwcbXJDnd0NGhgOOnYzGdsFVLKLT5dhDQkqEQSGqtDpsIV5ku0dVZGfBLrbnhTZr1qxuyLAFYkfLDEVMRgsPrdYqUSxbMszFl5jweRSyGWSQ0Cpikf71r38dRonQYvzQGiGxPJQXASqVHZ2sgGUFXjuSiTYg+uyzz5aPQsrNzc1Jxj5LhsiWO83HgqWVxFPLAziarhF/9HqUVsGttQ0AHbM0eOYXEfjq9iC8eGk9nN+5Caqa3HA8kAU5fj90yMsAv9etL6UnO0qLQqvlworkfVBE1ND+8sIe82bgAglcRFnSBqM4UGwBdh4unSMsV55UG5mR4nn8kh2x+d7q3ClgxmiylxCBtVv+nTMUMRdJzLaCClWt78TvtLLZTCLGAxWdu4z88gqqUjf97Gc/e/Lw4cOG0yBoQEgXUf3Tmd9pJMVMFQw+9NBDW7CRK/x+Px2hAipKAJ/PgXpvtOUMq6oGBcZ01uCSgWGordFgT5UTwtFMyPU70Ybygs+tCqNZ7BgQfphCwpXI/G9UKKHSWjJZSa5sjyqrYusYsEJPPvlk2e9///vjdKgZ76w//vGPLRs7ckayUvNS2X020ZZdZttsrV27dvXYsWM79+jRoyVChCQUqafpWt367bffru3bt28v/p2kKdWP23PUNrfffrupdNq+ffvH5eXla6dOnboEYoda085evsrKytUDBgw4XxwQaBCgAcXu+WMymKhcJNEpxQN5okMR0kE2D0XQzJwX1ED1+PByrND1/IZctI+am4MtR+W4kHfrApgqyaOnQJbPrbvGCUNOhyM+jO2AS3BDJhN8W5zlNOzbXlVVVY6G9jKIHV1JTpkGlAbvDB069H+JeVKHENOKkkpcv0T2BQWBykyNo/U/xo8f/xy1GVOl/chsJaheviQyB1fjaE6FbxFNE7Nmx9qQhH3++ec/nzZtWhcRWFYS6ujRo+XPPPPMu/Pnz//fstokOwRExnzuuef+OW7cuB5YjjEiyEnCkvdOtvuYd/JlVGu/fOqppzaxOjfF/L96b3nx2YVHjhy5qH379sNkt7o4KJmtDk5W1ZbXycU7FCFdJB+KIJ+D1rVr1+6MD4RTRGJqGoGs4IknnpiG36OGw6cDEe3Q4YCeDlI6IqSjlIJa+cFmrbHJeMB2MBTVyvEeSvvxvnKeKgLaPimVYTp0IqCt3hPU3l4f1JZuDGpbD2DeVQHtu8qAtldI/KBxnirqWp/TvXXr1v8E/dwScq3oc1h0OmCPnTt3Lk3HYdzXX3/9ZPLOg74tjr57B008D0UbLaWDtyORSHjOnDnXQOzE+EGoPu6Kd/+aNWvewPvG5eTkXJzMe9DmLMfnRiMjXk71sPPMV1999SoJYIgdBkdL9d1gPMyPjn8qfPDBBy+rqKjYrv03JOyPF7AN2rO2McQG0sjT9Nvf/nYdovM1EY0etwMK8p36ZjGKycRRVNNsTdIqstpnYTeRR9ChGWWr1emReT4V2vmN4X/YuTtQyjzGRlZ9y3imElb379//PpQqD9fW1h5NZeQKBAK1K1aseOTNN9/cSv4R0A8You1vgCZDjuKotijZPEnFQgk477HHHlvD8jm2dOnS2WjH7JLvRamw6a233vrN6NGj5+DX72tqasrLyspsbzKOqhwddl6Jqs225cuXP0r1iXc/2k7fTpw48Ql6NbUfSX4aM2ks4EzF2rdh3rx5G/r16zcDR/N/wn8zQrv1G27Pt/Bri7cudpI8jUjF2KBvdejQYYiRAQBqasMxm0vgdr1lIxq0L3SBV3AgRPDaoWOx6HSH2YSupBZ68O37qxQ4XE1qJUDPYg1yM2NnEMvPepwK5PtVyHAZ1c9QKNR47733znjhhRfW4tcapuJG2SDiZBIs59lnn51w8803/z4/P992yACqXhvRLvsdSnVSh4ghm4nBhLajvPM2bdr0AKpA14peSCsiJly8ePFClFbrWZ4hJg3opITsl156aczIkSNH1dfX13366adr8d072YDRwOrlKSwsLEI75mm0NS6P965t27a9igPOXNYu9KwPbam+M2fO/BUC4iqn0+kV1MfjKN2XDB8+fAEHFJWNtJlWA2Zsz38H0wyo3Flz584diqryBFTThiEfDUJ1uzAZRqV+RHV+H9pz29etW1c6bNiwElRfpyd67ssvv3wX6xF0OBxRM4eVHaJdvOjAvXA47L7gggsS6pibN29+Fk2M+axdA8BdbwKwFCbKsnNzczuiTfJGcXHxADmjcFiDQDCKo7emR0sQt1PURW62qks37uggYFXVhA0gNBNjLRvSIDtV1ipwok7Rg2/b52qQlaHpwKKS0cSyGwHl07dDc5h2BhrLT1x22WX/jzFDAIy7xPMoDA9nAGTc0cg8oxEMZaqq+rCBfoL6cgnfIo0k2759+zaiRFn9yCOPbGHM38gAG+FBvqztiLGIOf1oQxXdf//9E/DvSIqoR1utt8fjyQwGg/UI0D2oqq5fsGDBNzjSHWNAaTQZBFyC2gVMMoT4uwU7meqSs2TJkil0wjwy8lBefmIuknJYh9Wo/n3Ayt/E3tNSXkyZaK8NKSoqykZGOfD0009/JwC42QpUEsD4QlI3a2MvS/TZjXabB220Eaj2Oqh8Yhmx7aPHjh2rRXVyB6tnWKqnCyX1JX379h2LbfmTdu3aDRA0lJ0oCLbgQPDtDTfc8Dnr9zCkvt0kjy31vP7665NQyxlD70QstNi9lZWVO/C9mzZs2LDstttu+4I5crjE0gzAEhqHGiJ7yJAhXVFt+iOOOmPOdlFMts0HH3zw+IwZM95hqllzK2NSmEsWGJcnlSWnYD+A0MEBloK80+Rjjxi4VAEQHvZXzJOfsSLmF2IgjUp5iYkLbE18N+svJ3sPZ2QRjBH2nmaWgkK7iJLGyRIvY0RQoyOaptlmUkGCyW3qEP6CSb2iUhJPTHNKYHXz2U5WTl5HDqpoG4HlkN7pYe3E3xlkA1ST4CBr7bwQE6s8qTUUkdoXR+uXz2bDcffu3Z9edNFFtHy3A428AoPYaTxVkg5eVvcMlrwCOPSpbrm9TNpP7BieJ8/PJ3SSaie/JN/nYe/IZIm/z7L8AngdYIy9bnPZTMoogk1MqtV7pfp5Wb2ymEMqi333JtNHSbap2Tsz5HY10ynNMuaSi5ayd50/f/70jRs3vtnc3Fx7tgAKVdWPUUo9yDxphYyJVPiRH416jn781EoVtFBt3MIomIW2wSg0qEd27959iNfrzUVD0aXrlYqi4mfSn2OR69GoRh4vZkTaYXbNTPWhcmCeYbRPGlC33VtaWrrhlVdeWb1ixYojgn2iqwBcnVKUc9g6R2cpsCS7y2FiO7jjisL0kSbp/UHZPgHd63+qIueAdY7OemCZGNSiESqCSkkADrNpKy3OlJb4OzdwI6KBm6RRbVB/z9E5Ol30/wUYACsNB+5N43npAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABkCAMAAAAIYWa2AAAC8VBMVEVHcEwAAAAAAAAAAAAAAAAzMzPQRUXlSUnnS0vqS0vrTEzhSEgAAADFRUXmS0vtTk7xTU3yTk7yTk6vPz/oTEzvTk7yTk7MRETrS0vyT0/FQUHFPj7uTU3yTk7sTExVKiroS0vyTk5IJCS4QEDuTU3SRETxTU0AAADhSkreSUkAAADoSkryTk7pSkoAAADoTEzmTEziSUndSEjMRETDQUFtJCTwTU3vTExfHx/mSUkAAADFPz/yTk68PDztTEwAAADMRUXBQUHsTEzqTEyzPj7yTk6lOTnjSUnfSEjuTk7yUVH2iYn6wMD95OT+9vYAAADBPT32hob95ub///+2OTkAAADfSUnyT0/5ra3aR0cAAADqS0vwTU3vTU0AAABmKChbJCTBPT24OjrQQkIAAADXRUXRQ0PVRUUAAADcR0fYRkYAAADXRETQQkLNRETIQkLDQUG9Pj6qNzegNTUhCwvxTk4cCQkAAADrTEwAAAAAAADkSkriSEgAAADLQUFnIiLyTk5gHx/oS0vnSkoAAAAAAADOQ0NLHh7wTk4/FRXaRkbXRUVuJSXxTU1vKCgAAADfSEjZRkYAAADwTU3vTU1XHBzSRETIQEAmDw/rTEzoSkoIBQWhNDSMLS3NQkIAAAAAAAAlDw/oSkrnSkqBKyvwTU3vTU1lISG5PT2qODgAAADURUXKQkIBAQHjSUncRkYAAAAAAAA1FBTkSkoYCgpjISHsS0s/FxcAAABtJSXsTU3pS0tTGhp0JibsTExYHR1bHBzsTExpIyOVMzPuTU19KyujNjbxTk7uTU2MLS2xOTnxTk6bMTHCPj60OTniSEjcR0fuTU07FxefNDTbR0fTRUXpS0uiNDThSEiDKyvXRkZ6JyfhSUmSLi7pS0vIQUFQGBjmSkrGQUGCKSntTEzrTEzdSEjbR0edMzOYMTHZR0eTLy8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6Ei6pAAAA+3RSTlMAAQIDBAUhRVhlcUYFFlSTzvX/EGC6/B6P8h8YmPiZBmvtBxe7MNwGVlcHhf6PCHx8WlwtLw7T1BCDCSz3LrQLNzqwsSX9KICC2///////DjL///81CnP//3UMtOPkERkcPkFcDWdqdg98fhBvcmFjUlY8Phf4GxTRFxKlqBZsJfopwMIaE3ci7iSRky/5MhimnBvy7C2DeiHVzSBIQoceFSLQxTvw6zVnWx2Qgh+3qSEZJsAkMtssHDbh1jE73zQ14jpL6UFU9e9IXfRScma0p+crU56T0k2vOpQ0rULLdCm4cTHY1JeWPD6aQC42PDkwKCsvMjQsKSUnKiijw/sAAAUASURBVHgB1M8DcoRBEIbhNNbutW3EtnP/E2V/rDUzKeUpo9/q7+gfATA/tSAiORARpjQLiMTs8fr8gWAw4A95PWEmO6SRII5EY/GEzCXisWgkzIodu5BMpTOyIZNOJZmsjEIim8vLDvlcIXwgYw3hYqkse5QrRTuz741qrS4H1GsN3lmx3mimRUGrGabtkwAo3O6Ikk67u3USIIV7eVGU7w82JwEgdYcjUTYablasRk60jCdrFQDqHoumk3ll3jgVbWfWokUDw+d50Za/GND8FUC+vBID1zddt2KNGdyKkdu7MLoR7N4/iJGHR3cQIN89iaGnZ+cVoO7LSAyNXicMYD/yJsben7sI1iMfn2Ls82vC0wjffcsf/DyH8ZdUskbLIIyBcJCSag+BQ4+36+7uisv58d+T6pt23ic6sH1wJ5CEKMmKqiqyJJKIoB3vwM6xTgKGaf3LNEjIdnZh99IlXM+3luR7BBaEB7B3FxGub63IJ7BIO4ZjLSZ2sdZEbJSkl3Ce4UkTzfUipojnLXfgssAbSNaGJJwsQ3Aq3JI3i8g4WdVw1+CWsllEwclWgzDALXWziIqTXQ/1wFpknKC+Z13n4bvII+thn1Kon1lf/DJB/cqxhY17myB8v2aL/cdXKWYNHLcWheGlcmt3r32URP2E1FeqQoatDJrRpI0sJTIzyTEzoxIzY9gMYWY0M1fRXWXOsizdvf18c/6Dv3SNNpBspH8DGMlRhgv8df9WwQ0h1HDaFuXfUopiSQNBR8f4sx5jYvkLhn9ChTh/FnV8AkPImy0xyR9IEidvNstpJjkFn5GSypJWeduHCmn4kPQE5rTFYJL1ZGTiMjKzhFD57hgtBC1m40Ju5vAXrCbkTgLZjFw8Rl4+RxFm+RbLoTBiAR6kMIdXDIo9lKJiHEZJqYACsUPkrHBlMRhmqzzBdsEeCKJYST4nXT+korIqVPFsinsMraqu0cuoLRWZ02CHkeNixLp6fYyGxhweeS2jw5XLgpp02b+AZskhBgSx0i09kNstHA1i0FMqJLS0ame0tXfYKwMQ5RPhAiN2lmhldHUn8IH/gBjntHT09Gpj1PT1s6GODxXntAQm5gwMamEMDUtVFOHCgLTIyc0ZGdXAuCMJNPq+8ISg5Iay/SMhxzF671Z6ZQCFquovb1Bn3LtfydEXrJBUD4oVUR6otu7DRy0c450BlNNUlTQ27psxMYkYUFxfFFqQpnzu3OmZFlGdAZTKWV+QuVLRRqow4K/DaYZrmffOeNzewasygIIGIP+JN8bo05zEwP/NJnUGDEDClJe9EPBMgmZXeTAAbP9zT8iLFoEmjmfAXqCETo9ZfNkN06+JYr1g63jlJihgsj/RY/rV0xKY2P/arTItAkyudkFvXFpufKCDgT8D2gUluOT2rcTqEOM4Re9inK5dj0jrEQOnqOO9A5Ldn2j/oNf1UG6ryoBx8gMKRIcYCMWW8BFOpqQnEHgoKwL4yk8djM5AoEB87F9/0vq5KlBnIBAKxX1RIPM5NjiZekMh2asK5CtHybcb63+5nNpvSm2yWMWaYer5jiA/kBojHsT0D8n+RJBfeGqgVRam5RW/yGLVBlqlanFpaRm8GVYoTPvK6tra+ka7TbcagEibW9s7q6u7G3v7lbgQy8Hh/tbe9vbK1tHhgcWA+Yj+w839o62j/cN+ApeBskIyPM8EQlaxQcd32W/E9Jewb6BBFAAAAABJRU5ErkJggg=="},function(t,e,n){"use strict";e.Event=n(93),e.Map=n(332).default,e.LatLng=n(45),e.LatLngBounds=n(155),e.Point=n(65),e.GradientColor=n(614),e.TVectorTileLayer=n(381).default,e.VectorTileLayer=n(381).default,e.ImageTileLayer=n(328).default,e.CanvasGroundLayer=n(654).default,e.ImageGroundLayer=n(656).default,e.MaskLayer=n(480).default,e.WMTSLayer=n(661).default,e.WMSLayer=n(660).default,e.GeometryOverlay=n(301).default,e.MultiPolygon=n(333),e.PolygonStyle=n(156).PolygonStyle,e.ExtrudablePolygonStyle=n(156).ExtrudablePolygonStyle,e.MultiCircle=n(719),e.CircleStyle=n(156).CircleStyle,e.MultiRectangle=n(723),e.RectangleStyle=n(156).RectangleStyle,e.MultiEllipse=n(720),e.EllipseStyle=n(156).EllipseStyle,e.MultiPolyline=n(500),e.PolylineStyle=n(334).default,e.LabelStyle=n(388).default,e.MultiLabel=n(721),e.MultiMarker=n(722),e.MarkerStyle=n(499),e.InfoWindow=n(718).default,e.DOMOverlay=n(387).default,e.MarkerCluster=n(725).default,e.Light=n(506).default,e.VisualPlugin=n(740),e.ModelPlugin=n(504).default,e.LayerPlugin=n(504).default,e.constants={CONTROL_POSITION:n(275).CONTROL_POSITION,DEFAULT_CONTROL_ID:n(275).DEFAULT_CONTROL_ID,GEOMETRY_TYPES:n(161).GEOMETRY_TYPES,LIGHT_TYPE:n(336).LIGHT_TYPE,IMAGE_DISPLAY:n(117).IMAGE_DISPLAY,LAYER_LEVEL:n(125).LAYER_LEVEL,MAP_ZOOM_TYPE:n(302).MAP_ZOOM_TYPE},e.AnimatableMixin=n(465).animatableMixin},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(321);e.default={v:"\n    attribute vec2 a_Positions;\n    attribute vec4 a_InstanceCoords;\n    attribute vec4 a_InstanceColor;\n    attribute float a_InstanceWidth;\n\n    uniform mat4 u_matrix;\n    uniform sampler2D u_SamplerArrow;\n    uniform float u_mapScale;\n    uniform vec2 u_resolution;\n\t  varying vec2 v_TexCoord;\n\t  varying vec4 v_Color;\n    "+i.projectScreenPart+"\n\n\n\t  void main(){\n\t\n\t    vec2 wH = vec2(a_InstanceWidth * (20.0 / 4.0), a_InstanceWidth * (20.0 / 4.0));\n\t    vec2 startPt = a_InstanceCoords.xy;\n      vec2 endPt = a_InstanceCoords.zw;\n      vec2 wh = vec2(abs(endPt.x - startPt.x), abs(endPt.y - startPt.y));\n\t    vec2 transCoord = (startPt + endPt) / 2.0;\n      \n      vec2 start_proj = project(u_matrix * vec4(startPt, 0., 1.));\n      vec2 end_proj = project(u_matrix * vec4(endPt, 0., 1.));\n\n\t    vec4 center_proj = u_matrix * vec4(transCoord, 0., 1.);\n\t    \n      vec2 center_screen = project(center_proj);\n      vec2 delta = end_proj - start_proj;\n      float len = length(delta);\n      float angle_sin = delta.x / len;\n      float angle_cos = delta.y / len;\n      mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n      \n      vec2 positions = a_Positions * 0.5 + 0.5;\n\n      vec2 corner_screen =  rotation_matrix * vec2(\n        (wH.x * positions.x - wH.x * 0.5) * u_mapScale, \n        (wH.y * (positions.y - 1.0) + wH.y * 0.5) * u_mapScale\n      ) + center_screen.xy;\n\n      vec4 corner_proj = unproject(corner_screen, center_proj.z, center_proj.w);\n      gl_Position = corner_proj;\n\n      gl_PointSize = 100.0;\n\n\t    v_TexCoord = vec2(positions.x, positions.y);\n\t    v_Color = vec4(a_InstanceColor.rgb / 255.0, 1.0);\n\t  }\n  ",f:"\n    precision mediump float;\n    varying vec2 v_TexCoord;\n    varying vec4 v_Color;\n\n    uniform sampler2D u_SamplerArrow;\n    void main(void) {\n\t\t\tvec4 color = texture2D(u_SamplerArrow, v_TexCoord);\n      gl_FragColor = mix(vec4(0.0, 0.0, 0.0, 0.0), v_Color, step(0.5, color.a));\n\t\t} \n  ",name:"arrow"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(290),o=n(374),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=r.default?i.LIGHT_UNIFORM+i.LIGHT_VARYING+i.LIGHT_VERTEX:"",s=r.default?i.LIGHT_VARYING+i.LIGHT_FRAG:"";e.default={v:"\n\t\tprecision highp float;\n\t\tattribute vec2 a_Position;\n\t\tattribute vec4 a_Color;\n\t\tattribute vec2 a_Normal;\n\t\tattribute vec2 a_LineInfo;\n\t\tattribute float a_LineDistance;\n\t\tattribute vec2 a_SideInfo;\n\n\t\tuniform mat4 u_matrix;\n\t\tuniform mat4 u_modelMatrix;\n\t\tuniform float u_SizeScale;\n\n\t\tvarying vec4 v_Color;\n\t\tvarying vec2 v_Normal;\n\t\tvarying vec2 v_LineInfo;\n\t\tvarying vec2 v_Pos;\n\t\tvarying float v_Transform;\n\t\tvarying float v_LineDistance;\n\t\tvarying float v_Width;\n\t\tvarying float v_opaque_part;\n\n\t\t"+a+"\n\n\t\tvoid main(){\n\n\t\t\tfloat isSide = fract(a_SideInfo.x / 2.) * 2.;\n\t\t\tfloat isNoSideLine = floor(a_SideInfo.x / 2.);\n\t\t\tv_opaque_part = mix(1.0, 0.0, smoothstep(0.0, 1.0, isSide * isNoSideLine));\n\n\t\t\tfloat zoom = floor(u_SizeScale / 1000.) / 100.;\n\t\t\tfloat scale = fract(u_SizeScale / 1000.) * 10.;\n\t\t\tfloat preWidth = floor(a_Position.x / 2048.0)/2.0;\n\t\t\tfloat nextWidth = floor(a_Position.y / 2048.0)/2.0;\n\n\t\t\tv_Color = a_Color;\n\t\t\tv_Normal = a_Normal;\n\t\t\tv_LineInfo = a_LineInfo;\n\t\t\tv_LineDistance = floor(a_LineDistance/10.0);\n\t\t\tvec2 point = (fract(a_Position.xy / 2048.0) * 2048.0 - 1024.0) * 0.5;\n\n\t\t\t\n\t\t\tfloat width = a_LineInfo.x / 2.0;\n\t\t\tfloat nearWidth = mix(nextWidth, preWidth, step(0.5, zoom));\n\t\t\tv_Width = mix(\n\t\t\t\twidth,\n\t\t\t\tmix(\n\t\t\t\t\tmix(width, nextWidth, zoom),\n\t\t\t\t\tmix(preWidth, width, zoom),\n\t\t\t\t\tstep(0.5, zoom)\n\t\t\t\t),\n\t\t\t\tfloat(v_LineDistance > 0. && nearWidth > 0.)\n\t\t\t) / scale;\n\n\t\t\tv_Normal = vec2(a_Normal.x - 128.0, a_Normal.y - 128.0) / 63.;\n\t\t\tv_Pos = point + v_Normal * v_Width;\n\t\t\tv_Transform = a_SideInfo.y;\n\t\t\tgl_Position = u_matrix * vec4(v_Pos, 0.0, 1.0);\n\n\t\t\t\n\t\t\t"+(r.default?"lighting_apply_on_vertex(vec3(v_Pos, 0.0), vec3(0.0, 0.0, 1.0), u_modelMatrix, vec2(0.1, 16.0));":"")+"\n\t\t}\n\t",f:"\n\t\tprecision highp float;\n\t\tvarying vec4 v_Color;\n\t\tvarying vec2 v_Normal;\n\t\tvarying vec2 v_LineInfo;\n\t\tvarying vec2 v_Pos;\n\t\tvarying float v_Transform;\n\t\tvarying float v_LineDistance;\n\t\tvarying float v_Width;\n\t\tvarying float v_opaque_part;\n\n\t\t"+s+"\n\n\t\tvoid main(){\n\t\t\tvec4 f_Color;\n\t\t\tf_Color.r = v_Color.r / 255.0;\n\t\t\tf_Color.g = v_Color.g / 255.0;\n\t\t\tf_Color.b = v_Color.b / 255.0;\n\t\t\tf_Color.a = 1.0;\n\n\t\t\tfloat alpha = 1.0;\n\t\t\tfloat minAlpha = 0.0;\n\t\t\tfloat feather = min(v_Width * 0.3, 2.0);\n\n\t\t\t\n\t\t\tfloat transformByte = floor(v_Transform + 0.5);\n\t\t\tvec2 translate = vec2(fract(transformByte / 4.0) * 4.0, floor(fract(transformByte / 16.0) * 4.0));\n\t\t\tfloat scale = floor(transformByte / 16.0);\n\t\t\tvec2 coord = vec2(v_Pos.x, 0. - v_Pos.y) * scale - translate * 256.0;\n\t\t\tbool isOutSide = coord.x < 0. || coord.x > 256.0 || coord.y < 0. || coord.y > 256.0;\n\n\t\t\tfloat dist = abs(length(v_Normal) * v_Width);\n\t\t\tfloat isTransparent = float(\n\t\t\t\t(dist > v_Width || isOutSide) || \n\t\t\t\t(v_LineInfo.y> 0.0 && mod(v_LineDistance, floor(v_LineInfo.y/10.0) * (2.0-fract(v_LineInfo.y/10.0))) > floor(v_LineInfo.y/10.0))\n\t\t\t);\n\n\t\t\talpha = mix(\n\t\t\t\tmix(alpha, clamp((v_Width - dist) / feather, 0.0, 1.0), float(v_Width>0. && dist>(v_Width - feather))),\n\t\t\t\t0.0,\n\t\t\t\tisTransparent\n\t\t\t);\n\n\t\t\t\n\t\t\t"+(r.default?"vec4 colorInLight = lighting_apply_on_color(f_Color);":"vec4 colorInLight = f_Color;")+"\n\t\t\tgl_FragColor =  colorInLight * (v_Color.a /255.0) * alpha * v_opaque_part;\n\t\t}\n\t",name:"base"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={v:"\nattribute vec2 a_Position;\nattribute vec4 a_Info;\nuniform mat4 u_matrix;\nuniform mat4 u_modelMatrix;\nuniform mat4 u_lightPVMatrix;\nvarying vec4 v_pos;\nvarying vec4 v_flatNDCCoord;\n\nvoid main(){\n\tv_pos = vec4(a_Position.xy - 2048.0, a_Info.x, 1.0);\n\n\t\n    v_flatNDCCoord = u_matrix * vec4(v_pos.xy, 0.0, 1.0);\n    \n    vec4 posInLightView = u_lightPVMatrix * u_modelMatrix *  vec4(v_pos.xyz, 1.0);\n\n\tgl_Position = posInLightView;\n}",f:"\nprecision mediump float;\n\nuniform float u_maskScale;\nuniform sampler2D u_maskSampler;\n\nvarying vec4 v_pos;\nvarying vec4 v_flatNDCCoord;\n\nvoid main(){ \n\tvec2 v_texCoord = (v_flatNDCCoord.xy / v_flatNDCCoord.w * u_maskScale + 1.0) / 2.0;\n\n\t\n\tvec4 maskColor = texture2D(u_maskSampler, v_texCoord);\n\tfloat isCulledByMask = maskColor.r;\n\tfloat alpha = 1.0;\n\tif(isCulledByMask > 0.99) {\n\t\tdiscard;\n\t}\n\tif(v_pos.x < -.17 || v_pos.y > .17 || v_pos.x > 256.0 || v_pos.y < -256.0){\n\t\tdiscard;\n\t}\n\n    gl_FragColor = vec4(1.0);\n}",name:"building-shadow"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(290),o="\nattribute vec2 a_Position;\nattribute vec4 a_Color;\nattribute vec4 a_Info;\nattribute vec4 a_Transform;\nattribute float a_Height;\nuniform mat4 u_matrix;\nuniform mat4 u_modelMatrix;\nuniform float u_use3D;\nvarying vec4 v_coord;\nvarying vec4 v_color;\nvarying vec2 v_Transform;\n"+i.LIGHT_UNIFORM+"\n"+i.LIGHT_VARYING+"\n"+i.LIGHT_VERTEX+"\n\nvoid main(){\n\tvec4 v_pos = vec4(a_Position.xy - 2048.0, mix(0.0, a_Height, u_use3D), 1.0);\n\tvec3 a_normal = normalize(vec3(a_Info.xyz-128.0));\n\n\t\n\tv_color = vec4(float(a_Color.r), float(a_Color.g), float(a_Color.b), float(a_Color.a)) / 255.0;\n\tvec2 objSpec = vec2(0.5, 32.0);\n\tlighting_apply_on_vertex(v_pos.xyz, a_normal, u_modelMatrix, objSpec);\n\n\t\n\tvec4 v_flatNDCCoord = u_matrix * vec4(v_pos.xy, 0.0, 1.0);\n\tv_coord = vec4(v_pos.xy, v_flatNDCCoord.xy / v_flatNDCCoord.w);\n\tv_Transform = a_Transform.xy;\n\n\tgl_Position = u_matrix * v_pos;\n}",r="\nprecision mediump float;\n\nuniform float u_maskScale;\nuniform sampler2D u_maskSampler;\n\nvarying vec4 v_coord;\nvarying vec4 v_color;\nvarying vec2 v_Transform;\n\n"+i.LIGHT_VARYING+"\n"+i.LIGHT_FRAG+"\n\nvoid main(){ \n\tvec2 v_texCoord = (v_coord.zw * u_maskScale + 1.0) / 2.0;\n\n\t\n\tvec4 maskColor = texture2D(u_maskSampler, v_texCoord);\n\tfloat isCulledByMask = maskColor.r;\n\t\n\t\n\tif(isCulledByMask > 0.99) {\n\t\tdiscard;\n\t}\n\n\t\n\tvec2 transformRound = floor(v_Transform + 0.5);\n\tvec2 translate = vec2(fract(transformRound.x / 16.0) * 16.0, floor(transformRound.x / 16.0));\n\tfloat scale = transformRound.y;\n\tvec2 coord = vec2(v_coord.x, - v_coord.y) * scale - translate * 256.0;\n\tbool isOutSide = coord.x < -.17 || coord.x > 256.0 || coord.y < -.17 || coord.y > 256.0;\n\t\n\tif(isOutSide){\n\t\t\n\t\tdiscard;\n\t}\n\n\tvec4 color = lighting_apply_on_color(v_color);\n\tgl_FragColor = vec4(color.rgb * color.a, color.a);\n}";e.default={v:o,f:r,name:"building"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.gradientNoise="\n\nvec2 random(vec2 p) {\n\treturn -1.0 + 2.0 * fract(\n            sin(\n                vec2(\n                    dot(p, vec2(127.1, 311.7)),\n                    dot(p, vec2(269.5, 183.3))\n                )\n            ) * 43758.5453123\n        );\n}\n\n\nfloat noise(vec2 p) {\n\n    vec2 i = floor(p);\n    vec2 f = fract(p);\n\n\n    float a1 = dot(random(i), f);\n    float a2 = dot(random(i + vec2(1., 0.)), f + vec2(-1., 0.));\n    float a3 = dot(random(i + vec2(1., 1.)), f + vec2(-1., -1.));\n    float a4 = dot(random(i + vec2(0., 1.)), f + vec2(0., -1.));\n\n\n    vec2 w = smoothstep(0., 1., f);\n    return mix(\n        mix(a1, a2, w.x),\n        mix(a4, a3, w.x),\n        w.y\n    );\n}\n\nconst int FBM_NUM = 5;\nconst float FREQ = 2.;\nfloat fbm(vec2 p, vec2 cellScale) {\n    float f = 0.0;\n    float a = 1.0;\n    p *= cellScale;\n\n    for (int i = 0; i < FBM_NUM; i++) {\n        f += a * noise(p);\n        p *= FREQ;\n        a /= FREQ;\n    }\n    return f;\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(583),o=n(374),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=r.default?"\n\nfloat edgeY = (uFogEdge.x + 1.) / 2.;\nfloat x = fract((vPosition.x * uViewInfo.y + uViewInfo.x) / 2. / PI);\nvec2 skyCoord = vec2(\n\tgetCoordByDisplay(x, uSkyInfo.x * uViewInfo.y / PI, uSkyInfo.z),\n\tgetCoordByDisplay((texCoord.y - edgeY) / (1.0 - edgeY), uSkyInfo.y / (1.0 - edgeY), uSkyInfo.w)\n);\nvec4 skyColor = mix(\n\tuSkyColor,\n\ttexture2D(uSkySampler, skyCoord),\n\tstep(0.001, uSkyInfo.x * uSkyInfo.y)\n);\n\n\nvec2 p = vec2(texCoord.x - uViewInfo.w + uViewInfo.x / uViewInfo.y / 2., texCoord.y - edgeY);\nfloat mask = smoothstep(0., 0.5, p.y);\nfloat n = mix(\n\t0.,\n\tmax(0., fbm(p, vec2(2., 4.)) * mask),\n\tuViewInfo.z\n);\nvec4 skyWithCloud = vec4(mix(skyColor.rgb, vec3(1.0), n) * uSkyBrightness, skyColor.a);\n":"vec4 skyWithCloud = uSkyColor;",s="\n#define SHADER_NAME FogShader-fragment-shader\nprecision highp float;\n\nconst float PI = 3.141592653589793;\n\n\nuniform vec2 uRange;\n\n\nuniform vec3 uFogEdge;\n\nuniform sampler2D uSampler;\nuniform sampler2D uDepthSampler;\nuniform sampler2D uSkySampler;\nuniform vec4 uSkyInfo;\nuniform vec4 uViewInfo;\nuniform float uSkyBrightness;\nuniform vec4 uFogColor;\nuniform vec4 uSkyColor;\n\nvarying vec2 vPosition;\n\nfloat LinearizeDepth(float depth) {\n    float near = 0.1;\n    float far = 100.0;\n    float z = depth * 2.0 - 1.0;\n    return (2.0 * near) / (far + near - z * (far - near));\n}\n\nfloat getDepthFromY(float y) {\n\t\n\treturn min(uFogEdge.z + (uFogEdge.y - uFogEdge.z) * y / uFogEdge.x, 1.);\n}\n\nfloat getCoordByDisplay(float value, float max, float displayType) {\n\t\n\treturn mix(\n\t\tvalue / max,\n\t\tmix(\n\t\t\tvalue,\n\t\t\tfract(value / max),\n\t\t\tstep(2.0, displayType)\n\t\t),\n\t\tstep(1.0, displayType)\n\t);\n}\n\n"+i.gradientNoise+"\n\nvoid main() {\n\tvec2 texCoord = (vPosition + vec2(1.0)) / 2.0;\n\n\t\n\tfloat depth = texture2D(uDepthSampler, texCoord).x;\n\n\t\n\tdepth = min(getDepthFromY(vPosition.y), depth);\n\t\n\n\t\n\tfloat fogFactor = mix(\n\t\tsmoothstep(getDepthFromY(uFogEdge.x - uRange.x), uFogEdge.y, depth),\n\t\t1. - smoothstep(uFogEdge.y, getDepthFromY(uFogEdge.x + uRange.y), depth),\n\t\tstep(uFogEdge.y, depth)\n\t);\n\n\t\n\t\n\tvec4 sceneColor = vec4(0.);\n\n\t"+a+"\n\t\n\t\n\tvec4 bgColor = mix(sceneColor, skyWithCloud, step(uFogEdge.y, depth));\n\n\t\n\t\n\tvec4 blendColor = mix(bgColor, uFogColor, fogFactor);\n\t\n\t\n\t\n\n\tgl_FragColor = mix(\n\t\tblendColor,\n\t\tsceneColor,\n\t\tfloat(vPosition.y < uFogEdge.x - uRange.x)\n\t);\n}\n";e.default={v:"\n#define SHADER_NAME FogShader-vertex-shader\nattribute vec2 aClipSpacePosition;\nvarying vec2 vPosition;\n\n\nuniform vec2 uRange;\n\nuniform vec3 uFogEdge;\n\nvoid main() {\n\tfloat bottom = uFogEdge.x - uRange.x;\n\tfloat y = mix(\n\t\tbottom,\n\t\taClipSpacePosition.y,\n\t\tstep(0., aClipSpacePosition.y)\n\t);\n\tvPosition = vec2(aClipSpacePosition.x, y);\n\t\n\tgl_Position = vec4(vPosition, 1.0, 1.0);\n}\n",f:s,name:"fog"}},function(t,e,n){"use strict";function i(t){return{v:"\n\t#define SHADER_NAME FXAA3Shader-vertex-shader\n\tattribute vec2 aClipSpacePosition;\n\n\tvoid main() {\n\tgl_Position = vec4(aClipSpacePosition, 1.0, 1.0);\n\t}\n\t",f:"\n\t#define SHADER_NAME FXAA3Shader-fragment-shader\n\tprecision highp float;\n\n\t"+(0,o.getFxaaFunPart)(t)+"\n\n\n\tuniform vec2 uResolution;\n\tuniform sampler2D uSampler;\n\tuniform bool uEnabled;\n\n\tconst float fxaaQualitySubpix = 0.5;\n\tconst float fxaaQualityEdgeThreshold = 0.125;\n\tconst float fxaaQualityEdgeThresholdMin = 0.0833;\n\n\tvoid main()\n\t{\n\t\tvec2 v_textureCoordinates = vec2(gl_FragCoord.xy / uResolution.xy);\n\t\tvec2 fxaaQualityRcpFrame = vec2(1.0) / uResolution.xy;\n\t\tvec4 color = texture2D(uSampler, v_textureCoordinates);\n\n\t\tcolor.rgb = mix(color.rgb,\n\t\tFxaaPixelShader(\n\t\t\tv_textureCoordinates,\n\t\t\tuSampler,\n\t\t\tfxaaQualityRcpFrame,\n\t\t\tfxaaQualitySubpix,\n\t\t\tfxaaQualityEdgeThreshold,\n\t\t\tfxaaQualityEdgeThresholdMin\n\t\t).rgb,\n\t\tfloat(uEnabled)\n\t\t);\n\t\tgl_FragColor = color;\n\t}",name:"fxaa3"}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(586)},function(t,e,n){"use strict";/**
 * @license
 * Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *  * Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *  * Neither the name of NVIDIA CORPORATION nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
function i(t){return"\n    #define FXAA_QUALITY_PRESET "+t+"\n\n    #if (FXAA_QUALITY_PRESET == 10)\n        #define FXAA_QUALITY_PS 3\n        #define FXAA_QUALITY_P0 1.5\n        #define FXAA_QUALITY_P1 3.0\n        #define FXAA_QUALITY_P2 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 11)\n        #define FXAA_QUALITY_PS 4\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 3.0\n        #define FXAA_QUALITY_P3 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 12)\n        #define FXAA_QUALITY_PS 5\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 4.0\n        #define FXAA_QUALITY_P4 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 13)\n        #define FXAA_QUALITY_PS 6\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 4.0\n        #define FXAA_QUALITY_P5 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 14)\n        #define FXAA_QUALITY_PS 7\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 4.0\n        #define FXAA_QUALITY_P6 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 15)\n        #define FXAA_QUALITY_PS 8\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 4.0\n        #define FXAA_QUALITY_P7 12.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 20)\n        #define FXAA_QUALITY_PS 3\n        #define FXAA_QUALITY_P0 1.5\n        #define FXAA_QUALITY_P1 2.0\n        #define FXAA_QUALITY_P2 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 21)\n        #define FXAA_QUALITY_PS 4\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 22)\n        #define FXAA_QUALITY_PS 5\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 23)\n        #define FXAA_QUALITY_PS 6\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 24)\n        #define FXAA_QUALITY_PS 7\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 3.0\n        #define FXAA_QUALITY_P6 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 25)\n        #define FXAA_QUALITY_PS 8\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 4.0\n        #define FXAA_QUALITY_P7 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 26)\n        #define FXAA_QUALITY_PS 9\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 4.0\n        #define FXAA_QUALITY_P8 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 27)\n        #define FXAA_QUALITY_PS 10\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 4.0\n        #define FXAA_QUALITY_P9 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 28)\n        #define FXAA_QUALITY_PS 11\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 4.0\n        #define FXAA_QUALITY_P10 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 29)\n        #define FXAA_QUALITY_PS 12\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.5\n        #define FXAA_QUALITY_P2 2.0\n        #define FXAA_QUALITY_P3 2.0\n        #define FXAA_QUALITY_P4 2.0\n        #define FXAA_QUALITY_P5 2.0\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 2.0\n        #define FXAA_QUALITY_P10 4.0\n        #define FXAA_QUALITY_P11 8.0\n    #endif\n    #if (FXAA_QUALITY_PRESET == 39)\n        #define FXAA_QUALITY_PS 12\n        #define FXAA_QUALITY_P0 1.0\n        #define FXAA_QUALITY_P1 1.0\n        #define FXAA_QUALITY_P2 1.0\n        #define FXAA_QUALITY_P3 1.0\n        #define FXAA_QUALITY_P4 1.0\n        #define FXAA_QUALITY_P5 1.5\n        #define FXAA_QUALITY_P6 2.0\n        #define FXAA_QUALITY_P7 2.0\n        #define FXAA_QUALITY_P8 2.0\n        #define FXAA_QUALITY_P9 2.0\n        #define FXAA_QUALITY_P10 4.0\n        #define FXAA_QUALITY_P11 8.0\n    #endif\n\n    #define FxaaBool bool\n    #define FxaaFloat float\n    #define FxaaFloat2 vec2\n    #define FxaaFloat3 vec3\n    #define FxaaFloat4 vec4\n    #define FxaaHalf float\n    #define FxaaHalf2 vec2\n    #define FxaaHalf3 vec3\n    #define FxaaHalf4 vec4\n    #define FxaaInt2 vec2\n    #define FxaaTex sampler2D\n\n    #define FxaaSat(x) clamp(x, 0.0, 1.0)\n    #define FxaaTexTop(t, p) texture2D(t, p)\n    #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r))\n\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\n    FxaaFloat4 FxaaPixelShader(\n\n\n\n        FxaaFloat2 pos,\n\n\n\n\n\n        FxaaTex tex,\n\n\n\n\n\n        FxaaFloat2 fxaaQualityRcpFrame,\n\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualitySubpix,\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualityEdgeThreshold,\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        FxaaFloat fxaaQualityEdgeThresholdMin\n    ) {\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posM;\n        posM.x = pos.x;\n        posM.y = pos.y;\n        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n        #define lumaM rgbyM.y\n        FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat maxSM = max(lumaS, lumaM);\n        FxaaFloat minSM = min(lumaS, lumaM);\n        FxaaFloat maxESM = max(lumaE, maxSM);\n        FxaaFloat minESM = min(lumaE, minSM);\n        FxaaFloat maxWN = max(lumaN, lumaW);\n        FxaaFloat minWN = min(lumaN, lumaW);\n        FxaaFloat rangeMax = max(maxWN, maxESM);\n        FxaaFloat rangeMin = min(minWN, minESM);\n        FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n        FxaaFloat range = rangeMax - rangeMin;\n        FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n        FxaaBool earlyExit = range < rangeMaxClamped;\n    /*--------------------------------------------------------------------------*/\n        if(earlyExit)\n            return rgbyM;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNS = lumaN + lumaS;\n        FxaaFloat lumaWE = lumaW + lumaE;\n        FxaaFloat subpixRcpRange = 1.0/range;\n        FxaaFloat subpixNSWE = lumaNS + lumaWE;\n        FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n        FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNESE = lumaNE + lumaSE;\n        FxaaFloat lumaNWNE = lumaNW + lumaNE;\n        FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n        FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat lumaNWSW = lumaNW + lumaSW;\n        FxaaFloat lumaSWSE = lumaSW + lumaSE;\n        FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n        FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n        FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n        FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n        FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n        FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n        FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n        FxaaBool horzSpan = edgeHorz >= edgeVert;\n        FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n    /*--------------------------------------------------------------------------*/\n        if(!horzSpan) lumaN = lumaW;\n        if(!horzSpan) lumaS = lumaE;\n        if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n        FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat gradientN = lumaN - lumaM;\n        FxaaFloat gradientS = lumaS - lumaM;\n        FxaaFloat lumaNN = lumaN + lumaM;\n        FxaaFloat lumaSS = lumaS + lumaM;\n        FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n        FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n        if(pairN) lengthSign = -lengthSign;\n        FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posB;\n        posB.x = posM.x;\n        posB.y = posM.y;\n        FxaaFloat2 offNP;\n        offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n        offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n        if(!horzSpan) posB.x += lengthSign * 0.5;\n        if( horzSpan) posB.y += lengthSign * 0.5;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat2 posN;\n        posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n        posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n        FxaaFloat2 posP;\n        posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n        posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n        FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n        FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n        FxaaFloat subpixE = subpixC * subpixC;\n        FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n    /*--------------------------------------------------------------------------*/\n        if(!pairN) lumaNN = lumaSS;\n        FxaaFloat gradientScaled = gradient * 1.0/4.0;\n        FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n        FxaaFloat subpixF = subpixD * subpixE;\n        FxaaBool lumaMLTZero = lumaMM < 0.0;\n    /*--------------------------------------------------------------------------*/\n        lumaEndN -= lumaNN * 0.5;\n        lumaEndP -= lumaNN * 0.5;\n        FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n        FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n        FxaaBool doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n    /*--------------------------------------------------------------------------*/\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n    /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 3)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n    /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 4)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 5)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n    /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 6)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n    /*--------------------------------------------------------------------------*/\n                            #if (FXAA_QUALITY_PS > 7)\n                            if(doneNP) {\n                                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                doneN = abs(lumaEndN) >= gradientScaled;\n                                doneP = abs(lumaEndP) >= gradientScaled;\n                                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                                doneNP = (!doneN) || (!doneP);\n                                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n    /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 8)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n    /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 9)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n    /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 10)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 11)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n    /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 12)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n    /*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n    /*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n    /*--------------------------------------------------------------------------*/\n                }\n                #endif\n    /*--------------------------------------------------------------------------*/\n            }\n            #endif\n    /*--------------------------------------------------------------------------*/\n        }\n        #endif\n    /*--------------------------------------------------------------------------*/\n                            }\n                            #endif\n    /*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n    /*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n    /*--------------------------------------------------------------------------*/\n                }\n                #endif\n    /*--------------------------------------------------------------------------*/\n            }\n            #endif\n    /*--------------------------------------------------------------------------*/\n        }\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat dstN = posM.x - posN.x;\n        FxaaFloat dstP = posP.x - posM.x;\n        if(!horzSpan) dstN = posM.y - posN.y;\n        if(!horzSpan) dstP = posP.y - posM.y;\n    /*--------------------------------------------------------------------------*/\n        FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n        FxaaFloat spanLength = (dstP + dstN);\n        FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n        FxaaFloat spanLengthRcp = 1.0/spanLength;\n    /*--------------------------------------------------------------------------*/\n        FxaaBool directionN = dstN < dstP;\n        FxaaFloat dst = min(dstN, dstP);\n        FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n        FxaaFloat subpixG = subpixF * subpixF;\n        FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n        FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n    /*--------------------------------------------------------------------------*/\n        FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n        FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n        if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n        if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n\t}"}Object.defineProperty(e,"__esModule",{value:!0}),e.getFxaaFunPart=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={v:"#version 300 es\n#define SHADER_NAME gaussianblur-vertex-shader\nin vec2 aClipSpacePosition;\nout vec2 vTexCoord;\n\nvoid main() {\n  vTexCoord = (aClipSpacePosition + 1.0) / 2.0;\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n}\n",f:"#version 300 es\n#define SHADER_NAME gaussianblur-fragment-shader\nprecision highp float;\n\nout vec4 fragColor;\nin vec2 vTexCoord;\n\nuniform sampler2D uSampler;\nuniform bool uHorizontal;\nuniform vec2 uResolution;\n\nconst float offset[3] = float[](0.0, 1.3846153846, 3.2307692308);\nconst float weight[3] = float[](0.2270270270, 0.3162162162, 0.0702702703);\nconst int count = 3;\n\nvoid main()\n{             \n    vec2 tex_offset = 1.0 / uResolution;\n    vec3 result = texture(uSampler, vTexCoord).rgb * weight[0];\n    if(uHorizontal)\n    {\n        for(int i = 1; i < count; ++i)\n        {\n            result += texture(uSampler, vTexCoord + vec2(tex_offset.x * offset[i], 0.0)).rgb * weight[i];\n            result += texture(uSampler, vTexCoord - vec2(tex_offset.x * offset[i], 0.0)).rgb * weight[i];\n        }\n    }\n    else\n    {\n        for(int i = 1; i < count; ++i)\n        {\n            result += texture(uSampler, vTexCoord + vec2(0.0, tex_offset.y * offset[i])).rgb * weight[i];\n            result += texture(uSampler, vTexCoord - vec2(0.0, tex_offset.y * offset[i])).rgb * weight[i];\n        }\n    }\n    fragColor = vec4(result, 1.0);\n\n}\n",name:"gaussianblur"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={v:"\n#define SHADER_NAME highlight-vertex-shader\nattribute vec2 aClipSpacePosition;\n\nvoid main() {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n}\n",f:"\n#define SHADER_NAME highlight-fragment-shader\nprecision highp float;\n\nuniform vec4 uColor;\n\nvoid main() {\n  gl_FragColor = uColor;\n}\n",name:"highlight"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sphereShader=e.defaultShader=void 0;var i=n(154),o=(e.defaultShader={v:"\nattribute vec2 a_position;\n\nuniform mat4 u_matrix;\nuniform vec2 u_size;\nuniform vec4 u_texInfo;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\t\n\tv_texCoord = vec2(u_texInfo[0] + a_position.x * u_texInfo[2], u_texInfo[1] + a_position.y * u_texInfo[3]);\n\n\t\n\tvec2 position = vec2(a_position.x * u_size.x, (a_position.y - 1.0) * u_size.y);\n\n\tgl_Position = u_matrix * vec4(position, 0.0, 1.0);\n}\n",f:"\nprecision mediump float;\n\nuniform float u_opacity;\nuniform sampler2D u_sampler;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n\tvec4 color = texture2D(u_sampler, v_texCoord);\n\t\n\tgl_FragColor = color * u_opacity;\n}\n",name:"instance_tex"},"\nattribute vec2 a_position;\n\nuniform mat4 u_matrix;\nuniform vec2 u_size;\nuniform vec4 u_texInfo;\nuniform vec3 u_mercator;\nuniform float u_ratio;\n\n"+i.UNIFORM_PART+"\n\nvarying vec2 v_texCoord;\nvarying vec4 v_debug;\n\n"+i.PROJECTION_PART+"\n\nvoid main() {\n\t\n  v_texCoord = u_texInfo.xy + a_position * u_texInfo.zw;\n\n\n  vec2 position = vec2(a_position.x, 1. - a_position.y) * u_size;\n\n\n  vec2 point = (position + u_mercator.xy) / pow(2., u_mercator.z);\n\n\n  vec2 latlng = fromPointToLatLng(point);\n\n  vec4 posOnPlane= u_matrix * vec4(a_position.x * u_size.x, (a_position.y - 1.) * u_size.y, 0.0, 1.0);\n  vec4 posOnSphere = uMatrix * project_view_sphere_position(latlng);\n  gl_Position = mix(posOnPlane, posOnSphere, u_ratio);\n\n\n\n\n}\n");e.sphereShader={v:o,f:"\nprecision mediump float;\n\nuniform float u_opacity;\nuniform sampler2D u_sampler;\nuniform float u_wireframe;\n\nvarying vec2 v_texCoord;\nvarying vec4 v_debug;\n\nvoid main() {\n\tvec4 color = texture2D(u_sampler, v_texCoord) * u_opacity;\n  \n  gl_FragColor = mix(\n    color,\n    vec4(1., 0., 0., .6),\n    u_wireframe\n  );\n  \n\n}\n",name:"instance_tex_sphere"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154),o="\n#define SHADER_NAME indoor-mask-vertex-shader\n\nattribute vec3 aPosition;\n\n"+i.UNIFORM_PART+"\nuniform vec4 uRelativeCenter;\n\n"+i.PROJECTION_PART+"\n\nvoid main(void) {\n\tvec3 maskCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n\tgl_Position = uMatrix * vec4(maskCenterPoint + project_scale(aPosition), 1.0);\n}\n";e.default={v:o,f:"\n#define SHADER_NAME mask-fragment-shader\nprecision mediump float;\n\nuniform vec4 uColor;\n\nvoid main(void) {\n\tgl_FragColor = uColor;\n}\n",name:"indoor-mask"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154),o=n(290),r="\n#define SHADER_NAME indoor-vertex-shader\n\nattribute vec3 aPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\n"+i.UNIFORM_PART+"\n"+o.LIGHT_UNIFORM+"\nuniform vec4 uRelativeCenter;\n\nvarying vec3 vColor;\n\n"+o.LIGHT_VARYING+"\n\n"+i.PROJECTION_PART+"\n"+o.LIGHT_VERTEX+"\n\nvoid main(void) {\n\tvec3 relativeCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n\tvec3 worldspaceCoord = relativeCenterPoint + project_scale(aPosition);\n\tgl_Position = uMatrix * vec4(worldspaceCoord, 1.0);\n\n\tlighting_apply_on_vertex(worldspaceCoord, aNormal, mat4(1.0));\n\n\tvColor = aColor / 255.;\n}\n",a="\n#define SHADER_NAME indoor-fragment-shader\nprecision mediump float;\n\nvarying vec3 vColor;\n\n"+o.LIGHT_VARYING+"\n"+o.LIGHT_FRAG+"\n\nvoid main(void) {\n\tgl_FragColor = lighting_apply_on_color(vec4(vColor, 1.));\n}\n";e.default={v:r,f:a,name:"indoor"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154),o=n(290),r="\n#define SHADER_NAME indoor-vertex-shader\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec3 aColor;\n\nattribute vec2 aInstanceCoord;\nattribute vec4 aInstanceInfo;\n\n"+i.UNIFORM_PART+"\n"+o.LIGHT_UNIFORM+"\nuniform vec4 uRelativeCenter;\nuniform bool uEnableLighting;\nuniform vec3 uBoxMin;\nuniform vec3 uBoxMax;\n\nvarying vec3 vColor;\n"+o.LIGHT_VARYING+"\n\n"+i.PROJECTION_PART+"\n"+o.LIGHT_VERTEX+"\n\nmat3 rotateZ(float deg){\n    float rad = degreeToRadian(deg);\n    return mat3(\n        vec3(cos(rad), -sin(rad), 0.),\n        vec3(sin(rad), cos(rad), 0.),\n        vec3(0., 0., 1.)\n    );\n}\n\nmat3 rotateX(float deg){\n    float rad = degreeToRadian(deg);\n    return mat3(\n        vec3(1.0, 0.0, 0.0),\n        vec3(0.0, cos(rad), -sin(rad)),\n        vec3(0.0, sin(rad), cos(rad))\n    );\n}\n\nvoid main(void) {\n\n\tmat3 modelMatrix = rotateZ(-aInstanceInfo.w);\n\n\n\tvec3 modelNormal = rotateX(-90.0) * aNormal;\n\tmodelNormal = modelMatrix * modelNormal;\n\n\n    vec3 relativeCenterPoint = vec3(project_view_local_position_precision(uRelativeCenter.xy, uRelativeCenter.zw), 0.0);\n    vec3 modelCenterPoint = relativeCenterPoint + project_scale(vec3(aInstanceCoord, 0.0));\n\n\n\n    float scale = pow(2.0, uZoom - 20.0);\n    vec3 modelSize = vec3(aInstanceInfo.xy * scale, aInstanceInfo.z * uPixelsPerMeter.z);\n    vec3 localPosition = modelMatrix * (aPosition * modelSize / (uBoxMax - uBoxMin));\n    \n\n    vec3 worldspaceCoord = modelCenterPoint + localPosition;\n\n    gl_Position = uMatrix * vec4(worldspaceCoord, 1.0);\n\n    lighting_apply_on_vertex(worldspaceCoord, modelNormal, mat4(1.0));\n    \n\n    vColor = aColor / 255.;\n}\n",a="\n#define SHADER_NAME indoor-fragment-shader\nprecision mediump float;\n\nvarying vec3 vColor;\n"+o.LIGHT_VARYING+"\n"+o.LIGHT_FRAG+"\n\nvoid main(void) {\n\tgl_FragColor = lighting_apply_on_color(vec4(vColor, 1.));\n}\n";e.default={v:r,f:a,name:"instance_escalator"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154),o=n(291);e.default={v:"#version 300 es\n\t\t#define SHADER_NAME instance-polyline-vertex-shader\n\t\t\n\t\t\n\t\tin vec2 positions;\n\t\t\n\t\tin vec3 instanceStartPositions;\n\t\tin vec3 instanceEndPositions;\n\t\tin vec3 instanceLeftDeltas;\n\t\tin vec3 instanceRightDeltas;\n\t\tin vec4 instanceStartEndPositions64xyLow;\n\t\tin float instanceWidths;\n\t\tin vec4 instanceColors;\n\t\tin vec4 instanceLineInfo;\n\t\tin vec4 instanceArrowInfo;\n\t\tin float instanceArrowStartPositions;\n\t\t\n\t\t\n\t\tin vec3 instancePickingColors;\n\t\t\n\t\tuniform float u_enableGeodesic;\n\t\t\n\t\tuniform float u_isBorder;\n\t\tuniform float u_widthScale;\n\t\tuniform float u_widthMinPixels;\n\t\tuniform float u_widthMaxPixels;\n\t\tuniform float u_miterLimit;\n    uniform vec2 uProject_uDegreePerPixels;\n\n\t\tuniform float u_lineJoin;\n\t\t\n\t\tuniform float u_opacity;\n\t\t\n\t\tconst float EPSILON = 0.001;\n\t\tconst float PIXEL_EPSILON = 0.1;\n\t\t\n\t\t"+i.UNIFORM_PART+"\n\t\t\n\t\t\n\t\tout vec4 vColor;\n\t\t\n\t\tout vec4 vLineInfo;\n\t\tout vec3 vPickingColor;\n\t\t\n\t\t\n\n\t\tout vec4 vClipArray;\n\t\tout vec2 vDashArray;\n\t\tout vec4 vArrowArray;\n\n\t\tout vec4 vLineSegmentInfo;\n\t\tout vec4 vTrimDirection;\n\t\t\n\t\t"+i.PROJECTION_PART+" \n\t\t\n\t\t\n\n\t\t\n\t\tvec2 calculateTangent(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(vec2(0.0, 0.0), normalize(tangent), step(EPSILON, length(tangent)));\n\n\t\t\treturn tangent;\n\t\t}\n        \n\t\tvec3 calculateLinePosition(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tfloat lineCap = instanceLineInfo.x;\n\t\t\tvDashArray = instanceLineInfo.yz;\n\t\t\tvLineSegmentInfo.x = lineCap;\n\n\t\t\tfloat isEnd = positions.x;\n\t\t\tfloat width = clamp(instanceWidths * uPixelsPerMeter[0] * u_widthScale, u_widthMinPixels, u_widthMaxPixels) / 2.0;\n\t\t\tvClipArray.x = width;\n\t\t\tvLineSegmentInfo.w = instanceArrowStartPositions / width;\n\t\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 perpA = vec2(-dirA.y, dirA.x);\n\t\t\tvec2 perpB = vec2(-dirB.y, dirB.x);\n\t\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(perpA, normalize(tangent), step(EPSILON, length(tangent)));\n\t\n\t\t\t\n\t\t\tvec2 miterVec = vec2(-tangent.y, tangent.x);\n\n\t\t\t\n\t\t\tvec2 perp = mix(perpB, perpA, isEnd);\n\t\t\tfloat L = mix(lenB, lenA, isEnd);\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\n\t\t\t\n\t\t\tvec2 vertical_offset = perp * width * positions.y;\n\t\t\tvLineInfo.x = length(vertical_offset);\n\t\n\t\n\t\t\t\n\t\t\tbool isPathStart = step(0.0, -lenA) > 0.5;\n\t\t\tbool isPathEnd = step(0.0, -lenB) > 0.5;\n\t\t\tvec2 dir = mix(dirB, dirA, isEnd);\n\t\t\tvLineSegmentInfo.y = float(isPathStart);\n\t\t\tvLineSegmentInfo.z = float(isPathEnd);\n\t\t\t\n\t\t\t\n\t\t\tvec2 horizontal_offset = vec2(0.0);\n\n\t\t\t\n\t\t\t\n\t\t\thorizontal_offset = mix(-dir, dir, isEnd) * width;\n\t\t\tvClipArray.y = L / width / 2.0;\n\t\t\tfloat capLength = mix(-1.0 - vClipArray.y, 1.0 + vClipArray.y, isEnd);\n\t\t\tvClipArray.zw = vec2(capLength, positions.y);\n\t\t\tvLineInfo.z = capLength;\n\n\t\n\t\t\t\n\n\t\t\t\n\t\t\tif ((isPathStart && !bool(isEnd)) || (isPathEnd && bool(isEnd))) {\n\t\t\t\tcapLength = mix(mix(-vClipArray.y, vClipArray.y, isEnd), capLength, step(0.1, lineCap));\n\t\t\t\tvClipArray.zw = mix(vec2(capLength, positions.y), vClipArray.zw, step(0.1, lineCap));\n\n\t\t\t\t\n\t\t\t\thorizontal_offset = mix(vec2(0.0), horizontal_offset, step(0.1, lineCap));\n\t\t\t\tvLineInfo.z = mix(mix(-vClipArray.y,  vClipArray.y, isEnd), vLineInfo.z, step(0.1, lineCap));\n\t\t\t}\n            vLineInfo.y = capLength;\n            vLineInfo.w = instanceLineInfo.w;\n\t\t\t\n\t\t\treturn currPoint + vec3(vertical_offset, 0.0) + vec3(horizontal_offset, 0.0);\n\t\t}\n\t\t\n\t\t\n\t\tvec2 getSegmentTangent(float isEnd, vec3 segmentDirection) {\n\t\t\t\n\t\t\tvec2 segmentX = mix(-segmentDirection.xy, segmentDirection.xy, isEnd);\n\t\t\tvec2 segmentY = vec2(-segmentX.y, segmentX.x);\n\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      vec3 localPosition_Start = project_view_local_position_precision( instanceStartPositions, instanceStartEndPositions64xyLow.xy);\n      vec3 localPosition_End = project_view_local_position_precision( instanceEndPositions, instanceStartEndPositions64xyLow.zw);\n      \n\t\t\tvec3 geodesic_Position_Start;\n      vec3 geodesic_Position_End;\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, instanceEndPositions, instanceStartEndPositions64xyLow.zw, geodesic_Position_Start, geodesic_Position_End, uProject_uDegreePerPixels);\n     \n      vec3 startLocalPosition = mix(localPosition_Start, geodesic_Position_Start,u_enableGeodesic);\n      vec3 endLocalPosition = mix(localPosition_End, geodesic_Position_End,u_enableGeodesic);\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t    \n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n      vec3 prevStartLinesPosition_Start;\n      vec3 prevStartLinesPosition_Start_Temp;\n      vec3 prevStartLinesPosition_End;\n      \n      vec3 lefDeltaByEnd = mix(instanceLeftDeltas, vec3(0.0), isEnd);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      geodesic_project_view_local_precision(prevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, instanceStartPositions, instanceStartEndPositions64xyLow.xy, prevStartLinesPosition_Start_Temp, prevStartLinesPosition_End, uProject_uDegreePerPixels);\n      prevStartLinesPosition_Start = mix( prevStartLinesPosition_Start_Temp,startLocalPosition, isEnd);\n\n\t\t\tprevPosition  = mix(project_view_local_position_precision(\n\t\t\t\tprevPosition  - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow  - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t),prevStartLinesPosition_Start,u_enableGeodesic) ;\n\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = mix(startLocalPosition,endLocalPosition,isEnd);\n\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n      vec3 endNextLinesPosition_start;\n      vec3 endNextLinesPosition_End_Temp;\n      vec3 endNextLinesPosition_End;\n      vec3 rightDeltaByEnd = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, nextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, endNextLinesPosition_start, endNextLinesPosition_End_Temp, uProject_uDegreePerPixels);\n      endNextLinesPosition_End = mix(endLocalPosition, endNextLinesPosition_End_Temp, isEnd);\n      \n\t\t\tnextPosition = mix(project_view_local_position_precision(\n\t\t\t\tnextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), endNextLinesPosition_End,u_enableGeodesic);\n\n\n\t\t\tvec2 tangent = calculateTangent(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\treturn vec2(dot(tangent, segmentX), dot(tangent, segmentY));\n\t\t}\n\n\t\tvoid main(void) {\n\t\t\tfloat isEnd = positions.x;\n\t\t\t\n\n      vec3 localPosition_Start = project_view_local_position_precision( instanceStartPositions, instanceStartEndPositions64xyLow.xy);\n      vec3 localPosition_End = project_view_local_position_precision( instanceEndPositions, instanceStartEndPositions64xyLow.zw);\n\n\n      vec3 geodesic_Position_Start;\n      vec3 geodesic_Position_End;\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, instanceEndPositions, instanceStartEndPositions64xyLow.zw, geodesic_Position_Start, geodesic_Position_End, uProject_uDegreePerPixels);\n     \n      vec3 startLocalPosition = mix(localPosition_Start, geodesic_Position_Start,u_enableGeodesic);\n      vec3 endLocalPosition = mix(localPosition_End, geodesic_Position_End,u_enableGeodesic);\n\n\t\t\tvec3 segmentDirection = normalize(mix(startLocalPosition - endLocalPosition, endLocalPosition - startLocalPosition, isEnd));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      float maxDiff = length(startLocalPosition - endLocalPosition);\n      segmentDirection *= 0.00001 * maxDiff;\n\t    \n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n      vec3 prevStartLinesPosition_Start;\n      vec3 prevStartLinesPosition_Start_Temp;\n      vec3 prevStartLinesPosition_End;\n      vec3 lefDeltaByEnd = mix(instanceLeftDeltas, vec3(0.0), isEnd);\n\n      geodesic_project_view_local_precision(prevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow -  mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, instanceStartPositions, instanceStartEndPositions64xyLow.xy, prevStartLinesPosition_Start_Temp, prevStartLinesPosition_End, uProject_uDegreePerPixels);\n      prevStartLinesPosition_Start = mix( prevStartLinesPosition_Start_Temp,startLocalPosition, isEnd);\n\n\t\t\n\t\t\tprevPosition  = mix(project_view_local_position_precision(\n\t\t\t\tprevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), prevStartLinesPosition_Start,u_enableGeodesic) + segmentDirection;\n\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = mix(startLocalPosition,endLocalPosition,isEnd);\n\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n      vec3 endNextLinesPosition_start;\n      vec3 endNextLinesPosition_End_Temp;\n      vec3 endNextLinesPosition_End;\n      vec3 rightDeltaByEnd = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, nextPosition +mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, endNextLinesPosition_start, endNextLinesPosition_End_Temp, uProject_uDegreePerPixels);\n      endNextLinesPosition_End = mix(endLocalPosition, endNextLinesPosition_End_Temp, isEnd);\n    \n\t\t\t\n\t\t\tnextPosition = mix(project_view_local_position_precision(\n\t\t\t\tnextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), endNextLinesPosition_End,u_enableGeodesic) + segmentDirection;\n\n\t\t\tvec3 pos = calculateLinePosition(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\tvTrimDirection.xy = -getSegmentTangent(0.0, normalize(startLocalPosition - endLocalPosition));\n\t\t\tvTrimDirection.zw = getSegmentTangent(1.0, normalize(endLocalPosition - startLocalPosition));\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\n\t\t\tgl_Position = uMatrix * vec4(pos, 1.0);\n\t\n\t\t\tvec4 vertexColor = instanceColors.rgba / 255.0 * u_opacity;\n\t\t\tvPickingColor = instancePickingColors;\n\t\t\tvColor = vertexColor;\n\t\t\tvArrowArray = instanceArrowInfo; \n\t\t}\n    \n    ",f:"#version 300 es\n\t\t#define SHADER_NAME instance-polyline-fragment-shader\n\t\t\n\t\tprecision highp float;\n\t\tuniform float u_isBorder;\n\t\tuniform float u_miterLimit;\n    "+o.PICK_UNIFORM+"\n    "+o.PICK_FUNCTION+"\n\t\tuniform float u_lineJoin;\n\t\tuniform sampler2D u_arrowSampler;\n        \n\t\tin vec4 vColor;\n\t\tin vec4 vLineInfo;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\n    in vec4 vClipArray;\n\t\tin vec2 vDashArray;\n\t\tin vec4 vArrowArray;\n    \n    in vec3 vPickingColor;\n\t\tin vec4 vLineSegmentInfo;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tin vec4 vTrimDirection;\n        \n    layout(location = 0) out vec4 fragColor;\n    layout(location = 1) out vec4 emissiveColor;\n\n\t\tvoid main(void) {\n\t\t\tvec4 fColor = vColor;\n\t\t\tvec4 opacity = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\tvec4 red = vec4(1.0, 0.0, 0.0, 1);\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\topacity,\n\t\t\t\tfloat(u_lineJoin == 1.0 &&\n\t\t\t\t\tlength(vec2(abs(vClipArray.z) - vClipArray.y, vClipArray.w)) > 1.0 &&\n\t\t\t\t\t(abs(vLineInfo.y) - vClipArray.y) >= 0.0 && \n\t\t\t\t\t((vLineSegmentInfo.y < 0.5 && vLineSegmentInfo.z < 0.5) || vLineSegmentInfo.x > 1.1)\n\t\t\t\t)\n\t\t\t);\n\n\n\n\n      fColor = mix(fColor, opacity, float(\n        dot(vClipArray.zw - vec2(-vClipArray.y, 0.0), vTrimDirection.xy) > 0.0 &&\n        step(0.1, abs(vTrimDirection.x)) > 0.5 &&\n        vLineSegmentInfo.y < 0.5\n      ));\n\n\n      fColor = mix(fColor, opacity, float(\n        dot(vClipArray.zw - vec2(vClipArray.y, 0.0), vTrimDirection.zw) > 0.0 &&\n        step(0.1, abs(vTrimDirection.x)) > 0.5 &&\n        vLineSegmentInfo.z < 0.5\n      ));\n\t\t\t\n\n\t\t\t\n\t\t\tfloat segmentLength = vLineInfo.z + vClipArray.y;\n\t\t\t\n\t\t\t\n\t\t\tvec2 normalDashArray = vDashArray / vClipArray.x;\n\t\t\tfloat useDash = step(0.1, vDashArray.y) * step(-vClipArray.y, -abs(vLineInfo.z));\n\t\t\tfloat isInGap = step(normalDashArray.x, mod(segmentLength, normalDashArray.x + normalDashArray.y));\n\n\t\t\t\n\t\t\tvec3 normalArrowArray = vArrowArray.xyz / vClipArray.x;\n\t\t\t\n\t\t\tfloat useArrow = (1.0 - u_isBorder) * step(0.1, vArrowArray.x) * step(0.1, vArrowArray.y) * step(-vClipArray.y, -abs(vLineInfo.z)) * step(-0.001, vLineSegmentInfo.w);\n\t\t\t\n\t\t\t\n\t\t\tfloat offsetX = mix(\n\t\t\t\tmix(\n\t\t\t\t\t0.5,\n\t\t\t\t\t1.0 / normalArrowArray.x,\n\t\t\t\t\tstep(0.1, vArrowArray.w)\n\t\t\t\t),\n\t\t\t\t1.0 - 1.0 / normalArrowArray.x,\n\t\t\t\tstep(1.1, vArrowArray.w)\n\t\t\t);\n\t\t\tfloat yMod = mod(segmentLength - vLineSegmentInfo.w, normalArrowArray.y + normalArrowArray.z);\n\t\t\tfloat texCoordY = yMod / normalArrowArray.y;\n\t\t\tfloat texCoordX = offsetX + vClipArray.w / normalArrowArray.x;\n\t\t\t\n\t\t\t\n\t\t\tfloat isComplete = step(0.0, vClipArray.y * 2.0 - (segmentLength + normalArrowArray.y - yMod));\n\t\t\tfloat isFilled = (1.0 - step(1.0, texCoordY)) * step(0.0, texCoordX) * (1.0 - step(1.0, texCoordX));\n\t\t\tvec4 arrowColor = texture(u_arrowSampler, vec2(texCoordX, texCoordY));\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\tmix(fColor, opacity, isInGap),\n\t\t\t\tuseDash\n\t\t\t);\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\tvec4(mix(\n\t\t\t\t\tfColor.rgb,\n\t\t\t\t\tarrowColor.rgb,\n\t\t\t\t\tarrowColor.a\n\t\t\t\t), fColor.a),\n\t\t\t\tuseArrow * isFilled * isComplete\n\t\t\t);\n      \n      fragColor = picking_getFinalColor(fColor, vPickingColor);\n      emissiveColor = mix(vec4(0.0), fColor, vLineInfo.w);\n\t\t\t\n\t\t\t\n\t\t}\n\t",name:"instance_polyline_glsl3"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154),o=n(291);e.default={v:"\n\t\t#define SHADER_NAME instance-polyline-vertex-shader\n\t\t\n\t\t\n\t\tattribute vec2 positions;\n\t\t\n\t\tattribute vec3 instanceStartPositions;\n\t\tattribute vec3 instanceEndPositions;\n\t\tattribute vec3 instanceLeftDeltas;\n\t\tattribute vec3 instanceRightDeltas;\n\t\tattribute vec4 instanceStartEndPositions64xyLow;\n\t\tattribute float instanceWidths;\n\t\tattribute vec4 instanceColors;\n\t\tattribute vec4 instanceLineInfo;\n\t\tattribute vec4 instanceArrowInfo;\n\t\tattribute float instanceArrowStartPositions;\n\t\t\n\t\t\n\t\tattribute vec3 instancePickingColors;\n\t\t\n\t\tuniform float u_enableGeodesic;\n\t\t\n\t\tuniform float u_isBorder;\n\t\tuniform float u_widthScale;\n\t\tuniform float u_widthMinPixels;\n\t\tuniform float u_widthMaxPixels;\n\t\tuniform float u_miterLimit;\n    uniform vec2 uProject_uDegreePerPixels;\n\n\t\tuniform float u_lineJoin;\n\t\t\n\t\tuniform float u_opacity;\n\t\t\n\t\tconst float EPSILON = 0.001;\n\t\tconst float PIXEL_EPSILON = 0.1;\n\t\t\n\t\t"+i.UNIFORM_PART+"\n\t\t\n        \n\t\tvarying vec4 vColor;\n\t\t\n\t\tvarying vec3 vLineInfo;\n    varying vec3 vPickingColor;\n\n\t\t\n\t\t\n\n\t\tvarying vec4 vClipArray;\n\n\t\tvarying vec2 vDashArray;\n\t\tvarying vec4 vArrowArray;\n\n\t\tvarying vec4 vLineSegmentInfo;\n\t\tvarying vec4 vTrimDirection;\n\t\t\n\t\t"+i.PROJECTION_PART+"\n\t\t\n\n\t\t\n\t\tvec2 calculateTangent(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(vec2(0.0, 0.0), normalize(tangent), step(EPSILON, length(tangent)));\n\n\t\t\treturn tangent;\n\t\t}\n        \n\t\tvec3 calculateLinePosition(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\t\t\tfloat lineCap = instanceLineInfo.x;\n\t\t\tvDashArray = instanceLineInfo.yz;\n\t\t\tvLineSegmentInfo.x = lineCap;\n\n\t\t\tfloat isEnd = positions.x;\n\t\t\tfloat width = clamp(instanceWidths * uPixelsPerMeter[0] * u_widthScale, u_widthMinPixels, u_widthMaxPixels) / 2.0;\n\t\t\tvClipArray.x = width;\n\t\t\tvLineSegmentInfo.w = instanceArrowStartPositions / width;\n\t\n\t\t\tvec2 deltaA = currPoint.xy - prevPoint.xy;\n\t\t\tvec2 deltaB = nextPoint.xy - currPoint.xy;\n\t\n\t\t\tfloat lenA = length(deltaA);\n\t\t\tfloat lenB = length(deltaB);\n\t\n\t\t\tlenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n\t\t\tlenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n\t\t\tvec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\t\n\t\t\t\n\t\t\tvec2 perpA = vec2(-dirA.y, dirA.x);\n\t\t\tvec2 perpB = vec2(-dirB.y, dirB.x);\n\t\n\t\t\t\n\t\t\tvec2 tangent = vec2(dirA + dirB);\n\t\t\ttangent = mix(perpA, normalize(tangent), step(EPSILON, length(tangent)));\n\t\n\t\t\t\n\t\t\tvec2 miterVec = vec2(-tangent.y, tangent.x);\n\n\t\t\t\n\t\t\tvec2 perp = mix(perpB, perpA, isEnd);\n\t\t\tfloat L = mix(lenB, lenA, isEnd);\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\n\t\t\t\n\t\t\tvec2 vertical_offset = perp * width * positions.y;\n\t\t\tvLineInfo.x = length(vertical_offset);\n\t\n\t\n\t\t\t\n\t\t\tbool isPathStart = step(0.0, -lenA) > 0.5;\n\t\t\tbool isPathEnd = step(0.0, -lenB) > 0.5;\n\t\t\tvec2 dir = mix(dirB, dirA, isEnd);\n\t\t\tvLineSegmentInfo.y = float(isPathStart);\n\t\t\tvLineSegmentInfo.z = float(isPathEnd);\n\t\t\t\n\t\t\t\n\t\t\tvec2 horizontal_offset = vec2(0.0);\n\n\t\t\t\n\t\t\t\n\t\t\thorizontal_offset = mix(-dir, dir, isEnd) * width;\n\t\t\tvClipArray.y = L / width / 2.0;\n\t\t\tfloat capLength = mix(-1.0 - vClipArray.y, 1.0 + vClipArray.y, isEnd);\n\t\t\tvClipArray.zw = vec2(capLength, positions.y);\n\t\t\tvLineInfo.z = capLength;\n\n\t\n\t\t\t\n\n\t\t\t\n\t\t\tif ((isPathStart && !bool(isEnd)) || (isPathEnd && bool(isEnd))) {\n\t\t\t\tcapLength = mix(mix(-vClipArray.y, vClipArray.y, isEnd), capLength, step(0.1, lineCap));\n\t\t\t\tvClipArray.zw = mix(vec2(capLength, positions.y), vClipArray.zw, step(0.1, lineCap));\n\n\t\t\t\t\n\t\t\t\thorizontal_offset = mix(vec2(0.0), horizontal_offset, step(0.1, lineCap));\n\t\t\t\tvLineInfo.z = mix(mix(-vClipArray.y,  vClipArray.y, isEnd), vLineInfo.z, step(0.1, lineCap));\n\t\t\t}\n\t\t\tvLineInfo.y = capLength;\n\t\t\t\n\t\t\treturn currPoint + vec3(vertical_offset, 0.0) + vec3(horizontal_offset, 0.0);\n\t\t}\n\t\t\n\t\t\n\t\tvec2 getSegmentTangent(float isEnd, vec3 segmentDirection) {\n\t\t\t\n\t\t\tvec2 segmentX = mix(-segmentDirection.xy, segmentDirection.xy, isEnd);\n\t\t\tvec2 segmentY = vec2(-segmentX.y, segmentX.x);\n\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      vec3 localPosition_Start = project_view_local_position_precision( instanceStartPositions, instanceStartEndPositions64xyLow.xy);\n      vec3 localPosition_End = project_view_local_position_precision( instanceEndPositions, instanceStartEndPositions64xyLow.zw);\n      \n\t\t\tvec3 geodesic_Position_Start;\n      vec3 geodesic_Position_End;\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, instanceEndPositions, instanceStartEndPositions64xyLow.zw, geodesic_Position_Start, geodesic_Position_End, uProject_uDegreePerPixels);\n     \n      vec3 startLocalPosition = mix(localPosition_Start, geodesic_Position_Start,u_enableGeodesic);\n      vec3 endLocalPosition = mix(localPosition_End, geodesic_Position_End,u_enableGeodesic);\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t    \n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n      vec3 prevStartLinesPosition_Start;\n      vec3 prevStartLinesPosition_Start_Temp;\n      vec3 prevStartLinesPosition_End;\n      \n      vec3 lefDeltaByEnd = mix(instanceLeftDeltas, vec3(0.0), isEnd);\t\t\n      geodesic_project_view_local_precision(prevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, instanceStartPositions, instanceStartEndPositions64xyLow.xy, prevStartLinesPosition_Start_Temp, prevStartLinesPosition_End, uProject_uDegreePerPixels);\n      prevStartLinesPosition_Start = mix( prevStartLinesPosition_Start_Temp,startLocalPosition, isEnd);\n\n\t\t\tprevPosition  = mix(project_view_local_position_precision(\n\t\t\t\tprevPosition  - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow  - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t),prevStartLinesPosition_Start,u_enableGeodesic) ;\n\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = mix(startLocalPosition,endLocalPosition,isEnd);\n\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n      vec3 endNextLinesPosition_start;\n      vec3 endNextLinesPosition_End_Temp;\n      vec3 endNextLinesPosition_End;\n      vec3 rightDeltaByEnd = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, nextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, endNextLinesPosition_start, endNextLinesPosition_End_Temp, uProject_uDegreePerPixels);\n      endNextLinesPosition_End = mix(endLocalPosition, endNextLinesPosition_End_Temp, isEnd);\n      \n\t\t\tnextPosition = mix(project_view_local_position_precision(\n\t\t\t\tnextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), endNextLinesPosition_End,u_enableGeodesic);\n\n\n\t\t\tvec2 tangent = calculateTangent(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\treturn vec2(dot(tangent, segmentX), dot(tangent, segmentY));\n\t\t}\n\n\t\tvoid main(void) {\n\t\t\tfloat isEnd = positions.x;\n\t\t\t\n\n      vec3 localPosition_Start = project_view_local_position_precision( instanceStartPositions, instanceStartEndPositions64xyLow.xy);\n      vec3 localPosition_End = project_view_local_position_precision( instanceEndPositions, instanceStartEndPositions64xyLow.zw);\n\n\n      vec3 geodesic_Position_Start;\n      vec3 geodesic_Position_End;\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, instanceEndPositions, instanceStartEndPositions64xyLow.zw, geodesic_Position_Start, geodesic_Position_End, uProject_uDegreePerPixels);\n     \n      vec3 startLocalPosition = mix(localPosition_Start, geodesic_Position_Start,u_enableGeodesic);\n      vec3 endLocalPosition = mix(localPosition_End, geodesic_Position_End,u_enableGeodesic);\n\n\t\t\tvec3 segmentDirection = normalize(mix(startLocalPosition - endLocalPosition, endLocalPosition - startLocalPosition, isEnd));\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n      float maxDiff = length(startLocalPosition - endLocalPosition);\n      segmentDirection *= 0.00001 * maxDiff;\n\t    \n\t\t\tvec3 prevPosition = instanceStartPositions;\n\t\t\tvec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n      vec3 prevStartLinesPosition_Start;\n      vec3 prevStartLinesPosition_Start_Temp;\n      vec3 prevStartLinesPosition_End;\n      vec3 lefDeltaByEnd = mix(instanceLeftDeltas, vec3(0.0), isEnd);\n\n      geodesic_project_view_local_precision(prevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow -  mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, instanceStartPositions, instanceStartEndPositions64xyLow.xy, prevStartLinesPosition_Start_Temp, prevStartLinesPosition_End, uProject_uDegreePerPixels);\n      prevStartLinesPosition_Start = mix( prevStartLinesPosition_Start_Temp,startLocalPosition, isEnd);\n\n\t\t\n\t\t\tprevPosition  = mix(project_view_local_position_precision(\n\t\t\t\tprevPosition - mix(lefDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), prevPosition64xyLow - mix(vec3(0.0), lefDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), prevStartLinesPosition_Start,u_enableGeodesic) + segmentDirection;\n\n\t\t\tvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n\t\t\tvec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n\t\t\tcurrPosition = mix(startLocalPosition,endLocalPosition,isEnd);\n\n\t\t\tvec3 nextPosition = instanceEndPositions;\n\t\t\tvec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n      vec3 endNextLinesPosition_start;\n      vec3 endNextLinesPosition_End_Temp;\n      vec3 endNextLinesPosition_End;\n      vec3 rightDeltaByEnd = mix(vec3(0.0), instanceRightDeltas, isEnd);\n\n      geodesic_project_view_local_precision(instanceStartPositions, instanceStartEndPositions64xyLow.xy, nextPosition +mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy, endNextLinesPosition_start, endNextLinesPosition_End_Temp, uProject_uDegreePerPixels);\n      endNextLinesPosition_End = mix(endLocalPosition, endNextLinesPosition_End_Temp, isEnd);\n    \n\t\t\t\n\t\t\tnextPosition = mix(project_view_local_position_precision(\n\t\t\t\tnextPosition + mix(rightDeltaByEnd, vec3(0.0), step(THRESHOLD_ZOOM, uZoom)), nextPosition64xyLow + mix(vec3(0.0), rightDeltaByEnd, step(THRESHOLD_ZOOM, uZoom)).xy\n\t\t\t), endNextLinesPosition_End,u_enableGeodesic) + segmentDirection;\n\n\t\t\tvec3 pos = calculateLinePosition(prevPosition, currPosition, nextPosition);\n\n\t\t\t\n\t\t\tvTrimDirection.xy = -getSegmentTangent(0.0, normalize(startLocalPosition - endLocalPosition));\n\t\t\tvTrimDirection.zw = getSegmentTangent(1.0, normalize(endLocalPosition - startLocalPosition));\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\n\t\t\tgl_Position = uMatrix * vec4(pos, 1.0);\n\t\n\t\t\tvec4 vertexColor = instanceColors.rgba / 255.0 * u_opacity;\n\t\t\tvPickingColor = instancePickingColors;\n\t\t\tvColor = vertexColor;\n\t\t\tvArrowArray = instanceArrowInfo; \n\t\t}\n    \n    ",f:"\n\t\t#define SHADER_NAME instance-polyline-fragment-shader\n\t\t\n\t\tprecision highp float;\n\t\tuniform float u_isBorder;\n\t\tuniform float u_miterLimit;\n    "+o.PICK_UNIFORM+"\n    "+o.PICK_FUNCTION+"\n\t\tuniform float u_lineJoin;\n\t\tuniform sampler2D u_arrowSampler;\n        \n\t\tvarying vec4 vColor;\n\t\tvarying vec3 vLineInfo;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\n    varying vec4 vClipArray;\n\n\t\tvarying vec2 vDashArray;\n\t\tvarying vec4 vArrowArray;\n\t\t\n    varying vec3 vPickingColor;\n\t\tvarying vec4 vLineSegmentInfo;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tvarying vec4 vTrimDirection;\n        \n\t\tvoid main(void) {\n\t\t\tvec4 fColor = vColor;\n\t\t\tvec4 opacity = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\tvec4 red = vec4(1.0, 0.0, 0.0, 1);\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\topacity,\n\t\t\t\tfloat(u_lineJoin == 1.0 &&\n\t\t\t\t\tlength(vec2(abs(vClipArray.z) - vClipArray.y, vClipArray.w)) > 1.0 &&\n\t\t\t\t\t(abs(vLineInfo.y) - vClipArray.y) >= 0.0 && \n\t\t\t\t\t((vLineSegmentInfo.y < 0.5 && vLineSegmentInfo.z < 0.5) || vLineSegmentInfo.x > 1.1)\n\t\t\t\t)\n\t\t\t);\n\n\n\n\n      fColor = mix(fColor, opacity, float(\n        dot(vClipArray.zw - vec2(-vClipArray.y, 0.0), vTrimDirection.xy) > 0.0 &&\n        step(0.1, abs(vTrimDirection.x)) > 0.5 &&\n        vLineSegmentInfo.y < 0.5\n      ));\n\n\n      fColor = mix(fColor, opacity, float(\n        dot(vClipArray.zw - vec2(vClipArray.y, 0.0), vTrimDirection.zw) > 0.0 &&\n        step(0.1, abs(vTrimDirection.x)) > 0.5 &&\n        vLineSegmentInfo.z < 0.5\n      ));\n\t\t\t\n\n\t\t\t\n\t\t\tfloat segmentLength = vLineInfo.z + vClipArray.y;\n\t\t\t\n\t\t\t\n\t\t\tvec2 normalDashArray = vDashArray / vClipArray.x;\n\t\t\tfloat useDash = step(0.1, vDashArray.y) * step(-vClipArray.y, -abs(vLineInfo.z));\n\t\t\tfloat isInGap = step(normalDashArray.x, mod(segmentLength, normalDashArray.x + normalDashArray.y));\n\n\t\t\t\n\t\t\tvec3 normalArrowArray = vArrowArray.xyz / vClipArray.x;\n\t\t\t\n\t\t\tfloat useArrow = (1.0 - u_isBorder) * step(0.1, vArrowArray.x) * step(0.1, vArrowArray.y) * step(-vClipArray.y, -abs(vLineInfo.z)) * step(-0.001, vLineSegmentInfo.w);\n\t\t\t\n\t\t\t\n\t\t\tfloat offsetX = mix(\n\t\t\t\tmix(\n\t\t\t\t\t0.5,\n\t\t\t\t\t1.0 / normalArrowArray.x,\n\t\t\t\t\tstep(0.1, vArrowArray.w)\n\t\t\t\t),\n\t\t\t\t1.0 - 1.0 / normalArrowArray.x,\n\t\t\t\tstep(1.1, vArrowArray.w)\n\t\t\t);\n\t\t\tfloat yMod = mod(segmentLength - vLineSegmentInfo.w, normalArrowArray.y + normalArrowArray.z);\n\t\t\tfloat texCoordY = yMod / normalArrowArray.y;\n\t\t\tfloat texCoordX = offsetX + vClipArray.w / normalArrowArray.x;\n\t\t\t\n\t\t\t\n\t\t\tfloat isComplete = step(0.0, vClipArray.y * 2.0 - (segmentLength + normalArrowArray.y - yMod));\n\t\t\tfloat isFilled = (1.0 - step(1.0, texCoordY)) * step(0.0, texCoordX) * (1.0 - step(1.0, texCoordX));\n\t\t\tvec4 arrowColor = texture2D(u_arrowSampler, vec2(texCoordX, texCoordY));\n\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\tmix(fColor, opacity, isInGap),\n\t\t\t\tuseDash\n\t\t\t);\n\t\t\tfColor = mix(\n\t\t\t\tfColor,\n\t\t\t\tvec4(mix(\n\t\t\t\t\tfColor.rgb,\n\t\t\t\t\tarrowColor.rgb,\n\t\t\t\t\tarrowColor.a\n\t\t\t\t), fColor.a),\n\t\t\t\tuseArrow * isFilled * isComplete\n\t\t\t);\n\t\t\t\n     gl_FragColor = picking_getFinalColor(fColor, vPickingColor);\n\t\t\t\n\t\t\t\n\t\t}\n\t",name:"instance_polyline"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154);e.default={v:"\n    #define SHADER_NAME mask-vertex-shader\n\n    attribute vec3 positions;\n    attribute vec2 positions64xyLow;\n\n    "+i.UNIFORM_PART+"\n\n    "+i.PROJECTION_PART+"\n    \n    void main(void) {\n      vec3 local_position = project_view_local_position_precision(positions.xyz, positions64xyLow.xy);\n\n      gl_Position = uMatrix * vec4(local_position, 1.0);\n    }\n  ",f:"\n    #define SHADER_NAME mask-fragment-shader\n\n        precision highp float;\n        \n    uniform vec4 uColor;\n    \n    void main(void) {\n      gl_FragColor = uColor;\n    }\n  ",name:"mask"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154),o=n(291),r=n(462);e.default={v:"\n        #define SHADER_NAME instance-glyph-vertex-shader\n\n        "+r.INSTANCE_PARTS+"\n        attribute vec4 instanceColors;\n        attribute vec4 instanceStrokeColors;\n        attribute float instanceType;\n        attribute float instanceShow;\n        \n        "+i.UNIFORM_PART+"\n        \n        "+o.PICK_UNIFORM+"\n\n        "+r.UNIFORM_PARTS+"\n        uniform float u_gamma;\n        \n        varying vec4 vColor;\n        varying vec4 vStrokeColor;\n        varying vec2 vTextureCoords;\n        varying float vGamma;\n        varying vec2 vPositions;\n        varying float vOpacity;\n\n\n\n        varying vec2 vRadiusRate;\n\n\n        varying vec4 vBorderProperty;\n        varying vec3 vBgImageInfo;\n        "+i.PROJECTION_PART+"\n        \n        "+o.PICK_FUNCTION+"\n        \n        void main(void) {\n            "+(0,r.generateMainPart)("\n\n                vec2 backgroundScale = vec2(1.0) * u_sizeScale;\n                vec2 labelScale = mix(sizePixels / imageSize.y, vec2(0.0), float(imageSize.y == 0.0));\n                vec2 instanceScale = mix(labelScale, backgroundScale, instanceType);\n\n\n                vec2 pixelOffset = positions / 2.0 * imageSize + mix(instanceInfos.xy, vec2(0.0), instanceType);\n\n                pixelOffset = mix(rotate_by_angle_onScreen(pixelOffset, instanceInfos.z) * instanceScale,\n                rotate_by_angle_onScreen(pixelOffset, instanceInfos.z) * backgroundScale,\n                          instanceType);\n                pixelOffset += instancePixelOffset.xy;\n                pixelOffset.y *= -1.0;\n            ","\n                vColor = vec4(instanceColors.rgb, instanceColors.a * u_opacity) / 255.;\n                vStrokeColor = vec4(instanceStrokeColors.rgb, instanceStrokeColors.a * u_opacity) / 255.;\n            ")+"\n\n            vGamma = u_gamma / (u_sizeScale * instanceSizes.x / imageSize.y);\n            vBorderProperty.w = instanceFrames.x;\n            vBorderProperty.xy = vec2((imageSize.x - vBorderProperty.w * 2.0) / imageSize.x, (imageSize.y - vBorderProperty.w * 2.0) / imageSize.y);\n            vOpacity = instanceShow * vOpacity;\n            vPositions = positions;\n            vBgImageInfo.x = instanceType;\n            vBorderProperty.z = clamp(instanceInfos.x, 0.0, min(imageSize.x / 2.0, imageSize.y / 2.0));\n            vRadiusRate = vec2(1.0 - vBorderProperty.z * 2.0 / imageSize.x, 1.0 - vBorderProperty.z * 2.0 / imageSize.y);\n            vBgImageInfo.yz = imageSize;\n        }\n    ",f:"\n        #define SHADER_NAME instance-marker-fragment-shader\n\n        precision highp float;\n        \n        uniform sampler2D u_sampler;\n        uniform float u_buffer;\n        uniform vec2 u_resolution;\n\n        "+o.PICK_UNIFORM+"\n        \n        varying vec4 vColor;\n        varying vec4 vStrokeColor;\n        varying vec2 vTextureCoords;\n        varying float vGamma;\n        varying vec2 vPositions;\n\n        varying float vOpacity;\n\n\n        varying vec2 vRadiusRate;\n\n\n        varying vec4 vBorderProperty;\n        varying vec3 vBgImageInfo;\n        \n        const float MIN_ALPHA = 0.05;\n        const bool useSdf = true;\n        \n        void main(void) {\n            float usedBuff = 0.548;\n\n            "+i.SDF_PART+"\n\n            float isBorder = float(abs(vPositions.x) > vBorderProperty.x || abs(vPositions.y) > vBorderProperty.y);\n            vec4 backgroundColor = vColor;\n            float isCorner = float(abs(vPositions.x) > vRadiusRate.x && abs(vPositions.y) > vRadiusRate.y);\n\n            float borderLen = length(vec2((abs(vPositions.x) - vRadiusRate.x) * vBgImageInfo.y / 2.0, (abs(vPositions.y) - vRadiusRate.y) * vBgImageInfo.z / 2.0));\n            isBorder = mix(isBorder, 1.0, step(vBorderProperty.z - vBorderProperty.w, borderLen) * isCorner);\n            backgroundColor = mix(vColor, vStrokeColor, isBorder) * vOpacity;\n            backgroundColor.w = backgroundColor.w * (1.0 - step(vBorderProperty.z, borderLen) * isCorner);\n            \n            gl_FragColor = mix(mix(color * vOpacity, backgroundColor, vBgImageInfo.x), vColor * vOpacity, picking_usePickingColor);\n        }\n    ",name:"instance_glyph"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(154),o=n(291),r=n(462);e.default={v:"\n        #define SHADER_NAME instance-marker-vertex-shader\n\n        "+r.INSTANCE_PARTS+"\n        attribute vec4 instanceColors;\n        attribute vec4 instanceStrokeColors;\n        attribute float instanceStrokeWidth;\n        attribute float instanceShow;\n        attribute float instanceType;\n\n        "+i.UNIFORM_PART+"\n        \n        "+o.PICK_UNIFORM+"\n\n        "+r.UNIFORM_PARTS+"\n        uniform float u_gamma;\n\n        varying vec4 vColor;\n        varying vec4 vStrokeColor;\n        varying float vStrokeWidth;\n        varying vec2 vTextureCoords;\n        varying float vOpacity;\n        varying float vGamma;\n        varying float vInstanceType;\n        varying vec2 vInstanceScale;\n        \n        "+i.PROJECTION_PART+"\n        \n        "+o.PICK_FUNCTION+"\n        \n        void main(void) {\n            "+(0,r.generateMainPart)("\n\n                vec2 markerScale = mix(sizePixels / imageSize, vec2(0.0), float(imageSize.y == 0.0));\n                vec2 labelScale = mix(sizePixels / imageSize.y, vec2(0.0), float(imageSize.y == 0.0));\n                vec2 instanceScale = mix(markerScale, labelScale, instanceType);\n                vec2 pixelOffset = mix(positions / 2.0 * imageSize, positions / 2.0 * imageSize + instanceInfos.xy, instanceType);\n                pixelOffset = mix(rotate_by_angle_onScreen((pixelOffset * instanceScale + instanceInfos.xy), instanceInfos.z),\n                    pixelOffset * instanceScale,\n                    instanceType);\n                pixelOffset += instancePixelOffset.xy;\n                pixelOffset.y *= -1.0;\n            ","\n                vColor = mix(vec4(0.0, 0.0, 0.0, 0.0), vec4(instanceColors.rgb, instanceColors.a * u_opacity) / 255., instanceType);\n                vStrokeColor = vec4(instanceStrokeColors.rgb, instanceStrokeColors.a * u_opacity) / 255.;\n                vStrokeWidth = instanceStrokeWidth;\n            ")+"\n            vGamma = u_gamma / (u_sizeScale * instanceSizes.x / imageSize.y);\n            vOpacity = instanceShow * vOpacity;\n            vInstanceType = instanceType;\n            vInstanceScale = instanceScale;\n        }\n    ",f:"\n        #define SHADER_NAME instance-marker-fragment-shader\n\n        precision highp float;\n        \n\t\tuniform sampler2D u_sampler;\n        uniform float u_buffer;\n        uniform float u_sdfRadius;\n\n        "+o.PICK_UNIFORM+"\n        \n        varying vec4 vColor;\n        varying vec4 vStrokeColor;\n        varying float vStrokeWidth;\n        varying vec2 vTextureCoords;\n        varying float vOpacity;\n        varying float vGamma;\n        varying float vInstanceType;\n        varying vec2 vInstanceScale;\n        \n        const float MIN_ALPHA = 0.05;\n\n        \n        void main(void) {\n\n            float usedBuff =  u_buffer * (1.0 - vStrokeWidth / u_sdfRadius / vInstanceScale.y);\n\n            "+i.SDF_PART+"\n\n            vec4 texColor = texture2D(u_sampler, vTextureCoords);\n            gl_FragColor = mix(mix(texColor * vOpacity, color * vOpacity, vInstanceType), vColor, picking_usePickingColor);\n        }\n    ",name:"instance_marker"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(321);e.default={v:[i.attributePart,"attribute vec4 a_InstanceColors;","attribute vec4 a_InstanceStrokeColors;","attribute float a_InstanceStrokeWidth;","attribute vec2 a_InstanceStrentchinglens;",i.uniformPart,"uniform vec2 u_glyphTextureResolution;","uniform vec2 u_billboardTextureResolution;","uniform float u_gamma;",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_strokeWidth;","varying float v_fontScale;","varying float v_gammaScale;",i.projectScreenPart,i.filterPart,"void main(){","\tvec2 transCoord = a_InstanceTrans.xy;",i.glPositionCusPart,"    vec2 texCoords = a_Positions.xy * 0.5 + 0.5;","vec4 textureBounds = vec4(a_InstanceTextBounds.x, u_billboardTextureResolution.y - a_InstanceTextBounds.y - a_InstanceTextBounds.w, a_InstanceTextBounds.zw);","\tvec2 billboradTextureCoords = mix(\n\t\t\t\ttextureBounds.xy,\n\t\t\t\ttextureBounds.xy + textureBounds.zw,\n\t\t\t\t\ttexCoords\n\t\t\t\t) / u_billboardTextureResolution;\n\t\t\t\n\t\t","       float xRoad = (a_InstanceTextBounds.x) / u_glyphTextureResolution.x;","       float yRoad = (u_glyphTextureResolution.y - (a_InstanceTextBounds.y)) / u_glyphTextureResolution.y;","       float wRoad = a_InstanceTextBounds.z / u_glyphTextureResolution.x;","       float hRoad = a_InstanceTextBounds.w / u_glyphTextureResolution.y;","       v_TexCoord = mix(\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tbillboradTextureCoords,\n\t\t\t\t\t\t\t\tmix(\n\t\t\t\t\t\t\t\t\tvec2(xRoad + texCoords.x * wRoad, yRoad + (texCoords.y - 1.0) * hRoad),\n\t\t\t\t\t\t\t\t\tvec2(a_InstanceTextBounds.x + a_InstanceTextBounds.z * texCoords.x, a_InstanceTextBounds.y + a_InstanceTextBounds.w * texCoords.y),\n\t\t\t\t\t\t\t\t\ta_InstanceInfo.z\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tstep(0.0, a_InstanceInfo.z)\n\t\t\t\t\t\t\t);","    v_isShow = a_InstanceInfo.y;","    v_isIcon = a_InstanceInfo.z;","    v_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));","\t v_opacity = getFilterOpacity(v_opacity, a_InstanceTrans.z);","\t v_color = a_InstanceColors / 255.0;","\t v_strokeColor = a_InstanceStrokeColors / 255.0;","\t v_strokeWidth = a_InstanceStrokeWidth;","\t v_gamma = u_gamma / (a_InstanceCoords.y / a_InstanceTextBounds.w);","\t v_fontScale = a_InstanceCoords.y / a_InstanceTextBounds.w;","\t v_gammaScale = 1.0;","}"].join("\n"),f:["#define SDF_PX 8.0","#define EDGE_GAMMA 0.105 / 2.0","precision highp float;",i.fragPart,"uniform sampler2D u_SamplerGlyph;","uniform float u_buffer;","uniform float u_sdfRadius;",i.uniformPart,i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_strokeWidth;","varying float v_fontScale;","varying float v_gammaScale;","void main() {",i.maskPart,"\t vec4 vColor = v_color * v_color.a;","\tvec4 color = mix(\n\t\t\t\ttexture2D(u_SamplerGlyph, v_TexCoord),\n\t\t\t\tmix(\n\t\t\t\t\ttexture2D(u_SamplerText, v_TexCoord),\n\t\t\t\t\ttexture2D(u_SamplerIcon, v_TexCoord),\n\t\t\t\t\tstep(0.0, v_isIcon)\n\t\t\t\t),\n\t\t\t\tabs(v_isIcon)\n\t\t\t);\n\t\t","\n\t\t\tfloat alpha = color.a;\n\t\t\tfloat distance = alpha;\n\n\t\t\tfloat usedBuff =  u_buffer - v_strokeWidth  / u_sdfRadius / v_fontScale *  u_buffer;\n\t\t\tfloat usedGamma = v_gamma;\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\tfloat outlineFactor = smoothstep(u_buffer - usedGamma, u_buffer + usedGamma, distance);\n\n\t\t\tfloat finallAlpha = smoothstep(usedBuff - usedGamma, usedBuff + usedGamma, distance);\n\t\t\t\n\t\t\tcolor = mix(\n\t\t\t\tmix(v_strokeColor * v_strokeColor.a, vColor, outlineFactor),\n\t\t\t\tcolor,\n\t\t\t\tstep(0.5, abs(v_isIcon))\n\t\t\t) * finallAlpha;\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t","    gl_FragColor = color * mix(0.0, v_opacity, isCulledByMask);","}"].join("\n"),name:"instance_symbol_custom_style"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(321);e.default={v:[i.attributePart,i.uniformPart,i.varyingPart,i.projectScreenPart,i.filterPart,"void main(){","\tvec2 transCoord = a_InstanceTrans.xy;",i.glPositionPart,"        vec2 texCoords = a_Positions.xy * 0.5 + 0.5;","        if (a_InstanceInfo.z != 1.0) {","           float x = (u_InstanceTileTextureOffset.x + a_InstanceTextBounds.x) / u_textTextureResolution.x;","           float y = (u_textTextureResolution.y - (u_InstanceTileTextureOffset.y + a_InstanceTextBounds.y)) / u_textTextureResolution.y;","           float w = a_InstanceTextBounds.z / u_textTextureResolution.x;","           float h = a_InstanceTextBounds.w / u_textTextureResolution.y;","           v_TexCoord = vec2(x + texCoords.x * w, y + (texCoords.y - 1.0) * h);","        } else {","           v_TexCoord = vec2(a_InstanceTextBounds.x + a_InstanceTextBounds.z * texCoords.x, a_InstanceTextBounds.y + a_InstanceTextBounds.w * texCoords.y);","        }","    v_isShow = a_InstanceInfo.y;","    v_isIcon = a_InstanceInfo.z;","    v_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));","\t v_opacity = getFilterOpacity(v_opacity, a_InstanceTrans.z);","}"].join("\n"),f:["precision mediump float;",i.fragPart,i.varyingPart,"void main() {",i.maskPart,"    vec4 color = mix(texture2D(u_SamplerText, v_TexCoord), texture2D(u_SamplerIcon, v_TexCoord), v_isIcon);","    gl_FragColor = mix(color, vec4(1.0, 1.0, 1.0, color.a), u_asbackground) * color.a * mix(0.0, v_opacity, isCulledByMask);","}"].join("\n"),name:"instance_symbol_default_style"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(321),o=n(154),r="\n\t"+o.PROJECTION_PART+"\n\n\tvec2 getWorldspaceCoord(vec4 relativeCenter, vec2 localPosition) {\n\t\tvec2 relativeCenterPoint = project_view_local_position_precision(relativeCenter.xy, relativeCenter.zw);\n\t\tvec2 worldspaceCoord = relativeCenterPoint + project_scale(vec3(localPosition, 0.0)).xy;\n\t\treturn worldspaceCoord;\n\t}\n";e.default={v:[i.attributePart,"attribute vec4 a_InstanceColors;","attribute vec4 a_InstanceStrokeColors;",i.uniformPart,"uniform vec2 u_glyphTextureResolution;","uniform vec2 u_billboardTextureResolution;","uniform float u_gamma;","\n\tuniform vec4 uCenter;\n\tuniform float uZoom;\n\tuniform vec3 uPixelsPerMeter;\n\tuniform vec2 uResolution;\n\tuniform vec3 uProject_uCommonUnitsPerWorldUnit;\n\tuniform vec3 uProject_uCommonUnitsPerWorldUnit2;\n\tuniform vec4 uRelativeCenter;\n",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_fontScale;","varying float v_gammaScale;",i.projectScreenPart,r,i.filterPart,"void main(){","\tvec2 transCoord = getWorldspaceCoord(uRelativeCenter, a_InstanceTrans.xy);",i.glPositionPart,"\n\t\t\tvec2 texCoords = a_Positions.xy * 0.5 + 0.5;\n\t\t\t\n\t\t\t\n\t\t\tvec2 resolution = mix(\n\t\t\t\tu_glyphTextureResolution,\n\t\t\t\tu_billboardTextureResolution,\n\t\t\t\tabs(a_InstanceInfo.z)\n\t\t\t);\n\t\t\tvec4 textureBounds = vec4(a_InstanceTextBounds.x, resolution.y - a_InstanceTextBounds.y - a_InstanceTextBounds.w, a_InstanceTextBounds.zw);\n\t\t\tv_TexCoord = mix(\n\t\t\t\ttextureBounds.xy,\n\t\t\t\ttextureBounds.xy + textureBounds.zw,\n\t\t\t\ttexCoords\n\t\t\t) / resolution;\n\n\t\t\tv_isShow = a_InstanceInfo.y;\n\t\t\tv_isIcon = a_InstanceInfo.z;\n\t\t\tv_opacity = max(0.0, min(1.0, a_InstanceInfo.w + mix(-u_fadeChange, u_fadeChange, v_isShow)));\n\t\t\tv_color = a_InstanceColors / 255.0;\n\t\t\tv_strokeColor = a_InstanceStrokeColors / 255.0;\n\n\t\t\tv_gamma = u_gamma / (a_InstanceCoords.y / a_InstanceTextBounds.w);\n\n\t\t\tv_fontScale = a_InstanceCoords.y / a_InstanceTextBounds.w;\n\t\t\tv_gammaScale = 1.0;\n\t\t}"].join("\n"),f:["#define SDF_PX 8.0","#define EDGE_GAMMA 0.105 / 2.0","precision highp float;","uniform sampler2D u_SamplerText;","uniform sampler2D u_SamplerGlyph;","uniform float u_buffer;","uniform float u_asbackground;",i.varyingPart,"varying float v_gamma;","varying vec4 v_color;","varying vec4 v_strokeColor;","varying float v_fontScale;","varying float v_gammaScale;","void main() {","\t vec4 vColor = v_color * v_color.a;","\n\t\t\tvec4 color = mix(\n\t\t\t\ttexture2D(u_SamplerGlyph, v_TexCoord),\n\t\t\t\ttexture2D(u_SamplerText, v_TexCoord),\n\t\t\t\tabs(v_isIcon)\n\t\t\t);\n\t\t","\n\t\t\tfloat alpha = color.a;\n\t\t\tfloat distance = alpha;\n\n\t\t\tfloat usedBuff = u_buffer;\n\t\t\tfloat usedGamma = v_gamma;\n\t\t\tfloat outlineFactor = smoothstep(usedBuff - usedGamma, usedBuff + usedGamma, distance);\n\t\t\tfloat finalAlpha = smoothstep(0.5 - usedGamma, 0.5 + usedGamma, distance);\n\n\t\t\tcolor = mix(\n\t\t\t\tmix(v_strokeColor * v_strokeColor.a, vColor, outlineFactor),\n\t\t\t\tcolor,\n\t\t\t\tstep(0.5, abs(v_isIcon))\n\t\t\t) * finalAlpha;\n\t\t\t\n\t\t\tgl_FragColor = color * v_opacity;\n\t\t}"].join("\n"),name:"instance_symbol_indoor"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.defaultShader={name:"instance_traffic_flow",v:"\nattribute vec2 instanceLinks;\nattribute vec4 instanceColors;\nattribute float instanceParticles;\n\nuniform mat4 uMatrix;\nuniform sampler2D uSampler;\nuniform vec2 uTexInfo;\nuniform vec4 uSubTexInfo;\nuniform float uTick;\n\nvarying vec4 vColor;\n\nvoid main() {\n\n  float stepByTime = floor(uTick / uTexInfo.y) + 0.4 + instanceParticles;\n  float linkLength = instanceLinks.y;\n  float offset = stepByTime - linkLength * floor(stepByTime / linkLength);\n\n  float index = floor(instanceLinks.x + offset);\n\n\n\n  float texSize = uTexInfo.x;\n  vec2 uvInUnit = vec2(\n    index - texSize * floor(index / texSize),\n    floor(index / texSize)\n\n  ) / (texSize - 1.);\n\n\n  vec2 uvInSampler = uSubTexInfo.xy + uvInUnit * uSubTexInfo.zw;\n\n  vec4 pointRGBA = texture2D(uSampler, uvInSampler);\n  vec2 point = vec2(\n    (pointRGBA.x + pointRGBA.y) * 256. - 128.,\n    (pointRGBA.z + pointRGBA.w) * 256. - 128.\n  );\n\n  gl_Position = uMatrix * vec4(point.x, -point.y, 0., 1.);\n  gl_PointSize = 5.;\n\n  vColor = instanceColors / 255.;\n}\n",f:"\nprecision mediump float;\n\nvarying vec4 vColor;\n\nvoid main() {\n  float alpha = 1.0 - step(0.5, distance(gl_PointCoord, vec2(0.5)));\n  gl_FragColor = vColor * alpha;\n}\n"}},,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(18),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(40),f=i(c),d=n(28),h=f.default.isNumber,v=f.default.isValidColor,p=f.default.isObject,m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);var n=e.stops,i=void 0===n?{}:n,o=e.angle,r=void 0===o?0:o;if(this.stops={},!p(i))return void new d.BaseTypeError("stops","object",i).error();for(var a in i){var l=i[a];if(!v(l))return void console.error("GradientColorOptions.stops中key为 "+a+" 的color属性无效",l);this.stops[a]=l}if(!h(r))return void new d.BaseTypeError("GradientColorOptions.angle","number",r).error();this.angle=r}return(0,u.default)(t,[{key:"addColorStop",value:function(t,e){return h(t)?v(e)?void(this.stops[t]=e):void console.error("addColorStop中key为 "+t+" 的color属性无效",e):void new d.BaseTypeError("offset","number",e).error()}},{key:"setAngle",value:function(t){if(!h(t))return void new d.BaseTypeError("setAngle.angle","number",t).error();this.angle=t}},{key:"getAngle",value:function(){return this.angle}}],[{key:"createDoubleColorGradient",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!v(e))return console.error("参数错误：createDoubleColorGradient.color1 颜色值不合法。"),null;if(!v(n))return console.error("参数错误：createDoubleColorGradient.color2 颜色值不合法。"),null;if(!h(i))return new d.BaseTypeError("createDoubleColorGradient.angle","number",i).error(),null;var o=new t;return o.addColorStop(0,e),o.addColorStop(1,n),o.setAngle(i),o}},{key:"convert",value:function(e){var n=e.constructor===Array?e:[];if(e.constructor===Object&&2===(0,r.default)(e).length)for(var i in e)n.push(e[i]);if(2===n.length&&v(n[0])&&v(n[1])){var o=new t;return o.addColorStop(0,n[0]),o.addColorStop(1,n[1]),o}return null}}]),t}();t.exports=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(10),u=n(464),c=function(){function t(e,n,i){(0,r.default)(this,t),this.workerPool=e,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var o=this.workerPool.acquire(this.id,i),a=0;a<o.length;a++){var s=o[a],c=new u(s,n,this.id);c.name="Worker "+a,this.actors.push(c)}}return(0,s.default)(t,[{key:"send",value:function(t,e,n,i){return("number"!=typeof i||isNaN(i))&&(this.currentActor=(this.currentActor+1)%this.actors.length,i=this.currentActor),this.actors[i].send(t,e,n),i}},{key:"remove",value:function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)}},{key:"broadcast",value:function(t,e,n){n=n||function(){},l.asyncAll(this.actors,function(n,i){n.send(t,e,i)},n)}},{key:"destroy",value:function(){this.remove()}}]),t}();e.default=c},function(t,e,n){"use strict";var i=n(617),o=i(618);t.exports=function(){var t=new window.Worker(o);return t.objectURL=o,t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||(0,p.default)(t,n,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var i=e(e.s=ENTRY_MODULE);return i.default||i}function r(t){return(""+t).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t){return!isNaN(1*t)}function s(t,e,i){var o={};o[i]=[];var s=e.toString(),l=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return o;for(var u=l[1],c=new RegExp("(\\\\n|\\W)"+r(u)+_,"g"),f=void 0;f=c.exec(s);)"dll-reference"!==f[3]&&o[i].push(f[3]);for(c=new RegExp("\\("+r(u)+'\\("(dll-reference\\s('+m+'))"\\)\\)'+_,"g");f=c.exec(s);)t[f[2]]||(o[i].push(f[1]),t[f[2]]=n(f[1]).m),o[f[2]]=o[f[2]]||[],o[f[2]].push(f[4]);for(var d=(0,h.default)(o),v=0;v<d.length;v++)for(var p=0;p<o[d[v]].length;p++)a(o[d[v]][p])&&(o[d[v]][p]=1*o[d[v]][p]);return o}function l(t){return(0,h.default)(t).reduce(function(e,n){return e||t[n].length>0},!1)}function u(t,e){for(var n={main:[e]},i={main:[]},o={main:{}};l(n);)for(var r=(0,h.default)(n),a=0;a<r.length;a++){var u=r[a],c=n[u],f=c.pop();if(o[u]=o[u]||{},!o[u][f]&&t[u][f]){o[u][f]=!0,i[u]=i[u]||[],i[u].push(f);for(var d=s(t,t[u][f],u),v=(0,h.default)(d),p=0;p<v.length;p++)n[v[p]]=n[v[p]]||[],n[v[p]]=n[v[p]].concat(d[v[p]])}}return i}var c=n(115),f=i(c),d=n(18),h=i(d),v=n(76),p=i(v),m="[\\.|\\-|\\+|\\w|/|@]+",_="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+m+").*?\\)";t.exports=function(t,e){e=e||{};var i={main:n.m},r=e.all?{main:(0,h.default)(i.main)}:u(i,t),a="";(0,h.default)(r).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;r[t][e];)e+=1;r[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+t+" = ("+o.toString().replace("ENTRY_MODULE",(0,f.default)(e))+")({"+r[t].map(function(e){return(0,f.default)(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),a=a+"new (("+o.toString().replace("ENTRY_MODULE",(0,f.default)(t))+")({"+r.main.map(function(t){return(0,f.default)(t)+": "+i.main[t].toString()}).join(",")+"}))(self);";var s=new window.Blob([a],{type:"text/javascript"});return e.bare?s:(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(172),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l);n(461);var c=n(665),f=i(c),d=n(668),h=i(d),v=n(671),p=i(v),m=n(675),_=i(m),g=n(673),y=i(g),x=n(678),b=i(x),S=n(81),w=n(464),E=n(687),T=function(){function t(e){var n,i=this;(0,s.default)(this,t),this.self=e,this.actor=new w(e,this),this.layerIndexes={},this.workerSourceTypes=(n={},(0,r.default)(n,S.SOURCE_TYPE.vector,E),(0,r.default)(n,S.SOURCE_TYPE.geojson,f.default),(0,r.default)(n,S.SOURCE_TYPE.geoTask,h.default),(0,r.default)(n,S.SOURCE_TYPE.imageTile,p.default),(0,r.default)(n,S.SOURCE_TYPE.indoor,_.default),(0,r.default)(n,S.SOURCE_TYPE.indoorIndex,y.default),(0,r.default)(n,S.SOURCE_TYPE.trafficFlow,b.default),n),this.workerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e}}return(0,u.default)(t,[{key:"loadTile",value:function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)}},{key:"reloadTile",value:function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)}},{key:"abortTile",value:function(t,e){this.getWorkerSource(t,e.type).abortTile(e)}},{key:"removeTile",value:function(t,e){this.getWorkerSource(t,e.type).removeTile(e)}},{key:"removeSource",value:function(t,e){var n=this.getWorkerSource(t,e.type);void 0!==n.removeSource&&n.removeSource(e)}},{key:"getWorkerSource",value:function(t,e){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var i={send:function(e,i,o){n.actor.send(e,i,o,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](i,t)}return this.workerSources[t][e]}},{key:"tileOffset",value:function(t,e,n){this.getWorkerSource(t,e.type).tileOffset(e,n)}}]),t}();t.exports=function(t){return new T(t)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(26),f=i(c),d=n(616),h=function(){function t(){(0,s.default)(this,t),this.activeSet={}}return(0,u.default)(t,[{key:"acquire",value:function(t,e){return this._createWorker(e),this.activeSet[t]=!0,this.workers.slice()}},{key:"_createWorker",value:function(t){if(!this.workers){this.workers=[];for(var e=t||this._getWorkerCount();this.workers.length<e;)this.workers.push(new d)}}},{key:"_getWorkerCount",value:function(){if(f.default.isLowMobileDevice())return 2;var t=f.default.isPC()?4:2;return 1===f.default.hardwareConcurrency?1:Math.min(Math.floor(f.default.hardwareConcurrency/2),t)}},{key:"release",value:function(t){delete this.activeSet[t],(0,r.default)(this.activeSet).length>0||this.reset()}},{key:"reset",value:function(){this.activeSet={},this.workers.forEach(function(t){t.terminate()}),this.workers=null}}]),t}(),v=new h;e.default=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(236),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(93),_=i(m),g=n(251),y=i(g),x=n(28),b=n(467),S=i(b),w=n(469),E=i(w),T=n(468),A=i(T),P=n(275),I=["left:0;","top:0;","overflow:visible;","z-index:102;"],k=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return n.map=t,n.controls={},n.createControlContainer(t),n}return(0,p.default)(e,t),(0,f.default)(e,[{key:"createControlContainer",value:function(t){var e=t._overlayer.root;this.controlContainer=document.createElement("div");var n=this.controlContainer;n.style.cssText=I.join(""),e.appendChild(n),t._overlayer.childs.controlLayer=n}},{key:"addControl",value:function(t){if(t instanceof y.default){var e=t.id;this.controls[e]?console.warn("addControl失败：id重复。"):(this.controls[e]=t,t.addTo(this.map,this.controlContainer),this._fire("control_added",{},!0))}else new x.BaseTypeError("control","Control",t).error();return this}},{key:"removeControl",value:function(t){if(this.controls[t]){this.controls[t].remove(),delete this.controls[t],this._fire("control_removed",{},!0)}return this}},{key:"setViewMode",value:function(t){(0,r.default)(this.controls).forEach(function(e){e&&e.setViewMode&&e.setViewMode(t)})}},{key:"getControl",value:function(t){if(this.controls[t])return this.controls[t];switch(t){case P.DEFAULT_CONTROL_ID.SCALE:return new S.default({id:P.DEFAULT_CONTROL_ID.SCALE,position:P.CONTROL_POSITION.BOTTOM_LEFT,center:this.map.getCenter(),zoom:this.map.getZoom()});case P.DEFAULT_CONTROL_ID.ZOOM:return new E.default({id:P.DEFAULT_CONTROL_ID.ZOOM,position:P.CONTROL_POSITION.TOP_RIGHT});case P.DEFAULT_CONTROL_ID.ROTATION:return new A.default({id:P.DEFAULT_CONTROL_ID.ROTATION,position:P.CONTROL_POSITION.TOP_RIGHT});default:return this.controls[t]}}},{key:"destroy",value:function(){(0,r.default)(this.controls).forEach(function(t){t&&t.destroy&&t.destroy()}),this.controls={},this.map=null}}]),e}(_.default);e.default=k},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER:4,CENTER_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8};e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(251),p=i(v),m=n(1027),_=i(m),g=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"createDOM",value:function(){var t=document.createElement("div"),e="margin-bottom: 30px; width: 230px; height:34px; background: rgba(255,255,255,0.90); z-index:200;";e+="border: 1px solid #DEDEDE; border-radius: 3px; padding:0 15px 0 40px; box-sizing:border-box; line-height: 32px;",e+="font-family: PingFangSC-Medium;font-size: 13px;color: #EF4D4D;letter-spacing: 0;",t.style.cssText=e,t.innerHTML="鉴权失败，请传入正确的key";var n=document.createElement("img");return n.style.cssText="width:20px; height:20px; position:absolute; top:6px; left:15px",n.src=_.default,t.appendChild(n),t}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=window.innerHeight,n=window.innerWidth,i=e>n?n:e,o="",r="",a=3.5*i/100;a>71?(r=3.9/3.5*71+"px",o="28.4px"):a<34?(r=3.9/3.5*34+"px",o="13.6px"):(r="3.9vmin",o="1.4vmin"),t.style.cssText="margin-left:"+o+";bottom:0;line-height:"+r+";font-size:"+o+";color:#333;font-family:Arial,sans-serif;white-space:nowrap;z-index:0;transform:rotateX(0deg)"}var r=n(3),a=i(r),s=n(0),l=i(s),u=n(1),c=i(u),f=n(5),d=i(f),h=n(4),v=i(h),p=n(251),m=i(p),_=n(552),g=i(_),y=n(1028),x=i(y),b=n(1029),S=i(b),w=(new Date).getFullYear(),E=function(t){function e(t){return(0,l.default)(this,e),(0,d.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t))}return(0,v.default)(e,t),(0,c.default)(e,[{key:"createDOM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.style,n=void 0===e?"default":e;return this._createPlatformDom(n)}},{key:"_createPlatformDom",value:function(t){var e=document.createElement("div");e.style.cssText="margin:1px;display:flex;align-items:center";var n=document.createElement("a");n.style.cssText="z-index:1;",n.href="http://map.qq.com?ref=jsapi_v3",n.target="_blank",n.style.cssText="max-height:22px;max-width:150px;transform:rotateX(0deg)",e.appendChild(n);var i=document.createElement("div");return i.className="logo-text",i.style.cssText="padding-left:5px;font-size:10px;color:#333;font-family:Arial,sans-serif;white-space:nowrap;z-index:0;transform:rotateX(0deg)",i.innerText="©"+w+" Tencent - GS(2020)1720号 - Data© NavInfo",e.appendChild(i),this.logoImg=new Image,this.logoImg.src="gray"===t?x.default:g.default,this.logoImg.style.cssText="max-height:22px;max-width:150px;",n.appendChild(this.logoImg),e}},{key:"_createVisDom",value:function(){var t=document.createElement("div");t.style.cssText="overflow:visible;margin:1px;margin-top:1vmin;display:flex;";var e=document.createElement("a");e.style.cssText="z-index:1;",e.target="_blank",e.style.cssText="transform:rotateX(0deg);",t.appendChild(e);var n=document.createElement("div");n.className="logo-text",n.style.cssText="display:none;",n.innerText="©"+w+" Tencent - GS(2020)1720号 - Data© NavInfo",t.appendChild(n);var i=new Image;return i.src=S.default,i.style.marginBottom="-500px",e.appendChild(i),i.onload=function(){i.style.height="3.5vmin",i.style.maxHeight="71px",i.style.minHeight="34px",i.style.width="10.5vmin",i.style.maxWidth="210px",i.style.minWidth="100px",i.style.imageRendering="-webkit-optimize-contrast",i.style.marginBottom="0px",window.addEventListener("resize",function(){return o(n)}),o(n)},t}},{key:"changeLogoUrl",value:function(t){t&&this.logoImg&&this.logoImg.src!==t&&(this.logoImg.src=t)}}]),e}(m.default);t.exports=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(30),r=i(o),a=n(27),s=i(a),l=n(128),u=i(l),c=n(3),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(5),_=i(m),g=n(4),y=i(g),x=n(251),b=i(x),S=n(296),w=n(626),E=n(625),T=n(26),A=n(145),P=n(1015),I=n(1026),k=n(1025);n(1019);var L=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,h.default)(this,e),!t.floorList||!t.buildingId)return console.error("楼层参数不合法!",t),(0,_.default)(n);var n=(0,_.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t));return n._construct(),n}return(0,y.default)(e,t),(0,p.default)(e,[{key:"onInit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.buildingId,i=e.selectedFloor,o=e.floorList;this.buildingId=n,this.floorMap=new u.default,this.floors=[],o.map(function(e,n){t.floorMap.set(e.name,String(n)),t.floors.push(e.name)}),this.list=null,this.selectedFloorIdx=this.floorMap.get(i),this._floorIndex=this._getFloorIndex(this.selectedFloorIdx)}},{key:"createDOM",value:function(){var t=(0,S.Template)(P,{floors:this.floors}),e=(0,A.toDom)(t),n=document.createElement("div");return n.appendChild(e.querySelector(".floor-control")),n}},{key:"_construct",value:function(){var t=this;this.wrapperNode=this.dom.querySelector(".floor-control-wrapper"),this.list=this.dom.querySelector(".floor-control-list"),this.arrTopImg=this.dom.querySelector(".arr-top"),this.arrBottomImg=this.dom.querySelector(".arr-bottom"),this.arrTopImg.src=I,this.arrBottomImg.src=k,(0,w.Transform)(this.list),this.floorListScroll=new E.Scroll({touch:this.wrapperNode,vertical:!0,target:this.list,property:"translateY",bindSelf:!0,maxSpeed:2,outFactor:.2,min:-40*Math.max(this.floors.length-4,0),max:0,lockDirection:!1,maxRegion:10,springMaxRegion:1,touchStart:function(){t.floorListScroll.min=-40*Math.max(t.floors.length-4,0)}}),this._bindEvents(),"number"==typeof this._floorIndex&&this._floorIndex>-1&&this._updateSelectedFloor(this._floorIndex,!0)}},{key:"setFreezing",value:function(t){t?(0,A.addClass)(this.wrapperNode,"freezing"):(0,A.removeClass)(this.wrapperNode,"freezing")}},{key:"selectFloor",value:function(t,e){var n=this.floorMap.get(t),i=this._getFloorIndex(n);i>-1?this._updateSelectedFloor(i,!1,e):console.error("楼层不存在!",n)}},{key:"_bindEvents",value:function(){var t=this,e=this._bindClick();if((0,T.isPC)()){e.remove();var n={},i={};(0,T.on)(this.list,"mousedown",function(t){n=(0,A.getPointerXY)(t)}),(0,T.on)(this.list,"mouseup",function(e){if(i=(0,A.getPointerXY)(e),Math.abs(i.y-n.y)<=2&&Math.abs(i.x-n.x)<=2){if((0,A.hasClass)(t.wrapperNode,"freezing"))return!0;var o=e.target.getAttribute("data-floor");t.selectFloor(o)}})}}},{key:"_bindClick",value:function(){var t=this;return(0,T.on)(this.list,".floor-control-item:click",function(e){if((0,A.hasClass)(t.wrapperNode,"freezing"))return!0;var n=e.selectorTarget.getAttribute("data-floor");t.selectFloor(n)})}},{key:"getFloorName",value:function(t){var e=t.toString(),n=!0,i=!1,o=void 0;try{for(var a,l=(0,s.default)(this.floorMap.entries());!(n=(a=l.next()).done);n=!0){var u=(0,r.default)(a.value,2),c=u[0];if(u[1]===e)return c}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}},{key:"_getFloorIndex",value:function(t){var e=this.getFloorName(t);return this.floors.indexOf(e)}},{key:"_getFloorItem",value:function(t){return this.dom.querySelector('.floor-control-item[data-index="'+t+'"]')}},{key:"_addSelected",value:function(t){(0,A.addClass)(t,"selected-item"),3===t.innerHTML.length?t.style.fontSize="13px":4===t.innerHTML.length?t.style.fontSize="10px":t.innerHTML.length>4&&(t.style.fontSize="8px")}},{key:"_removeSelected",value:function(t){(0,A.removeClass)(t,"selected-item"),t.style.fontSize=""}},{key:"_updateSelectedFloor",value:function(t,e,n){var i=this,o=this._getFloorItem(this._floorIndex),r=this._getFloorItem(t);if(this._removeSelected(o),this._addSelected(r),this.floorListScroll){var a=this.floorListScroll.getComputedPosition(),s=Math.floor((this.floorListScroll.max-a)/40);[0,1,2,3].map(function(t){return t+s}).includes(t)||this.floorListScroll.to(Math.min(this.floorListScroll.max,Math.max(-40*(t-2),this.floorListScroll.min)),200)}if(e||t!==this._floorIndex){this._floorIndex=t;var l=parseInt(this.floorMap.get(this.floors[t]),10),u=l>this.selectedFloorIdx;this.selectedFloorIdx=l,n||setTimeout(function(){i.emit("floor-change",{floorIdx:i.selectedFloorIdx,floorName:i.floors[i.selectedFloorIdx],upper:u})},0)}}},{key:"show",value:function(){this.dom.style.display="block"}},{key:"hide",value:function(){this.dom.style.display="none"}},{key:"changeBottom",value:function(t){if(isNaN(t))return void console.error("top需要传数字");this.dom.style.bottom=t+"px"}}]),e}(b.default);e.default=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return 1-Math.sqrt(1-t*t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Scroll=void 0;var r=n(0),a=i(r),s=n(1),l=i(s),u=n(26),c=n(145),f="cubic-bezier(0.1, 0.57, 0.1, 1)";e.Scroll=function(){function t(e){(0,a.default)(this,t),this.element="string"==typeof e.touch?document.querySelector(e.touch):e.touch,this.scroller=this._getValue(e.target,this.element),this.vertical=this._getValue(e.vertical,!0),this.property=e.property,this.sensitivity=this._getValue(e.sensitivity,1),this.lockDirection=this._getValue(e.lockDirection,!0),this.tickID=0,this.handlers=[],this.initialValue=this._getValue(e.initialValue,this.scroller[this.property]),this.scroller[this.property]=this.initialValue,this.moveFactor=this._getValue(e.moveFactor,1),this.factor=this._getValue(e.factor,1),this.outFactor=this._getValue(e.outFactor,.3),this.min=e.min,this.max=e.max,this.maxRegion=this._getValue(e.maxRegion,600),this.deceleration=6e-4,this.springMaxRegion=this._getValue(e.springMaxRegion,60),this.fixed=this._getValue(e.fixed,!1);var n=function(){};if(this.change=e.change||n,this.touchEnd=e.touchEnd||n,this.touchStart=e.touchStart||n,this.touchMove=e.touchMove||n,this.touchCancel=e.touchCancel||n,this.animationEnd=e.animationEnd||n,this.hasMin=!(void 0===this.min),this.hasMax=!(void 0===this.max),this.isTouchStart=!1,this.step=e.step,this.inertia=this._getValue(e.inertia,!0),this.maxSpeed=e.maxSpeed,this.hasMaxSpeed=!(void 0===this.maxSpeed),this.hasMax&&this.hasMin){if(this.min>this.max)throw"min value can't be greater than max value";this.currentPage=Math.round((this.max-this.scroller[this.property])/this.step)}this.preventDefault=this._getValue(e.preventDefault,!0),this.eventTarget=self,e.bindSelf&&(this.eventTarget=this.element),this.bindEvents(),this._endCallbackTag=!0,this._endTimeout=null}return(0,l.default)(t,[{key:"bindEvents",value:function(){var t=this;(0,u.isPC)()?(this.handlers.push((0,u.on)(this.eventTarget,"mousedown",function(e){t._start(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mouseup",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mouseleave",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"mousemove",function(e){t._move(e)})),this.handlers.push((0,u.on)(this.eventTarget,"click",function(t){t.stopPropagation()}))):(this.handlers.push((0,u.on)(this.eventTarget,"touchstart",function(e){t._start(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchend",function(e){t._end(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchcancel",function(e){t._cancel(e)})),this.handlers.push((0,u.on)(this.eventTarget,"touchmove",function(e){t._move(e)}))),this.handlers.push((0,u.on)(this.scroller,c.TRANSITIONEND,function(e){t._transitionEnd(e)}))}},{key:"_getValue",value:function(t,e){return void 0===t?e:t}},{key:"_transitionEnd",value:function(){var t=this;if(this._triggerTransitionEnd){var e=this.scroller[this.property];return e<this.min?void this.to(this.min,600,f):e>this.max?void this.to(this.max,600,f):void(this.step?(this._correction(),this._endCallbackTag&&(this._endCallbackTag=setTimeout(function(){t.animationEnd(e),(0,u.cancelFrame)(t.tickID)},400),this._endCallbackTag=!1)):(this.animationEnd(e),(0,u.cancelFrame)(this.tickID)))}}},{key:"_cancelAnimation",value:function(){this.scroller.style[c.TRANSITIONDURATION]="0ms",this.scroller[this.property]=this.getComputedPosition()}},{key:"getComputedPosition",value:function(){var t=self.getComputedStyle(this.scroller,null);return t=t[c.TRANSFORM].split(")")[0].split(", "),this.vertical?+(t[13]||t[5]):+(t[12]||t[4])}},{key:"_tick",value:function(){this.change(this.getComputedPosition()),this.tickID=(0,u.frame)(this._tick.bind(this))}},{key:"_start",value:function(t){(0,u.cancelFrame)(this.tickID),this._endCallbackTag=!0,this.isTouchStart=!0,this._firstTouchMove=!0,this._preventMove=!1,this.touchStart(t,this.scroller[this.property]),this._cancelAnimation(),clearTimeout(this._endTimeout),this.hasMax&&this.hasMin&&(this.currentPage=Math.round((this.max-this.scroller[this.property])/this.step)),this.startTime=(new Date).getTime();var e=(0,c.getPointerXY)(t);this.preX=e.x,this._startX=this.preX,this.preY=e.y,this._startY=this.preY,this.start=this.vertical?this.preY:this.preX,t.stopPropagation()}},{key:"_move",value:function(t){if(this.isTouchStart){var e=(0,c.getPointerXY)(t),n=Math.abs(e.x-this._startX),i=Math.abs(e.y-this._startY);if(this._firstTouchMove&&this.lockDirection){var o=n-i;o>0&&this.vertical?this._preventMove=!0:o<0&&!this.vertical&&(this._preventMove=!0),this._firstTouchMove=!1}if(n<10&&i<10)return;if(!this._preventMove){var r=this.moveFactor,a=(this.vertical?e.y-this.preY:e.x-this.preX)*this.sensitivity;this.hasMax&&this.scroller[this.property]>this.max&&a>0?r=this.outFactor:this.hasMin&&this.scroller[this.property]<this.min&&a<0&&(r=this.outFactor),a*=r,this.preX=e.x,this.preY=e.y,this.scroller[this.property]+=a;var s=(new Date).getTime();s-this.startTime>300&&(this.startTime=s,this.start=this.vertical?this.preY:this.preX),this.touchMove(t,this.scroller[this.property])}this.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation()}}},{key:"_end",value:function(t){if(this.isTouchStart){var e=this.scroller[this.property],n=(0,c.getPointerXY)(t);if((n.x-this._startX>=2||n.y-this._startY>=2)&&(0,u.isPC)(),!1===this.touchEnd(t,e))return void(this._triggerTransitionEnd=!1);if(this._triggerTransitionEnd=!0,this.hasMax&&e>this.max)this.to(this.max,600,f);else if(this.hasMin&&e<this.min)this.to(this.min,600,f);else if(this.inertia&&!this._preventMove){var i=(new Date).getTime()-this.startTime;if(i<300){var r=((this.vertical?n.y:n.x)-this.start)*this.sensitivity,a=Math.abs(r)/i,s=this.factor*a;this.hasMaxSpeed&&s>this.maxSpeed&&(s=this.maxSpeed);var l=e+s*s/(2*this.deceleration)*(r<0?-1:1),d=1;l<this.min?l<this.min-this.maxRegion?(d=o((e-this.min+this.springMaxRegion)/(e-l)),l=this.min-this.springMaxRegion):(d=o((e-this.min+this.springMaxRegion*(this.min-l)/this.maxRegion)/(e-l)),l=this.min-this.springMaxRegion*(this.min-l)/this.maxRegion):l>this.max&&(l>this.max+this.maxRegion?(d=o((this.max+this.springMaxRegion-e)/(l-e)),l=this.max+this.springMaxRegion):(d=o((this.max+this.springMaxRegion*(l-this.max)/this.maxRegion-e)/(l-e)),l=this.max+this.springMaxRegion*(l-this.max)/this.maxRegion));var h=Math.round(a/this.deceleration)*d;this.to(Math.round(l),h,f)}else this.step&&this._correction()}else this.step&&this._correction();this.isTouchStart=!1,t.stopPropagation()}}},{key:"_cancel",value:function(t){(0,u.cancelFrame)(this.tickID),this.step&&this._correction(),this.touchCancel(t)}},{key:"goMin",value:function(t){var e=this.scroller[this.property];(t||this.hasMin&&e<this.min)&&this.to(this.min,200,f)}},{key:"goMax",value:function(t){var e=this.scroller[this.property];(t||this.hasMax&&e>this.max)&&this.to(this.max,200,f)}},{key:"to",value:function(t,e,n){var i=this.scroller,o=this.property;i.style[c.TRANSITIONDURATION]=this._getValue(e,600)+"ms",i.style[c.TRANSITIONTIMINGFUNCTION]=n||f,i[o]=t}},{key:"_correction",value:function(){var t=self.getComputedStyle(this.scroller)[c.TRANSFORM],e=this.vertical?parseInt(t.split(",")[13]):parseInt(t.split(",")[12]),n=Math.floor(Math.abs(e/this.step)),i=e%this.step,o=void 0;Math.abs(i)>this.step/2?(o=(e<0?-1:1)*(n+1)*this.step,o>this.max&&(o=this.max),o<this.min&&(o=this.min),this.to(o,400,f)):(o=(e<0?-1:1)*n*this.step,o>this.max&&(o=this.max),o<this.min&&(o=this.min),this.to(o,400,f))}},{key:"destroy",value:function(){this.handlers.forEach(function(t){t&&t.remove&&t.remove()})}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){for(var i=0,o=e.length;i<o;i++){r(t,e[i],n)}}function r(t,e,n){(0,f.default)(t,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t,n()}})}function a(t){return"object"===("undefined"==typeof HTMLElement?"undefined":(0,u.default)(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":(0,u.default)(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function s(t,e){if(!t.hasOwnProperty("translateX")){var n=["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],i=a(t);e||n.push("perspective"),o(t,n,function(){var n=t.matrix3d.identity().appendTransform(t.translateX,t.translateY,t.translateZ,t.scaleX,t.scaleY,t.scaleZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.originX,t.originY,t.originZ),o=(e?"":"perspective("+t.perspective+"px) ")+"matrix3d("+Array.prototype.slice.call(n.elements).join(",")+")";i?(t.style.transform=o,t.style.msTransform=o,t.style.OTransform=o,t.style.MozTransform=o,t.style.webkitTransform=o):t.transform=o}),t.matrix3d=new h,e||(t.perspective=500),t.scaleX=1,t.scaleY=1,t.scaleZ=1,t.translateX=0,t.translateY=0,t.translateZ=0,t.rotateX=0,t.rotateY=0,t.rotateZ=0,t.skewX=0,t.skewY=0,t.originX=0,t.originY=0,t.originZ=0}}Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=void 0;var l=n(20),u=i(l),c=n(76),f=i(c),d=.017453292519943295,h=function(t,e,n,i,o,r,a,s,l,u,c,f,d,h,v,p){this.elements=window.Float32Array?new Float32Array(16):[];var m=this.elements;m[0]=void 0!==t?t:1,m[4]=e||0,m[8]=n||0,m[12]=i||0,m[1]=o||0,m[5]=void 0!==r?r:1,m[9]=a||0,m[13]=s||0,m[2]=l||0,m[6]=u||0,m[10]=void 0!==c?c:1,m[14]=f||0,m[3]=d||0,m[7]=h||0,m[11]=v||0,m[15]=void 0!==p?p:1};h.prototype={set:function(t,e,n,i,o,r,a,s,l,u,c,f,d,h,v,p){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=o,m[5]=r,m[9]=a,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=f,m[3]=d,m[7]=h,m[11]=v,m[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var n=t.elements,i=this.elements,o=n[0],r=n[4],a=n[8],s=n[12],l=n[1],u=n[5],c=n[9],f=n[13],d=n[2],h=n[6],v=n[10],p=n[14],m=n[3],_=n[7],g=n[11],y=n[15],x=e[0],b=e[1],S=e[2],w=e[3],E=e[4],T=e[5],A=e[6],P=e[7],I=e[8],k=e[9],L=e[10],M=e[11],C=e[12],R=e[13],N=e[14],B=e[15];return i[0]=o*x+r*E+a*I+s*C,i[4]=o*b+r*T+a*k+s*R,i[8]=o*S+r*A+a*L+s*N,i[12]=o*w+r*P+a*M+s*B,i[1]=l*x+u*E+c*I+f*C,i[5]=l*b+u*T+c*k+f*R,i[9]=l*S+u*A+c*L+f*N,i[13]=l*w+u*P+c*M+f*B,i[2]=d*x+h*E+v*I+p*C,i[6]=d*b+h*T+v*k+p*R,i[10]=d*S+h*A+v*L+p*N,i[14]=d*w+h*P+v*M+p*B,i[3]=m*x+_*E+g*I+y*C,i[7]=m*b+_*T+g*k+y*R,i[11]=m*S+_*A+g*L+y*N,i[15]=m*w+_*P+g*M+y*B,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},_arrayWrap:function(t){return self.Float32Array?new Float32Array(t):t},appendTransform:function(t,e,n,i,o,r,a,s,l,u,c,f,h,v){var p=a*d,m=this._rounded(Math.cos(p)),_=this._rounded(Math.sin(p)),g=s*d,y=this._rounded(Math.cos(g)),x=this._rounded(Math.sin(g)),b=l*d,S=this._rounded(Math.cos(-1*b)),w=this._rounded(Math.sin(-1*b));return this.multiplyMatrices(this,this._arrayWrap([1,0,0,t,0,m,_,e,0,-_,m,n,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([y,0,x,0,0,1,0,0,-x,0,y,0,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([S*i,w*o,0,0,-w*i,S*o,0,0,0,0,1*r,0,0,0,0,1])),(u||c)&&this.multiplyMatrices(this,this._arrayWrap([this._rounded(Math.cos(u*d)),this._rounded(Math.sin(u*d)),0,0,-1*this._rounded(Math.sin(c*d)),this._rounded(Math.cos(c*d)),0,0,0,0,1,0,0,0,0,1])),(f||h||v)&&(this.elements[12]-=f*this.elements[0]+h*this.elements[4]+v*this.elements[8],this.elements[13]-=f*this.elements[1]+h*this.elements[5]+v*this.elements[9],this.elements[14]-=f*this.elements[2]+h*this.elements[6]+v*this.elements[10]),this}};var v=function(t,e,n,i,o,r){return this.a=null===t?1:t,this.b=e||0,this.c=n||0,this.d=null===i?1:i,this.tx=o||0,this.ty=r||0,this};v.prototype={identity:function(){return this.a=1,this.d=1,this.b=0,this.c=0,this.tx=0,this.ty=0,this},appendTransform:function(t,e,n,i,o,r,a,s,l){var u=void 0,c=void 0;if(o%360){var f=o*d;u=Math.cos(f),c=Math.sin(f)}else u=1,c=0;return r||a?(r*=d,a*=d,this.append(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),t,e),this.append(u*n,c*n,-c*i,u*i,0,0)):this.append(u*n,c*n,-c*i,u*i,t,e),(s||l)&&(this.tx-=s*this.a+l*this.c,this.ty-=s*this.b+l*this.d),this},append:function(t,e,n,i,o,r){var a=this.a,s=this.b,l=this.c,u=this.d;return this.a=t*a+e*l,this.b=t*s+e*u,this.c=n*a+i*l,this.d=n*s+i*u,this.tx=o*a+r*l+this.tx,this.ty=o*s+r*u+this.ty,this},initialize:function(t,e,n,i,o,r){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=o,this.ty=r,this},setValues:function(t,e,n,i,o,r){return this.a=null===t?1:t,this.b=e||0,this.c=n||0,this.d=null===i?1:i,this.tx=o||0,this.ty=r||0,this},copy:function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}},s.getMatrix3D=function(t){var e={translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0,originX:0,originY:0,originZ:0,scaleX:1,scaleY:1,scaleZ:1};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return(new h).identity().appendTransform(e.translateX,e.translateY,e.translateZ,e.scaleX,e.scaleY,e.scaleZ,e.rotateX,e.rotateY,e.rotateZ,e.skewX,e.skewY,e.originX,e.originY,e.originZ).elements},s.getMatrix2D=function(t){var e={translateX:0,translateY:0,rotation:0,skewX:0,skewY:0,originX:0,originY:0,scaleX:1,scaleY:1};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return(new v).identity().appendTransform(e.translateX,e.translateY,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.originX,e.originY)};var p=s;e.Transform=p},function(t,e,n){"use strict";function i(t,e,n,i,o){var r=(e[1]-t[1])*(n[2]-t[2])-(e[2]-t[2])*(n[1]-t[1]),a=(e[2]-t[2])*(n[0]-t[0])-(e[0]-t[0])*(n[2]-t[2]),s=(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]),l=Math.max(Math.abs(r),Math.abs(a),Math.abs(s));if(i>0&&l>0){var u=i/l;r*=u,a*=u,s*=u}return o=o||0,r+=o,a+=o,s+=o,[~~r,~~a,~~s]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";n(461);var i=n(112),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=n(42),a=n(61),s=window[a]||(window[a]={}),l=n(554),u=n(460);for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c]);s.Handler=u;var f=+new Date,d=o.default.key,h=o.default.version,v=o.default.loadScriptTime;(0,r.pv)({key:d,version:h,loadDeltaTime:f-v}),location.protocol.indexOf("file")>-1&&console.error("腾讯地图 JavaScript API 不支持在file协议使用，请在http或https协议下使用！"),t.exports=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),r=i(o),a=n(15),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(4),_=i(m),g=n(93),y=i(g),x=n(45),b=i(x),S=n(155),w=i(S),E=n(657),T=i(E),A=n(57),P=n(81),I=function(t){function e(t,n){(0,f.default)(this,e);var i=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this));return i._buildingId=t,i._cityId=t.substring(0,6),i._map=n.map,i._id="indoor_bulding_"+i._buildingId,i._manager=n.manager,i._buildingInfo=null,i._buildingBounds=null,i._isActiveStatus=!1,i._destroyed=!1,i._createLayer(n),i}return(0,_.default)(e,t),(0,h.default)(e,[{key:"isActive",value:function(){return this._isActiveStatus}},{key:"_setActiveStatus",value:function(t){this._isActiveStatus=t}},{key:"_createLayer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._sourceId=this._id,this._map.addSource(this._sourceId,{type:P.SOURCE_TYPE.indoor,data:{buildingId:this._buildingId,cityId:this._cityId,indoorStyleId:e.indoorStyleId}}),this._regionLayer=new T.default((0,s.default)(e,{map:this._map,id:this._id+"_region",sourceId:this._sourceId,type:A.RENDER_LAYER_TYPE.indoorRegion})),this._poiLayer=new T.default((0,s.default)(e,{map:this._map,id:this._id+"_poi",sourceId:this._sourceId,type:A.RENDER_LAYER_TYPE.indoorPoi})),this._escalatorLayer=new T.default((0,s.default)(e,{map:this._map,id:this._id+"_escalator",sourceId:this._sourceId,type:A.RENDER_LAYER_TYPE.indoorEscalator})),this._map.getSource(this._sourceId).on("loaded",function(){t._destroyed||t.getManager().emit("building_source_loaded")})}},{key:"_setVisible",value:function(t){if(t!==this._visible){this._regionLayer.setVisible(t),this._poiLayer.setVisible(t),this._escalatorLayer.setVisible(t),this._visible=t;var e=t?"show":"hide";this.emit(e)}}},{key:"getVisible",value:function(){return this._visible}},{key:"setSelectedFloor",value:function(t){if(this.isActive()){var e=this.getSelectedFloor();if(this._map&&e!==t){this._map.getSource(this._sourceId).setSelectedFloor(t)<0?console.warn("该室内建筑物无对应楼层: ",t):this.emit("floor_changed")}}else console.warn("该室内建筑物处于非激活状态，该方法无效!");return this}},{key:"getMap",value:function(){return this._map}},{key:"getManager",value:function(){return this._manager}},{key:"getSelectedFloor",value:function(){if(this._map)return this._map.getSource(this._sourceId).getSelectedFloor()}},{key:"getBuildingInfo",value:function(){if(this._buildingInfo)return this._buildingInfo;var t=this._map&&this._map.getSource(this._sourceId),e=t&&t.getMetaData();return e&&(this._buildingInfo=this._formatBuildingInfo(e)),this._buildingInfo}},{key:"getBuildingInfoAsync",value:function(){var t=this;return new r.default(function(e){t._buildingInfo&&e(t._buildingInfo);var n=t._map&&t._map.getSource(t._sourceId),i=n&&n.getMetaData();i?(t._buildingInfo=t._formatBuildingInfo(i),e(t._buildingInfo)):n.once("loaded",function(){t._destroyed||(t._buildingInfo=t._formatBuildingInfo(n.getMetaData()),e(t._buildingInfo))})})}},{key:"_formatBuildingInfo",value:function(t){var e=t.floorInfo.bounds[0],n=t.floorInfo.bounds[1],i=new b.default(e.lat,e.lng),o=new b.default(n.lat,n.lng),r=new w.default(i,o);return this._buildingBounds=r,{cityId:this._cityId,buildingId:this._buildingId,buildingName:t.buildingName,defaultFloor:t.floorInfo.floorStrArr[t.floorInfo.defaultNum],center:new b.default(t.center.lat,t.center.lng),floorList:t.floorInfo.floorStrArr.map(function(t){return{name:t,bounds:r}}),bounds:r}}},{key:"destroy",value:function(){this._regionLayer=null,this._poiLayer=null,this._escalatorLayer=null,this._buildingId=null,this._cityId=null,this._map=null,this._id=null,this._manager=null,this._buildingInfo=null,this._buildingBounds=null,this._isActiveStatus=!1,this._destroyed=!0}},{key:"buildingId",get:function(){return this._buildingId}}]),e}(y.default);e.default=I},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.getActiveIndoorBuilding();if(e!==n){if(n&&(n._setActiveStatus(!1),n.off("floor_changed",t._onActiveIndoorBuildingFloorChange)),e&&(e._setActiveStatus(!0),e.on("floor_changed",t._onActiveIndoorBuildingFloorChange)),e){var i=e.getSelectedFloor(),o=e.buildingId;t._map.indoorStateChange({floorName:i,buildingId:o},null)}else t._map.indoorStateChange(null,!!e);t._activeIndoorBuilding=e,t._updateFloorControl().then(function(){t.emit("active_changed",t._activeIndoorBuilding)})}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),a=i(r),s=n(15),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(5),m=i(p),_=n(4),g=i(_),y=n(25),x=i(y),b=n(93),S=i(b),w=n(293),E=n(26),T=i(E),A=n(10),P=n(629),I=i(P),k=n(624),L=i(k),M=n(621),C=i(M),R=n(383),N=n(326),B=n(275),O=n(631),D=i(O),z=n(81),V={map:null,visible:!0,minZoom:x.default.minShowIndoorZoom,maxZoom:x.default.maxZoom},F=0,U=100,Y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this)),i=(0,l.default)({},V,t);return n._options=i,n._map=i.map,n._visible=i.visible,n._minZoom=i.minZoom,n._maxZoom=i.maxZoom,n._indexSource=null,n._indoorBuildingList=[],n._indoorBuildingIds=[],n._userBuildingIdList=null,n._autoActive=!0,n._activeIndoorBuilding=null,n._floorControl=null,n._initialized=!1,n._isFloorControlVisible=!0,n._indoorStyleId=F,n._onActiveIndoorBuildingFloorChange=n._onActiveIndoorBuildingFloorChange.bind(n),n._initializePromise=null,n.checkInitialize(i),n}return(0,g.default)(e,t),(0,v.default)(e,[{key:"checkInitialize",value:function(t){var e=this;if((0,A.isInRange)(this._map.getZoom(),this._minZoom,this._maxZoom))return void(this._initializePromise=this._init(t));this.changeInitListener=T.default.throttle(function(){(0,A.isInRange)(e._map.getZoom(),e._minZoom,e._maxZoom)&&!e._initializePromise&&(e._initializePromise=e._init(t))},50),this._map.on("zoom_changed",this.changeInitListener)}},{key:"_init",value:function(t){var e=this,n=N.IndoorStyleMap.getInstance(),i=this._indoorStyleId,o=0;return this.changeInitListener&&this._map.off("zoom_changed",this.changeInitListener),(0,w.checkKey)(this._map.id).then(function(t){var r=t&&t.indoor_map;o=r&&r.type;var a=r&&r.enable,s=r&&r.building_list;return 1===a&&Array.isArray(s)?(e._userBuildingIdList=s,n.has(i)?s:(0,R.loadIndoorStyleFile)(i).then(function(t){return t&&n.set(e._indoorStyleId,t),s})):null}).then(function(n){if(n){var i=n.length;U=i>0?i:U;var r=1===o?1:0;return e._map.on("moveend",T.default.debounce(e._createBuildingInView.bind(e,t,r),50)),e._map.on("zoom_changed",T.default.throttle(e._onMapZoomChanged.bind(e),50)),e._map.on("center_changed",T.default.throttle(e._onMapCenterChanged.bind(e),50)),e.on("building_source_loaded",e._onBuildingSourceLoaded.bind(e)),e._createBuildingInView(t,r)}}).then(function(){e._initialized=!0})}},{key:"_createBuildingInView",value:function(t,e){var n=this,i=this._getCityList();this._indexSource||(this._indexSource=this._map.layerResource.addIndoorIndexSource(z.SOURCE_TYPE.indoorIndex));var o=this._getViewBounds();return new a.default(function(r){n._indexSource.loadIndexData(i,o,e,function(e){var i=e;Array.isArray(n._userBuildingIdList)&&n._userBuildingIdList.length>0&&(i=e.filter(function(t){return n._userBuildingIdList.includes(t)})),n._createIndoorBuildingList(i,t),n._visibleCheck(),r()})})}},{key:"_getCityList",value:function(){var t=this._map.getZoom(),e=[];if((0,A.isInRange)(t,this._minZoom,this._maxZoom)){var n=this._map.getCenter();e=D.default.filter(function(t){var e=t.leftBottom,i=t.rightTop,o=n.getLat(),r=n.getLng();return(0,A.isInRange)(o,e.lat,i.lat)&&(0,A.isInRange)(r,e.lng,i.lng)}).map(function(t){return t.cityId})}return e}},{key:"_getViewBounds",value:function(){var t=this._map.getBounds(),e=this._map.transform.latLngToCoord(t.getNorthEast(),20),n=e.x,i=e.y,o=this._map.transform.latLngToCoord(t.getSouthWest(),20);return{left:o.x,right:n,top:i,bottom:o.y}}},{key:"_createIndoorBuildingList",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0!==t.length&&(0===this._userBuildingIdList&&this._buildingNumLimitCheck(t),t.forEach(function(t){if(!e._indoorBuildingIds.includes(t)){var i=new I.default(t,(0,l.default)(n,{map:e._map,manager:e,indoorStyleId:e._indoorStyleId}));e._indoorBuildingList.push(i),e._indoorBuildingIds.push(t)}}))}},{key:"_buildingNumLimitCheck",value:function(t){var e=this,n=this._indoorBuildingIds.length,i=t.filter(function(t){return e._indoorBuildingIds.includes(t)}),o=i.length,r=t.length-o;if(n+r>U){for(var a=n+r-U,s=[],l=0;l<n&&(i.includes(this._indoorBuildingIds[l])||s.push(l),s.length!==a);l++);for(var u=0;u<a;u++){this._indoorBuildingIds.splice(s[u],1);var c=this._indoorBuildingList.splice(s[u],1)[0];c&&c.destroy(),c=null}}}},{key:"_onBuildingSourceLoaded",value:function(){this.getActiveIndoorBuilding()||this._autoActiveCheck()}},{key:"_onMapCenterChanged",value:function(){this._initialized&&this._autoActiveCheck()}},{key:"_onMapZoomChanged",value:function(){this._visibleCheck()}},{key:"_visibleCheck",value:function(){var t=this._map.getZoom();(0,A.isInRange)(t,this._minZoom,this._maxZoom)?this._visible&&this._indoorBuildingList.forEach(function(t){t._setVisible(!0)}):this._indoorBuildingList.forEach(function(t){t._setVisible(!1)})}},{key:"_autoActiveCheck",value:function(){var t=this;if(this._autoActive){var e=this._map.getCenter(),n=this._map.getZoom();n>=this._minZoom&&n<=this._maxZoom&&this._indoorBuildingList.length>0&&this._indoorBuildingList.some(function(n){var i=n.getBuildingInfo(),r=i&&i.bounds&&i.bounds.contains(e);return r&&o(t,n),r})||o(this,null)}}},{key:"_updateFloorControl",value:function(){var t=this,e=this.getActiveIndoorBuilding();return e?e.getBuildingInfoAsync().then(function(n){t._floorControl&&t._floorControl.buildingId===n.buildingId||(t._floorControl&&(t._map.removeControl(B.DEFAULT_CONTROL_ID.FLOOR),t._floorControl.destroy(),t._floorControl=null),t._floorControl=new L.default({id:B.DEFAULT_CONTROL_ID.FLOOR,position:C.default.BOTTOM_RIGHT,buildingId:n.buildingId,selectedFloor:e.getSelectedFloor()||n.defaultFloor,floorList:n.floorList}),t._map.addControl(t._floorControl),t._floorControl.on("floor-change",function(e){var n=e.floorName;t.getActiveIndoorBuilding()&&t.getActiveIndoorBuilding().setSelectedFloor(n)})),t._isFloorControlVisible&&t._floorControl.show()}):(this._floorControl&&this._floorControl.hide(),a.default.resolve())}},{key:"_onActiveIndoorBuildingFloorChange",value:function(){var t=this.getActiveIndoorBuilding();if(this._floorControl&&this._initialized&&t){var e=t.getSelectedFloor();this._map.indoorStateChange({floorName:e,buildingId:t.buildingId},null),this._floorControl.selectFloor(e)}}},{key:"initialize",value:function(){return this._initializePromise||(this._initializePromise=this._init()),this._initializePromise}},{key:"setAutoActive",value:function(t){return this._autoActive=!!t,this._autoActiveCheck(),this}},{key:"setActiveIndoorBuilding",value:function(t){if(this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),this._autoActive)return console.warn("自动激活模式下，该方法无效!"),this;if(!t)return o(this,null),this;var e=this.getIndoorBuilding(t);return e&&o(this,e),this}},{key:"setVisible",value:function(t){t=!!t,this._visible=t;var e=this._map.getZoom();return t&&!(0,A.isInRange)(e,this._minZoom,this._maxZoom)?this:(this._indoorBuildingList.forEach(function(e){e._setVisible(t)}),this)}},{key:"showFloorControl",value:function(){this.getActiveIndoorBuilding()&&(this._isFloorControlVisible=!0,this._floorControl&&this._floorControl.show())}},{key:"hideFloorControl",value:function(){this._isFloorControlVisible=!1,this._floorControl&&this._floorControl.hide()}},{key:"getMap",value:function(){return this._map}},{key:"getAutoActive",value:function(){return this._autoActive}},{key:"getActiveIndoorBuilding",value:function(){return this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),this._activeIndoorBuilding}},{key:"getVisible",value:function(){return this._visible}},{key:"getIndoorBuilding",value:function(t){return this._initialized||console.warn("室内地图管理器尚未初始化完毕，该方法无效!"),"string"!=typeof t?(console.error("室内地图管理器：请传入正确的buildingId"),null):(this._userBuildingIdList&&!this._indoorBuildingIds.includes(t)&&(0===this._userBuildingIdList.length||this._userBuildingIdList.includes(t))&&this._createIndoorBuildingList([t],this._options),this._indoorBuildingList.filter(function(e){return e.buildingId===t})[0]||null)}},{key:"getIndoorBuildingList",value:function(){var t=this;if(!this._userBuildingIdList)return[];if(Array.isArray(this._userBuildingIdList)&&0===this._userBuildingIdList.length)return[];var e=this._userBuildingIdList.filter(function(e){return!t._indoorBuildingIds.includes(e)});return e.length>0&&this._createIndoorBuildingList(e,this._options),this._indoorBuildingList}},{key:"destroy",value:function(){this.removeAllListeners(),this._floorControl&&this._floorControl.destroy(),this._indexSource=null,this._indoorBuildingList&&this._indoorBuildingList.length>0&&this._indoorBuildingList.forEach(function(t){t.destroy()}),this._indoorBuildingList=null,this._indoorBuildingIds=null,this._userBuildingIdList=null}}],[{key:"getInstance",value:function(t){return this(t)}}]),e}(S.default);e.default=Y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[{cityId:1,cityName:"阿坝藏族羌族自治州",leftBottom:{lng:100.527191,lat:30.5941792},rightTop:{lng:104.437462,lat:34.3129807}},{cityId:2,cityName:"阿克苏地区",leftBottom:{lng:78.0278625,lat:39.46632},rightTop:{lng:84.0897293,lat:42.6467705}},{cityId:3,cityName:"阿拉尔市",leftBottom:{lng:80.5910263,lat:40.3629417},rightTop:{lng:81.9546509,lat:40.9459915}},{cityId:4,cityName:"阿拉善盟",leftBottom:{lng:97.1728973,lat:37.4060097},rightTop:{lng:106.870407,lat:42.7955093}},{cityId:5,cityName:"阿勒泰地区",leftBottom:{lng:85.5280609,lat:45.0013466},rightTop:{lng:91.0756912,lat:49.1796417}},{cityId:6,cityName:"阿里地区",leftBottom:{lng:78.3958511,lat:29.6754494},rightTop:{lng:86.3286438,lat:35.8606606}},{cityId:7,cityName:"安康市",leftBottom:{lng:108.025841,lat:31.7050705},rightTop:{lng:110.206619,lat:33.8416901}},{cityId:8,cityName:"安庆市",leftBottom:{lng:115.762444,lat:29.7817001},rightTop:{lng:117.742203,lat:31.2683601}},{cityId:9,cityName:"鞍山市",leftBottom:{lng:122.187637,lat:40.0004501},rightTop:{lng:123.76844,lat:41.5684013}},{cityId:10,cityName:"安顺市",leftBottom:{lng:105.248627,lat:25.3531303},rightTop:{lng:106.571159,lat:26.6234398}},{cityId:11,cityName:"安阳市",leftBottom:{lng:113.633263,lat:35.2048492},rightTop:{lng:114.989021,lat:36.3664703}},{cityId:12,cityName:"澳門特別行政區",leftBottom:{lng:113.532799,lat:22.1022892},rightTop:{lng:113.610321,lat:22.2143898}},{cityId:13,cityName:"白城市",leftBottom:{lng:121.641777,lat:44.2273903},rightTop:{lng:124.369949,lat:46.3047295}},{cityId:14,cityName:"百色市",leftBottom:{lng:104.45018,lat:22.8547001},rightTop:{lng:107.88459,lat:25.0993195}},{cityId:15,cityName:"白沙黎族自治县",leftBottom:{lng:109.038727,lat:18.9357204},rightTop:{lng:109.701729,lat:19.4867706}},{cityId:16,cityName:"白山市",leftBottom:{lng:126.12088,lat:41.3637886},rightTop:{lng:128.31842,lat:42.8214684}},{cityId:17,cityName:"白银市",leftBottom:{lng:103.555313,lat:35.4118881},rightTop:{lng:105.524643,lat:37.6380882}},{cityId:18,cityName:"保定市",leftBottom:{lng:113.767166,lat:38.2375298},rightTop:{lng:116.335167,lat:39.95224}},{cityId:19,cityName:"宝鸡市",leftBottom:{lng:106.310501,lat:33.579361},rightTop:{lng:108.05732,lat:35.1055908}},{cityId:20,cityName:"保山市",leftBottom:{lng:98.0895004,lat:24.1221294},rightTop:{lng:100.047417,lat:25.8563404}},{cityId:21,cityName:"保亭黎族苗族自治县",leftBottom:{lng:109.405197,lat:18.3876495},rightTop:{lng:109.852119,lat:18.83354}},{cityId:22,cityName:"包头市",leftBottom:{lng:109.254807,lat:40.2477493},rightTop:{lng:111.445999,lat:42.7367783}},{cityId:23,cityName:"巴彦淖尔市",leftBottom:{lng:105.19912,lat:40.1707306},rightTop:{lng:109.904839,lat:42.4640388}},{cityId:24,cityName:"巴音郭楞蒙古自治州",leftBottom:{lng:82.4704132,lat:35.639389},rightTop:{lng:93.8679123,lat:43.5614319}},{cityId:25,cityName:"巴中市",leftBottom:{lng:106.36805,lat:31.25173},rightTop:{lng:107.761841,lat:32.7391319}},{cityId:26,cityName:"北海市",leftBottom:{lng:108.848152,lat:20.8681602},rightTop:{lng:109.792152,lat:21.9190407}},{cityId:27,cityName:"北京市",leftBottom:{lng:115.423866,lat:39.4396019},rightTop:{lng:117.506706,lat:41.0608292}},{cityId:28,cityName:"蚌埠市",leftBottom:{lng:116.73571,lat:32.7119484},rightTop:{lng:118.075287,lat:33.5029106}},{cityId:29,cityName:"本溪市",leftBottom:{lng:123.589394,lat:40.816349},rightTop:{lng:125.791267,lat:41.5696411}},{cityId:30,cityName:"毕节市",leftBottom:{lng:103.602074,lat:26.3577995},rightTop:{lng:106.726822,lat:27.7762299}},{cityId:31,cityName:"滨州市",leftBottom:{lng:117.264549,lat:36.6877708},rightTop:{lng:118.380569,lat:38.3085785}},{cityId:32,cityName:"博尔塔拉蒙古自治州",leftBottom:{lng:79.8846817,lat:44.004612},rightTop:{lng:83.8048172,lat:45.3883896}},{cityId:33,cityName:"亳州市",leftBottom:{lng:115.545723,lat:32.8593216},rightTop:{lng:116.832817,lat:34.0696716}},{cityId:34,cityName:"沧州市",leftBottom:{lng:115.702438,lat:37.4709206},rightTop:{lng:117.953407,lat:38.9453011}},{cityId:35,cityName:"长春市",leftBottom:{lng:124.543671,lat:43.2640915},rightTop:{lng:127.09449,lat:45.2520523}},{cityId:36,cityName:"常德市",leftBottom:{lng:110.491577,lat:28.4049091},rightTop:{lng:112.305939,lat:30.1263695}},{cityId:37,cityName:"昌都市",leftBottom:{lng:93.5946198,lat:28.4352398},rightTop:{lng:99.110817,lat:32.5928612}},{cityId:38,cityName:"昌江黎族自治县",leftBottom:{lng:108.600777,lat:18.8782406},rightTop:{lng:109.29821,lat:19.5490608}},{cityId:39,cityName:"昌吉回族自治州",leftBottom:{lng:85.5804825,lat:43.1013985},rightTop:{lng:91.5870132,lat:45.4880676}},{cityId:40,cityName:"长沙市",leftBottom:{lng:111.896248,lat:27.8480892},rightTop:{lng:114.261261,lat:28.6616306}},{cityId:41,cityName:"长治市",leftBottom:{lng:111.981598,lat:35.8231201},rightTop:{lng:113.739258,lat:37.1247711}},{cityId:42,cityName:"常州市",leftBottom:{lng:119.140572,lat:31.1525402},rightTop:{lng:120.201859,lat:32.0591393}},{cityId:43,cityName:"朝阳市",leftBottom:{lng:118.84597,lat:40.6007118},rightTop:{lng:121.300911,lat:42.3829689}},{cityId:44,cityName:"潮州市",leftBottom:{lng:116.36805,lat:23.4261494},rightTop:{lng:117.206261,lat:24.23279}},{cityId:45,cityName:"承德市",leftBottom:{lng:115.908173,lat:40.1918907},rightTop:{lng:119.25309,lat:42.6180382}},{cityId:46,cityName:"成都市",leftBottom:{lng:103.023376,lat:30.0939312},rightTop:{lng:104.892853,lat:31.4346695}},{cityId:47,cityName:"澄迈县",leftBottom:{lng:109.725159,lat:19.372879},rightTop:{lng:110.261864,lat:20.0893803}},{cityId:48,cityName:"郴州市",leftBottom:{lng:112.229713,lat:24.8905201},rightTop:{lng:114.237503,lat:26.8396797}},{cityId:49,cityName:"赤峰市",leftBottom:{lng:116.367401,lat:41.285511},rightTop:{lng:120.987038,lat:45.2432518}},{cityId:50,cityName:"池州市",leftBottom:{lng:116.648598,lat:29.5614605},rightTop:{lng:118.131439,lat:30.8452892}},{cityId:51,cityName:"重庆市",leftBottom:{lng:105.289787,lat:28.1602497},rightTop:{lng:110.200401,lat:32.2011986}},{cityId:52,cityName:"崇左市",leftBottom:{lng:106.56028,lat:21.594059},rightTop:{lng:108.112556,lat:23.3547306}},{cityId:53,cityName:"楚雄彝族自治州",leftBottom:{lng:100.721611,lat:24.2197895},rightTop:{lng:102.482277,lat:26.4988899}},{cityId:54,cityName:"滁州市",leftBottom:{lng:117.16095,lat:31.8509197},rightTop:{lng:119.22979,lat:33.216671}},{cityId:55,cityName:"大连市",leftBottom:{lng:120.920418,lat:38.250061},rightTop:{lng:123.534721,lat:40.2038498}},{cityId:56,cityName:"大理白族自治州",leftBottom:{lng:98.8642807,lat:24.6606007},rightTop:{lng:101.04641,lat:26.696579}},{cityId:57,cityName:"丹东市",leftBottom:{lng:117.608596,lat:36.843903},rightTop:{lng:137.14943,lat:43.72608}},{cityId:58,cityName:"儋州市",leftBottom:{lng:108.891983,lat:19.1788597},rightTop:{lng:109.766167,lat:19.9512997}},{cityId:59,cityName:"大庆市",leftBottom:{lng:123.755363,lat:45.3827896},rightTop:{lng:125.79126,lat:47.47612}},{cityId:60,cityName:"大同市",leftBottom:{lng:112.579514,lat:39.0481491},rightTop:{lng:114.562531,lat:40.7433701}},{cityId:61,cityName:"大兴安岭地区",leftBottom:{lng:121.182663,lat:50.9030266},rightTop:{lng:127.029572,lat:53.5634804}},{cityId:62,cityName:"达州市",leftBottom:{lng:106.6661,lat:30.3247604},rightTop:{lng:108.54673,lat:32.3382301}},{cityId:63,cityName:"德宏傣族景颇族自治州",leftBottom:{lng:97.5288391,lat:23.8391094},rightTop:{lng:98.7270432,lat:25.33605}},{cityId:64,cityName:"德阳市",leftBottom:{lng:103.795441,lat:30.5235405},rightTop:{lng:105.17466,lat:31.6984806}},{cityId:65,cityName:"德州市",leftBottom:{lng:115.75869,lat:36.4085388},rightTop:{lng:117.6073,lat:38.0099792}},{cityId:66,cityName:"定安县",leftBottom:{lng:110.123848,lat:19.2112808},rightTop:{lng:110.552711,lat:19.7281208}},{cityId:67,cityName:"定西市",leftBottom:{lng:103.467056,lat:34.1242905},rightTop:{lng:105.64782,lat:36.0434189}},{cityId:68,cityName:"迪庆藏族自治州",leftBottom:{lng:98.5940475,lat:26.8659992},rightTop:{lng:100.309219,lat:29.2484894}},{cityId:69,cityName:"东方市",leftBottom:{lng:108.572449,lat:18.7147293},rightTop:{lng:109.126282,lat:19.3674297}},{cityId:70,cityName:"东莞市",leftBottom:{lng:113.521858,lat:22.65555},rightTop:{lng:114.260269,lat:23.1431999}},{cityId:71,cityName:"东营市",leftBottom:{lng:118.105743,lat:36.9369011},rightTop:{lng:119.342072,lat:38.1630707}},{cityId:72,cityName:"鄂尔多斯市",leftBottom:{lng:106.475952,lat:37.6173286},rightTop:{lng:111.463211,lat:40.8837891}},{cityId:73,cityName:"恩施土家族苗族自治州",leftBottom:{lng:108.36776,lat:29.1143303},rightTop:{lng:110.642776,lat:31.3971806}},{cityId:74,cityName:"鄂州市",leftBottom:{lng:114.506058,lat:30.0165501},rightTop:{lng:115.091293,lat:30.6148701}},{cityId:75,cityName:"防城港市",leftBottom:{lng:107.48481,lat:21.4794598},rightTop:{lng:108.607368,lat:22.3736801}},{cityId:76,cityName:"佛山市",leftBottom:{lng:112.390572,lat:22.6437092},rightTop:{lng:113.391747,lat:23.5727692}},{cityId:77,cityName:"福州市",leftBottom:{lng:118.384598,lat:25.2075596},rightTop:{lng:120.532837,lat:26.6392307}},{cityId:78,cityName:"抚州市",leftBottom:{lng:115.591858,lat:26.4950104},rightTop:{lng:117.303299,lat:28.4933796}},{cityId:79,cityName:"抚顺市",leftBottom:{lng:123.669518,lat:41.2389412},rightTop:{lng:125.489891,lat:42.4778481}},{cityId:80,cityName:"阜新市",leftBottom:{lng:121.019867,lat:41.6928291},rightTop:{lng:122.976601,lat:42.8437309}},{cityId:81,cityName:"阜阳市",leftBottom:{lng:114.8825,lat:32.4035416},rightTop:{lng:116.635048,lat:33.5840912}},{cityId:82,cityName:"甘南藏族自治州",leftBottom:{lng:100.764427,lat:33.1030006},rightTop:{lng:104.76194,lat:35.5940895}},{cityId:83,cityName:"赣州市",leftBottom:{lng:113.913612,lat:24.4862404},rightTop:{lng:116.64431,lat:27.1436405}},{cityId:84,cityName:"甘孜藏族自治州",leftBottom:{lng:97.3528519,lat:27.9609203},rightTop:{lng:102.494583,lat:34.1957703}},{cityId:85,cityName:"广安市",leftBottom:{lng:105.947571,lat:30.0171814},rightTop:{lng:107.314011,lat:30.852869}},{cityId:86,cityName:"广元市",leftBottom:{lng:104.61628,lat:31.5252304},rightTop:{lng:106.766747,lat:32.9328995}},{cityId:87,cityName:"广州市",leftBottom:{lng:112.96196,lat:22.5145607},rightTop:{lng:114.059258,lat:23.9292698}},{cityId:88,cityName:"贵港市",leftBottom:{lng:109.20845,lat:22.6535206},rightTop:{lng:110.662659,lat:24.0421696}},{cityId:89,cityName:"桂林市",leftBottom:{lng:109.618279,lat:24.2535},rightTop:{lng:111.492561,lat:26.3854103}},{cityId:90,cityName:"贵阳市",leftBottom:{lng:106.124077,lat:26.1840305},rightTop:{lng:107.2798,lat:27.3553791}},{cityId:91,cityName:"果洛藏族自治州",leftBottom:{lng:96.9792175,lat:32.5127792},rightTop:{lng:101.778862,lat:35.5824699}},{cityId:92,cityName:"固原市",leftBottom:{lng:105.32505,lat:35.2382889},rightTop:{lng:106.958679,lat:36.5176315}},{cityId:93,cityName:"哈尔滨市",leftBottom:{lng:125.688599,lat:44.0616989},rightTop:{lng:130.240707,lat:46.6744576}},{cityId:94,cityName:"海北藏族自治州",leftBottom:{lng:98.0933533,lat:36.7344704},rightTop:{lng:102.642166,lat:39.090271}},{cityId:95,cityName:"海东市",leftBottom:{lng:101.666412,lat:35.4483185},rightTop:{lng:103.072693,lat:37.1489296}},{cityId:96,cityName:"海口市",leftBottom:{lng:110.069496,lat:19.5237503},rightTop:{lng:110.709084,lat:20.1800804}},{cityId:97,cityName:"海南藏族自治州",leftBottom:{lng:98.9322205,lat:34.6409912},rightTop:{lng:101.799133,lat:37.2373505}},{cityId:98,cityName:"海西蒙古族藏族自治州",leftBottom:{lng:89.6401367,lat:32.7208214},rightTop:{lng:99.78508,lat:39.2215195}},{cityId:99,cityName:"哈密地区",leftBottom:{lng:91.1776886,lat:40.7524414},rightTop:{lng:96.3890991,lat:45.0900536}},{cityId:100,cityName:"邯郸市",leftBottom:{lng:113.46228,lat:36.048851},rightTop:{lng:115.4841,lat:37.022171}},{cityId:101,cityName:"杭州市",leftBottom:{lng:118.344948,lat:29.1887302},rightTop:{lng:120.721947,lat:30.5664806}},{cityId:102,cityName:"汉中市",leftBottom:{lng:105.491577,lat:32.146019},rightTop:{lng:108.284073,lat:33.8785019}},{cityId:103,cityName:"鹤壁市",leftBottom:{lng:113.996048,lat:35.4426689},rightTop:{lng:114.758102,lat:36.0485992}},{cityId:104,cityName:"河池市",leftBottom:{lng:106.571083,lat:23.5531693},rightTop:{lng:109.161217,lat:25.6107407}},{cityId:105,cityName:"合肥市",leftBottom:{lng:116.687492,lat:30.9508095},rightTop:{lng:117.965851,lat:32.5360794}},{cityId:106,cityName:"鹤岗市",leftBottom:{lng:129.673492,lat:47.0608521},rightTop:{lng:132.524826,lat:48.3533325}},{cityId:107,cityName:"黑河市",leftBottom:{lng:124.74855,lat:47.5869026},rightTop:{lng:129.537567,lat:51.0035477}},{cityId:108,cityName:"衡水市",leftBottom:{lng:115.19146,lat:37.0597992},rightTop:{lng:116.56501,lat:38.3703995}},{cityId:109,cityName:"衡阳市",leftBottom:{lng:111.54361,lat:26.1142292},rightTop:{lng:113.283943,lat:27.4670391}},{cityId:110,cityName:"和田地区",leftBottom:{lng:77.4038315,lat:34.3325081},rightTop:{lng:84.9199219,lat:39.6336403}},{cityId:111,cityName:"河源市",leftBottom:{lng:114.241814,lat:23.1641808},rightTop:{lng:115.59301,lat:24.7810192}},{cityId:112,cityName:"菏泽市",leftBottom:{lng:114.823349,lat:34.5508614},rightTop:{lng:116.414032,lat:35.8635483}},{cityId:113,cityName:"贺州市",leftBottom:{lng:110.57074,lat:23.6517391},rightTop:{lng:112.061867,lat:25.1515808}},{cityId:114,cityName:"红河哈尼族彝族自治州",leftBottom:{lng:101.80204,lat:22.4412899},rightTop:{lng:104.282463,lat:24.7642708}},{cityId:115,cityName:"淮安市",leftBottom:{lng:118.21949,lat:32.7160492},rightTop:{lng:119.645187,lat:34.0930214}},{cityId:116,cityName:"淮北市",leftBottom:{lng:116.3937,lat:33.2784386},rightTop:{lng:117.058311,lat:34.2487183}},{cityId:117,cityName:"怀化市",leftBottom:{lng:108.790848,lat:25.8655605},rightTop:{lng:111.113068,lat:29.0210991}},{cityId:118,cityName:"淮南市",leftBottom:{lng:116.364891,lat:32.3860397},rightTop:{lng:117.215286,lat:33.003521}},{cityId:119,cityName:"黄冈市",leftBottom:{lng:114.402023,lat:29.7205601},rightTop:{lng:116.136841,lat:31.6047497}},{cityId:120,cityName:"黄南藏族自治州",leftBottom:{lng:100.68679,lat:34.0640984},rightTop:{lng:102.456642,lat:36.1696205}},{cityId:121,cityName:"黄山市",leftBottom:{lng:117.202583,lat:29.3929996},rightTop:{lng:118.902573,lat:30.5166492}},{cityId:122,cityName:"黄石市",leftBottom:{lng:114.531693,lat:29.5069904},rightTop:{lng:115.510941,lat:30.33041}},{cityId:123,cityName:"呼和浩特市",leftBottom:{lng:110.5187,lat:39.5889397},rightTop:{lng:112.30896,lat:41.3858604}},{cityId:124,cityName:"惠州市",leftBottom:{lng:113.812828,lat:22.3743896},rightTop:{lng:115.41877,lat:23.9594307}},{cityId:125,cityName:"葫芦岛市",leftBottom:{lng:119.216583,lat:39.954071},rightTop:{lng:121.101257,lat:41.2059708}},{cityId:126,cityName:"呼伦贝尔市",leftBottom:{lng:115.528923,lat:47.0968704},rightTop:{lng:126.07608,lat:53.3356628}},{cityId:127,cityName:"湖州市",leftBottom:{lng:119.236954,lat:30.3732891},rightTop:{lng:120.490501,lat:31.1787891}},{cityId:128,cityName:"佳木斯市",leftBottom:{lng:129.507706,lat:45.9452362},rightTop:{lng:135.09726,lat:48.4652023}},{cityId:129,cityName:"江门市",leftBottom:{lng:112.003487,lat:21.4434299},rightTop:{lng:113.263329,lat:22.8528194}},{cityId:130,cityName:"吉安市",leftBottom:{lng:113.834587,lat:25.9722195},rightTop:{lng:115.935379,lat:27.9613094}},{cityId:131,cityName:"焦作市",leftBottom:{lng:112.568733,lat:34.8115196},rightTop:{lng:113.646973,lat:35.4944992}},{cityId:132,cityName:"嘉兴市",leftBottom:{lng:120.295967,lat:30.2451706},rightTop:{lng:121.541481,lat:31.0303497}},{cityId:133,cityName:"嘉峪关市",leftBottom:{lng:97.8316422,lat:39.6320496},rightTop:{lng:98.5236893,lat:39.9784012}},{cityId:134,cityName:"揭阳市",leftBottom:{lng:115.61335,lat:22.8476601},rightTop:{lng:116.636101,lat:23.7733994}},{cityId:135,cityName:"吉林市",leftBottom:{lng:125.650551,lat:42.5628281},rightTop:{lng:128.017487,lat:44.6469116}},{cityId:136,cityName:"济南市",leftBottom:{lng:116.223824,lat:36.0293388},rightTop:{lng:117.747437,lat:37.5390282}},{cityId:137,cityName:"金昌市",leftBottom:{lng:101.41864,lat:38.0237007},rightTop:{lng:102.734329,lat:38.9994812}},{cityId:138,cityName:"晋城市",leftBottom:{lng:111.939537,lat:35.2033615},rightTop:{lng:113.625061,lat:36.0641708}},{cityId:139,cityName:"景德镇市",leftBottom:{lng:116.962708,lat:28.7178898},rightTop:{lng:117.71064,lat:29.9314899}},{cityId:140,cityName:"荆门市",leftBottom:{lng:111.860252,lat:30.3902397},rightTop:{lng:113.490494,lat:31.6106396}},{cityId:141,cityName:"荆州市",leftBottom:{lng:111.243797,lat:29.4276199},rightTop:{lng:114.091049,lat:30.6581097}},{cityId:142,cityName:"金华市",leftBottom:{lng:119.228706,lat:28.5226898},rightTop:{lng:120.783852,lat:29.6822205}},{cityId:143,cityName:"济宁市",leftBottom:{lng:115.866364,lat:34.4502602},rightTop:{lng:117.597542,lat:35.9813309}},{cityId:144,cityName:"晋中市",leftBottom:{lng:111.408463,lat:36.6441498},rightTop:{lng:114.139923,lat:38.0931816}},{cityId:145,cityName:"锦州市",leftBottom:{lng:120.717194,lat:40.7294807},rightTop:{lng:122.600273,lat:42.1297379}},{cityId:146,cityName:"九江市",leftBottom:{lng:113.942047,lat:28.6851692},rightTop:{lng:116.904037,lat:30.0746002}},{cityId:147,cityName:"酒泉市",leftBottom:{lng:92.3222809,lat:38.1041794},rightTop:{lng:100.20182,lat:42.7955093}},{cityId:148,cityName:"鸡西市",leftBottom:{lng:130.399857,lat:44.53383},rightTop:{lng:133.949524,lat:46.6113396}},{cityId:149,cityName:"济源市",leftBottom:{lng:112.036949,lat:34.8956909},rightTop:{lng:112.767319,lat:35.2798004}},{cityId:150,cityName:"开封市",leftBottom:{lng:113.877296,lat:34.1970482},rightTop:{lng:115.26548,lat:35.0226517}},{cityId:151,cityName:"喀什地区",leftBottom:{lng:74.4605026,lat:35.4513206},rightTop:{lng:79.8657608,lat:40.2581711}},{cityId:152,cityName:"克拉玛依市",leftBottom:{lng:84.5517731,lat:44.1077805},rightTop:{lng:86.036171,lat:46.2131767}},{cityId:153,cityName:"克孜勒苏柯尔克孜自治州",leftBottom:{lng:73.4909286,lat:37.6508789},rightTop:{lng:78.8792191,lat:41.3994408}},{cityId:154,cityName:"昆明市",leftBottom:{lng:102.168663,lat:24.38521},rightTop:{lng:103.673592,lat:26.5426903}},{cityId:155,cityName:"来宾市",leftBottom:{lng:108.418243,lat:23.2688408},rightTop:{lng:110.458473,lat:24.4675598}},{cityId:156,cityName:"莱芜市",leftBottom:{lng:117.331367,lat:35.9906311},rightTop:{lng:117.974678,lat:36.552948}},{cityId:157,cityName:"廊坊市",leftBottom:{lng:116.116913,lat:38.4735794},rightTop:{lng:117.260078,lat:40.0967293}},{cityId:158,cityName:"兰州市",leftBottom:{lng:102.600906,lat:35.5711288},rightTop:{lng:104.576378,lat:37.0364189}},{cityId:159,cityName:"拉萨市",leftBottom:{lng:89.7535477,lat:29.2380791},rightTop:{lng:92.6215668,lat:31.0558205}},{cityId:160,cityName:"乐东黎族自治县",leftBottom:{lng:108.64994,lat:18.2978306},rightTop:{lng:109.407997,lat:18.9620495}},{cityId:161,cityName:"乐山市",leftBottom:{lng:102.911041,lat:28.4202309},rightTop:{lng:104.252129,lat:29.9285908}},{cityId:162,cityName:"凉山彝族自治州",leftBottom:{lng:100.061317,lat:26.0457802},rightTop:{lng:103.877457,lat:29.3026409}},{cityId:163,cityName:"连云港市",leftBottom:{lng:118.408463,lat:33.979599},rightTop:{lng:119.850807,lat:35.1229095}},{cityId:164,cityName:"聊城市",leftBottom:{lng:115.282509,lat:35.7792015},rightTop:{lng:116.545616,lat:37.0232506}},{cityId:165,cityName:"辽阳市",leftBottom:{lng:122.590973,lat:40.7083397},rightTop:{lng:123.688843,lat:41.6118279}},{cityId:166,cityName:"辽源市",leftBottom:{lng:124.840012,lat:42.2995682},rightTop:{lng:125.843849,lat:43.2328987}},{cityId:167,cityName:"丽江市",leftBottom:{lng:99.3820267,lat:25.9848804},rightTop:{lng:101.51403,lat:27.9242191}},{cityId:168,cityName:"临沧市",leftBottom:{lng:98.6727905,lat:23.0779896},rightTop:{lng:100.547028,lat:25.0324001}},{cityId:169,cityName:"临汾市",leftBottom:{lng:110.374191,lat:35.3865089},rightTop:{lng:112.57444,lat:36.9346809}},{cityId:170,cityName:"临高县",leftBottom:{lng:109.49408,lat:19.5733795},rightTop:{lng:109.897087,lat:20.0396595}},{cityId:171,cityName:"陵水黎族自治县",leftBottom:{lng:109.755768,lat:18.2743607},rightTop:{lng:110.229263,lat:18.8091908}},{cityId:172,cityName:"临夏回族自治州",leftBottom:{lng:102.685997,lat:34.9414787},rightTop:{lng:103.858818,lat:36.2103004}},{cityId:173,cityName:"临沂市",leftBottom:{lng:117.418716,lat:34.3773499},rightTop:{lng:119.203239,lat:36.2068405}},{cityId:174,cityName:"林芝市",leftBottom:{lng:92.1635284,lat:27.5596104},rightTop:{lng:98.7536392,lat:30.6712303}},{cityId:175,cityName:"丽水市",leftBottom:{lng:118.699173,lat:27.4168701},rightTop:{lng:120.438812,lat:28.9501591}},{cityId:176,cityName:"六盘水市",leftBottom:{lng:104.308571,lat:25.3223705},rightTop:{lng:105.721603,lat:26.9198208}},{cityId:177,cityName:"柳州市",leftBottom:{lng:108.5877,lat:23.9060192},rightTop:{lng:110.177963,lat:26.0515099}},{cityId:178,cityName:"陇南市",leftBottom:{lng:104.023758,lat:32.5941086},rightTop:{lng:106.583961,lat:34.5327415}},{cityId:179,cityName:"龙岩市",leftBottom:{lng:115.853439,lat:24.3703594},rightTop:{lng:117.753151,lat:26.0330791}},{cityId:180,cityName:"娄底市",leftBottom:{lng:110.772034,lat:27.2053204},rightTop:{lng:112.524193,lat:28.2342796}},{cityId:181,cityName:"六安市",leftBottom:{lng:115.371033,lat:31.008419},rightTop:{lng:117.25489,lat:32.6611099}},{cityId:182,cityName:"漯河市",leftBottom:{lng:113.461662,lat:33.4047318},rightTop:{lng:114.29541,lat:33.9852104}},{cityId:183,cityName:"洛阳市",leftBottom:{lng:111.138443,lat:33.5629883},rightTop:{lng:112.984749,lat:35.0709305}},{cityId:184,cityName:"泸州市",leftBottom:{lng:105.145111,lat:27.6595192},rightTop:{lng:106.380608,lat:29.3267193}},{cityId:185,cityName:"吕梁市",leftBottom:{lng:110.375908,lat:36.7321091},rightTop:{lng:112.329323,lat:38.7314987}},{cityId:186,cityName:"马鞍山市",leftBottom:{lng:117.896248,lat:31.2918797},rightTop:{lng:118.888832,lat:32.0581093}},{cityId:187,cityName:"茂名市",leftBottom:{lng:110.325279,lat:21.3386803},rightTop:{lng:111.68351,lat:22.7048607}},{cityId:188,cityName:"眉山市",leftBottom:{lng:102.8526,lat:29.4004898},rightTop:{lng:104.503937,lat:30.3617306}},{cityId:189,cityName:"梅州市",leftBottom:{lng:115.315277,lat:23.3734493},rightTop:{lng:116.941513,lat:24.9373608}},{cityId:190,cityName:"绵阳市",leftBottom:{lng:103.748787,lat:30.7056789},rightTop:{lng:105.726219,lat:33.0419884}},{cityId:191,cityName:"牡丹江市",leftBottom:{lng:128.230911,lat:43.4264488},rightTop:{lng:131.322891,lat:45.9873085}},{cityId:192,cityName:"南昌市",leftBottom:{lng:115.438721,lat:28.1574993},rightTop:{lng:116.565491,lat:29.1733303}},{cityId:193,cityName:"南充市",leftBottom:{lng:105.444649,lat:30.4580097},rightTop:{lng:106.968391,lat:31.8483696}},{cityId:194,cityName:"南京市",leftBottom:{lng:118.362877,lat:31.2292004},rightTop:{lng:119.240486,lat:32.6129684}},{cityId:195,cityName:"南宁市",leftBottom:{lng:107.329353,lat:22.2025299},rightTop:{lng:109.620338,lat:24.0322609}},{cityId:196,cityName:"南平市",leftBottom:{lng:117.003418,lat:26.2546902},rightTop:{lng:119.275322,lat:28.3129005}},{cityId:197,cityName:"南通市",leftBottom:{lng:120.202339,lat:31.6141701},rightTop:{lng:121.999161,lat:32.7111397}},{cityId:198,cityName:"南阳市",leftBottom:{lng:110.982887,lat:32.26894},rightTop:{lng:113.814667,lat:33.80159}},{cityId:199,cityName:"那曲地区",leftBottom:{lng:85.0527191,lat:29.9365005},rightTop:{lng:95.0232468,lat:36.4849815}},{cityId:200,cityName:"内江市",leftBottom:{lng:104.269539,lat:29.1844292},rightTop:{lng:105.446068,lat:30.0394707}},{cityId:201,cityName:"宁波市",leftBottom:{lng:120.877373,lat:28.8407707},rightTop:{lng:122.309402,lat:30.4506607}},{cityId:202,cityName:"宁德市",leftBottom:{lng:118.548332,lat:26.2919006},rightTop:{lng:120.749741,lat:27.67519}},{cityId:203,cityName:"怒江傈僳族自治州",leftBottom:{lng:98.1321182,lat:25.5491695},rightTop:{lng:99.6433868,lat:28.3944302}},{cityId:204,cityName:"盘锦市",leftBottom:{lng:121.476044,lat:40.6391411},rightTop:{lng:122.42057,lat:41.4518394}},{cityId:205,cityName:"攀枝花市",leftBottom:{lng:101.138229,lat:26.0817795},rightTop:{lng:102.24749,lat:27.3427906}},{cityId:206,cityName:"平顶山市",leftBottom:{lng:112.249092,lat:33.1282196},rightTop:{lng:113.688469,lat:34.3456802}},{cityId:207,cityName:"平凉市",leftBottom:{lng:105.345482,lat:34.8834305},rightTop:{lng:107.86409,lat:35.7500687}},{cityId:208,cityName:"萍乡市",leftBottom:{lng:113.576149,lat:26.9584789},rightTop:{lng:114.275276,lat:28.0050907}},{cityId:209,cityName:"普洱市",leftBottom:{lng:99.1557236,lat:22.0240002},rightTop:{lng:102.323448,lat:24.8268108}},{cityId:210,cityName:"莆田市",leftBottom:{lng:118.452957,lat:24.9391499},rightTop:{lng:119.720039,lat:25.7518406}},{cityId:211,cityName:"濮阳市",leftBottom:{lng:114.874611,lat:35.3308716},rightTop:{lng:116.110443,lat:36.2104416}},{cityId:212,cityName:"黔东南苗族侗族自治州",leftBottom:{lng:107.298981,lat:25.3063107},rightTop:{lng:109.595367,lat:27.527689}},{cityId:213,cityName:"潜江市",leftBottom:{lng:112.502739,lat:30.0774097},rightTop:{lng:113.033577,lat:30.6462498}},{cityId:214,cityName:"黔南布依族苗族自治州",leftBottom:{lng:106.211052,lat:25.0581398},rightTop:{lng:108.30368,lat:27.4843292}},{cityId:215,cityName:"黔西南布依族苗族自治州",leftBottom:{lng:104.529549,lat:24.6183891},rightTop:{lng:106.531639,lat:26.1756592}},{cityId:216,cityName:"青岛市",leftBottom:{lng:119.513107,lat:35.5273285},rightTop:{lng:121.406502,lat:37.1468506}},{cityId:217,cityName:"庆阳市",leftBottom:{lng:106.362221,lat:35.2414398},rightTop:{lng:108.715538,lat:37.1590881}},{cityId:218,cityName:"清远市",leftBottom:{lng:111.927452,lat:23.4543591},rightTop:{lng:113.916321,lat:25.2019005}},{cityId:219,cityName:"秦皇岛市",leftBottom:{lng:118.568459,lat:39.4296112},rightTop:{lng:119.863167,lat:40.6130486}},{cityId:220,cityName:"钦州市",leftBottom:{lng:108.183693,lat:21.5037308},rightTop:{lng:109.870689,lat:22.6821098}},{cityId:221,cityName:"琼海市",leftBottom:{lng:110.120117,lat:18.9760704},rightTop:{lng:110.721657,lat:19.4722805}},{cityId:222,cityName:"琼中黎族苗族自治县",leftBottom:{lng:109.523941,lat:18.7276707},rightTop:{lng:110.158569,lat:19.4198208}},{cityId:223,cityName:"齐齐哈尔市",leftBottom:{lng:122.400597,lat:46.2237282},rightTop:{lng:126.675209,lat:48.9354706}},{cityId:224,cityName:"七台河市",leftBottom:{lng:130.104813,lat:45.5882797},rightTop:{lng:131.935455,lat:46.3353882}},{cityId:225,cityName:"泉州市",leftBottom:{lng:117.578499,lat:24.3017101},rightTop:{lng:119.06678,lat:25.9316406}},{cityId:226,cityName:"曲靖市",leftBottom:{lng:103.052559,lat:24.3475895},rightTop:{lng:104.828751,lat:27.0522289}},{cityId:227,cityName:"衢州市",leftBottom:{lng:118.028282,lat:28.23909},rightTop:{lng:119.346153,lat:29.4968891}},{cityId:228,cityName:"日喀则市",leftBottom:{lng:82.141983,lat:27.2101307},rightTop:{lng:90.3494492,lat:31.8070793}},{cityId:229,cityName:"日照市",leftBottom:{lng:118.601082,lat:34.9581299},rightTop:{lng:119.952026,lat:36.0414581}},{cityId:230,cityName:"三门峡市",leftBottom:{lng:110.359917,lat:33.5501289},rightTop:{lng:112.031097,lat:35.0837898}},{cityId:231,cityName:"三明市",leftBottom:{lng:116.383308,lat:25.4776897},rightTop:{lng:118.672607,lat:27.1298294}},{cityId:232,cityName:"三沙市",leftBottom:{lng:105.590164,lat:2},rightTop:{lng:125.76929,lat:28.130243}},{cityId:233,cityName:"三亚市",leftBottom:{lng:108.931976,lat:18.1160793},rightTop:{lng:109.810959,lat:18.6233902}},{cityId:234,cityName:"上海市",leftBottom:{lng:120.855919,lat:30.6703892},rightTop:{lng:121.999474,lat:31.8675308}},{cityId:235,cityName:"商洛市",leftBottom:{lng:108.575882,lat:33.0947304},rightTop:{lng:111.036926,lat:34.4323502}},{cityId:236,cityName:"商丘市",leftBottom:{lng:114.826897,lat:33.7067184},rightTop:{lng:116.65036,lat:34.8606682}},{cityId:237,cityName:"上饶市",leftBottom:{lng:116.235687,lat:27.8003101},rightTop:{lng:118.487686,lat:29.6993198}},{cityId:238,cityName:"山南地区",leftBottom:{lng:90.0673676,lat:26.8494492},rightTop:{lng:94.3594894,lat:29.8240604}},{cityId:239,cityName:"汕头市",leftBottom:{lng:116.25029,lat:23.0408096},rightTop:{lng:117.359306,lat:23.6460304}},{cityId:240,cityName:"汕尾市",leftBottom:{lng:114.918297,lat:22.6116199},rightTop:{lng:116.227768,lat:23.4721298}},{cityId:241,cityName:"韶关市",leftBottom:{lng:112.852386,lat:23.8879204},rightTop:{lng:114.745323,lat:25.5167599}},{cityId:242,cityName:"绍兴市",leftBottom:{lng:119.888496,lat:29.2250595},rightTop:{lng:121.231552,lat:30.2862892}},{cityId:243,cityName:"邵阳市",leftBottom:{lng:109.822113,lat:25.962019},rightTop:{lng:112.091141,lat:27.6624203}},{cityId:244,cityName:"神农架林区",leftBottom:{lng:109.939919,lat:31.2963295},rightTop:{lng:110.982727,lat:31.8611107}},{cityId:245,cityName:"沈阳市",leftBottom:{lng:122.425743,lat:41.1994896},rightTop:{lng:123.813599,lat:43.0429192}},{cityId:246,cityName:"深圳市",leftBottom:{lng:113.676979,lat:22.2339993},rightTop:{lng:114.652138,lat:22.8514996}},{cityId:247,cityName:"石河子市",leftBottom:{lng:85.9007874,lat:44.1234818},rightTop:{lng:86.170639,lat:44.4628601}},{cityId:248,cityName:"石家庄市",leftBottom:{lng:113.522743,lat:37.4392509},rightTop:{lng:115.483467,lat:38.7645683}},{cityId:249,cityName:"十堰市",leftBottom:{lng:109.43557,lat:31.5059605},rightTop:{lng:111.585602,lat:33.271431}},{cityId:250,cityName:"石嘴山市",leftBottom:{lng:105.986122,lat:38.616909},rightTop:{lng:106.988083,lat:39.3917503}},{cityId:251,cityName:"双鸭山市",leftBottom:{lng:130.666473,lat:45.7880974},rightTop:{lng:134.347366,lat:47.5725212}},{cityId:252,cityName:"朔州市",leftBottom:{lng:111.898064,lat:39.0895805},rightTop:{lng:113.572723,lat:40.2991905}},{cityId:253,cityName:"四平市",leftBottom:{lng:123.305931,lat:42.8219604},rightTop:{lng:125.784317,lat:44.1563187}},{cityId:254,cityName:"松原市",leftBottom:{lng:123.109871,lat:43.9916496},rightTop:{lng:126.194168,lat:45.5417976}},{cityId:255,cityName:"苏州市",leftBottom:{lng:119.918633,lat:30.7580795},rightTop:{lng:121.386993,lat:32.0347214}},{cityId:256,cityName:"宿州市",leftBottom:{lng:116.159286,lat:33.2740517},rightTop:{lng:118.187599,lat:34.6508217}},{cityId:257,cityName:"绥化市",leftBottom:{lng:124.873772,lat:45.5043678},rightTop:{lng:128.555862,lat:48.0974007}},{cityId:258,cityName:"遂宁市",leftBottom:{lng:105.059341,lat:30.1749001},rightTop:{lng:106.001053,lat:31.1609001}},{cityId:259,cityName:"随州市",leftBottom:{lng:112.727821,lat:31.32621},rightTop:{lng:114.13459,lat:32.4321213}},{cityId:260,cityName:"宿迁市",leftBottom:{lng:117.940071,lat:33.13694},rightTop:{lng:119.1763,lat:34.4222298}},{cityId:261,cityName:"塔城地区",leftBottom:{lng:82.2501907,lat:43.4809608},rightTop:{lng:87.3363266,lat:47.2344589}},{cityId:262,cityName:"台州市",leftBottom:{lng:120.289917,lat:28.0003605},rightTop:{lng:121.979637,lat:29.3401108}},{cityId:263,cityName:"泰州市",leftBottom:{lng:119.646523,lat:31.9272804},rightTop:{lng:120.559113,lat:33.2190819}},{cityId:264,cityName:"泰安市",leftBottom:{lng:116.048439,lat:35.6303978},rightTop:{lng:118.002647,lat:36.4768715}},{cityId:265,cityName:"太原市",leftBottom:{lng:111.51593,lat:37.4562302},rightTop:{lng:113.156342,lat:38.4213486}},{cityId:266,cityName:"唐山市",leftBottom:{lng:117.512032,lat:38.900631},rightTop:{lng:119.448532,lat:40.4650192}},{cityId:267,cityName:"天津市",leftBottom:{lng:116.707947,lat:38.555481},rightTop:{lng:118.06942,lat:40.2532692}},{cityId:268,cityName:"天门市",leftBottom:{lng:112.592613,lat:30.3778706},rightTop:{lng:113.467369,lat:30.9039803}},{cityId:269,cityName:"天水市",leftBottom:{lng:104.577477,lat:34.0765991},rightTop:{lng:106.714996,lat:35.1779099}},{cityId:270,cityName:"铁岭市",leftBottom:{lng:123.452957,lat:41.9868889},rightTop:{lng:125.109543,lat:43.4924316}},{cityId:271,cityName:"铜川市",leftBottom:{lng:108.583549,lat:34.8046417},rightTop:{lng:109.496582,lat:35.5810814}},{cityId:272,cityName:"通化市",leftBottom:{lng:125.264076,lat:40.8618813},rightTop:{lng:126.754272,lat:43.0220795}},{cityId:273,cityName:"通辽市",leftBottom:{lng:119.238251,lat:42.2457581},rightTop:{lng:123.720779,lat:45.6865997}},{cityId:274,cityName:"铜陵市",leftBottom:{lng:117.249451,lat:30.4141502},rightTop:{lng:118.165527,lat:31.1289902}},{cityId:275,cityName:"铜仁市",leftBottom:{lng:107.753067,lat:27.1212196},rightTop:{lng:109.474548,lat:29.0864506}},{cityId:276,cityName:"吐鲁番市",leftBottom:{lng:87.2599487,lat:41.1891403},rightTop:{lng:91.9163666,lat:43.6343918}},{cityId:277,cityName:"图木舒克市",leftBottom:{lng:78.6532364,lat:39.6160011},rightTop:{lng:79.6058426,lat:40.1293716}},{cityId:278,cityName:"屯昌县",leftBottom:{lng:109.821892,lat:19.1306705},rightTop:{lng:110.252731,lat:19.5927391}},{cityId:279,cityName:"万宁市",leftBottom:{lng:110.012733,lat:18.5727806},rightTop:{lng:110.614479,lat:19.1047993}},{cityId:280,cityName:"潍坊市",leftBottom:{lng:118.175079,lat:35.7119408},rightTop:{lng:120.011307,lat:37.3332787}},{cityId:281,cityName:"威海市",leftBottom:{lng:121.176933,lat:36.6739082},rightTop:{lng:122.726158,lat:38.2525711}},{cityId:282,cityName:"渭南市",leftBottom:{lng:108.9645,lat:34.20961},rightTop:{lng:110.606941,lat:35.8539581}},{cityId:283,cityName:"文昌市",leftBottom:{lng:110.462769,lat:19.3158607},rightTop:{lng:111.31723,lat:20.2484207}},{cityId:284,cityName:"文山壮族苗族自治州",leftBottom:{lng:103.574097,lat:22.6856899},rightTop:{lng:106.200073,lat:24.4594593}},{cityId:285,cityName:"温州市",leftBottom:{lng:119.625343,lat:27.0132389},rightTop:{lng:121.372627,lat:28.6110497}},{cityId:286,cityName:"乌海市",leftBottom:{lng:106.59095,lat:39.0368309},rightTop:{lng:107.181061,lat:39.9054604}},{cityId:287,cityName:"武汉市",leftBottom:{lng:113.700409,lat:29.9666405},rightTop:{lng:115.080811,lat:31.3612499}},{cityId:288,cityName:"芜湖市",leftBottom:{lng:117.48262,lat:30.6380501},rightTop:{lng:118.73336,lat:31.5359898}},{cityId:289,cityName:"五家渠市",leftBottom:{lng:87.3679199,lat:44.0043602},rightTop:{lng:87.7174988,lat:44.5968704}},{cityId:290,cityName:"乌兰察布市",leftBottom:{lng:110.337868,lat:40.1639404},rightTop:{lng:114.81105,lat:43.379879}},{cityId:291,cityName:"乌鲁木齐市",leftBottom:{lng:86.7889175,lat:42.9170418},rightTop:{lng:88.9795074,lat:45.0016747}},{cityId:292,cityName:"武威市",leftBottom:{lng:101.830902,lat:36.7551613},rightTop:{lng:104.207367,lat:39.4612999}},{cityId:293,cityName:"无锡市",leftBottom:{lng:119.519676,lat:31.1206703},rightTop:{lng:120.604446,lat:31.9852009}},{cityId:294,cityName:"五指山市",leftBottom:{lng:109.323799,lat:18.6266804},rightTop:{lng:109.732292,lat:19.0324993}},{cityId:295,cityName:"吴忠市",leftBottom:{lng:105.571373,lat:36.572319},rightTop:{lng:107.657066,lat:38.2624283}},{cityId:296,cityName:"梧州市",leftBottom:{lng:110.325142,lat:22.6071396},rightTop:{lng:111.667213,lat:24.4049206}},{cityId:297,cityName:"厦门市",leftBottom:{lng:117.886009,lat:24.3841305},rightTop:{lng:118.453987,lat:24.9073391}},{cityId:298,cityName:"香港特別行政區",leftBottom:{lng:113.616013,lat:22.0750065},rightTop:{lng:114.50898,lat:22.5916195}},{cityId:299,cityName:"湘潭市",leftBottom:{lng:111.99971,lat:27.3380604},rightTop:{lng:113.091919,lat:28.0735798}},{cityId:300,cityName:"湘西土家族苗族自治州",leftBottom:{lng:109.186653,lat:27.7199993},rightTop:{lng:110.391006,lat:29.6338406}},{cityId:301,cityName:"襄阳市",leftBottom:{lng:110.764,lat:31.2297993},rightTop:{lng:113.118736,lat:32.6276398}},{cityId:302,cityName:"咸宁市",leftBottom:{lng:113.537819,lat:29.0294895},rightTop:{lng:114.973717,lat:30.2978191}},{cityId:303,cityName:"西安市",leftBottom:{lng:107.62751,lat:33.693882},rightTop:{lng:109.822456,lat:34.74366}},{cityId:304,cityName:"仙桃市",leftBottom:{lng:112.940979,lat:30.0696602},rightTop:{lng:113.824944,lat:30.5324593}},{cityId:305,cityName:"咸阳市",leftBottom:{lng:107.651894,lat:34.1955299},rightTop:{lng:109.178223,lat:35.544239}},{cityId:306,cityName:"孝感市",leftBottom:{lng:113.316689,lat:30.3799992},rightTop:{lng:114.591988,lat:31.853899}},{cityId:307,cityName:"锡林郭勒盟",leftBottom:{lng:111.154129,lat:41.575779},rightTop:{lng:120.123337,lat:46.77705}},{cityId:308,cityName:"兴安盟",leftBottom:{lng:119.482262,lat:44.2563591},rightTop:{lng:123.643593,lat:47.6574402}},{cityId:309,cityName:"邢台市",leftBottom:{lng:113.760094,lat:36.7540207},rightTop:{lng:115.852943,lat:37.8066902}},{cityId:310,cityName:"西宁市",leftBottom:{lng:100.90403,lat:36.2311096},rightTop:{lng:101.91449,lat:37.4052696}},{cityId:311,cityName:"新乡市",leftBottom:{lng:113.382111,lat:34.8777008},rightTop:{lng:115.018753,lat:35.839138}},{cityId:312,cityName:"信阳市",leftBottom:{lng:113.710114,lat:31.3823605},rightTop:{lng:115.943787,lat:32.6597099}},{cityId:313,cityName:"新余市",leftBottom:{lng:114.485558,lat:27.53022},rightTop:{lng:115.406487,lat:28.1076393}},{cityId:314,cityName:"忻州市",leftBottom:{lng:110.944801,lat:38.1324005},rightTop:{lng:113.967003,lat:39.6637001}},{cityId:315,cityName:"西双版纳傣族自治州",leftBottom:{lng:99.9450912,lat:21.1399498},rightTop:{lng:101.844193,lat:22.5901508}},{cityId:316,cityName:"宣城市",leftBottom:{lng:117.970444,lat:29.9435902},rightTop:{lng:119.649498,lat:31.3047504}},{cityId:317,cityName:"许昌市",leftBottom:{lng:113.065529,lat:33.6887512},rightTop:{lng:114.324966,lat:34.4069214}},{cityId:318,cityName:"徐州市",leftBottom:{lng:116.361816,lat:33.7185211},rightTop:{lng:118.674423,lat:34.9399414}},{cityId:319,cityName:"雅安市",leftBottom:{lng:101.936493,lat:28.8487797},rightTop:{lng:103.395248,lat:30.9384594}},{cityId:320,cityName:"延安市",leftBottom:{lng:107.659721,lat:35.3443909},rightTop:{lng:110.552528,lat:37.5010109}},{cityId:321,cityName:"延边朝鲜族自治州",leftBottom:{lng:127.46888,lat:41.9987984},rightTop:{lng:131.319122,lat:44.5139198}},{cityId:322,cityName:"盐城市",leftBottom:{lng:119.459297,lat:32.5754509},rightTop:{lng:120.994926,lat:34.5445213}},{cityId:323,cityName:"阳江市",leftBottom:{lng:111.282082,lat:21.4660397},rightTop:{lng:112.369362,lat:22.6784}},{cityId:324,cityName:"阳泉市",leftBottom:{lng:112.919868,lat:37.6619492},rightTop:{lng:114.044571,lat:38.5243607}},{cityId:325,cityName:"扬州市",leftBottom:{lng:119.016487,lat:32.2179298},rightTop:{lng:119.911797,lat:33.4158211}},{cityId:326,cityName:"烟台市",leftBottom:{lng:119.553398,lat:36.559639},rightTop:{lng:122.03804,lat:38.6573601}},{cityId:327,cityName:"宜春市",leftBottom:{lng:113.889679,lat:27.5454998},rightTop:{lng:116.149887,lat:29.0996895}},{cityId:328,cityName:"伊春市",leftBottom:{lng:127.631432,lat:46.4828873},rightTop:{lng:130.777573,lat:49.441349}},{cityId:329,cityName:"宜宾市",leftBottom:{lng:103.611809,lat:27.8405991},rightTop:{lng:105.355797,lat:29.2660408}},{cityId:330,cityName:"宜昌市",leftBottom:{lng:110.255661,lat:29.9457092},rightTop:{lng:112.084328,lat:31.5735302}},{cityId:331,cityName:"伊犁哈萨克自治州",leftBottom:{lng:80.1640167,lat:42.258461},rightTop:{lng:85.2510071,lat:44.8430405}},{cityId:332,cityName:"银川市",leftBottom:{lng:105.838699,lat:37.6021194},rightTop:{lng:106.87043,lat:38.8690491}},{cityId:333,cityName:"营口市",leftBottom:{lng:121.859306,lat:39.9198418},rightTop:{lng:123.007309,lat:40.9410782}},{cityId:334,cityName:"鹰潭市",leftBottom:{lng:116.692207,lat:27.84659},rightTop:{lng:117.472794,lat:28.6279202}},{cityId:335,cityName:"益阳市",leftBottom:{lng:110.721138,lat:27.9746494},rightTop:{lng:112.950127,lat:29.5243607}},{cityId:336,cityName:"永州市",leftBottom:{lng:110.9515,lat:24.6363602},rightTop:{lng:112.457367,lat:26.8679295}},{cityId:337,cityName:"榆林市",leftBottom:{lng:107.263802,lat:36.8189201},rightTop:{lng:111.246147,lat:39.5869904}},{cityId:338,cityName:"玉林市",leftBottom:{lng:109.541069,lat:21.6341991},rightTop:{lng:110.898888,lat:23.1247902}},{cityId:339,cityName:"岳阳市",leftBottom:{lng:112.315292,lat:28.4218502},rightTop:{lng:114.15712,lat:29.8472996}},{cityId:340,cityName:"运城市",leftBottom:{lng:110.219887,lat:34.5842896},rightTop:{lng:112.081917,lat:35.8212814}},{cityId:341,cityName:"云浮市",leftBottom:{lng:111.056427,lat:22.3756905},rightTop:{lng:112.521652,lat:23.3238392}},{cityId:342,cityName:"玉树藏族自治州",leftBottom:{lng:89.4090881,lat:31.6002407},rightTop:{lng:97.776123,lat:36.2771111}},{cityId:343,cityName:"玉溪市",leftBottom:{lng:101.276817,lat:23.3137798},rightTop:{lng:103.153099,lat:24.9523697}},{cityId:344,cityName:"枣庄市",leftBottom:{lng:116.811401,lat:34.4612503},rightTop:{lng:117.832039,lat:35.3204498}},{cityId:345,cityName:"张家界市",leftBottom:{lng:109.693748,lat:28.8672409},rightTop:{lng:111.337532,lat:29.7908993}},{cityId:346,cityName:"张家口市",leftBottom:{lng:113.825562,lat:39.5560112},rightTop:{lng:116.465561,lat:42.1491394}},{cityId:347,cityName:"张掖市",leftBottom:{lng:97.3878403,lat:37.6070404},rightTop:{lng:102.215363,lat:39.8840218}},{cityId:348,cityName:"漳州市",leftBottom:{lng:116.899567,lat:23.5487995},rightTop:{lng:118.24514,lat:25.1944695}},{cityId:349,cityName:"湛江市",leftBottom:{lng:109.628792,lat:20.0595989},rightTop:{lng:111.081047,lat:21.9182796}},{cityId:350,cityName:"肇庆市",leftBottom:{lng:111.361977,lat:22.7697697},rightTop:{lng:112.88179,lat:24.3998203}},{cityId:351,cityName:"昭通市",leftBottom:{lng:102.87149,lat:26.5343094},rightTop:{lng:105.316383,lat:28.6684303}},{cityId:352,cityName:"郑州市",leftBottom:{lng:112.721176,lat:34.2621002},rightTop:{lng:114.22319,lat:34.9885406}},{cityId:353,cityName:"镇江市",leftBottom:{lng:118.969482,lat:31.6252193},rightTop:{lng:119.981506,lat:32.3162003}},{cityId:354,cityName:"中山市",leftBottom:{lng:113.158546,lat:22.2039089},rightTop:{lng:113.693253,lat:22.7772007}},{cityId:355,cityName:"中卫市",leftBottom:{lng:104.293633,lat:36.1216583},rightTop:{lng:106.459618,lat:37.7277107}},{cityId:356,cityName:"周口市",leftBottom:{lng:114.091621,lat:33.0526619},rightTop:{lng:115.653214,lat:34.3372002}},{cityId:357,cityName:"舟山市",leftBottom:{lng:121.521332,lat:29.545639},rightTop:{lng:122.992256,lat:30.9029293}},{cityId:358,cityName:"珠海市",leftBottom:{lng:113.059349,lat:21.7801895},rightTop:{lng:114.411263,lat:22.4543991}},{cityId:359,cityName:"驻马店市",leftBottom:{lng:113.097687,lat:32.2771912},rightTop:{lng:115.219704,lat:33.5306091}},{cityId:360,cityName:"株洲市",leftBottom:{lng:112.966667,lat:26.0451908},rightTop:{lng:114.106934,lat:28.0290203}},{cityId:361,cityName:"淄博市",leftBottom:{lng:117.545601,lat:35.9234695},rightTop:{lng:118.520798,lat:37.2891502}},{cityId:362,cityName:"自贡市",leftBottom:{lng:104.052917,lat:28.9241199},rightTop:{lng:105.270042,lat:29.6372604}},{cityId:363,cityName:"资阳市",leftBottom:{lng:104.192131,lat:29.6740208},rightTop:{lng:105.753868,lat:30.6436806}},{cityId:364,cityName:"遵义市",leftBottom:{lng:105.608841,lat:27.1325493},rightTop:{lng:108.21476,lat:29.2213001}},{cityId:365,cityName:"taiwan",leftBottom:{lng:119.198798,lat:21.835159},rightTop:{lng:122.331982,lat:25.72666}}];e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=function(e){var n=t.styles[e.styleId];return n?(0,S.default)({},{text:e.content||C.text,color:n.color||C.color,backgroundColor:n.backgroundColor||C.backgroundColor,borderColor:n.borderColor||C.borderColor,borderWidth:f(n.borderWidth||C.borderWidth,"number",0),strokeColor:n.strokeColor||C.strokeColor,borderRadius:f(n.borderRadius||C.borderRadius,"number",0),size:n.size||C.size,width:f(n.width||C.width,"number",0),height:f(n.height||C.height,"number",0),padding:f(n.padding||C.padding,"string",""),scale:n.scale||C.scale,offset:n.offset||C.offset,angle:n.angle||C.angle,alignment:L[n.alignment]||L[C.alignment],verticalAlignment:M[n.verticalAlignment]||M[C.verticalAlignment]}):(0,S.default)({},C,{color:"rgba(0, 0, 0, 0)"})},o={};t.geometries.forEach(function(t){var e=i(t),n=e.text;n&&(0,x.default)(n).forEach(function(t){o[t]=1})});var s=(0,g.default)(o);e.send("addGlyphs",{glyphs:s},function(e,o){var s=JSON.parse(o.mapping),l=r(t.geometries,s,i),u=a(l,s,i);n&&n(u)})}function r(t,e,n){var i=[];return t.forEach(function(t,o){if(t.position){var r=n(t),a=r.text;if(a){var s=(0,x.default)(a),l=[0],u=0;i.push({geometry:t,geometryIndex:o}),s.forEach(function(n,r){var s={letter:n,index:r,offsets:l,len:a.length,geometry:t,geometryIndex:o},c=e[n];u+=c?c.width:k,l.push(u),i.push(s)})}}}),i}function a(t,e,n){var i=t.length,o=new Float32Array(3*i),r=new Float32Array(2*i),a=new Uint16Array(2*i),f=new Float32Array(4*i),d=new Float32Array(4*i),h=new Uint8ClampedArray(4*i),v=new Uint8ClampedArray(4*i),p=new Uint8ClampedArray(i),m=new Uint8ClampedArray(3*i),_=new Float32Array(3*i),g=new Uint8ClampedArray(i),y=0,x=0,b=0,S=0,T=0,P=0,I=0,k=0,L=0,M=0,C=0,R=[];return t.forEach(function(t){var N=n(t.geometry),B=e[t.letter],O=0;B||(O=1),g[L]=O,L+=1;var D=new A.default(N.color).toUpArray(),z=new A.default(N.strokeColor).toUpArray(),V=new A.default(N.backgroundColor,{defaultColor:"rgba(0, 0, 0, 0)"}).toUpArray(),F=new A.default(N.borderColor,{defaultColor:"rgba(0, 0, 0, 0)"}).toUpArray(),U=t.geometry.position,Y="lat"in U&&"lng"in U,j=(0,w.splitLatLngNumber)(U.lng||0),G=(0,w.splitLatLngNumber)(U.lat||0),Z=U.height;o[y]=j.high,y+=1,o[y]=G.high,y+=1,o[y]=Z,y+=1,r[x]=j.low,x+=1,r[x]=G.low,x+=1,a[b]=N.size,b+=1,a[b]=N.size,b+=1,s({type:O,info:t,style:N,instanceInfos:f,infoIndex:S,letterRect:B}),S+=4,l({style:N,type:O,instanceFrames:d,letterRect:B,letterCount:i,frameIndex:T}),T+=4,u({styleColor:D,bgColor:V,type:O,isValidPosition:Y,instanceColors:h,colorIndex:P}),P+=4,u({styleColor:z,bgColor:F,type:O,isValidPosition:Y,instanceColors:v,colorIndex:I}),I+=4,p[k]=1,k+=1;var H=(0,E.encodePickingColor)(t.geometryIndex);Y?(m[M]=H[0],M+=1,m[M]=H[1],M+=1,m[M]=H[2],M+=1):(m[M]=0,M+=1,m[M]=0,M+=1,m[M]=0,M+=1),_[C]=N.offset.x,C+=1,_[C]=N.offset.y,C+=1,_[C]=1,C+=1;var W=t.geometryIndex,X=t.len,Q=t.index;if(R[W])R[W].lettersCount+=1,R[W].widthSum+=B.width,R[W].fontSize=R[W].fontSize||B&&B.fontSize;else{var q=t.geometry;R[W]={geometryIndex:W,geometry:q,style:N,lettersCount:1,fontSize:B&&B.fontSize,widthSum:B&&B.width||0}}if(Q===X-1&&B){R[W].heightSum=R[W].heightSum||B.height;var J=c(N,X),K=J.styleWidth,$=J.styleHeight,tt=K*B.fontSize/N.size,et=$*B.fontSize/N.size;R[W].widthSum=Math.max(R[W].widthSum,tt),R[W].heightSum=Math.max(R[W].heightSum,et)}}),{count:i,instancePositionList:o,instancePosition64xyLowList:r,instanceSizeList:a,instanceInfoList:f,instanceFrameList:d,instanceColorList:h,instanceStrokeColorList:v,instanceShowList:p,instanceTypeList:g,instancePickingColorList:m,instancePixelOffsetList:_,labelInfoList:R}}function s(t){var e=t.type,n=t.info,i=t.style,o=t.instanceInfos,r=t.letterRect,a=t.infoIndex;if(e)return o[a]=i.borderRadius,a+=1,o[a]=0,a+=1,o[a]=i.angle,a+=1,o[a]=1,void(a+=1);var s=n.offsets[n.offsets.length-1],l=n.offsets[n.index];o[a]=(i.alignment-1)*s/2+r.width/2+l||0,a+=1,o[a]=r.height/2*i.verticalAlignment||0,a+=1,o[a]=i.angle,a+=1,o[a]=1,a+=1}function l(t){var e=t.instanceFrames,n=t.type,i=t.style,o=t.letterRect,r=t.letterCount,a=t.frameIndex;if(n){var s=c(i,r),l=s.styleWidth,u=s.styleHeight;return l&&u?(e[a]=i.borderWidth,a+=1,e[a]=i.borderWidth,a+=1,e[a]=l+2*i.borderWidth||0,a+=1,e[a]=u+2*i.borderWidth||0,void(a+=1)):(e[a]=0,a+=1,e[a]=0,a+=1,e[a]=0,a+=1,e[a]=0,void(a+=1))}e[a]=o.x||0,a+=1,e[a]=o.y||0,a+=1,e[a]=o.width||0,a+=1,e[a]=o.height||0,a+=1}function u(t){var e=t.type,n=t.styleColor,i=t.isValidPosition,o=t.instanceColors,r=t.bgColor,a=t.colorIndex;if(e)return o[a]=i?r[0]:0,a+=1,o[a]=i?r[1]:0,a+=1,o[a]=i?r[2]:0,a+=1,o[a]=i?r[3]:0,void(a+=1);o[a]=i?n[0]:0,a+=1,o[a]=i?n[1]:0,a+=1,o[a]=i?n[2]:0,a+=1,o[a]=i?n[3]:0,a+=1}function c(t,e){var n=t.height,i=t.width;if((!n||!i)&&t.padding){var o=d(t.padding,"padding"),r=o.widthPadding,a=o.heightPadding;n=t.size+2*a,i=t.size*(e-1)+2*r}return{styleHeight:n,styleWidth:i}}function f(t,e,n){return(void 0===t?"undefined":(0,m.default)(t))!==e?n:t}function d(t,e){function n(t){var e=t.match(/\d+\px/);return(0,v.default)(e,1)[0].slice(0,-2)}try{var i=t.split(" ");return{heightPadding:n(i[0]),widthPadding:n(i[1]||i[0])}}catch(t){return console.error(e+"样式设置无法解析"),{wiheightPadding:0,widthPadding:0}}}Object.defineProperty(e,"__esModule",{value:!0});var h=n(30),v=i(h),p=n(20),m=i(p),_=n(18),g=i(_),y=n(95),x=i(y),b=n(15),S=i(b),w=n(118),E=n(254),T=n(223),A=i(T),P=n(388),I=i(P),k=32,L={left:1,center:0,right:-1},M={top:1,middle:0,bottom:-1},C=new I.default;C.text="",e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=function(e){var n=t.styles[e.styleId];return n.text=e.content||w,n},o=[];(0,p.default)(t.styles).forEach(function(e){t.styles[e].src&&o.push(t.styles[e].src)});var a={};t.geometries.forEach(function(t){var e=i(t),n=e.text;n&&(0,h.default)(n).forEach(function(t){a[t]=1})});var s=(0,p.default)(a);e.send("addMarkers",{markerSrcs:o,glyphs:s},function(e,o){var a=JSON.parse(o.mapping),s=r(t.geometries,a,i);n&&n(s)})}function r(t,e,n){var i=s(t,e,n),o=i.length,r=new Float32Array(3*o),u=new Float32Array(2*o),c=new Uint16Array(2*o),d=new Float32Array(4*o),h=new Float32Array(4*o),v=new Uint8ClampedArray(3*o),p=new Float32Array(3*o),g=new Uint8ClampedArray(4*o),x=new Uint8ClampedArray(4*o),b=new Uint16Array(o),S=new Uint8ClampedArray(o),w=new Uint8ClampedArray(o),E=0,T=0,A=0,P=0,I=0,k=0,L=0,M=0,C=0,R=0,N=0,B=0,O=[];return i.forEach(function(t){var i=n(t.geometry),o=t.geometry.position,s=(0,m.splitLatLngNumber)(o.lng),D=(0,m.splitLatLngNumber)(o.lat),z=o.height;r[E]=s.high,E+=1,r[E]=D.high,E+=1,r[E]=z,E+=1,u[T]=s.low,T+=1,u[T]=D.low,T+=1;var V=null;if(t.src)V=e[t.src],c[A]=parseInt(i.width,10),A+=1,c[A]=parseInt(i.height,10),A+=1,d[P]=i.width/2-i.anchor.x,P+=1,d[P]=i.height/2-i.anchor.y,P+=1,d[P]=t.geometry.properties&&"$angle"in t.geometry.properties?t.geometry.properties.$angle:i.rotate,P+=1,d[P]=i.faceTo,P+=1,p[L]=0,L+=1,p[L]=0,L+=1,p[L]=i.opacity,L+=1,w[B]=0,B+=1;else{V=e[t.letter],c[A]=i.size,A+=1,c[A]=i.size,A+=1;var F=t.offsets[t.offsets.length-1],U=t.offsets[t.index];d[P]=V.width/2+U-F/2,P+=1,d[P]=0,P+=1,d[P]=0,P+=1,d[P]=1,P+=1;var Y=l(t,V,i);p[L]=Y.x+i.offset.x,L+=1,p[L]=Y.y+i.offset.y,L+=1,p[L]=1,L+=1,t.offsetToMarkerCenter={x:Y.x+i.offset.x,y:Y.y+i.offset.y},w[B]=1,B+=1}h[I]=V.x,I+=1,h[I]=V.y,I+=1,h[I]=V.width,I+=1,h[I]=V.height,I+=1;var j=new y.default(i.color).toUpArray(),G=new y.default(i.strokeColor).toUpArray(),Z=(0,f.default)(j,4);g[M]=Z[0],g[M+1]=Z[1],g[M+2]=Z[2],g[M+3]=Z[3],M+=4;var H=(0,f.default)(G,4);x[C]=H[0],x[C+1]=H[1],x[C+2]=H[2],x[C+3]=H[3],C+=4,b[R]=i.strokeWidth,R+=1,S[N]=1,N+=1;var W=(0,_.encodePickingColor)(t.geometryIndex),X=(0,f.default)(W,3);v[k]=X[0],v[k+1]=X[1],v[k+2]=X[2],k+=3,a(t,i,V,O)}),{count:o,instancePositionList:r,instancePosition64xyLowList:u,instanceSizeList:c,instanceInfoList:d,instanceFrameList:h,instancePickingColorList:v,instancePixelOffsetList:p,instanceColorList:g,instanceStrokeColorList:x,instanceStrokeWidthList:b,instanceShowList:S,instanceTypeList:w,labelInfoList:O}}function a(t,e,n,i){var o=t.geometryIndex;if(i[o])i[o].lettersCount+=1;else{var r=t.geometry;i[o]={geometryIndex:o,geometry:r,style:e,markerWidth:0,markerHeight:0,fontSize:S,labelWidthSum:0,lettersCount:1,offsetToMarkerCenter:{x:0,y:0}}}t.src?(i[o].markerWidth=n.width,i[o].markerHeight=n.height):(i[o].fontSize=n.fontSize,i[o].labelWidthSum+=n.width,i[o].offsetToMarkerCenter=t.offsetToMarkerCenter)}function s(t,e,n){var i=[];return t.forEach(function(t,o){if(t.position){var r=n(t);i.push({src:r.src,geometry:t,geometryIndex:o});var a=r.text;if(a){var s=(0,h.default)(a),l=[0],u=0;s.forEach(function(n,r){var s={letter:n,index:r,offsets:l,len:a.length,geometry:t,geometryIndex:o},c=e[n];u+=c?c.width:b,l.push(u),i.push(s)})}}}),i}function l(t,e,n){var i=u({x:0-n.anchor.x,y:0-n.anchor.y},n.rotate),o=u({x:n.width-n.anchor.x,y:0-n.anchor.y},n.rotate),r=u({x:0-n.anchor.x,y:n.height-n.anchor.y},n.rotate),a=u({x:n.width-n.anchor.x,y:n.height-n.anchor.y},n.rotate),s=Math.min(i.x,o.x,r.x,a.x),l=Math.max(i.x,o.x,r.x,a.x),c=Math.min(i.y,o.y,r.y,a.y),f=Math.max(i.y,o.y,r.y,a.y),d=n.size/e.height,h=t.offsets[t.offsets.length-1],v=h/2*d,p=e.height/2*d,m=(s+l)/2,_=(c+f)/2;switch(n.direction){case 0:break;case 1:_=c-p;break;case 2:_=f+p;break;case 3:m=s-v;break;case 4:m=l+v}return{x:m,y:_}}function u(t,e){var n=new x.Vector4(t.x,t.y,0,1),i=(new x.Matrix4).setRotate(-e,0,0,1),o=i.multiplyVector4(n);return{x:o.elements[0],y:o.elements[1]}}Object.defineProperty(e,"__esModule",{value:!0});var c=n(30),f=i(c),d=n(95),h=i(d),v=n(18),p=i(v),m=n(118),_=n(254),g=n(223),y=i(g),x=n(94),b=32,S=24,w="";e.default=o},function(t,e,n){"use strict";function i(t){var e=t.geometries.map(function(t){return t.paths||[]}),n=new o.PolygonParseHelper({complexPolygons:e,IndexType:Uint32Array});n.updatePositions({fp64:!0});var i=n.getPositions();return{indices:n.getIndices(),positions:i,positions64xyLow:n.getPositions64xyLow()}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(327);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return new m.default(t).toUpArray()}function r(t,e){var n=function(e){var n=t.styles[e]||x,i=o(n.color),r=o(n.borderColor),a=o(n.eraseColor);return{color:i.slice(0,3),borderColor:r.slice(0,3),width:n.width,borderWidth:n.borderWidth?2*n.borderWidth+n.width:0,opacity:i[3],borderOpacity:r[3],lineCap:n.lineCap||0,dashArray:n.dashArray,arrowInfo:n.arrowInfo,eraseColor:a.slice(0,3),eraseOpacity:a[3],enableBloom:n.enableBloom}};t.geometries.forEach(function(n){var i=n.rainbowPaths;if(i&&i.length>0){var o=[],r=[],s=!0,l=!1,u=void 0;try{for(var f,h=(0,d.default)(i.entries());!(s=(f=h.next()).done);s=!0){var v=(0,c.default)(f.value,2),p=v[0],m=v[1];if(p>0){var g=i[p-1].path,y=g[g.length-1],x=m.path[0];if(y.lat===x.lat&&y.lng===x.lng){var b=(0,_.deduplicatePoint)(m.path.slice(1));o[o.length-1]=o[o.length-1].concat(b);var S=r[r.length-1],w=S[S.length-1].end;S.push({color:m.color,borderColor:m.borderColor,start:w,end:o[o.length-1].length-1})}else o.push((0,_.deduplicatePoint)(m.path)),r.push([{color:m.color,borderColor:m.borderColor,start:0,end:m.path.length-1}])}else o.push((0,_.deduplicatePoint)(m.path)),r.push([{color:m.color,borderColor:m.borderColor,start:0,end:m.path.length-1}])}}catch(t){l=!0,u=t}finally{try{!s&&h.return&&h.return()}finally{if(l)throw u}}n.paths=o,n.styleIdList=r}else{if((0,_.isSimple)(n.paths)&&t._eraseOpts[n.id]){var E=t._eraseOpts[n.id],p=E.index,T=E.point,A=n.paths.slice(p-1,p+1);if(A.length){var P=a(A[0],A[1],T,p),I=P.ptArr,k=P.crossIndex,L=P.type;t._eraseOpts[n.id].crossOpts={ptArr:I,crossIndex:k,type:L},"start"===L||"end"===L||n.paths.splice(k,0,{lat:I[0],lng:I[1],height:0})}}n.paths=(0,_.normalize)(n.paths),e&&(n.paths=n.paths.map(function(t){return(0,_.cross180)(t)}))}});var i=t.geometries.reduce(function(t,e){return t+e.paths.reduce(function(t,e){return t+e.length-1},0)},0),r=new Float32Array(3*i),s=new Float32Array(3*i),l=new Float32Array(3*i),u=new Float32Array(3*i),f=new Float32Array(4*i),p=new Uint8ClampedArray(4*i),m=new Uint8ClampedArray(4*i),g=new Uint8ClampedArray(3*i),y=new Float32Array(1*i),b=new Float32Array(1*i),S=new Uint8ClampedArray(4*i),w=new Uint8ClampedArray(4*i),E=0,T=0,A=0,P=0,I=0,k=0,L=0,M=0,C=0,R=0;return t.geometries.forEach(function(e,i){var a=n(e.styleId),c=t._eraseOpts[e.id]||null,d=a.color,_=a.opacity,x=a.borderColor,N=a.borderOpacity;e.paths.forEach(function(t,n){for(var B=t[0],O=0;O<t.length;O++)!function(O){if(e.rainbowPaths){var D=e.styleIdList[n].find(function(t){return O>=t.start&&O<=t.end});if(D.color){var z=o(D.color);a.color=z.slice(0,3),a.opacity=z[3]}else a.color=d,a.opacity=_;if(D.borderColor){var V=o(D.borderColor);a.borderColor=V.slice(0,3),a.borderOpacity=V[3]}else a.borderColor=x,a.borderOpacity=N}var F=t[O],U=(0,h.splitLatLngNumber)(F.lat),Y=(0,h.splitLatLngNumber)(F.lng);if(O<t.length-1){r[E]=Y.high,E+=1,r[E]=U.high,E+=1,r[E]=F.height,E+=1,l[A]=F.lng-B.lng,A+=1,l[A]=F.lat-B.lat,A+=1,l[A]=0,A+=1,B=F;var j=t[O+1],G=(0,h.splitLatLngNumber)(j.lat),Z=(0,h.splitLatLngNumber)(j.lng);f[I]=Y.low,I+=1,f[I]=U.low,I+=1,f[I]=Z.low,I+=1,f[I]=G.low,I+=1}if(O>0){var H=t[O+1];H||(H=F),s[T]=Y.high,T+=1,s[T]=U.high,T+=1,s[T]=F.height,T+=1,u[P]=H.lng-F.lng,P+=1,u[P]=H.lat-F.lat,P+=1,u[P]=0,P+=1}if(O>0){1===e.paths.length&&c&&c.crossOpts.crossIndex>=O?(p[k]=a.eraseColor[0],m[k]=a.eraseColor[0],k+=1,p[k]=a.eraseColor[1],m[k]=a.eraseColor[1],k+=1,p[k]=a.eraseColor[2],m[k]=a.eraseColor[2],k+=1,p[k]=a.eraseOpacity,m[k]=a.eraseOpacity,k+=1):(p[k]=a.color[0],m[k]=a.borderColor[0],k+=1,p[k]=a.color[1],m[k]=a.borderColor[1],k+=1,p[k]=a.color[2],m[k]=a.borderColor[2],k+=1,p[k]=a.opacity,m[k]=a.borderOpacity,k+=1);var W=(0,v.encodePickingColor)(i);g[3*L+0]=W[0],g[3*L+1]=W[1],g[3*L+2]=W[2],L+=1,S[C]=a.lineCap,C+=1,S[C]=a.dashArray[0],C+=1,S[C]=a.dashArray[1],C+=1,S[C]=a.enableBloom,C+=1,y[M]=a.width,b[M]=a.borderWidth,M+=1,w[R]=a.arrowInfo[0],R+=1,w[R]=a.arrowInfo[1],R+=1,w[R]=a.arrowInfo[2],R+=1,w[R]=a.arrowInfo[3],R+=1}}(O)})}),{instanceStartPositionList:r,instanceEndPositionList:s,instanceLeftDeltaList:l,instanceRightDeltaList:u,instanceStartEndPostions64xyLowList:f,instanceColorList:p,instanceBorderColorList:m,instancePickingColorList:g,instanceWidthList:y,instanceBorderWidthList:b,instanceLineInfoList:S,instanceArrowInfoList:w,enableGeodesic:e,count:i}}function a(t,e,n,i){var o=l(t),r=l(e),a=l(n),u=[r[0]-o[0],r[1]-o[1]],c=[a[0]-o[0],a[1]-o[1]],f=s(c,u);if(f<=0)return{ptArr:t,crossIndex:i-1,type:"start"};var d=s(u,u);if(d<=f)return{ptArr:e,crossIndex:i,type:"end"};if(!(Math.abs(u[0]*c[1]-c[0]*u[1])<=.3))return{ptArr:e,crossIndex:i,type:"end"};var h=f/d,v=[o[0]+h*u[0],o[1]+h*u[1]];return{ptArr:[v[1],v[0]],crossIndex:i,type:"middle"}}function s(t,e){return t[0]*e[0]+t[1]*e[1]}function l(t){return[t.lng,t.lat]}Object.defineProperty(e,"__esModule",{value:!0});var u=n(30),c=i(u),f=n(27),d=i(f),h=n(118),v=n(254),p=n(223),m=i(p),_=n(475),g=n(334),y=i(g),x=new y.default;e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){if(t.getLng()<e.getLng()){n.getLng()>=0?t.lng=180:e.lng=-179.9999}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),s=n(1),l=i(s),u=n(45),c=i(u),f=n(155),d=i(f),h=n(394),v=i(h),p=n(473),m=i(p),_=function(){function t(e,n){(0,a.default)(this,t),this.geometries=e.map(function(t){return t.position=c.default.convert(t.position),t}),this.clusters=[],this.minimumClusterSize=n.minimumClusterSize,this.gridSize=n.gridSize,this.averageCenter=n.averageCenter,this.projection=new v.default}return(0,l.default)(t,[{key:"createClusters",value:function(t){var e=this,n=t.zoom>t.maxZoom;(t.resetCluster||n)&&this._resetClusters();var i=t.pixelsPerDegree,o=new d.default(c.default.convert(t.mapBounds.sw),c.default.convert(t.mapBounds.ne)),r=this._getExtendedBounds(o,t.zoom);return this.geometries.filter(function(t){return r.contains(t.position)&&!t.hasCluster}).forEach(function(o){n?(e._createNewCluster(o,t.zoom),o.hasCluster=!0):e._addToClosestCluster(o,i,t.zoom)}),this.clusters.forEach(function(t){t.getGeometries().length<e.minimumClusterSize&&e._breakUpCluster(t)}),this.clusters=this.clusters.filter(function(t){return t.getGeometries().length}),this.clusters.map(function(t){return t.getClusterInfo()})}},{key:"_resetClusters",value:function(){this.clusters.forEach(function(t){return t.remove()}),this.clusters=[],this.geometries.forEach(function(t){return delete t.hasCluster})}},{key:"_addToClosestCluster",value:function(t,e,n){var i=null,o=4e3;this.clusters.filter(function(e){return e.isInBounds(t)}).forEach(function(n){var r=n.getCenter();if(r){var a=(r.lng-t.position.lng)*e[0],s=(r.lat-t.position.lat)*e[1],l=Math.sqrt(a*a+s*s);l<o&&(o=l,i=n)}}),i&&i.isInBounds(t)?i.add(t):this._createNewCluster(t,n),t.hasCluster=!0}},{key:"_createNewCluster",value:function(t,e){var n=new m.default(this,e);n.add(t),this.clusters.push(n)}},{key:"_getExtendedBounds",value:function(t,e){var n=t.getNorthEast(),i=t.getSouthWest(),r=this.projection.latLngToCoord(n,e),a=this.projection.latLngToCoord(i,e);r.x+=this.gridSize,r.y-=this.gridSize,a.x-=this.gridSize,a.y+=this.gridSize;var s=this.projection.coordToLatLng(r,e),l=this.projection.coordToLatLng(a,e);return o(s,l,t.getCenter()),new d.default(l,s)}},{key:"_breakUpCluster",value:function(t){var e=this;t.getGeometries().length<2||(t.getGeometries().forEach(function(n){e._createNewCluster(n,t.zoom)}),t.remove())}}]),t}();e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(641),p=i(v),m=n(474),_=i(m),g=function(t){function e(){(0,s.default)(this,e);var t=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return t.materials={escalator2:[.34999999403954,.34999999403954,.34999999403954],escalator3:[1,1,1]},t}return(0,h.default)(e,t),(0,u.default)(e,[{key:"parse",value:function(t){var e=this,n=(0,_.default)(t),i=n.meshes;i.forEach(function(t){var n=t.materials[0]&&t.materials[0].name;if(n){for(var i=new Float32Array(t.attributes.POSITION.value.length),o=0;o<i.length;o+=3)i[o]=e.materials[n][0],i[o+1]=e.materials[n][1],i[o+2]=e.materials[n][2];t.attributes.COLOR_0={size:3,value:i}}});var o=i.reduce(function(t,e){return t+e.header.vertexCount},0);return{mode:4,vertexCount:o,attributes:this.mergeAttributes(i,o)}}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=(0,E.latLng2Mercator)(t.x||t.lng,t.y||t.lat),i=new A.default;return i.x=n.x-e.x,i.y=n.y-e.y,i}function r(t,e){return o((0,E.pixels2LongLat)(t.x,t.y),e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(27),s=i(a),l=n(95),u=i(l),c=n(255),f=i(c),d=n(18),h=i(d),v=n(15),p=i(v),m=n(23),_=i(m),g=n(30),y=i(g),x=n(0),b=i(x),S=n(1),w=i(S),E=n(378),T=n(65),A=i(T),P=n(45),I=i(P),k=n(10),L=i(k),M=n(784),C=i(M),R=n(394),N=i(R),B=n(326),O=n(377),D=n(277),z=function(){function t(e,n){(0,b.default)(this,t),this.buildingId=e,this.dataView=n.buffer,this.zoom=20,this.areaCenter=(0,E.latLng2Mercator)(n.areaCenter.lng,n.areaCenter.lat),this.floorInfo=n.floorInfo,this.selectedFloorNum=n.selectedFloorNum,this.indoorStyle=n.indoorStyle,this.projection=new N.default,this._initialize()}return(0,w.default)(t,[{key:"_initialize",value:function(){var t=this,e=(0,y.default)(this.floorInfo.bounds,2),n=e[0],i=e[1],r=[new I.default(i.lat,n.lng),n,new I.default(n.lat,i.lng),i],a=r.map(function(e){return o(e,t.areaCenter)}),s={displayType:2,gateNum:0,gates:[],height:0,point:a,regionId:"",brickness:1},l=this._translateLatLngForSingleRegion(s,0,!0,null,0);l.isWall=!1,this._boundsRegion=l}},{key:"parseBuilding",value:function(){var t=this.buildingId,e=new DataView(this.dataView.buffer),n=0,i={};i.Attribute_size=e.getInt32(n,!0),n+=4,i.Data_size=e.getInt32(n,!0),n+=4,i.Topology_size=e.getInt32(n,!0),n+=4,i.Name_CN_size=e.getUint8(n,!0),n+=1,i.Name_CN=String.fromCharCode.apply(String,(0,_.default)(new Uint16Array(e.buffer.slice(n,n+i.Name_CN_size)))),n+=i.Name_CN_size,i.DefaultFloor=e.getUint8(n,!0),n+=1,i.Floor_num=e.getUint8(n,!0),n+=1,i.Floor_str_size=e.getUint8(n,!0),n+=1;for(var o=[],r=0;r<i.Floor_str_size;r++){var a=e.getUint8(n,!0);o.push(a),n+=1}i.floorStr=String.fromCharCode.apply(null,o);for(var s=[],l=0;l<4;l++){var u=e.getInt32(n,!0);s.push(u),n+=4}i.Floor_num=e.getInt32(n,!0),n+=4;for(var c=[],f=0;f<i.Floor_num;f++){var d=e.getInt32(n,!0);c.push(d),n+=4}for(var h=[],v=[],p=[],m=[],g=[],y=[],x=[],b=[],S=[],w=[],E=[],T=0;T<i.Floor_num;T++)if(T===this.selectedFloorNum+1){var A=T,P=[],I=[],k=[],L=[],M=[],C=[],R=[],N=[],B=[],O=[],D=A,z=e.getInt32(n,!0);n+=4;for(var V=[],F=0;F<z;F++){var U={},Y=e.getInt32(n,!0);n+=4;var j=e.getInt32(n,!0);U.type=Y,U.size=j,V.push(U),n+=4}for(var G=0;G<z;G++){var Z=V[G].type,H=V[G].size,W=G;if(9===Z){var X=this._parseFloorPointLayer(e,n,D,{nowFloorPoints22:L,nowFloorPoints21:M,nowFloorPoints20:C,nowFloorPoints19:R,nowFloorPoints18:N,nowFloorPoints17:B,nowFloorPoints16:O});n+=H,L=X.nowFloorPoints22,M=X.nowFloorPoints21,C=X.nowFloorPoints20,R=X.nowFloorPoints19,N=X.nowFloorPoints18,B=X.nowFloorPoints17,O=X.nowFloorPoints16}else if(4===Z){var Q=this._parseFloorRegionLayer(e,n,G);n+=H;var q=Q.nowLayerRegions,J=Q.nowLayerEscalatorRegions;0===I.length&&P.push({styleId:q.styleId,points:[this._boundsRegion],layerId:W}),J.length>0&&k.push.apply(k,(0,_.default)(J)),I.push(q)}else if(11===Z){n+=H;continue}}for(var K=[],$=0;$<4;$++){var tt=e.getUint8(n,!0);K.push(tt),n+=1}p[A]=P,h[A]=I,v[A]=k,x[A]=this._refactorFloorPoints(C,t,A),b[A]=this._refactorFloorPoints(R,t,A),S[A]=this._refactorFloorPoints(N,t,A),w[A]=this._refactorFloorPoints(B,t,A),E[A]=this._refactorFloorPoints(O,t,A);var et={};et.zoom22=g,et.zoom21=y,et.zoom20=x,et.zoom19=b,et.zoom18=S,et.zoom17=w,et.zoom16=E}else n+=c[T];return i.floorBoundsData=p,i.buildingData=h,i.buildingEscalator=v,i.buildingPoint=et,i.buildingLine=m,i}},{key:"_parseFloorPointLayer",value:function(t,e,n,i){var o=i.nowFloorPoints22,r=i.nowFloorPoints21,a=i.nowFloorPoints20,s=i.nowFloorPoints19,l=i.nowFloorPoints18,u=i.nowFloorPoints17,c=i.nowFloorPoints16;e+=2,e+=2;var f=t.getInt32(e,!0);e+=4;for(var d=[],h=[],v=0;v<f;v++){var p={},m=(0,E.readUint24)(new Uint8Array(t.buffer.slice(e,e+3))),g=4095&m;g^=65536,p.classCode=g;var y=m>>12&15,x=m>>16&255;e+=3;var b=t.getUint16(e,!0);e+=2,p.hPoi_count=b;var S=t.getInt32(e,!0);e+=4,p.poiPriority=S;var w=t.getUint8(e,!0);e+=1,p.Strace=w;var T={};T.strace16=1&w,T.strace17=2&w,T.strace18=4&w,T.strace19=8&w,T.strace20=16&w,T.strace21=32&w,T.strace22=64&w,p.zoomStrace=T;var A=t.getUint32(e,!0);e+=4,p.direct=A;var P=String.fromCharCode.apply(String,(0,_.default)(new Uint16Array(t.buffer.slice(e,e+2*y))));e+=2*y,p.Name_str1=P;var I=x-y,k=String.fromCharCode.apply(String,(0,_.default)(new Uint16Array(t.buffer.slice(e,e+2*I))));h.push(k),e+=2*I,p.Name_str2=k,d.push(p)}for(var M=[],C=0;C<d.length;C++)for(var R=d[C].hPoi_count,N=0;N<R;N++){var B=t.getInt32(e,!0);e+=4;var O=t.getInt32(e,!0);e+=4;var D=(0,E.pixels2LongLat)(B,O);M.push(D)}var z=new Uint8Array(t.buffer.slice(e,e+4));z=String.fromCharCode.apply(null,z),z=z.toUpperCase(),e+=4;var V=[];if("EXPH"===z)for(var F=0;F<f;F++){var U=t.getUint16(e,!0);e+=2,V.push(U)}z=new Uint8Array(t.buffer.slice(e,e+4)),z=String.fromCharCode.apply(null,z),z=z.toUpperCase(),e+=4;var Y=[];if("EXNR"===z){for(var j=[],G=0;G<f;G++){var Z=t.getUint16(e,!0);e+=2;for(var H=15&Z,W=[],X=0;X<H;X++)W.push(t.getUint8(e,!0)),e+=1;j.push(W)}for(var Q=0;Q<j.length;Q++){for(var q=[],J=j[Q],K=0;K<J.length;K++){var $=new Uint16Array(t.buffer.slice(e,e+2*J[K])),tt=String.fromCharCode.apply(null,$);q.push(tt),e+=2*J[K]}Y.push(q)}}for(var et=0;et<M.length;et++){for(var nt={},it=[],ot=d[et].hPoi_count,rt=0;rt<ot;rt++);var at="";d[et].Name_str2&&(at="\\"+d[et].Name_str2),it.push(M[et]),nt.points=it,nt.styleId=d[et].classCode,nt.rank=d[et].poiPriority,nt.uuid=L.default.uniqueId(),nt.text=d[et].Name_str1+at,nt.buildingId=this.buildingId;var st=d[et].zoomStrace;if(0!==st.strace20){var lt=d[et].direct;lt=lt>>16&15;var ut=(0,E.extendCopy)(nt);ut.direct=lt;var ct=V[et],ft=this._translateLatLngPointForSinglePoint(ut,ct,n,a.length);a.push(ft)}if(0!==st.strace19){var dt=d[et].direct;dt=dt>>12&15;var ht=(0,E.extendCopy)(nt);ht.direct=dt;var vt=V[et],pt=this._translateLatLngPointForSinglePoint(ht,vt,n,s.length);s.push(pt)}if(0!==st.strace18){var mt=d[et].direct;mt=mt>>8&15;var _t=(0,E.extendCopy)(nt);_t.direct=mt;var gt=V[et],yt=this._translateLatLngPointForSinglePoint(_t,gt,n,l.length);l.push(yt)}if(0!==st.strace17){var xt=d[et].direct;xt=xt>>4&15;var bt=(0,E.extendCopy)(nt);bt.direct=xt;var St=V[et],wt=this._translateLatLngPointForSinglePoint(bt,St,n,u.length);u.push(wt)}if(0!==st.strace16){var Et=d[et].direct;Et&=15;var Tt=(0,E.extendCopy)(nt);Tt.direct=Et;var At=V[et],Pt=this._translateLatLngPointForSinglePoint(Tt,At,n,c.length);c.push(Pt)}}return{offset:e,nowFloorPoints22:o,nowFloorPoints21:r,nowFloorPoints20:a,nowFloorPoints19:s,nowFloorPoints18:l,nowFloorPoints17:u,nowFloorPoints16:c}}},{key:"_parseFloorRegionLayer",value:function(t,e,n){var i=this,o={};e+=2;var a=t.getUint16(e,!0);e+=2,e+=4;var s=t.getInt32(e,!0);e+=4;for(var l=[],u=0;u<s;u++){var c=t.getInt32(e,!0);l.push(c),e+=4}for(var f=[],d={},h=0,v=0;v<s;v++){d[v]={},d[v].start=h;var m=t.getUint16(e,!0);f.push(m),h+=m,d[v].end=h,e+=2}for(var g=[],y=0;y<h;y++){var x=t.getUint32(e,!0);e+=4;var b=t.getUint32(e,!0);e+=4;var S={x:x,y:b};g.push(S)}var w=new Uint8Array(t.buffer.slice(e,e+4));w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4;var E=[];if("EXPI"===w){for(var T=[],A=0;A<s;A++){var P=t.getUint8(e,!0);T.push(P),e+=1}for(var I=0;I<T.length;I++){var k=T[I],L=String.fromCharCode.apply(String,(0,_.default)(new Uint8Array(t.buffer.slice(e,e+k))));E.push(L),e+=T[I]}}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EXMP"===w)for(var M=0;M<g.length;M++){var C=t.getUint8(e,!0);e+=1;var R=t.getUint8(e,!0);e+=1,g[M].x+=C/100,g[M].y+=R/100}for(var N=[],B=0,O=0;O<f.length;O++){var D=void 0;D=0===O?g.slice(O,f[O]):g.slice(B,B+f[O]),B+=f[O],N.push(D)}for(var z=[],V=0;V<N.length;V++){var F=N[V].map(function(t){return r(t,i.areaCenter)}),U=E[V],Y={point:F,height:l[V],regionId:U};z.push(Y)}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EX3D"===w)for(var j=0;j<z.length;j++){var G=t.getInt8(e,!0);e+=1;var Z=t.getUint8(e,!0);e+=1;var H=t.getUint8(e,!0);e+=1;var W=t.getInt16(e,!0);e+=2;var X=t.getUint16(e,!0);e+=2;var Q=t.getUint16(e,!0);e+=2;var q=t.getUint32(e,!0);e+=4;var J=t.getUint32(e,!0);e+=4,z[j].height=G/10,z[j].displayType=Z,z[j].brickness=H,z[j].angle=W,z[j].rectWidth=X,z[j].rectHeight=Q,z[j].centerX=q,z[j].centerY=J}if(w=new Uint8Array(t.buffer.slice(e,e+4)),w=String.fromCharCode.apply(null,w),w=w.toUpperCase(),e+=4,"EXGT"===w)for(var K=0;K<z.length;K++){var $=z[K],tt=t.getUint16(e,!0);if(e+=2,$.gateNum=tt,$.gates=[],tt>0){for(var et=0;et<tt;et++){var nt={};nt.hasCelling=!!t.getUint8(e,!0),e+=1,$.gates.push(nt)}for(var it=0;it<tt;it++){var ot=$.gates[it];ot.pt=[{},{}];for(var rt=0;rt<2;rt++)ot.pt[rt].x=t.getUint32(e,!0),e+=4,ot.pt[rt].y=t.getUint32(e,!0),e+=4,ot.pt[rt].x+=t.getUint8(e,!0)/100,e+=1,ot.pt[rt].y+=t.getUint8(e,!0)/100,e+=1}}}for(var at=[],st=[],lt=0;lt<z.length;lt++){var ut=z[lt],ct=null;if(1===ut.displayType)ct=this._translateLatLngForSingleRegion(ut,n,!1);else{if(4===ut.displayType){st.push(ut);continue}var ft=this._extrudePolygon(ut.point,0===n?0:1,.2,function(t,e,n){return 0===e?n[n.length-1]:n[e-1]},function(t,e,n){return e===n.length-1?n[0]:n[e+1]}),dt=(0,p.default)({},ut,{point:ft});ct=this._translateLatLngForSingleRegion(dt,0,!0,null,0===n?0:.5)}ct.originRegion=ut,ct.isWall=!1,at.push(ct)}var ht=this._getWallRegions(at,n);return o.styleId=196608^a,o.points=[].concat(at,(0,_.default)(ht)),o.layerId=n,{offset:e,nowLayerRegions:o,nowLayerEscalatorRegions:st}}},{key:"_getWallRegions",value:function(t,e){for(var n=this,i=[],o=t,r=o.slice(),a=0;a<r.length;a++){(function(t){var o=r[t],a=o.originRegion;if(2!==a.displayType)return"continue";var s=a.point,l=s[0],u=s;u[0].x===u[u.length-1].x&&u[0].y===u[u.length-1].y||u.push(u[0]),(0,E.isClockWise)(u)&&u.reverse();var c={},f=a.gates.map(function(t){return{hasCelling:t.hasCelling,pt:t.pt.map(function(t){var e=(0,E.pixels2LongLat)(t.x,t.y),i=(0,E.latLng2Mercator)(e.x,e.y),o={};return o.x=i.x-n.areaCenter.x,o.y=i.y-n.areaCenter.y,new A.default(o.x,o.y)})}}).filter(function(t){var e=t.pt.reduce(function(t,e){return""+t+e.x+"+"+e.y+";"},"");if(!c[e])return c[e]=!0,!0}),d=[[]],h=0;u.forEach(function(t,e){if(e!==u.length-1){d[h].push(t);var n=u[e+1],i=n.clone().sub(t),o=i.clone().normalize(),r=[];f.forEach(function(e){var a=e.pt[1].clone().sub(e.pt[0]),s=a.clone().normalize(),l=Math.abs(i.x*a.y-a.x*i.y),u=l<=.3,c=e.pt[0].x>=Math.min(t.x,n.x)&&e.pt[0].x<=Math.max(t.x,n.x)&&e.pt[0].y>=Math.min(t.y,n.y)&&e.pt[0].y<=Math.max(t.y,n.y)&&e.pt[1].x>=Math.min(t.x,n.x)&&e.pt[1].x<=Math.max(t.x,n.x)&&e.pt[1].y>=Math.min(t.y,n.y)&&e.pt[1].y<=Math.max(t.y,n.y);if(u&&c){var f=e.pt.slice();o.dot(s)+1<.1&&f.reverse(),r.push(f)}}),r.sort(function(e,n){return e[0].clone().sub(t).lengthSq()-n[0].clone().sub(t).lengthSq()});var a=[];r.forEach(function(t){if(0===a.length)a.push(t);else{var e=a[a.length-1];(Math.abs(t[0].x-e[0].x)>.1||Math.abs(t[0].y-e[0].y)>.1)&&a.push(t)}}),a.forEach(function(t){d[h].push(t[0]),h+=1,d[h]=[t[1]]})}}),d[h].push(l);var v=null;if(d.length>1){var m=d[0],g=m[0],y=d[d.length-1],x=y[y.length-1];x.x===g.x&&x.y===g.y&&(d.shift(),y.pop(),y.push.apply(y,(0,_.default)(m)))}v=d.map(function(t){var i=t,o=i.slice().reverse(),r=n._extrudePolygon(o,0===e?1:-1,.2,function(t,e,n){return 0===e?1===d.length?n[n.length-2]:t:n[e-1]},function(t,e,n){return e===n.length-1?1===d.length?n[1]:t:n[e+1]}),a=[].concat((0,_.default)(i),(0,_.default)(r));return(0,E.isClockWise)(a)&&0===e&&a.reverse(),a}),v.forEach(function(t){var e=(0,p.default)({},a);e.point=t;var o=n._translateLatLngForSingleRegion(e,1,!1,t.holeIndecies);o.height/=10,o.isWall=!0,i.push(o)})})(a)}return i}},{key:"_extrudePolygon",value:function(t,e,n,i,o){var r=t;return r.map(function(t,a){var s=i(t,a,r),l=o(t,a,r),u=t.clone().sub(s).normalize(),c=l.clone().sub(t).normalize(),f=new A.default(-u.y,u.x),d=new A.default(-c.y,c.x),h=0===a?d:f,v=u.clone().add(c).normalize(),p=new A.default(-v.y,v.x),m=Math.abs(p.dot(h)),_=p.clone().mult(e).mult(n/(Math.abs(m-0)<.1?1:m));return t.clone().add(_)})}},{key:"getEscalatorAttributes",value:function(t){var e=this,n=new Float32Array(2*t.length),i=new Int16Array(4*t.length);return t.forEach(function(t,o){var r=(0,E.pixels2LongLat)(t.centerX,t.centerY),a=(0,E.latLng2Mercator)(r.x,r.y);n[2*o]=a.x-e.areaCenter.x,n[2*o+1]=a.y-e.areaCenter.y,i[4*o]=t.rectWidth,i[4*o+1]=t.rectHeight,i[4*o+2]=t.height,i[4*o+3]=t.angle}),{instanceCoordsTypeArray:n,instanceInfosTypeArray:i,count:t.length}}},{key:"getTopGeometryAttributes",value:function(t){var e=this,n=this.zoom,i=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.point&&e.point.length||0)},0)},0),o=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.top&&e.index.top.length||0)},0)},0),r=o>65535?new Uint32Array(o):new Uint16Array(o),a=new Float32Array(i),s=new Uint8ClampedArray(i),l=0,u=0;t.forEach(function(t){var i=t.styleId,o=(0,B.getStyle)(i,n,e.indoorStyle);o&&t.points.forEach(function(t){if(!t._fail){var e=l,n=u;t.index.top&&(t.index.top.forEach(function(t,i){r[n+i]=t+e/3}),t.point.forEach(function(n,i){a[e+i]=n,s[e+i]=t.isWall?o.topStyle[i%3]:o.bottomStyle[i%3]}),u+=t.index.top.length,l+=t.point.length)}})});var c=this._computeNormals(a,r);return{color:s,position:a,index:r,normal:c}}},{key:"getSidesGeometryAttributes",value:function(t){var e=this,n=this.zoom,i=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.sides&&6*e.index.sides.length*3||0)},0)},0),o=t.reduce(function(t,e){return t+e.points.reduce(function(t,e){return t+(e.index.sides&&6*e.index.sides.length||0)},0)},0),r=o>65535?new Uint32Array(o):new Uint16Array(o),a=new Float32Array(i),s=new Uint8ClampedArray(i),l=0,u=0;t.forEach(function(t){var i=t.styleId,o=(0,B.getStyle)(i,n,e.indoorStyle);o&&t.points.forEach(function(t){if(!t._fail){var e=l,n=u;if(t.index.sides){var i=t.index.top,c=Math.max.apply(null,i||[0]);t.index.sides.forEach(function(i,l){var u=t.isWall&&c>0&&i.every(function(t){return t>c?t-c>=c/2:t>=c/2});i.forEach(function(i,c){var f=t.point[3*i],d=t.point[3*i+1],h=t.point[3*i+2],v=e+6*l*3+3*c;a[v+0]=f,a[v+1]=d,a[v+2]=h,s[v+0]=u?o.insideStyle[0]:o.outsideStyle[0],s[v+1]=u?o.insideStyle[1]:o.outsideStyle[1],s[v+2]=u?o.insideStyle[2]:o.outsideStyle[2];var p=e/3+6*l+c;r[n+6*l+c]=p})}),l+=6*t.index.sides.length*3,u+=6*t.index.sides.length}}})});var c=this._computeNormals(a,r);return{color:s,position:a,index:r,normal:c}}},{key:"getBuildingPointInfo",value:function(t){var e=this.indoorStyle,n={},i="",o=[];(0,h.default)(t).forEach(function(r){var a=parseInt(r.replace("zoom",""),10);n[r]=[],t[r].forEach(function(t,s){return n[r][s]=[],t.directs.map(function(l,u){var c=t.styleIds[u],f=t.texts[u],d=t.ranks[u],h=t.positions.slice(3*u,3*u+3),v=(0,B.getStyle)(c,a,e);if(v){var p=(0,B.getStyle)(v.labelid,a,e);if(p){var m=v.icon_offset,_=null,g=p.fontSize,y=p.font,x=(0,E.getPoiDrawInfo)(c,a,l,e);x.drawIcon&&(_=O.ConfigUtil.getIconSrc(m),o.push(_)),i+=f;var b={direct:l,styleId:c,text:f,rank:d,font:y,fontSize:g,position:[h[0],h[1],h[2]],iconSrc:_,drawInfo:x};n[r][s].push(b)}}})}),n[r].shift()});var r=new f.default(i.split("")),a=(0,u.default)(r),s=new f.default(o);return o=(0,u.default)(s),{pointInfoSet:n,glyphList:a,iconSrcList:o}}},{key:"parseInstanceBuildingPoint",value:function(t,e,n,i){var o=this.indoorStyle;return(0,h.default)(t).forEach(function(r){var a=parseInt(r.replace("zoom",""),10);t[r].filter(function(t){return!!t}).forEach(function(t,r){var s=0,l=[],c=[],f=[],d=[],h=[],v=[],p=i[a][r];t.forEach(function(t,i){var r=p[i],m=(0,B.getStyle)(t.styleId,a,o),g=(0,B.getStyle)(m.labelid,a,o);if(r.forEach(function(e){return e.rank=t.rank}),t.drawInfo.drawIcon){var y=e[t.iconSrc];if(y){var x=O.INDOOR_ICON_SIZE/2,b=O.INDOOR_ICON_SIZE/2;l.push(t.position[0],t.position[1],0),c.push(O.INDOOR_ICON_SIZE,O.INDOOR_ICON_SIZE,x,b),f.push(y.x,y.y,y.width,y.height),d.push(0,1,-1,1),h.push(1,1,1,1),v.push(0,0,0,0),r.iconSymbolIndex=s,s+=1}}t.drawInfo.drawLabel&&r.forEach(function(e){var i=e.anchor,o=e.textBounds,r=o.w,a=o.h,p=new Uint16Array(e.text.length),m=e.text.length,y=[0],x=0,b=0;(0,u.default)(e.text).forEach(function(e){var i=t.fontSize/n[e].fontSize;x=y[y.length-1]+n[e].width*i,b=Math.max(b,n[e].height*i),y.push(x)});for(var S=Math.max(1,x/r,b/a),w={x:x/2-i.x*S,y:b/2-i.y*S},E=0;E<m;E++){var T=n[e.text[E]],A=t.fontSize/T.fontSize;l.push(t.position[0],t.position[1],0),c.push(T.width*A,T.height*A,w.x-y[E],w.y),f.push(T.x,T.y,T.width,T.height),d.push(0,1,0,1),h.push.apply(h,(0,_.default)(g.fillStyle)),v.push.apply(v,(0,_.default)(g.strokeStyle)),p[E]=s,s+=1}e.textSymbolIndexList=p,e.instance_trans=t.position,e.instance_coords=[x,b,w.x,w.y]})});var m=new Float32Array(l),g=new Float32Array(c),y=new Float32Array(f),x=new Float32Array(d),b=new Uint8ClampedArray(h),S=new Uint8ClampedArray(v);p.instance={isIndoor:!0,instanceTransTypeArray:m,instanceCoordsTypeArray:g,instanceTextBoundsTypeArray:y,instanceInfosTypeArray:x,instanceColorsTypeArray:b,instanceStrokeColorsTypeArray:S,count:d.length/4}})}),i}},{key:"_computeNormals",value:function(t,e){var n=t,i=new Float32Array(t.length),o=void 0,r=void 0,a=void 0,s=C.default.create(),l=C.default.create(),u=C.default.create(),c=C.default.create(),f=C.default.create();if(e)for(var d=e,h=0;h<d.length;h+=3)o=3*d[h+0],r=3*d[h+1],a=3*d[h+2],s[0]=n[o+0],s[1]=n[o+1],s[2]=n[o+2],l[0]=n[r+0],l[1]=n[r+1],l[2]=n[r+2],u[0]=n[a+0],u[1]=n[a+1],u[2]=n[a+2],C.default.subtract(c,u,l),C.default.subtract(f,s,l),C.default.cross(c,c,f),i[o]+=c[0],i[o+1]+=c[1],i[o+2]+=c[2],i[r]+=c[0],i[r+1]+=c[1],i[r+2]+=c[2],i[a]+=c[0],i[a+1]+=c[1],i[a+2]+=c[2];else for(var v=0;v<n.length;v+=9)s[0]=n[v+0],s[1]=n[v+1],s[2]=n[v+2],l[0]=n[v+3],l[1]=n[v+4],l[2]=n[v+5],u[0]=n[v+6],u[1]=n[v+7],u[2]=n[v+8],C.default.subtract(c,u,l),C.default.subtract(f,s,l),C.default.cross(c,c,f),i[o]+=c[0],i[o+1]+=c[1],i[o+2]+=c[2],i[r]+=c[0],i[r+1]+=c[1],i[r+2]+=c[2],i[a]+=c[0],i[a+1]+=c[1],i[a+2]+=c[2];for(var p=C.default.create(),m=0;m<i.length;m+=3)p[0]=i[m+0],p[1]=i[m+1],p[2]=i[m+2],C.default.normalize(p,p),i[m+0]=p[0],i[m+1]=p[1],i[m+2]=p[2];return i}},{key:"_translateLatLngPointForSinglePoint",value:function(t,e,n){var i=(0,p.default)({},t),o=i.points[0],r=(0,E.latLng2Mercator)(o.x,o.y);return i.points=[{x:r.x-this.areaCenter.x,y:r.y-this.areaCenter.y,z:e}],i.height=this.poiHeight/9,i.floorId=n,i}},{key:"_translateLatLngForSingleRegion",value:function(t,e,n,i,o){var r=e,a="",l=t,u=l.height,c=t,f=c.regionId;t=t.point;var d={},h=[],v=[];d.height=u;var p="";if(t.length>=3&&(0===r?(p="bottom",a="floor"):p="other",h=this.cutTrianleRegion(t,p,i)),"bottom"!==p&&!n){var m=!0,_=!1,g=void 0;try{for(var y,x=(0,s.default)(t);!(m=(y=x.next()).done);m=!0){var b=y.value;v.push(b.x),v.push(b.y),v.push(u)}}catch(t){_=!0,g=t}finally{try{!m&&x.return&&x.return()}finally{if(_)throw g}}}var S=!0,w=!1,E=void 0;try{for(var T,A=(0,s.default)(t);!(S=(T=A.next()).done);S=!0){var P=T.value;v.push(P.x),v.push(P.y),v.push(o||0)}}catch(t){w=!0,E=t}finally{try{!S&&A.return&&A.return()}finally{if(w)throw E}}return d.index={top:h.top||"",sides:h.sides||"",bottom:h.bottom||""},d.point=v,d.type=a,d.regionId=f,d}},{key:"cutTrianleRegion",value:function(t,e,n){var i=t,o=[],r=!0,a=!1,l=void 0;try{for(var u,c=(0,s.default)(i);!(r=(u=c.next()).done);r=!0){var f=u.value;o.push(f.x),o.push(f.y)}}catch(t){a=!0,l=t}finally{try{!r&&c.return&&c.return()}finally{if(a)throw l}}var d=n&&n.length>0?D(o,n):D(o);if("bottom"===e)return{top:d};var h=[],v=!0,p=!1,m=void 0;try{for(var _,g=(0,s.default)(d);!(v=(_=g.next()).done);v=!0){var y=_.value;h.push(y+i.length)}}catch(t){p=!0,m=t}finally{try{!v&&g.return&&g.return()}finally{if(p)throw m}}for(var x=[],b=0;b<i.length;b++){var S=[];S.push(b),S.push(b+i.length),S.push((b+1)%i.length),S.push(b+i.length),S.push(b===i.length-1?b+1:b+i.length+1),S.push((b+1)%i.length),x.push(S)}return{top:d,sides:x,bottom:h}}},{key:"_translateLatLngForSingleLine",value:function(t){var e=[],n=!0,i=!1,o=void 0;try{for(var r,a=(0,s.default)(t);!(n=(r=a.next()).done);n=!0){var l=r.value,u=(0,E.latLng2Mercator)(l.x,l.y);u.x=u.x-this.areaCenter.x,u.y=u.y-this.areaCenter.y;var c={};c.x=u.x,c.y=u.y,c.z=0,e.push(c)}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e}},{key:"_refactorFloorPoints",value:function(t,e,n){var i={buildingId:e,floorId:n,positions:new Float32Array(3*t.length),styleIds:new Uint32Array(t.length),poiIds:[],texts:[],ranks:[],heights:new Uint32Array(t.length),directs:new Uint32Array(t.length),uuids:[]};return t.forEach(function(t,e){i.positions[3*e]=t.points[0].x,i.positions[3*e+1]=t.points[0].y,i.positions[3*e+2]=t.points[0].z,i.styleIds[e]=t.styleId,i.poiIds.push(t.poiId),i.texts.push(t.text),i.ranks.push(t.rank),i.heights[e]=t.height,i.directs[e]=t.direct,i.uuids.push(t.uuid)}),i}}]),t}();e.default=z},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.STYLE=function(){return{regionStyles:{196609:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:0,maxScaleVal:22,color_side:-1118482,color_border:0,bottom_color:-1}],196610:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-1,bottom_color:-1}],196611:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196612:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-203803,maxScaleVal:22,color_side:-1520948,color_border:-1520948,bottom_color:-203803}],196613:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196614:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3283714,maxScaleVal:22,color_side:-5519384,color_border:-5519384,bottom_color:-3283714}],196615:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196616:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196617:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196618:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-855310,maxScaleVal:22,color_side:-2039584,color_border:-2039584,bottom_color:-855310}],196619:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196620:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2698028,maxScaleVal:22,color_side:-2039584,color_border:-2039584,bottom_color:-2698028}],196621:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196622:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196623:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3283714,maxScaleVal:22,color_side:-5519384,color_border:-5519384,bottom_color:-3283714}],196624:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196625:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196626:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1316376,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1316376}],196627:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2170631,maxScaleVal:22,color_side:-4012824,color_border:-4012824,bottom_color:-2170631}],196628:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2170631,maxScaleVal:22,color_side:-4012824,color_border:-4012824,bottom_color:-2170631}],196629:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196630:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196631:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196632:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196633:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-202279,maxScaleVal:22,color_side:-1191237,color_border:-1191237,bottom_color:-202279}],196634:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1117483,maxScaleVal:22,color_side:-3025487,color_border:-3025487,bottom_color:-1117483}],196635:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1316376,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1316376}],196636:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196637:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196638:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196639:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-1545,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1545}],196640:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-1545,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-1545}],196641:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196642:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-459272,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-459272}],196643:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-656385,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-656385}],196644:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196645:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196646:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-66569,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-66569}],196647:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-66569,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-66569}],196648:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-328961,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-328961}],196649:[{outside_color:-2039584,minScaleVal:16,sidewidth:1,top_color:-1,color_fill:-2953734,maxScaleVal:22,color_side:-5712919,color_border:-5712919,bottom_color:-2953734}],196650:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196651:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-657931,maxScaleVal:22,color_side:-1644826,color_border:-6513508,bottom_color:-657931}],196652:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196653:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-135449,maxScaleVal:22,color_side:-859430,color_border:-859430,bottom_color:-135449}],196654:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-135449,maxScaleVal:22,color_side:-859430,color_border:-859430,bottom_color:-135449}],196655:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196656:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1378325,maxScaleVal:22,color_side:-2101793,color_border:-2101793,bottom_color:-1378325}],196657:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-1969153,maxScaleVal:22,color_side:-2889739,color_border:-2889739,bottom_color:-1969153}],196658:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196659:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196660:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-199962,maxScaleVal:22,color_side:-858152,color_border:-858152,bottom_color:-199962}],196661:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-199962,maxScaleVal:22,color_side:-858152,color_border:-858152,bottom_color:-199962}],196662:[{outside_color:-2039584,minScaleVal:19,sidewidth:1,top_color:-1,color_fill:-986625,maxScaleVal:22,color_side:-1776139,color_border:-1776139,bottom_color:-986625}],196663:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-596290,maxScaleVal:22,color_side:-596290,color_border:-1,bottom_color:-596290}],196664:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3289606,maxScaleVal:22,color_side:-3289606,color_border:-1,bottom_color:-3289606}],196665:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4861953,maxScaleVal:22,color_side:-4861953,color_border:-1,bottom_color:-4861953}],196666:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-5513217,maxScaleVal:22,color_side:-5513217,color_border:-1,bottom_color:-5513217}],196667:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4656129,maxScaleVal:22,color_side:-4656129,color_border:-1,bottom_color:-4656129}],196668:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4984092,maxScaleVal:22,color_side:-4984092,color_border:-1,bottom_color:-4984092}],196669:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4069182,maxScaleVal:22,color_side:-4069182,color_border:-1,bottom_color:-4069182}],196670:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1972315,maxScaleVal:22,color_side:-1972315,color_border:-1,bottom_color:-1972315}],196671:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-663120,maxScaleVal:22,color_side:-663120,color_border:-1,bottom_color:-663120}],196672:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-337216,maxScaleVal:22,color_side:-337216,color_border:-1,bottom_color:-337216}],196673:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-796706,maxScaleVal:22,color_side:-796706,color_border:-1,bottom_color:-796706}],196674:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-863247,maxScaleVal:22,color_side:-863247,color_border:-1,bottom_color:-863247}],196675:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-2108430,maxScaleVal:22,color_side:-2108430,color_border:-1,bottom_color:-2108430}],196676:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1514785,maxScaleVal:22,color_side:-1514785,color_border:-1,bottom_color:-1514785}],196677:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-596290,maxScaleVal:22,color_side:-596290,color_border:-1,bottom_color:-596290}],196678:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-3289606,maxScaleVal:22,color_side:-3289606,color_border:-1,bottom_color:-3289606}],196679:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4861953,maxScaleVal:22,color_side:-4861953,color_border:-1,bottom_color:-4861953}],196680:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-5513217,maxScaleVal:22,color_side:-5513217,color_border:-1,bottom_color:-5513217}],196681:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4656129,maxScaleVal:22,color_side:-4656129,color_border:-1,bottom_color:-4656129}],196682:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4984092,maxScaleVal:22,color_side:-4984092,color_border:-1,bottom_color:-4984092}],196683:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-4069182,maxScaleVal:22,color_side:-4069182,color_border:-1,bottom_color:-4069182}],196684:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-1972315,maxScaleVal:22,color_side:-1972315,color_border:-1,bottom_color:-1972315}],196685:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-663120,maxScaleVal:22,color_side:-663120,color_border:-1,bottom_color:-663120}],196686:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-337216,maxScaleVal:22,color_side:-337216,color_border:-1,bottom_color:-337216}],196687:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-796706,maxScaleVal:22,color_side:-796706,color_border:-1,bottom_color:-796706}],196688:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-329739,maxScaleVal:22,color_side:-1186079,color_border:-4543842,bottom_color:-329739}],196689:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196690:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196691:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196692:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196693:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-265762,maxScaleVal:22,color_side:-1648708,color_border:-1648708,bottom_color:-265762}],196694:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-6710887,color_fill:-1,maxScaleVal:22,color_side:-1118482,color_border:-6710887,bottom_color:-1}],196695:[{outside_color:-2039584,minScaleVal:16,sidewidth:.2,top_color:-1,color_fill:-265762,maxScaleVal:22,color_side:-1648708,color_border:-1648708,bottom_color:-265762}]},labelStyles:{262145:[{font_size:0,maxScaleVal:18,effect:5,font_weight:0,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:0,maxScaleVal:19,effect:5,font_weight:0,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:0,maxScaleVal:22,effect:5,font_weight:0,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262146:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262147:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:1}],262148:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262149:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262150:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-16743471,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-16743471,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16743471,minScaleVal:20,background_color:-1,effect_size:1}],262151:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-3050966,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-3050966,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-3050966,minScaleVal:20,background_color:-1,effect_size:1}],262152:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11564867,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11564867,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11564867,minScaleVal:20,background_color:-1,effect_size:.9}],262153:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262154:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-8288957,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:20,background_color:-1,effect_size:.9}],262155:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-10847555,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-10847555,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-10847555,minScaleVal:20,background_color:-1,effect_size:.9}],262156:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:1}],262157:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11052612,minScaleVal:0,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-11052612,minScaleVal:19,background_color:-1,effect_size:1},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11052612,minScaleVal:22,background_color:-1,effect_size:1}],262158:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-10008623,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-10008623,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-10008623,minScaleVal:20,background_color:-1,effect_size:1}],262159:[{font_size:13,maxScaleVal:17,effect:5,font_weight:1,font_color:-16743471,minScaleVal:0,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-16743471,minScaleVal:18,background_color:-1,effect_size:1},{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16743471,minScaleVal:20,background_color:-1,effect_size:1}],262160:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-10847555,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-10847555,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-10847555,minScaleVal:22,background_color:-1,effect_size:.9}],262161:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-11385024,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:20,background_color:-1,effect_size:.9}],262162:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262163:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262164:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262165:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262166:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-12878512,minScaleVal:0,background_color:-1,effect_size:.9}],262167:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262168:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262169:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262170:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262171:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262172:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262173:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262174:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262175:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7248559,minScaleVal:0,background_color:-1,effect_size:.9}],262176:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262177:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-12878512,minScaleVal:0,background_color:-1,effect_size:.9}],262178:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13278798,minScaleVal:0,background_color:-1,effect_size:.9}],262179:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262180:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262181:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262182:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7182279,minScaleVal:0,background_color:-1,effect_size:.9}],262183:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262184:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262185:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11844161,minScaleVal:0,background_color:-1,effect_size:.9}],262186:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-13870145,minScaleVal:0,background_color:-1,effect_size:.9}],262187:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-15305788,minScaleVal:0,background_color:-1,effect_size:.9}],262188:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-16739907,minScaleVal:0,background_color:-1,effect_size:.9}],262189:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-14250907,minScaleVal:0,background_color:-1,effect_size:.9}],262190:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-12480718,minScaleVal:0,background_color:-1,effect_size:.9}],262191:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7568090,minScaleVal:0,background_color:-1,effect_size:.9}],262192:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-5013962,minScaleVal:0,background_color:-1,effect_size:.9}],262193:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-4559043,minScaleVal:0,background_color:-1,effect_size:.9}],262194:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-6204330,minScaleVal:0,background_color:-1,effect_size:.9}],262195:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7583631,minScaleVal:0,background_color:-1,effect_size:.9}],262196:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-9223276,minScaleVal:0,background_color:-1,effect_size:.9}],262197:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-7568770,minScaleVal:0,background_color:-1,effect_size:.9}],262198:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262199:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262200:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262201:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262202:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262203:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262204:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262205:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262206:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262207:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262208:[{font_size:12,maxScaleVal:22,effect:5,font_weight:0,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262209:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262210:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4687280,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:19,effect:5,font_weight:1,font_color:-4687280,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4687280,minScaleVal:20,background_color:-1,effect_size:.9}],262211:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-16752231,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262212:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-4023420,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262213:[{font_size:14,maxScaleVal:19,effect:5,font_weight:1,font_color:-10057525,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:20,background_color:16777215,effect_size:0}],262214:[{font_size:14,maxScaleVal:18,effect:5,font_weight:1,font_color:-11848551,minScaleVal:0,background_color:1291845631,effect_size:1},{font_size:0,maxScaleVal:22,effect:5,font_weight:1,font_color:0,minScaleVal:19,background_color:16777215,effect_size:0}],262215:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11844161,minScaleVal:0,background_color:-1,effect_size:.9}],262216:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-13870145,minScaleVal:0,background_color:-1,effect_size:.9}],262217:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-15305788,minScaleVal:0,background_color:-1,effect_size:.9}],262218:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-16739907,minScaleVal:0,background_color:-1,effect_size:.9}],262219:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-14250907,minScaleVal:0,background_color:-1,effect_size:.9}],262220:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-12480718,minScaleVal:0,background_color:-1,effect_size:.9}],262221:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7568090,minScaleVal:0,background_color:-1,effect_size:.9}],262222:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-5013962,minScaleVal:0,background_color:-1,effect_size:.9}],262223:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-4559043,minScaleVal:0,background_color:-1,effect_size:.9}],262224:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-6204330,minScaleVal:0,background_color:-1,effect_size:.9}],262225:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7583631,minScaleVal:0,background_color:-1,effect_size:.9}],262226:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-9223276,minScaleVal:0,background_color:-1,effect_size:.9}],262227:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-7568770,minScaleVal:0,background_color:-1,effect_size:.9}],262228:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262229:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262230:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262231:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262232:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262233:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262234:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262235:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262236:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262237:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262238:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-11777112,minScaleVal:0,background_color:-1,effect_size:.9}],262239:[{font_size:12,maxScaleVal:18,effect:5,font_weight:1,font_color:-4756097,minScaleVal:0,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:21,effect:5,font_weight:1,font_color:-4756097,minScaleVal:19,background_color:-1,effect_size:.9},{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-4756097,minScaleVal:22,background_color:-1,effect_size:.9}],262240:[{font_size:10,maxScaleVal:18,effect:4,font_weight:0,font_color:-1,minScaleVal:0,background_color:-8411598,effect_size:1},{font_size:10,maxScaleVal:19,effect:4,font_weight:0,font_color:-1,minScaleVal:19,background_color:-8411598,effect_size:1},{font_size:10,maxScaleVal:22,effect:4,font_weight:0,font_color:-1,minScaleVal:20,background_color:-8411598,effect_size:1}],262241:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-4023420,minScaleVal:0,background_color:1291845631,effect_size:1}],262242:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-11385024,minScaleVal:0,background_color:-1,effect_size:.9}],262243:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9}],262244:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-8288957,minScaleVal:0,background_color:-1,effect_size:.9}],262245:[{font_size:12,maxScaleVal:22,effect:5,font_weight:1,font_color:-6127544,minScaleVal:0,background_color:-1,effect_size:.9}],262246:[{font_size:14,maxScaleVal:22,effect:5,font_weight:1,font_color:-5923176,minScaleVal:0,background_color:1291845631,effect_size:1}]},lineStyles:{131072:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}],131073:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:2,width:1,dash_space:2,has_dash:1}],131074:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131075:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-6052957,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131076:[{linelevel:0,has_side:1,minScaleVal:20,sidewidth:1,joinround:1,color_fill:-2894893,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:1,dash_space:0,has_dash:0}],131077:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}],131078:[{linelevel:0,has_side:1,minScaleVal:16,sidewidth:1.5,joinround:1,color_fill:-6313288,maxScaleVal:16,color_side:0,joincap:0,dash_length:0,width:1.5,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:17,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:18,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0},{linelevel:0,has_side:1,minScaleVal:19,sidewidth:3.2,joinround:1,color_fill:-6313288,maxScaleVal:22,color_side:0,joincap:0,dash_length:0,width:3.2,dash_space:0,has_dash:0}]},pointStyles:{65537:[{icon_offset:0,maxScaleVal:22,minScaleVal:16,labelid:262153,density:6}],65538:[{icon_offset:1,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65539:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:2,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65540:[{icon_offset:16,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:16,maxScaleVal:22,minScaleVal:19,labelid:262243,density:0}],65541:[{icon_offset:4,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65542:[{icon_offset:5,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65543:[{icon_offset:6,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:6,maxScaleVal:22,minScaleVal:18,labelid:262153,density:0}],65544:[{icon_offset:7,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65545:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:8,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65546:[{icon_offset:9,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65547:[{icon_offset:10,maxScaleVal:22,minScaleVal:16,labelid:262245,density:0}],65548:[{icon_offset:11,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65549:[{icon_offset:12,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65550:[{icon_offset:13,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65551:[{icon_offset:14,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65552:[{icon_offset:15,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65553:[{icon_offset:16,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:16,maxScaleVal:22,minScaleVal:19,labelid:262243,density:0}],65554:[{icon_offset:17,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65555:[{icon_offset:18,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65556:[{icon_offset:19,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65557:[{icon_offset:109,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65558:[{icon_offset:21,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65559:[{icon_offset:22,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65560:[{icon_offset:23,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65561:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:24,maxScaleVal:22,minScaleVal:19,labelid:262244,density:0}],65562:[{icon_offset:25,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65563:[{icon_offset:26,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:26,maxScaleVal:22,minScaleVal:18,labelid:262153,density:0}],65564:[{icon_offset:27,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65565:[{icon_offset:28,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:28,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65566:[{icon_offset:29,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:29,maxScaleVal:22,minScaleVal:20,labelid:262154,density:0}],65567:[{icon_offset:30,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:30,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65568:[{icon_offset:31,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65569:[{icon_offset:32,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65570:[{icon_offset:33,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65571:[{icon_offset:34,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:34,maxScaleVal:22,minScaleVal:19,labelid:262244,density:0}],65572:[{icon_offset:35,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65573:[{icon_offset:36,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:36,maxScaleVal:22,minScaleVal:19,labelid:262153,density:0}],65574:[{icon_offset:37,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:37,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65575:[{icon_offset:38,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65576:[{icon_offset:39,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65577:[{icon_offset:40,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:40,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65578:[{icon_offset:41,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65579:[{icon_offset:143,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:143,maxScaleVal:22,minScaleVal:18,labelid:262239,density:0}],65580:[{icon_offset:43,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65581:[{icon_offset:44,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:44,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65582:[{icon_offset:45,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65583:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:46,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65584:[{icon_offset:47,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:47,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65585:[{icon_offset:48,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65586:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262147,density:0}],65587:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65588:[{icon_offset:49,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65589:[{icon_offset:50,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65590:[{icon_offset:52,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65591:[{icon_offset:53,maxScaleVal:22,minScaleVal:16,labelid:262155,density:0}],65592:[{icon_offset:54,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:54,maxScaleVal:22,minScaleVal:19,labelid:262153,density:0}],65593:[{icon_offset:82,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65594:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:149,maxScaleVal:22,minScaleVal:20,labelid:262156,density:0}],65595:[{icon_offset:84,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65596:[{icon_offset:85,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65597:[{icon_offset:55,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65598:[{icon_offset:56,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:56,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],65599:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262148,density:0}],65600:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262149,density:0}],65601:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262150,density:0}],65602:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262151,density:0}],65603:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:109,maxScaleVal:19,minScaleVal:19,labelid:262145,density:0},{icon_offset:109,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65604:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65605:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:110,maxScaleVal:22,minScaleVal:19,labelid:262152,density:0}],65606:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:111,maxScaleVal:22,minScaleVal:18,labelid:262155,density:0}],65607:[{icon_offset:112,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65608:[{icon_offset:113,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65609:[{icon_offset:114,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65610:[{icon_offset:115,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65611:[{icon_offset:116,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65612:[{icon_offset:117,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65613:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65614:[{icon_offset:132,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65615:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65616:[{icon_offset:118,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65617:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65618:[{icon_offset:116,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65619:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65620:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65621:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65622:[{icon_offset:115,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65623:[{icon_offset:120,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65624:[{icon_offset:119,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65625:[{icon_offset:121,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65626:[{icon_offset:122,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65627:[{icon_offset:123,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65628:[{icon_offset:124,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65629:[{icon_offset:125,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65630:[{icon_offset:126,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65631:[{icon_offset:127,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65632:[{icon_offset:128,maxScaleVal:22,minScaleVal:16,labelid:262154,density:0}],65633:[{icon_offset:129,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65634:[{icon_offset:130,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65635:[{icon_offset:131,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65636:[{icon_offset:133,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65637:[{icon_offset:134,maxScaleVal:22,minScaleVal:16,labelid:262157,density:0}],65638:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262158,density:0}],65639:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262159,density:0}],65640:[{icon_offset:136,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65641:[{icon_offset:137,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65642:[{icon_offset:138,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65643:[{icon_offset:139,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65644:[{icon_offset:140,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65645:[{icon_offset:141,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65646:[{icon_offset:140,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],65647:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],65648:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262162,density:0}],65649:[{icon_offset:143,maxScaleVal:22,minScaleVal:16,labelid:262163,density:0}],65650:[{icon_offset:143,maxScaleVal:22,minScaleVal:16,labelid:262164,density:0}],65651:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262165,density:0}],65652:[{icon_offset:145,maxScaleVal:22,minScaleVal:16,labelid:262166,density:0}],65653:[{icon_offset:146,maxScaleVal:22,minScaleVal:16,labelid:262167,density:0}],65654:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262168,density:0}],65655:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262169,density:0}],65656:[{icon_offset:144,maxScaleVal:22,minScaleVal:16,labelid:262170,density:0}],65657:[{icon_offset:144,maxScaleVal:22,minScaleVal:16,labelid:262171,density:0}],65658:[{icon_offset:147,maxScaleVal:22,minScaleVal:16,labelid:262172,density:0}],65659:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],65660:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262173,density:0}],65661:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262174,density:0}],65662:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262175,density:0}],65663:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262176,density:0}],65664:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262177,density:0}],65665:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262178,density:0}],65666:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262179,density:0}],65667:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262180,density:0}],65668:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262181,density:0}],65669:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262182,density:0}],65670:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262183,density:0}],65671:[{icon_offset:42,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],65672:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262185,density:0}],65673:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262186,density:0}],65674:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262187,density:0}],65675:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262188,density:0}],65676:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262189,density:0}],65677:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262190,density:0}],65678:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262191,density:0}],65679:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262192,density:0}],65680:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262193,density:0}],65681:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262194,density:0}],65682:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262195,density:0}],65683:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262196,density:0}],65684:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:8,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65685:[{icon_offset:40,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65686:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:29,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65687:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:46,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65688:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65689:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65690:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262197,density:0}],65691:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262198,density:0}],65692:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262199,density:0}],65693:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262200,density:0}],65694:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262201,density:0}],65695:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262202,density:0}],65696:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262203,density:0}],65697:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262204,density:0}],65698:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262205,density:0}],65699:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262206,density:0}],65700:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262207,density:0}],65701:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262208,density:0}],65702:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262211,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65703:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262212,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65704:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262213,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:20,labelid:262145,density:0}],65705:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262214,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262145,density:0}],65706:[{icon_offset:-1,maxScaleVal:22,minScaleVal:16,labelid:262145,density:0}],65707:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262215,density:0}],65708:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262216,density:0}],65709:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262217,density:0}],65710:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262218,density:0}],65711:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262219,density:0}],65712:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262220,density:0}],65713:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262221,density:0}],65714:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262222,density:0}],65715:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262223,density:0}],65716:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262224,density:0}],65717:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262225,density:0}],65718:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262226,density:0}],65719:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262227,density:0}],65720:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262228,density:0}],65721:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262229,density:0}],65722:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262230,density:0}],65723:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262231,density:0}],65724:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262232,density:0}],65725:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262233,density:0}],65726:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262234,density:0}],65727:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262235,density:0}],65728:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262236,density:0}],65729:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262237,density:0}],65730:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262238,density:0}],65731:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:51,maxScaleVal:22,minScaleVal:18,labelid:262156,density:0}],65732:[{icon_offset:148,maxScaleVal:22,minScaleVal:16,labelid:262156,density:0}],65733:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:50,maxScaleVal:22,minScaleVal:20,labelid:262156,density:0}],65734:[{icon_offset:150,maxScaleVal:22,minScaleVal:16,labelid:262156,density:0}],65735:[{icon_offset:-1,maxScaleVal:17,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:18,labelid:262241,density:0}],65736:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:143,maxScaleVal:22,minScaleVal:19,labelid:262239,density:0}],65737:[{icon_offset:13,maxScaleVal:22,minScaleVal:16,labelid:262239,density:0}],65738:[{icon_offset:-1,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:109,maxScaleVal:22,minScaleVal:20,labelid:262153,density:0}],65739:[{icon_offset:110,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:110,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],65740:[{icon_offset:29,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:-1,maxScaleVal:22,minScaleVal:19,labelid:262246,density:0}],65741:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:152,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],65742:[{icon_offset:-1,maxScaleVal:18,minScaleVal:16,labelid:262145,density:0},{icon_offset:152,maxScaleVal:22,minScaleVal:19,labelid:262245,density:0}],66437:[{icon_offset:57,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:57,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66438:[{icon_offset:58,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:58,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66439:[{icon_offset:59,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:59,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66440:[{icon_offset:60,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:60,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66441:[{icon_offset:61,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:61,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66442:[{icon_offset:62,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:62,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66443:[{icon_offset:63,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:63,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66444:[{icon_offset:64,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:64,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66445:[{icon_offset:65,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:65,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66446:[{icon_offset:66,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:66,maxScaleVal:22,minScaleVal:20,labelid:262155,density:0}],66447:[{icon_offset:67,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:67,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66448:[{icon_offset:68,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],66449:[{icon_offset:69,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}],66450:[{icon_offset:70,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:70,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66451:[{icon_offset:71,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66452:[{icon_offset:72,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66453:[{icon_offset:73,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66454:[{icon_offset:74,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66455:[{icon_offset:75,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66456:[{icon_offset:76,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66457:[{icon_offset:77,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66458:[{icon_offset:78,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66459:[{icon_offset:79,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66460:[{icon_offset:80,maxScaleVal:22,minScaleVal:16,labelid:262153,density:0}],66461:[{icon_offset:81,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66462:[{icon_offset:86,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66463:[{icon_offset:87,maxScaleVal:22,minScaleVal:16,labelid:262146,density:0}],66464:[{icon_offset:88,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:88,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66465:[{icon_offset:89,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:89,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66466:[{icon_offset:90,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:90,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66467:[{icon_offset:91,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:91,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66468:[{icon_offset:92,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:92,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66469:[{icon_offset:93,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:93,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66470:[{icon_offset:94,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:94,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66471:[{icon_offset:95,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:95,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66472:[{icon_offset:96,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:96,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66473:[{icon_offset:97,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:97,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66474:[{icon_offset:98,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:98,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66475:[{icon_offset:99,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:99,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66476:[{icon_offset:100,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:100,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66477:[{icon_offset:101,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:101,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66478:[{icon_offset:102,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:102,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66479:[{icon_offset:103,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:103,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66480:[{icon_offset:104,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:104,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66481:[{icon_offset:105,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:105,maxScaleVal:22,minScaleVal:20,labelid:262152,density:0}],66482:[{icon_offset:106,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:106,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66483:[{icon_offset:107,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:107,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66484:[{icon_offset:108,maxScaleVal:19,minScaleVal:16,labelid:262145,density:0},{icon_offset:108,maxScaleVal:22,minScaleVal:20,labelid:262146,density:0}],66485:[{icon_offset:151,maxScaleVal:22,minScaleVal:16,labelid:262152,density:0}]},arrowStyles:{},bgColor:"#123182",stylesId:"default"}}()},function(t,e,n){"use strict";function i(t){return t=(0,s.colorToRGBA)(t),[t[0],t[1],t[2],255*t[3]]}function o(){return""}function r(){return l?"bold":""}function a(t){var e=l?"Microsoft YaHei UI,Microsoft YaHei,黑体,Hiragino Sans GB,sans-serif":"Microsoft YaHei UI,Microsoft YaHei,黑体,sans-serif";return t&&t.length>0?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.convertColorToHex=i,e.getFontStyle=o,e.getFontWeight=r,e.getFontFamily=a;var s=n(10),l=!1},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(474),f=i(c),d=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"parse",value:function(t){var e=(0,f.default)(t),n=e.meshes,i=n.reduce(function(t,e){return t+e.header.vertexCount},0);return{mode:4,vertexCount:i,attributes:this.mergeAttributes(n,i)}}},{key:"mergeAttributes",value:function(t,e){var n=new Float32Array(3*e),i=void 0,o=void 0,a=void 0,s=0,l=!0,u=!1,c=void 0;try{for(var f,d=(0,r.default)(t);!(l=(f=d.next()).done);l=!0){var h=f.value,v=h.attributes,p=v.POSITION,m=v.NORMAL,_=v.COLOR_0,g=v.TEXCOORD_0;n.set(p.value,3*s),m&&(i=i||new Int8Array(3*e),i.set(m.value,3*s)),_&&(o=o||new Uint8Array(3*e),o.set(_.value.map(function(t){return Math.round(255*t)}),3*s)),g&&(a=a||new Float32Array(2*e),a.set(g.value,2*s)),s+=p.value.length/3}}catch(t){u=!0,c=t}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}var y={};return y.POSITION={value:n,size:3},i&&(y.NORMAL={value:i,size:3}),o&&(y.COLOR_0={value:o,size:3}),a&&(y.TEXCOORD_0={value:a,size:2}),y}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t,e,n){if(n=n||{},"object"!==(void 0===n?"undefined":(0,r.default)(n)))throw new Error("options is invalid");var i=n,o=i.properties,l=n,u=l.npoints,c=n,f=c.offset;return t=(0,a.getCoord)(t),e=(0,a.getCoord)(e),o=o||{},u=u||100,f=f||10,new s.GreatCircle({x:t[0],y:t[1]},{x:e[0],y:e[1]},o).Arc(u,{offset:f}).json()}Object.defineProperty(e,"__esModule",{value:!0});var o=n(20),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=n(1042),s=n(643);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Math.PI/180,o=180/Math.PI,r=function(t,e){this.lon=t,this.lat=e,this.x=i*t,this.y=i*e};r.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},r.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new r(e,t)};var a=function(){this.coords=[],this.length=0};a.prototype.move_to=function(t){this.length++,this.coords.push(t)};var s=function(t){this.properties=t||{},this.geometries=[]};s.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},s.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var l=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new r(t.x,t.y),this.end=new r(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,o=this.start.y-this.end.y,a=Math.pow(Math.sin(o/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(a)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};l.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),a=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=o*Math.atan2(a,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[o*Math.atan2(r,i),s]},l.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),o=0;o<t;++o){var r=i*o,l=this.interpolate(r);n.push(l)}for(var u=!1,c=0,f=e&&e.offset?e.offset:10,d=180-f,h=-180+f,v=360-f,p=1;p<n.length;++p){var m=n[p-1][0],_=n[p][0],g=Math.abs(_-m);g>v&&(_>d&&m<h||m>d&&_<h)?u=!0:g>c&&(c=g)}var y=[];if(u&&c<f){var x=[];y.push(x);for(var b=0;b<n.length;++b){var S=parseFloat(n[b][0]);if(b>0&&Math.abs(S-n[b-1][0])>v){var w=parseFloat(n[b-1][0]),E=parseFloat(n[b-1][1]),T=parseFloat(n[b][0]),A=parseFloat(n[b][1]);if(w>-180&&w<h&&180===T&&b+1<n.length&&n[b-1][0]>-180&&n[b-1][0]<h){x.push([-180,n[b][1]]),b++,x.push([n[b][0],n[b][1]]);continue}if(w>d&&w<180&&-180===T&&b+1<n.length&&n[b-1][0]>d&&n[b-1][0]<180){x.push([180,n[b][1]]),b++,x.push([n[b][0],n[b][1]]);continue}if(w<h&&T>d){var P=w;w=T,T=P;var I=E;E=A,A=I}if(w>d&&T<h&&(T+=360),w<=180&&T>=180&&w<T){var k=(180-w)/(T-w),L=k*A+(1-k)*E;x.push([n[b-1][0]>d?180:-180,L]),x=[],x.push([n[b-1][0]>d?-180:180,L]),y.push(x)}else x=[],y.push(x);x.push([S,n[b][1]])}else x.push([n[b][0],n[b][1]])}}else{var M=[];y.push(M);for(var C=0;C<n.length;++C)M.push([n[C][0],n[C][1]])}for(var R=new s(this.properties),N=0;N<y.length;++N){var B=new a;R.geometries.push(B);for(var O=y[N],D=0;D<O.length;++D)O[D][1]>85&&(O[D][1]=85),O[D][1]<-85&&(O[D][1]=-85),B.move_to(O[D])}return R},e.Coord=r,e.Arc=s,e.GreatCircle=l,e.default={Coord:r,Arc:s,GreatCircle:l}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},u=function(){function t(e,n,i){(0,r.default)(this,t),n=[].concat(n),this.extendEntitySize=1024,this.entitySize=e||this.extendEntitySize,this.struct=n,this.attributes=i;for(var o=void 0,a=void 0,s=0,u=0,c=n.length;u<c;u++)o=n[u],a=l[o].BYTES_PER_ELEMENT,n[u]={type:o,BYTES_PER_ELEMENT:a},s+=a;this.unit8=new Uint8Array(e*s),this.arrayBuffer=this.unit8.buffer,this.dataView=new DataView(this.arrayBuffer),this.bytesPerElement=s,this.length=0}return(0,s.default)(t,[{key:"add",value:function(t){if(t instanceof Array&&0!==t.length){if(t[0]instanceof Array)for(var e=0,n=t.length;e<n;e++)this.addItem(t[e]);else for(var i=0,o=t.length;i<o;i++)this.addItem([t[i]])}}},{key:"addItem",value:function(t){var e=this.struct;if(t.length!==e.length)throw new Error("add data error");(this.length+1)*this.bytesPerElement>this.arrayBuffer.byteLength&&this.extend();for(var n=this.length,i=this.bytesPerElement,o=void 0,r=void 0,a=this.dataView,s=0,l=0,u=e.length;l<u;l++)o=e[l?l-1:0],r=e[l],l>0&&(s+=o.BYTES_PER_ELEMENT),a["set"+r.type](n*i+s,t[l],!0);this.length+=1}},{key:"extend",value:function(){this.resize(this.entitySize+this.extendEntitySize)}},{key:"compress",value:function(){this.resize(this.length)}},{key:"resize",value:function(t){var e=this.unit8;t>this.entitySize?(this.arrayBuffer=new ArrayBuffer(t*this.bytesPerElement),this.unit8=new Uint8Array(this.arrayBuffer),this.unit8.set(e)):this.entitySize,this.entitySize=t,this.dataView=new DataView(this.arrayBuffer)}},{key:"toArray",value:function(){for(var t=this.struct,e=this.length,n=this.bytesPerElement,i=this.dataView,o=[],r=void 0,a=0;a<e;a++)for(var s=0,l=0;l<t.length;l++)r=t[l],o.push(i["get"+r.type](n*a+s,!0)),s+=r.BYTES_PER_ELEMENT;return o}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var n=void 0,i=new p.default,o=[],a=(0,h.default)(t).sort(function(t,e){return Number(t)-Number(e)}),s=0,l=a.length;s<l;s++)if(n=t[a[s]],!(n.length<=0)){var c=n[0].type;c===m.BASE_LAYER_TYPE.line?(o.push(Number(a[s])),r(n,i)):c===m.BASE_LAYER_TYPE.region&&u(n,i)}return{vertices:i.vertiesDataBuffer,indeices:i.indicesDataBuffer,size:i.indicesDataBuffer.length,id:e,vertiesCount:i.vertiesDataBuffer.length,lineCount:i.lineCount,lineRankKeys:o}}function r(t,e){for(var n=0,i=t.length;n<i;n++)l(t[n],e,"side");for(var o=0,r=t.length;o<r;o++)l(t[o],e,"fill")}function a(t){return t=Math.ceil(t||0)}function s(t,e){var n=t.style,i=n.sidewidth,o=n.width,r=t.style,s=t.preStyle,l=t.nextStyle,u=t.zLevel,c=t.options,d=t.transform;o=a(o),i=a(i);var h=(0,y.isDefaultStyle)(c.mapStyleId),v=g.default.isDefaultNoSideLine(r.styleId);return h&&v&&(r.has_side=0),"side"===e?r.has_side?(i=i-o<2?o+2:i,{hasDash:!1,color:f(r.color_side.slice()),width:i,preWidth:a(s&&s.sidewidth),nextWidth:a(l&&l.sidewidth),noTerminal:u||r.has_dash,deltaSideWidth:Math.ceil(i-o),isSide:1,styleId:t.layerId,transform:d}):null:{hasDash:r.has_dash,dashLength:r.has_dash?r.dash_length:0,dashSpace:r.has_dash?r.dash_space:0,color:f(r.color_fill.slice()),width:o,preWidth:a(s&&s.width),nextWidth:a(l&&l.width),noTerminal:u||r.has_dash,startDistance:c&&c.startDistance||0,isSide:0,styleId:t.layerId,transform:d}}function l(t,e,n){var i=s(t,n);if(i){var o=i.color,r=i.width,a=i.dashLength,l=i.dashSpace,u=i.startDistance;t.datas.forEach(function(t){e.addLine(i,t,o,r,a,l,u)})}}function u(t,e){for(var n=0,i=t.length;n<i;n++)c(t[n],e)}function c(t,e){var n=t.datas,i=t.style,o=f((i.color_border||i.color_side).slice()),r=f(i.color_fill.slice()),a=i.sidewidth;if(0!==r[3]){if(o[3]>0&&a>0)for(var s=0,l=n.length;s<l;s++){var u=n[s];if(!(u.length<=4)){var c={transform:t.transform};e.addLine(c,u,o,a,null,null,null,!0)}}for(var d=0,h=n.length;d<h;d++){var v=n[d];v.length<=4||e.addPolygon(v,r,{transform:t.transform})}}}function f(t){return t[0]<=1&&t[1]<=1&&t[2]<=1&&(t[0]=Math.floor(255*t[0]),t[1]=Math.floor(255*t[1]),t[2]=Math.floor(255*t[2])),t[3]<2&&(t[3]=Math.floor(255*t[3])),t}Object.defineProperty(e,"__esModule",{value:!0});var d=n(18),h=i(d),v=n(650),p=i(v),m=n(57),_=n(379),g=i(_),y=n(299);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t.map(function(t,e){return 3===e?Math.round(255*t):Math.round(t)})}function r(t,e){var n=new u.default,i=!0,r=!1,a=void 0;try{for(var l,c=(0,s.default)(t);!(i=(l=c.next()).done);i=!0){var f=l.value;n.add({points:f.datas,height:f.h,colorFill:o(f.colorFill),colorSide:o(f.colorSide),transform:f.transform})}}catch(t){r=!0,a=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw a}}return{vertices:n.vertiesDataBuffer,indeices:n.indicesDataBuffer,size:n.indicesDataBuffer.length,id:e}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(27),s=i(a),l=n(651),u=i(l);e.default=r},function(t,e,n){"use strict";function i(t,e){var n=e.info,i=!0,o=!1,a=void 0;try{for(var s,l=(0,r.default)(t);!(i=(s=l.next()).done);i=!0){var u=s.value,c=u.datas[0];if(c&&c.icon&&c.icon_coords){if(!n[String(c.icon)])continue;u.id="icon_"+u.id}}}catch(t){o=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return t&&!(0,v.isInterceptForPlacement)(e,t.coordZ)?t:null}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),s=n(1),l=i(s),u=n(26),c=i(u),f=n(649),d=i(f),h=n(57),v=n(477),p=function(){function t(e,n){(0,a.default)(this,t),this._textCache=e,this.placement=new d.default({textCache:this._textCache}),this._currentPlacementIndex=n.length-1,this._currentTileIndex=0,this._isDone=!1,this._batchedUpdate=!1,this._fadeUntil=0,this._batchUpdateTime=0,this._destroyed=!1}return(0,l.default)(t,[{key:"isDone",value:function(){return this._isDone}},{key:"continuePlacement",value:function(t,e,n,i){if(!this._destroyed){for(var r=i.zoom,a=Math.round(r),s=c.default.now(),l=!1;this._currentPlacementIndex>=0;){var u=t[this._currentPlacementIndex];if(u&&u.type===h.BASE_LAYER_TYPE.text){var f=t.filter(function(t){return t.type===h.BASE_LAYER_TYPE.point})[0],d=t.filter(function(t){return t.type===h.BASE_LAYER_TYPE.label})[0];for(u=f||d||u;this._currentTileIndex<u.tiles.length;){var v=u.tiles[this._currentTileIndex],p=d&&d.tiles[this._currentTileIndex],m=f&&f.tiles[this._currentTileIndex],_=e[v.id],g=this._textCache?this._textCache.tiles[v.id]:null,y=p&&p.features&&p.features.instance&&p.features.instance.count>0||m&&m.features&&m.features.instance&&m.features.instance.count>0;if(_&&(this._textCache?g:y)&&(this.placement.calculateTextByTile({label:o(p,r),poi:o(m,r),icon:o(m,r)},_,n,i),this.placement.impactTextByTile(v)),this._currentTileIndex+=1,c.default.now()-s>4){l=!0;break}}if(l)return}if(u&&u.type===h.RENDER_LAYER_TYPE.indoorPoi&&u.tiles.length>0){var x=u.tiles[0],b=n.pvMatrix,S=x.features.pois[a]&&x.features.pois[a][0],w=S&&S.instance&&S.instance.count>0;b&&w&&(this.placement.calculateAllIndoorPois(S,x.features.center,b,n,i,x),this.placement.impactTextByTile(x))}this._currentPlacementIndex-=1}this._isDone=!0}}},{key:"batchUpdate",value:function(t){return this.placement.batchUpdate(t),this._batchedUpdate=!0,this._fadeUntil=c.default.now()+300,this.placement}},{key:"isFading",value:function(){return this._isDone&&c.default.now()<this._fadeUntil}},{key:"destroy",value:function(){this._destroyed||(this._textCache=null,this.placement.clear(),this.placement=null,this._currentPlacementIndex=null,this._currentTileIndex=null,this._isDone=null,this._batchedUpdate=null,this._fadeUntil=null,this._batchUpdateTime=null,this._destroyed=!0)}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(30),r=i(o),a=n(15),s=i(a),l=n(27),u=i(l),c=n(18),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(94),_=n(25),g=i(_),y=n(10),x=i(y),b=n(26),S=i(b),w=n(110),E=80,T=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,h.default)(this,t),this.DELTA_SCREEN_CELL=Math.round(E*(e.textCache&&e.textCache.scale||1)),this.boundsBuffer=0,this.iconBoundsBuffer=0,this.textScreenCoordList={},this.textDataSet={},this.textTileCellSet={},this.textFeatureSet={},this.poiScreenCoordList={},this.poiDataSet={},this.poiTileCellSet={},this.iconScreenCoordList={},this.iconDataSet={},this.iconTileCellSet={},this.v=1,this.instanceSet={},this.cellSet={},this._batchUpdateTime=0,this.inUse=!1}return(0,p.default)(t,[{key:"updateVersion",value:function(){this.v+=1}},{key:"setInUse",value:function(t){this.inUse=t}},{key:"getInUse",value:function(){return this.inUse}},{key:"clear",value:function(){this.clearText(),this.clearPoi(),this.clearIcon(),this.instanceSet={},this.cellSet={}}},{key:"clearText",value:function(){var t=this,e=this.v,n=this.textDataSet,i=this.textScreenCoordList;x.default.forIn(n,function(i,o){if(o.v!==e){var r=o.tileId,a=o.roadSymbolIndex;t.instanceSet[r]&&(t.instanceSet[r].instanceInfosTypeArray[4*a+1]=0),n[i].destory&&n[i].destory(),delete n[i]}}),x.default.forIn(i,function(t,n){x.default.forIn(n,function(t,i){"cell"!==t&&i.v!==e&&(n[t].destory&&n[t].destory(),delete n[t])})}),this.textTileCellSet={}}},{key:"clearPoi",value:function(){var t=this;(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e],i=n.tileId,o=n.textSymbolIndexList;t.instanceSet[i]&&o.forEach(function(e){t.instanceSet[i].instanceInfosTypeArray[4*e+1]=1}),t.poiDataSet[e].destory&&t.poiDataSet[e].destory()}),this.poiDataSet={},this.poiScreenCoordList={},this.poiTileCellSet={}}},{key:"clearIcon",value:function(){var t=this;(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e],i=n.tileId,o=n.iconSymbolIndex;t.instanceSet[i]&&(t.instanceSet[i].instanceInfosTypeArray[4*o+1]=1),t.iconDataSet[e].destory&&t.iconDataSet[e].destory()}),this.iconDataSet={},this.iconScreenCoordList={},this.iconTileCellSet={}}},{key:"_sortValue",value:function(t,e){return e.y-t.y>t.x-e.x?1:-1}},{key:"getFadeChange",value:function(){return(S.default.now()-this._batchUpdateTime)/500}},{key:"batchUpdate",value:function(t){this._batchUpdateTime=S.default.now(),this.batchUpdateShow();var e=0;t&&(e=(this._batchUpdateTime-t._batchUpdateTime)/500),this.batchChangeOpacity(t,e),this.batchUpdateOpacities()}},{key:"batchUpdateShow",value:function(){var t=this;(0,f.default)(this.textDataSet).forEach(function(e){var n=t.textDataSet[e];n.updateShow&&n.updateShow()}),(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e];n.updateShow&&n.updateShow()}),(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e];n.updateShow&&n.updateShow()})}},{key:"batchChangeOpacity",value:function(t,e){var n=this;(0,f.default)(this.textDataSet).forEach(function(i){var o=n.textDataSet[i];if(o.setOpacity){var r=t&&t.textDataSet&&t.textDataSet[i];r&&null!==r._opacity?o.setOpacity(r.getShow()!==o.getShow()?r.getOpacity():x.default.clamp(r._opacity+(o.getShow()?e:-e),0,1)):o.setOpacity(o.getShow()?1:0)}}),(0,f.default)(this.poiDataSet).forEach(function(i){var o=n.poiDataSet[i];if(o.setOpacity){var r=t&&t.poiDataSet&&t.poiDataSet[i];r&&null!==r._opacity?o.setOpacity(r.getShow()!==o.getShow()?r.getOpacity():x.default.clamp(r._opacity+(o.getShow()?e:-e),0,1)):r&&r.getShow()?o.setOpacity(1):o.setOpacity(o.isIndoor&&o.getShow()?1:0)}}),(0,f.default)(this.iconDataSet).forEach(function(i){var o=n.iconDataSet[i];if(o.setOpacity){var r=t&&t.iconDataSet&&t.iconDataSet[i];r&&null!==r._opacity?o.setOpacity(r.getShow()!==o.getShow()?r.getOpacity():x.default.clamp(r._opacity+(o.getShow()?e:-e),0,1)):r&&r.getShow()?o.setOpacity(1):o.setOpacity(o.isIndoor&&o.getShow()?1:0)}})}},{key:"batchUpdateOpacities",value:function(){var t=this;(0,f.default)(this.textDataSet).forEach(function(e){var n=t.textDataSet[e];n.updateOpacity&&n.updateOpacity()}),(0,f.default)(this.poiDataSet).forEach(function(e){var n=t.poiDataSet[e];n.updateOpacity&&n.updateOpacity()}),(0,f.default)(this.iconDataSet).forEach(function(e){var n=t.iconDataSet[e];n.updateOpacity&&n.updateOpacity()})}},{key:"calculateAlsoShowedLabel",value:function(t,e,n){var i=this;(0,f.default)(this.textFeatureSet).filter(function(t){return i.textFeatureSet[t].getShow()}).forEach(function(o){var r=i.textFeatureSet[o];t[r.tileId]&&i.calculateLabelFeatures({matrix:t[r.tileId]},r.roadFeature.roads,e,r.tile,n,r.tileFeatures,r.roadFeature)})}},{key:"calculateTextByTile",value:function(t,e,n,i){t.label&&this.calculateLabelByTile(t.label,e,n,i),t.poi&&this.calculatePoiByTile(t.poi,e,n,i),t.icon&&this.calculateIconByTile(t.icon,e,n,i)}},{key:"calculateLabelByTile",value:function(t,e,n,i){var o=!0,r=!1,a=void 0;try{for(var s,l=(0,u.default)(t.features);!(o=(s=l.next()).done);o=!0){var c=s.value;c.roads instanceof Array&&c.roads.length&&this.calculateLabelFeatures({matrix:e},c.roads,n,t,i,t.features,c)}}catch(t){r=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}}},{key:"calculatePoiByTile",value:function(t,e,n,i){var o=!0,r=!1,a=void 0;try{for(var s,l=(0,u.default)(t.features);!(o=(s=l.next()).done);o=!0){var c=s.value;if(c.datas&&c.datas[0]&&c.datas[0].text){var f=void 0;c.datas[0].icon&&(f=c.id),this.calculatePoi({matrix:e},c,t.scale,null,n,t.offset,f,t,i,t.features)}}}catch(t){r=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}}},{key:"calculateIconByTile",value:function(t,e,n,i){var o=1/t.scale,r=!0,a=!1,s=void 0;try{for(var l,c=(0,u.default)(t.features);!(r=(l=c.next()).done);r=!0){var f=l.value;"iconSymbolIndex"in f&&this.calculateIcon({matrix:e,scale:o},f.id,t,f,n,i,t.features)}}catch(t){a=!0,s=t}finally{try{!r&&c.return&&c.return()}finally{if(a)throw s}}}},{key:"impactTextByTile",value:function(t){var e=this,n=this.textTileCellSet[t.id]||null,i=this.poiTileCellSet[t.id]||null,o=this.iconTileCellSet[t.id]||null,r=(0,s.default)({},n,i,o);(0,f.default)(r).forEach(function(t){e.impactTextByCellId(t)})}},{key:"impactTextByCellId",value:function(t){var e=this,n=this.textDataSet,i=this.poiDataSet,o=this.iconDataSet,r=this.textScreenCoordList,a=this.poiScreenCoordList,s=this.iconScreenCoordList,l=void 0,u=void 0;x.default.forIn(r[t],function(l,c){if((u=n[l])&&u.getShow())for(var f=u,d=f.linkIds,h=r[t].cell,v=0;v<3;v++)if(u&&u.getShow())for(var p=0;p<3;p++)if(u&&u.getShow()){var m=h[0]+v-1+"_"+(h[1]+p-1),_=r[m],g=a[m],y=s[m];_&&x.default.forIn(_,function(t,i){var o=n[t];if(o&&o.getShow&&t!==l&&(!d||!d[t])&&e._impact(c,i))if(u.rank>o.rank){o.setShow(!1);var r=o.linkIds;x.default.forIn(r,function(t){n[t].setShow(!1)})}else{u.setShow(!1);var a=u,s=a.linkIds;x.default.forIn(s,function(t){n[t].setShow(!1)})}}),g&&x.default.forIn(g,function(t,o){var r=i[t];if(r&&r.getShow()&&e._impact(c,o)){u.setShow(!1);var a=u,s=a.linkIds;x.default.forIn(s,function(t){n[t].setShow(!1)})}}),y&&x.default.forIn(y,function(t,n){var i=o[t];i&&i.getShow()&&u.rank>=i.rank&&e._impact(c,n)&&i.setShow(!1)})}}),x.default.forIn(a[t],function(n,r){if((l=i[n])&&l.getShow())for(var u=l.linkId,c=a[t].cell,f=0;f<3;f++)if(l&&l.getShow())for(var d=0;d<3;d++)if(l&&l.getShow()){var h=c[0]+f-1+"_"+(c[1]+d-1),v=a[h],p=s[h];p&&x.default.forIn(p,function(t,n){var i=o[t];i&&i.getShow()&&l.iconId!==i.id&&l.rank>=i.rank&&e._impact(r,n)&&i.setShow(!1)}),v&&x.default.forIn(v,function(t,a){var s=i[t];if(n!==t&&s&&s.getShow()&&(!u||u!==t)&&e._impact(r,a))if(l.rank>s.rank){s.setShow(!1),o[s.iconId]&&o[s.iconId].setShow(!1);var c=s.linkId;c&&i[c]&&i[c].setShow(!1)}else{l.setShow(!1),o[l.iconId]&&o[l.iconId].setShow(!1);var f=l,d=f.linkId;d&&i[d]&&i[d].setShow(!1)}})}}),x.default.forIn(s[t],function(n,i){var r=o[n];if(r&&r.getShow())for(var a=s[t].cell,l=0;l<3;l++)if(r&&r.getShow())for(var u=0;u<3;u++)if(r&&r.getShow()){var c=a[0]+l-1+"_"+(a[1]+u-1),f=s[c];i.isInCell&&c!==t||f&&x.default.forIn(f,function(t,a){var s=o[t];n!==t&&s&&s.getShow()&&e._impact(i,a)&&(r.rank>s.rank?s.setShow(!1):r.setShow(!1))})}})}},{key:"textImpact",value:function(){var t=this;x.default.forIn(this.cellSet,function(e){t.impactTextByCellId(e)})}},{key:"_impactCoord",value:function(t,e){return!(Math.abs(t.z-e.z)>0||Math.abs(t.x-e.x)>1||Math.abs(t.y-e.y)>1)}},{key:"_impact",value:function(t,e){var n=t.x<=e.x?e.x:t.x,i=t.y<=e.y?e.y:t.y;return n>=t.x&&n<=t.x+t.w&&i>=t.y&&i<=t.y+t.h&&n>=e.x&&n<=e.x+e.w&&i>=e.y&&i<=e.y+e.h}},{key:"calculateLabelFeatures",value:function(t,e,n,i,o,r,a){if(r.instance){this.instanceSet[i.id]=r.instance;var s=e.length/2-.5,l=Math.floor(s),c=e[0].font_size||12,f=void 0;if(s%1==0)f=e[s].datas[0].coords;else{var d=e[Math.floor(s)].datas[0].coords,h=e[Math.ceil(s)].datas[0].coords;f=[(d[0]+h[0])/2,(d[1]+h[1])/2]}var v=new m.Vector4(0,0,0,1),p=!0,_=!1,g=void 0;try{for(var y,x=(0,u.default)(e);!(p=(y=x.next()).done);p=!0){var b=y.value,S=b.datas[0].screenCoords;if(!S||S.version!==n.version){v.elements[0]=b.datas[0].coords[0]+c/2,v.elements[1]=-(b.datas[0].coords[1]+c/2);var w=n.getScreenCoordsByCustomMatrix(t.matrix,v);w.rank=b.datas[0].rank,b.datas[0].screenCoords=w}}}catch(t){_=!0,g=t}finally{try{!p&&x.return&&x.return()}finally{if(_)throw g}}for(var E=e[Math.floor(s)],T=e[Math.ceil(s)],A=E.datas[0].screenCoords,P=T.datas[0].screenCoords,I={x:(A.x+P.x)/2,y:(A.y+P.y)/2},k=e[0].datas[0].coords,L=e[e.length-1].datas[0].coords,M={x:k[0],y:k[1]},C={x:L[0],y:L[1]},R=this._sortValue(M,C),N=this._sortValue(e[0].datas[0].screenCoords,e[e.length-1].datas[0].screenCoords),B=R!==N,O=void 0,D={},z=0,V=0,F=void 0,U=0,Y=e.length;U<Y;U++){var j=e[U].datas[0],G=void 0,Z=void 0,H=B?e[Y-U-1]:e[U];j.text=H.datas[1].text,j.text_bounds=H.datas[1].text_bounds,j.glyph_text_bounds=H.datas[1].glyph_text_bounds;var W=H.roadSymbolIndex,X=r.instance.instanceTransTypeArray[3*W],Q=r.instance.instanceTransTypeArray[3*W+1],q=r.instance.instanceTransTypeArray[3*W+2];H.roadSymbolIndex=e[U].roadSymbolIndex,r.instance.instanceTransTypeArray[3*H.roadSymbolIndex]=r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex],r.instance.instanceTransTypeArray[3*H.roadSymbolIndex+1]=r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex+1],r.instance.instanceTransTypeArray[3*H.roadSymbolIndex+2]=r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex+2],e[U].roadSymbolIndex=W,r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex]=X,r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex+1]=Q,r.instance.instanceTransTypeArray[3*e[U].roadSymbolIndex+2]=q,U<Y-1&&(G=e[U+1].datas[0],Z=this.lineAngle(j.screenCoords,G.screenCoords),O=U===Y-2?Z:0),j.line=U===Y-1?O:Z,j.line>=45&&j.line<=135||j.line>=225&&j.line<=315?V+=1:z+=1;var J="label_"+e[U].datas[0].text+"_"+e[U].id;D[J]=J}if(z===V){var K=e[0].datas[0].line;F=!(K>=45&&K<=135||K>=225&&K<=315)}else F=z>=V;for(var $=e.map(function(t){return t.id}).join(),tt=l;tt>=0;tt--){var et={coords:tt===l?f:e[tt+1].datas[0].coords,newCoords:tt===l?f:e[tt+1].datas[0].newCoords,screenCoords:tt===l?I:e[tt+1].datas[0].screenCoords};this.calculate({transform:t,feature:e[tt],camera:n,tile:i,neighbor:et,linkIds:D,fixType:F,gltrans:o,tileFeatures:r,roadFeature:a,roadFeatureId:$})}for(var nt=l+1;nt<e.length;nt++){var it={coords:nt===l+1?f:e[nt-1].datas[0].coords,newCoords:nt===l+1?f:e[nt-1].datas[0].newCoords,screenCoords:nt===l+1?I:e[nt-1].datas[0].screenCoords};this.calculate({transform:t,feature:e[nt],camera:n,tile:i,neighbor:it,linkIds:D,fixType:F,gltrans:o,tileFeatures:r,roadFeature:a,roadFeatureId:$})}}}},{key:"calculate",value:function(t){var e=t.transform,n=t.feature,i=t.camera,o=t.tile,r=t.neighbor,a=t.linkIds,s=t.fixType,l=t.gltrans,u=t.tileFeatures,c=t.roadFeature,f=t.roadFeatureId,d=n.datas[0],h=i.scale,v=n.roadSymbolIndex,p=d.text,_="label_"+p+"_"+n.id,g=u.instance.instanceCoordsTypeArray[4*v]*h,y=u.instance.instanceCoordsTypeArray[4*v+1]*h,x=d.screenCoords,b=d.line||0,S=360-this.calMix(s,b)||0,w=Math.sqrt(Math.pow(x.x-r.screenCoords.x,2)+Math.pow(x.y-r.screenCoords.y,2)),E=this.calCoords(r.coords,d.coords,w,r.newCoords,d.coordScale,h),T=E[0],A=E[1];d.newCoords=[T,A],u.instance.instanceTransTypeArray[3*v]=T,u.instance.instanceTransTypeArray[3*v+1]=-A;var P=d.newScreenCoords;if(!P||P.version!==i.version){var I=new m.Vector4(0,0,0,1);I.elements[0]=T,I.elements[1]=-A,d.newScreenCoords=i.getScreenCoordsByCustomMatrix(e.matrix,I),P=d.newScreenCoords,P.rank=d.rank,P.w=g,P.h=y,P.x-=g/2,P.y-=y/2}var k=Math.floor(P.x/this.DELTA_SCREEN_CELL),L=Math.floor(P.y/this.DELTA_SCREEN_CELL),M=k+"_"+L;P.isInCell=k===Math.floor((P.x+P.w)/this.DELTA_SCREEN_CELL)&&L===Math.floor((P.y+P.h)/this.DELTA_SCREEN_CELL),this.textFeatureSet[f]||(this.textFeatureSet[f]={_show:!0,tileId:o.id,roadFeature:c,tile:o,tileFeatures:u,getShow:function(){return this._show},setShow:function(t){this._show=t},destory:function(){this._show=null}});var C=this,R={v:this.v,_show:!0,roadSymbolIndex:v,rank:d.rank,tileId:o.id,linkIds:a,coordX:o.coordX,coordY:o.coordY,coordZ:o.coordZ,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){u.instance.instanceInfosTypeArray[4*this.roadSymbolIndex+3]=this._opacity},getShow:function(){return this._show},setShow:function(t){this._show=t,C.textFeatureSet[f].setShow(t)},updateShow:function(){u.instance.instanceInfosTypeArray[4*this.roadSymbolIndex+1]=this._show?1:0},destory:function(){this._show=null,this._opacity=null}};P.x+P.w<-120||P.x>l.width+120||P.y+P.h<-120||P.y>l.height+120?R.setShow(!1):(P.v=this.v,this.textTileCellSet[o.id]=this.textTileCellSet[o.id]||{},this.textTileCellSet[o.id][M]=!0,this.textScreenCoordList[M]=this.textScreenCoordList[M]||{cell:[k,L]},this.textScreenCoordList[M][_]=P,this.cellSet[M]=!0),u.instance.instanceInfosTypeArray[4*v]=-S%360*Math.PI/180,u.instance.instanceInfosTypeArray[4*v+1]=1;var N=this.textDataSet[_];N&&(R.setShow(N.getShow()),R.setOpacity(N.getOpacity())),this.textDataSet[_]=R}},{key:"calculateAllIndoorPois",value:function(t,e,n,i,o,r){var a=this;if(t.instance){this.instanceSet[r.id]=t.instance;var s=o.getDistanceScales(),l=o.center,u=1/(0,w.getSpatialResolution)(o.zoom);t.forEach(function(c){var f="iconSymbolIndex"in c,d=c.length>0&&c[0].instance_trans;if(f||d){var h=c.iconSymbolIndex,v=r.id+"_icon_"+h,p=c.map(function(t,e){return"indoor_"+t.text+"_"+r.id+"_"+(t.textSymbolIndexList&&t.textSymbolIndexList[e]||"")}),m=c.map(function(t){return t.text}).join("/"),_=o.latLngToCenterLocalPixelByDistanceScales(e,{distanceScales:s,center:l,pixelsPerMeter:u,offsetMercator:f?{x:t.instance.instanceTransTypeArray[3*h],y:t.instance.instanceTransTypeArray[3*h+1]}:{x:c[0].instance_trans[0],y:c[0].instance_trans[1]}});a.calculateSingleIndoorPoi(c,{linkIds:p,indoorTile:r,hasIcon:f,iconId:v,localPixel:_,camera:i,tileMatrix:n,transform:o,indoorPois:t,textName:m}),f&&a.calculateIndoorPoiIcon({indoorPois:t,iconId:v,poiInfo:c,localPixel:_,tileMatrix:n,camera:i,transform:o,tile:r,textName:m})}})}}},{key:"calculateSingleIndoorPoi",value:function(t,e){var n=this,i=t,o=e.linkIds,a=e.indoorTile,s=e.hasIcon,l=e.iconId,u=e.localPixel,c=e.camera,f=e.tileMatrix,d=e.transform,h=e.indoorPois,v=e.textName;i.forEach(function(t,e){if(0!==t.textBounds.w&&0!==t.textBounds.h){var p=o[e],m=0===e?o[1]:o[0],_=n._generatePoiDataItem({isIndoor:!0,textSymbolIndexList:t.textSymbolIndexList,rank:t.rank,tile:a,linkId:m,iconId:l,instance:h.instance,name:v});if(n.poiDataSet[p]=_,!(e>0)){var y=1,x=1,b=0;if(i.length>1){var S=i.map(function(t){return t.textBounds}),w=(0,r.default)(S,2),E=w[0],T=w[1],A=i.map(function(t){return t.anchor}),P=(0,r.default)(A,2),I=P[0],k=P[1];T.w>E.w&&(y=T.w/E.w);var L=Math.abs(k.y-I.y)-(E.h+T.h)/2;x=(E.h+T.h+L)/E.h;var M=I.x-E.w/2-(k.x-T.w/2);M>0&&(b=M)}var C=n._generateScreenCoordsForPoi({screenCoordsContainer:t,localPixel:u,textInfo:t,boundsScale:y,boundsH:x,camera:c,tileMatrix:f,correctCallback:function(e){if(e.x-=b,s){var n=g.default.iconSize*c.scale,i=t.anchor;i.x>0?(e.x-=n,e.w+=n):i.x<0?e.w+=n:(e.h+=n,i.y>0&&(e.y-=n))}}});n._packPoiToSet(C,{item:_,transform:d,infoId:p,tile:a})}}})}},{key:"calculateIndoorPoiIcon",value:function(t){var e=t.indoorPois,n=t.iconId,i=t.poiInfo,o=t.localPixel,r=t.tileMatrix,a=t.camera,s=t.transform,l=t.tile,u=t.textName,c=new m.Vector4(0,0,0,1);c.elements[0]=o.x,c.elements[1]=o.y;var f=i.iconScreenCoods;if(!f||f.version!==a.version){i.iconScreenCoods=a.getScreenCoordsByCustomMatrix(r,c),f=i.iconScreenCoods,f.rank=i[0].rank||0,f.coord={x:f.x,y:f.y};var d=g.default.iconSize*a.scale;f.x-=d/2,f.y-=d/2,f.w=d,f.h=d,f.iconSymbolIndex=i.iconSymbolIndex}this._packIconToSet(f,{id:n,isIndoor:!0,tileId:l.id,gltrans:s,instance:e.instance,needIcon:!i[0].textSymbolIndex,name:u})}},{key:"calculatePoi",value:function(t,e,n,i,o,r,a,s,l,u){if(u.instance){this.instanceSet[s.id]=u.instance;var c=e.datas[0];if(c.coords.length)for(var f=c.text,d=1,h=1,v=c.text_bounds,p=void 0,m=0,_=f.length;m<_;m++){var g="text_"+f[m].text+"_"+e.id,y=void 0;if(p=2===_?v.slice(4*(1-m),4*(1-m)+4):v.slice(4*m,4*m+4),!(p[2]<10||p[3]<10)&&f[m].instance_trans){if(2===_){var x=f[1].text,b=f[0].text;y=0===m?"text_"+x+"_"+e.id:"text_"+b+"_"+e.id,d=f[0].instance_coords&&f[1].instance_coords?f[0].instance_coords[0]>f[1].instance_coords[0]?1:f[1].instance_coords[0]/f[0].instance_coords[0]:1,h=2}this.calculateSingle(t,f[m],g,a,e,o,y,s,m,d,h,l,u)}}}}},{key:"calculateSingle",value:function(t,e,n,i,o,r,a,s,l,u,c,f,d){var h=e.textSymbolIndexList,v=e.rank,p=this._generatePoiDataItem({isIndoor:!1,textSymbolIndexList:h,rank:v,tile:s,linkId:a,iconId:i,instance:d.instance,index:l,name:o.datas[0].textName});if(this.poiDataSet[n]=p,l)return void(this.poiDataSet[n]=p);var m=this._generateScreenCoordsForPoi({screenCoordsContainer:o.datas[0],localPixel:{x:e.instance_trans[0],y:e.instance_trans[1]},textInfo:e,boundsScale:u,boundsH:c,tileMatrix:t.matrix,camera:r,correctCallback:function(t){var n=e.centerOffset,a=g.default.iconSize,s=r.scale,l=e.instance_coords[0],c=!!i;if(o.datas[0].stretching_len){var f={x:o.datas[0].screenW||0,y:o.datas[0].screenH||0};t.x+=(n&&n.x)*s,t.y+=(n&&n.y)*s,t.w+=f.x*s,t.h+=f.y*s}else if(n){var d={x:0,y:0},h={x:0,y:0};if(0===n.x){if(d.x=-l*(u-1)/2,c){var v=Math.abs(e.instance_coords[3])+a/2;d.y=n.y>0?-v:0,h.y=v}}else{var p=Math.abs(e.instance_coords[2])+a/2;d.x=n.x<0?-l*(u-1):-p,h.x=p}t.x+=d.x*s,t.y+=d.y*s,t.w+=h.x*s,t.h+=h.y*s}}});this._packPoiToSet(m,{item:p,infoId:n,tile:s,transform:f})}},{key:"_generateScreenCoordsForPoi",value:function(t){var e=t.screenCoordsContainer,n=t.localPixel,i=t.textInfo,o=t.boundsScale,r=t.boundsH,a=t.camera,s=t.tileMatrix,l=t.correctCallback,u=new m.Vector4(0,0,0,1),c=e.poiScreenCoords,f=a.scale;if(!c||c.version!==a.version){u.elements[0]=n.x,u.elements[1]=n.y;var d=i.instance_coords[0]*f,h=i.instance_coords[1]*f,v={x:i.instance_coords[2]*f,y:i.instance_coords[3]*f};e.poiScreenCoords=a.getScreenCoordsByCustomMatrix(s,u),c=e.poiScreenCoords,c.rank=i.rank||0,c.coord={x:c.x,y:c.y},c.x-=v.x,c.y-=v.y,c.w=d*o,c.h=h*r,l&&l(c)}return c}},{key:"_generatePoiDataItem",value:function(t){return{name:t.name||"",_show:!0,textSymbolIndexList:t.textSymbolIndexList,rank:t.rank,isIndoor:t.isIndoor,tileId:t.tile.id,linkId:t.linkId,iconId:t.iconId,coordX:t.tile.coordX,coordY:t.tile.coordY,coordZ:t.tile.coordZ,index:t.index||0,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){var e=this;this.textSymbolIndexList.forEach(function(n){t.instance.instanceInfosTypeArray[4*n+3]=e._opacity})},getShow:function(){return this._show},setShow:function(t){this._show=t},updateShow:function(){var e=this;this.textSymbolIndexList.forEach(function(n){t.instance.instanceInfosTypeArray[4*n+1]=e._show?1:0})},destory:function(){this._show=null,this._opacity=null}}}},{key:"_packPoiToSet",value:function(t,e){var n=this.calCellCoord(t),i=n.hIdx,o=n.vIdx,r=n.cellId;t.isInCell=i===Math.floor((t.x+t.w)/this.DELTA_SCREEN_CELL)&&o===Math.floor((t.y+t.h)/this.DELTA_SCREEN_CELL),t.x+t.w<-120||t.x>e.transform.width+120||t.y+t.h<-120||t.y>e.transform.height+120?e.item.setShow(!1):(this.poiScreenCoordList[r]?this.poiScreenCoordList[r][e.infoId]=t:(this.poiScreenCoordList[r]={cell:[i,o]},this.poiScreenCoordList[r][e.infoId]=t),this.poiTileCellSet[e.tile.id]=this.poiTileCellSet[e.tile.id]||{},this.poiTileCellSet[e.tile.id][r]=!0,this.cellSet[r]=!0)}},{key:"calculateIcon",value:function(t,e,n,i,o,r,a){a.instance&&(this.instanceSet[n.id]=a.instance);var s=i.datas[0].text,l=g.default.iconSize,u=new m.Vector4(0,0,0,1);u.elements[0]=a.instance.instanceTransTypeArray[3*i.iconSymbolIndex],u.elements[1]=a.instance.instanceTransTypeArray[3*i.iconSymbolIndex+1];var c=i.datas[0].iconScreenCoods;if(!c||c.version!==o.version){i.datas[0].iconScreenCoods=o.getScreenCoordsByCustomMatrix(t.matrix,u),c=i.datas[0].iconScreenCoods,c.rank=s&&s[0]&&s[0].rank||0;var f=l*c.depthScale*o.scale,d=l*c.depthScale*o.scale;c.coord={x:c.x,y:c.y},c.x-=f/2+this.iconBoundsBuffer,c.y-=d/2+this.iconBoundsBuffer,c.w=f+2*this.iconBoundsBuffer,c.h=d+2*this.iconBoundsBuffer,c.iconSymbolIndex=i.iconSymbolIndex}this._packIconToSet(c,{id:e,tileId:n.id,isIndoor:!1,gltrans:r,instance:a.instance,needIcon:s.length<=0,name:i.datas[0].textName})}},{key:"_packIconToSet",value:function(t,e){var n=e.id,i=e.tileId,o=e.isIndoor,r=e.gltrans,a=e.instance,s=e.needIcon,l=e.name,u=Math.floor(t.x/this.DELTA_SCREEN_CELL),c=Math.floor(t.y/this.DELTA_SCREEN_CELL),f=u+"_"+c;t.isInCell=u===Math.floor((t.x+t.w)/this.DELTA_SCREEN_CELL)&&c===Math.floor((t.y+t.h)/this.DELTA_SCREEN_CELL),this.iconDataSet[n]={id:n,name:l,isIndoor:o,tileId:i,rank:t.rank,_show:!0,iconSymbolIndex:t.iconSymbolIndex,_opacity:null,getOpacity:function(){return this._opacity},setOpacity:function(t){this._opacity=t},updateOpacity:function(){a.instanceInfosTypeArray[4*this.iconSymbolIndex+3]=this._opacity},getShow:function(){return this._show},setShow:function(t){this._show=t},updateShow:function(){a.instanceInfosTypeArray[4*this.iconSymbolIndex+1]=this._show?1:0},destory:function(){this._show=null,this._opacity=null}},t.x+t.w<-120||t.x>r.width+120||t.y+t.h<-120||t.y>r.height+120?this.iconDataSet[n].setShow(!1):s&&(this.iconScreenCoordList[f]?this.iconScreenCoordList[f][n]=t:(this.iconScreenCoordList[f]={cell:[u,c]},this.iconScreenCoordList[f][n]=t),this.iconTileCellSet[i]=this.iconTileCellSet[i]||{},this.iconTileCellSet[i][f]=!0,this.cellSet[f]=!0)}},{key:"calMix",value:function(t,e){var n=0;return n=t?e>=90&&e<=270?e-180:e:e<=180?e-90:e-270,Math.round(n)}},{key:"lineAngle",value:function(t,e){var n=t.x,i=t.y,o=e.x,r=e.y,a=o-n,s=r-i,l=Math.sqrt(a*a+s*s),u=a/l,c=Math.acos(u),f=180*c/Math.PI;return s>0?f=-f:0===s&&a<0&&(f=180),f=f>90?360-(f-90):90-f,Math.round(f)}},{key:"calCoords",value:function(t,e,n,i,o,r){if(!n)return i;var a=e[0]-t[0],s=e[1]-t[1],l=Math.sqrt(a*a+s*s),u=l/o*r,c=u/n;return[i[0]+a*c,i[1]+s*c]}},{key:"calCellCoord",value:function(t){var e=Math.floor(t.x/this.DELTA_SCREEN_CELL),n=Math.floor(t.y/this.DELTA_SCREEN_CELL);return{hIdx:e,vIdx:n,cellId:e+"_"+n}}},{key:"getDataInCell",value:function(t,e){var n=this[e+"ScreenCoordList"],i=this[e+"DataSet"],o=[];return n&&i&&x.default.forIn(n[t],function(t,e){"cell"!==t&&o.push(x.default.extend({poiId:t},e,i[t]))}),o}},{key:"getPoi",value:function(t){var e=this,n=null,i=this.calCellCoord(t),o=i.hIdx,r=i.vIdx,a=[[0,0],[0,-1],[-1,0],[-1,-1]],s=[];a.forEach(function(t){var n=o+t[0]+"_"+(r+t[1]),i=!!(t[0]+t[1]),a=e.getDataInCell(n,"poi").filter(function(t){return t._show&&!(i&&t.isInCell)}),l=e.getDataInCell(n,"icon").filter(function(t){return t._show&&!(i&&t.isInCell)});s=s.concat(a).concat(l)});for(var l=0;l<s.length;l++){var u=s[l],c=u.x,f=u.y,d=u.w,h=u.h,v=u.coord,p=u.isIndoor,m=u.name,_={x:t.x-c,y:t.y-f},g=d+2,y=h+2;if(_.x>=-2&&_.x<=g&&_.y>=-2&&_.y<=y){n={coord:v,bounds:[c,f,d,h],isIndoor:p,name:m?m.replace("/",""):""};break}}return n}}]),t}();e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return[{name:"a_Position",components:2,type:"UNSIGNED_SHORT",offset:0},{name:"a_Color",components:4,type:"UNSIGNED_BYTE",offset:4},{name:"a_Normal",components:2,type:"UNSIGNED_BYTE",offset:8},{name:"a_LineInfo",components:2,type:"UNSIGNED_BYTE",offset:10},{name:"a_LineDistance",components:1,type:"UNSIGNED_SHORT",offset:12},{name:"a_SideInfo",components:2,type:"UNSIGNED_BYTE",offset:14}]}function r(){return["Uint16","Uint16","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint16","Uint8","Uint8"]}function a(t){var e=t.transX,n=void 0===e?0:e,i=t.transY,o=void 0===i?0:i,r=t.scale,a=void 0===r?1:r;return Math.round(n/256)+4*Math.round(o/256)+16*Math.round(1/a)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),l=i(s),u=n(1),c=i(u),f=n(65),d=i(f),h=n(476),v=i(h),p=n(277),m=i(p),_=n(233),g=i(_),y=n(379),x=(i(y),n(25)),b=i(x),S=b.default.batchRender?"Uint32":"Uint16",w=function(){function t(e){(0,l.default)(this,t),e=e||{},this.normalScale=63,this.type=e.type||"default",this.noTerminal=e.noTerminal||!1,this.lineDistance=e.startDistance||0;var n=(0,v.default)(r(),o()),i=(0,v.default)([S]);this.vertiesDataBuffer=n(4096),this.indicesDataBuffer=i(4096),this.lineCount=0}return(0,c.default)(t,[{key:"addLine",value:function(t,e,n,i,o,r,s,l){function u(t,e,o,r){y=e.sub(t);var a=y.perp().unit().mult(x)._round(),s=a.mult(-1),l=e.dist(t),u=Math.max(1,Math.floor(f+l)),c=o.length,d=1024+~~t.x+S,h=1024+~~t.y+w,v=1024+~~e.x+S,p=1024+~~e.y+w;a.x+=128,a.y+=128,s.x+=128,s.y+=128,o.add([[d,h,n[0],n[1],n[2],n[3],a.x,a.y,i,b,10*f+E,T,A],[d,h,n[0],n[1],n[2],n[3],s.x,s.y,i,b,10*f+E,T,A],[v,p,n[0],n[1],n[2],n[3],s.x,s.y,i,b,10*u+E,T,A],[v,p,n[0],n[1],n[2],n[3],a.x,a.y,i,b,10*u+E,T,A]]),r.add([[c+0],[c+1],[c+3],[c+1],[c+2],[c+3]]),f=u}function c(t,e,o){var r=1.732*x,a=e.length,s=1024+~~t.x+S,l=1024+~~t.y+w;e.add([[s,l,n[0],n[1],n[2],n[3],128,2*x+128,i-0,0,10+E,T,A],[s,l,n[0],n[1],n[2],n[3],128-r,-1*x+128,i-0,0,10+E,T,A],[s,l,n[0],n[1],n[2],n[3],r+128,-1*x+128,i-0,0,10+E,T,A]]),o.add([[a+0],[a+1],[a+2]])}this.lineCount+=1,t=t||{};var f=s||1,h=t,v=h.noTerminal,p=this.vertiesDataBuffer,m=this.indicesDataBuffer,_=void 0,g=void 0,y=void 0,x=this.normalScale,b=0;o&&r?b=Math.min(10*o,240)+Math.floor(10-r/o*10):(o=0,r=0);var S=2048*(t.preWidth||0),w=2048*(t.nextWidth||0),E=t.deltaSideWidth||0,T=t.isSide||0,A=a(t.transform);f=f%(o+r)||1;for(var P=[],I=0,k=e.length/2;I<k;I++)P.push(new d.default(2*e[2*I],2*-e[2*I+1]));if(l&&P.push(P[0],P[1]),!b&&!v&&P.length>2){v||c(P[0],p,m);for(var L=1,M=P.length;L<M;L++)g=P[L],c.bind(this)(g,p,m)}for(var C=1,R=P.length;C<R;C++)_=P[C-1],g=P[C],u.bind(this)(_,g,p,m)}},{key:"addPolygon",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.vertiesDataBuffer,o=this.indicesDataBuffer,r=a(n.transform),s=g.default.mixCoords(t,"polygon",e.concat([0,0,0,0,0,0,r]),1024,2),l=m.default.flatten([s]),u=l.vertices,c=l.dimensions,f=(0,m.default)(u,l.holes,c,i.length),d=0,h=u.length/c;d<h;d++){for(var v=[],p=d*c,_=(d+1)*c;p<_;p++)v.push(u[p]);i.add([v])}o.add(f)}}]),t}();e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return[{name:"a_Position",components:2,type:"UNSIGNED_SHORT",offset:0},{name:"a_Info",components:4,type:"UNSIGNED_BYTE",offset:4},{name:"a_Color",components:4,type:"UNSIGNED_BYTE",offset:8},{name:"a_Transform",components:2,type:"UNSIGNED_BYTE",offset:12},{name:"a_Height",components:1,type:"UNSIGNED_SHORT",offset:14}]}function r(){return["Uint16","Uint16","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint8","Uint16"]}Object.defineProperty(e,"__esModule",{value:!0});var a=n(27),s=i(a),l=n(23),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(476),p=i(v),m=n(277),_=i(m),g=n(233),y=i(g),x=n(627),b=i(x),S=function(){function t(){(0,f.default)(this,t);var e=(0,p.default)(r(),o()),n=(0,p.default)(["Int16"]);this.vertiesDataBuffer=e(1024),this.indicesDataBuffer=n(1024)}return(0,h.default)(t,[{key:"add",value:function(t){var e=t.points,n=t.height,i=t.colorFill,o=t.colorSide,r=t.transform;n*=1;for(var a=r.transX,s=void 0===a?0:a,l=r.transY,c=void 0===l?0:l,f=r.scale,d=void 0===f?1:f,h=[Math.round(s/256)+16*Math.round(c/256),Math.round(1/d)],v=this.vertiesDataBuffer,p=this.indicesDataBuffer,m=y.default.mixCoords(e,"polygon",[128,128,129,0].concat((0,u.default)(i),h,[n]),2048),g=_.default.flatten([m]),x=g.vertices,b=g.dimensions,S=(0,_.default)(x,g.holes,b,v.length),w=0,E=x.length/b;w<E;w++){for(var T=[],A=w*b,P=(w+1)*b;A<P;A++)T.push(x[A]);v.add([T])}p.add(S),this.addWalls(e,m,o,h)}},{key:"addWalls",value:function(t,e,n,i){for(var o=this.vertiesDataBuffer,r=this.indicesDataBuffer,a=o.length,l=e.length,c=y.default.mixCoords(t,"polygon",[0,0,0,0].concat((0,u.default)(n),(0,u.default)(i),[0]),2048),f=[],d=[],h=1;h<l;h++){var v=[[].concat(e[h-1]),[].concat(e[h]),[].concat(c[h-1]),[].concat(c[h])],p=(0,b.default)(v[0],v[1],v[2],127,128),m=!0,_=!1,g=void 0;try{for(var x,S=(0,s.default)(v);!(m=(x=S.next()).done);m=!0){var w=x.value;w.splice.apply(w,[6,4].concat((0,u.default)(n))),w.splice(2,3,p[0],p[1],p[2])}}catch(t){_=!0,g=t}finally{try{!m&&S.return&&S.return()}finally{if(_)throw g}}[].push.apply(f,v),d.push(a+0,a+1,a+2,a+1,a+3,a+2),a+=v.length}o.add(f),r.add(d)}}]),t}();e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={increase:{},decrease:{}},i=[a(t),a(e)],o=i[0],r=i[1],s=l((0,m.default)(o),(0,m.default)(r)),u=s.sameList,c=s.increaseList,f=s.decreaseList;return c.forEach(function(t){n.increase[t]=r[t]}),f.forEach(function(t){n.decrease[t]=o[t]}),u.forEach(function(t){var e=l(o[t],r[t]),i=e.increaseList,a=e.decreaseList;i.forEach(function(e){n.increase[t]?n.increase[t].push(e):n.increase[t]=[e]}),a.forEach(function(e){n.decrease[t]?n.decrease[t].push(e):n.decrease[t]=[e]})}),n}function r(t){if("object"!==(void 0===t?"undefined":(0,v.default)(t))||null===t)return!1;if(Array.isArray(t)){var e=!0,n=!1,i=void 0;try{for(var o,a=(0,d.default)(t);!(e=(o=a.next()).done);e=!0){return!!r(o.value)}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}}return!0}function a(t){var e={};if(Array.isArray(t))t.forEach(function(t){var n=t.type,i=t.features;n&&(e[n]=s(n,i))});else{var n=t.type,i=t.features;n&&(e[n]=s(n,i))}return e}function s(t,e){if(!Array.isArray(e))return _.DEFAULT_BASEMAP[t]&&_.DEFAULT_BASEMAP[t].features;switch(t){case _.MAP_TYPE.vector:var n=[].concat((0,c.default)(e));if(n.includes("building")){var i=n.indexOf("building");n.includes("building3d")?n.splice(i,1):n.splice(i,1,"building3d")}if(n.includes("building2d")&&n.includes("building3d")){var o=n.indexOf("building2d");n.splice(o,1)}return n;case _.MAP_TYPE.satellite:case _.MAP_TYPE.traffic:case _.MAP_TYPE.handdraw:default:return e}}function l(t,e){var n=[],i=[],o=[];return Array.isArray(t)&&Array.isArray(e)&&(e.forEach(function(e){t.includes(e)?n.push(e):i.push(e)}),o=t.filter(function(t){return!n.includes(t)})),{sameList:n,increaseList:i,decreaseList:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.isVerifiedBaseMap=e.formatBaseMap=e.compareBaseMap=void 0;var u=n(23),c=i(u),f=n(27),d=i(f),h=n(20),v=i(h),p=n(18),m=i(p),_=n(339);e.compareBaseMap=o,e.formatBaseMap=a,e.isVerifiedBaseMap=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){return c||(c=new a.default(function(t){u(null,l.default.verSrc,function(e){e&&e.info&&0===e.error&&(l.default.dataVersion.sat=e.info.sat,l.default.dataVersion.tile=e.info["1d"],l.default.dataVersion.scenic=e.info.scenic),t()},function(){t()})})),c}Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),a=i(r);e.default=o;var s=n(25),l=i(s),u=n(335).send,c=void 0},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(479),_=i(m),g=n(57),y=n(28),x=n(155),b=i(x),S=n(42),w=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),t.type=g.RENDER_LAYER_TYPE.canvasGround;var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return(0,S.statCn)("CanvasGroundLayer"),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),t.canvas||new y.BaseTypeError("CanvasGroundLayer.canvas","HTMLCanvasElement",t.canvas).error(),t.bounds instanceof b.default||new y.BaseTypeError("CanvasGroundLayer.bounds","LatLngBounds",t.bounds).error(),this._mediaSource=t.canvas,this._bounds=t.bounds}},{key:"setCanvas",value:function(t){t||new y.BaseTypeError("CanvasGroundLayer.canvas","HTMLCanvasElement",t).error(),this._mediaSource!==t&&this._updateMediaSource(t)}},{key:"refresh",value:function(){this._resetData()}}]),e}(_.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(R(t)){var e=t.id,n=void 0===e?(0,b.uniqueId)():e,i=t.paths;return t.id=n,C(i)?i.flat(3).every(function(t,e){var n=N(t);return n||new P.ClassTypeError("HighlightGeometry.path["+e+"]","LatLng",t).error(),n}):(new P.BaseTypeError("HighlightGeometry.paths","Array",i).error(),!1)}return new P.BaseTypeError("HighlightGeometry","Object",t).error(),!1}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=i(r),s=n(128),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(5),m=i(p),_=n(4),g=i(_),y=n(252),x=i(y),b=n(10),S=n(81),w=n(161),E=n(57),T=n(40),A=i(T),P=n(28),I=n(223),k=i(I),L=n(125),M=n(156),C=A.default.isArray,R=A.default.isObject,N=A.default.isValidLatLng,B=new M.ExtrudablePolygonStyle({color:"#ffffff",showBorder:!1,extrudeHeight:1e3}),O=function(t){function e(t){return(0,d.default)(this,e),t.type=E.RENDER_LAYER_TYPE.highlight,t.level=L.LAYER_LEVEL.POST_PROCESS,(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t))}return(0,g.default)(e,t),(0,v.default)(e,[{key:"_initialize",value:function(t){var e=t.geometries,n=void 0===e?[]:e,i=new l.default;this.sourceId=this.id,this.maskGeoMap=i,this.highlightColor=new k.default("rgba(0, 0, 0, 0)").toArray(),this.shadeColor=new k.default("rgba(0, 0, 0, 0.4)").toArray(),n&&n.lenght>0&&this.add(n)}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:S.SOURCE_TYPE.geojson,data:{type:w.GEOMETRY_TYPES.HIGHLIGHT,geometries:[].concat((0,a.default)(this.maskGeoMap.values())),styles:{default:B,highlightColor:this.highlightColor,shadeColor:this.shadeColor}}})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}},{key:"add",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return C(e)?(e.forEach(function(e){if(o(e)){var n=e.id;t.maskGeoMap.has(n)?console.warn("HighlightLayer.add: 已存在id为"+n+"的MaskGeometry对象。"):t.maskGeoMap.set(n,e)}}),this._updateData(),this):(new P.BaseTypeError("HighlightLayer.add()传入参数","Array",e).error(),this)}},{key:"get",value:function(t){return this.maskGeoMap.get(t)}},{key:"getAll",value:function(){return[].concat((0,a.default)(this.maskGeoMap.values()))}},{key:"remove",value:function(t){if(!C(t))return new P.BaseTypeError("HighlightLayer.remove()传入参数","Array",t).error(),this;var e=this.maskGeoMap;return t.forEach(function(t){e.has(t)?e.delete(t):console.warn("HighlightLayer.remove: 不存在id为"+t+"的MaskGeometry对象。")}),this._updateData(),this}},{key:"clear",value:function(){return this.maskGeoMap.clear(),this._updateData(),this}},{key:"update",value:function(t,e){var n=e.highlightColor,i=void 0===n?"rgba(0, 0, 0, 0)":n,r=e.shadeColor,a=void 0===r?"rgba(0, 0, 0, 0.4)":r;if(!C(t))return new P.BaseTypeError("HighlightLayer.update()传入参数","Array",t).error(),this;var s=this.maskGeoMap;return t.forEach(function(t){o(t)&&(t.styleId="default",s.set(t.id,t))}),this.highlightColor=new k.default(i).toArray(),this.shadeColor=new k.default(a).toArray(),this._updateData(),this}},{key:"_updateData",value:function(){this.map&&this.map.getSource(this.sourceId).setData({type:w.GEOMETRY_TYPES.HIGHLIGHT,geometries:[].concat((0,a.default)(this.maskGeoMap.values())),styles:{default:B,highlightColor:this.highlightColor,shadeColor:this.shadeColor}})}}]),e}(x.default);e.default=O},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(479),_=i(m),g=n(57),y=n(28),x=n(155),b=i(x),S=n(42),w=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),t.type=g.RENDER_LAYER_TYPE.imageGround;var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return(0,S.statCn)("ImageGroundLayer"),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){var n=this;(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),t.src||new y.BaseTypeError("ImageGroundLayer.src","URL",t.src).error(),t.bounds instanceof b.default||new y.BaseTypeError("ImageGroundLayer.bounds","LatLngBounds",t.bounds).error();var i=new Image;this._image=i,i.crossOrigin="anonymous",i.onload=function(){n._mediaSource=i,n._bounds=t.bounds;var e=n.map;e&&n.setMap(null),n.setMap(e),n.emit("image_loaded")},i.onerror=function(){console.error("图片资源获取失败: "+t.src)},i.src=t.src}},{key:"setSrc",value:function(t){var e=this;t||new y.BaseTypeError("ImageGroundLayer.src","URL",t).error(),this._image.src!==t&&(this._image.onload=function(){e._updateMediaSource(e._image),e.emit("image_loaded")},this._image.src=t)}}]),e}(_.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(252),_=i(m),g=n(81),y=n(125),x=n(57),b=function(t){function e(t){return(0,s.default)(this,e),t.level=t.type!==x.RENDER_LAYER_TYPE.indoorPoi?y.LAYER_LEVEL.BUILDING:y.LAYER_LEVEL.OVERLAY_NAA,t.zIndex=0,(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),this.buildingData=t.buildingData,this.filter=t.type,this.sourceId||(this.sourceId=this.id)}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:g.SOURCE_TYPE.indoor,data:this.buildingData})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(_.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(252),_=i(m),g=n(81),y=function(t){function e(t){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t))}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),this.sourceData=t.sourceData,this.sourceId=this.id,this.minimumClusterSize=t.minimumClusterSize,this.gridSize=t.gridSize,this.averageCenter=t.averageCenter}},{key:"_addSource",value:function(){this.map&&!this.map.getSource(this.sourceId)&&this.map.addSource(this.sourceId,{type:g.SOURCE_TYPE.geoTask,data:this.sourceData,workerOptions:{gridSize:this.gridSize,minimumClusterSize:this.minimumClusterSize,averageCenter:this.averageCenter},maxZoom:this.maxZoom})}},{key:"_removeSource",value:function(){this.map&&this.map.removeSource(this.sourceId)}}]),e}(_.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(380),_=i(m),g=n(81),y=n(57),x=n(40),b=i(x),S=n(28),w=n(223),E=i(w),T=n(42),A=n(25),P=b.default.isNumber,I=b.default.isArray,k=["#13b06a","#e9ab1d","#e05649","#6c120a"],L=[80,30,10,5],M=function(t){function e(t){(0,s.default)(this,e),t.type=y.RENDER_LAYER_TYPE.trafficFlow;var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return(0,T.statCn)("TrafficFlowTileLayer"),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(t){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"_initialize",this).call(this,t),this.sourceId=this.sourceId||this.id,this.setColor(t.flowColor),this.setSpeed(t.flowSpeed)}},{key:"setZIndex",value:function(t){return P(t)||new S.BaseTypeError("TrafficFlowTileLayer.zIndex","number",t).error(),(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"setZIndex",this).call(this,t)}},{key:"setColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;I(t)||(new S.BaseTypeError("flowColor","Array",t).error(),t=k),4!==t.length&&(console.error("flowColor 格式错误：需传入长度为4的数组"),t=k),this.flowColor=t.map(function(t){return new E.default(t).toUpArray()})}},{key:"setSpeed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;I(t)||(new S.BaseTypeError("flowSpeed","Array",t).error(),t=L),4!==t.length&&(console.error("flowSpeed 格式错误：需传入长度为4的数组"),t=L),this.flowSpeed=t}},{key:"_addSource",value:function(){this.map&&this.map.keepHighFps(!0),this.map&&!this.map.getSource(this.sourceId)&&(this.map.addSource(this.sourceId,{type:g.SOURCE_TYPE.trafficFlow,tileSize:this.tileSize,data:function(t,e,n){var i=(t+e)%A.trafficSrc.length;return A.trafficSrc[i]+"?x="+t+"&y="+(Math.pow(2,n)-1-e)+"&z="+n+"&type=jsonp&time="+(new Date).getTime()},minZoom:this.minDataZoom,maxZoom:this.maxDataZoom,flowColor:this.flowColor,flowSpeed:this.flowSpeed}),this._fire("layer",{}))}},{key:"_removeSource",value:function(){this.map&&this.map.keepHighFps(!1),this.map&&this.map.removeSource(this.sourceId),this._fire("source_removed",{})}}]),e}(_.default);e.default=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.params;e.hasOwnProperty("version")||(e.version="1.3.0"),e.hasOwnProperty("CRS")||(e.CRS="EPSG:3857");var n="";for(var i in e)n=n+"&"+i+"="+e[i];return function(e,i,o){var r=new g(0,0),a=new g(0,0),s=Math.pow(2,o-1);return r.x=(e/s-1)*x,r.y=(1-(i+1)/s)*x,a.x=((e+1)/s-1)*x,a.y=(1-i/s)*x,t.url+"?REQUEST=GetMap&SERVICE=WMS"+n+"&WIDTH=256&HEIGHT=256&FORMAT=image/png&TRANSPARENT=true&BBOX="+r.x+","+r.y+","+a.x+","+a.y}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),s=n(0),l=i(s),u=n(5),c=i(u),f=n(4),d=i(f),h=n(328),v=i(h),p=n(242),m=i(p),_=n(42),g=n(65),y=m.default[1],x=y/2,b=function(t){function e(t){(0,l.default)(this,e),t.getTileUrl=o(t);var n=(0,c.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return(0,_.statCn)("WMSLayer"),n}return(0,d.default)(e,t),e}(v.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.params,n="";e.hasOwnProperty("version")||(e.version="1.0.0");for(var i in e)n=n+"&"+i+"="+e[i];return function(i,o,r){var a="geoserver"===t.service?e.tileMatrixSet+":"+r:r;return t.url+"?Request=GetTile&Service=WMTS"+n+"&Format=image/png&TileMatrix="+a+"&TileRow="+o+"&TileCol="+i}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),s=n(0),l=i(s),u=n(5),c=i(u),f=n(4),d=i(f),h=n(328),v=i(h),p=n(42),m=function(t){function e(t){(0,l.default)(this,e),t.getTileUrl=o(t);var n=(0,c.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return(0,p.statCn)("WMTSLayer"),n}return(0,d.default)(e,t),e}(v.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return new Mt[e.type](t,e,n)}function r(t,e){return t instanceof Array?{imgBase64List:[].concat(t).concat(e),extOffset:t.length}:{imgBase64List:[t,e],extOffset:1}}function a(t,e){var n=e.id;return new I.default(function(e,i){if(t){var o=new Image;o.onload=function(){e(o)},o.onerror=function(){i(n)},o.src="data:img/png;base64,"+t}else e(null)})}function s(t){var e=document.createElement("canvas"),n=[],i=0,o=0;if(t.forEach(function(t){t&&(i=Math.max(t.width,i),o+=t.height)}),e.width=i,e.height=o,i&&o){var r=e.getContext("2d"),a=0;return t.forEach(function(t){n.push(a),t&&(r.drawImage(t,0,a),a+=t.height)}),{canvas:e,yOffset:n}}return{}}var l,u=n(115),c=i(u),f=n(30),d=i(f),h=n(27),v=i(h),p=n(236),m=i(p),_=n(120),g=i(_),y=n(18),x=i(y),b=n(20),S=i(b),w=n(281),E=i(w),T=n(280),A=i(T),P=n(21),I=i(P),k=n(3),L=i(k),M=n(0),C=i(M),R=n(1),N=i(R),B=n(5),O=i(B),D=n(4),z=i(D),V=n(172),F=i(V),U=n(481),Y=n(615),j=i(Y),G=n(619),Z=i(G),H=n(686),W=i(H),X=n(487),Q=i(X),q=n(667),J=i(q),K=n(670),$=i(K),tt=n(674),et=i(tt),nt=n(672),it=i(nt),ot=n(669),rt=i(ot),at=n(677),st=i(at),lt=n(81),ut=n(57),ct=n(339),ft=n(652),dt=n(299),ht=n(688),vt=i(ht),pt=n(689),mt=n(492),_t=n(383),gt=n(653),yt=i(gt),xt=n(503),bt=n(777),St=i(bt),wt=n(378),Et=n(477),Tt=n(125),At=n(28),Pt=n(478),It=n(93),kt=n(25),Lt=n(10),Mt=(l={},(0,F.default)(l,lt.SOURCE_TYPE.vector,W.default),(0,F.default)(l,lt.SOURCE_TYPE.geojson,Q.default),(0,F.default)(l,lt.SOURCE_TYPE.geoTask,J.default),(0,F.default)(l,lt.SOURCE_TYPE.imageTile,$.default),(0,F.default)(l,lt.SOURCE_TYPE.indoor,et.default),(0,F.default)(l,lt.SOURCE_TYPE.ground,rt.default),(0,F.default)(l,lt.SOURCE_TYPE.trafficFlow,st.default),l),Ct=function(t){function e(t,n){(0,C.default)(this,e);var i=(0,O.default)(this,(e.__proto__||(0,L.default)(e)).call(this));return i.map=n,i._visualPlugins={},i._layers={},i._sources={},i._stylePromise=null,i.dispatcher=new j.default(Z.default,i,t.workerCount),i.iconsLoader=new St.default,i._mapStyleId=t.mapStyleId,i._finalUsedMapStyleId=dt.STYLE_ID[i._mapStyleId],i._lastStyleId=dt.STYLE_ID[i._mapStyleId],i._baseMap=null===t.baseMap?null:t.baseMap||ct.DEFAULT_BASEMAP.vector,i._baseLayerList=[],i._setEventedParent(n,null),i._on("loaderror",function(t){var e=t.tile,n=t.error;console.error("加载瓦片发生错误："+e.coord.id,e,n)}),(0,yt.default)().then(function(){i.initBaseLayer()}),i.loadStyle().then(function(t){var e=t.styleId;i._fire("mapstyle_changed",{styleId:e})}).catch(function(){}),i}return(0,z.default)(e,t),(0,N.default)(e,[{key:"getStyleIdPromise",value:function(){return(0,vt.default)(this._mapStyleId,this.map.id)}},{key:"loadStyle",value:function(){var t=this;if(!this._stylePromise){var e=!1;this._stylePromise=this.getStyleIdPromise().then(function(n){if(e)return I.default.reject("加载样式aborted");t._finalUsedMapStyleId=n,t._lastStyleId=n;var i=(0,pt.loadPoiIconFile)(n,kt.iconSrc).then(function(e){return t.iconsLoader.load(e)}),o=(0,mt.loadPoiIconIndexFile)(n,kt.iconIndexSrc),r=(0,_t.loadStyleFile)(n,n);return I.default.all([i,o,r]).then(function(){return e?I.default.reject("加载样式aborted"):{styleId:n,iconInfo:{scale:t.iconsLoader.scale,w:t.iconsLoader.w,h:t.iconsLoader.h}}})}),this._stylePromise.abort=function(){e=!0}}return this._stylePromise}},{key:"setMapStyleId",value:function(){function t(t){return e.apply(this,arguments)}var e=(0,A.default)(E.default.mark(function t(e){var n,i=this;return E.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this._mapStyleId||"config"===this._finalUsedMapStyleId){t.next=2;break}return t.abrupt("return");case 2:return this._mapStyleId=e,n=this._finalUsedMapStyleId,this._stylePromise.abort(),this._stylePromise=null,this.loadStyle().then(function(t){var e=t.styleId,o=t.iconInfo;e!==n&&i.resetStyle(e,o)}),t.abrupt("return",this);case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"loadStyleConfig",value:function(t){var e=this;if(!this._stylePromise){var n=t.style,i=t.icon,o=void 0===i?null:i,r=t.iconIndex,a=void 0===r?null:r;"config"!==this._finalUsedMapStyleId&&(this._lastStyleId=this._finalUsedMapStyleId,this._finalUsedMapStyleId="config");var s=!1,l=(0,_t.setStyleConfig)(n,"config"),u=void 0,c=void 0;o&&a?(u={data:o},c={data:a}):(u={styleId:0,iconSrc:kt.iconSrc},c={styleId:0,iconIndexSrc:kt.iconIndexSrc});var f=(0,pt.setPoiIcon)(u).then(function(t){return e.iconsLoader.load(t)}),d=(0,mt.setPoiIconIndex)(c);this._stylePromise=I.default.all([l,f,d]).then(function(){return s?I.default.reject("加载样式aborted"):{styleId:"config",iconInfo:{scale:e.iconsLoader.scale,w:e.iconsLoader.w,h:e.iconsLoader.h}}}),this._stylePromise.abort=function(){s=!0}}return this._stylePromise}},{key:"setMapStyleConfig",value:function(t){var e=this,n=t.style,i=t.icon,o=void 0===i?void 0:i,r=t.iconIndex,a=void 0===r?void 0:r;return n?o&&"string"!=typeof o?void console.error("icon属性不合法"):a&&"object"!==(void 0===a?"undefined":(0,S.default)(a))?void console.error("iconIndex属性不合法"):(this._stylePromise.abort(),this._stylePromise=null,void this.loadStyleConfig(t).then(function(t){var n=t.styleId,i=t.iconInfo;e.resetStyle(n,i)})):void console.error("setMapStyleConfig中style属性不合法")}},{key:"resetStyle",value:function(t,e){var n=this,i=[];(0,x.default)(this._sources).forEach(function(t){n._sources[t].id&&n._sources[t].id.indexOf("vector_source")>=0&&i.push(n._sources[t])}),i.length>0&&i.forEach(function(n){n.setStyleAndIconInfo(t,e),n.clearTiles()}),this._fire("mapstyle_changed",{styleId:t})}},{key:"initBaseLayer",value:function(t){var e=this;if(this._baseMap||t){if(t||(t=this._baseMap),Array.isArray(t))return void t.forEach(function(t){e.initBaseLayer(t)});switch(t.type){case ct.MAP_TYPE.handdraw:(0,U.createHanddrawLayer)(this.map);break;case ct.MAP_TYPE.satellite:(0,U.createSatelliteLayer)(this.map,{features:t.features});break;case ct.MAP_TYPE.traffic:(0,U.createTrafficLayer)(this.map,t);break;case ct.MAP_TYPE.vector:default:(0,U.createVectorLayer)(this.map,{features:t.features})}}}},{key:"resetBaseLayer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct.DEFAULT_BASEMAP.vector;if(!(0,ft.isVerifiedBaseMap)(e))return console.error("setBaseMap传入的参数不合法",e),this;var n=Array.isArray(e)?e.map(function(t){return t.type}):[e.type];null===this._baseMap&&(this._baseMap={});var i=(0,ft.compareBaseMap)(this._baseMap,e),o=i?(0,g.default)(i.increase):[],r=i?(0,g.default)(i.decrease):[];r.length>0&&this._handleDecreaseBaseMap(r),o.length>0&&this._handleIncreaseBaseMap(o);var a=(0,ft.formatBaseMap)(e).vector;a&&0===a.length?this._setSourceFrozen("vector_source",!0):this._setSourceFrozen("vector_source",!1);var s=(0,m.default)(ct.SATELLITE_LAYER_ID),l=void 0,u=0;return n.forEach(function(e){switch(e){case ct.MAP_TYPE.handdraw:l=t.getLayer(ct.MAP_TYPE.handdraw),l&&l.setZIndex(u+=1);break;case ct.MAP_TYPE.satellite:s.forEach(function(e){(l=t.getLayer(e))&&l.setZIndex(u+=1)});break;case ct.MAP_TYPE.traffic:(0,m.default)(ct.TRAFFIC_LAYER_ID).forEach(function(e){(l=t.getLayer(e))&&l.setZIndex(u+=1)});break;case ct.MAP_TYPE.vector:l=t.getLayer(ct.VECTOR_LAYER_ID.base),l&&l.setZIndex(u+=1)}}),this._baseMap=e,this}},{key:"_handleIncreaseBaseMap",value:function(t){var e=this,n=[],i=!0,o=!1,r=void 0;try{for(var a,s=(0,v.default)(t);!(i=(a=s.next()).done);i=!0)!function(){var t=(0,d.default)(a.value,2),i=t[0],o=t[1],r=[];switch(i){case ct.MAP_TYPE.traffic:case ct.MAP_TYPE.satellite:var s=i===ct.MAP_TYPE.satellite?ct.SATELLITE_LAYER_ID:ct.TRAFFIC_LAYER_ID;o.forEach(function(t){e._layers[s[t]]?(e._setLayerVisible(s[t],!0),e._setSourceFrozen(s[t],!1)):r.push(t)}),r.length>0&&n.push({type:i,features:r});break;case ct.MAP_TYPE.handdraw:e._layers[i]?(e._setLayerVisible(ct.MAP_TYPE.handdraw,!0),e._setSourceFrozen(ct.MAP_TYPE.handdraw,!1)):n.push({type:i});break;case ct.MAP_TYPE.vector:o.forEach(function(t){switch(t){case ut.BASE_LAYER_TYPE.base:e._layers[ct.VECTOR_LAYER_ID.base]?e._setLayerVisible(ct.VECTOR_LAYER_ID.base,!0):r.push(t);break;case ut.BASE_LAYER_TYPE.arrow:e._layers[ct.VECTOR_LAYER_ID.arrow]?e._setLayerVisible(ct.VECTOR_LAYER_ID.arrow,!0):r.push(t);break;case ut.BASE_LAYER_TYPE.building2d:case ut.BASE_LAYER_TYPE.building3d:r.push(t);break;case ut.BASE_LAYER_TYPE.point:case ut.BASE_LAYER_TYPE.label:var n=e._layers[ct.VECTOR_LAYER_ID.poi],i=t===ut.BASE_LAYER_TYPE.point?ut.BASE_LAYER_TYPE.label:ut.BASE_LAYER_TYPE.point;if(n){var o=t+"_"+n.id,a=i+"_"+n.id;n.hasChild(o)?(n.getChild(o).setVisible(!0),e.map.drawManager.updatePlace()):(n.hasChild(a)&&!1!==n.getChild(a).visible&&r.push(i),n.setMap(null),r.push(t))}else r.push(t)}}),r.length>0&&n.push({type:i,features:r})}}()}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}this.initBaseLayer(n)}},{key:"_handleDecreaseBaseMap",value:function(t){var e=this,n=!0,i=!1,o=void 0;try{for(var r,a=(0,v.default)(t);!(n=(r=a.next()).done);n=!0){var s=(0,d.default)(r.value,2),l=s[0],u=s[1];switch(l){case ct.MAP_TYPE.traffic:case ct.MAP_TYPE.satellite:if("break"===function(){var t=l===ct.MAP_TYPE.satellite?ct.SATELLITE_LAYER_ID:ct.TRAFFIC_LAYER_ID,n=(0,x.default)(t);return u.forEach(function(i){n.includes(i)&&(e._setLayerVisible(t[i],!1),e._setSourceFrozen(t[i],!0))}),"break"}())break;case ct.MAP_TYPE.handdraw:this._setLayerVisible(ct.MAP_TYPE.handdraw,!1),this._setSourceFrozen(ct.MAP_TYPE.handdraw,!0);break;case ct.MAP_TYPE.vector:u.forEach(function(t){switch(t){case ut.BASE_LAYER_TYPE.base:e._setLayerVisible(ct.VECTOR_LAYER_ID.base,!1);break;case ut.BASE_LAYER_TYPE.arrow:e._setLayerVisible(ct.VECTOR_LAYER_ID.arrow,!1);break;case ut.BASE_LAYER_TYPE.building2d:case ut.BASE_LAYER_TYPE.building3d:var n=e._layers[ct.VECTOR_LAYER_ID.building];n&&n.setMap(null);break;case ut.BASE_LAYER_TYPE.point:case ut.BASE_LAYER_TYPE.label:var i=e._layers[ct.VECTOR_LAYER_ID.poi];i&&i.hasChild(t+"_"+i.id)&&i.getChild(t+"_"+i.id).setVisible(!1)}})}}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"_setLayerVisible",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._layers[t];return n&&n.setVisible(e),this}},{key:"_setSourceFrozen",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getSource(t);return n&&(e?n.freeze():n.unfreeze()),this}},{key:"getFinalUsedMapStyleId",value:function(){return this._finalUsedMapStyleId}},{key:"getSource",value:function(t){return this._sources[t]}},{key:"addSource",value:function(t,e){var n=o(t,e,this.dispatcher);this._sources[t]=n,n._setEventedParent(this,function(){return{source:n,sourceId:t}}),n.onAdd(this.map)}},{key:"removeSource",value:function(t){if(this._sources[t]){var e=this._sources[t];delete this._sources[t],e._setEventedParent(null),e.clear(),e.onRemove&&e.onRemove(this.map)}}},{key:"addIndoorIndexSource",value:function(t){return new it.default(t,this.dispatcher)}},{key:"removeLayer",value:function(t){var e=this._layers[t];if(!e)return void this._fire("error",{error:new Error("The layer '"+t+"' does not exist in map")});e._setEventedParent(null),delete this._layers[t]}},{key:"getLayer",value:function(t){return this._layers[t]}},{key:"findLayer",value:function(t){return(0,m.default)(this._layers).find(t)}},{key:"addLayer",value:function(t){this._layers[t.id]=t,t._setEventedParent(this,{layer:{id:t.id}})}},{key:"_serializeLayers",value:function(){var t=[],e=(0,x.default)(this._layers),n=!0,i=!1,o=void 0;try{for(var r,a=(0,v.default)(e);!(n=(r=a.next()).done);n=!0){var s=r.value,l=this._layers[s];t.push(l)}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return t.length>1&&t.sort(function(t,e){return t.rank-e.rank}),t}},{key:"getDrawLayers",value:function(){return(0,m.default)(this._layers).reduce(function(t,e){return t.concat(e.flat())},[])}},{key:"getDrawSource",value:function(t){var e=this,n={};return Lt.forIn(this._layers,function(i,o){var r=o.sourceId||o.layerSourceId,a=e.map.getSource(r);a&&t>=o.minZoom&&t<=o.maxZoom&&(n[r]=a)}),n}},{key:"_updateSource",value:function(t,e,n){var i=this.getDrawSource(t.zoom);Lt.forIn(i,function(i,o){o&&!0!==o.isFrozen&&o.update(t,e,n)})}},{key:"updateIndoorData",value:function(t,e){Lt.forIn(this._sources,function(n,i){i.updateIndoorData&&i.updateIndoorData(t,e)})}},{key:"moveLayer",value:function(t,e){var n=(0,m.default)(Tt.LAYER_LEVEL);if(!n.includes(e))return void new At.EnumError("level",n,e).error();var i=this._layers[t]||this._visualPlugins[t];if(i){if(i.setLevel(e),(0,Pt.hasBorderLayer)(i.type)){var o=t+"_border";this.moveLayer(o,e)}}else console.log("moveLayer: 当前地图不存在此图层 "+t)}},{key:"update",value:function(){}},{key:"addVisualPlugin",value:function(t){var e=t.id;if(this._visualPlugins[e])return void console.warn("The visualPlugin '"+e+"' already exists in map");this._visualPlugins[e]=t}},{key:"removeVisualPlugin",value:function(t){if(!this._visualPlugins[t])return void console.warn("The visualPlugin '"+t+"' does not exist in map");delete this._visualPlugins[t]}},{key:"getPlugins",value:function(){return(0,m.default)(this._visualPlugins)}},{key:"_sortPlugins",value:function(t,e){var n=(0,m.default)(t);return Lt.bubbleSort(n,e),n}},{key:"uploadTileImage",value:function(t,e,n){var i=this,o=e.tileId,l=r(e.imgBase64,e.extImgBase64),u=l.imgBase64List,c=l.extOffset;if(o&&u.length){this.map.renderEngine.painters.symbol.preDraw({iconsLoader:this.iconsLoader});var f=this.map.renderEngine.textCache;if(f&&!f.tiles[o]){var d=new xt.ScheduleTaskNode;d.tileId=o;var h=function(){if(f.tiles[o])return n(null,null),null;var t=null,r=!1,l=!1,d=null,h=[];if((0,Et.isInterceptForBase64)(i.map.getZoom(),e.zoom,e.maxDataZoom))return r=!0,l=!0,n(null,null),null;var v=u.map(function(t,e){return a(t,{id:o+"_"+e})});return I.default.all(v).then(function(e){var n=s(e),i=n.canvas,o=n.yOffset;t=i,h=o,r=!0,d&&d()}).catch(function(t){console.error("img upload failed ",t)}),d=function(){if(r&&!l)return(0,Et.isInterceptForGPU)(i.map.getZoom(),e.zoom,e.maxDataZoom)?(l=!0,n(null,null),null):t?(f.addImage(o,t,function(){t=null,f.tiles[o].yOffsetList=h,l=!0,n(null,{yOffsetList:h,extOffset:c})}),d):(n(null,{yOffsetList:h,extOffset:c}),null);if(l){if((0,Et.isInterceptForTileData)(i.map.getZoom(),e.zoom,e.maxDataZoom))return null;var a=i.getSource(e.sourceId),s=a&&a.getDrawItems(),u=s&&s[o],v=u&&u.getData();return v?(v[ut.BASE_LAYER_TYPE.text]||(v[ut.BASE_LAYER_TYPE.text]={},v[ut.BASE_LAYER_TYPE.text][o]=t&&t.toDataURL()||""),null):d}return d},d.tileId=o,null};h.tileId=o,d.setCallback(h),d.addToQueue(this.map.fpsManager.scheduleTaskQueue)}else f&&n(null,{yOffsetList:f.tiles[o].yOffsetList,extOffset:c})}else n(null,null)}},{key:"addGlyphs",value:function(t,e,n,i){if(e.glyphs&&e.glyphs.length>0){var o=this.map.renderEngine.glyphManager.generateAtlas(e.glyphs,i||{});n(null,{mapping:(0,c.default)(o.mapping)})}else n(null,{mapping:"{}"})}},{key:"addMarkers",value:function(t,e,n){e.markerSrcs&&e.markerSrcs.length>0?this.map.renderEngine.markerManager.generateAtlas(e.markerSrcs,e.glyphs).then(function(t){n(null,{mapping:(0,c.default)(t)})}).catch(function(t){console.error(t),n(null,{mapping:"{}"})}):n(null,{mapping:"{}"})}},{key:"addBillboards",value:function(t,e,n){if(e.markerSrcs&&e.markerSrcs.length>0||e.tileId){var i=e.markerSrcs,o=null;e.tileId&&(o=JSON.parse(e.billboardData),i=o.map(function(t){return t.text})),this.map.renderEngine.markerManager.generateAtlas(i,null,{tileId:e.tileId,tileImage64:e.tileImage64,billboardData:o}).then(function(t){n(null,{mapping:(0,c.default)(t)})}).catch(function(t){console.error(t),n(null,{mapping:"{}"})})}else n(null,{mapping:"{}"})}},{key:"uploadTileTexture",value:function(t,e,n){var i=this;if(e.billboard||e.glyphs){var o=new I.default(function(n){i.addBillboards(t,e.billboard,function(t,e){n(e.mapping)})}),r={glyphs:[]},a={glyphs:[]};e.glyphs&&e.glyphs.forEach(function(t){"bold"===t.font_weight?a.glyphs.push(t.text):r.glyphs.push(t.text)});var s=new I.default(function(e){i.addGlyphs(t,r,function(t,n){e(n.mapping)},{fontWeight:"normal"})}),l=new I.default(function(e){i.addGlyphs(t,a,function(t,n){e(n.mapping)},{fontWeight:"bold"})});I.default.all([o,s,l]).then(function(t){n(null,{billboardMapping:t[0],glyphMapping:t.slice(1)})})}else n(null,{billboardMapping:"{}",glyphMapping:"{}"})}},{key:"getIndoorGlyphInfo",value:function(t,e,n){var i=this;if(e.pointInfoSet||e.glyphList||e.iconSrcList){var o=new I.default(function(n){i.addMarkers(t,{markerSrcs:e.iconSrcList},function(t,e){n(e.mapping)})}),r=new I.default(function(n){i.addGlyphs(t,{glyphs:e.glyphList},function(t,e){n(e.mapping)})}),a=JSON.parse(e.indoorStyle),s=new I.default(function(t){var n=document.createElement("canvas"),i=n.getContext("2d"),o=JSON.parse(e.pointInfoSet),r={};(0,x.default)(o).forEach(function(t){var e=parseInt(t.replace("zoom",""),10);r[e]=o[t].filter(function(t){return!!t}).map(function(t){return t.map(function(t){return(0,wt.getPoiRect)(t,e,i,a)})})}),t((0,c.default)(r))});I.default.all([o,r,s]).then(function(t){n(null,{iconMapping:t[0],glyphMapping:t[1],poiMapping:t[2]})})}else n(null,{iconMapping:"{}",glyphMapping:"{}",poiMapping:"{}"})}},{key:"destroy",value:function(){var t=this;(0,x.default)(this._visualPlugins).forEach(function(e){t._visualPlugins[e].remove()}),this._visualPlugins=null,(0,m.default)(this._layers).forEach(function(t){t.setMap(null)}),this._layers=null,(0,x.default)(this._sources).forEach(function(e){t.removeSource(e)}),this._sources=null,this._stylePromise=null,this.dispatcher.destroy(),this.iconsLoader=null,this._mapStyleId=null,this._finalUsedMapStyleId=null,this._lastStyleId=null,this._baseMap=null,this._clearAllListeners(),this.map=null}},{key:"baseMap",get:function(){return this._baseMap},set:function(t){this.resetBaseLayer(t)}}]),e}(It);t.exports=Ct},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(10),p=n(93),m=i(p),_=n(382),g=i(_),y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.uniqueId)(),n=arguments[1],i=arguments[2];(0,s.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this)),a=n.cacheSize,l=void 0===a?0:a;return o.id=t,o.dispatcher=i,o.cache=new g.default(l,o.onCacheRemove.bind(o)),o.isFrozen=!1,o.updateUniqueId(),o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"updateUniqueId",value:function(){var t=this.map&&this.map.id||(0,v.uniqueId)();this.uniqueId=t+"_"+this.id}},{key:"getUniqueId",value:function(){return this.uniqueId}},{key:"update",value:function(){this.isFrozen||this.onUpdate.apply(this,arguments)}},{key:"freeze",value:function(){this.isFrozen=!0}},{key:"unfreeze",value:function(){this.isFrozen=!1}},{key:"clear",value:function(){this.cache.reset(),this.onClear()}},{key:"reload",value:function(){this.cache.reset(),this.onReload()}},{key:"onAdd",value:function(t){this.map=t,this.updateUniqueId()}},{key:"onRemove",value:function(){this.map=null}},{key:"getDrawItems",value:function(){return{}}},{key:"onCacheRemove",value:function(){}},{key:"onUpdate",value:function(){}},{key:"onClear",value:function(){}},{key:"onReload",value:function(){}}]),e}(m.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(255),r=i(o),a=n(23),s=i(a),l=n(128),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(25),p=i(v),m=n(10),_={UP:4,DOWN:3},g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.add,i=e.remove,o=e.show,r=e.minZoom,a=void 0===r?p.default.minZoom:r,s=e.maxZoom,l=void 0===s?p.default.maxZoom:s,c=e.round,d=void 0===c||c;(0,f.default)(this,t),this.config={minZoom:a,maxZoom:l,round:d},this.add=n,this.remove=i,this.show=o,this.coordPool=new u.default,this.deps=new u.default,this.responsers=new u.default,this.waitingPool=new u.default}return(0,h.default)(t,[{key:"getTileCoord",value:function(t){return this.coordPool.get(t)}},{key:"isLoaded",value:function(t){var e=this.getTileCoord(t);return e&&e.loaded}},{key:"clear",value:function(){var t=this;this.coordPool.forEach(function(e){t.remove(e)}),this.coordPool.clear(),this.deps.clear(),this.responsers.clear()}},{key:"update",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.config,a=o.round,l=o.minZoom,u=o.maxZoom,c=[].concat((0,s.default)(this.coordPool.values()));t=(0,m.clamp)(t,l,u),a&&(t=Math.round(t));var f=e.coveringTiles({zoom:t,round:a,minZoom:l,maxZoom:u}),d=new r.default(f.map(function(t){return t.id})),h=f.filter(function(t){return!n.coordPool.has(t.id)}),v=c.filter(function(t){return!d.has(t.id)});this.dealWithRemoveList(v,d,t),this.dealWithAddList(h,i.reason)}},{key:"dealWithRemoveList",value:function(t,e,n){var i=this;t.length,t.forEach(function(t){var o=i.isLoaded(t.id),r=t.z-n,a=(0,m.isInRange)(r,-_.DOWN,_.UP);if(o&&a)if(r>0){var s=t.ancestor(n);if(e.has(s.id))return void i.markTileToRemove(t,[s])}else if(r<0){var l=t.descendant(n),u=l.filter(function(t){return e.has(t.id)});if(u.length>0)return void i.markTileToRemove(t,u)}i.removeTile(t)})}},{key:"dealWithAddList",value:function(t,e){var n=this;t.length,t.forEach(function(t){n.addTile(t,e)})}},{key:"addTile",value:function(t,e){var n=this;t&&(t.loaded=!1,this.coordPool.set(t.id,t),this.add(t,e).then(function(){t.loaded=!0,n.removeMarkedTile(t)}))}},{key:"removeTile",value:function(t){t&&(this.isLoaded(t.id)||this.removeMarkedTile(t),this.removeFromMarked(t),this.showWaitingTiles(t.id),this.coordPool.delete(t.id),this.remove(t))}},{key:"markTileToRemove",value:function(t,e){var n=this,i=e.filter(function(t){return!n.isLoaded(t.id)});this.deps.set(t.id,new r.default(i.map(function(t){return t.id}))),i.forEach(function(e){var i=e.id;n.responsers.has(i)||n.responsers.set(i,new r.default),n.responsers.get(i).add(t.id)})}},{key:"removeMarkedTile",value:function(t){var e=this,n=void 0,i=this.responsers.get(t.id);i&&i.size&&i.forEach(function(i){if(e.deps.has(i)){var o=e.deps.get(i);o.delete(t.id),0===o.size?(e.deps.delete(i),e.removeTile(e.getTileCoord(i))):n=i}else e.removeTile(e.getTileCoord(i))}),this.responsers.delete(t.id),n?this.addTileToWaitingPool(t.id,n):this.show(t)}},{key:"removeFromMarked",value:function(t){var e=this,n=this.deps.get(t.id);n&&n.size&&n.forEach(function(n){var i=e.responsers.get(n);i.delete(t.id),0===i.size&&e.responsers.delete(n)}),this.deps.delete(t.id)}},{key:"addTileToWaitingPool",value:function(t,e){this.waitingPool.has(e)?this.waitingPool.get(e).add(t):this.waitingPool.set(e,new r.default([t]))}},{key:"showWaitingTiles",value:function(t){var e=this;this.waitingPool.has(t)&&(this.waitingPool.get(t).forEach(function(t){var n=e.getTileCoord(t);n&&e.show(n)}),this.waitingPool.delete(t))}}]),t}();e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(666),p=i(v),m=n(485),_=i(m),g=function(t){function e(t,n,i){(0,s.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i));return o.loading={},o.loaded={},o}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_indexData",value:function(t,e,n){try{var i={enableGeodesic:e.enableGeodesic||!1,features:{geometries:e.geometries,styles:e.styles,_eraseOpts:e._eraseOpts},type:e.type};n(null,i)}catch(t){return n(t)}}},{key:"loadTile",value:function(t,e){function n(t,n){return delete this.loading[i][o],t?e(t):n?(r.vectorTile=n,r.parse(n,this.actor,e),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][o]=r)):e(null,null)}var i=t.source,o=t.uid;this.loading[i]||(this.loading[i]={}),this.loading[i][o]=new p.default(t);var r=this.loading[i][o];r.abort=this.loadVectorData(t,n.bind(this))}},{key:"abortTile",value:function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])}},{key:"removeTile",value:function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n],this.removeSource(t)}}]),e}(_.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(276),u=i(l),c=n(635),f=i(c),d=n(633),h=i(d),v=n(632),p=i(v),m=n(471),_=i(m),g=n(472),y=i(g),x=n(325),b=i(x),S=n(634),w=i(S),E=n(161),T=function(){function t(e){(0,r.default)(this,t),this.uid=e.uid,this.coord=e.coord}return(0,s.default)(t,[{key:"parse",value:function(t,e,n){var i=void 0,o=this.coord.x+"_"+this.coord.y+"_"+this.coord.z,r={};switch(t.type){case E.GEOMETRY_TYPES.HIGHLIGHT:i=(0,u.default)(t.features,e),i.highlightColor=t.features.styles.highlightColor,i.shadeColor=t.features.styles.shadeColor;break;case E.GEOMETRY_TYPES.MASK:i=(0,w.default)(t.features,e);break;case E.GEOMETRY_TYPES.POLYGON:i=(0,u.default)(t.features,e);break;case E.GEOMETRY_TYPES.CIRCLE:i=(0,_.default)(t.features,e);break;case E.GEOMETRY_TYPES.ELLIPSE:i=(0,y.default)(t.features,e);break;case E.GEOMETRY_TYPES.RECTANGLE:i=(0,b.default)(t.features,e);break;case E.GEOMETRY_TYPES.POLYLINE:i=(0,f.default)(t.features,t.enableGeodesic),i.uid=this.uid;break;case E.GEOMETRY_TYPES.POINT:return void(0,h.default)(t.features,e,function(t){r[o]=t,n(null,r)});case E.GEOMETRY_TYPES.LABEL:return void(0,p.default)(t.features,e,function(t){r[o]=t,n(null,r)})}r[o]=i,n(null,r)}}]),t}();e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(487),p=i(v),m=n(81),_=function(t){function e(t,n,i){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_initialize",value:function(){this.type=m.SOURCE_TYPE.geoTask}},{key:"update",value:function(){}},{key:"getCluster",value:function(t,e){var n={type:this.type,pixelsPerDegree:t.pixelsPerDegree,resetCluster:t.resetCluster,mapBounds:t.mapBounds,zoom:t.zoom,maxZoom:this.maxZoom,source:this.getUniqueId()};this.dispatcher.send(this.type+".getCluster",n,function(t,n){if(t||!n)return void console.error(t);var i=JSON.parse(n);return e(i)},this.workerID)}}]),e}(p.default);e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(115),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(485),_=i(m),g=n(636),y=i(g),x=!1,b=function(t){function e(t,n,i){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i))}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_indexData",value:function(t,e,n){try{var i={task:new y.default(e,{minimumClusterSize:t.minimumClusterSize,gridSize:t.gridSize,averageCenter:t.averageCenter})};n(null,i)}catch(t){return n(t)}}},{key:"getCluster",value:function(t,e){function n(n,i){x&&console.log(i),x&&console.time("createClusters");var o=i.task,a=o.createClusters(t);x&&console.timeEnd("createClusters"),e(null,(0,r.default)(a))}x&&console.log("getCluster",t),this.loadVectorData(t,n.bind(this))}}]),e}(_.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(233),_=n(243),g=i(_),y=n(298),x=i(y),b=n(483),S=i(b),w=n(147),E=i(w),T=function(t){function e(t,n,i){(0,s.default)(this,e);var o=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n,i));return o._data=n.data||null,o._data&&(o._data.center=o._data.bounds.getCenter()),o._glTexture=null,o._items={},o}return(0,p.default)(e,t),(0,u.default)(e,[{key:"onAdd",value:function(t){this.map=t,this._glTexture||(this._glTexture=new E.default(this.map.renderEngine.gl,{pixels:this._data.mediaSource})),this._fire("data",{dataType:"source",sourceDataType:"metadata"})}},{key:"setData",value:function(t){if(this._data=t,this._data&&(this._data.center=this._data.bounds.getCenter()),this._glTexture){var e=this.map.renderEngine.gl;this._glTexture.update(this._data.mediaSource,{textureIndex:0,minFilter:e.LINEAR,magFilter:e.LINEAR,wrapS:e.CLAMP_TO_EDGE,wrapT:e.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}this.transform,this.camera&&this.update(this.transform,this.camera),this._fire("data",{dataType:"source",sourceDataType:"content"})}},{key:"update",value:function(t,e){if(this.transform=t,this.camera=e,this._data&&(0,m.isInFrustum)(this.map,this._data.bounds)){var n=new x.default(0,0,0,0);this.addItem(n)}}},{key:"addItem",value:function(t){var e=this._items[t.id];if(this._data&&!e){e=new g.default(t,this.tileSize),this._items[t.id]=e,e.setData({bounds:this._data.bounds,center:this._data.center,texture:this._glTexture,texInfo:{s:0,t:0,w:1,h:1}});var n=this.map.renderEngine.gl;this._glTexture.upload({textureIndex:0,minFilter:n.LINEAR,magFilter:n.LINEAR,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,premultiply:!0,useMipmap:!1,flipY:!0})}else{var i=e.getData();i.bounds=this._data.bounds,i.center=this._data.center,e.setData(i)}}},{key:"getDrawItems",value:function(){var t=this._items;return this._data?(0,m.isInFrustum)(this.map,this._data.bounds)?t:{}:t}},{key:"onRemove",value:function(){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"onRemove",this).call(this),this._items={},this._glTexture.destroy()}}]),e}(S.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(482),_=i(m),g=n(81),y=n(243),x=n(144),b=i(x),S=n(785),w=window.createImageBitmap&&"Firefox"!==b.default.browser,E=function(t){function e(t,n,i){(0,u.default)(this,e);var o=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i));return o.type=g.SOURCE_TYPE.imageTile,o}return(0,p.default)(e,t),(0,f.default)(e,[{key:"loadTile",value:function(t){var e=this,n=t.coord,i=t.uid,o=t.tileSize,a=this._data(n.x,n.y,n.z),s={url:a,uid:i,tileSize:o,type:this.type,isBitmapEnabled:w};return new r.default(function(n){var i=function(i,o){if(i)return void n(i);a.indexOf("oversea")>-1&&(e.overseaNum=e.overseaNum||0,e.overseaNum=e.overseaNum+1),o.bitmap?(t.setData(o.bitmap),n(null)):o.image?(0,S.blobToImage)(o.image).then(function(e){return(0,S.canvasToImage)((0,S.imageToCanvas)(e,{width:t.tileSize,height:t.tileSize}))}).then(function(e){t.setData(e),n(null)}).catch(function(t){console.error(t),n("Image格式转换失败")}):n("Invalid Data")};t.workerID&&t.state!==y.TILE_STATE.expired?e.dispatcher.send("reloadTile",s,i,t.workerID):t.workerID=e.dispatcher.send("loadTile",s,i)})}}]),e}(_.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(78),u=n(109),c=function(){function t(e){(0,r.default)(this,t),this.actor=e,this.cache=new u.Store("imageTileLoader",1e3)}return(0,s.default)(t,[{key:"loadTile",value:function(t,e){var n=t.url,i=t.uid,o=t.tileSize,r=t.isBitmapEnabled;i in this.cache||(this.cache[i]=(0,l.getImage)(n,12e3)),this.cache[i].promise.then(function(t){r?self.createImageBitmap(t,{imageOrientation:"flipY",premultiplyAlpha:"premultiply",resizeWidth:o,resizeHeight:o}).then(function(t){e(null,{bitmap:t,transferableList:[t]})}).catch(function(t){console.warn(t),e(t)}):e(null,{image:t,transfertableList:[t]})}).catch(function(t){switch(t.message){case"abort":break;default:e(t)}})}},{key:"abortTile",value:function(t){var e=t.uid;e in this.cache&&(this.cache[e].xhr.abort(),this.cache[e]=null)}},{key:"removeTile",value:function(t){this.abortTile(t)}},{key:"reloadTile",value:function(t,e){t.uid in this.cache&&delete this.cache[t.uid],this.loadTile(t,e)}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(81),u=function(){function t(e,n){(0,r.default)(this,t),this.id=e,this.dispatcher=n,this.type=l.SOURCE_TYPE.indoorIndex,this.workerId=null}return(0,s.default)(t,[{key:"loadIndexData",value:function(t,e,n,i){t.length>0?this.workerId?this.dispatcher.send(this.type+".calcBuildingListInView",{ids:t,viewBounds:e,indexType:n},i,this.workerId):this.workerId=this.dispatcher.send(this.type+".calcBuildingListInView",{ids:t,viewBounds:e,indexType:n},i):i&&i([])}},{key:"onAdd",value:function(t){this._map=t}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=t.getUint32(e,n),o=t.getUint32(e+4,n);return n?i+Math.pow(2,32)*o:Math.pow(2,32)*i+o}Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),a=i(r),s=n(281),l=i(s),u=n(224),c=i(u),f=n(21),d=i(f),h=n(280),v=i(h),p=n(20),m=i(p),_=n(236),g=i(_),y=n(27),x=i(y),b=n(0),S=i(b),w=n(1),E=i(w),T=n(25),A=i(T),P=n(85),I=i(P),k=n(117),L=i(k),M=n(78),C=function(){function t(e,n){(0,S.default)(this,t),this._mapId=n,this.actor=e,this._cityIdsCache={}}return(0,E.default)(t,[{key:"calcBuildingListInView",value:function(t,e){var n=this,i=t.ids,o=void 0===i?[]:i,r=t.viewBounds,a=t.indexType;this._getIndoorIndexList(o,a).then(function(t){var i=[],o=!0,a=!1,s=void 0;try{for(var l,u=(0,x.default)((0,g.default)(t));!(o=(l=u.next()).done);o=!0){var c=l.value;if("object"===(void 0===c?"undefined":(0,m.default)(c))&&c.dataLength>0){var f=n.getBuildingIdsInView(c.buildingList.infoList,r);i=i.concat(f)}}}catch(t){a=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return e(i),i})}},{key:"_getIndoorIndexList",value:function(){function t(t,n){return e.apply(this,arguments)}var e=(0,v.default)(l.default.mark(function t(e,n){var i,o,r,a,s,u,f=this;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={},o=this._getSortedCityId(e),r=o.oldIds,a=o.newIds,s=r.map(function(t){return f._getCityIndexCache(t)}),t.next=6,d.default.all(s);case 6:return u=t.sent,u.forEach(function(t,e){t?i[r[e]]=t:a.push(r[e])}),t.abrupt("return",this._loadCityData(a,n).then(function(t){return i=(0,c.default)({},i,t)}));case 11:t.prev=11,t.t0=t.catch(0),console.warn(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return t}()},{key:"_loadCityData",value:function(t,e){var n=this,i={};if(t.length>0){var o=t.map(function(t){return t+",0"}).join(","),r=A.default.indoorIndexSrc+"&all="+e+"&data="+o;return new d.default(function(t,e){M.getArrayBuffer(r,function(o,r){if(!o&&r&&r.data){var a=new DataView(r.data);i=n._extract(a),t(i)}else e(o||"未知错误：获取室内索引失败。")})})}return new d.default(function(t){t(i)})}},{key:"_getSortedCityId",value:function(t){var e=this,n=[],i=[];return t.forEach(function(t){e._cityIdsCache[t]?n.push(t):(i.push(t),e._cityIdsCache[t]=!0)}),{oldIds:n,newIds:i}}},{key:"_getCityIndexCache",value:function(t){var e=L.default.QMAPI_indoor_index+t;return new d.default(function(t){I.default.get(e,function(e){t(e)})})}},{key:"_extract",value:function(t){var e={},n=0,i=t.getInt8(n,!0);e.cityNum=i,n+=1;for(var o=0,r=0;r<i;r++){o=t.getInt16(n,!0),n+=2,e[o]||(e[o]={}),e[o].version=t.getInt32(n,!0),n+=4,e[o].intervel=t.getInt16(n,!0),n+=2,e[o].status=t.getInt8(n,!0),n+=1;var a=t.getInt32(n,!0);e[o].dataLength=a,n+=4,a>0&&(e[o].buildingList=this._extractCityInfo(t,n)),n+=a,I.default.set(L.default.QMAPI_indoor_index+o,e[o])}return e}},{key:"_extractCityInfo",value:function(t,e){var n=e,i={};i.sign=String.fromCharCode.apply(String,(0,a.default)(new Uint8Array(t.buffer.slice(n,n+4)))),n+=4,i.df=t.getInt32(n,!0),n+=4,i.dataVer=t.getInt32(n,!0),n+=4,i.confSize=t.getInt32(n,!0),n+=4,i.crc=t.getInt32(n+i.confSize,!0),i.cityIndex=t.getInt16(n,!0),n+=2,n+=6,i.buildingNum=t.getInt32(n,!0),n+=4,i.infoList=[];for(var r=0;r<i.buildingNum;r++){var s={},l=t.getInt32(n,!0)+e;n+=4,n+=4,s.buildingId=String(parseInt(o(t,l,!0))),l+=8,s.version=t.getInt32(l,!0),l+=4,s.left=t.getInt32(l,!0),l+=4,s.right=t.getInt32(l,!0),l+=4,s.top=t.getInt32(l,!0),l+=4,s.bottom=t.getInt32(l,!0),l+=4,i.infoList.push(s)}return i}},{key:"getBuildingIdsInView",value:function(t,e){var n=[],i=e.left,o=e.right,r=e.top,a=e.bottom;return t.forEach(function(t){var e=t.buildingId,s=t.left,l=t.right,u=t.top,c=t.bottom;s>0&&l>0&&i<l&&o>s&&a>u&&r<c&&n.push(e)}),n}}]),t}();e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(172),r=i(o),a=n(30),s=i(a),l=n(115),u=i(l),c=n(3),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(5),_=i(m),g=n(4),y=i(g),x=n(25),b=i(x),S=n(45),w=i(S),E=n(155),T=i(E),A=n(484),P=i(A),I=n(298),k=i(I),L=n(233),M=n(81),C=n(326),R=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,_.default)(this,(e.__proto__||(0,f.default)(e)).call(this,t,n,i))}return(0,y.default)(e,t),(0,p.default)(e,[{key:"setSelectedFloor",value:function(t){if(!this._loaded)return-1;var e=this.getMetaData(),n=e.floorInfo.floorStrArr.indexOf(t);return n>=0&&(this._selectedFloorNum=n,this.update(this.map.transform)),n}},{key:"getSelectedFloor",value:function(){return this._loaded?this.getMetaData().floorInfo.floorStrArr[this._selectedFloorNum]||null:null}},{key:"_initialize",value:function(){this.type=M.SOURCE_TYPE.indoor,this._selectedFloorNum=null}},{key:"_onLoadDataStart",value:function(){var t=C.IndoorStyleMap.getInstance().get(this._data.indoorStyleId);t.id=this._data.indoorStyleId,this.workerID=this.dispatcher.send(this.type+".setStyle",{indoorStyle:(0,u.default)(t)})}},{key:"_onLoadDataEnd",value:function(){var t=this.getMetaData(),e=t.floorInfo.defaultNum;this._selectedFloorNum=e;var n=(0,s.default)(t.floorInfo.bounds,2),i=n[0],o=n[1];this._buildingBounds=new T.default(new w.default(i.lat,i.lng),new w.default(o.lat,o.lng)),this._fire("loaded")}},{key:"_onLoadDataError",value:function(t){console.error("室内建筑物 "+this._data.buildingId+" 加载出错",t)}},{key:"update",value:function(t){if(this.transform=t,this._loaded&&(0,L.isInFrustum)(this.map,this._buildingBounds)&&t.zoom>=b.default.minShowIndoorZoom){var e=this.getMetaData(),n=new k.default(0,e.buildingId,this._selectedFloorNum,0);this.addItem(n)}}},{key:"getDrawItems",value:function(){var t=this._items,e=this.getMetaData();if(!e)return t;if(!(0,L.isInFrustum)(this.map,this._buildingBounds))return{};var n=e.buildingId+"_"+this._selectedFloorNum+"_0",i=t[n];return i&&i.hasData()&&(this._currentItems=(0,r.default)({},n,i)),this._currentItems||{}}}]),e}(P.default);e.default=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),r=i(o),a=n(21),s=i(a),l=n(20),u=i(l),c=n(128),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(25),_=i(m),g=n(45),y=i(g),x=n(377),b=n(378),S=n(676),w=i(S),E=n(85),T=i(E),A=n(117),P=i(A),I=n(1002),k=n(546),L=n(78),M=function(){function t(e,n){(0,h.default)(this,t),this._indoorBuildingSet={},this._mapId=n,this.actor=e,this.loading={},this.loaded={},this.versionPromiseMap=new f.default}return(0,p.default)(t,[{key:"setStyle",value:function(t){this._indoorStyle=JSON.parse(t.indoorStyle)}},{key:"loadTile",value:function(t,e){function n(t,n){return delete this.loading[i][o],t?e(t):n?(r.vectorTile=n,r.parse(n,this.actor,this._indoorStyle,e),this.loaded[i]=this.loaded[i]||{},void(this.loaded[i][o]=r)):e(null,null)}var i=t.source,o=t.uid;this.loading[i]||(this.loading[i]={}),this.loading[i][o]=new w.default(t);var r=this.loading[i][o];r.abort=this.loadVectorData(t,n.bind(this))}},{key:"removeTile",value:function(t){this.removeSource(t)}},{key:"loadVectorData",value:function(t,e){var n=t.source;if(!this._indoorBuildingSet[n])return e(null,null);e(null,this._indoorBuildingSet[n])}},{key:"loadData",value:function(t,e){var n=function(n,i){return n?e(n):"object"!==(void 0===i?"undefined":(0,u.default)(i))?e(new Error("Input data is not a valid Indoor object.")):(this._indoorBuildingSet[t.source]=i,void e(null,{buildingId:i.buildingId,buildingName:i.Name_CN,floorInfo:i.floorInfo,center:i.areaCenter}))}.bind(this);this.loadIndoorBuffer(t,n)}},{key:"loadIndoorBuffer",value:function(t,e){var n=this,i=JSON.parse(t.data),o=P.default.QMAPI_indoor_buffer+i.buildingId;new s.default(function(t){T.default.get(o,function(e){t(e)})}).then(function(t){return n._getVersion(t).then(function(e){return n._getIndoorInfoData(i,t,e)})}).then(function(t){x.ConfigUtil.setBV(t.version),e(null,t.buildingData)}).catch(function(t){e(t,null)})}},{key:"_getVersion",value:function(t){var e=null;if(t){var n=_.default.indoorBuildingSrc+"?df=1&type=dataver&cid="+t.cityId;e=this.versionPromiseMap.get(t.cityId)||new s.default(function(t){L.getJSON(null,n,function(e,n){var i=1/0;e?console.error(e):i=n&&n.metadata&&n.metadata.version&&n.metadata.version.data,t({version:i})})}),this.versionPromiseMap.set(t.cityId,e)}else e=s.default.resolve({version:1/0});return e}},{key:"_getIndoorInfoData",value:function(t,e,n){var i=this,o=P.default.QMAPI_indoor_buffer+t.buildingId,r=_.default.indoorBuildingSrc+"?df=1&cid="+(e&&e.cityId||t.cityId)+"&bid="+t.buildingId,a=n.version;return e&&e.version>=a?s.default.resolve(e):new s.default(function(e,n){L.getArrayBuffer(r,function(r,a){if(r)n(r);else{var s=null,l=a.data,u=new DataView(l);s=i.extract(u,t.buildingId),T.default.set(o,s),e(s)}})}).catch(function(t){if(console.error(t),e)return e;throw new Error(t)})}},{key:"removeSource",value:function(t){this._indoorBuildingSet[t.source]&&delete this._indoorBuildingSet[t.source]}},{key:"extract",value:function(t,e){var n={},i=0;n.sign=String.fromCharCode.apply(String,(0,r.default)(new Uint8Array(t.buffer.slice(i,4)))),i+=4,n.version=t.getInt32(i,!0),i+=4,n.cityId=t.getInt32(i,!0),i+=4,n.buildId=t.getInt32(i,!0),i+=4,n.zipSize=t.getInt32(i,!0),i+=4,n.srcSize=t.getInt32(i,!0),i+=4,n.CRC=t.getInt32(i),i+=4,I(t.byteLength-28===n.zipSize,"Check zip size");var o=k.inflate(t.buffer.slice(i),{windowBits:-15});return I(o.length===n.srcSize,"Check unzipped size"),n.buildingData=this.extractFloorInfo(o,e),n.buildingData.buildingId=e,n.buildingData.buffer=o,n}},{key:"extractFloorInfo",value:function(t){var e=new DataView(t.buffer),n=0,i={};i.Attribute_size=e.getInt32(n,!0),n+=4,i.Data_size=e.getInt32(n,!0),n+=4,i.Topology_size=e.getInt32(n,!0),n+=4,i.Name_CN_size=e.getUint8(n,!0),n+=1,i.Name_CN=String.fromCharCode.apply(String,(0,r.default)(new Uint16Array(e.buffer.slice(n,n+i.Name_CN_size)))),n+=i.Name_CN_size,i.DefaultFloor=e.getUint8(n,!0),n+=1,i.Floor_num=e.getUint8(n,!0),n+=1,i.Floor_str_size=e.getUint8(n,!0),n+=1;for(var o=[],a=0;a<i.Floor_str_size;a++){var s=e.getUint8(n,!0);o.push(s),n+=1}i.floorStr=String.fromCharCode.apply(null,o);for(var l=[],u=0;u<4;u++){var c=e.getInt32(n,!0);l.push(c),n+=4}var f=[],d={},h={};d.x=l[0],h.x=l[1],d.y=l[2],h.y=l[3];var v=void 0,p=void 0;try{v=(0,b.pixels2LongLat)(d.x,h.y),p=(0,b.pixels2LongLat)(h.x,d.y),f.push(v),f.push(p)}catch(t){throw new Error("数据错误，bounds无效。")}return i.floorInfo={floorNum:i.Floor_num,floorStr:i.floorStr,floorStrArr:i.floorStr.split(","),bounds:f,defaultNum:i.DefaultFloor},i.Floor_num=e.getInt32(n,!0),i.areaCenter=new y.default((v.lat+p.lat)/2,(v.lng+p.lng)/2),i}}]),t}();e.default=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=i(o),a=n(172),s=i(a),l=n(115),u=i(l),c=n(21),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(57),_=n(638),g=i(_),y=function(){function t(e){(0,h.default)(this,t),this.uid=e.uid,this.coord=e.coord}return(0,p.default)(t,[{key:"_parseEscalator",value:function(){}},{key:"parse",value:function(t,e,n,i){var o=this.coord.x+"_"+this.coord.y+"_"+this.coord.z,r={},a=t.buffer,l=t.buildingId,c=t.areaCenter,d=new g.default(l,{buffer:a,areaCenter:c,floorInfo:t.floorInfo,selectedFloorNum:this.coord.y,indoorStyle:n}),h=d.parseBuilding(),v=d.getBuildingPointInfo(h.buildingPoint),p=new f.default(function(t){e.send("getIndoorGlyphInfo",{glyphList:v.glyphList,iconSrcList:v.iconSrcList,pointInfoSet:(0,u.default)(v.pointInfoSet),indoorStyle:(0,u.default)(n)},function(e,n){if(e)console.error(e),t(null);else{var i=JSON.parse(n.iconMapping),o=JSON.parse(n.glyphMapping),r=JSON.parse(n.poiMapping);t({poiMapping:r,iconMapping:i,glyphMapping:o})}})}),_=h.buildingData.map(function(t){if(t.length>0){return{top:d.getTopGeometryAttributes(t),sides:d.getSidesGeometryAttributes(t)}}return null}).filter(function(t){return!!t}),y=h.buildingEscalator.map(function(t){if(t.length>0){return d.getEscalatorAttributes(t)}return null}).filter(function(t){return!!t}),x=h.floorBoundsData.map(function(t){if(t.length>0){var e=d.getTopGeometryAttributes(t);return delete e.normal,delete e.color,{top:e}}}).filter(function(t){return!!t});p.then(function(t){var e=d.parseInstanceBuildingPoint(v.pointInfoSet,t.iconMapping,t.glyphMapping,t.poiMapping);r[m.RENDER_LAYER_TYPE.indoorRegion]=(0,s.default)({},o,{regions:_,bounds:x,center:c,floorIndex:d.selectedFloorNum}),r[m.RENDER_LAYER_TYPE.indoorPoi]=(0,s.default)({},o,{pois:e,bounds:x,center:c,floorIndex:d.selectedFloorNum}),r[m.RENDER_LAYER_TYPE.indoorEscalator]=(0,s.default)({},o,{escalators:y,bounds:x,center:c}),r.id=o,i(null,r)})}},{key:"transferData",value:function(t,e){var n=[],i=["top","sides"],o=["position","index","color","normal"];["regions","bounds"].forEach(function(r){e[m.RENDER_LAYER_TYPE.indoorRegion][t][r].forEach(function(t){i.forEach(function(e){o.forEach(function(i){var o=t[e]&&t[e][i]&&t[e][i].buffer;o&&n.push(o)})})})});var a=e[m.RENDER_LAYER_TYPE.indoorPoi][t].pois;(0,r.default)(a).forEach(function(t){a[t].forEach(function(t){t.instance.count>0&&["instanceTransTypeArray","instanceCoordsTypeArray","instanceTextBoundsTypeArray","instanceInfosTypeArray","instanceColorsTypeArray","instanceStrokeColorsTypeArray"].forEach(function(e){n.push(t.instance[e].buffer)})})});var s=e[m.RENDER_LAYER_TYPE.indoorEscalator][t].escalators;return s.length>0&&["instanceCoordsTypeArray","instanceInfosTypeArray"].forEach(function(t){n.push(s[0][t].buffer)}),e.transferableList=n,e}}]),t}();e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(482),_=i(m),g=n(81),y=n(243),x=function(t){function e(t,n,i){(0,u.default)(this,e);var o=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,n,i));return o.type=g.SOURCE_TYPE.trafficFlow,o.flowColor=n.flowColor,o.flowSpeed=n.flowSpeed,o}return(0,p.default)(e,t),(0,f.default)(e,[{key:"loadTile",value:function(t){var e=this,n=t.coord,i=t.uid,o=this.flowColor,a=this.flowSpeed,s=this._data(n.x,n.y,n.z),l={url:s,uid:i,flowColor:o,flowSpeed:a,type:this.type};return new r.default(function(n){var i=function(e,i){if(e)return void n(e);if(i){var o=i.texSize,r=i.pixelSpace,a=i.pointArray,s=i.count,l=i.instance;self.createImageBitmap(new ImageData(a,o,o),{premultiplyAlpha:"none"}).then(function(e){t.setData({pathImage:e,count:s,instance:l,texSize:o,pixelSpace:r}),n(null)})}else n("Invalid Data")};t.workerID&&t.state!==y.TILE_STATE.expired?e.dispatcher.send("reloadTile",l,i,t.workerID):t.workerID=e.dispatcher.send("loadTile",l,i)})}}]),e}(_.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(109),f=n(78),d=n(28),h=n(681),v=function(){function t(e){(0,s.default)(this,t),this.actor=e,this.cache=new c.Store("trafficTileLoader",1e3)}return(0,u.default)(t,[{key:"loadTile",value:function(t,e){var n=t.url,i=t.uid,o=t.flowColor,a=t.flowSpeed;if(!(i in this.cache)){var s=void 0,l=new r.default(function(t,e){s=(0,f.getJSON)(i,n,function(n,i){n?e(n):t(i)})});this.cache[i]={xhr:s,promise:l}}this.cache[i].promise.then(function(t){t.hasOwnProperty("ret")?0===t.ret?e(null,(0,h.parse)(t,{enc:!1,flowColor:o,flowSpeed:a})):e(new d.AJAXError("no data",404)):e(null,(0,h.parse)(t,{flowColor:o,flowSpeed:a}))}).catch(function(t){switch(t.message){case"abort":break;default:e(t)}})}},{key:"abortTile",value:function(t){var e=t.uid;e in this.cache&&(this.cache[e].xhr.abort(),this.cache[e]=null)}},{key:"removeTile",value:function(t){this.abortTile(t)}},{key:"reloadTile",value:function(t,e){t.uid in this.cache&&delete this.cache[t.uid],this.loadTile(t,e)}}]),t}();e.default=v},function(t,e,n){"use strict";function i(t){var e=0;t.forEach(function(t){var n=Math.round(t.length*o);e+=n,t.particles=n});var n=new Uint16Array(2*e),i=new Uint8ClampedArray(4*e),r=new Uint8ClampedArray(e),a=0,s=0,l=0;return t.forEach(function(t){for(var e=t.offset,o=t.length,u=t.particles,c=t.color,f=0;f<u;f++){var d=Math.floor(Math.random()*o);n[a]=e,a+=1,n[a]=o,a+=1,i[s]=c[0],s+=1,i[s]=c[1],s+=1,i[s]=c[2],s+=1,i[s]=c[3],s+=1,r[l]=d,l+=1}}),{count:e,instance:{instanceLinkList:n,instanceColorList:i,instanceParticleList:r}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=.1},function(t,e,n){"use strict";function i(t){if(!t||!t.length)return t;for(var e=[],n=t[0].slice(),i=void 0,r=1;r<t.length;r++){i=t[r];switch(o(n,i)){case 1:n[1]=n[1].concat(i[1].slice(1));break;case 2:n[1]=i[1].concat(n[1].slice(1));break;case 0:default:e.push(n),n=i.slice()}}return e}function o(t,e){if(t[0]!==e[0])return 0;var n=t[1].length,i=e[1].length;if(n&&i){var o=t[1][0],a=e[1][0],s=t[1][n-1],l=e[1][i-1];return r(a,s)?1:r(o,l)?2:0}return 0}function r(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)<=2}Object.defineProperty(e,"__esModule",{value:!0}),e.merge=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=r(t,e),i=a(n,e),o=i.linkInfoList,s=i.pointArray,l=(0,_.default)(o),u=l.instance,c=l.count;return{texSize:y,pixelSpace:1e3*g,count:c,instance:u,pointArray:s}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.enc,i=void 0===n||n;if(!t.data)return{};var o=i?(0,p.parseJson)((0,d.decode)(t.data)):t;if(0!==o.ret)return console.error("瓦块没有数据",t),{};var r=o.features,a=(0,h.restore)(r);return(0,v.merge)(a)}function a(t,e){var n=e.flowColor,i=e.flowSpeed,o=0,r=[],a=new Uint8ClampedArray(y*y*4);return{linkInfoList:t.map(function(t){var e=o,u=i[t[0]]*g,c=t[1];c.forEach(function(t,n){if(r.push(t),l(a,4*e,t),e+=1,n<c.length-1)for(var i=c[n+1],o=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),f=Math.ceil(o/u),d=1;d<f;d++)r.push(s(t,i,d/f)),l(a,4*e,s(t,i,d/f)),e+=1});var f={offset:o,length:e-o,color:n[t[0]]};return o=e,f}),pointArray:a}}function s(t,e,n){return{x:Math.round(t.x*(1-n)+e.x*n),y:Math.round(t.y*(1-n)+e.y*n)}}function l(t,e,n){var i=u(n),o=(0,f.default)(i,4),r=o[0],a=o[1],s=o[2],l=o[3];t[e]=r,t[e+1]=a,t[e+2]=s,t[e+3]=l}function u(t){var e=t.x+128,n=t.y+128;return[e<256?e:255,e<256?0:e-255,n<256?n:255,n<256?0:n-255]}Object.defineProperty(e,"__esModule",{value:!0});var c=n(30),f=i(c);e.parse=o,e.preParse=r,e.interpolate=a;var d=n(488),h=n(682),v=n(680),p=n(10),m=n(679),_=i(m),g=.1,y=64},function(t,e,n){"use strict";function i(t){for(var e=[],n=t.slice(),i=null,o=0,r=n.length;o<r;o+=2){if(i){i={x:i.x+n[o],y:i.y+n[o+1]}}else i={x:n[o],y:n[o+1]};e.push(i)}return e}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.forEach(function(t){t[0]instanceof Array?t.forEach(function(t){t[1]=i(t[1])}):t[1]=i(t[1])}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.restore=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=t.z-e.z,i=Math.pow(2,n);return{transX:(t.x-e.x*i)*t.tileSize,transY:(t.y-e.y*i)*t.tileSize,scale:1/i}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(15),a=i(r),s=n(0),l=i(s),u=n(1),c=i(u),f=n(298),d=i(f),h=n(489),v=i(h),p=n(25),m=i(p),_=function(){function t(e){(0,l.default)(this,t);var n=d.default.converter(e.coord);this._batchCoord=n,this._workerTile=new v.default((0,a.default)({},e,{coord:n})),this._workerTile.dataZoom=n.z+1,this._batchTiles=n.children().map(function(t){return new v.default((0,a.default)({},e,{coord:t}))})}return(0,c.default)(t,[{key:"parse",value:function(t,e,n,i,o,r,a){function s(t,e){return function(t,n){if(t&&(console.error(t),n=null),l[e]=n,(u+=1)===c.length){var i=l.reduce(function(t,e){return e&&(Array.prototype.push.apply(t,e.transferableList),delete e.transferableList),t},[]);l.transferableList=i,r(null,l)}}}if(m.default.batchRender)return void this.batchParse.apply(this,arguments);var l=[],u=0,c=this._batchTiles;this._batchTiles.forEach(function(r,l){var u=s(r.coord,l);if(!e||!e.datas||!e.datas[l])return void u(new Error("瓦片："+r.coord.id+" 加载失败!"),null);r.parse(t,e.datas[l],n,i,o,u,a)})}},{key:"batchParse",value:function(t,e,n,i,r,a,s){function l(t,e){if(t)return console.error(t),void a(t);a(null,e)}var u=this._batchCoord,c=e.datas;u.children().forEach(function(t,e){c[e].tileTransform=o(t,u)}),this._workerTile.parse(t,c,n,i,r,l,s)}}]),t}();e.default=_},function(t,e,n){"use strict";function i(t){return!!t&&t[0]instanceof Number&&!t[2]}e.merge=function(t){if(!t||!t.length)return t;for(var e=[],n=null,o=!1,r=void 0,a=void 0,s=0;s<t.length;s++)r=t[s],n&&i(r)&&r[0]===n[0]?o?(a=n[1],a.push(r[1])):(n[1]=[n[1]],a=n[1],a.push(r[1]),o=!0):(e.push(r),o=!1,n=i(r)?r:null);return e}},function(t,e,n){"use strict";function i(t){for(var e=[],n=t.slice(),i=0,o=n.length;i<o;i+=2)if(0===e.length)e.push(n[0],n[1]);else{var r=e[i-2]+n[i],a=e[i-1]+n[i+1];e.push(r,a)}return e}e.restores=function(t){for(var e=t||[],n=0;n<e.length;n++){var o=e[n];if(o[0]instanceof Array)for(var r=0;r<o.length;r++){var a=o[r];a[1]=i(a[1])}else o[1]=i(o[1])}return t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t>=C.default.maxDataZoom}Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),a=i(r),s=n(27),l=i(s),u=n(3),c=i(u),f=n(0),d=i(f),h=n(1),v=i(h),p=n(5),m=i(p),_=n(34),g=i(_),y=n(4),x=i(y),b=n(42),S=n(243),w=i(S),E=n(382),T=i(E),A=n(10),P=i(A),I=n(486),k=i(I),L=n(81),M=n(25),C=i(M),R=C.default.batchRender,N=function(t){function e(t,n,i){(0,d.default)(this,e);var o=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t,n,i));return o._data=n.data,o.type=L.SOURCE_TYPE.vector,o.iconInfo=n.iconInfo||null,o.enc=n.enc,o.styleId=n.styleId,o._shadowTiles={},o._parentTiles={},o._parentCache=new T.default(0,o.unloadTile.bind(o)),o}return(0,x.default)(e,t),(0,v.default)(e,[{key:"setStyleId",value:function(t){this.styleId=t}},{key:"setStyleAndIconInfo",value:function(t,e){this.styleId=t,this.iconInfo=e}},{key:"clear",value:function(){this._shadowTiles={},(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"clear",this).call(this),this._parentTiles={},this._parentCache.reset()}},{key:"clearTiles",value:function(){var t=this;P.default.forIn(this._parentTiles,function(e){t.removeBatchTile(e)}),this._cache.reset(),this._parentCache.reset()}},{key:"reload",value:function(){var t=this;this._cache.reset(),this._parentCache.reset(),P.default.forIn(this._items,function(e,n){t.reloadTile(n,!0)})}},{key:"reloadTile",value:function(t,e){(e||t.state!==S.TILE_STATE.reloading)&&(t.state=S.TILE_STATE.reloading,this.loadBatchTile(t,{},this._tileLoaded.bind(this,t)))}},{key:"updateCacheSize",value:function(t){(0,g.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"updateCacheSize",this).call(this,t),this._parentCache.setMaxSize(this._cache.max/4)}},{key:"update",value:function(t,e,n){var i=this;this.transform=t,this.camera=e;var o={},r={},a=void 0,s=void 0,u=!0;this.updateCacheSize(t);var c=this.transform.zoom,f=Math.max(c-4,this.minZoom),d=Math.max(c+3,this.minZoom),h=t.coveringTiles({round:!0,tileSize:this.tileSize,minZoom:this.minZoom-1,maxZoom:this.maxZoom-1,zoom:c-1});if(h.forEach(function(t){var e=i._parentTiles[t.id];e&&e.hasData()||(u=!1,r[t.id]=!0)}),0!==P.default.keysDifference(r,this._parentTiles).length||u||c>C.default.maxDataZoom){for(var v=0;v<h.length;v++){var p=h[v];if(p.z>=C.default.maxDataZoom){var m=p.ancestor(C.default.maxDataZoom-1)||p;this.addTile(m,n,null),o[m.id]=!0}else{if(this.icon&&p.setIconUrls(this.icon),!(a=this.addTile(p,n,null)))continue;if(o[p.id]=!0,a.hasData())continue;this._findLoadedChildren(p,d,o)||(s=this.findLoadedParent(p,f,o))&&this.addTile(s.coord,n,null)}}var _=P.default.keysDifference(this._parentTiles,o),g=!0,y=!1,x=void 0;try{for(var b,S=(0,l.default)(_);!(g=(b=S.next()).done);g=!0){var w=b.value;this.removeBatchTile(w)}}catch(t){y=!0,x=t}finally{try{!g&&S.return&&S.return()}finally{if(y)throw x}}}else h.forEach(function(t){if(i._parentTiles[t.id].hasData()){var e=t.parent(d);i.removeBatchTile(e&&e.id),t.children(d).forEach(function(t){i.removeBatchTile(t&&t.id)})}})}},{key:"_findLoadedChildren",value:function(t,e,n){var i=this,o=!1;return P.default.forIn(this._parentTiles,function(r,a){if(!(n[r]||!a.hasData()||a.coord.z<=t.z||a.coord.z>e)){var s=Math.pow(2,Math.min(a.coord.z,i.maxZoom)-Math.min(t.z,i.maxZoom));if(Math.floor(a.coord.x/s)===t.x&&Math.floor(a.coord.y/s)===t.y)for(n[r]=!0,o=!0;a&&a.coord.z-1>t.z;){var l=a.coord.parent(i.maxZoom).id;a=i._parentTiles[l],a&&a.hasData()&&(delete n[r],n[l]=!0)}}}),o}},{key:"findLoadedParent",value:function(t,e,n){for(var i=t.z-1;i>=e;i--){t=t.parent(this.maxZoom);var o=this._parentTiles[t.id];if(o&&o.hasData())return n[t.id]=!0,o}}},{key:"addTile",value:function(t,e,n){var i=this;if(P.default.isDefined(this.styleId)){var r=this._parentTiles[t.id];return r?((R||o(r.coord.z))&&r.hasData()&&(this._items[r.coord.id]=r),r):(r=this._parentCache.get(t.id))?(this._parentTiles[t.id]=r,o(t.z)||R?this._items[t.id]=r:r.coord.children().forEach(function(t){var e=i._cache.get(t.id);e&&(i._items[t.id]=e)}),r):(r=new w.default(t,this.tileSize),this._parentTiles[t.id]=r,(o(t.z)||R)&&(this._items[t.id]=r),this.loadBatchTile(r,e,n?n.bind(this):this._tileLoaded.bind(this,r)),r)}return null}},{key:"removeBatchTile",value:function(t){var e=this,n=this._parentTiles[t];if(n)if(o(n.coord.z)||R?this.removeTile(n.coord.id,!0):n.coord.children().forEach(function(t){return e.removeTile(t.id)}),delete this._parentTiles[t],n.hasData()){var i=n.coord.id;this._parentCache.add(i,n)}else n.aborted=!0,this.abortTile(n),this.unloadTile(n)}},{key:"loadBatchTile",value:function(t,e,n){function i(e,i,r){var s=this;if(e)return(0,b.qos)("tile",{id:"v",status:1}),n(e);(0,b.qos)("tile",{id:"v",status:0,time:r}),t.setData(i),o(a.z)||R||a.children().forEach(function(e,n){t=new w.default(e,s.tileSize),s._items[e.id]=t,t.setData(i[n]),s._parentTiles[t.coord.parent().id]||s.removeTile(t.coord.id)}),n(null)}var r=t,a=r.coord,s=o(a.z)?a.url(this._data.vectorSrc):a.urlForBatchChildren(this._data.batchVectorSrc),l={url:s,uid:t.uid,type:this.type,source:this.getUniqueId(),coord:a,enc:this.enc,styleId:this.styleId,reason:e,maxDataZoom:this.maxDataZoom,sourceId:this.id,dataFinishCallback:{finishPromise:this.map.layerResource.loadStyle.bind(this.map.layerResource),type:"vector.setStyleInfo"}};t.workerID&&t.state!==S.TILE_STATE.expired?t.state===S.TILE_STATE.loading||this.dispatcher.send("reloadTile",l,i.bind(this),t.workerID):t.workerID=this.dispatcher.send(o(a.z)?"loadTile":"vector.loadBatchTile",l,i.bind(this))}},{key:"abortTile",value:function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.getUniqueId(),tileId:t.coord.id},null,t.workerID)}},{key:"unloadTile",value:function(t){t.clear(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.getUniqueId(),tileId:t.coord.id},null,t.workerID)}},{key:"_tileLoaded",value:function(t,e){var n=this;e?(t.state=S.TILE_STATE.errored,404!==e.status&&this._fire("loaderror",{tile:t,error:e})):this._fire("data",{dataType:"source",tile:t}),(0,a.default)(this._items).every(function(e){return n._items&&n._items[e]&&(n._items[e].getData()&&n._items[e].state===S.TILE_STATE.loaded||t.state===S.TILE_STATE.errored)})&&this._fire("tilesloaded",{dataType:"source",tiles:this._items})}}]),e}(k.default);e.default=N},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(281),r=i(o),a=n(21),s=i(a),l=n(280),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(691),p=n(776),m=i(p),_=n(683),g=i(_),y=n(10),x=i(y),b=n(78),S=n(489),w=function(){function t(e){(0,f.default)(this,t),this.actor=e,this.loading={},this.loaded={},self._preloadPromiseCache||(self._preloadPromiseCache={}),self._iconIndexCache||(self._iconIndexCache={}),self._styleCache||(self._styleCache={}),this.currentStyleId=null}return(0,h.default)(t,[{key:"_toTextureCoords",value:function(t,e,n){return x.default.forIn(t,function(i,o){t[i]={left:o[0]/e,right:(o[0]+o[2])/e,top:(n-o[1])/n,bottom:(n-o[1]-o[3])/n,width:o[2],height:o[3]}}),t}},{key:"getStyleInfo",value:function(t,e){this.styleMap&&this.styleMap[t]&&"config"!==t?e(this.styleMap[t]):(this.iconInfoCallbackObj=this.iconInfoCallbackObj||{},this.iconInfoCallbackObj[t]=this.iconInfoCallbackObj[t]||[],this.iconInfoCallbackObj[t].push(e))}},{key:"setStyleInfo",value:function(t){var e=t.iconInfo,n=t.styleId;this.styleMap=this.styleMap||{},this.styleMap[n]=e,this.iconInfoCallbackObj&&this.iconInfoCallbackObj[n]&&this.iconInfoCallbackObj[n].length>0&&(this.iconInfoCallbackObj[n].forEach(function(t){t(e)}),this.iconInfoCallbackObj[n]=null)}},{key:"_preload",value:function(){function t(t,n){return e.apply(this,arguments)}var e=(0,u.default)(r.default.mark(function t(e,n){var i=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.all([self._iconIndexCache[e]||(0,m.default)(e),self._styleCache[e]||(0,v.getStyleForWorker)(e)]).then(function(t){return self._iconIndexCache[e]=t[0],self._styleCache[e]=t[1],{iconCoords:i._toTextureCoords(t[0],n.w,n.h),style:t[1],iconInfoData:n}}));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"deleteCache",value:function(t){null!==t&&(delete self._iconIndexCache[t],delete self._styleCache[t])}},{key:"reloadTile",value:function(t,e){var n=t.uid,i=t.source,o=this.loading[i],r=this.loaded[i];o[n]?this.abortTile(t):r[n]&&this.removeTile(t),this.loadBatchTile(t,e)}},{key:"loadBatchTile",value:function(t,e){function n(n,i,s){return n?(console.error(n),e(n)):i?this.loading[o][a]?(delete this.loading[o][a],d.vectorTile=i,d.parse(t,i,c,u,this.actor,function(t,n){e(t,n,s)},r),this.loaded[o]=this.loaded[o]||{},void(this.loaded[o][a]=d)):void e(null,null):e(null,null)}var i=this,o=t.source,r=t.enc,a=t.uid,l=t.styleId,u=void 0,c=void 0,f=new s.default(function(t){i.currentStyleId!==l&&(null!==i.currentStyleId&&i.deleteCache(i.currentStyleId),i.currentStyleId=l);var e=""+l;"config"===l&&(delete self._preloadPromiseCache[e],i.deleteCache(l)),i.getStyleInfo(l,function(n){var o=self._preloadPromiseCache[e];o||(c=n,o=i._preload(l,c),self._preloadPromiseCache[e]=o),o.then(function(e){var i=e.iconCoords,o=e.style;c=n,c.info=i,u=o,t()})})});this.loading[o]||(this.loading[o]={}),this.loading[o][a]=new g.default(t);var d=this.loading[o][a],h=new s.default(function(e){d.abort=i.loadVectorData(t,e)});s.default.all([f,h]).then(function(t){n.call(i,t[1].err,t[1].data,t[1].time)})}},{key:"loadTile",value:function(t,e){function n(n,i,s){return n?e(n):i?this.loading[o][a]?(delete this.loading[o][a],d.vectorTile=i,d.parse(t,i,c,u,this.actor,function(t,n){e(t,n,s)},r),this.loaded[o]=this.loaded[o]||{},void(this.loaded[o][a]=d)):void e(null,null):e(null,null)}var i=this,o=t.source,r=t.enc,a=t.uid,l=t.styleId,u=void 0,c=void 0,f=new s.default(function(t){i.currentStyleId!==l&&(null!==i.currentStyleId&&i.deleteCache(i.currentStyleId),i.currentStyleId=l);var e=""+l;"config"===l&&(delete self._preloadPromiseCache[e],i.deleteCache(l)),i.getStyleInfo(l,function(n){var o=self._preloadPromiseCache[e];o||(c=n,o=i._preload(l,c),self._preloadPromiseCache[e]=o),o.then(function(e){var i=e.iconCoords,o=e.style;c=n,c.info=i,u=o,t()})})});this.loading[o]||(this.loading[o]={}),this.loading[o][a]=new S(t);var d=this.loading[o][a],h=new s.default(function(e){d.abort=i.loadVectorData(t,e)});s.default.all([f,h]).then(function(t){n.call(i,t[1].err,t[1].data,t[1].time)})}},{key:"abortTile",value:function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])}},{key:"removeTile",value:function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]}},{key:"loadVectorData",value:function(t,e){var n=b.getJSON(t.id,t.url,function(t,n,i){e&&e({err:t,data:n,time:i})});return function(){e=null,n.abort()}}}]),t}();t.exports=w},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DEFAULT",e=arguments[1];return s.STYLE_ID.hasOwnProperty(t)?r.default.resolve(s.STYLE_ID[t]):(0,a.checkKey)(e).then(function(e){var n=s.STYLE_ID.DEFAULT;if(e&&e.custom_map_style&&e.custom_map_style.style_list){var i=parseInt(String(t).replace("style",""));e.custom_map_style.style_list.some(function(t){return i>-1&&i===t.order&&(n=t.id,(0,l.cs)({styleId:n,subkey:e.subkey}),!0)})||console.error("个性化样式 "+t+" 并未找到，已自动启用默认样式！")}return n})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=n(293),s=n(299),l=n(42);e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return new f.default(function(n){var i=t||0,o=p.default.QMAPI_poi_icon+i,r=-1,l="",c="";_.default.support()?_.default.get(o,function(t){var f=JSON.parse(t);r=t?f.version:r,l=e.replace("{id}",i).replace("{version}",r),h.default.getJSON(null,l,function(t,e,l){if(!t&&e&&e.data){if("{}"!==(0,u.default)(e.data))return s({styleId:i,version:r,time:l}),c=e.data,void _.default.set(o,(0,u.default)(e),function(){n("data:image/png;base64,"+c)});c=f.data}else a({styleId:i,version:r,err:t}),console.error(t,e),c=f.data;n("data:image/png;base64,"+c)})}):(l=e.replace("{id}",i).replace("{version}",r),h.default.getJSON(null,l,function(t,e,o){return!t&&e&&e.data?"{}"===(0,u.default)(e.data)?(a({styleId:i,version:r,err:null}),console.error(e),void n(null)):(s({styleId:i,version:r,time:o}),c=e.data,void n("data:image/png;base64,"+c)):(a({styleId:i,version:r,err:t}),console.error(t,e),void n(null))}))})}function r(t){var e=t.data,n=t.styleId,i=t.iconSrc;return new f.default(function(t){e&&"string"==typeof e?_.default.support()?_.default.set(y,(0,u.default)({data:e}),function(){t("data:image/png;base64,"+e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null)):o(n,i).then(function(e){_.default.support()?_.default.set(y,(0,u.default)(e),function(){t(e)}):(console.error("兼容性错误：当前浏览器不支持LocalStorage。"),t(null))})})}function a(t){var e=t.styleId,n=t.version,i=t.err;(0,g.qos)("icon",{styleId:e,version:n,error:i&&i.status||0})}function s(t){var e=t.styleId,n=t.version,i=t.time;(0,g.qos)("icon",{styleId:e,version:n,loadTime:i})}Object.defineProperty(e,"__esModule",{value:!0}),e.setPoiIcon=e.loadPoiIconFile=void 0;var l=n(115),u=i(l),c=n(21),f=i(c),d=n(78),h=i(d),v=n(117),p=i(v),m=n(85),_=i(m),g=n(42),y=p.default.QMAPI_poi_icon+"config";e.loadPoiIconFile=o,e.setPoiIcon=r},function(t,e,n){"use strict";function i(t){var e=["background_color","font_color","color_fill","color_side","color_border"];["regionStyles","lineStyles","pointStyles","labelStyles","arrowStyles"].forEach(function(n){var i=t[n];a(i,function(t,n){n.forEach(function(t){e.forEach(function(e){e in t&&(t[e]=r(t[e]))})})})})}var o=n(10),r=o.colorToRGBA,a=o.forIn;t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e={};return[v.BASE_LAYER_TYPE.region,v.BASE_LAYER_TYPE.line,v.BASE_LAYER_TYPE.label,v.BASE_LAYER_TYPE.point,v.BASE_LAYER_TYPE.arrow].forEach(function(n){e[n]={type:n,style:t[n+"Styles"]}}),e.point.relyStyle=e.label.style,e.point.relyStyleField="labelid",e}function r(t){var e,n=(e={},(0,f.default)(e,v.BASE_LAYER_TYPE.region,t.region.style),(0,f.default)(e,v.BASE_LAYER_TYPE.line,t.line.style),e),i={};return _.default.forIn(n,function(t,e){_.default.forIn(e,function(e,n){var o=n[0],r=o.stylename;i[e]=i[e]||{id:e,name:r,type:t,styles:{}};for(var a=i[e],s=0,l=n.length;s<l;s++)o=n[s],a.styles[o.minScaleVal+"-"+o.maxScaleVal]=o})}),i}function a(t){g(t);var e=o(t);return{style:e,layerMeta:r(e),styleTag:t.Tag}}function s(t){return new u.default(function(e){var n=null,i=null;if(y.support()){var o=h.default.QMAPI_style+t;y.get(o,function(o){o?(n=JSON.parse(o).data,i=a(n),i.styleId=t,e(i)):(0,p.loadStyleFileFromServer)({styleId:t,version:-1}).then(function(n){i=a(n.data),i.styleId=t,e(i)})})}else(0,p.loadStyleFileFromServer)({styleId:t,version:-1}).then(function(n){i=a(n.data),i.styleId=t,e(i)})})}Object.defineProperty(e,"__esModule",{value:!0});var l=n(21),u=i(l),c=n(172),f=i(c);e.parseStyle=a,e.getStyleForWorker=s;var d=n(117),h=i(d),v=n(57),p=n(383),m=n(10),_=i(m),g=n(690),y=n(85)},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.animatableMap=void 0;var o=n(15),r=i(o),a=n(465),s=n(10),l=i(s),u={startAnimation:function(t,e){this.stopMoving(),this._prepareMoving();var n={center:this.getCenter(),zoom:this.getZoom(),pitch:this.getPitch(),rotation:this.getRotation()};this._animate(t,{onFrame:function(t){var e=t.percentage,n=t.frame,i=this.transform;l.default.forIn(n,function(t,e){switch(t){case"percentage":break;case"rotation":i.heading=-e;break;default:i[t]=e}}),this.emit("animation_playing",{percentage:e,frame:n}),this._fireMoveEvents()},onEnd:function(){this.emit("animation_ended"),this._moveToEnd()},onLoop:function(t){this.emit("animation_looped",t)},onStop:function(){this.emit("animation_stopped"),this._moveToEnd()},onPause:function(){this._moveToEnd()}},e,n)},stopAnimation:function(){this._stopAnimate()},pauseAnimation:function(){this._pauseAnimate()},resumeAnimation:function(){this._resumeAnimate()}};e.animatableMap=(0,r.default)(u,a.animatableMixin)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n=document.createElement(t);return n.style.cssText=e,n}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=i(r),s=n(0),l=i(s),u=n(1),c=i(u),f=n(5),d=i(f),h=n(4),v=i(h),p=n(387),m=i(p),_=n(45),g=i(_),y=n(10),x=n(40),b=i(x),S=n(28),w=n(26),E=n(42),T=b.default.isString,A=b.default.isNumber,P=b.default.isObject,I=["position:absolute;","left:0;top:0;","padding:0px 0px 6px;"],k=["min-width:100px;","white-space:nowrap;","background-color:white;","text-align:center;","padding:25px 10px 12px;","border-radius:6px;","box-shadow:0 2px 4px 0 rgba(0,0,0,0.15);"],L=["width:10px;height:10px;","background-color:white;","transform:rotate(45deg);","position:absolute;","bottom:1px;","left:0;right:0;","margin:auto;","box-shadow:2px 2px 2px rgba(0,0,0,0.15);"],M=["width:15px;height:15px;","position:absolute;","right:5px;top:5px;","cursor:pointer;"],C={x:0,y:0},R=function(t){function e(t){return(0,l.default)(this,e),(0,d.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t||{}))}return(0,v.default)(e,t),(0,c.default)(e,[{key:"onInit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.content="",this.zIndex=0,this.offset=C,this.enableCustom=!!t.enableCustom&&t.enableCustom,this._handlers=[],this._domResizeObserver=null,this.setContent(t.content).setZIndex(t.zIndex).setOffset(t.offset).setPosition(t.position),(0,E.statCn)("InfoWindow")}},{key:"onDestroy",value:function(){this._handlers.forEach(function(t){t&&t.remove()}),this._domResizeObserver&&this._domResizeObserver.disconnect()}},{key:"createDOM",value:function(){var t=this;if(this.enableCustom)return this.dom;var e=o("div",k.join(""));e.innerHTML=this.content,window.ResizeObserver&&(this._domResizeObserver=new ResizeObserver(function(){t.updateDOM()}),this._domResizeObserver.observe(e));var n=o("div",L.join("")),i=o("div",M.join(""));i.innerHTML='<svg style="fill: #aaa;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">\n<path d="M579.888 512l190.064-190.064a48 48 0 0 0-67.888-67.872L512 444.112 321.936 254.064a48 48 0 1 0-67.872 67.872L444.112 512 254.064 702.064a48 48 0 1 0 67.872 67.872L512 579.888l190.064 190.064a48 48 0 0 0 67.872-67.888L579.888 512z" fill></path>\n</svg>',this._handlers.push((0,w.on)(i,"click,touchend",function(){t.emit("closeclick"),t.close()}));var r=o("div",I.join(""));return r.appendChild(e),r.appendChild(n),r.appendChild(i),r.style.zIndex=this.zIndex,this._handlers.push((0,w.on)(r,"click, touchstart, touchend",function(t){t&&t.stopPropagation&&t.stopPropagation()})),r}},{key:"updateDOM",value:function(){if(this.map){var t=this.map.projectToContainer(this.position),e=this.offset.x||0,n=this.offset.y||0,i=t.x-this.dom.clientWidth/2+e+"px",o=t.y-this.dom.clientHeight+n+"px";this.dom.style.transform="translate("+i+", "+o+")"}}},{key:"close",value:function(){return this.dom&&(this.dom.style.display="none"),this}},{key:"open",value:function(){return this.dom&&(this.dom.style.display="",this.updateDOM()),this}},{key:"setPosition",value:function(t){return t instanceof g.default?(this.position=t,this.updateDOM()):console.error("类型错误: InfoWindow.position参数类型错误，应为TMap.LatLng。"),this}},{key:"getPosition",value:function(){return this.position}},{key:"setContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!T(t))return new S.BaseTypeError("InfoWindow.content","string",t).error(),this;if(this.enableCustom){this._removeFromMap(),this.content=t;var e=(new DOMParser).parseFromString(t,"text/html").body.firstElementChild;if(e)return this.dom&&(e.style.cssText=this.dom.style.cssText),this.dom=e,this.dom.style.position="absolute",this._addToMap(),this;this.enableCustom=!1,console.error("自定义信息窗体解析错误: content内容无法被解析为DOM，将自动转为默认样式。")}return this.content=t,this.dom&&(this.dom.firstElementChild.innerHTML=this.content,this.updateDOM()),this}},{key:"setZIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return A(t)?(this.zIndex=t,this.dom&&(this.dom.style.zIndex=this.zIndex),this):(new S.BaseTypeError("InfoWindow.zIndex","number",t).error(),this)}},{key:"setOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return P(t)?(t=(0,y.extend)({},C,t),A(t.x)?A(t.y)?(this.offset=t,this.dom&&this.updateDOM(),this):(new S.BaseTypeError("InfoWindow.offset.y","number",t.y).error(),this):(new S.BaseTypeError("InfoWindow.offset.x","number",t.x).error(),this)):(new S.BaseTypeError("InfoWindow.offset","object",t).error(),this)}}]),e}(m.default);e.default=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(224),r=i(o),a=n(18),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(34),_=i(m),g=n(4),y=i(g),x=n(45),b=i(x),S=n(333),w=i(S),E=n(161),T=n(57),A=n(471),P=n(40),I=i(P),k=n(156),L=k.CircleStyle,M=I.default.isValidColor,C=I.default.isNumber,R=function(t){function e(t){return(0,f.default)(this,e),(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t))}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=E.GEOMETRY_TYPES.CIRCLE,this._layerType=T.RENDER_LAYER_TYPE.circle,this._className="MultiCircle"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.center&&t.center instanceof b.default?!t.radius||!C(t.radius)||t.radius<=0?console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素的radius属性无效！"):(t.styleId||(t.styleId="default"),t._valid=!0):console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素的center属性无效！"):console.error("MultiCircle.geometries: 希望传入CircleGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new L}},{key:"_checkStyles",value:function(t){(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,s.default)(t).forEach(function(e){var n=t[e];n&&n instanceof L?n instanceof L&&(M(n.color)?M(n.borderColor)||console.error("MultiCircle.styles: 样式id ",e," 对应的PolygonStyle.borderColor属性无效",n):console.error("MultiCircle.styles: 样式id ",e," 对应的PolygonStyle.color属性无效",n)):console.error("MultiCircle.styles: 样式id ",e,"希望传入CircleStyle实例，实际传入：",n)})}},{key:"_transferFromGeometry",value:function(t){return(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_transferFromGeometry",this).call(this,t).map(function(t){var e=t.center,n=t.radius;if(t._valid)return(0,r.default)({},t,{paths:(0,A.getCirclePath)(e,n)})}).filter(function(t){return!!t})}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.center})}},{key:"_getAllSegments",value:function(){return[]}}]),e}(w.default);t.exports=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(224),r=i(o),a=n(18),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(34),_=i(m),g=n(4),y=i(g),x=n(45),b=i(x),S=n(333),w=i(S),E=n(161),T=n(57),A=n(472),P=n(40),I=i(P),k=n(156),L=k.EllipseStyle,M=I.default.isValidColor,C=I.default.isNumber,R=function(t){function e(t){return(0,f.default)(this,e),(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t))}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=E.GEOMETRY_TYPES.ELLIPSE,this._layerType=T.RENDER_LAYER_TYPE.ellipse,this._className="MultiEllipse"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.center&&t.center instanceof b.default?!t.majorRadius||!C(t.majorRadius)||t.majorRadius<=0?console.error("MultiEllipse.geometries: 希望传入EllipseGeometry数组，实际第"+e+"元素的majorRadius属性无效！"):!t.minorRadius||!C(t.minorRadius)||t.minorRadius<=0?console.error("MultiEllipse.geometries: 希望传入EllipseGeometry数组，实际第"+e+"元素的minorRadius属性无效！"):(t.styleId||(t.styleId="default"),t._valid=!0):console.error("MultiEllipse.geometries: 希望传入EllipseGeometry数组，实际第"+e+"元素的center属性无效！"):console.error("MultiEllipse.geometries: 希望传入EllipseGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new L}},{key:"_checkStyles",value:function(t){(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,s.default)(t).forEach(function(e){var n=t[e];n&&n instanceof L?n instanceof L&&(M(n.color)?M(n.borderColor)||console.error("MultiEllipse.styles: 样式id ",e," 对应的EllipseStyle.borderColor属性无效",n):console.error("MultiEllipse.styles: 样式id ",e," 对应的EllipseStyle.color属性无效",n)):console.error("MultiEllipse.styles: 样式id ",e,"希望传入EllipseStyle实例，实际传入：",n)})}},{key:"_transferFromGeometry",value:function(t){return(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_transferFromGeometry",this).call(this,t).map(function(t){var e=t.center,n=t.majorRadius,i=t.minorRadius;if(t._valid)return(0,r.default)({},t,{paths:(0,A.getEllipsePath)(e,n,i)})}).filter(function(t){return!!t})}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.center})}},{key:"_getAllSegments",value:function(){return[]}}]),e}(w.default);t.exports=R},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(18),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m),g=n(45),y=i(g),x=n(301),b=i(x),S=n(388),w=i(S),E=n(161),T=n(57),A=n(40),P=i(A),I=P.default.isNumber,k=P.default.isUndefined,L=function(t){function e(t){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t))}return(0,_.default)(e,t),(0,f.default)(e,[{key:"_initialize",value:function(t){var e=t.enableCollision,n=void 0!==e&&e;this.enableCollision=n}},{key:"_createLayer",value:function(){(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"_createLayer",this).call(this),this.layer._enableCollision=!!this.enableCollision}},{key:"_setGeometryType",value:function(){this._geometryType=E.GEOMETRY_TYPES.LABEL,this._layerType=T.RENDER_LAYER_TYPE.label,this._className="MultiLabel"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId?t.position&&t.position instanceof y.default?t.content?k(t.rank)||I(t.rank)||console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的rank属性无效!"):console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的content属性无效!"):console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素的position属性无效！"):t.styleId="default":console.error("MultiLabel.geometries: 希望传入LabelGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new w.default}},{key:"_checkStyles",value:function(t){(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"_checkStyles",this).call(this,t),(0,r.default)(t).forEach(function(e){var n=t[e];n&&n instanceof w.default||console.error("MultiLabel.styles: 样式id ",e,"希望传入LabelStyle实例，实际传入：",n)})}}]),e}(b.default);t.exports=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(18),r=i(o),a=n(15),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(34),_=i(m),g=n(4),y=i(g),x=n(148),b=i(x),S=n(373),w=n(396),E=i(w),T=n(10),A=n(65),P=i(A),I=n(45),k=i(I),L=n(301),M=i(L),C=n(161),R=n(57),N=n(499),B=function(t){return"number"==typeof t&&!(0,b.default)(t)},O=function(t){function e(t){(0,f.default)(this,e);var n=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t));return(0,s.default)(n,S.easableMixin),n._movingState=null,n._pausedState=null,n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_initialize",value:function(t){var e=t.enableCollision,n=void 0!==e&&e;this.enableCollision=n}},{key:"_createLayer",value:function(){(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_createLayer",this).call(this),this.layer._enableCollision=!!this.enableCollision}},{key:"_setGeometryType",value:function(){this._geometryType=C.GEOMETRY_TYPES.POINT,this._layerType=R.RENDER_LAYER_TYPE.marker,this._className="MultiMarker"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.styleId||(t.styleId="default"):console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素不存在！"),t.position&&t.position instanceof k.default||console.error("MultiMarker.geometries: 希望传入PointGeometry数组，实际第"+e+"元素的position属性无效！")})}},{key:"_getDefaultStyle",value:function(){return new N}},{key:"_checkStyles",value:function(t){(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,r.default)(t).forEach(function(e){var n=t[e];n&&n instanceof N?n.width&&n.width>0&&n.width%1==0?n.height&&n.height>0&&n.height%1==0?n.src||console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.src属性无效",n):console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.height属性无效",n):console.error("MultiMarker.styles: 样式id ",e," 对应的MarkerStyle.width属性无效",n):console.error("MultiMarker.styles: 样式id ",e,"希望传入MarkerStyle实例，实际传入：",n)})}},{key:"moveAlong",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.autoRotation,o=void 0!==i&&i;if(!this.getMap())return this;this.stopMove();var a={},l=this.map.transform.getDistanceScales(),u=l.pixelsPerMeter,c=l.pixelsPerDegree,f=[c[0]/u[0],c[1]/u[1]];try{(0,r.default)(t).forEach(function(n){if(!(n in e._idSet))return void console.warn("MultiMarker中并不存在id为: "+n+"的点！");var i=t[n],o=i.path,r=i.duration,s=i.speed;if(e._checkMoveAlongParams(i,n)){var l=[],u=0,c=0;if(o.forEach(function(t,e,n){if(e!==n.length-1){var i=new P.default((n[e+1].lng-t.lng)*f[0],(n[e+1].lat-t.lat)*f[1]),o=i.mag();u+=o,l.push({angle:i.angle(),segDistance:o,start:t,end:n[e+1],radio:null,totalRadio:null})}}),0===u)return void console.error("moveAlong方法中id为"+n+"对应的path计算得到的总长度为0");var d=s/3.6,h=r||u/d*1e3;l.forEach(function(t){t.radio=t.segDistance/u,c+=t.radio,t.totalRadio=c,t.pendingTime=t.radio*h,t.totalPendingTime=t.totalRadio*h,t.totalDistance=u}),a[n]={segmentInfos:l,pendingTime:h,curSeg:0,geometry:e._rawGeometries[e._idSet[n]],param:i}}})}catch(t){console.error("moveAlong数据解析出错，请检查传入参数是否合法",t)}this._moveParamSet=t;var d=[],h=0;return(0,r.default)(a).forEach(function(e){var n=a[e].geometry;n.position.equals(t[e].path[0])||d.push((0,s.default)({},n,{position:t[e].path[0]})),h=h>a[e].pendingTime?h:a[e].pendingTime}),d.length>0&&this.updateGeometries(d),this._startMoveAnimation(a,{duration:h,startTime:0,autoRotation:o}),this}},{key:"_checkMoveAlongParams",value:function(t,e){var n=t.path,i=t.duration,o=t.speed,r=void 0!==i,a=void 0!==o;return Array.isArray(n)&&n.length>0?r||a?r&&(!B(i)||i<=0)?(console.error("moveAlong方法中id为"+e+"对应的duration: "+i+"不合法!"),!1):!(a&&(!B(o)||o<=0))||(console.error("moveAlong方法中id为"+e+"对应的speed: "+o+"不合法!"),!1):(console.error("moveAlong方法中id为"+e+"对应的duration和speed均未定义!"),!1):(console.error("moveAlong方法中id为"+e+"对应的path: "+n+"不合法!"),!1)}},{key:"_startMoveAnimation",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.duration,o=void 0===i?0:i,a=n.startTime,l=void 0===a?0:a,u=n.autoRotation,c=void 0!==u&&u,f=this._moveParamSet;this._ease(function(n){var i=[],a={},u=l+n*o;(0,r.default)(t).forEach(function(n){var o=t[n],r=o.segmentInfos[o.curSeg];if(r){for(;u>r.totalPendingTime&&(o.curSeg+=1,r=o.segmentInfos[o.curSeg]););if(r){var l=new k.default(0,0),d=(u+r.pendingTime-r.totalPendingTime)/r.pendingTime;l.lat=(0,E.default)(r.start.lat,r.end.lat,d),l.lng=(0,E.default)(r.start.lng,r.end.lng,d),o.geometry.position=l;var h=o.geometry.styleId&&0===e.styles[o.geometry.styleId].faceTo;c&&h&&(o.geometry.properties=(0,s.default)({},o.geometry.properties,{$angle:(0,T.radianToDegree)(r.angle)-90}));var v=f[n].path.slice(0,o.curSeg+1);v.push(l),a[n]={passedLatLngs:v,angle:o.geometry.properties&&o.geometry.properties.$angle},i.push(o.geometry)}}}),e._movingState={moveAlongProcessed:t,time:u,left:(1-n)*o,autoRotation:c},e.updateGeometries(i);var d=e.getMap();d&&d._changeFPS(),e.emit("moving",a)},function(){e._movingState=null,e._pausedState=null,e.emit("move_ended",f)},function(){e._movingState&&(e.emit("move_stopped",f),e._pausedState=null,e._movingState=null)},{easing:T.linearEase,animate:!0,duration:o})}},{key:"stopMove",value:function(){return this._abortFn&&(this._abortFn(),this._abortFn=null),this._finishFn=null,this}},{key:"pauseMove",value:function(){return this._movingState&&(this._pausedState=this._movingState,this._movingState=null,this.stopMove(),this.emit("move_paused")),this}},{key:"resumeMove",value:function(){if(this._pausedState){var t=this._pausedState,e=t.moveAlongProcessed,n=t.autoRotation,i=t.time,o=t.left;this._startMoveAnimation(e,{duration:o,autoRotation:n,startTime:i}),this._pausedState=null,this._movingState=null,this.emit("move_resumed")}return this}},{key:"_getAllPoints",value:function(){return this.getGeometries().map(function(t){return t.position})}}]),e}(M.default);t.exports=O},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(224),r=i(o),a=n(18),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(34),_=i(m),g=n(4),y=i(g),x=n(333),b=i(x),S=n(161),w=n(57),E=n(325),T=n(40),A=i(T),P=n(156),I=P.RectangleStyle,k=A.default.isValidColor,L=A.default.isNumber,M=function(t){function e(t){return(0,f.default)(this,e),(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t))}return(0,y.default)(e,t),(0,h.default)(e,[{key:"_setGeometryType",value:function(){this._geometryType=S.GEOMETRY_TYPES.RECTANGLE,this._layerType=w.RENDER_LAYER_TYPE.rectangle,this._className="MultiRectangle"}},{key:"_checkGeometries",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t,e){t?t.center&&t.center instanceof TMap.LatLng?!t.width||!L(t.width)||t.width<=0?console.error("MultiRectangle.geometries: 希望传入RectangleGeometry数组，实际第"+e+"元素的width属性无效！"):!t.height||!L(t.height)||t.height<=0?console.error("MultiRectangle.geometries: 希望传入RectangleGeometry数组，实际第"+e+"元素的height属性无效！"):(t.styleId||(t.styleId="default"),t._valid=!0):console.error("MultiRectangle.geometries: 希望传入RectangleGeometry数组，实际第"+e+"元素的center属性无效！"):console.error("MultiRectangle.geometries: 希望传入RectangleGeometry数组，实际第"+e+"元素不存在！")})}},{key:"_getDefaultStyle",value:function(){return new I}},{key:"_checkStyles",value:function(t){(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_checkStyles",this).call(this,t),(0,s.default)(t).forEach(function(e){var n=t[e];n&&n instanceof I?n instanceof I&&(k(n.color)?k(n.borderColor)||console.error("MultiRectangle.styles: 样式id ",e," 对应的RectangleStyle.borderColor属性无效",n):console.error("MultiRectangle.styles: 样式id ",e," 对应的RectangleStyle.color属性无效",n)):console.error("MultiRectangle.styles: 样式id ",e,"希望传入RectangleStyle实例，实际传入：",n)})}},{key:"_transferFromGeometry",value:function(t){return(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"_transferFromGeometry",this).call(this,t).map(function(t){var e=t.center,n=t.width,i=t.height;if(t._valid)return(0,r.default)({},t,{paths:(0,E.getRectanglePath)(e,n,i)})}).filter(function(t){return!!t})}}]),e}(b.default);t.exports=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(387),p=i(v),m=n(553),_=i(m),g=n(295),y=function(t){function e(){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"onInit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.count=t.count,this.instance=t.instance,this.position=this.instance.center||this.instance.position,this.zoomOnClick=t.zoomOnClick,this._handlers=[],this.visible=!0}},{key:"createDOM",value:function(){var t=this,e=document.createElement("div");return this.instance&&this._updateContent(e),this.finger=new g.Finger(e,{preventDefaultMove:!0,preventDefaultEnd:!0}),this.finger.on("tap",function(){t.instance.geometries&&t.visible&&t.zoomOnClick&&t.map.fitBounds(t.instance.bounds),t.emit("overlay-click",t.instance)}),e}},{key:"updateContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.count=t.count,this.instance=t.instance,this.position=this.instance.center||this.instance.position,this._updateContent(this.dom),this.updateDOM(),this.map!==t.map&&this.setMap(t.map),this}},{key:"_updateContent",value:function(t){if(1===this.count){t.textContent="",t.style.cssText=["position:absolute;","width: 32px;","height: 32px;"].join(" ");var e=document.createElement("img");e.height=32,e.src=_.default,e.style.cssText=["position: absolute;","bottom: 16px;"].join(" "),t.appendChild(e)}else t.style.cssText="\n\t\t\tposition: absolute;\n\t\t\twidth: 40px;\n\t\t\theight: 40px;\n\t\t\tborder-radius: 40px;\n\t\t\tbackground-color: green;\n\t\t\ttransform: translate3d(718.348px, 395.68px, 0px);\n\t\t\ttext-align: center;\n\t\t\tline-height: 40px;\n\t\t\tbox-shadow: 0 1px 1px 0 rgba(0,0,0,0.2);\n\t\t\tborder: 1px solid #3875FF;\n\t\t\tbackground-color: rgba(227,235,255,0.9);\n\t\t\tfont-size: 14px;\n\t\t\tcolor: #1D63FF;",t.textContent=this.count}},{key:"updateDOM",value:function(){if(this.map&&this.visible){var t=this.map.projectToContainer(this.position),e=t.getX()-20+"px",n=t.getY()-20+"px";this.dom.style.transform="translate3d("+e+", "+n+", 0px)"}}},{key:"setVisible",value:function(t){return this.visible=!!t,this.dom.style.display=this.visible?"":"none",this}},{key:"onDestroy",value:function(){this._handlers.forEach(function(t){return t.remove()}),this.finger&&this.finger.destroy(),this.removeAllListeners(),this.count=null,this.instance=null,this.position=null,this.dom=null,this.visible=null}}]),e}(p.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(115),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m),g=n(25),y=i(g),x=n(473),b=i(x),S=n(498),w=i(S),E=n(658),T=i(E),A=n(26),P=i(A),I=n(10),k=i(I),L=n(45),M=i(L),C=n(724),R=i(C),N=n(28),B=n(42),O=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return n.id=t.id||k.default.uniqueId(),n._defaultMarkers=[],n.clusters=[],n._overlayList=[],n._eventHandlers=[],n._ready=!1,n._prevZoom=null,n._cacheCluster=n.clusters,n.zIndex=t.zIndex||null,n.enableDefaultStyle=!1!==t.enableDefaultStyle,n.minimumClusterSize=t.minimumClusterSize||2,n.zoomOnClick=!!n.enableDefaultStyle&&!1!==t.zoomOnClick,n.gridSize=t.gridSize||60,n.averageCenter=!1!==t.averageCenter,n.maxZoom=k.default.clamp(t.maxZoom||y.default.maxZoom,y.default.minZoom,y.default.maxZoom),n._checkGeometries(t.geometries),n._rawGeometries=n._assignIdToGeometry(t.geometries),n._idSet=n._updateGeometryIdSet(n._rawGeometries),n.geometries=n._rawGeometries,t.map&&n.setMap(t.map),(0,B.statCn)("Map"),n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"setMap",value:function(t){return t===this.map?this:null===t||t instanceof window.TMap.Map?(t?this.map?(this.setMap(null),this.setMap(t)):this.id&&t.getLayer(this.id)?console.error("Map中已存在id为"+this.id+"的图层，无法重复添加"):(this.map=t,this._bindEventHandler(),this._createLayer(),this._ready=!0,this._redraw()):(this._removeEventHander(),this._removeLayer(),this._overlayList.forEach(function(t){return t.setMap(null)}),this.map=null,this._ready=!1),this):(console.error("所传入参数并非TMap.Map的实例！"),this)}},{key:"setGeometries",value:function(t){return Array.isArray(t)?t===this._rawGeometries?this:((0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setGeometries",this).call(this,t,this.styles),this):(new N.BaseTypeError("geometries","Array",t).error(),this)}},{key:"updateGeometries",value:function(t,n){return t?((0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"updateGeometries",this).call(this,t,n),this):this}},{key:"_bindEventHandler",value:function(){var t=this;this._eventHandlers.push(P.default.on(this.map,"zoom",function(){var e=k.default.round(t.map.getZoom(),1);t._prevZoom!==e&&(t._prevZoom=e,t._resetViewport())})),this._eventHandlers.push(P.default.on(this.map,"idle",function(){t._redraw()})),this._eventHandlers.push(P.default.on(this,"geometry_changed",function(){t.map&&(t.map&&t.map.getSource(t.id).setData(t.geometries),t._resetViewport(),t._redraw())}))}},{key:"_removeEventHander",value:function(){this._eventHandlers.forEach(function(t){return t.remove()})}},{key:"getMap",value:function(){return this.map}},{key:"_createLayer",value:function(){this.layer=new T.default({map:this.map,id:this.id,type:this._layerType,zIndex:this.zIndex,maxZoom:this.maxZoom,gridSize:this.gridSize,minimumClusterSize:this.minimumClusterSize,averageCenter:this.averageCenter,sourceData:this.geometries})}},{key:"_removeLayer",value:function(){this.layer.setMap(null)}},{key:"_resetViewport",value:function(){this.clusters=[],this._resetCluster=!0}},{key:"_redraw",value:function(){var t=this;if(this._ready&&this.map.getSource(this.id)){var e=this.map.transform.getDistanceScales(),n=this.map.getBounds();this.map.getSource(this.id).getCluster({pixelsPerDegree:e.pixelsPerDegree,resetCluster:this._resetCluster,mapBounds:{sw:n.getSouthWest(),ne:n.getNorthEast()},zoom:this.map.getZoom()},function(e){t.clusters=e.map(function(t){return b.default.normalizeClusterInfo(t)}),t._checkClusterChange(),t._repaint()}),this._resetCluster=!1}}},{key:"_repaint",value:function(){var t=this;if(this.enableDefaultStyle&&this.layer.visible){this._overlayList.forEach(function(t){return t.setVisible(!1)});var e=0,n=this._overlayList.length;this.clusters.forEach(function(i){var o={count:i.geometries.length,instance:i,map:t.map,zoomOnClick:t.zoomOnClick};t._constructOverlay(e,n,o),e+=1})}}},{key:"_constructOverlay",value:function(t,e,n){var i=this;if(t<e)this._overlayList[t].setVisible(!0),this._overlayList[t].updateContent(n);else{var o=new R.default(n);o.on("overlay-click",function(t){var e={};t.geometries?e.cluster=t:e.geometry=t,i.emit("click",e)}),this._overlayList.push(o)}}},{key:"_checkClusterChange",value:function(){var t=this,e=this.clusters,n=[];e.forEach(function(t){n.push((0,r.default)(t.geometries))});var i=!1;n.forEach(function(e,n){e!==(t._cacheCluster&&t._cacheCluster[n])&&(i=!0)}),i&&0!==n.length&&(this._cacheCluster=n,this.emit("cluster_changed"))}},{key:"_checkGeometries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.filter(function(t,n){return t?t.position&&t.position instanceof M.default?(t.styleId&&e[t.styleId]||(t.styleId="default"),!0):(console.error("MarkerCluster.geometries: 希望传入PointGeometry数组，实际第"+n+"元素的position属性无效！"),!1):(console.error("MarkerCluster.geometries: 希望传入PointGeometry数组，实际第"+n+"元素不存在！"),!1)})}},{key:"getClusters",value:function(){return this.clusters}},{key:"zoomInCluster",value:function(t){t.bounds?this.map.fitBounds(t.bounds):console.warn("聚合簇 "+t+" 缺少bounds信息")}},{key:"setVisible",value:function(t){this._overlayList.forEach(function(t){return t.setVisible(!1)}),this.layer.setVisible(t),this._repaint()}},{key:"getVisible",value:function(){return this.layer.visible}},{key:"destroy",value:function(){this.setMap(null),this._resetViewport(),this._overlayList.forEach(function(t){return t.destroy()}),this._defaultMarkers=null,this.clusters=null,this._overlayList=null,this._eventHandlers=null,this._ready=null,this._prevZoom=null,this._cacheCluster=null,this.zIndex=null,this.enableDefaultStyle=null,this.minimumClusterSize=null,this.zoomOnClick=null,this.gridSize=null,this.averageCenter=null,this.maxZoom=null,this._rawGeometries=null,this.id=null,this._idSet=null,this.geometries=null}}]),e}(w.default);e.default=O},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(26),p=i(v),m=n(768),_=i(m),g=n(93),y=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.map=t,n.el=n.map.getContainer(),n.eventHandlers=[],n.pickQuery=new _.default(n.map),[{type:"mousedown",immediate:!0,delay:!1},{type:"mouseout",immediate:!0,delay:!1},{type:"mouseover",immediate:!0,delay:!1},{type:"mouseup",immediate:!0,delay:!1},{type:"touchstart",immediate:!0,delay:!1},{type:"touchend",immediate:!0,delay:!1},{type:"touchcancel",immediate:!1,delay:!1},{type:"click",immediate:!1,delay:!1},{type:"rightclick",immediate:!1,delay:!1},{type:"dblclick",immediate:!1,delay:!0}].forEach(function(t){n.eventHandlers.push(p.default.on(n.map,t.type,function(e){e.delay?setTimeout(function(){n.onHandleEvent(e,t)},50):n.onHandleEvent(e,t)}))}),n.eventHandlers.push(p.default.on(n.map,{mousemove:p.default.throttle(function(t){n.requestPick("mousemove",{event:t})},50),touchmove:p.default.throttle(function(t){n.requestPick("touchmove",{event:t})},50)})),n._pickRequestObject={},n._isPicking=!1,n.setMaxListeners(300),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"onHandleEvent",value:function(t,e){this.requestPick(e.type,{event:t}),e.immediate&&this.runPick()}},{key:"requestPick",value:function(t,e){if(!this.map.moving||"dblclick"===t||"touchmove"===t||"touchend"===t){delete this._pickRequestObject.type,delete this._pickRequestObject.pos,delete this._pickRequestObject.radius,this._pickRequestObject.type=t;var n=e.event;if(n&&(n.point||n.points)){var i=n.points&&n.points[0]||n.point;this._pickRequestObject.pos=i,this._pickRequestObject.radius=1,this._pickRequestObject.mapEvent=n}}}},{key:"runPick",value:function(){var t=this;(!this._isPicking&&this._pickRequestObject.type&&!this.map.moving||"touchmove"===this._pickRequestObject.type)&&(this._isPicking=!0,this.pickQuery.pickObject({x:this._pickRequestObject.pos.x,y:this._pickRequestObject.pos.y,radius:this._pickRequestObject.radius,callback:function(e){e&&e.layerId&&e.objectIndex>-1&&t.emit("action",{eventType:t._pickRequestObject.type,layerId:e.layerId,objectIndex:e.objectIndex,mapEvent:t._pickRequestObject.mapEvent}),t.emit(t._pickRequestObject.type,t._pickRequestObject.mapEvent),t._clearRequest(),t._isPicking=!1}}))}},{key:"_clearRequest",value:function(){this._pickRequestObject={}}},{key:"destroy",value:function(){this._clearRequest(),this.pickQuery.destroy(),this.map=null,this.removeAllListeners()}}]),e}(g);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(236),r=i(o),a=n(23),s=i(a),l=n(281),u=i(l),c=n(30),f=i(c),d=n(21),h=i(d),v=n(280),p=i(v),m=n(3),_=i(m),g=n(0),y=i(g),x=n(1),b=i(x),S=n(5),w=i(S),E=n(4),T=i(E),A=n(93),P=i(A),I=n(293),k=n(501),L=n(729),M=n(552),C=i(M),R=n(481),N=n(728),B=n(339),O=n(502),D=n(466),z=i(D),V={ANY:1,CENTER:0},F=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,y.default)(this,e);var n=(0,w.default)(this,(e.__proto__||(0,_.default)(e)).call(this));return n._map=t.map,n._init(),n}return(0,T.default)(e,t),(0,b.default)(e,[{key:"_init",value:function(){function t(){return e.apply(this,arguments)}var e=(0,p.default)(u.default.mark(function t(){var e,n,i,o,r,a,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,I.checkKey)(this._map.id),n=(0,I.overseaCheckKey)(),t.next=4,h.default.all([e,n]);case 4:if(i=t.sent,o=(0,f.default)(i,2),r=o[0],a=o[1],r){t.next=9;break}return console.error("鉴权失败：海外图鉴权失败"),t.abrupt("return");case 9:if(!a||0!==a.error){t.next=18;break}return t.next=12,(0,O.getOnlineFrontier)(a);case 12:this.frontier=t.sent,s=a&&a.info&&a.info.detail,this.tilesrc=a&&a.info&&a.info.tilesrc,this.isOverseaMap=!1,this._turnOnOverseaControl(),this._turnOnLogoControl(s);case 18:case"end":return t.stop()}},t,this)}));return t}()},{key:"_turnOnOverseaControl",value:function(){var t=this;this._map.on("bounds_changed",function(){t._switchOversea()}),this._map.on("mapstyle_changed",function(){t._switchOversea()})}},{key:"_switchOversea",value:function(){var t=this._map.getBaseMap();if(this.tilesrc&&"satellite"!==t.type){if(this._map.getZoom()>6){var e=this._map.getBounds();return void(this._checkIsInDistrict("china",e,V.ANY)?this._changeMapType("china"):this._changeMapType("overseamap"))}this._changeMapType("china")}}},{key:"_changeMapType",value:function(t){if(this.isOverseaMap||"overseamap"!==t)this.isOverseaMap&&"china"===t&&(this.isOverseaMap=!1,this._changeLayerVisible("china"));else{this.isOverseaMap=!0;var e=this._map.getLayer("oversea");e||(e=(0,R.createOverseaLayer)({map:this._map,tilesrc:this.tilesrc,key:z.default,encrypt:N.encrypt})),this._changeLayerVisible("oversea")}}},{key:"_changeLayerVisible",value:function(t){var e=this,n="oversea"===t;this.visibleCache=this.visibleCache||{};var i=[].concat((0,s.default)(B.VECTOR_LAYER_ID),["handdraw","traffic_base","oversea"]);(0,r.default)(i).forEach(function(t){var i=e._map.getLayer(t);if(i)if(n){if(e.visibleCache[t]=i.visible,"oversea"===t)return void i.setVisible(!0);i.setVisible(!1)}else{if("oversea"===t)return void i.setVisible(!1);var o=e.visibleCache[t];i.setVisible(o)}}),n?(this._map.getSource("oversea")&&this._map.getSource("oversea").unfreeze(),this._map.getSource("vector_source")&&this._map.getSource("vector_source").freeze(),this._map.getSource("traffic_base")&&this._map.getSource("traffic_base").freeze(),this._map.getSource("handdraw")&&this._map.getSource("handdraw").freeze()):(this._map.getSource("oversea")&&this._map.getSource("oversea").freeze(),this._map.getSource("vector_source")&&this._map.getSource("vector_source").unfreeze(),this._map.getSource("traffic_base")&&this._map.getSource("traffic_base").unfreeze(),this._map.getSource("handdraw")&&this._map.getSource("handdraw").unfreeze())}},{key:"_turnOnLogoControl",value:function(t){var e=this;this._map.on("bounds_changed",function(){e._switchLogo(t)}),this._map.on("mapstyle_changed",function(){e._switchLogo(t)})}},{key:"_switchLogo",value:function(t){var e=this;if("satellite"!==this._map.getBaseMap().type)for(var n=Math.ceil(this._map.getZoom()),i=t||k.defaultLogoRules,o=0;o<i.length;o++){var r=i[o];n>=r.level[0]&&n<=r.level[1]&&function(){var t=null,n=-1;r.districts.forEach(function(i){if("default"===i.frontier)i.priority>n&&(t=i,n=i.priority);else{var o=e._map.getBounds();e._checkIsInDistrict(i.frontier,o,i.rule)&&i.priority>n&&(t=i,n=i.priority)}}),e._updateLogo(t)}()}}},{key:"_checkIsInDistrict",value:function(t,e,n){var i=this.frontier&&this.frontier[t],o=!1;if(i)if(n===V.CENTER){var r=e.getCenter();o=(0,L.isPointInFrontier)(r,i)}else if(n===V.ANY){for(var a=(0,L.getBoundsPoints)(e,!0),s=0;s<a.length;s++)if((0,L.isPointInFrontier)(a[s],i)){o=!0;break}o=o||(0,L.isFrontierInBounds)(e,i)}return o}},{key:"_updateLogo",value:function(t){var e=this._map.layerResource.getFinalUsedMapStyleId(),n=void 0;n=1===e&&t.logo_night?t.logo_night:t.logo?t.logo:C.default,this._map.getControl("logo").changeLogoUrl(n)}}]),e}(P.default);e.default=F},function(t,e,n){"use strict";function i(t){return l(t)?o(t):t}function o(t){var e=s.enc.Utf8.parse(t),n=s.enc.Utf8.parse("d8ab2f7b7a7536a71894084e1c812fd0"),i=s.enc.Utf8.parse("c0ab1f54he78k36d"),o=s.AES.encrypt(e,n,{iv:i});return encodeURIComponent(o.toString())}Object.defineProperty(e,"__esModule",{value:!0}),e.encrypt=i;var r=n(40),a=function(t){return t&&t.__esModule?t:{default:t}}(r),s=n(975),l=a.default.isString},function(t,e,n){"use strict";function i(t,e){var n=a(t),i=s(e),o=n.x,r=n.y,l=i.polyX,u=i.polyY,c=u.length-1,f=!1,d=void 0;for(d=0;d<u.length;d++)(u[d]<r&&u[c]>=r||u[c]<r&&u[d]>=r)&&(l[d]<=o||l[c]<=o)&&(f^=l[d]+(r-u[d])/(u[c]-u[d])*(l[c]-l[d])<o),c=d;return f}function o(t,e){var n=t.getNorthEast(),i=t.getSouthWest(),o=new l(n.getLat(),i.getLng()),r=new l(i.getLat(),n.getLng()),a=[n,o,i,r],s=n.getLng()>i.getLng()?n.getLng():n.getLng()+360;return a.push(new l(n.getLat(),(s+i.getLng())/2)),a.push(new l(i.getLat(),(s+i.getLng())/2)),a.push(new l((n.getLat()+i.getLat())/2,n.getLng())),a.push(new l((n.getLat()+i.getLat())/2,i.getLng())),e&&a.push(t.getCenter()),a}function r(t,e){for(var n=s(e),i=n.latLngArray,o=0;o<i.length;o++)if(t.contains(i[o]))return!0;return!1}function a(t){var e=t.getLng().toString(),n=t.getLat().toString(),i=20037508.34*e/180,o=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);return o=20037508.34*o/180,{x:i,y:o}}function s(t){var e=t.split(":"),n=[],i=[],o=[];if(e.length>0)for(var r=0;r<e.length;r++){var a=e[r].split(",");n[r]=new l(a[1],a[0]),i[r]=20037508.34*a[0]/180,o[r]=Math.log(Math.tan((90+a[1])*Math.PI/360))/(Math.PI/180)*20037508.34/180}return{latLngArray:n,polyX:i,polyY:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.isPointInFrontier=i,e.getBoundsPoints=o,e.isFrontierInBounds=r;var l=n(45)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(390),u=n(302),c=function(){function t(e,n){(0,r.default)(this,t),this._map=e,this._setMapZoomType(n.mapZoomType),this._onDblClick=this._onDblClick.bind(this)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(){this.isEnabled()||(this._map._on("dblclick",this._onDblClick),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._map._off("dblclick",this._onDblClick),this._enabled=!1)}},{key:"_setMapZoomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.MAP_ZOOM_TYPE.DEFAULT;return t===u.MAP_ZOOM_TYPE.CENTER?this._aroundCenter=!0:(t!==u.MAP_ZOOM_TYPE.DEFAULT&&console.error("mapZoomType参数错误，参数应该是MAP_ZOOM_TYPE常量"),this._aroundCenter=!1)}},{key:"_onDblClick",value:function(t){var e=t.point;(0,l.isResponsible)(this._map,e)&&this._map.zoomTo(Math.min(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),this._map.transform.maxZoom),{around:this._aroundCenter?this._map.getCenter():t.latLng},t)}}]),t}();t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(390),u=n(26),c=n(145),f=n(10),d=f.bezier(0,0,.3,1),h=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),this._moveStartEvent=null,f.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)}},{key:"_onDown",value:function(t){if(!this._ignoreEvent(t)&&!this.isActive()){this._moveStartEvent=t,t.touches&&((0,u.isMiniProgram)()&&"pc"!==(0,u.getMiniProgramEnv)()||!(0,u.isMiniProgram)())?(window.document.addEventListener("touchmove",this._onMove),window.document.addEventListener("touchend",this._onTouchEnd)):(window.document.addEventListener("mousemove",this._onMove),window.document.addEventListener("mouseup",this._onMouseUp)),window.addEventListener("blur",this._onMouseUp),this._active=!1;var e=c.mousePos(this._el,t);(0,l.isResponsible)(this._map,e)&&(this._pos=e),this._inertia=[[Date.now(),this._pos]]}}},{key:"_onMove",value:function(t){var e=this;if(!this._ignoreEvent(t)){if(!this.isActive()){if(!this._isMoved(t))return;this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("panstart",t),this._fireEvent("movestart",t),this._map.once("moveend",function(){e._active=!1})}var n=c.mousePos(this._el,t),i=this._map;(0,l.isResponsible)(i,n)&&(i.stopMoving(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),n]),i.transform.setLocationAtPoint(i.unprojectFromContainer(this._pos),n),this._pos=n),this._fireEvent("drag",t),this._fireEvent("pan",t),this._fireEvent("move",t),t.touches||t.preventDefault()}}},{key:"_onUp",value:function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._fireEvent("panend",t),this._drainInertiaBuffer();var n=function(){e._map.moving=!1,e._fireEvent("moveend",t)},i=this._inertia;if(i.length<2)return void n();var o=i[i.length-1],r=i[0],a=o[1].sub(r[1]),s=(o[0]-r[0])/1e3;if(0===s||o[1].equals(r[1]))return void n();var u=c.mousePos(this._el,t);if((0,l.isResponsible)(this._map,u)){var f=a.mult(.3/s),h=f.mag();h>1400&&(h=1400,f._unit()._mult(h));var v=h/750,p=f.mult(-v/2);this._map.panBy(p,{duration:1e3*v,easing:d,noMoveStart:!0},{originalEvent:t})}}}},{key:"_onMouseUp",value:function(t){this._ignoreEvent(t)||(this._onUp(t),window.document.removeEventListener("mousemove",this._onMove),window.document.removeEventListener("mouseup",this._onMouseUp),window.removeEventListener("blur",this._onMouseUp))}},{key:"_onTouchEnd",value:function(t){this._ignoreEvent(t)||(this._onUp(t),window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onTouchEnd))}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragRotate&&e.dragRotate.isActive())return!0;if(t.touches)return t.touches.length>1;if(t.ctrlKey)return!0;return"mousemove"===t.type?!1&t.buttons:t.button&&0!==t.button}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()}},{key:"_isMoved",value:function(t){var e=this._moveStartEvent;if(!e)return!0;var n=void 0,i=void 0;return t.touches?(n=e.touches[0],i=t.touches[0]):(n=e,i=t),Math.abs(i.clientX-n.clientX)>2||Math.abs(i.clientY-n.clientY)>2}}]),t}();t.exports=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(26),u=n(40),c=i(u),f=n(28),d=n(145),h=n(10),v=c.default.isBoolean,p=h.bezier(0,0,.25,1),m=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),this._pitchWithRotate=!0,this._moveStartEvent=null,this.pitchable=!0,this.rotatable=!0,h.bindAll(["_onDown","_onMove","_onUp"],this)}return(0,s.default)(t,[{key:"setPitchable",value:function(t){v(t)?this.pitchable=t:new f.BaseTypeError("pitchable","Boolean",t).error()}},{key:"setRotatable",value:function(t){v(t)?this.rotatable=t:new f.BaseTypeError("rotatable","Boolean",t).error()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)}},{key:"_onDown",value:function(t){this._ignoreEvent(t)||this.isActive()||(this._moveStartEvent=t,window.document.addEventListener("mousemove",this._onMove),window.document.addEventListener("mouseup",this._onUp),window.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getHeading()]],this._pos=d.mousePos(this._el,t),this._startPos=this._pos,this._center=this._map.transform.centerPoint,t.preventDefault())}},{key:"_onMove",value:function(t){var e=this;if(!this._ignoreEvent(t)){if(!this.isActive()){if(!this._isMoved(t))return;this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t),this._map.once("moveend",function(){e._active=!1})}var n=this._map;if(n.stopMoving(),this.rotatable||this.pitchable){var i=this._pos,o=d.mousePos(this._el,t),r=.8*(i.x-o.x),a=-.5*(i.y-o.y),s=n.getHeading()-r,l=n.getPitch()-a,u=this._inertia,c=u[u.length-1];this.rotatable&&(this._drainInertiaBuffer(),u.push([Date.now(),n._normalizeHeading(s,c[1])]),this._fireEvent("rotate",t),n.transform.heading=s),this.pitchable&&(this._fireEvent("pitch",t),n.transform.pitch=l),this._fireEvent("drag",t),this._fireEvent("move",t),this._pos=o}}}},{key:"_onUp",value:function(t){var e=this;if(!this._ignoreEvent(t)&&(window.document.removeEventListener("mousemove",this._onMove),window.document.removeEventListener("mouseup",this._onUp),window.removeEventListener("blur",this._onUp),this.isActive())){this._active=!1,this._fireEvent("dragend",t),this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getHeading(),o=this._inertia,r=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(o.length<2)return void r();var a=o[0],s=o[o.length-1],l=o[o.length-2],u=n._normalizeHeading(i,l[1]),c=s[1]-a[1],f=c<0?-1:1,d=(s[0]-a[0])/1e3;if(0===c||0===d)return void r();var h=Math.abs(c*(.25/d));h>180&&(h=180);var v=h/180;u+=f*h*(v/2),Math.abs(n._normalizeHeading(u,0))<this._bearingSnap&&(u=n._normalizeHeading(0,u)),n.headTo(u,{duration:1e3*v,easing:p,noMoveStart:!0},{originalEvent:t})}}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragPan&&e.dragPan.isActive())return!0;if(t.touches&&((0,l.isMiniProgram)()&&"pc"!==(0,l.getMiniProgramEnv)()||!(0,l.isMiniProgram)()))return t.touches.length>1;var n=t.ctrlKey?1:2,i=t.ctrlKey?0:2,o=t.button;return"undefined"!=typeof InstallTrigger&&2===t.button&&t.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(o=0),"mousemove"===t.type?t.buttons&0===n:!this.isActive()&&o!==i}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()}},{key:"_isMoved",value:function(t){var e=this._moveStartEvent;if(!e)return!0;var n=e,i=t;return Math.abs(i.clientX-n.clientX)>2||Math.abs(i.clientY-n.clientY)>2}}]),t}();t.exports=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(93),p=i(v),m=n(10),_=i(m),g=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this));return n.transform=t,n.bindIdleEvent(),n.start(),n.isJudging=!1,n.timer=null,n.duration=100,n.input=void 0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"start",value:function(){this.isJudging||(this.input=this.transform.getInput(),this.isJudging=!0,this.judge())}},{key:"stop",value:function(){this.isJudging=!1,this.timer&&window.clearTimeout(this.timer)}},{key:"judge",value:function(){this.timer=window.setTimeout(function(){var t=this.transform.getInput();this.inputEqual(t,this.input)?(this.stop(),this._fire("idle")):this.judge(),this.input=t}.bind(this),this.duration)}},{key:"bindIdleEvent",value:function(){this.transform._on("input_change",this.start.bind(this))}},{key:"inputEqual",value:function(t,e){return!(!t||!e)&&(_.default.forIn(t,function(n){return("center"!==n||t[n].lat===e[n].lat&&t[n].lng===e[n].lng)&&(t[n]===e[n]&&void 0)}),!0)}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(10),u=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),l.bindAll(["_onTouchStart","_onTouchMove","_onTouchEnd"],this),this.timer=null,this.duration=750,this.buffer=3,this.position=null,this.enabled=!1}return(0,s.default)(t,[{key:"enable",value:function(){this.enabled||(this._el.addEventListener("touchstart",this._onTouchStart),this._el.addEventListener("touchmove",this._onTouchMove),this._el.addEventListener("touchend",this._onTouchEnd),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this._el.removeEventListener("touchstart",this._onTouchStart),this._el.removeEventListener("touchmove",this._onTouchMove),this._el.removeEventListener("touchend",this._onTouchEnd),this.enabled=!1)}},{key:"startLongPress",value:function(){this.timer=window.setTimeout(function(){this._map._fire("longpress"),this.endLongPress()}.bind(this),this.duration)}},{key:"endLongPress",value:function(){window.clearTimeout(this.timer),this.position=null}},{key:"_onTouchStart",value:function(t){this.endLongPress(),1===t.touches.length&&(this.startLongPress(),this.position={x:t.touches[0].pageX,y:t.touches[0].pageY})}},{key:"_onTouchMove",value:function(t){if(this.position){var e=t.touches[0].pageX-this.position.x,n=t.touches[0].pageY-this.position.y;Math.sqrt(e*e+n*n)>this.buffer&&this.endLongPress()}}},{key:"_onTouchEnd",value:function(){this.endLongPress()}}]),t}();t.exports=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(390),u=n(25),c=i(u),f=n(302),d=n(145),h=n(10),v=n(26),p=window.navigator.userAgent.toLowerCase(),m=-1!==p.indexOf("firefox"),_=-1!==p.indexOf("safari")&&-1===p.indexOf("chrom"),g=function(){function t(e,n){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),h.bindAll(["_onWheel","_onTimeout"],this),this._setMapZoomType(n.mapZoomType)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)}},{key:"_setMapZoomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.MAP_ZOOM_TYPE.DEFAULT;return t===f.MAP_ZOOM_TYPE.CENTER?this._aroundCenter=!0:(t!==f.MAP_ZOOM_TYPE.DEFAULT&&console.error("mapZoomType参数错误，参数应该是MAP_ZOOM_TYPE常量"),this._aroundCenter=!1)}},{key:"_onWheel",value:function(t){var e=void 0;"wheel"===t.type?(e=t.deltaY,m&&t.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(e/=v.devicePixelRatio),t.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,_&&(e/=3));var n=v.now(),i=n-(this._time||0);this._pos=d.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout.bind(this,t),40)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()}},{key:"_onTimeout",value:function(t){this._type="wheel",this._zoom(-this._lastValue,t)}},{key:"_zoom",value:function(t,e){if(0!==t){var n=this._map,i=d.mousePos(this._el,e);if((0,l.isResponsible)(this._map,i)){var o=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==o&&(o=1/o);var r=n.ease?n.ease.to:n.transform.scrollScale,a=h.clamp(n.transform.scaleZoom(r*o),c.default.minZoom,c.default.maxZoom);n.zoomTo(a,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unprojectFromContainer(this._pos),delayEndEvents:100,smoothEasing:!0},{originalEvent:e})}}}}]),t}();t.exports=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(145),u=n(10),c=function(){function t(e){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),u.bindAll(["_onStart","_onMove","_onEnd"],this)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"enable",value:function(t){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)}},{key:"isActive",value:function(){return!!this._active}},{key:"_onStart",value:function(t){if(!this._ignoreEvent(t)){var e=l.mousePos(this._el,t.touches[0]),n=l.mousePos(this._el,t.touches[1]);this._posP0=e,this._posP1=n,this._startPitch=this._map.transform.pitch,this._gestureIntent=void 0,this._inertia=[],this._active=!1,window.document.addEventListener("touchmove",this._onMove,!1),window.document.addEventListener("touchend",this._onEnd,!1)}}},{key:"_onMove",value:function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0);var e=l.mousePos(this._el,t.touches[0]),n=l.mousePos(this._el,t.touches[1]),i=this._posP0.sub(e),o=this._posP1.sub(n),r=.5*(i.y+o.y),a=this._map;if(this._posP0=e,this._posP1=n,this._gestureIntent)a.transform.pitch=a.getPitch()-r,this._drainInertiaBuffer(),this._inertia.push([Date.now(),r]),this._fireEvent("pitch",t),this._fireEvent("move",t);else{Math.abs(Math.abs(i.x)-Math.abs(o.x))<2&&(this._gestureIntent="pitch",this._startPitch=a.transform.pitch)}t.preventDefault()}}},{key:"_onEnd",value:function(){this._active=!1,window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer()}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_ignoreEvent",value:function(t){var e=this._map;return!(!e.dragPan||!e.dragPan.isActive())||(!(!e.touchZoomRotate||!e.touchZoomRotate.isActive())||(t.touches?t.touches.length<2:void 0))}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()}}]),t}();t.exports=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1),s=i(a),l=n(302),u=n(145),c=n(10),f=c.bezier(0,0,.15,1),d=function(){function t(e,n){(0,r.default)(this,t),this._map=e,this._el=e.getContainer(),c.bindAll(["_onStart","_onMove","_onEnd"],this),this._setMapZoomType(n.mapZoomType)}return(0,s.default)(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}},{key:"_setMapZoomType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.MAP_ZOOM_TYPE.DEFAULT;return t===l.MAP_ZOOM_TYPE.CENTER?this._aroundCenter=!0:(t!==l.MAP_ZOOM_TYPE.DEFAULT&&console.error("mapZoomType参数错误，参数应该是MAP_ZOOM_TYPE常量"),this._aroundCenter=!1)}},{key:"_onStart",value:function(t){if(2===t.touches.length){var e=u.mousePos(this._el,t.touches[0]),n=u.mousePos(this._el,t.touches[1]);this._posP0=e,this._posP1=n,this._startVec=e.sub(n),this._startScale=this._map.transform.scrollScale,this._startHeading=this._map.transform.heading,this._gestureIntent=void 0,this._inertia=[],this._active=!1,window.document.addEventListener("touchmove",this._onMove,!1),window.document.addEventListener("touchend",this._onEnd,!1)}}},{key:"_onMove",value:function(t){if(2===t.touches.length){var e=u.mousePos(this._el,t.touches[0]),n=u.mousePos(this._el,t.touches[1]),i=e.add(n).div(2),o=e.sub(n),r=o.mag()/this._startVec.mag(),a=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,s=this._map;if(this._gestureIntent){var l={};"rotate"===this._gestureIntent&&(l.heading=this._startHeading+a),"zoom"===this._gestureIntent&&(l.zoom=s.transform.scaleZoom(this._startScale*r)),s.stopMoving(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),r,i]),s.easeTo(l,{duration:0,around:this._aroundCenter?s.getCenter():s.unprojectFromContainer(i)},{originalEvent:t}),this._fireEvent("rotate",t),this._fireEvent("move",t)}else{var c=Math.abs(1-r)>.15;Math.abs(a)>8?this._gestureIntent="rotate":c&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=s.transform.scrollScale,this._startHeading=s.transform.heading,this.isActive()||(this._active=!0))}t.preventDefault()}}},{key:"_onEnd",value:function(t){window.document.removeEventListener("touchmove",this._onMove),window.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer(),this._active=!1;var e=this._inertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var i=e[e.length-1],o=e[0],r=n.transform.scaleZoom(this._startScale*i[1]),a=n.transform.scaleZoom(this._startScale*o[1]),s=r-a,l=(i[0]-o[0])/1e3,u=i[2];if(0===l||r===a)return void n.snapToNorth({},{originalEvent:t});var c=.15*s/l;Math.abs(c)>2.5&&(c=c>0?2.5:-2.5);var d=1e3*Math.abs(c/(12*.15));n.easeTo({},{duration:d,easing:f,around:this._aroundCenter?n.getCenter():n.unprojectFromContainer(u)},{originalEvent:t})}},{key:"_fireEvent",value:function(t,e){return this._map._fire(t,{originalEvent:e})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()}},{key:"_ignoreEvent",value:function(t){var e=this._map;return!(!e.touchTilt||!e.touchTilt.isActive())||(t.touches?t.touches.length<2:void 0)}}]),t}();t.exports=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(26),u=i(l),c=n(739),f=i(c),d=n(503),h=function(){function t(){var e=this;(0,r.default)(this,t),this.fps=6,this.now=null,this.then=null,this.interval=1e3/this.fps,this.delta=null,this._frameDeadline=0,this._channel=new MessageChannel,this.scheduleTaskQueue=new d.ScheduleTaskQueue,this.callbacks={},this._channel.port1.onmessage=function(){if(e.scheduleTaskQueue)for(var t=e._frameDeadline-u.default.now(),n=e.scheduleTaskQueue.first;n&&(t>1||n.isTimeout());){var i=n;n=n.next,i&&i.runTask(),t=e._frameDeadline-u.default.now()}}}return(0,s.default)(t,[{key:"_initStats",value:function(){this.stats=new f.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.right="14px",this.stats.domElement.style.bottom="140px",this.stats.domElement.style.zIndex=1e6,document.body.appendChild(this.stats.domElement)}},{key:"updateFPS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.fps=Math.max(0,Math.min(t,60)),this.interval=0===this.fps?1/0:1e3/this.fps}},{key:"setCallback",value:function(t){this.addCallback("singlecb",t,!0)}},{key:"addCallback",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"function"==typeof e&&(this.callbacks[t]?n&&(this.callbacks[t]=e):this.callbacks[t]=e)}},{key:"removeCallback",value:function(t){delete this.callbacks[t]}},{key:"clearAllCallbacks",value:function(){this.callbacks={}}},{key:"start",value:function(){this._animFrameId||this._destroyed||(this.then=u.default.now(),this.tick())}},{key:"tickOnce",value:function(){var t=this;this.isUpdating||(0,u.default)(function(e){t.callback&&t.callback(e)})}},{key:"tick",value:function(t){var e=this;if(this._animFrameId=u.default.frame(function(t){e.tick(t)}),this.now=u.default.now(),this.delta=this.now-this.then,this.delta>this.interval){this.stats&&this.stats.update(),this.then=this.now-this.delta%this.interval,this._frameDeadline=t+this.interval;for(var n in this.callbacks)this.callbacks[n](t);this._channel.port2.postMessage(null)}}},{key:"stop",value:function(){u.default.cancelFrame(this._animFrameId),this._animFrameId=null}},{key:"destroy",value:function(){this.stop(),this.clearAllCallbacks();for(var t=this.scheduleTaskQueue.first;t;){var e=t;t=t.next,e.remove()}this.scheduleTaskQueue=null,this._destroyed=!0}},{key:"isUpdating",get:function(){return!!this._animFrameId}}]),t}();e.default=h},function(t,e,n){"use strict";var i=function(){var t=0,e=0,n=Date.now(),i=n,o=0,r=1e3,a=0,s=0,l=1e3,u=0,c=0,f=0,d=document.createElement("div");d.id="stats",d.addEventListener("mousedown",function(t){t.preventDefault(),f+=1,x(f%2)},!1),d.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",d.appendChild(h);var v=document.createElement("div");v.id="fpsText",v.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="FPS",h.appendChild(v);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(p);74>p.children.length;){var m=document.createElement("span");m.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(m)}var _=document.createElement("div");_.id="ms",_.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",d.appendChild(_);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",_.appendChild(g);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",_.appendChild(y);74>y.children.length;)m=document.createElement("span"),m.style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(m);var x=function(t){switch(f=t){case 0:h.style.display="block",_.style.display="none";break;case 1:h.style.display="none",_.style.display="block"}};return{domElement:d,setMode:x,begin:function(){n=Date.now()},end:function(){var f=Date.now();o=f-n,r=Math.min(r,o),a=Math.max(a,o),g.textContent=o+" MS ("+r+"-"+a+")";var d=Math.min(30,30-o/200*30);return y.appendChild(y.firstChild).style.height=d+"px",c+=1,f>i+1e3&&(s=Math.round(1e3*c/(f-i)),l=Math.min(l,s),u=Math.max(u,s),e+=s,v.textContent=s+" FPS ("+l+"-"+u+") Avg: "+parseInt(e/t),d=Math.min(30,30-s/100*30),p.appendChild(p.firstChild).style.height=d+"px",i=f,c=0),t+=1,f},update:function(){n=this.end()}}};t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(125),p=n(40),m=i(p),_=n(28),g=n(505),y=n(10),x=y.uniqueId,b=3,S=20,w=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this)),i=t.id,o=void 0===i?x():i,a=t.zIndex,l=void 0===a?0:a,u=t.minZoom,c=void 0===u?b:u,d=t.maxZoom,h=void 0===d?S:d;return n.id=o,n.level=v.LAYER_LEVEL.OVERLAY_AA,n.zIndex=0,n.rank=(0,v.getRank)(n.level,n.zIndex),n.setZIndex(l),n.setMinZoom(c),n.setMaxZoom(h),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"getId",value:function(){return this.id}},{key:"addTo",value:function(t){return t.addVisualPlugin(this),this.map=t,this.gl=t.renderEngine.gl,this.transform=t.transform,this}},{key:"remove",value:function(){return this.map&&this.map.removeVisualPlugin(this.id),this.map=null,this.gl=null,this.transform=null,this}},{key:"redraw",value:function(){return this.map&&this.map._render(),this}},{key:"draw",value:function(){}},{key:"setZIndex",value:function(t){return m.default.isNumber(t)?t<0?(console.error("zIndex希望设置为非负数,实际值为: "+t),this):(this.zIndex=t,this.rank=(0,v.getRank)(this.level,this.zIndex),this):(new _.BaseTypeError("zIndex","Number",t).error(),this)}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setMinZoom",value:function(t){return m.default.isNumber(t)?t<0?(console.error("minZoom希望设置为非负数,实际值为: "+t),this):(this.minZoom=t,this):(new _.BaseTypeError("minZoom","Number",t).error(),this)}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"setMaxZoom",value:function(t){return m.default.isNumber(t)?t<0?(console.error("maxZoom希望设置为非负数,实际值为: "+t),this):(this.maxZoom=t,this):(new _.BaseTypeError("maxZoom","Number",t).error(),this)}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"setLevel",value:function(t){this.level=t,this.rank=(0,v.getRank)(t,this.zIndex)}}]),e}(g);t.exports=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(18),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(648),f=i(c),d=n(57),h=n(25),v=i(h),p=n(10),m=i(p),_=function(){function t(e){(0,s.default)(this,t),this.painter=e,this.renderLayers=null,this._destroyed=!1,this._needReplace=!0,this.gradualPlacementArr=[]}return(0,u.default)(t,[{key:"updatePlace",value:function(){this._needReplace=!0}},{key:"resize",value:function(t,e){this._destroyed||(this.width=t,this.height=e,this.painter.resize(t,e))}},{key:"update",value:function(t,e){if(!this._destroyed){var n=t.getDrawLayers().filter(function(t){return!t.isHidden(e.zoom)}),i=t.getPlugins(),o=[],a={};n.forEach(function(n){var i=n.filter,s=n.sourceId,l=t.getSource(s);if(l){var u=l.getDrawItems();if(0!==(0,r.default)(u).length){var c={};c.tileSize=n.tileSize,c.type=n.type,c.rank=n.rank,c.id=n.id,c.opacity=n.opacity,"LABEL"!==n.type&&"MARKER"!==n.type||(c._enableCollision=n._enableCollision),"MASK"===n.type&&(c.isMaskReverse=n.isMaskReverse);var f=[];m.default.forIn(u,function(t,o){var r=o.getQueryData(i),s=o.coord;if(r){var l={},u=void 0,c=void 0;if(s.isVirtualCoord())u=0,c=0;else{if((s.z-e.tileZoom>=4||e.tileZoom-s.z>=5)&&e.tileZoom<=v.default.maxDataZoom&&!(n.maxDataZoom<v.default.maxDataZoom&&s.z<=n.maxDataZoom-1))return;var d=e.projectionTopLeft(s.z);u=s.wrapXAroundCenter(e.center)*n.tileSize-d.x,c=s.y*n.tileSize-d.y}if(l.offset={x:u,y:c},l.id=s.id,l.coordX=s.x,l.coordY=s.y,l.coordZ=s.z,l.size=o.tileSize,l.features=l.id in r?r[l.id]:r,l.scale=s.isVirtualCoord()?1:e.calCoordsScale(s.z),!a[l.id]){var h={};h.offset=l.offset,h.scale=l.scale,h.tileSize=n.tileSize,a[l.id]=h}f.push(l)}}),c.tiles=f,o.push(c)}}}),i.forEach(function(t){o.push({type:d.RENDER_LAYER_TYPE.visualPlugin,visualPlugin:t,rank:t.rank})}),o.sort(function(t,e){return t.rank-e.rank}),this.renderLayers=o;var s=!1;if(this.painter.preRender(e,a),(!this.gradualPlacement||this.gradualPlacement.isDone()&&!this.gradualPlacement.isFading()&&this._needReplace)&&(this.gradualPlacement=new f.default(this.painter.textCache,this.renderLayers),this._needReplace=!1,this.gradualPlacementArr.push(this.gradualPlacement),this.gradualPlacementArr.length>3)){var l=this.gradualPlacementArr[0];if(l.getInUse&&l.getInUse())return;this.gradualPlacementArr.shift(),l.destroy(),l=null}return this.gradualPlacement.isDone()||(this.painter.painters.symbol&&this.painter.painters.symbol.preDraw({iconsLoader:t.iconsLoader}),this.gradualPlacement.placement.updateVersion(),this.gradualPlacement.continuePlacement(this.renderLayers,this.painter.tilesMatrix,this.painter.camera,e),this.gradualPlacement.isDone()?this.placement=this.gradualPlacement.batchUpdate(this.placement):(this.lastGradualPlacement=this.gradualPlacement,s=!0,this.placement||(this.placement=this.gradualPlacement.placement))),this.gradualPlacement&&this.gradualPlacement.placement!==this.placement&&this.placement.batchUpdateShow(),this.painter.render(this.renderLayers,e,this.placement,{fadeChange:this.placement.getFadeChange(),iconsLoader:t.iconsLoader}),s}}},{key:"resetGradualPlacement",value:function(){this.gradualPlacement&&(this.gradualPlacement.destroy(),this.gradualPlacement=null)}},{key:"render",value:function(t,e){if(!this._destroyed)return this.update(t,e)}},{key:"destroy",value:function(){this._destroyed||(this.gradualPlacement&&(this.gradualPlacement.destroy(),this.gradualPlacement=null),this.painter=null,this.renderLayers=null,this._destroyed=!0,this.gradualPlacementArr=[])}},{key:"getPoi",value:function(t){return this.placement?this.placement.getPoi(t):null}}]),t}();t.exports=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=JSON.parse((0,s.default)(t));return _.default.forIn(n,function(t,n){n.x*=e,n.y*=e}),n}function r(t,e){var n=t*Math.PI/180,i=e/2*Math.PI/180;return(Math.cos(n)*Math.tan(n+i)-Math.sin(n))/Math.tan(i)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(115),s=i(a),l=n(15),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(94),p=n(109),m=n(10),_=i(m),g=n(110),y=n(25),x=i(y),b=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.map,i=e.view,o=e.look,r=e.scale,a=e.offset;(0,f.default)(this,t),this.version=0,this.look=o,this.view=i,this.map=n,this.scale=r,this.lookPoint=new v.Vector3(o.slice(0,3)),this.lightPosition=new v.Vector3([0,0,0]);var s=i.right-i.left,l=i.top-i.bottom;this.resolution={width:s,height:l},this.pMatrix=new v.Matrix4,this.vMatrix=new v.Matrix4,this.vInverseMatrix=new v.Matrix4,this.rotateMatrix=new v.Matrix4,this.scaleMatrix=new v.Matrix4,this.matrixStore=new p.Store("matrixStore",1e4),this.fovy=30,this.distance=Math.floor(o[2]=i.top/Math.tan(this.fovy/2*Math.PI/180)),this.far=4*this.distance,this.near=1;var u=a.x,c=void 0===u?0:u,d=a.y,h=void 0===d?0:d;this.pMatrix.setPerspective(this.fovy,s/l,this.near,this.far,2*c/s,-2*h/l),this.offset={x:c,y:h},this.setLookAt(o),this.cache={},this.fogPitch=45}return(0,h.default)(t,[{key:"setView",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])this.updateVersion();else for(var e in t)if(t.hasOwnProperty(e)&&this.view[e]!==t[e]){this.updateVersion();break}this.view=t;var n=t.right-t.left,i=t.top-t.bottom,o=this.fovy,r=this.near,a=this.offset;this.distance=Math.floor(t.top/Math.tan(o/2*Math.PI/180)),this.far=4*this.distance,this.resolution.width=n,this.resolution.height=i,this.pMatrix.setPerspective(o,n/i,r,this.far,2*a.x/n,-2*a.y/i),this._setPVMatrix()}},{key:"setOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};_.default.deepEqual(t,this.offset)||(this.offset=t,this.setView(this.view,!0))}},{key:"setLookAt",value:function(t){for(var e=0,n=t.length;e<n;e++)if(this.look[e]!==this.look[e]){this.updateVersion();break}this.look=t,this._setPVMatrix()}},{key:"setRotate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e%=360,n%=360,t===this.pitch&&e===this.heading&&n===this.roll||this.updateVersion(),(t||0===t)&&(t=Math.min(Math.max(t,0),x.default.maxPitch)),this.heading=e,this.pitch=t,this.roll=n,this._setPVMatrix()}},{key:"setScale",value:function(t){t!==this.scale&&(this.updateVersion(),this.scaleMatrix.setScale(t,t,t),this.scale=t,this._setPVMatrix())}},{key:"canvasCoordsToGLCoords",value:function(t,e){return(0,g.fromScreenToNdc)(t,e,this.resolution)}},{key:"glCoordsToCanvasCoords",value:function(t,e){return(0,g.fromNdcToScreen)(t,e,this.resolution)}},{key:"getScreenCoordsByCustomMatrix",value:function(t,e){var n=(0,g.getScreenCoordsByCustomMatrix)(t,e,this.resolution);return(0,u.default)({},n,{version:this.version})}},{key:"getScreenCoordsFromPixel",value:function(t){var e=new v.Vector4(t.x,t.y,0,1);return this.getScreenCoordsByCustomMatrix(this.pvMatrix,e)}},{key:"getScreenCoordsFromWorld",value:function(t){return this.getScreenCoordsByCustomMatrix(this.pvMatrix,t)}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.cache,n=this.version,i=this.pvMatrix;if(e.bounds&&e.bounds.version===n)return o(e.bounds.value,1/t);var r=Math.min(this.getFogEdge()[1],1),a={centerDelta:{x:0,y:0},leftTop:(0,g.getZPlaneCoordsByCustomMatrix)(i,{x:-1,y:r}),rightTop:(0,g.getZPlaneCoordsByCustomMatrix)(i,{x:1,y:r}),leftBottom:(0,g.getZPlaneCoordsByCustomMatrix)(i,{x:-1,y:-1}),rightBottom:(0,g.getZPlaneCoordsByCustomMatrix)(i,{x:1,y:-1})};return this.cache.bounds={version:this.version,value:a},o(a,1/t)}},{key:"getFogEdge",value:function(){var t=this.fogPitch;if(this.pitch<t-5)return[1,1/0,1,1];if(this.cache.fogEdge&&this.cache.fogEdge.version===this.version)return this.cache.fogEdge.value;var e=this.map.transform._zoom>18?this.map.transform._zoom-17:1,n=this.view.top/this.scale*r(t,this.fovy)*e,i=n*Math.sin(this.heading*Math.PI/180),o=n*Math.cos(this.heading*Math.PI/180),a=this.pvMatrix.multiplyVector4({elements:[i,o,0,1]}).elements,s=a.map(function(t){return t/a[3]});return this.cache.fogEdge={version:this.version,value:s},s}},{key:"getLookPosition",value:function(){return this.vInverseMatrix.multiplyVector3(this.lookPoint)}},{key:"getLightPosition",value:function(t){return this.vInverseMatrix.multiplyVector3(t||this.lightPosition)}},{key:"_setPVMatrix",value:function(){var t=new v.Matrix4,e=new v.Matrix4;e.translate(0,0,-this.distance),e.rotate(-this.pitch,1,0,0),e.rotate(this.roll,0,1,0),e.rotate(this.heading,0,0,1),e.scale(this.scale,this.scale,this.scale),e.translate(0,0,0),this.vMatrix=e,this.vInverseMatrix.set(e).invert(),t.multiply(this.pMatrix).multiply(e),this.pvMatrix=t}},{key:"updateVersion",value:function(){this.version+=1}},{key:"destroy",value:function(){this.version=0,this.look=null,this.view=null,this.map=null,this.scale=null,this.lookPoint=null,this.lightPosition=null,this.resolution=null,this.pMatrix=null,this.vMatrix=null,this.vInverseMatrix=null,this.rotateMatrix=null,this.scaleMatrix=null,this.matrixStore.clear(),this.matrixStore=null,this.fovy=null,this.distance=null,this.far=null,this.near=null,this.cache=null}}]),t}();e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t[0],n=[];return n=e?e.color:[0,0,0],{lighting_uAmbientColor:n}}function r(t){var e=[],n=[];return t.forEach(function(t){e.push.apply(e,(0,l.default)(t.direction)),n.push.apply(n,(0,l.default)(t.color))}),t.length||(e.push(0,0,0),n.push(0,0,0)),{lighting_uDirDirection:e,lighting_uDirColor:n,lighting_uDirCount:t.length}}function a(t,e){var n=[],i=[],o=[];return t.forEach(function(t){var r=e.latLngToCenterLocalPixel(t.position),a=1/(0,S.getSpatialResolution)(e.zoom),s=a*t.height;n.push(r.x,r.y,s),i.push.apply(i,(0,l.default)(t.attenuation)),o.push.apply(o,(0,l.default)(t.color))}),t.length||(n.push(0,0,0),i.push(0,0,0),o.push(0,0,0)),{lighting_uPointPosition:n,lighting_uPointAtt:i,lighting_uPointColor:o,lighting_uPointCount:t.length}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),l=i(s),u=n(15),c=i(u),f=n(172),d=i(f),h=n(0),v=i(h),p=n(1),m=i(p),_=n(744),g=i(_),y=n(336),x=n(506),b=i(x),S=n(110),w=n(94),E=n(10),T=i(E),A=function(){function t(){var e;(0,v.default)(this,t),this.lights=(e={},(0,d.default)(e,y.LIGHT_TYPE.AMBIENT,[]),(0,d.default)(e,y.LIGHT_TYPE.DIRECTION,[]),(0,d.default)(e,y.LIGHT_TYPE.POINT,[]),e),this.setConfig(),this._uniforms={},this._cameraVer=null}return(0,m.default)(t,[{key:"setConfig",value:function(t){var e=this,n=(0,c.default)({},g.default,t),i=n.active,o=n.toneMapping,r=n.intensity,a=n.lightList,s=n.shadowOptions;return i?this.enable():this.disable(),this._toneMapping=o,this.setIntensity(r),this.clearLights(),a&&a.forEach(function(t){e.addLight(new b.default(t))}),this.setShadowOptions(s),this}},{key:"addLight",value:function(t){var e=t.type;return this.lights[e]&&this.lights[e].length<4?this.lights[e].push(t):console.warn(e+"类型光源暂不支持，或已达上限，不可添加。"),this}},{key:"removeLight",value:function(t){var e=this.lights[t.type],n=e.findIndex(function(e){return e.id===t.id});return n>=0&&e.splice(n,1),this}},{key:"clearLights",value:function(){var t=this;return T.default.forIn(this.lights,function(e){t.lights[e]=[]}),this}},{key:"getLights",value:function(){var t=[];return T.default.forIn(this.lights,function(e,n){t.push.apply(t,(0,l.default)(n))}),t}},{key:"setIntensity",value:function(t){return this.intensity=(0,c.default)({ambient:0,diffuse:0,specular:0},this.intensity,t),this}},{key:"getIntensity",value:function(){return this.intensity}},{key:"enable",value:function(){return this.active=!0,this}},{key:"disable",value:function(){return this.active=!1,this}},{key:"isActive",value:function(){return this.active}},{key:"setShadowOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lightId,n=t.intensity,i=void 0===n?1:n,o=t.enabled,r=void 0!==o&&o;return this._shadowEnabled=r,this._shadowLightId=e,this._shadowIntensity=Math.max(0,Math.min(i,1)),this}},{key:"getShadowOptions",value:function(){return{enabled:this._shadowEnabled,lightId:this._shadowLightId,intensity:this._shadowIntensity}}},{key:"getShadowLight",value:function(){return this._shadowEnabled&&this.lights[y.LIGHT_TYPE.DIRECTION][this._getShadowLightIndex()]}},{key:"_getShadowLightIndex",value:function(){var t=this;return this.lights[y.LIGHT_TYPE.DIRECTION].findIndex(function(e){return e.id===t._shadowLightId})}},{key:"_updateViewPos",value:function(t){t?t.version!==this._cameraVer&&(this._uniforms.lighting_uViewPos=t.getLookPosition().elements,this._cameraVer=t.version):this._uniforms.lighting_uViewPos=[0,0,1e3]}},{key:"getLightPVMatrix",value:function(t){var e;if(!this.getShadowLight())return new w.Matrix4;var n=new w.Vector3(this.getShadowLight().direction),i=new w.Vector3(n.elements).scale(3e3,3e3,3e3),o=new w.Vector3(0,0,1);n.equals(o)&&(o=new w.Vector3(0,1,0));var r=(e=new w.Matrix4).setLookAt.apply(e,(0,l.default)(i.elements).concat([0,0,0],(0,l.default)(o.elements)));return(new w.Matrix4).setOrtho(t.left,t.right,t.bottom,t.top,1,6e3).scale(.75,.75,1).multiply(r)}},{key:"update",value:function(t){var e=t.camera,n=t.transform,i=t.view,s=this.isActive(),l=this.intensity,u=this._toneMapping;this._updateViewPos(e);var f=o(this.lights[y.LIGHT_TYPE.AMBIENT]),d=r(this.lights[y.LIGHT_TYPE.DIRECTION]),h=a(this.lights[y.LIGHT_TYPE.POINT],n);(0,c.default)(this._uniforms,{lighting_uBase:[s,l.ambient,l.diffuse,l.specular],lighting_uToneMapping:[u.enable,u.exposure],lighting_uShadow:[this._shadowEnabled&&this._shadowIntensity,this._getShadowLightIndex()],lighting_uShadowLightPVMatrix:this.getLightPVMatrix(i).elements},f,d,h)}},{key:"uniforms",get:function(){return this._uniforms}}]),t}();e.default=A},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(336);e.default={active:!0,toneMapping:{enable:!1,exposure:1},intensity:{ambient:1,diffuse:1,specular:1},lightList:[{type:i.LIGHT_TYPE.AMBIENT,color:"#FFF",intensity:.8},{id:"$main",type:i.LIGHT_TYPE.DIRECTION,color:"#FFF",intensity:.2,direction:[-1,2,-1.41]},{type:i.LIGHT_TYPE.DIRECTION,color:"#FFF",intensity:.2,direction:[1,-2,-1.41]}],shadowOptions:{enabled:!1}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(18),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(34),_=i(m),g=n(4),y=i(g),x=n(338),b=i(x),S=n(579),w=i(S),E=n(147),T=i(E),A=n(109),P=n(146),I=i(P),k=n(10),L=i(k),M=n(1039),C=i(M),R=!1,N=new Image;N.onload=function(){R=!0},N.src=C.default;var B=function(t){function e(t){(0,f.default)(this,e);var n=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t));return n.shaderSource=w.default,n._store=new A.Store("buffer",100,16,function(t){t.positions&&t.positions.delete(),t.indices&&t.indices.delete(),t.instanceBuffers&&(0,s.default)(t.instanceBuffers).forEach(function(e){var n=t.instanceBuffers[e];n.data=null,n.buffer.delete()})}),n.shaderParams={attributes:["a_Positions","a_InstanceCoords","a_InstanceColor","a_InstanceWidth"],uniforms:["u_matrix","u_mapScale","u_SamplerArrow","u_resolution"]},n.positions=new Int16Array([-1,1,1,1,-1,-1,1,-1]),n.indices=new Uint8Array([0,2,1,1,2,3]),n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"draw",value:function(t,e,n){var i=this.gl,o=n.tileId||0;i.useProgram(i.program),i.uniform1f(this.u_mapScale,e.scale),i.uniform1i(this.u_SamplerArrow,0),i.uniform2f(this.u_resolution,e.width,e.height),i.uniformMatrix4fv(this.u_matrix,!1,e.matrix),this.drawTileInstance(o,t.instance)}},{key:"drawTileInstance",value:function(t,e){if(!(e.count<1)){var n=this.gl,i=this._store;i.exist(t)||i.set(t,this.createBuffer(t,e));var o=i.get(t);o.positions.bind(),o.positions.pointToAttrib({location:this.a_Positions,size:2,type:n.SHORT}),o.indices.bind(),L.default.forIn(o.instanceBuffers,function(t,e){var i=e.buffer,o=e.location,r=e.size,a=e.type;i.bind(),i.pointToAttrib({location:o,size:r,type:a}),n.vertexAttribDivisor(o,1)}),n.drawElementsInstanced(n.TRIANGLES,this.indices.length,n.UNSIGNED_BYTE,0,e.count),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),n.vertexAttribDivisor(this.a_InstanceCoords,0),n.vertexAttribDivisor(this.a_InstanceColor,0),n.vertexAttribDivisor(this.a_InstanceWidth,0)}}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.positions&&(i.positions=new I.default(n,{data:this.positions})),this.indices&&(i.indices=new I.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:this.indices})),e){var o={instanceCoordsTypeArray:{location:this.a_InstanceCoords,size:4,type:n.FLOAT},instanceColorTypeArray:{location:this.a_InstanceColor,size:4,type:n.FLOAT},instanceWidthTypeArray:{location:this.a_InstanceWidth,size:1,type:n.FLOAT}};L.default.forIn(o,function(t,o){i.instanceBuffers[t]=(0,r.default)({data:e[t],buffer:new I.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},o)})}return i}},{key:"afterDraw",value:function(){this._arrowTex&&this._arrowTex.unbind()}},{key:"loadTexture",value:function(){R?(this._arrowTex||(this._arrowTex=new T.default(this.gl,{pixels:N}),this._arrowTex.upload({flipY:!0})),this._arrowTex.bind()):(this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null))}},{key:"clear",value:function(){this._store.clear(),this._arrowTexture&&(this._arrowTexture.destroy(),this._arrowTexture=null)}},{key:"destroy",value:function(){this.positions=null,this.indices=null,this._store.clear(),this._store=null,this._arrowTex&&(this._arrowTex.delete(),this._arrowTex=null),(0,_.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"destroy",this).call(this)}}]),e}(b.default);e.default=B},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(159),p=i(v),m=n(580),_=i(m),g=n(109),y=n(222),x=n(25),b=i(x),S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new g.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=_.default,n.shaderParams={attributes:["a_Position","a_Color","a_Normal","a_LineInfo","a_LineDistance","a_SideInfo"],uniforms:["u_matrix","u_modelMatrix","u_SizeScale"]},n.enableLight=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i,o){var r=this.gl,a=this.store,s=t.vertices,l=t.indeices,u="base_"+o+"_"+t.id,c=e.matrix,f=e.modelMatrix,d=void 0;a.exist(u)?(d=a.get(u),this.bindVertexBuffer(s,d.vertices),this.bindElementBuffer(l,d.indices)):d=a.set(u,{vertices:this.bindVertexBuffer(s),indices:this.bindElementBuffer(l),length:l.length}),r.uniformMatrix4fv(this.u_matrix,!1,c),r.uniformMatrix4fv(this.u_modelMatrix,!1,f);var h=~~(100*(i-~~i));r.uniform1f(this.u_SizeScale,1e3*h+Math.min(Math.floor(100*(n||1)),255));var v=b.default.batchRender?r.UNSIGNED_INT:r.UNSIGNED_SHORT;r.drawElements(r.TRIANGLES,d.length,v,0),this.unbindVertexBuffer(d.vertices,s.attributes)}}]),e}(p.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(159),p=i(v),m=n(582),_=i(m),g=n(109),y=n(222),x=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new g.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=_.default,n.shaderParams={attributes:["a_Position","a_Color","a_Info","a_Transform","a_Height"],uniforms:["u_matrix","u_modelMatrix","u_use3D","u_maskSampler","u_maskScale"]},n.enableLight=!0,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.gl,o=this.store,r=t.vertices,a=t.indeices,s="build_"+t.id,l=e.matrix,u=e.modelMatrix,c=e.maskScale||1,f=void 0;o.exist(s)?(f=o.get(s),this.bindVertexBuffer(r,f.vertices),this.bindElementBuffer(a,f.indices)):f=o.set(s,{vertices:this.bindVertexBuffer(r),indices:this.bindElementBuffer(a),length:a.length}),i.uniformMatrix4fv(this.u_matrix,!1,l),i.uniformMatrix4fv(this.u_modelMatrix,!1,u),i.uniform1i(this.u_maskSampler,0),i.uniform1f(this.u_maskScale,c),i.uniform1f(this.u_use3D,n.use3D?1:0),i.drawElements(i.TRIANGLES,f.length,i.UNSIGNED_SHORT,0),this.unbindVertexBuffer(f.vertices,r.attributes)}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m),g=n(391),y=i(g),x=n(592),b=i(x),S=n(146),w=i(S),E=n(10),T=i(E),A=n(637),P=i(A),I=n(1013),k=new P.default,L=k.parse(I),M={minX:-17.631067276000977,maxX:15.692798614501953,minY:-3.118868112564087,maxY:3.4938244819641113,minZ:.05786377936601639,maxZ:20.096586227416992},C=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=b.default,n.shaderParams={attributes:["aPosition","aNormal","aColor","aInstanceCoord","aInstanceInfo"],uniforms:n.commonUniformList.concat(["uEnableLighting","lighting_uCameraPosition","lighting_lightPositions","uBoxMin","uBoxMax"])},n.enableLight=!0,n.model=L,n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"createModelBuffer",value:function(){var t=this.gl,e=this.model.attributes;this.modelBuffers={positions:{buffer:new w.default(t,{data:e.POSITION.value}),location:this.aPosition,size:e.POSITION.size,type:t.FLOAT},normals:{buffer:new w.default(t,{data:e.NORMAL.value}),location:this.aNormal,size:e.NORMAL.size,type:t.BYTE},colors:{buffer:new w.default(t,{data:e.COLOR_0.value}),location:this.aColor,size:e.COLOR_0.size,type:t.UNSIGNED_BYTE}}}},{key:"createBuffer",value:function(t){var e=this.gl,n={},i={instanceCoordsTypeArray:{location:this.aInstanceCoord,size:2,type:e.FLOAT},instanceInfosTypeArray:{location:this.aInstanceInfo,size:4,type:e.SHORT}};return T.default.forIn(i,function(i,o){n[i]=(0,r.default)({data:t[i],buffer:new w.default(e,{target:e.ARRAY_BUFFER,data:t[i],usage:e.DYNAMIC_DRAW})},o)}),n}},{key:"setBuffers",value:function(t){var n=this;this.modelBuffers||this.createModelBuffer();var i=this.modelBuffers;T.default.forIn(i,function(t,e){var n=e.buffer,i=e.location,o=e.size,r=e.type;n.bind(),"index"!==t&&n.pointToAttrib({location:i,size:o,type:r})});var o=(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setBuffers",this).call(this,t);return T.default.forIn(o,function(t,e){var i=e.location;n.gl.vertexAttribDivisor(i,1)}),o}},{key:"setUniforms",value:function(t,n,i,o){(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"setUniforms",this).call(this,t,n,i,o);var r=this.gl;r.uniform3f(this.uBoxMin,M.minX,M.minY,M.minZ),r.uniform3f(this.uBoxMax,M.maxX,M.maxY,M.maxZ)}},{key:"draw",value:function(t,e,n,i){if(t&&n){var o=this.gl,r=this.model;o.useProgram(o.program),this.setUniforms(t,e,n,i);var a=this.setBuffers(t);o.drawArraysInstanced(r.mode,0,r.vertexCount,t.count),o.bindBuffer(o.ARRAY_BUFFER,null),T.default.forIn(a,function(t,e){var n=e.location;o.vertexAttribDivisor(n,0)})}}},{key:"destroy",value:function(){this.model=null,(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(391),_=i(m),g=n(590),y=i(g),x=n(146),b=i(x),S=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderSource=y.default,n.shaderParams={attributes:["aPosition"],uniforms:n.commonUniformList.concat(["uColor"])},n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"createBuffer",value:function(t){var e=this.gl,n=t.position,i=t.index;return{position:{location:this.aPosition,size:3,type:e.FLOAT,data:n,buffer:new b.default(e,{data:n,usage:e.DYNAMIC_DRAW})},index:{data:i,buffer:new b.default(e,{target:e.ELEMENT_ARRAY_BUFFER,data:i}),type:2===i.BYTES_PER_ELEMENT?e.UNSIGNED_SHORT:e.UNSIGNED_INT,length:i.byteLength/i.BYTES_PER_ELEMENT}}}},{key:"setUniforms",value:function(t,n,i,o){(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"setUniforms",this).call(this,t,n,i,o);var a=this.gl,s=o.color||[1,1,1,1];a.uniform4f(this.uColor,s[0],s[1],s[2],s[3])}}]),e}(_.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(509),p=i(v),m=n(600),_=i(m),g=n(118),y=n(110),x=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderParams.uniforms=n.shaderParams.uniforms.concat(["uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uRelativeCenter"]),n.shaderSource=_.default,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;o.useProgram(o.program),this.setCommonUniforms(t,i),this.setUniforms(n,t,e,i),this.drawTileInstance(n.id,n,i.updateSubData,!0)}},{key:"setUniforms",value:function(t,e,n,i){var o=this.gl,r=e.center,a=e.zoom,s=1/(0,y.getSpatialResolution)(a),l=i.distanceScales||e.getDistanceScales(),u=(0,g.splitLatLngNumber)(r.lat),c=(0,g.splitLatLngNumber)(r.lng),f={latPart:(0,g.splitLatLngNumber)(t.center.lat),lngPart:(0,g.splitLatLngNumber)(t.center.lng)};o.uniformMatrix4fv(this.u_matrix,!1,n.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,s,s,s),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,e.width,e.height),o.uniform4f(this.uRelativeCenter,f.lngPart.high,f.latPart.high,f.lngPart.low,f.latPart.low),o.uniform2f(this.u_InstanceTileTextureOffset,0,0)}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(391),_=i(m),g=n(591),y=i(g),x=n(146),b=i(x),S=n(10),w=i(S),E=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=y.default,n.shaderParams={attributes:["aPosition","aColor","aNormal"],uniforms:n.commonUniformList},n.enableLight=!0,n}return(0,p.default)(e,t),(0,f.default)(e,[{key:"createBuffer",value:function(t){var e=this.gl,n=t.index,i={},o={position:{location:this.aPosition,size:3,type:e.FLOAT},color:{location:this.aColor,size:3,type:e.UNSIGNED_BYTE},normal:{location:this.aNormal,size:3,type:e.FLOAT},index:{type:2===n.BYTES_PER_ELEMENT?e.UNSIGNED_SHORT:e.UNSIGNED_INT,length:n.byteLength/n.BYTES_PER_ELEMENT}};return w.default.forIn(o,function(n,o){i[n]=(0,r.default)({data:t[n],buffer:new b.default(e,{target:"index"===n?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,data:t[n],usage:e.DYNAMIC_DRAW})},o)}),i}}]),e}(_.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m),g=n(508),y=i(g),x=n(596),b=i(x),S=n(26),w=i(S),E=1/16/w.default.devicePixelRatio,T=function(t){function e(t){(0,u.default)(this,e),t.attribList=["instanceColors","instanceStrokeColors","instanceShow","instanceType"],t.uniformList=["u_gamma","u_buffer"];var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=b.default,n.symbolManager=t.glyphManager,n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"_onDraw",value:function(){var t=this.gl;t.uniform1f(this.u_sizeMinPixels,10),t.uniform1f(this.u_gamma,E),t.uniform1f(this.u_buffer,.71)}},{key:"_onDrawInstanceTile",value:function(){this.gl.vertexAttribDivisor(this.instanceColors,0),this.gl.vertexAttribDivisor(this.instanceStrokeColors,0),this.gl.vertexAttribDivisor(this.instanceShow,0),this.gl.vertexAttribDivisor(this.instanceType,0)}},{key:"getInstanceConfig",value:function(){var t=this.gl;return(0,r.default)((0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"getInstanceConfig",this).call(this),{instanceColorList:{location:this.instanceColors,size:4,type:t.UNSIGNED_BYTE},instanceStrokeColorList:{location:this.instanceStrokeColors,size:4,type:t.UNSIGNED_BYTE},instanceShowList:{location:this.instanceShow,size:1,type:t.UNSIGNED_BYTE},instanceTypeList:{location:this.instanceType,size:1,type:t.UNSIGNED_BYTE}})}}]),e}(y.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m),g=n(508),y=i(g),x=n(597),b=i(x),S=n(26),w=i(S),E=1/16/w.default.devicePixelRatio,T=function(t){function e(t){(0,u.default)(this,e),t.attribList=["instanceColors","instanceStrokeColors","instanceStrokeWidth","instanceShow","instanceType"],t.uniformList=["u_gamma","u_buffer","u_sdfRadius"];var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=b.default,n.symbolManager=t.markerManager,n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"_onDraw",value:function(){var t=this.gl;t.uniform1f(this.u_sizeMinPixels,10),t.uniform1f(this.u_gamma,E),t.uniform1f(this.u_buffer,.71),t.uniform1f(this.u_sdfRadius,this.symbolManager.setting.radius)}},{key:"_onDrawInstanceTile",value:function(){this.gl.vertexAttribDivisor(this.instanceColors,0),this.gl.vertexAttribDivisor(this.instanceStrokeColors,0),this.gl.vertexAttribDivisor(this.instanceStrokeWidth,0),this.gl.vertexAttribDivisor(this.instanceShow,0),this.gl.vertexAttribDivisor(this.instanceType,0)}},{key:"getInstanceConfig",value:function(){var t=this.gl;return(0,r.default)((0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"getInstanceConfig",this).call(this),{instanceColorList:{location:this.instanceColors,size:4,type:t.UNSIGNED_BYTE},instanceStrokeColorList:{location:this.instanceStrokeColors,size:4,type:t.UNSIGNED_BYTE},instanceStrokeWidthList:{location:this.instanceStrokeWidth,size:1,type:t.UNSIGNED_SHORT},instanceShowList:{location:this.instanceShow,size:1,type:t.UNSIGNED_BYTE},instanceTypeList:{location:this.instanceType,size:1,type:t.UNSIGNED_BYTE}})}}]),e}(y.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(23),s=i(a),l=n(3),u=i(l),c=n(0),f=i(c),d=n(1),h=i(d),v=n(5),p=i(v),m=n(4),_=i(m),g=n(159),y=i(g),x=n(595),b=i(x),S=n(109),w=n(118),E=n(146),T=i(E),A=n(222),P=n(10),I=i(P),k=function(t){function e(t){(0,f.default)(this,e);var n=(0,p.default)(this,(e.__proto__||(0,u.default)(e)).call(this,t));return n.store=new S.Store("buffer",128,16,A.deleteInstanceCacllback),n.shaderSource=b.default,n.shaderParams={attributes:["positions","positions64xyLow"],uniforms:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uColor"]},n}return(0,_.default)(e,t),(0,h.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e){var r=t.center,a=t.zoom,l=t.getDistanceRatio(),u=i.distanceScales,c=i.color,f=(0,w.splitLatLngNumber)(r.lat),d=(0,w.splitLatLngNumber)(r.lng),h=[d.high,f.high,d.low,f.low];o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f.apply(o,[this.uCenter].concat(h)),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,l,l,l),o.uniform3f.apply(o,[this.uProject_uCommonUnitsPerWorldUnit].concat((0,s.default)(u.pixelsPerDegree))),o.uniform3f.apply(o,[this.uProject_uCommonUnitsPerWorldUnit2].concat((0,s.default)(u.pixelsPerDegree2))),o.uniform2f(this.uResolution,t.width,t.height),o.uniform4f(this.uColor,c[0],c[1],c[2],c[3]),this.drawTile(n.uid,n)}}},{key:"drawTile",value:function(t,e){var n=this.gl,i=this.store,o=!1;if(i){i.exist(t)?this._hasChangedBuffer(t,e)&&(o=!0):i.set(t,this.createBuffer(t,e));var r=i.get(t);I.default.forIn(r,function(t,i){var r=i.buffer,a=i.location,s=i.size,l=i.type;r.bind(),o&&(r.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),"indices"!==t&&r.pointToAttrib({location:a,size:s,type:l})}),n.drawElements(n.TRIANGLES,r.indices.data.length,n.UNSIGNED_INT,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},o={positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},indices:{}};return I.default.forIn(o,function(t,o){i[t]=(0,r.default)({data:e[t],buffer:new T.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},o)}),i}}}]),e}(y.default);e.default=k},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(26),p=i(v),m=n(780),_=n(337),g=i(_),y=n(585),x=i(y),b=12,S=15,w=39,E=function(t){function e(t){(0,s.default)(this,e),t.uniformList=["uResolution","uSampler","uEnabled"];var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t)),i=(0,m.getGraphicHardwareInfo)(n.gl),o=p.default.devicePixelRatio>=2?S:i?/(\bHD\b)|(\bUHD\b)/.test(i.renderer)?b:w:b;return n.shaderSource=(0,x.default)(o),n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"setUniforms",value:function(t){var e=t.resolution,n=t.texture,i=t.enabled,o=this.gl;o.uniform2f(this.uResolution,e[0],e[1]),o.uniform1f(this.uEnabled,i),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,n),o.uniform1i(this.uSampler,0)}}]),e}(g.default);e.default=E},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m),g=n(337),y=i(g),x=n(584),b=i(x),S=function(t){function e(t){(0,u.default)(this,e),t.uniformList=["uRange","uFogEdge","uSampler","uDepthSampler","uSkySampler","uSkyInfo","uViewInfo","uSkyBrightness","uFogColor","uSkyColor"];var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderSource=b.default,n.brightness=1,n.colors={},n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"preDraw",value:function(){(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"preDraw",this).call(this)}},{key:"setFogColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[.93,.93,.93,1];this.colors.fog=t}},{key:"setSkyColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[.8,.8784,1,1];this.colors.sky=t}},{key:"setBrightness",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.brightness=t}},{key:"setUniforms",value:function(t){var e=t.rangeList,n=t.fogEdge,i=t.texture,o=t.depth,a=t.skyTex,s=t.skyInfo,l=t.viewInfo,u=this.gl;u.uniform4fv(this.uFogColor,this.colors.fog),u.uniform4fv(this.uSkyColor,this.colors.sky),u.uniform2f(this.uRange,e[0],e[1]),u.uniform3f(this.uFogEdge,n[0],n[1],n[2]),u.uniform4f.apply(u,[this.uSkyInfo].concat((0,r.default)(s))),u.uniform4f.apply(u,[this.uViewInfo].concat((0,r.default)(l))),u.uniform1f(this.uSkyBrightness,this.brightness),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,i),u.uniform1i(this.uSampler,0),u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,o),u.uniform1i(this.uDepthSampler,1),a?(a.bind(u,{textureIndex:2}),u.uniform1i(this.uSkySampler,2)):(u.activeTexture(u.TEXTURE2),u.bindTexture(u.TEXTURE_2D,null))}}]),e}(y.default);e.default=S},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(337),p=i(v),m=n(587),_=i(m),g=function(t){function e(t){(0,s.default)(this,e),t.uniformList=["uSampler","uHorizontal","uResolution"];var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderSource=_.default,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"setUniforms",value:function(t){var e=t.texture,n=t.horizontal,i=t.resolution,o=this.gl;e.bind(),o.uniform1i(this.uSampler,0),o.uniform1i(this.uHorizontal,n),o.uniform2f(this.uResolution,i[0],i[1])}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(337),p=i(v),m=n(588),_=i(m),g=function(t){function e(t){(0,s.default)(this,e),t.uniformList=["uColor"];var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.shaderSource=_.default,n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"setUniforms",value:function(t){var e=t.color;this.gl.uniform4fv(this.uColor,e)}}]),e}(p.default);e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(159),_=i(m),g=n(463),y=i(g),x=n(109),b=n(118),S=n(146),w=i(S),E=n(222),T=n(10),A=i(T),P=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.store=new x.Store("buffer",128,16,E.deleteInstanceCacllback),n.shaderSource=y.default,n.shaderParams={attributes:["vertexPositions","vertexValid","positions","positions64xyLow","nextPositions","nextPositions64xyLow","elevations","fillColors","lineColors","pickingColors"],uniforms:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","u_isSideVertex","u_extruded","u_isWireframe","u_elevationScale","u_opacity"]},n.enableLight=!0,n}return(0,p.default)(e,t),(0,f.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e){var r=t.center,a=t.zoom,s=t.getDistanceRatio(),l=i.distanceScales,u=i.extruded,c=void 0===u?1:u,f=(0,b.splitLatLngNumber)(r.lat),d=(0,b.splitLatLngNumber)(r.lng);o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f(this.uCenter,d.high,f.high,d.low,f.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,s,s,s),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,t.width,t.height),o.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),o.uniform1f(this.u_isSideVertex,0),o.uniform1f(this.u_extruded,c),o.uniform1f(this.u_isWireframe,!1),o.uniform1f(this.u_elevationScale,1),o.uniform1f(this.u_opacity,1),this.drawTile(n.uid,n)}}},{key:"drawTile",value:function(t,e){var n=this.gl,i=this.store,o=!1;if(i){i.exist(t)?this._hasChangedBuffer(t,e)&&(o=!0):i.set(t,this.createBuffer(t,e));var r=i.get(t);n.disableVertexAttribArray(this.vertexPositions),n.disableVertexAttribArray(this.nextPositions),n.disableVertexAttribArray(this.nextPositions64xyLow),A.default.forIn(r,function(t,i){var r=i.buffer,a=i.location,s=i.size,l=i.type;r.bind(),o&&(r.bufferData(e[t],{usage:n.DYNAMIC_DRAW}),i.data=e[t]),"indices"!==t&&r.pointToAttrib({location:a,size:s,type:l})}),n.drawElements(n.TRIANGLES,r.indices.data.length,n.UNSIGNED_INT,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},o={elevations:{location:this.elevations,size:1,type:n.FLOAT},fillColors:{location:this.fillColors,size:4,type:n.UNSIGNED_BYTE},lineColors:{location:this.lineColors,size:4,type:n.UNSIGNED_BYTE},pickingColors:{location:this.pickingColors,size:3,type:n.UNSIGNED_BYTE},positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},vertexValid:{location:this.vertexValid,size:1,type:n.UNSIGNED_BYTE},indices:{}};return A.default.forIn(o,function(t,o){i[t]=(0,r.default)({data:e[t],buffer:new w.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},o)}),i}}}]),e}(_.default);e.default=P},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(34),h=i(d),v=n(4),p=i(v),m=n(15),_=i(m),g=n(159),y=i(g),x=n(463),b=i(x),S=n(109),w=n(118),E=n(146),T=i(E),A=n(222),P=n(10),I=i(P),k=(0,_.default)({},b.default,{name:"polygon_side"}),L=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new S.Store("buffer",128,16,A.deleteInstanceCacllback),n.shaderSource=k,n.shaderParams={attributes:["vertexPositions","vertexValid","positions","positions64xyLow","nextPositions","nextPositions64xyLow","elevations","fillColors","lineColors","pickingColors"],uniforms:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","picking_usePickingColor","u_isSideVertex","u_extruded","u_isWireframe","u_elevationScale","u_opacity"]},n.enableLight=!0,n._vertPositions=new Float32Array([1,1,0,1,0,0,1,0]),n}return(0,p.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e){var r=t.center,a=t.zoom,s=t.getDistanceRatio(),l=i.distanceScales,u=i.extruded,c=void 0===u?1:u,f=(0,w.splitLatLngNumber)(r.lat),d=(0,w.splitLatLngNumber)(r.lng);o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f(this.uCenter,d.high,f.high,d.low,f.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,s,s,s),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,t.width,t.height),o.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),o.uniform1f(this.u_isSideVertex,1),o.uniform1f(this.u_extruded,c),o.uniform1f(this.u_isWireframe,i.drawBorder?1:0),o.uniform1f(this.u_elevationScale,1),o.uniform1f(this.u_opacity,1),this.drawTile(n.uid,n,i.drawBorder)}}},{key:"drawTile",value:function(t,e,n){var i=this.gl,o=this.store,r=!1;if(o){o.exist(t)?this._hasChangedBuffer(t,e)&&(r=!0):o.set(t,this.createBuffer(t,e));var a=o.get(t);a.vertexPositions.bind(),a.vertexPositions.pointToAttrib({location:this.vertexPositions,size:2,type:i.FLOAT}),I.default.forIn(a,function(t,n){if("vertexPositions"!==t){var o=n.buffer,a=n.location,s=n.size,l=n.type;o.bind(),r&&(o.bufferData(e[t],{usage:i.DYNAMIC_DRAW}),n.data=e[t]),"indices"!==t&&(o.pointToAttrib({location:a,size:s,type:l}),i.vertexAttribDivisor(a,1))}}),i.drawArraysInstanced(n?i.LINE_STRIP:i.TRIANGLE_FAN,0,4,e.elevations.length),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.vertexAttribDivisor(this.positions,0),i.vertexAttribDivisor(this.positions64xyLow,0),i.vertexAttribDivisor(this.elevations,0),i.vertexAttribDivisor(this.fillColors,0),i.vertexAttribDivisor(this.lineColors,0),i.vertexAttribDivisor(this.nextPositions,0),i.vertexAttribDivisor(this.nextPositions64xyLow,0),i.vertexAttribDivisor(this.pickingColors,0),i.vertexAttribDivisor(this.vertexValid,0)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t);for(var i in n)if(n.hasOwnProperty(i)&&e[i]&&"indices"!==i&&n[i].data!==e[i])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl;if(e){var i={},o={elevations:{location:this.elevations,size:1,type:n.FLOAT},fillColors:{location:this.fillColors,size:4,type:n.UNSIGNED_BYTE},lineColors:{location:this.lineColors,size:4,type:n.UNSIGNED_BYTE},pickingColors:{location:this.pickingColors,size:3,type:n.UNSIGNED_BYTE},positions:{location:this.positions,size:3,type:n.FLOAT},positions64xyLow:{location:this.positions64xyLow,size:2,type:n.FLOAT},vertexValid:{location:this.vertexValid,size:1,type:n.UNSIGNED_BYTE},nextPositions:{location:this.nextPositions,size:3,type:n.FLOAT},nextPositions64xyLow:{location:this.nextPositions64xyLow,size:2,type:n.FLOAT},indices:{}};return this._vertPositions&&(i.vertexPositions=new T.default(n,{data:this._vertPositions})),I.default.forIn(o,function(t,o){i[t]=(0,_.default)({data:e[t],buffer:new T.default(n,{target:"indices"===t?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER,data:e[t],usage:n.DYNAMIC_DRAW})},o)}),i}}},{key:"destroy",value:function(){this._vertPositions=null,(0,h.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=L},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(34),p=i(v),m=n(4),_=i(m),g=n(159),y=i(g),x=n(594),b=i(x),S=n(593),w=i(S),E=n(109),T=n(118),A=n(146),P=i(A),I=n(222),k=n(147),L=i(k),M=n(1038),C=i(M),R=n(10),N=i(R),B=n(385),O=i(B),D=n(45),z=i(D),V=!1,F=new Image;F.onload=function(){V=!0},F.src=C.default;var U=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.store=new E.Store("buffer",128,16,I.deleteInstanceCacllback),n.shaderSource=n.gl.isWebGL2?w.default:b.default,n.shaderParams={attributes:["positions","instanceStartPositions","instanceEndPositions","instanceLeftDeltas","instanceRightDeltas","instanceStartEndPositions64xyLow","instanceWidths","instanceColors","instanceLineInfo","instanceArrowInfo","instanceArrowStartPositions","instancePickingColors"],uniforms:["uMatrix","uCenter","uZoom","uPixelsPerMeter","uResolution","uProject_uCommonUnitsPerWorldUnit","uProject_uCommonUnitsPerWorldUnit2","uProject_uDegreePerPixels","picking_usePickingColor","u_isBorder","u_widthScale","u_widthMinPixels","u_widthMaxPixels","u_enableGeodesic","u_miterLimit","u_lineJoin","u_opacity","u_arrowSampler"]},n.modelPositions=new Int16Array([0,1,0,-1,1,1,1,-1]),n.modelIndicies=new Uint8Array([0,1,2,1,3,2]),n}return(0,_.default)(e,t),(0,f.default)(e,[{key:"loadTexture",value:function(){V?(this._arrowTex||(this._arrowTex=new L.default(this.gl,{pixels:F}),this._arrowTex.upload({flipY:!0})),this._arrowTex.bind()):(this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null))}},{key:"afterDraw",value:function(){this._arrowTex&&this._arrowTex.unbind()}},{key:"draw",value:function(t,e,n,i){var o=this.gl;if(e&&0!==n.count){var r=t.center,a=t.zoom,s=t.getDistanceRatio(),l=i.distanceScales,u=(0,T.splitLatLngNumber)(r.lat),c=(0,T.splitLatLngNumber)(r.lng);o.useProgram(o.program),o.uniformMatrix4fv(this.uMatrix,!1,e.elements),o.uniform4f(this.uCenter,c.high,u.high,c.low,u.low),o.uniform1f(this.uZoom,a),o.uniform3f(this.uPixelsPerMeter,s,s,s),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit,l.pixelsPerDegree[0],l.pixelsPerDegree[1],l.pixelsPerDegree[2]),o.uniform2f(this.uProject_uDegreePerPixels,l.degreesPerPixel[0],l.degreesPerPixel[1]),o.uniform3f(this.uProject_uCommonUnitsPerWorldUnit2,l.pixelsPerDegree2[0],l.pixelsPerDegree2[1],l.pixelsPerDegree2[2]),o.uniform2f(this.uResolution,t.width,t.height),o.uniform1f(this.picking_usePickingColor,i.usePicking?1:0),o.uniform1f(this.u_isBorder,i.drawBorder?1:0),o.uniform1f(this.u_widthScale,1/s),o.uniform1f(this.u_widthMinPixels,0),o.uniform1f(this.u_widthMaxPixels,1e3),o.uniform1f(this.u_miterLimit,150),o.uniform1f(this.u_lineJoin,1),o.uniform1f(this.u_opacity,1),o.uniform1i(this.u_arrowSampler,0),o.uniform1f(this.u_enableGeodesic,n.enableGeodesic?1:0);var f=this._calcArrowStratPosition(n,t);n.instanceArrowStartPositionList=f,this.drawTileInstance(n.uid,n,i.drawBorder)}}},{key:"_calcArrowStratPosition",value:function(t,e){var n=t.count,i=t.instanceArrowInfoList;if(0===i[1])return new Float32Array(n);for(var o=t.instanceStartPositionList,r=t.instanceEndPositionList,a=t.instanceStartEndPostions64xyLowList,s=e.getDistanceRatio(),l=i[1],u=l+i[2],c=0,f=new Float32Array(n),d=0;d<n;d++){var h=new z.default(o[3*d+1]+a[4*d+1],o[3*d]+a[4*d]),v=new z.default(r[3*d+1]+a[4*d+3],r[3*d]+a[4*d+2]),p=(0,O.default)(h,v),m=p*s;if(c<l)f[d]=0,c=m%u;else{var _=u-c;m<_?(f[d]=-1,c+=m):(f[d]=_,c=(m-_)%u)}}return f}},{key:"drawTileInstance",value:function(t,e,n){var i=this.gl,o=this.store,r=!1;if(o){o.exist(t)?this._hasChangedBuffer(t,e)&&(r=!0):o.set(t,this.createBuffer(t,e));var a=o.get(t);a.positions.bind(),a.positions.pointToAttrib({location:this.positions,size:2,type:i.SHORT}),a.indices.bind(),N.default.forIn(a.instanceBuffers,function(t,o){if(n){if("instanceColorList"===t||"instanceWidthList"===t)return}else if("instanceBorderColorList"===t||"instanceBorderWidthList"===t)return;var a=o.buffer,s=o.location,l=o.size,u=o.type;a.bind(),r&&(a.bufferData(e[t],{usage:i.DYNAMIC_DRAW}),o.data=e[t]),a.pointToAttrib({location:s,size:l,type:u}),i.vertexAttribDivisor(s,1)}),i.drawElementsInstanced(i.TRIANGLES,this.modelIndicies.length,i.UNSIGNED_BYTE,0,e.count),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),i.vertexAttribDivisor(this.instanceStartPositions,0),i.vertexAttribDivisor(this.instanceEndPositions,0),i.vertexAttribDivisor(this.instanceLeftDeltas,0),i.vertexAttribDivisor(this.instanceRightDeltas,0),i.vertexAttribDivisor(this.instanceStartEndPositions64xyLow,0),i.vertexAttribDivisor(this.instancePickingColors,0),i.vertexAttribDivisor(this.instanceColors,0),i.vertexAttribDivisor(this.instanceWidths,0),i.vertexAttribDivisor(this.instanceLineInfo,0),i.vertexAttribDivisor(this.instanceArrowInfo,0),i.vertexAttribDivisor(this.instanceArrowStartPositions,0)}}},{key:"_hasChangedBuffer",value:function(t,e){var n=this.store.get(t),i=n.instanceBuffers;for(var o in i)if(i.hasOwnProperty(o)&&e[o]&&i[o].data!==e[o])return!0;return!1}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.modelPositions&&(i.positions=new P.default(n,{data:this.modelPositions})),this.modelIndicies&&(i.indices=new P.default(n,{target:n.ELEMENT_ARRAY_BUFFER,data:this.modelIndicies})),e){var o={instanceStartPositionList:{location:this.instanceStartPositions,size:3,type:n.FLOAT},instanceEndPositionList:{location:this.instanceEndPositions,size:3,type:n.FLOAT},instanceLeftDeltaList:{location:this.instanceLeftDeltas,size:3,type:n.FLOAT},instanceRightDeltaList:{location:this.instanceRightDeltas,size:3,type:n.FLOAT},instanceStartEndPostions64xyLowList:{location:this.instanceStartEndPositions64xyLow,size:4,type:n.FLOAT},instanceColorList:{location:this.instanceColors,size:4,type:n.UNSIGNED_BYTE},instanceBorderColorList:{location:this.instanceColors,size:4,type:n.UNSIGNED_BYTE},instanceWidthList:{location:this.instanceWidths,size:1,type:n.FLOAT},instanceBorderWidthList:{location:this.instanceWidths,size:1,type:n.FLOAT},instanceLineInfoList:{location:this.instanceLineInfo,size:4,type:n.UNSIGNED_BYTE},instanceArrowInfoList:{location:this.instanceArrowInfo,size:4,type:n.UNSIGNED_BYTE},instancePickingColorList:{location:this.instancePickingColors,size:3,type:n.UNSIGNED_BYTE},instanceArrowStartPositionList:{location:this.instanceArrowStartPositions,size:1,type:n.FLOAT}};N.default.forIn(o,function(t,o){e[t]&&(i.instanceBuffers[t]=(0,r.default)({data:e[t],buffer:new P.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},o))})}return i}},{key:"destroy",value:function(){this.modelIndicies=null,this.modelPositions=null,this._arrowTex&&(this._arrowTex.delete(),this._arrowTex=null),(0,p.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=U},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(109),_=n(222),g=n(338),y=i(g),x=n(601),b=n(146),S=i(b),w=n(10),E=i(w),T=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));return n.shaderParams={attributes:["instanceLinks","instanceColors","instanceParticles"],uniforms:["uMatrix","uSampler","uTexInfo","uSubTexInfo","uTick"]},n.shaderSource=x.defaultShader,n.store=new m.Store("buffer",128,16,_.deleteInstanceCacllback),n}return(0,p.default)(e,t),(0,f.default)(e,[{key:"draw",value:function(t,e){var n=this.gl,i=this.store,o=e.matrix,r=e.texInfo,a=e.uid,s=e.tick,l=t.texSize,u=t.pixelSpace,c=t.count,f=t.instance;n.uniformMatrix4fv(this.uMatrix,!1,o.elements),n.uniform1i(this.uSampler,0),n.uniform2f(this.uTexInfo,l,u),n.uniform4f(this.uSubTexInfo,r.s,r.t,r.w,r.h),n.uniform1f(this.uTick,s);var d=!1;if(i.exist(a)){var h=i.get(a).instanceBuffers;this.isBufferChanged(h,f)&&(d=!0)}else i.set(a,this.createBuffer(a,f));var v=i.get(a);E.default.forIn(v.instanceBuffers,function(t,e){var i=e.buffer,o=e.location,r=e.size,a=e.type;i.bind(),d&&(i.bufferData(f[t],{usage:n.DYNAMIC_DRAW}),e.data=f[t]),i.pointToAttrib({location:o,size:r,type:a}),n.vertexAttribDivisor(o,1)}),n.drawArraysInstanced(n.POINTS,0,1,c),n.bindBuffer(n.ARRAY_BUFFER,null),n.vertexAttribDivisor(this.instanceLinks,0),n.vertexAttribDivisor(this.instanceColors,0),n.vertexAttribDivisor(this.instanceParticles,0)}},{key:"createBuffer",value:function(t,e){var n=this.gl,i={positions:null,indices:null,instanceBuffers:{}};if(this.modelPositions&&(i.positions=new S.default(n,{data:this.modelPositions})),e){var o=this.getInstanceConfig();E.default.forIn(o,function(t,o){i.instanceBuffers[t]=(0,r.default)({data:e[t],buffer:new S.default(n,{data:e[t],usage:n.DYNAMIC_DRAW})},o)})}return i}},{key:"getInstanceConfig",value:function(){var t=this.gl;return{instanceLinkList:{location:this.instanceLinks,size:2,type:t.UNSIGNED_SHORT},instanceColorList:{location:this.instanceColors,size:4,type:t.UNSIGNED_BYTE},instanceParticleList:{location:this.instanceParticles,size:1,type:t.UNSIGNED_BYTE}}}}]),e}(y.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(159),p=i(v),m=n(581),_=i(m),g=n(109),y=n(222),x=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return n.store=new g.Store("buffer",1024,128,y.deleteBuffersCallback),n.shaderSource=_.default,n.shaderParams={attributes:["a_Position","a_Info"],uniforms:["u_matrix","u_modelMatrix","u_lightPVMatrix","u_maskSampler","u_maskScale"]},n}return(0,h.default)(e,t),(0,u.default)(e,[{key:"draw",value:function(t,e){var n=this.gl,i=this.store,o=t.vertices,r=t.indeices,a="build_"+t.id,s=e.matrix,l=e.modelMatrix,u=e.lightPVMatrix,c=e.maskScale||1,f=void 0;i.exist(a)?(f=i.get(a),this.bindVertexBuffer(o,f.vertices),this.bindElementBuffer(r,f.indices)):f=i.set(a,{vertices:this.bindVertexBuffer(o),indices:this.bindElementBuffer(r),length:r.length}),n.uniformMatrix4fv(this.u_matrix,!1,s),n.uniformMatrix4fv(this.u_modelMatrix,!1,l),n.uniformMatrix4fv(this.u_lightPVMatrix,!1,u),n.uniform1i(this.u_maskSampler,0),n.uniform1f(this.u_maskScale,c),n.drawElements(n.TRIANGLES,f.length,n.UNSIGNED_SHORT,0)}}]),e}(p.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return!!Bt(t)&&t.some(function(t){return(0,lt.isOverlayLayer)(t.type)})}function r(t){return o(t)||t.some(function(t){return(0,lt.isTextureLayer)(t)||(0,lt.isIndoorLayer)(t)||t.type===lt.RENDER_LAYER_TYPE.mask||t.type===lt.RENDER_LAYER_TYPE.highlight})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(18),s=i(a),l=n(27),u=i(l),c=n(23),f=i(c),d=n(0),h=i(d),v=n(1),p=i(v),m=n(781),_=n(746),g=i(_),y=n(759),x=i(y),b=n(760),S=i(b),w=n(761),E=i(w),T=n(509),A=i(T),P=n(752),I=i(P),k=n(753),L=i(k),M=n(747),C=i(M),R=n(745),N=i(R),B=n(507),O=i(B),D=n(749),z=i(D),V=n(751),F=i(V),U=n(750),Y=i(U),j=n(748),G=i(j),Z=n(763),H=i(Z),W=n(754),X=i(W),Q=n(26),q=i(Q),J=n(742),K=i(J),$=n(775),tt=i($),et=n(771),nt=i(et),it=n(770),ot=i(it),rt=n(772),at=i(rt),st=n(490),lt=n(57),ut=n(510),ct=i(ut),ft=n(511),dt=i(ft),ht=n(769),vt=n(765),pt=i(vt),mt=n(125),_t=n(299),gt=n(766),yt=i(gt),xt=n(147),bt=i(xt),St=n(94),wt=n(779),Et=i(wt),Tt=n(743),At=i(Tt),Pt=n(758),It=i(Pt),kt=n(767),Lt=i(kt),Mt=n(762),Ct=i(Mt),Rt=n(40),Nt=i(Rt),Bt=Nt.default.isArray,Ot=n(10),Dt=function(){function t(e,n){(0,h.default)(this,t),n=n||{};var i=n.renderOptions||{},o=i.preserveDrawingBuffer,r=void 0!==o&&o,a=i.disableAntialias,s=void 0!==a&&a,l=i.disableShadow,u=void 0!==l&&l,c=i.skyOptions,f=void 0===c?{}:c,d=i.fogOptions,v=void 0===d?{}:d,p=i.enableBloom,m=void 0!==p&&p,_=i.disableWebGL2,y=void 0!==_&&_;e.style.zIndex=2,this._destroyed=!1,this.styleId=_t.STYLE_ID[n.mapStyleId],this.isDefaultStyle=(0,_t.isDefaultStyle)(n.mapStyleId),this.canvas=e,this.maskScale=.5,this.map=n.map;var b=this.createContext(e,{preserveDrawingBuffer:r,disableWebGL2:y});this.textCache=this.isDefaultStyle?new tt.default(this.gl):null,this.imageCaches={},this.glyphManager=new ot.default(this.gl),this.markerManager=new at.default(this.gl),this.lightManager=new At.default,this.painters={base:new g.default({gl:b}),polygon:new x.default({gl:b}),side:new S.default({gl:b}),polyline:new E.default({gl:b}),arrow:new N.default({gl:b}),building:new C.default({gl:b}),buildingShadow:new H.default({gl:b}),marker:new L.default({gl:b,markerManager:this.markerManager}),symbol:new A.default({gl:b,textCache:this.textCache,glyphManager:this.glyphManager,markerManager:this.markerManager}),image:new O.default({gl:b}),label:new I.default({gl:this.gl,glyphManager:this.glyphManager}),mask:new X.default({gl:b}),indoorMask:new z.default({gl:b}),indoorRegion:new F.default({gl:b}),indoorPoi:new Y.default({gl:b,glyphManager:this.glyphManager,markerManager:this.markerManager}),indoorEscalator:new G.default({gl:b}),highlight:new It.default({gl:b}),trafficFlow:new Ct.default({gl:b})},this.disableAntialias=q.default.isLowMobileDevice()||s,this.disableShadow=q.default.isLowMobileDevice()||u,this.enableBloom=m&&b.isWebGL2,this.createFrameBuffer({skyOptions:f,fogOptions:v}),this.resize(e.clientWidth,e.clientHeight),this.camera=new K.default({map:this.map,view:this.view,look:[0,0,0,0,0,0,0,1,0],scale:n.scale,offset:n.offset}),this.camera.setRotate(n.pitch||0,n.heading||0),this.camera.fogPitch=v.pitch||45,this.map.on("zoom_changed",q.default.throttle(this._checkBgColor.bind(this),50)),this._updateBgColor()}return(0,p.default)(t,[{key:"setDepth",value:function(t,e){this.gl.depthRange(t,e)}},{key:"createContext",value:function(t,e){var n=e.preserveDrawingBuffer,i=void 0!==n&&n,o=e.disableWebGL2,r=void 0!==o&&o,a={alpha:!0,antialias:!1,depth:!0,failIfMajorPerformanceCaveat:!1,powerPreference:(0,Q.isPC)()?"high-performance":"default",preserveDrawingBuffer:i,stencil:!1},s=null;return r||(s=t.getContext("webgl2",a)),s?s.isWebGL2=!0:(s=t.getContext("webgl",a),s.isWebGL2=!1),s.id=Ot.uniqueId(),s.clearColor.apply(s,Ot.rgbaToGLColor((0,st.getBgColor)(this.styleId,this.transform&&this.transform.zoom||10))),s.enable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.gl=s,this.getExtensions(),s}},{key:"getExtensions",value:function(){var t=this.gl,e=new ht.Extensions(t);t.isWebGL2?(e.set("WEBGL_depth_texture",!0),e.set("OES_element_index_uint",!0)):(e.get("WEBGL_depth_texture","depth textures not supported"),e.get("OES_element_index_uint","element_index_uint not supported"),e.get("WEBGL_draw_buffers","draw buffers not supported"),e.extendWebGL1()),e.get("WEBGL_debug_renderer_info","WEBGL_debug_renderer_info not supported"),t.extensions_TMAP=e}},{key:"createFrameBuffer",value:function(t){var e=this.gl,n=this.enableBloom,i={},o=this.gl.extensions_TMAP.get("WEBGL_depth_texture");i.mask=new ct.default(e),this.disableShadow||(i.shadow=new ct.default(e,{attachments:{depth:o?new bt.default(e,{pixels:null,internalformat:"DEPTH_COMPONENT24",format:"DEPTH_COMPONENT",type:"UNSIGNED_INT"}):new dt.default(this.gl)}})),i.main=new ct.default(e,{id:"fb-main",attachments:{color:n?[new bt.default(e,{pixels:null}),new bt.default(e,{pixels:null})]:void 0,depth:o?new bt.default(e,{tex:null,internalformat:"DEPTH24_STENCIL8",format:"DEPTH_STENCIL",type:"UNSIGNED_INT_24_8"}):new dt.default(this.gl)}}),i.pass0=new ct.default(e,{id:"fb-pass-1"}),i.pass1=new ct.default(e,{id:"fb-pass-2"}),this.fxaaPass=new pt.default(e),this.fogPass=new yt.default(e,{skyOptions:t.skyOptions,fogColor:t.fogOptions.color,fogRange:t.fogOptions.range}),n&&(this.bloomBlurPass=new Lt.default(e)),this.frameBuffer=i}},{key:"onMapStyleUpdate",value:function(t){if("config"!==t&&this.styleId===t)return void this._updateBgColor();this.isDefaultStyle!==(0,_t.isDefaultStyle)(t)?(this.isDefaultStyle=(0,_t.isDefaultStyle)(t),this.textCache=this.isDefaultStyle?new tt.default(this.gl):null,this.painters.symbol.destroy(),this.painters.symbol=null,this.painters.symbol=new A.default({gl:this.gl,textCache:this.textCache,glyphManager:this.glyphManager,markerManager:this.markerManager})):this.painters.symbol.clear(),this.painters.base.clearStore(),this.painters.building.clearStore(),this.painters.arrow.clearStore(),this.styleId=t,this._updateBgColor()}},{key:"getDrawContainer",value:function(){return this.canvas}},{key:"resize",value:function(t,e){var n=this;this.view={left:-t/2,right:t/2,bottom:-e/2,top:e/2,near:-1,far:1e3};var i=q.default.devicePixelRatio;this.canvas.width=t*i,this.canvas.height=e*i,this.gl.viewport(0,0,t*i,e*i),this.camera&&this.camera.setView(this.view),Ot.forIn(this.frameBuffer,function(t,e){e&&e.resize(n.canvas.width,n.canvas.height)})}},{key:"setTilesMatrix",value:function(t){var e=this,n={},i={},o=this.view;Ot.forIn(t,function(t,r){var a=(0,m.getModelMatrix)({view:o,offset:r.offset,scale:r.scale});n[t]=e.camera.pvMatrix.clone().multiply(a),i[t]=a}),this.tilesMatrix=n,this.tilesModelMatrix=i}},{key:"catcheTextTexture",value:function(t,e){if(this.painters.symbol&&(this.painters.symbol.preDraw({iconsLoader:e}),t&&0!==t.length)){var n=this.textCache;n.loadTexture();for(var i,o=0;i=t[o];o++)i.features&&""!==i.features&&n.add(i.id,i.features)}}},{key:"clear",value:function(){var t=this.gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}},{key:"preRender",value:function(t,e){t=t||this.transform;var n=t&&t.heading||0,i=t&&t.pitch||0,o=t&&t.roll||0;this.camera.setRotate(i,n,o),this.setTilesMatrix(e)}},{key:"drawMask",value:function(t){var e=this,n=this.maskScale,i=t.filter(function(t){return t.type===lt.RENDER_LAYER_TYPE.indoorRegion}),o=t.filter(function(t){return t.type===lt.RENDER_LAYER_TYPE.mask});this.frameBuffer.mask.bind();var r=this.gl;if(r.clearColor(0,1,0,1),this.clear(),i.length||o.length){var a=this.transform,s=(new St.Matrix4).scale(n,n,n).multiply(this.camera.pvMatrix);this.painters.indoorMask.preDraw(),i.forEach(function(t){var n=t.tiles&&t.tiles[0];if(n){var i=n.features,o=i.center,r=i.bounds,l=i.floorIndex,u={uid:t.id+"_"+l+"_bounds",center:o,position:r[0].top.position,index:r[0].top.index};e.painters.indoorMask.draw(u,a,s,{color:[1,1,1,1]})}}),this.painters.mask.preDraw(),o.forEach(function(t){if(!t.isMaskReverse){var n=t.tiles&&t.tiles[0];n&&e.painters.mask.draw(a,s,n.features,{color:[1,1,1,1],distanceScales:e.distanceScales})}});var l=t.filter(function(t){return t.type===lt.RENDER_LAYER_TYPE.mask&&t.isMaskReverse});l&&l.length>=1&&(r.colorMask(!1,!0,!1,!1),r.clearColor(0,0,0,1),this.clear(),l.forEach(function(t){var n=t.tiles&&t.tiles[0];n&&e.painters.mask.draw(a,s,n.features,{color:[0,1,0,0],distanceScales:e.distanceScales})}),r.colorMask(!0,!0,!0,!0))}r.clearColor.apply(r,Ot.rgbaToGLColor(this.background)),this.frameBuffer.mask.unbind()}},{key:"drawShadow",value:function(t){var e=this,n=t.filter(function(t){return t.type===lt.RENDER_LAYER_TYPE.building3d});if(n.length){this.frameBuffer.shadow.bind();var i=this.gl;this.clear(),i.enable(i.DEPTH_TEST),i.enable(i.CULL_FACE),i.colorMask(!1,!1,!1,!1);var o=this.lightManager.getLightPVMatrix(this.view);n.forEach(function(t){e.drawBuildingShadows(t,o)}),i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.colorMask(!0,!0,!0,!0),this.frameBuffer.shadow.unbind()}}},{key:"drawBloom",value:function(){var t=this.gl,e=0,n="main",i="pass0",o=!0;t.clearColor(0,0,0,0);for(var r=0;r<9;r++)this.bloomBlurPass.setProps({horizontal:o}),this.bloomBlurPass.render({inputBuffer:this.frameBuffer[n],outputBuffer:this.frameBuffer[i],colorIndex:0===r?1:0}),n="pass"+e,i="pass"+(1-e),e=1-e,o=!o;t.blendFunc(t.ONE,t.ONE),this.bloomBlurPass.setProps({horizontal:o}),this.bloomBlurPass.render({inputBuffer:this.frameBuffer[n],outputBuffer:this.frameBuffer.main,preserve:!0}),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor.apply(t,(0,f.default)(Ot.rgbaToGLColor(this.background)))}},{key:"clearBloomBuffer",value:function(){var t=this.gl;this.frameBuffer.main.setDrawBuffers(["COLOR_ATTACHMENT0","COLOR_ATTACHMENT1"]),t.clearBufferfv(t.COLOR,1,new Float32Array([0,0,0,0])),this.frameBuffer.main.setDrawBuffers(["COLOR_ATTACHMENT0"])}},{key:"render",value:function(t,e,n,i){if(!this._destroyed){e=e||this.transform,this.transform=e,t=t||this.data,this.data=t,this.distanceScales=r(t)?e.getDistanceScales():null,this.lightManager.update({transform:e,camera:this.camera,view:this.view}),this.textCache&&this.textCache.updateRenderTiles(this.tilesMatrix),this.drawMask(t),!this.disableShadow&&this.lightManager.getShadowLight()&&this.drawShadow(t);var o=!(i.disableAntialias||this.disableAntialias),a=this.camera.getFogEdge(),s=this.gl.extensions_TMAP.get("WEBGL_depth_texture")&&a[1]<1/0,l=[],u=[];if(t.forEach(function(t){t.rank>=(0,mt.getNAALine)()?u.push(t):l.push(t)}),this.frameBuffer.main.bind(),this.clear(),this.enableBloom&&this.clearBloomBuffer(),this.draw(l,n,i),this.enableBloom&&this.drawBloom(),this.fxaaPass.setProps({enabled:o}),this.fxaaPass.render({inputBuffer:this.frameBuffer.main,outputBuffer:null}),s){var c=this.camera.pvMatrix.multiplyVector4({elements:[0,0,0,1]}).elements;this.fogPass.setProps({fogEdge:a,depthAtCenter:(c[2]/c[3]+1)/2,depthTexture:this.frameBuffer.main.depth.texture,heading:e.heading}),this.frameBuffer.pass0.copy(null),this.fogPass.render({inputBuffer:this.frameBuffer.pass0,outputBuffer:null,preserve:!0})}this.draw(u,n,i)}}},{key:"draw",value:function(t,e,n){var i=this,o=n.fadeChange,r=n.iconsLoader;t.forEach(function(n){switch(n.type){case lt.RENDER_LAYER_TYPE.text:i.textCache&&i.catcheTextTexture(n.tiles,r);var a=t.filter(function(t){return t.type===lt.BASE_LAYER_TYPE.point})[0],s=t.filter(function(t){return t.type===lt.BASE_LAYER_TYPE.label})[0];i.drawBaseText(e,o,r,{showPoint:!!a,showLabel:!!s});break;case lt.RENDER_LAYER_TYPE.base:i.drawBase(n);break;case lt.RENDER_LAYER_TYPE.arrow:i.drawArrows(n);break;case lt.RENDER_LAYER_TYPE.building3d:i.drawBuildings(n,!0);break;case lt.RENDER_LAYER_TYPE.building2d:i.drawBuildings(n,!1),i.drawBase(n,!0);break;case lt.RENDER_LAYER_TYPE.circle:case lt.RENDER_LAYER_TYPE.ellipse:case lt.RENDER_LAYER_TYPE.rectangle:case lt.RENDER_LAYER_TYPE.polygon:i.drawPolygons(n,{distanceScales:i.distanceScales,usePicking:!1});break;case lt.RENDER_LAYER_TYPE.polyline:i.drawPolylines(n,{distanceScales:i.distanceScales,usePicking:!1});break;case lt.RENDER_LAYER_TYPE.label:i.drawLabels(n,{distanceScales:i.distanceScales,usePicking:!1});break;case lt.RENDER_LAYER_TYPE.marker:i.drawMarkers(n,{distanceScales:i.distanceScales,usePicking:!1});break;case lt.RENDER_LAYER_TYPE.visualPlugin:n.visualPlugin.draw(i.camera);break;case lt.RENDER_LAYER_TYPE.imageTile:i.drawImageTile(n);break;case lt.RENDER_LAYER_TYPE.canvasGround:case lt.RENDER_LAYER_TYPE.imageGround:i.drawGroundLayer(n);break;case lt.RENDER_LAYER_TYPE.indoorRegion:i.drawIndoorRegions(n);break;case lt.RENDER_LAYER_TYPE.indoorPoi:i.drawIndoorPois(n,{fadeChange:o});break;case lt.RENDER_LAYER_TYPE.indoorEscalator:i.drawIndoorEscalators(n);break;case lt.RENDER_LAYER_TYPE.highlight:i.drawHighlight(n,{distanceScales:i.distanceScales,usePicking:!1});break;case lt.RENDER_LAYER_TYPE.trafficFlow:i.drawTrafficFlowTile(n)}})}},{key:"hasPickableLayer",value:function(){return o(this.data)}},{key:"renderForPicking",value:function(t){var e=this;if(this.data){var n=this.data.filter(function(t){return(0,lt.isOverlayLayer)(t.type)});return n.length>0&&this.distanceScales?(n.forEach(function(n,i){switch(n.type){case lt.RENDER_LAYER_TYPE.rectangle:case lt.RENDER_LAYER_TYPE.circle:case lt.RENDER_LAYER_TYPE.ellipse:case lt.RENDER_LAYER_TYPE.polygon:t&&t(i),e.drawPolygons(n,{distanceScales:e.distanceScales,usePicking:!0,picking_zindex:i});break;case lt.RENDER_LAYER_TYPE.polyline:t&&t(i),e.drawPolylines(n,{distanceScales:e.distanceScales,usePicking:!0,picking_zindex:i});break;case lt.RENDER_LAYER_TYPE.label:t&&t(i),e.drawLabels(n,{distanceScales:e.distanceScales,usePicking:!0});break;case lt.RENDER_LAYER_TYPE.marker:t&&t(i),e.drawMarkers(n,{distanceScales:e.distanceScales,usePicking:!0})}}),n):null}}},{key:"drawBaseText",value:function(t,e,n,i){t.setInUse(!0);var o=this.painters,r=this.maskScale,a=this.gl;o.symbol&&(o.symbol.preDraw({iconsLoader:n,maskTexture:this.frameBuffer.mask.color}),i.showLabel&&t.calculateAlsoShowedLabel(this.tilesMatrix,this.camera,this.transform),o.symbol.draw(this.transform,this.tilesMatrix,t,{showPoint:i.showPoint,showLabel:i.showLabel,asBackground:!1,updateSubData:!0,fadeChange:e,iconsLoader:n,maskScale:r}),o.symbol.afterDraw(),this.frameBuffer.mask.color.unbind(a,{textureIndex:3}),t.setInUse(!1))}},{key:"drawBuildings",value:function(t,e){var n=this,i=t;if(i&&0!==i.tiles.length){var o=this.gl;this._withBlendEliminationDraw(o,function(){var t=n.painters.building,r=i.tiles;t.preDraw({lightUniforms:n.lightManager.uniforms,shadowTexture:n.frameBuffer.shadow&&n.frameBuffer.shadow.depth}),n.frameBuffer.mask.color.bind(o);var a=!0,s=!1,l=void 0;try{for(var c,f=(0,u.default)(r);!(a=(c=f.next()).done);a=!0){var d=c.value,h=d.features&&d.features.buildings;if(h){var v={matrix:n.tilesMatrix[d.id].elements,modelMatrix:n.tilesModelMatrix[d.id].elements,maskScale:n.maskScale};t.draw(h,v,{scale:d.scale,use3D:e})}}}catch(t){s=!0,l=t}finally{try{!a&&f.return&&f.return()}finally{if(s)throw l}}n.frameBuffer.mask.color.unbind(),t.afterDraw()},{useCullFace:!0})}}},{key:"drawArrows",value:function(t){var e=t;if(e&&e.tiles&&0!==e.tiles.length){var n=this.painters.arrow,i=e.tiles;n.preDraw();var o=!0,r=!1,a=void 0;try{for(var s,l=(0,u.default)(i);!(o=(s=l.next()).done);o=!0){var c=s.value,f=c.features;if(f){var d=this.transform,h=d.width,v=d.height,p=d.scale,m={matrix:this.tilesMatrix[c.id].elements,width:h,height:v,scale:p};n.draw(f,m,{tileId:c.id})}}}catch(t){r=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}n.afterDraw()}}},{key:"drawBuildingShadows",value:function(t,e){if(t&&0!==t.tiles.length){var n=this.painters.buildingShadow;n.preDraw(),this.frameBuffer.mask.color.bind(this.gl);var i=!0,o=!1,r=void 0;try{for(var a,s=(0,u.default)(t.tiles);!(i=(a=s.next()).done);i=!0){var l=a.value,c=l.features;if(c){var f={matrix:this.tilesMatrix[l.id].elements,modelMatrix:this.tilesModelMatrix[l.id].elements,lightPVMatrix:e.elements,maskScale:this.maskScale};n.draw(c,f,{scale:l.scale})}}}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}this.frameBuffer.mask.color.unbind()}}},{key:"drawBase",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&0!==t.tiles.length){var n=this.painters.base,i=t.tiles;n.preDraw({lightUniforms:this.lightManager.uniforms,shadowTexture:this.frameBuffer.shadow&&this.frameBuffer.shadow.depth});var o=!0,r=!1,a=void 0;try{for(var s,l=(0,u.default)(i);!(o=(s=l.next()).done);o=!0){var c=s.value,f=e?c.features&&c.features.buildSideShapes:c.features;if(f){var d={matrix:this.tilesMatrix[c.id].elements,modelMatrix:this.tilesModelMatrix[c.id].elements};n.draw(f,d,c.scale,this.transform._zoom,t.id)}}}catch(t){r=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}n.afterDraw()}}},{key:"drawHighlight",value:function(t,e){var n=this.gl,i=t.tiles&&t.tiles[0];if(i&&i.features){n.enable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.colorMask(!1,!1,!1,!1),n.depthMask(!1),n.enable(n.CULL_FACE),n.stencilFunc(n.ALWAYS,1,255),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT);var o=this.camera.getLookPosition().elements,r=this.camera.getLightPosition().elements,a=this.camera.pvMatrix;e.noBorder=!0,e.extruded=!0,n.cullFace(n.FRONT),n.stencilOp(n.KEEP,n.INCR,n.KEEP),this._reallyDrawPolygon(a,i,o,r,e),e.extruded=!1,n.cullFace(n.BACK),n.stencilOp(n.KEEP,n.INCR,n.INCR),this._reallyDrawPolygon(a,i,o,r,e),e.extruded=!0,n.stencilOp(n.KEEP,n.DECR,n.KEEP),this._reallyDrawPolygon(a,i,o,r,e),n.disable(n.DEPTH_TEST),n.colorMask(!0,!0,!0,!0),n.stencilMask(0),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);var s=this.painters.highlight;n.stencilFunc(n.EQUAL,1,255),s.preDraw(),s.draw({color:i.features.highlightColor}),n.stencilFunc(n.EQUAL,0,255),s.draw({color:i.features.shadeColor}),n.disable(n.STENCIL_TEST),n.disable(n.CULL_FACE),n.cullFace(n.BACK),n.depthMask(!0),n.stencilMask(255),n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"drawPolygons",value:function(t,e){var n=this.gl,i=t.tiles&&t.tiles[0];if(i&&i.features){var o=this.camera.getLookPosition().elements,r=this.camera.getLightPosition().elements,a=this.camera.pvMatrix;e.usePicking||n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.CULL_FACE),n.enable(n.DEPTH_TEST),n.colorMask(!1,!1,!1,!1),this._reallyDrawPolygon(a,i,o,r,e),n.disable(n.DEPTH_TEST),n.colorMask(!0,!0,!0,!0),this._reallyDrawPolygon(a,i,o,r,e),n.disable(n.CULL_FACE),e.usePicking||n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"_reallyDrawPolygon",value:function(t,e,n,i,o){this.painters.side.preDraw({lightUniforms:this.lightManager.uniforms}),o.noBorder||this.painters.side.draw(this.transform,t,e.features,{drawBorder:!0,distanceScales:o.distanceScales,usePicking:o.usePicking,picking_zindex:o.picking_zindex,cameraPosition:n,lightPosition:i,extruded:o.extruded}),this.painters.side.draw(this.transform,t,e.features,{drawBorder:!1,distanceScales:o.distanceScales,usePicking:o.usePicking,picking_zindex:o.picking_zindex,cameraPosition:n,lightPosition:i,extruded:o.extruded}),this.painters.polygon.preDraw({lightUniforms:this.lightManager.uniforms}),this.painters.polygon.draw(this.transform,t,e.features,{distanceScales:o.distanceScales,usePicking:o.usePicking,picking_zindex:o.picking_zindex,cameraPosition:n,lightPosition:i,extruded:o.extruded})}},{key:"drawPolylines",value:function(t,e){var n=this.gl;this.painters.polyline.preDraw();var i=t.tiles&&t.tiles[0];if(i&&i.features){var o=this.camera.pvMatrix;e.usePicking||(n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),this.enableBloom&&n.frameBuffer.setDrawBuffers(["COLOR_ATTACHMENT0","COLOR_ATTACHMENT1"])),this.painters.polyline.draw(this.transform,o,i.features,{drawBorder:!0,distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),this.painters.polyline.draw(this.transform,o,i.features,{drawBorder:!1,distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),e.usePicking||(n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),this.enableBloom&&n.frameBuffer.setDrawBuffers(["COLOR_ATTACHMENT0"]))}}},{key:"drawImageTile",value:function(t){var e=this,n=this.tilesMatrix,i=this.painters,o=this.imageCaches,r=this.gl,a=this.transform,s=a.isSphere,l=a.viewTransition,u=a.zoom,c=a.center;o[t.id]||(o[t.id]=new nt.default(r,{itemWidth:t.tileSize,config:{magFilter:r.NEAREST}}));var f=o[t.id];t.tiles.forEach(function(t){f.addImage(t.id,t.features)}),f.loadTexture();var d=i.image;d.preDraw({isSphere:s}),r.enable(r.CULL_FACE),t.tiles.forEach(function(i){var o=f.getTexCoord(i.id);o&&d.draw({isSphere:s,viewTransition:l,mercator:[i.coordX*i.size,i.coordY*i.size,i.coordZ],zoom:u,center:c,pvMatrix:e.camera.pvMatrix,matrix:n[i.id],size:{width:t.tileSize,height:t.tileSize},texInfo:o,opacity:t.opacity})}),r.disable(r.CULL_FACE),d.afterDraw()}},{key:"drawTrafficFlowTile",value:function(t){var e=this,n=this.tilesMatrix,i=this.painters,o=this.imageCaches,r=this.gl;o[t.id]||(o[t.id]=new nt.default(r,{itemWidth:64,width:1024,height:1024,config:{minFilter:r.NEAREST,magFilter:r.NEAREST,flipY:!0}}));var a=o[t.id];t.tiles.forEach(function(t){a.addImage(t.id,t.features.pathImage)}),a.loadTexture();var s=i.trafficFlow;s.preDraw(),this._startTick||(this._startTick=q.default.now()),t.tiles.forEach(function(t){var i=a.getTexCoord(t.id);i&&s.draw(t.features,{uid:t.uid,matrix:n[t.id],texInfo:i,tick:q.default.now()-e._startTick})}),s.afterDraw()}},{key:"drawGroundLayer",value:function(t){var e=this,n=this.painters,i=this.gl,o=n.image;o.preDraw(),t.tiles.forEach(function(n){n.features.texture.bind(i);var r=n.features.bounds,a=e.transform.latLngToCenterLocalPixelByDistanceScales(r.getNorthEast(),{distanceScales:e.distanceScales,center:r.getSouthWest()});a.x=Math.abs(a.x),a.y=Math.abs(a.y);var s=e.transform.latLngToCenterLocalPixelByDistanceScales(n.features.center,{distanceScales:e.distanceScales,center:e.map.getCenter()});o.draw({matrix:e.camera.pvMatrix.clone().translate(s.x-a.x/2,s.y+a.y/2,0),size:{width:a.x,height:a.y},texInfo:n.features.texInfo,opacity:t.opacity}),n.features.texture.unbind(i)}),o.afterDraw()}},{key:"drawLabels",value:function(t,e){var n=this.gl;this.painters.label.preDraw();var i=t.tiles&&t.tiles[0];if(i&&i.features){e.usePicking||n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);var o=this.camera.pvMatrix;t._enableCollision&&this._LabelCalcCollisionCount>0&&(i.features.instanceShowList=(0,Et.default)(i.features.labelInfoList,this.transform,this.camera,t.type),this._LabelCalcCollisionCount-=1),this.painters.label.draw(this.transform,o,i.features,{distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex}),e.usePicking||n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA)}}},{key:"updateLabel",value:function(t){if(t){var e=0;t.forEach(function(t){"LABEL"!==t.type&&"MARKER"!==t.type||(e+=1)}),this._LabelCalcCollisionCount=e}}},{key:"drawMarkers",value:function(t,e){var n=t.tiles&&t.tiles[0];if(n&&n.features&&n.features.count>0){this.painters.marker.preDraw();var i=this.camera.pvMatrix;t._enableCollision&&this._LabelCalcCollisionCount>0&&(n.features.instanceShowList=(0,Et.default)(n.features.labelInfoList,this.transform,this.camera,t.type),this._LabelCalcCollisionCount-=1),this.painters.marker.draw(this.transform,i,n.features,{distanceScales:e.distanceScales,usePicking:e.usePicking,picking_zindex:e.picking_zindex})}}},{key:"drawIndoorRegions",value:function(t){var e=this,n=this.gl,i=t.tiles&&t.tiles[0];if(i){var o=i.features,r=o.center,a=o.regions,s=o.floorIndex,l=a[0],u=this.camera.pvMatrix;n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),this.painters.indoorRegion.preDraw({lightUniforms:this.lightManager.uniforms});["sides","top"].forEach(function(n){var i={uid:t.id+"_"+s+"_region_"+n,center:r,position:l[n].position,color:l[n].color,normal:l[n].normal,index:l[n].index},o={distanceScales:e.distanceScales};e.painters.indoorRegion.draw(i,e.transform,u,o)}),n.disable(n.DEPTH_TEST),n.disable(n.CULL_FACE)}}},{key:"drawIndoorEscalators",value:function(t){var e=this.gl,n=t.tiles&&t.tiles[0];if(n){var i=n.features,o=i.escalators[0];if(o){o.uid=t.id,o.center=i.center;var r=this.camera.pvMatrix;e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),this.painters.indoorEscalator.preDraw({lightUniforms:this.lightManager.uniforms});var a={distanceScales:this.distanceScales};this.painters.indoorEscalator.draw(o,this.transform,r,a),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE)}}}},{key:"drawIndoorPois",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.tiles&&t.tiles[0];if(n){var i=n.features,o=Math.round(this.transform.zoom);if(i.pois[o]&&i.pois[o][0]){var r=i.pois[o][0].instance;if(r.id=n.id+"_"+o,r.center=i.center,!r.count)return;this.painters.indoorPoi.preDraw(),this.painters.indoorPoi.draw(this.transform,this.camera.pvMatrix,r,{showPoint:!0,showLabel:!0,distanceScales:this.distanceScales,iconsLoader:{},fadeChange:e.fadeChange,updateSubData:!0})}}}},{key:"_withBlendEliminationDraw",value:function(t,e,n){t.enable(t.DEPTH_TEST),n.useCullFace&&t.enable(t.CULL_FACE),t.colorMask(!1,!1,!1,!1),e&&e(),t.depthFunc(t.LEQUAL),t.colorMask(!0,!0,!0,!0),e&&e(),t.disable(t.DEPTH_TEST),n.useCullFace&&t.disable(t.CULL_FACE)}},{key:"_updateBgColor",value:function(t){if(!this._destroyed){var e=this.getBgColor();(e!==this.background||t)&&(this._disableUpdateClearColor||(this.background=e,this.gl.clearColor.apply(this.gl,Ot.rgbaToGLColor(e))),this.fogPass.setFogColor(Ot.rgbaToGLColor(e)),this.map&&this.map.emit("bgcolor_change",e))}}},{key:"getBgColor",value:function(){return(0,st.getBgColor)(this.styleId,this.transform&&this.transform.zoom||10)}},{key:"_checkBgColor",value:function(){var t=(0,st.getBgColor)(this.styleId,this.transform&&this.transform.zoom||10);this.background!==t&&this._updateBgColor()}},{key:"_setClearColor",value:function(t){this.background=t,this.gl.clearColor.apply(this.gl,Ot.rgbaToGLColor(t)),this._disableUpdateClearColor=!0}},{key:"getImageCache",value:function(t){return this.imageCaches[t]}},{key:"destroy",value:function(){var t=this;if(!this._destroyed){this.camera.destroy(),this.camera=null,this.styleId=null,this.isDefaultStyle=null,this.canvas=null,this.maskScale=null,this.distanceScales=null,this.map=null,this.textCache&&this.textCache.destroy(),this.textCache=null,Ot.forIn(this.imageCaches,function(t,e){e.destroy()}),this.imageCaches=null,this.glyphManager.destroy(),this.glyphManager=null,this.markerManager.destroy(),this.markerManager=null,this.fxaaPass&&(this.fxaaPass.destroy(),this.fxaaPass=null),this.fogPass&&(this.fogPass.destroy(),this.fogPass=null),(0,s.default)(this.frameBuffer).keys(function(e){t.frameBuffer[e].delete()}),this.frameBuffer=null,(0,s.default)(this.painters).forEach(function(e){t.painters[e].destroy()}),this.painters=null;var e=this.gl.extensions_TMAP.get("WEBGL_lose_context");e&&e.loseContext(),this.gl.extensions_TMAP.destroy(),delete this.gl.extensions_TMAP,this.gl=null,this._destroyed=!0}}}]),t}();e.default=Dt},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(392),_=i(m),g=n(755),y=i(g),x=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.default)(this,e),void 0===n.enabled&&(n.enabled=!0);var i=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,(0,r.default)({id:"fxaa-pass"},n)));return i._painter=new y.default({gl:t}),i}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer;this._painter.preDraw(),this._painter.draw({resolution:[e.width,e.height],enabled:this.props.enabled,texture:e.texture})}}]),e}(_.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(392),_=i(m),g=n(756),y=i(g),x=n(147),b=i(x),S=n(117),w=n(223),E=i(w),T=30*Math.PI/180,A=0,P=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.fogColor,o=n.skyOptions,r=n.id,a=void 0===r?"fog-pass":r,l=n.fogRange,c=void 0===l?[200,400]:l,f=n.heading,d=void 0===f?0:f;(0,u.default)(this,e);var v=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,{id:a,fogRange:c,heading:d}));return v._painter=new y.default({gl:t}),v._setSkyOptions(o),i?(v.setFogColor(new E.default(i).toArray()),v._disableColorSetting=!0):v.setFogColor(),v}return(0,p.default)(e,t),(0,f.default)(e,[{key:"setFogColor",value:function(t){this._disableColorSetting||this._painter.setFogColor(t)}},{key:"_setSkyOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,i=e.height,o=e.src,r=e.color,a=e.horizontal,s=void 0===a?S.IMAGE_DISPLAY.SCALE:a,l=e.vertical,u=void 0===l?S.IMAGE_DISPLAY.ORIGIN:l,c=e.brightness,f=void 0===c?1:c,d=e.animated,h=void 0!==d&&d;if(this.skyTex=void 0,o){var v=new Image;v.onload=function(){t.skyTex=new b.default(t.gl,{pixels:v,width:n,height:i}),t.skyTex.upload({flipY:!0})},v.src=o}this._painter.setSkyColor(r?new E.default(r).toArray():void 0),this.skyDisplay=[s,u],this.skyAnimated=h,this._painter.setBrightness(f)}},{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.props.fogRange.map(function(t){return 2*t/e.height}),i=this.skyTex,o=[0,0,0,0];i&&(o=[i.width/e.width,i.height/e.height].concat((0,r.default)(this.skyDisplay)));var a=this._depthRange||[0,1],s=a[0]+(a[1]-a[0])*this.props.depthAtCenter,l=a[0]+(a[1]-a[0])*(this.props.fogEdge[2]+1)/2;this._painter.preDraw(),this._painter.draw({rangeList:n,fogEdge:[this.props.fogEdge[1],l,s],texture:e.texture,depth:this.props.depthTexture,skyTex:i,skyInfo:o,viewInfo:[this.props.heading*Math.PI/180,Math.atan(e.width/e.height*Math.tan(T/2)),this.skyAnimated,A+=3e-4]})}},{key:"_onDestroy",value:function(){this.skyTex&&this.skyTex.delete()}}]),e}(_.default);e.default=P},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(3),s=i(a),l=n(0),u=i(l),c=n(1),f=i(c),d=n(5),h=i(d),v=n(4),p=i(v),m=n(757),_=i(m),g=n(392),y=i(g),x=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.default)(this,e);var i=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t,(0,r.default)({id:"gsblur-pass"},n)));return i._painter=new _.default({gl:t}),i}return(0,p.default)(e,t),(0,f.default)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=t.colorIndex;this._painter.preDraw(),this._painter.draw({texture:e.getColorAttach(n),horizontal:!!this.props.horizontal,resolution:[e.width,e.height]})}}]),e}(y.default);e.default=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.deviceX,n=t.deviceY,i=t.deviceRadius,o=t.deviceWidth,r=t.deviceHeight;if(!(e>=0&&n>=0&&e<o&&n<r))return null;var a=Math.max(0,e-i),s=Math.max(0,n-i);return{x:a,y:s,width:Math.min(o,e+i)-a+1,height:Math.min(r,n+i)-s+1,centerX:e,centerY:n}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=i(r),s=n(1),l=i(s),u=n(254),c=n(26),f=i(c),d=n(510),h=i(d),v=function(t){return t.useDevicePixels&&"undefined"!=typeof window?f.default.devicePixelRatio:1},p=function(){function t(e){var n=this;(0,a.default)(this,t),this.map=e,this.render=e.renderEngine,this._eventHandlers=[],this._fbo=this.createFBO(),this._eventHandlers.push(f.default.on(this.map,"resize",function(){n.updateFBO()}))}return(0,l.default)(t,[{key:"createFBO",value:function(){var t=this.render.gl,e=this.render.canvas.width,n=this.render.canvas.height,i=new h.default(t,{width:e,height:n});return i.unbind(),i}},{key:"updateFBO",value:function(){var t=this.render.canvas.width,e=this.render.canvas.height;this._fbo.resize(t,e)}},{key:"_getPickingFBO",value:function(){return(this._fbo||this.createFBO()).buffer}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,i=t.mode,o=t.radius,r=t.callback,a=this._pickObject({x:e,y:n,radius:o,mode:i,pickingFBO:this._getPickingFBO(),lastPickedInfo:this._lastPickedInfo,useDevicePixels:!0});r&&r(a)}},{key:"_pickObject",value:function(t){var e=t.x,n=t.y,i=t.radius,r=t.mode,a=t.pickingFBO,s=t.useDevicePixels,l=t.viewport;if(this.render.hasPickableLayer()){var c=v({useDevicePixels:s}),f=Math.round(e*c),d=Math.round(this.render.canvas.height-n*c),h=Math.round(i*c),p=o({deviceX:f,deviceY:d,deviceRadius:h,deviceWidth:this.render.canvas.width,deviceHeight:this.render.canvas.height}),m=p&&this._getPickedColorFromPickingFBO({viewport:l,useDevicePixels:s,pickingFBO:a,deviceRect:p,mode:r});return{objectIndex:m&&(0,u.decodePickingColor)(m.pickedColor),layerId:m&&m.layerId}}}},{key:"_getPickedColorFromPickingFBO",value:function(t){var e=t.deviceRect,n=this.render.gl;this._fbo.bind(),n.enable(n.SCISSOR_TEST),n.scissor(e.x,e.y,e.width,e.height),n.clearColor(0,0,0,.001),n.enable(n.BLEND),n.blendFuncSeparate(n.ONE,n.ZERO,n.CONSTANT_ALPHA,n.ZERO),n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD),n.blendColor(0,0,0,0),n.depthRange(0,1),n.colorMask(!0,!0,!0,!0);var i=null,o=new Uint8Array(4);return this.render.hasPickableLayer()&&(i=this.render.renderForPicking(function(t){n.blendColor(0,0,0,(t+1)/255)}),n.readPixels(e.x,e.y,1,1,n.RGBA,n.UNSIGNED_BYTE,o)),this._fbo.unbind(),n.disable(n.SCISSOR_TEST),n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),this.render._updateBgColor(!0),{layerId:i&&i[o[3]-1]&&i[o[3]-1].id,pickedColor:o}}},{key:"destroy",value:function(){this._eventHandlers.forEach(function(t){t&&t.remove&&t.remove()}),this._fbo&&this._fbo.delete(),this.render=null,this.map=null}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t,e){var n=t.getExtension(e);if(!n)return null;var i=e.split("_")[0],o="_"+i;for(var r in n){var a=n[r],s="function"==typeof a,l=s?i:o,u=r;r.endsWith(l)&&(u=r.substring(0,r.length-l.length)),void 0!==t[u]?s||t[u]===a||console.warn("conflict:",u,t[u],a,r):t[u]=s?function(t){return function(){return t.apply(n,arguments)}}(a):a}return n}Object.defineProperty(e,"__esModule",{value:!0});e.Extensions=function(t){var e={};return{get:function(n,i){if(void 0!==e[n])return e[n];var o=void 0;switch(n){case"WEBGL_depth_texture":o=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=t.getExtension(n)}return!o&&i&&console.error(i),e[n]=o,o},set:function(t,n){e[t]=n},extendWebGL1:function(){t.DEPTH_COMPONENT24=t.DEPTH_COMPONENT,t.DEPTH24_STENCIL8=t.DEPTH_STENCIL,i(t,"OES_vertex_array_object"),i(t,"ANGLE_instanced_arrays"),i(t,"WEBGL_depth_texture"),i(t,"WEBGL_draw_buffers")},destroy:function(){e=null}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.glyphList,n=t.getGlyphWidth,i=t.fontSize,o=t.fontWeight,r=t.glyphHeight,s=t.buffer,l=t.maxCanvasWidth,u=t.mapping,c=void 0===u?{}:u,f=t.xOffset,d=void 0===f?0:f,h=t.yOffset,v=void 0===h?0:h,m=0,_=d;(0,a.default)(e).forEach(function(t,e){if(!c[t]||c[t]&&c[t].fontWeight!==o){var a=n(t,e);_+a+2*s>l&&(_=0,m+=1),c[t]={x:_,y:v+m*(r+2*s),fontSize:i,fontWeight:o,width:a+2*s,height:r+2*s,mask:!0},_+=a+2*s}});var g=r+2*s;return{mapping:c,xOffset:_,yOffset:v+m*g,canvasHeight:(0,p.getPowerOf2)(v+(m+1)*g)}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(95),a=i(r),s=n(15),l=i(s),u=n(0),c=i(u),f=n(1),d=i(f);e.buildMapping=o;var h=n(512),v=i(h),p=n(393),m=n(147),_=i(m),g=n(26),y='"SF Pro SC","SF Pro Display","SF Pro Icons","PingFang SC","Helvetica Neue","Helvetica","Arial", "Microsoft YaHei",sans-serif',x="normal",b=24,S=2,w=.25,E=10,T=1024*((0,g.isPC)()?4:2),A=function(){function t(e){(0,c.default)(this,t),this.setting={fontFamily:y,fontWeight:x,fontSize:b,useSdf:!0,buffer:S,cutoff:w,radius:E},this.gl=e,this._debounceTimeId=null,this.debug=!1}return(0,d.default)(t,[{key:"updateTextStyle",value:function(t,e,n,i){t.font=i+" "+n+"px "+e,t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}},{key:"generateAtlas",value:function(t,e){var n=this,i={};(0,l.default)(i,this.setting,e);var r=i.fontFamily,a=i.fontWeight,s=i.fontSize,u=i.buffer,c=i.useSdf,f=i.radius,d=i.cutoff;this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=T,this.canvas.height=T/8,this.glyphTexture=new _.default(this.gl,{pixels:this.canvas}),this.debug&&(this.canvas.style.position="fixed",this.canvas.style.top=0,this.canvas.style.left=0,document.body.appendChild(this.canvas))),this.lastAtlas||(this.lastAtlas={mapping:{},xOffset:0,yOffset:0});var h=this.canvas.getContext("2d");this.updateTextStyle(h,r,s,a);var p=t.filter(function(t){return!n.lastAtlas.mapping[t]||n.lastAtlas.mapping[t]&&n.lastAtlas.mapping[t].fontWeight!==a}),m=o({glyphList:t,getGlyphWidth:function(t){return h.measureText(t).width},fontSize:s,fontWeight:a,glyphHeight:1*s,buffer:u,maxCanvasWidth:T,mapping:this.lastAtlas.mapping,xOffset:this.lastAtlas.xOffset,yOffset:this.lastAtlas.yOffset});if(this.canvas.height<m.canvasHeight){var g=h.getImageData(0,0,this.canvas.width,this.canvas.height);this.canvas.height=m.canvasHeight,h.putImageData(g,0,0)}if(this.updateTextStyle(h,r,s,a),p.length>0){if(c){var y=new v.default(s,u,f,d,r,a),x=h.createImageData(y.size,y.size);p.forEach(function(t){n.makeRGBAImageData(y.draw(t),x),h.putImageData(x,m.mapping[t].x,m.mapping[t].y)})}else p.forEach(function(t){h.fillText(t,m.mapping[t].x,m.mapping[t].y+.9*s)});this.canvasUpdated=!0}this.lastAtlas=m;var b={};return t.forEach(function(t){b[t]=m.mapping[t]}),{xOffset:m.xOffset,yOffset:m.yOffset,mapping:b,data:this.canvas,width:this.canvas.width,height:this.canvas.height}}},{key:"uploadToGPU",value:function(t){if(t.force||this.canvasUpdated){var e=this.canvas,n=e.width,i=e.height,o=this.canvas.getContext("2d").getImageData(0,0,n,i);this.glyphTexture.update(o,t)}else this.glyphTexture.upload(t);this.canvasUpdated=!1}},{key:"makeRGBAImageData",value:function(t,e){for(var n=0;n<t.length;n++)e.data[4*n+0]=t[n],e.data[4*n+1]=t[n],e.data[4*n+2]=t[n],e.data[4*n+3]=t[n]}},{key:"destroy",value:function(){this.glyphTexture&&this.glyphTexture.destroy(),this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.setting=null,this.gl=null}}]),t}();e.default=A},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(26),f=i(c),d=n(147),h=i(d),v=n(10),p=i(v),m=f.default.isPC()?8192:4096,_=function(){function t(e,n){(0,s.default)(this,t),this.gl=e,this.width=n.width||m,this.height=n.height||m/2,this.itemWidth=n.itemWidth||512,this.next={x:0,y:0},this.images={},this.config=n.config||{},this.debug=n.debug||!1,this.debug&&(this.canvas=this.createCanvas(this.width,this.height),this.debugShow())}return(0,u.default)(t,[{key:"getTexCoord",value:function(t){var e=this.images[t];if(e){var n=this.width,i=this.height;return{s:(e.x+.5)/n,t:(e.y+.5)/i,w:(e.w-1)/n,h:(e.h-1)/i}}return null}},{key:"addImage",value:function(t,e){return t in this.images||this.updateSubImg(t,e),this.images[t]}},{key:"removeImage",value:function(t){delete this.images[t]}},{key:"updateSubImg",value:function(t,e){var n=this.images,i=this.next,o=this.itemWidth,a=this.width,s=this.height;if(this.loadTexture(),!(t in n)){var l=e.height,u=e.width,c=i.x,f=i.y;f+l>s&&(c+=o,f=0),c>=a&&(c=0),this.removeOldImages(c,f,l),n[t]={x:c,y:f,h:l,w:u},this.texture.updateSub(e,(0,r.default)({xOffset:c,yOffset:f},this.config)),i.x=c,i.y=f+l,this.debug&&this.canvas.ctx.drawImage(e,c,f)}}},{key:"loadTexture",value:function(){var t=this.gl;if(this.texture)this.texture.bind();else{var e=new h.default(t);e.resize(this.width,this.height,this.config),this.texture=e}}},{key:"removeOldImages",value:function(t,e,n){var i=this.images,o=[];p.default.forIn(i,function(i,r){r.x!==t||r.y>=e+n||r.y+r.h<=e||o.push(i)}),o.forEach(function(t){delete i[t]}),o=void 0}},{key:"clear",value:function(){this.images={},this.next={x:0,y:0}}},{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n.ctx=n.getContext("2d"),this.debug&&document.body.appendChild(n),n}},{key:"debugShow",value:function(){this.debug&&(this.canvas.style.position="absolute",this.canvas.style.zIndex="10000",this.canvas.style.border="1px solid red",this.canvas.style.width="1200px",this.canvas.style.height="1200px",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvas.id="ImageCache",document.body.appendChild(this.canvas))}},{key:"destroy",value:function(){this.texture&&(this.texture.destroy(),this.texture=null),this.width=null,this.height=null,this.itemWidth=null,this.next=null,this.images=null,this.debug=null,this.canvas=null,this.gl=null}}]),t}();e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.markers,n=t.getMarkerWidth,i=t.rowHeight,o=t.buffer,a=t.maxCanvasWidth,s=t.mapping,l=void 0===s?{}:s,u=t.xOffset,f=void 0===u?0:u,h=t.yOffset,p=void 0===h?0:h,m=t.lastRowHeight,_=void 0===m?0:m,g=t.lastXSpareSet,y=void 0===g?{}:g,x=t.lastYSpare,S=void 0===x?0:x,w=0,E=f,T=i+2*o,A=p+w*T,P=(0,v.default)({},y);(0,d.default)(e).forEach(function(t,e){if(!l[t.src]){var s=n(t,e);if(E+s+2*o>a){w++,A=p+w*T;var u=r(P,A);E=u<0?0:a-u}l[t.src]={x:E+o,y:A+o,width:s,height:Math.min(t.height,i),mask:!0},E+=s+2*o}});var I=a-E,k=S+p-A,L=A+i;if(i>_)P=(0,c.default)({},L,I);else{for(var M in P)P.hasOwnProperty(M)&&M<=L&&delete P[M];P[L]=I}return{mapping:l,xOffset:E,yOffset:A,spareRowHeight:Math.max(i,_),xSpareSet:P,ySpare:i>_?A+i-p:k>0?k:i,canvasHeight:(0,b.getPowerOf2)(p+(w+1)*T)}}function r(t,e){for(var n=(0,l.default)(t).map(function(t){return Number(t)}).sort(function(t,e){return t-e}),i=0;i<n.length;i++)if(e<=n[i])return t[n[i]];return-1}function a(t){var e=t.glyphList,n=t.getGlyphWidth,i=t.fontSize,o=t.glyphHeight,a=t.buffer,s=t.maxCanvasWidth,l=t.mapping,u=void 0===l?{}:l,f=t.xOffset,h=void 0===f?0:f,p=t.yOffset,m=void 0===p?0:p,_=t.lastRowHeight,g=void 0===_?0:_,y=t.lastXSpareSet,x=void 0===y?{}:y,S=t.lastYSpare,w=void 0===S?0:S,E=0,T=h,A=o+2*a,P=m,I=(0,v.default)({},x);(0,d.default)(e).forEach(function(t,e){if(!u[t]){var l=n(t,e);if(T+l+2*a>s){E++,P=m+E*A;var c=r(I,P);T=c<0?0:s-c}u[t]={x:T+a,y:P+a,fontSize:i,width:l+2*a,height:o+2*a,mask:!0},T+=l+2*a}});var k=s-T,L=w+m-P,M=P+o;if(o>g)I=(0,c.default)({},M,k);else{for(var C in I)I.hasOwnProperty(C)&&C<=M&&delete I[C];I[M]=k}return{mapping:u,xOffset:T,yOffset:P,spareRowHeight:Math.max(o,g),xSpareSet:I,ySpare:o>g?P+o-m:L>0?L:o,canvasHeight:(0,b.getPowerOf2)(m+(E+1)*A)}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(18),l=i(s),u=n(172),c=i(u),f=n(95),d=i(f),h=n(224),v=i(h),p=n(21),m=i(p),_=n(0),g=i(_),y=n(1),x=i(y);e.buildAtlas=o;var b=n(393),S=n(147),w=i(S),E=n(26),T=n(512),A=i(T),P='"SF Pro SC","SF Pro Display","SF Pro Icons","PingFang SC","Helvetica Neue","Helvetica","Arial", "Microsoft YaHei",sans-serif',I="normal",k=24,L=2,M=.25,C=10,R=1024*((0,E.isPC)()?2:1),N=function(){function t(e){var n=this;(0,g.default)(this,t),this._reUpdateCanvas=(0,E.debounce)(function(){n.canvasUpdated=!0},5e3),this.setting={fontFamily:P,fontWeight:I,fontSize:k,useSdf:!0,buffer:L,cutoff:M,radius:C},this.queuePromise=null,this.gl=e,this.debug=!1,this._destroyed=!1}return(0,x.default)(t,[{key:"updateTextStyle",value:function(t,e,n,i){t.font=i+" "+n+"px "+e,t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}},{key:"generateAtlas",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.setting,s=r.fontFamily,l=r.fontWeight,u=r.fontSize,c=r.buffer,f=r.useSdf,d=r.radius,h=r.cutoff;this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=R,this.canvas.height=R/2,this.markerTexture=new w.default(this.gl,{pixels:this.canvas}),this.debug&&(this.canvas.style.position="fixed",this.canvas.style.top=0,this.canvas.style.left=0,document.body.appendChild(this.canvas))),this.lastAtlas||(this.lastAtlas={mapping:{},xOffset:0,yOffset:0});var v=this.canvas.getContext("2d");if(e&&e.length>0){this.updateTextStyle(v,s,u,l);var p=e.filter(function(t){return!n.lastAtlas.mapping[t]}),_=a({glyphList:e,getGlyphWidth:function(t){return v.measureText(t).width},fontSize:u,glyphHeight:1*u,buffer:c,maxCanvasWidth:R,mapping:this.lastAtlas.mapping,xOffset:this.lastAtlas.xOffset,yOffset:this.lastAtlas.yOffset,lastRowHeight:this.lastAtlas.spareRowHeight,lastXSpareSet:this.lastAtlas.xSpareSet,lastYSpare:this.lastAtlas.ySpare});if(p.length>0){if(f){var g=new A.default(u,c,d,h,s,l),y=v.createImageData(g.size,g.size);p.forEach(function(t){n.makeRGBAImageData(g.draw(t),y),v.putImageData(y,_.mapping[t].x,_.mapping[t].y)})}else p.forEach(function(t){v.fillText(t,_.mapping[t].x,_.mapping[t].y+.9*u)});this.canvasUpdated=!0}this.lastAtlas=_}var x=null,b=t.filter(function(t){return!n.lastAtlas.mapping[t]}).map(function(t){if(i.tileId){if(!x){var e=[];"string"==typeof i.tileImage64?e.push(i.tileImage64):e=i.tileImage64,x=m.default.all(e.map(function(t,e){return new m.default(function(n,o){if(t){var r=new Image;r.onload=function(){n(r)},r.onerror=function(){console.error("Image加载失败: "+i.tileId+"-"+e),n(null)},r.src="data:image/png;base64,"+t}else n(null)})}))}return x.then(function(e){var n=i.billboardData.filter(function(e){return e.text===t})[0],o=n&&n.bounds,r=n&&n.cidx;return e[r]?{tileImage:e[r],isSimulate:!0,src:t,width:o[2],height:o[3],bounds:o}:null})}return new m.default(function(e,n){var i=new Image;/^data:/.test(t)||(i.crossOrigin="anonymous"),i.onload=function(){e(i)},i.onerror=function(){console.error("Image加载失败: "+t),e(null)},i.src=t})}),S=m.default.all(b);return this.queuePromise=(null===this.queuePromise?S:this.queuePromise.then(function(){return S},function(t){return console.error(t),S})).then(function(r){if(!n._destroyed){r=r.filter(function(t){return!!t});var a=o({markers:r,getMarkerWidth:function(t){return t.height>128?128*t.width/t.height:t.width},rowHeight:i.tileId?30:Math.min(128,r.reduce(function(t,e){return Math.max(t,e.height)},0)),buffer:4,maxCanvasWidth:R,mapping:n.lastAtlas.mapping,xOffset:n.lastAtlas.xOffset,yOffset:n.lastAtlas.yOffset,lastRowHeight:n.lastAtlas.spareRowHeight,lastXSpareSet:n.lastAtlas.xSpareSet,lastYSpare:n.lastAtlas.ySpare});if(n.canvas.height<a.canvasHeight){var s=v.getImageData(0,0,n.canvas.width,n.canvas.height);n.canvas.height=a.canvasHeight,v.putImageData(s,0,0)}r.forEach(function(t){var e=a.mapping[t.src];if(!e.isFilled){if(t.isSimulate){var n=t.bounds;v.drawImage(t.tileImage,n[0],n[1],n[2],n[3],e.x,e.y,e.width,e.height)}else v.drawImage(t,e.x,e.y,e.width,e.height);e.isFilled=!0}}),n.lastAtlas=a,n.canvasUpdated=n.canvasUpdated||r.length>0;var l={};return t.forEach(function(t){l[t]=a.mapping[t]}),e&&e.length>0&&e.forEach(function(t){l[t]=a.mapping[t]}),n.canvasUpdated&&n._reUpdateCanvas(),l}}),this.queuePromise}},{key:"uploadToGPU",value:function(t){if(t.force||this.canvasUpdated){var e=this.canvas,n=e.width,i=e.height,o=this.canvas.getContext("2d").getImageData(0,0,n,i);this.markerTexture.update(o,t)}else this.markerTexture.upload(t);this.canvasUpdated=!1}},{key:"makeRGBAImageData",value:function(t,e){for(var n=0;n<t.length;n++)e.data[4*n+0]=t[n],e.data[4*n+1]=t[n],e.data[4*n+2]=t[n],e.data[4*n+3]=t[n]}},{key:"destroy",value:function(){this._destroyed||(this.markerTexture&&(this.markerTexture.destroy(),this.markerTexture=null),this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.queuePromise=null,this.gl=null,this._destroyed=!0)}}]),t}();e.default=N},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(279),p=i(v),m=n(774),_=i(m),g={attributes:"getAttribLocation",uniforms:"getUniformLocation"},y=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(){return this.gl.createProgram()}},{key:"_onDelete",value:function(t){t||(this._vShader.delete(),this._fShader.delete()),this.gl.deleteProgram(this._object)}},{key:"_initialize",value:function(t){var e=t.vShader,n=t.fShader;this.attachShader(e,n)}},{key:"attachShader",value:function(t,e){var n=this.gl;"string"==typeof t&&(t=new _.default(n,{type:n.VERTEX_SHADER,source:t})),"string"==typeof e&&(e=new _.default(n,{type:n.FRAGMENT_SHADER,source:e})),n.attachShader(this._object,t.shader),n.attachShader(this._object,e.shader),this._vShader=t,this._fShader=e,n.linkProgram(this._object),this.check()}},{key:"enable",value:function(){this.gl.useProgram(this._object),this.gl.program=this._object}},{key:"check",value:function(){var t=this.gl;this.getParameter(t.LINK_STATUS)||(console.error(t.getProgramInfoLog(this._object)),console.log(this._source))}},{key:"getParameter",value:function(t){return this.gl.getProgramParameter(this._object,t)}},{key:"getLocations",value:function(t,e){var n=this,i={},o=g[t];return o&&e.forEach(function(t){i[t]=n.gl[o](n._object,t)}),i}},{key:"program",get:function(){return this._object}}]),e}(p.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(5),f=i(c),d=n(4),h=i(d),v=n(279),p=i(v),m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,n))}return(0,h.default)(e,t),(0,u.default)(e,[{key:"_onCreate",value:function(t){var e=t.type;return this.gl.createShader(e)}},{key:"_onDelete",value:function(){this.gl.deleteShader(this._object)}},{key:"_initialize",value:function(t){var e=t.source;e&&this.setSource(e)}},{key:"setSource",value:function(t){this._source=t,this.gl.shaderSource(this._object,t),this.compile(),this.check()}},{key:"compile",value:function(){this.gl.compileShader(this._object)}},{key:"check",value:function(){var t=this.gl;this.getParameter(t.COMPILE_STATUS)||(console.error(t.getShaderInfoLog(this._object)),console.log(this._source))}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this._object,t)}},{key:"shader",get:function(){return this._object}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),a=n(1),s=i(a),l=n(26),u=i(l),c=n(147),f=i(c),d=n(10),h=i(d),v=u.default.isPC()?8192:4096,p=function(){function t(e){(0,r.default)(this,t),this.gl=e,this.width=v,this.height=this.width,this.itemWidth=512,this.scale=2,this.next={x:0,y:0},this.tiles={},this.tilePositions={},this._renderTiles=null,this.debug=0,this.debug&&(this.canvas=this.createCanvas(this.width,this.height),this.debugShow())}return(0,s.default)(t,[{key:"updateRenderTiles",value:function(t){this._renderTiles=t}},{key:"getTexCoord",value:function(t,e){var n=this.tiles[t];if(!n)return null;var i=this.scale;return{x:(n.x+e[0])/this.width,y:(this.height-(n.y+e[1]))/this.height,w:e[2]/this.width,h:e[3]/this.height,fontSize:{w:e[2]/i,h:e[3]/i}}}},{key:"addImage",value:function(t,e,n){if(t in this.tiles||!e)return void(n&&n());this.updateTextSubImg(e,t),n&&n()}},{key:"add",value:function(t,e,n){var i=this.tiles;if(t in i)return void(n&&n());this.createItem(e,function(e){this.updateTextSubImg(e,t),n&&n()}.bind(this))}},{key:"updateTextSubImg",value:function(t,e){this.loadTexture();var n=this.tiles;if(!(e in n)){var i=this.tilePositions,o=this.next,r=t.height,a=o.x,s=o.y;s+r>this.height&&(a+=this.itemWidth,s=0),a>=this.width&&(a=0),this.removeOldTiles(a,s,r);var l=a+"-"+s;n[e]={x:a,y:s,height:r},i[l]=e,this.texture.updateSub(t,{flipY:!0,premultiply:!0,xOffset:a,yOffset:this.height-s-r}),o.x=a,o.y=s+r,this.debug&&this.canvas.ctx.drawImage(t,a,s)}}},{key:"loadTexture",value:function(){var t=this.gl;if(this.texture)this.texture.bind();else{var e=new f.default(t);e.resize(this.width,this.height,{flipY:!0,premultiply:!0}),this.texture=e}}},{key:"removeOldTiles",value:function(t,e,n){var i=this.tiles,o=this.tilePositions,r=[];h.default.forIn(i,function(i,a){if(!(a.x!==t||a.y>=e+n||a.y+a.height<=e)){var s=a.x+"-"+a.y;delete o[s],r.push(i)}});for(var a=0,s=r.length;a<s;a++)delete i[r[a]];r=void 0}},{key:"createItem",value:function(t,e){var n=new Image;n.onload=function(){"function"==typeof e&&e(n,n.width,n.height)}.bind(this),n.src=t}},{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n.ctx=n.getContext("2d"),this.debug&&document.body.appendChild(n),n}},{key:"debugShow",value:function(){this.debug&&(document.getElementById("TextCache")||(console.info(232),this.canvas.style.position="absolute",this.canvas.style.zIndex="10000",this.canvas.style.border="1px solid red",this.canvas.style.width="8192px",this.canvas.style.height="8192px",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvas.id="TextCache",document.body.appendChild(this.canvas)))}},{key:"destroy",value:function(){this.texture&&(this.texture.destroy(),this.texture=null),this.width=null,this.height=null,this.itemWidth=null,this.scale=null,this.next=null,this.tiles=null,this.tilePositions=null,this._renderTiles=null,this.debug=0,this.canvas=null,this.gl=null}}]),t}();e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return new a.default(function(e){if(l.default.support()){var n=c.default.QMAPI_poi_icon_json+t;l.default.get(n,function(n){if(n){var i=JSON.parse(n).data;e(i)}else(0,h.loadPoiIconIndexFile)(t,d.default.iconIndexSrc).then(function(t){e(t)},function(t){console.error(t),e(null)})})}else(0,h.loadPoiIconIndexFile)(t,d.default.iconIndexSrc).then(function(t){e(t)},function(t){console.error(t),e(null)})})}Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),a=i(r),s=n(85),l=i(s),u=n(117),c=i(u),f=n(25),d=i(f),h=n(492);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),r=i(o),a=n(0),s=i(a),l=n(1),u=i(l),c=n(778),f=i(c),d=function(){function t(){(0,s.default)(this,t),this.img=null,this.w=0,this.h=0,this.scale=2}return(0,u.default)(t,[{key:"load",value:function(t){var e=this;return new r.default(function(n){function i(t){t.img&&(t.ready=!0,n())}(0,f.default)(t,function(t){e.w=t.originalWidth,e.h=t.originalHeight,e.img=t.pixels,i(e,e.w,e.h)})})}}]),t}();e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if("function"==typeof e){if(t in r.textures)return void e(r.textures[t]);var n=new Image;/^data:/.test(t)||(n.crossOrigin="anonymous"),n.onload=function(){if(r.textures[t])return void e(r.textures[t]);var i=u.default.extendCanvasToPow2(n,1);r.textures[t]=new s.default(null,{pixels:i,originalWidth:n.width,originalHeight:n.height,width:i.width,height:i.height}),e(r.textures[t])}.bind(this),n.src=t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(109),a=n(147),s=i(a),l=n(393),u=i(l);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i){var o=null;o="LABEL"===i?r(t,e,n,i):s(t,e,n,i);var a=l(o),u=[];return a.forEach(function(t){u=t.isShow?u.concat(Array(Number(t.lettersCount)).fill(1)):u.concat(Array(Number(t.lettersCount)).fill(0))}),new Uint8ClampedArray(u)}function r(t,e,n,i){var o=[],r=!0,s=!1,l=void 0;try{for(var u,c=(0,_.default)(t);!(r=(u=c.next()).done);r=!0){var f=u.value,d=f.geometry.position,h=e.latLngToCenterLocalPixel(d),v=new g.Vector4(h.x,h.y,0,1),p=n.pvMatrix.multiplyVector4(v),m=p.elements[0]/p.elements[3],y=p.elements[1]/p.elements[3],x=(1+m)/2*e.width,b=(1-y)/2*e.height,S=f.style.size/f.fontSize*f.widthSum*e.scale,w=f.style.size/f.fontSize*f.heightSum*e.scale,E=S/2,T=w/2,A={x:x,y:b},P=f.style,I=P.alignment,k=P.verticalAlignment,L=P.angle;o[f.geometryIndex]={leftTop:a({x:x-E+I*E,y:b-T+k*T},A,f.style,i),rightTop:a({x:x+E+I*E,y:b-T+k*T},A,f.style,i),rightBottom:a({x:x+E+I*E,y:b+T+k*T},A,f.style,i),leftBottom:a({x:x-E+I*E,y:b+T+k*T},A,f.style,i),width:S,height:w,angle:L,lettersCount:f.lettersCount,rank:void 0===f.geometry.rank?-1/0:f.geometry.rank,geometryIndex:f.geometryIndex}}}catch(t){s=!0,l=t}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}return o}function a(t,e,n,i){var o=t.x-e.x,r=t.y-e.y,a=new g.Vector4(o,r,0,1),s=0;s="LABEL"===i?n.angle||0:n.rotate||0;var l=(new g.Matrix4).setRotate(-s,0,0,1),u=l.multiplyVector4(a);return"LABEL"===i?{x:u.elements[0]+e.x+n.offset.x,y:u.elements[1]+e.y+n.offset.y}:{x:u.elements[0]+e.x,y:u.elements[1]+e.y}}function s(t,e,n,i){var o=[],r=!0,s=!1,l=void 0;try{for(var u,c=(0,_.default)(t);!(r=(u=c.next()).done);r=!0){var f=u.value,d=f.geometry.position,h=e.latLngToCenterLocalPixel(d),v=new g.Vector4(h.x,h.y,0,1),p=n.pvMatrix.multiplyVector4(v),m=p.elements[0]/p.elements[3],y=p.elements[1]/p.elements[3],x=(1+m)/2*e.width,b=(1-y)/2*e.height,S={x:x,y:b},w=null,E=null;f.labelWidthSum<1?(w=0,E=0):(w=f.style.size/f.fontSize*f.labelWidthSum*e.scale,E=f.style.size*e.scale);var T=f.style.width*e.scale,A=f.style.height*e.scale,P=w/2,I=E/2,k={leftTop:a({x:x-f.style.anchor.x,y:b-f.style.anchor.y},S,f.style,i),rightTop:a({x:x+T-f.style.anchor.x,y:b-f.style.anchor.y},S,f.style,i),rightBottom:a({x:x+T-f.style.anchor.x,y:b+A-f.style.anchor.y},S,f.style,i),leftBottom:a({x:x-f.style.anchor.x,y:b+A-f.style.anchor.y},S,f.style,i)},L=Math.min(k.leftTop.x,k.rightTop.x,k.rightBottom.x,k.leftBottom.x),M=Math.min(k.leftTop.y,k.rightTop.y,k.rightBottom.y,k.leftBottom.y),C=Math.max(k.leftTop.x,k.rightTop.x,k.rightBottom.x,k.leftBottom.x),R=M,N=C,B=Math.max(k.leftTop.y,k.rightTop.y,k.rightBottom.y,k.leftBottom.y),O=L,D=B;if(f.labelWidthSum>1){var z=Math.min(L,C,O,N),V=Math.max(L,C,O,N),F=Math.min(M,R,D,B),U=Math.max(M,R,D,B),Y={x:(z+V)/2,y:(F+U)/2},j={leftTop:{x:Y.x-P+f.offsetToMarkerCenter.x,y:Y.y-I+f.offsetToMarkerCenter.y},rightTop:{x:Y.x+P+f.offsetToMarkerCenter.x,y:Y.y-I+f.offsetToMarkerCenter.y},rightBottom:{x:Y.x+P+f.offsetToMarkerCenter.x,y:Y.y+I+f.offsetToMarkerCenter.y},leftBottom:{x:Y.x-P+f.offsetToMarkerCenter.x,y:Y.y+I+f.offsetToMarkerCenter.y}};L=Math.min(L,j.leftTop.x),M=Math.min(M,j.leftTop.y),C=Math.max(C,j.rightTop.x),R=Math.min(R,j.rightTop.y),N=Math.max(N,j.rightBottom.x),B=Math.max(B,j.rightBottom.y),O=Math.min(O,j.leftBottom.x),D=Math.max(D,j.leftBottom.y)}o[f.geometryIndex]={leftTop:{x:L,y:M},rightTop:{x:C,y:R},rightBottom:{x:N,y:B},leftBottom:{x:O,y:D},width:C-L,height:B-R,angle:0,lettersCount:f.lettersCount,rank:void 0===f.geometry.rank?-1/0:f.geometry.rank,geometryIndex:f.geometryIndex}}}catch(t){s=!0,l=t}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}return o}function l(t){var e=t.map(function(t){return{isShow:!0,lettersCount:t.lettersCount}}),n=!0,i=!1,o=void 0;try{for(var r,a=(0,_.default)(t.entries());!(n=(r=a.next()).done);n=!0){var s=(0,p.default)(r.value,2),l=s[0],c=s[1],f=t.slice(l+1);if(e[c.geometryIndex].isShow){var d=!0,h=!1,v=void 0;try{for(var m,g=(0,_.default)(f);!(d=(m=g.next()).done);d=!0){var y=m.value;if(e[y.geometryIndex].isShow){var x=u(c,y),b=!0;x&&(b=c.rank===y.rank?y.geometryIndex>c.geometryIndex:y.rank>c.rank,b?e[c.geometryIndex].isShow=!1:e[y.geometryIndex].isShow=!1)}}}catch(t){h=!0,v=t}finally{try{!d&&g.return&&g.return()}finally{if(h)throw v}}}}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e}function u(t,e){var n=new y(t),i=new y(e);return n.isCollision(i)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),f=i(c),d=n(1),h=i(d),v=n(30),p=i(v),m=n(27),_=i(m),g=n(94),y=function(){function t(e){(0,f.default)(this,t),this.centerPoint=[(e.leftTop.x+e.rightBottom.x)/2,(e.leftTop.y+e.rightBottom.y)/2],this.halfHeight=e.height/2,this.halfWidth=e.width/2,this.setRotation(e.angle)}return(0,h.default)(t,[{key:"getProjectionRadius",value:function(t){var e=this.dot(t,this.axisX),n=this.dot(t,this.axisY);return this.halfWidth*e+this.halfHeight*n}},{key:"dot",value:function(t,e){return Math.abs(t[0]*e[0]+t[1]*e[1])}},{key:"setRotation",value:function(t){var e=t/180*Math.PI;return this.axisX=[Math.cos(e),-Math.sin(e)],this.axisY=[Math.sin(e),Math.cos(e)],this}},{key:"isCollision",value:function(t){for(var e=[this.centerPoint[0]-t.centerPoint[0],this.centerPoint[1]-t.centerPoint[1]],n=[this.axisX,this.axisY,t.axisX,t.axisY],i=0,o=n.length;i<o;i++)if(this.getProjectionRadius(n[i])+t.getProjectionRadius(n[i])<=this.dot(e,n[i]))return!1;return!0}}]),t}();e.default=o},function(t,e,n){"use strict";function i(t){var e=t.extensions_TMAP.get("WEBGL_debug_renderer_info");return e?{vendor:t.getParameter(e.UNMASKED_VENDOR_WEBGL),renderer:t.getParameter(e.UNMASKED_RENDERER_WEBGL)}:null}Object.defineProperty(e,"__esModule",{value:!0}),e.getGraphicHardwareInfo=i},function(t,e,n){"use strict";function i(t,e,n,i){i=i||1;var o=new r.Matrix4,a=new r.Matrix4;return a.scale(i,i,i),o=o.multiply(e),o=o.multiply(a),o=o.multiply(function(t,e){var n=new r.Matrix4,i=t.x+e.left,o=e.top-t.y;return n.setTranslate(i,o,0),n}(n,t))}function o(t){var e=t.view,n=t.offset,i=t.scale,o=void 0===i?1:i,a=new r.Matrix4;return a.scale(o,o,o).translate(n.x+e.left,e.top-n.y,0),a}Object.defineProperty(e,"__esModule",{value:!0}),e.mixMatrix=i,e.getModelMatrix=o;var r=n(94)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){n(),a(t,e)}function r(t,e){var n={};return e.forEach(function(e){var i=v[e];n[e]=i?i(t,t[e]):t.getParameter(t[e])}),n}function a(t,e){t.blendFuncSeparate(e.BLEND_SRC_RGB,e.BLEND_DST_RGB,e.BLEND_SRC_ALPHA,e.BLEND_DST_ALPHA),(0,c.default)(e).forEach(function(e){var n=(0,l.default)(e,2),i=n[0],o=n[1],r=_[i];r&&r(t,o,t[i])})}Object.defineProperty(e,"__esModule",{value:!0});var s=n(30),l=i(s),u=n(120),c=i(u),f=n(23),d=i(f);e.preserveParameters=o,e.getParameters=r;var h=function(t,e){return t.isEnabled(e)},v={BLEND:h,CULL_FACE:h,DEPTH_TEST:h,DITHER:h,POLYGON_OFFSET_FILL:h,SAMPLE_ALPHA_TO_COVERAGE:h,SAMPLE_COVERAGE:h,SCISSOR_TEST:h,STENCIL_TEST:h,RASTERIZER_DISCARD:h},p=function(t,e,n){return e?t.enable(n):t.disable(n)},m=function(t,e,n){return t.pixelStorei(n,e)},_={BLEND:p,CULL_FACE:p,DEPTH_TEST:p,COLOR_CLEAR_VALUE:function(t,e){return t.clearColor.apply(t,(0,d.default)(e))},VIEWPORT:function(t,e){return t.viewport.apply(t,(0,d.default)(e))},UNPACK_FLIP_Y_WEBGL:m,UNPACK_PREMULTIPLY_ALPHA_WEBGL:m}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i){(i<270&&i>90&&t.getLng()>e.getLng()||i>270&&i<90&&t.getLng()<e.getLng())&&(n.getLng()>=0?t.lng=180:e.lng=-179.9999)}function r(t){var e=D.degreeToRadian(t.getLat()),n=D.degreeToRadian(t.getLng());return new L.Vector4(Math.cos(e)*Math.sin(n),Math.sin(e),Math.cos(e)*Math.cos(n),1)}function a(t){var e=(0,c.default)(t.elements,3),n=e[0],i=e[1],o=e[2],r=Math.asin(i),a=void 0,s=Math.cos(r);return 0===s?a=0:(a=Math.asin(D.clamp(n/s,-1,1)),a=o/s>0?a:Math.PI-a),new B(D.radianToDegree(r),D.radianToDegree(a),!0)}function s(t,e){var n=t.getLat(),i=-t.getLng(),o=l(e);return(new L.Matrix4).translate(0,0,-o).scale(o,o,o).rotate(n,1,0,0).rotate(i,0,1,0)}function l(t){return 256*Math.pow(2,t)/(2*Math.PI)}var u=n(30),c=i(u),f=n(15),d=i(f),h=n(3),v=i(h),p=n(0),m=i(p),_=n(1),g=i(_),y=n(5),x=i(y),b=n(4),S=i(b),w=n(25),E=i(w),T=n(242),A=i(T),P=n(298),I=i(P),k=n(117),L=n(94),M=n(110),C=n(373),R=n(470),N=i(R),B=n(45),O=n(65),D=n(10),z=n(155),V=n(394),F=n(93),U=E.default.tileSize,Y=Math.PI,j=Y/180,G=A.default[1],Z=function(t){function e(t,n){(0,m.default)(this,e);var i=(0,x.default)(this,(e.__proto__||(0,v.default)(e)).call(this));return i._minZoom=t.minZoom||E.default.mainZoom,i._maxZoom=t.maxZoom||E.default.maxZoom,i._minPitch=t.minPitch||E.default.minPitch,i._maxPitch=t.maxPitch||E.default.maxPitch,i._fov=t.fov||.6435011087932844,i.width=t.width||0,i.height=t.height||0,i.zoom=t.zoom||10,i.tileZoom=Math.floor(i._zoom),i._center=B.convert(t.center)||new B(39.908782,116.3974),i.heading=t.heading||0,i._pitch=t.pitch||0,i._roll=t.roll||0,i._scale=t.scale||1,i.viewTransition=t.viewMode===k.VIEW_MODE.SPHERE?1:0,i._boundary=t.boundary||null,i.projection=new V,i.renderEngine=n,(0,d.default)(i,C.easableMixin),i}return(0,S.default)(e,t),(0,g.default)(e,[{key:"_isCameraReady",value:function(){var t=this.renderEngine&&this.renderEngine.camera&&this.renderEngine.camera.resolution;return t&&null!==t.width&&null!==t.height}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"),this._constrain()}},{key:"transitTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._stopEase(),n=(0,d.default)({duration:500,easing:D.ease},n);var i=this.viewTransition,o=t===k.VIEW_MODE.SPHERE?1:0;this._fire("transit_start"),this._ease(function(t){e.viewTransition=D.mix(i,o,t)},function(){e._fire("transit_end")},function(){e.viewTransition=o},n)}},{key:"_constrain",value:function(){if(this._boundary&&!this._boundary.isEmpty()){if(this._unmodify)return void(this._unmodify=!1);var t=this.width,e=this.height,n=this.center,i=t/this._scale,o=e/this._scale,r=this.latLngToCoord(this._boundary.getSouthWest()),a=this.latLngToCoord(this._boundary.getNorthEast()),s=this.latLngToCoord(n),l=[r.x,a.x],u=[a.y,r.y];if(Math.round(l[0])!==Math.round(l[1])&&Math.round(u[0])!==Math.round(u[1])){var c=void 0,f=void 0,d=l&&l[1]-l[0]<i?i/(l[1]-l[0]):0,h=u&&u[1]-u[0]<o?o/(u[1]-u[0]):0,v=Math.max(d,h);if(v){c=d?(l[0]+l[1])/2:s.x,f=h?(u[0]+u[1])/2:s.y;var p=this.coordToLatLng({x:c,y:f});this._unmodify=!0,this.zoom+=this.scaleZoom(v),this.center=p}else if(s.x-i/2<l[0]&&(c=l[0]+i/2),s.x+i/2>l[1]&&(c=l[1]-i/2),s.y-o/2<u[0]&&(f=u[0]+o/2),s.y+o/2>u[1]&&(f=u[1]-o/2),void 0!==c||void 0!==f){var m=this.coordToLatLng({x:void 0!==c?c:s.x,y:void 0!==f?f:s.y});if(m.lat===this._center.lat&&m.lng===this._center.lng)return;this._unmodify=!0,this.center=m}}}}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"calCoordsScale",value:function(t){return this.scrollScale/this.zoomScale(t)}},{key:"latLngToCoord",value:function(t,e){return this.projection.latLngToCoord(t,e||this.zoom)}},{key:"coordToLatLng",value:function(t,e){return this.projection.coordToLatLng(t,e||this.zoom)}},{key:"latLngToCenterLocalPixel",value:function(t){var e=this.latLngToCoord(this.center,this.zoom),n=this.latLngToCoord(t,this.zoom);return new N.default(n.x-e.x,e.y-n.y,n.z-e.z)}},{key:"centerLocalPixelToLatLng",value:function(t){var e=this.latLngToCoord(this.center,this.zoom),n=new O(e.x+t.x,e.y-t.y);return this.coordToLatLng(n,this.zoom)}},{key:"latLngToCenterLocalPixelByDistanceScales",value:function(t,e){var n=e.distanceScales||this.getDistanceScales(),i=e.center||this.center,o=e.offsetMercator,r=new B(t.lat-i.lat,t.lng-i.lng),a=D.clamp(r.lat,-1,1),s=[n.pixelsPerDegree[0],n.pixelsPerDegree[1]+n.pixelsPerDegree2[1]*a],l=new O(r.lng*s[0],r.lat*s[1]);return o&&(l.x+=o.x*e.pixelsPerMeter,l.y+=o.y*e.pixelsPerMeter),l}},{key:"projectionTopLeft",value:function(t){var e=this.latLngToCoord(this.center,t);return new O(e.x-this.width/2,e.y-this.height/2)}},{key:"latLngToWorldCoord",value:function(t){if(this.isSphere){var e=r(t);return s(this.center,this.zoom).multiplyVector4(e)}var n=this.latLngToCenterLocalPixel(t),i=n.x,o=n.y,a=n.z;return new L.Vector4(i,o,a,1)}},{key:"worldCoordToLatLng",value:function(t){if(this.isSphere){return a(s(this.center,this.zoom).invert().multiplyVector4(t))}var e=(0,c.default)(t.elements,2),n=e[0],i=e[1];return this.centerLocalPixelToLatLng(new O(n,i))}},{key:"screenToLatLng",value:function(t){var e=this.renderEngine.camera,n=(0,M.fromScreenToNdc)(t.x,t.y,e.resolution),i=void 0;if(this.isSphere){var o=l(this.zoom),r=(0,M.getSphereCoordsByCustomMatrix)(e.pvMatrix,n,o);if(!r)return null;var a=r.x,s=r.y,u=r.z;i=new L.Vector4(a,s,u,1)}else{var c=(0,M.getZPlaneCoordsByCustomMatrix)(e.pvMatrix,n),f=c.x,d=c.y;i=new L.Vector4(f,d,0,1)}return this.worldCoordToLatLng(i)}},{key:"latLngToScreen",value:function(t){var e=this.latLngToWorldCoord(t),n=this.renderEngine.camera,i=n.pvMatrix,o=n.resolution,r=(0,c.default)((0,M.getNdcCoordsByCustomMatrix)(i,e).elements,2),a=r[0],s=r[1];return(0,M.fromNdcToScreen)(a,s,o)}},{key:"latLngToTileCoord",value:function(t,e){return this.latLngToCoord(t,e||this.zoom).div(U)}},{key:"tileCoordToLatLng",value:function(t,e){return this.coordToLatLng(t.mult(U),e||this.zoom)}},{key:"setLocationAtPoint",value:function(t,e){var n=this.latLngToTileCoord(t),i=this.latLngToTileCoord(this.center),o=this.screenToLatLng(e),r=this.latLngToTileCoord(o),a=r.sub(i),s=n.sub(a);this.center=this.tileCoordToLatLng(s)}},{key:"getBounds",value:function(){if(this.isSphere)return new z(new B(-90,-180),new B(90,180));var t=new z,e=Math.min(this.renderEngine.camera.getFogEdge()[1],1),n=(1-e)/2*this.height,i=this.screenToLatLng(new O(0,n)),r=this.screenToLatLng(new O(this.width,n)),a=this.screenToLatLng(new O(0,this.height)),s=this.screenToLatLng(new O(this.width,this.height));return o(r,i,this.center,this.heading),o(s,a,this.center,this.heading),t.extend(i).extend(r).extend(a).extend(s),t}},{key:"coveringTiles",value:function(t){var e=this.isSphere,n=t.round,i=t.pixelGeo,o=t.minZoom,r=t.maxZoom,a=t.zoom,s=void 0===a?this.zoom:a;s=D.clamp(s,o,r);var l=e?3:n?Math.round(s):Math.floor(s);if(!this.width||!this.height)return[];if(i){return[new I.default(l,0,0,0,U)]}return e?this.coveringTilesOnSphere(l,t):this.coveringTilesOnPlane(l,1)}},{key:"coveringTilesOnSphere",value:function(t){var e=I.default.coverAll(t);return this._sortTiles(e,U)}},{key:"coveringTilesOnPlane",value:function(t,e){e=e||1;var n=this.calCoordsScale(t),i=this.renderEngine.camera.getBounds(n);D.forIn(i,function(t,n){n.x*=e,n.y*=e});var o=this.latLngToCoord(this.center,t),r=[{column:~~(o.x+i.leftTop.x)/U,row:~~(o.y-i.leftTop.y)/U},{column:~~(o.x+i.rightTop.x)/U,row:~~(o.y-i.rightTop.y)/U},{column:~~(o.x+i.rightBottom.x)/U,row:~~(o.y-i.rightBottom.y)/U},{column:~~(o.x+i.leftBottom.x)/U,row:~~(o.y-i.leftBottom.y)/U}],a=I.default.cover(t,r);return this._sortTiles(a,U)}},{key:"_sortTiles",value:function(t,e){for(var n=0,i=t.length;n<i;n++){var o=t[n],r=this.projectionTopLeft(o.z),a=o.x*e-r.x+e/2,s=o.y*e-r.y+e/2,l=Math.pow(a-this.centerPoint.x,2)+Math.pow(s-this.centerPoint.y,2);o.ds=Math.sqrt(l)}return D.bubbleSort(t,"ds"),t}},{key:"getDistanceRatio",value:function(t){var e=256*this.zoomScale(t||this.zoom),n=this.center;return e/(G*Math.abs(Math.cos(n.lat*j)))}},{key:"getDistanceScales",value:function(t){var e=this.center,n=e.lat,i=this.zoomScale(t||this.zoom),o={},r=U*i,a=Math.cos(n*j),s=r/360,l=s/a,u=r/G/a;o.pixelsPerMeter=[u,u,u],o.metersPerPixel=[1/u,1/u,1/u],o.pixelsPerDegree=[s,l,u],o.degreesPerPixel=[1/s,1/l,1/u];var c=j*Math.tan(n*j)/a,f=s*c/2,d=r/G*c,h=d/l*u;return o.pixelsPerDegree2=[0,f,d],o.pixelsPerMeter2=[h,0,h],o}},{key:"getInput",value:function(){return{height:this.height,width:this.width,center:this._center,zoom:this._zoom,heading:this._heading,pitch:this._pitch}}},{key:"isSphere",get:function(){return this.viewTransition>0}},{key:"size",get:function(){return new O(this.width,this.height)}},{key:"minZoom",get:function(){return this._minZoom},set:function(t){t=Math.max(t,E.default.minZoom),this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){t=Math.min(t,E.default.maxZoom),this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(t){t=Math.min(t,E.default.maxPitch),this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this.renderEngine&&this._zoom!==e&&this.renderEngine.camera.updateVersion(),this._zoom=e,this._fire("zoom_changed",{zoom:this._zoom},!0),this._scrollScale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._fire("input_change"),this._constrain())}},{key:"scrollScale",get:function(){return this._scrollScale}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this.renderEngine&&this._center&&t&&(this._center.lat!==t.lat||this._center.lng!==t.lng)&&this.renderEngine.camera.updateVersion(),this._center=t,this._fire("center_changed",{center:this._center},!0),this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"),this._constrain())}},{key:"centerPoint",get:function(){return new O(this.width/2,this.height/2)}},{key:"heading",get:function(){return this._heading/Math.PI*180},set:function(t){if(!isNaN(t)){var e=D.wrap(t,0,360)*Math.PI/180;this._heading!==e&&(this._heading=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"))}}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){if(!isNaN(t)){var e=D.clamp(t,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==e&&(this._pitch=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"))}}},{key:"roll",get:function(){return this._roll/Math.PI*180},set:function(t){if(!isNaN(t)){var e=D.clamp(t,-90,90)/180*Math.PI;this._roll!==e&&(this._roll=e,this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"))}}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._fov=t/180*Math.PI)}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale!==t&&(this._scale=t,this.renderEngine.camera.setScale(t),this._fire("scale_changed",{scale:this._scale},!0),this._isCameraReady()&&this._fire("bounds_changed",{bounds:this.getBounds()},!0),this._fire("input_change"),this._constrain())}},{key:"boundary",get:function(){return this._boundary||null},set:function(t){t instanceof z&&(this._boundary=t,this._constrain())}}]),e}(F);t.exports=Z},function(t,e,n){"use strict";var i=n(30),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.create=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t},e.clone=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.fromValues=function(t,e,n){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=n,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},e.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},e.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},e.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+i*i+o*o)},e.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return n*n+i*i+o*o},e.length=function(t){var e=(0,o.default)(t,3),n=e[0],i=e[1],r=e[2];return Math.sqrt(n*n+i*i+r*r)},e.squaredLength=function(t){var e=(0,o.default)(t,3),n=e[0],i=e[1],r=e[2];return n*n+i*i+r*r},e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=function(t,e){var n=(0,o.default)(e,3),i=n[0],r=n[1],a=n[2],s=i*i+r*r+a*a;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},e.cross=function(t,e,n){var i=(0,o.default)(e,3),r=i[0],a=i[1],s=i[2],l=(0,o.default)(n,3),u=l[0],c=l[1],f=l[2];return t[0]=a*f-s*c,t[1]=s*u-r*f,t[2]=r*c-a*u,t},e.lerp=function(t,e,n,i){var r=(0,o.default)(e,3),a=r[0],s=r[1],l=r[2];return t[0]=a+i*(n[0]-a),t[1]=s+i*(n[1]-s),t[2]=l+i*(n[2]-l),t},e.hermite=function(t,e,n,i,o,r){var a=r*r,s=a*(2*r-3)+1,l=a*(r-2)+r,u=a*(r-1),c=a*(3-2*r);return t[0]=e[0]*s+n[0]*l+i[0]*u+o[0]*c,t[1]=e[1]*s+n[1]*l+i[1]*u+o[1]*c,t[2]=e[2]*s+n[2]*l+i[2]*u+o[2]*c,t},e.bezier=function(t,e,n,i,o,r){var a=1-r,s=a*a,l=r*r,u=s*a,c=3*r*s,f=3*l*a,d=l*r;return t[0]=e[0]*u+n[0]*c+i[0]*f+o[0]*d,t[1]=e[1]*u+n[1]*c+i[1]*f+o[1]*d,t[2]=e[2]*u+n[2]*c+i[2]*f+o[2]*d,t},e.random=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,i=2*Math.random()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t},e.transformMat4=function(t,e,n){var i=(0,o.default)(e,3),r=i[0],a=i[1],s=i[2],l=n[3]*r+n[7]*a+n[11]*s+n[15]||1;return t[0]=(n[0]*r+n[4]*a+n[8]*s+n[12])/l,t[1]=(n[1]*r+n[5]*a+n[9]*s+n[13])/l,t[2]=(n[2]*r+n[6]*a+n[10]*s+n[14])/l,t},e.transformMat3=function(t,e,n){var i=(0,o.default)(e,3),r=i[0],a=i[1],s=i[2];return t[0]=r*n[0]+a*n[3]+s*n[6],t[1]=r*n[1]+a*n[4]+s*n[7],t[2]=r*n[2]+a*n[5]+s*n[8],t},e.transformQuat=function(t,e,n){var i=(0,o.default)(e,3),r=i[0],a=i[1],s=i[2],l=(0,o.default)(n,4),u=l[0],c=l[1],f=l[2],d=l[3],h=d*r+c*s-f*a,v=d*a+f*r-u*s,p=d*s+u*a-c*r,m=-u*r-c*a-f*s;return t[0]=h*d+m*-u+v*-f-p*-c,t[1]=v*d+m*-c+p*-u-h*-f,t[2]=p*d+m*-f+h*-c-v*-u,t},e.rotateX=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0],r[1]=o[1]*Math.cos(i)-o[2]*Math.sin(i),r[2]=o[1]*Math.sin(i)+o[2]*Math.cos(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},e.rotateY=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[2]*Math.sin(i)+o[0]*Math.cos(i),r[1]=o[1],r[2]=o[2]*Math.cos(i)-o[0]*Math.sin(i),t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},e.rotateZ=function(t,e,n,i){var o=[],r=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],r[0]=o[0]*Math.cos(i)-o[1]*Math.sin(i),r[1]=o[0]*Math.sin(i)+o[1]*Math.cos(i),r[2]=o[2],t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},e.forEach=function(t,e,n,i,o,r){var a=void 0,s=void 0;for(e||(e=3),n||(n=0),s=i?Math.min(i*e+n,t.length):t.length,a=n;a<s;a+=e)vec[0]=t[a],vec[1]=t[a+1],vec[2]=t[a+2],o(vec,vec,r),t[a]=vec[0],t[a+1]=vec[1],t[a+2]=vec[2];return t},e.angle=function(t,e){var n=fromValues(t[0],t[1],t[2]),i=fromValues(e[0],e[1],e[2]);normalize(n,n),normalize(i,i);var o=dot(n,i);return o>1?0:o<-1?Math.PI:Math.acos(o)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.equals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new s.default(function(n,i){var o=window.URL.createObjectURL(t),r=new Image(e.width,e.height);r.src=o,r.onload=function(){n(r)},r.onerror=function(){i(new Error("blob to image failed"))}})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.width||t.width,i=e.height||t.height,o=document.createElement("canvas");return o.width=n,o.height=i,o.getContext("2d").drawImage(t,0,0,n,i),o}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new s.default(function(n,i){var o=new Image(e.width,e.height);o.src=t.toDataURL("image/png"),o.onload=function(){n(o)},o.onerror=function(){i()}})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(21),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.blobToImage=i,e.imageToCanvas=o,e.canvasToImage=r},,,,,function(t,e,n){n(943),n(882),n(884),n(883),n(886),n(888),n(893),n(887),n(885),n(895),n(894),n(890),n(891),n(889),n(881),n(892),n(896),n(897),n(848),n(850),n(849),n(899),n(898),n(869),n(879),n(880),n(870),n(871),n(872),n(873),n(874),n(875),n(876),n(877),n(878),n(852),n(853),n(854),n(855),n(856),n(857),n(858),n(859),n(860),n(861),n(862),n(863),n(864),n(865),n(866),n(867),n(868),n(930),n(935),n(942),n(933),n(925),n(926),n(931),n(936),n(938),n(921),n(922),n(923),n(924),n(927),n(928),n(929),n(932),n(934),n(937),n(939),n(940),n(941),n(843),n(845),n(844),n(847),n(846),n(832),n(830),n(836),n(833),n(839),n(841),n(829),n(835),n(826),n(840),n(824),n(838),n(837),n(831),n(834),n(823),n(825),n(828),n(827),n(842),n(442),n(914),n(542),n(919),n(543),n(915),n(916),n(917),n(918),n(541),n(851),n(920),n(955),n(956),n(944),n(945),n(950),n(953),n(954),n(948),n(951),n(949),n(952),n(946),n(947),n(900),n(901),n(902),n(903),n(904),n(907),n(905),n(906),n(908),n(909),n(910),n(911),n(913),n(912),t.exports=n(84)},function(t,e,n){n(957),t.exports=n(84).Array.flatMap},function(t,e,n){n(958),t.exports=n(84).Array.includes},function(t,e,n){n(959),t.exports=n(84).Object.entries},function(t,e,n){n(960),t.exports=n(84).Object.getOwnPropertyDescriptors},function(t,e,n){n(961),t.exports=n(84).Object.values},function(t,e,n){"use strict";n(541),n(962),t.exports=n(84).Promise.finally},function(t,e,n){n(963),t.exports=n(84).String.padEnd},function(t,e,n){n(964),t.exports=n(84).String.padStart},function(t,e,n){n(966),t.exports=n(84).String.trimRight},function(t,e,n){n(965),t.exports=n(84).String.trimLeft},function(t,e,n){n(967),t.exports=n(440).f("asyncIterator")},,,,,,,,,,,,,function(t,e,n){var i=n(53),o=n(346),r=n(69)("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(51),o=Date.prototype.getTime,r=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=r.call(new Date(-5e13-1))})||!i(function(){r.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:r},function(t,e,n){"use strict";var i=n(50),o=n(249);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(i(this),"number"!=t)}},function(t,e,n){var i=n(266),o=n(348),r=n(317);t.exports=function(t){var e=i(t),n=o.f;if(n)for(var a,s=n(t),l=r.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,n){"use strict";function i(t,e,n,u,c,f,d,h){for(var v,p,m=c,_=0,g=!!d&&s(d,h,3);_<u;){if(_ in n){if(v=g?g(n[_],_,e):n[_],p=!1,r(v)&&(p=v[l],p=void 0!==p?!!p:o(v)),p&&f>0)m=i(t,e,v,a(v.length),m,f-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=v}m++}_++}return m}var o=n(346),r=n(53),a=n(77),s=n(227),l=n(69)("isConcatSpreadable");t.exports=i},function(t,e,n){t.exports=n(350)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(430),o=Math.pow,r=o(2,-52),a=o(2,-23),s=o(2,127)*(2-a),l=o(2,-126),u=function(t){return t+1/r-1/r};t.exports=Math.fround||function(t){var e,n,o=Math.abs(t),c=i(t);return o<l?c*u(o/l/a)*l*a:(e=(1+a/r)*o,n=e-(e-o),n>s||n!=n?c*(1/0):c*n)}},function(t,e,n){var i=n(52),o=n(438).set,r=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(239)(a);t.exports=function(){var t,e,n,u=function(){var i,o;for(l&&(i=a.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(u)};else if(!r||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){o.call(i,u)};else{var f=!0,d=document.createTextNode("");new r(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(9);i(i.P,"Array",{copyWithin:n(514)}),n(261)("copyWithin")},function(t,e,n){"use strict";var i=n(9),o=n(226)(4);i(i.P+i.F*!n(220)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,n){var i=n(9);i(i.P,"Array",{fill:n(419)}),n(261)("fill")},function(t,e,n){"use strict";var i=n(9),o=n(226)(2);i(i.P+i.F*!n(220)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(9),o=n(226)(6),r="findIndex",a=!0;r in[]&&Array(1)[r](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(261)(r)},function(t,e,n){"use strict";var i=n(9),o=n(226)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),i(i.P+i.F*r,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(261)("find")},function(t,e,n){"use strict";var i=n(9),o=n(226)(0),r=n(220)([].forEach,!0);i(i.P+i.F*!r,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(227),o=n(9),r=n(116),a=n(523),s=n(426),l=n(77),u=n(420),c=n(441);o(o.S+o.F*!n(347)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,d=r(t),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,m=void 0!==p,_=0,g=c(d);if(m&&(p=i(p,v>2?arguments[2]:void 0,2)),void 0==g||h==Array&&s(g))for(e=l(d.length),n=new h(e);e>_;_++)u(n,_,m?p(d[_],_):d[_]);else for(f=g.call(d),n=new h;!(o=f.next()).done;_++)u(n,_,m?a(f,p,[o.value,_],!0):o.value);return n.length=_,n}})},function(t,e,n){"use strict";var i=n(9),o=n(341)(!1),r=[].indexOf,a=!!r&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!n(220)(r)),"Array",{indexOf:function(t){return a?r.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,e,n){var i=n(9);i(i.S,"Array",{isArray:n(346)})},function(t,e,n){"use strict";var i=n(9),o=n(152),r=[].join;i(i.P+i.F*(n(316)!=Object||!n(220)(r)),"Array",{join:function(t){return r.call(o(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var i=n(9),o=n(152),r=n(230),a=n(77),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(220)(s)),"Array",{lastIndexOf:function(t){if(l)return s.apply(this,arguments)||0;var e=o(this),n=a(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,r(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){"use strict";var i=n(9),o=n(226)(1);i(i.P+i.F*!n(220)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(9),o=n(420);i(i.S+i.F*n(51)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(9),o=n(515);i(i.P+i.F*!n(220)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(9),o=n(515);i(i.P+i.F*!n(220)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var i=n(9),o=n(424),r=n(239),a=n(268),s=n(77),l=[].slice;i(i.P+i.F*n(51)(function(){o&&l.call(o)}),"Array",{slice:function(t,e){var n=s(this.length),i=r(this);if(e=void 0===e?n:e,"Array"==i)return l.call(this,t,e);for(var o=a(t,n),u=a(e,n),c=s(u-o),f=new Array(c),d=0;d<c;d++)f[d]="String"==i?this.charAt(o+d):this[o+d];return f}})},function(t,e,n){"use strict";var i=n(9),o=n(226)(3);i(i.P+i.F*!n(220)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(9),o=n(225),r=n(116),a=n(51),s=[].sort,l=[1,2,3];i(i.P+i.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!n(220)(s)),"Array",{sort:function(t){return void 0===t?s.call(r(this)):s.call(r(this),o(t))}})},function(t,e,n){n(285)("Array")},function(t,e,n){var i=n(9);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){var i=n(9),o=n(815);i(i.P+i.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(t,e,n){"use strict";var i=n(9),o=n(116),r=n(249);i(i.P+i.F*n(51)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=o(this),n=r(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var i=n(69)("toPrimitive"),o=Date.prototype;i in o||n(151)(o,i,n(816))},function(t,e,n){var i=Date.prototype,o=i.toString,r=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(142)(i,"toString",function(){var t=r.call(this);return t===t?o.call(this):"Invalid Date"})},function(t,e,n){var i=n(9);i(i.P,"Function",{bind:n(517)})},function(t,e,n){"use strict";var i=n(53),o=n(265),r=n(69)("hasInstance"),a=Function.prototype;r in a||n(92).f(a,r,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(92).f,o=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in o||n(91)&&i(o,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var i=n(518),o=n(270);t.exports=n(342)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(o(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(9),o=n(526),r=Math.sqrt,a=Math.acosh;i(i.S+i.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+r(t-1)*r(t+1))}})},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var o=n(9),r=Math.asinh;o(o.S+o.F*!(r&&1/r(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(9),o=Math.atanh;i(i.S+i.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(9),o=n(430);i(i.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var i=n(9);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(9),o=Math.exp;i(i.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,n){var i=n(9),o=n(429);i(i.S+i.F*(o!=Math.expm1),"Math",{expm1:o})},function(t,e,n){var i=n(9);i(i.S,"Math",{fround:n(820)})},function(t,e,n){var i=n(9),o=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,r=0,a=0,s=arguments.length,l=0;a<s;)n=o(arguments[a++]),l<n?(i=l/n,r=r*i*i+1,l=n):n>0?(i=n/l,r+=i*i):r+=n;return l===1/0?1/0:l*Math.sqrt(r)}})},function(t,e,n){var i=n(9),o=Math.imul;i(i.S+i.F*n(51)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var n=+t,i=+e,o=65535&n,r=65535&i;return 0|o*r+((65535&n>>>16)*r+o*(65535&i>>>16)<<16>>>0)}})},function(t,e,n){var i=n(9);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var i=n(9);i(i.S,"Math",{log1p:n(526)})},function(t,e,n){var i=n(9);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(9);i(i.S,"Math",{sign:n(430)})},function(t,e,n){var i=n(9),o=n(429),r=Math.exp;i(i.S+i.F*n(51)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(r(t-1)-r(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(9),o=n(429),r=Math.exp;i(i.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(r(t)+r(-t))}})},function(t,e,n){var i=n(9);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){"use strict";var i=n(52),o=n(150),r=n(239),a=n(425),s=n(249),l=n(51),u=n(264).f,c=n(228).f,f=n(92).f,d=n(287).trim,h=i.Number,v=h,p=h.prototype,m="Number"==r(n(263)(p)),_="trim"in String.prototype,g=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=_?e.trim():d(e,3);var n,i,o,r=e.charCodeAt(0);if(43===r||45===r){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(var a,l=e.slice(2),u=0,c=l.length;u<c;u++)if((a=l.charCodeAt(u))<48||a>o)return NaN;return parseInt(l,i)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(m?l(function(){p.valueOf.call(n)}):"Number"!=r(n))?a(new v(g(e)),n,h):g(e)};for(var y,x=n(91)?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;x.length>b;b++)o(v,y=x[b])&&!o(h,y)&&f(h,y,c(v,y));h.prototype=p,p.constructor=h,n(142)(i,"Number",h)}},function(t,e,n){var i=n(9);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(9),o=n(52).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,n){var i=n(9);i(i.S,"Number",{isInteger:n(522)})},function(t,e,n){var i=n(9);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(9),o=n(522),r=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return o(t)&&r(t)<=9007199254740991}})},function(t,e,n){var i=n(9);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(9);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(9),o=n(534);i(i.S+i.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(t,e,n){var i=n(9),o=n(535);i(i.S+i.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(t,e,n){"use strict";var i=n(9),o=n(230),r=n(513),a=n(436),s=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*u[n],u[n]=i%1e7,i=l(i/1e7)},d=function(t){for(var e=6,n=0;--e>=0;)n+=u[e],u[e]=l(n/t),n=n%t*1e7},h=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var n=String(u[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},v=function(t,e,n){return 0===e?n:e%2==1?v(t,e-1,n*t):v(t*t,e/2,n)},p=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(51)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,i,s,l=r(this,c),u=o(t),m="",_="0";if(u<0||u>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(e=p(l*v(2,69,1))-69,n=e<0?l*v(2,-e,1):l/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),i=u;i>=7;)f(1e7,0),i-=7;for(f(v(10,i,1),0),i=e-1;i>=23;)d(1<<23),i-=23;d(1<<i),f(1,1),d(2),_=h()}else f(0,n),f(1<<-e,0),_=h()+a.call("0",u);return u>0?(s=_.length,_=m+(s<=u?"0."+a.call("0",u-s)+_:_.slice(0,s-u)+"."+_.slice(s-u))):_=m+_,_}})},function(t,e,n){"use strict";var i=n(9),o=n(51),r=n(513),a=1..toPrecision;i(i.P+i.F*(o(function(){return"1"!==a.call(1,void 0)})||!o(function(){a.call({})})),"Number",{toPrecision:function(t){var e=r(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var i=n(9);i(i.S+i.F,"Object",{assign:n(528)})},function(t,e,n){var i=n(9);i(i.S,"Object",{create:n(263)})},function(t,e,n){var i=n(9);i(i.S+i.F*!n(91),"Object",{defineProperties:n(529)})},function(t,e,n){var i=n(9);i(i.S+i.F*!n(91),"Object",{defineProperty:n(92).f})},function(t,e,n){var i=n(53),o=n(248).onFreeze;n(229)("freeze",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(152),o=n(228).f;n(229)("getOwnPropertyDescriptor",function(){return function(t,e){return o(i(t),e)}})},function(t,e,n){n(229)("getOwnPropertyNames",function(){return n(530).f})},function(t,e,n){var i=n(116),o=n(265);n(229)("getPrototypeOf",function(){return function(t){return o(i(t))}})},function(t,e,n){var i=n(53);n(229)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(53);n(229)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(53);n(229)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(9);i(i.S,"Object",{is:n(537)})},function(t,e,n){var i=n(116),o=n(266);n(229)("keys",function(){return function(t){return o(i(t))}})},function(t,e,n){var i=n(53),o=n(248).onFreeze;n(229)("preventExtensions",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(53),o=n(248).onFreeze;n(229)("seal",function(t){return function(e){return t&&i(e)?t(o(e)):e}})},function(t,e,n){var i=n(9);i(i.S,"Object",{setPrototypeOf:n(432).set})},function(t,e,n){"use strict";var i=n(315),o={};o[n(69)("toStringTag")]="z",o+""!="[object z]"&&n(142)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(9),o=n(534);i(i.G+i.F*(parseFloat!=o),{parseFloat:o})},function(t,e,n){var i=n(9),o=n(535);i(i.G+i.F*(parseInt!=o),{parseInt:o})},function(t,e,n){var i=n(9),o=n(225),r=n(50),a=(n(52).Reflect||{}).apply,s=Function.apply;i(i.S+i.F*!n(51)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var i=o(t),l=r(n);return a?a(i,e,l):s.call(i,e,l)}})},function(t,e,n){var i=n(9),o=n(263),r=n(225),a=n(50),s=n(53),l=n(51),u=n(517),c=(n(52).Reflect||{}).construct,f=l(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),d=!l(function(){c(function(){})});i(i.S+i.F*(f||d),"Reflect",{construct:function(t,e){r(t),a(e);var n=arguments.length<3?t:r(arguments[2]);if(d&&!f)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(u.apply(t,i))}var l=n.prototype,h=o(s(l)?l:Object.prototype),v=Function.apply.call(t,h,e);return s(v)?v:h}})},function(t,e,n){var i=n(92),o=n(9),r=n(50),a=n(249);o(o.S+o.F*n(51)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){r(t),e=a(e,!0),r(n);try{return i.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var i=n(9),o=n(228).f,r=n(50);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=o(r(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(9),o=n(50),r=function(t){this._t=o(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(524)(r,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new r(t)}})},function(t,e,n){var i=n(228),o=n(9),r=n(50);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(r(t),e)}})},function(t,e,n){var i=n(9),o=n(265),r=n(50);i(i.S,"Reflect",{getPrototypeOf:function(t){return o(r(t))}})},function(t,e,n){function i(t,e){var n,s,c=arguments.length<3?t:arguments[2];return u(t)===c?t[e]:(n=o.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:l(s=r(t))?i(s,e,c):void 0}var o=n(228),r=n(265),a=n(150),s=n(9),l=n(53),u=n(50);s(s.S,"Reflect",{get:i})},function(t,e,n){var i=n(9);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(9),o=n(50),r=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return o(t),!r||r(t)}})},function(t,e,n){var i=n(9);i(i.S,"Reflect",{ownKeys:n(533)})},function(t,e,n){var i=n(9),o=n(50),r=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){o(t);try{return r&&r(t),!0}catch(t){return!1}}})},function(t,e,n){var i=n(9),o=n(432);o&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){function i(t,e,n){var l,d,h=arguments.length<4?t:arguments[3],v=r.f(c(t),e);if(!v){if(f(d=a(t)))return i(d,e,n,h);v=u(0)}if(s(v,"value")){if(!1===v.writable||!f(h))return!1;if(l=r.f(h,e)){if(l.get||l.set||!1===l.writable)return!1;l.value=n,o.f(h,e,l)}else o.f(h,e,u(0,n));return!0}return void 0!==v.set&&(v.set.call(h,n),!0)}var o=n(92),r=n(228),a=n(265),s=n(150),l=n(9),u=n(267),c=n(50),f=n(53);l(l.S,"Reflect",{set:i})},function(t,e,n){var i=n(52),o=n(425),r=n(92).f,a=n(264).f,s=n(427),l=n(344),u=i.RegExp,c=u,f=u.prototype,d=/a/g,h=/a/g,v=new u(d)!==d;if(n(91)&&(!v||n(51)(function(){return h[n(69)("match")]=!1,u(d)!=d||u(h)==h||"/a/i"!=u(d,"i")}))){u=function(t,e){var n=this instanceof u,i=s(t),r=void 0===e;return!n&&i&&t.constructor===u&&r?t:o(v?new c(i&&!r?t.source:t,e):c((i=t instanceof u)?t.source:t,i&&r?l.call(t):e),n?this:f,u)};for(var p=a(c),m=0;p.length>m;)!function(t){t in u||r(u,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})}(p[m++]);f.constructor=u,u.prototype=f,n(142)(i,"RegExp",u)}n(285)("RegExp")},function(t,e,n){"use strict";var i=n(50),o=n(77),r=n(418),a=n(349);n(343)("match",1,function(t,e,n,s){return[function(n){var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=s(n,t,this);if(e.done)return e.value;var l=i(t),u=String(this);if(!l.global)return a(l,u);var c=l.unicode;l.lastIndex=0;for(var f,d=[],h=0;null!==(f=a(l,u));){var v=String(f[0]);d[h]=v,""===v&&(l.lastIndex=r(u,o(l.lastIndex),c)),h++}return 0===h?null:d}]})},function(t,e,n){"use strict";var i=n(50),o=n(116),r=n(77),a=n(230),s=n(418),l=n(349),u=Math.max,c=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};n(343)("replace",2,function(t,e,n,p){function m(t,e,i,r,a,s){var l=i+t.length,u=r.length,c=h;return void 0!==a&&(a=o(a),c=d),n.call(s,c,function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":s=a[o.slice(1,-1)];break;default:var c=+o;if(0===c)return n;if(c>u){var d=f(c/10);return 0===d?n:d<=u?void 0===r[d-1]?o.charAt(1):r[d-1]+o.charAt(1):n}s=r[c-1]}return void 0===s?"":s})}return[function(i,o){var r=t(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,r,o):n.call(String(r),i,o)},function(t,e){var o=p(n,t,this,e);if(o.done)return o.value;var f=i(t),d=String(this),h="function"==typeof e;h||(e=String(e));var _=f.global;if(_){var g=f.unicode;f.lastIndex=0}for(var y=[];;){var x=l(f,d);if(null===x)break;if(y.push(x),!_)break;""===String(x[0])&&(f.lastIndex=s(d,r(f.lastIndex),g))}for(var b="",S=0,w=0;w<y.length;w++){x=y[w];for(var E=String(x[0]),T=u(c(a(x.index),d.length),0),A=[],P=1;P<x.length;P++)A.push(v(x[P]));var I=x.groups;if(h){var k=[E].concat(A,T,d);void 0!==I&&k.push(I);var L=String(e.apply(void 0,k))}else L=m(E,d,T,A,I,e);T>=S&&(b+=d.slice(S,T)+L,S=T+E.length)}return b+d.slice(S)}]})},function(t,e,n){"use strict";var i=n(50),o=n(537),r=n(349);n(343)("search",1,function(t,e,n,a){return[function(n){var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=i(t),l=String(this),u=s.lastIndex;o(u,0)||(s.lastIndex=0);var c=r(s,l);return o(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]})},function(t,e,n){"use strict";var i=n(427),o=n(50),r=n(318),a=n(418),s=n(77),l=n(349),u=n(431),c=n(51),f=Math.min,d=[].push,h="length",v=!c(function(){RegExp(4294967295,"y")});n(343)("split",2,function(t,e,n,c){var p;return p="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(o,t,e);for(var r,a,s,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=void 0===e?4294967295:e>>>0,p=new RegExp(t.source,c+"g");(r=u.call(p,o))&&!((a=p.lastIndex)>f&&(l.push(o.slice(f,r.index)),r[h]>1&&r.index<o[h]&&d.apply(l,r.slice(1)),s=r[0][h],f=a,l[h]>=v));)p.lastIndex===r.index&&p.lastIndex++;return f===o[h]?!s&&p.test("")||l.push(""):l.push(o.slice(f)),l[h]>v?l.slice(0,v):l}:"0".split(void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var o=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,o,i):p.call(String(o),n,i)},function(t,e){var i=c(p,t,this,e,p!==n);if(i.done)return i.value;var u=o(t),d=String(this),h=r(u,RegExp),m=u.unicode,_=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(v?"y":"g"),g=new h(v?u:"^(?:"+u.source+")",_),y=void 0===e?4294967295:e>>>0;if(0===y)return[];if(0===d.length)return null===l(g,d)?[d]:[];for(var x=0,b=0,S=[];b<d.length;){g.lastIndex=v?b:0;var w,E=l(g,v?d:d.slice(b));if(null===E||(w=f(s(g.lastIndex+(v?0:b)),d.length))===x)b=a(d,b,m);else{if(S.push(d.slice(x,b)),S.length===y)return S;for(var T=1;T<=E.length-1;T++)if(S.push(E[T]),S.length===y)return S;b=x=w}}return S.push(d.slice(x)),S}]})},function(t,e,n){"use strict";n(543);var i=n(50),o=n(344),r=n(91),a=/./.toString,s=function(t){n(142)(RegExp.prototype,"toString",t,!0)};n(51)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?o.call(t):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(t,e,n){"use strict";var i=n(518),o=n(270);t.exports=n(342)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(o(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";n(143)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(143)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(143)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(143)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";var i=n(9),o=n(434)(!1);i(i.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var i=n(9),o=n(77),r=n(435),a="".endsWith;i(i.P+i.F*n(423)("endsWith"),"String",{endsWith:function(t){var e=r(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,i=o(e.length),s=void 0===n?i:Math.min(o(n),i),l=String(t);return a?a.call(e,l,s):e.slice(s-l.length,s)===l}})},function(t,e,n){"use strict";n(143)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(143)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(143)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){var i=n(9),o=n(268),r=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,a=0;i>a;){if(e=+arguments[a++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?r(e):r(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var i=n(9),o=n(435);i(i.P+i.F*n(423)("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";n(143)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";var i=n(434)(!0);n(428)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";n(143)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){var i=n(9),o=n(152),r=n(77);i(i.S,"String",{raw:function(t){for(var e=o(t.raw),n=r(e.length),i=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<i&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){var i=n(9);i(i.P,"String",{repeat:n(436)})},function(t,e,n){"use strict";n(143)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";var i=n(9),o=n(77),r=n(435),a="".startsWith;i(i.P+i.F*n(423)("startsWith"),"String",{startsWith:function(t){var e=r(this,t,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(143)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(143)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(143)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){"use strict";n(287)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(52),o=n(150),r=n(91),a=n(9),s=n(142),l=n(248).KEY,u=n(51),c=n(350),f=n(286),d=n(269),h=n(69),v=n(440),p=n(540),m=n(817),_=n(346),g=n(50),y=n(53),x=n(116),b=n(152),S=n(249),w=n(267),E=n(263),T=n(530),A=n(228),P=n(348),I=n(92),k=n(266),L=A.f,M=I.f,C=T.f,R=i.Symbol,N=i.JSON,B=N&&N.stringify,O=h("_hidden"),D=h("toPrimitive"),z={}.propertyIsEnumerable,V=c("symbol-registry"),F=c("symbols"),U=c("op-symbols"),Y=Object.prototype,j="function"==typeof R&&!!P.f,G=i.QObject,Z=!G||!G.prototype||!G.prototype.findChild,H=r&&u(function(){return 7!=E(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=L(Y,e);i&&delete Y[e],M(t,e,n),i&&t!==Y&&M(Y,e,i)}:M,W=function(t){var e=F[t]=E(R.prototype);return e._k=t,e},X=j&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},Q=function(t,e,n){return t===Y&&Q(U,e,n),g(t),e=S(e,!0),g(n),o(F,e)?(n.enumerable?(o(t,O)&&t[O][e]&&(t[O][e]=!1),n=E(n,{enumerable:w(0,!1)})):(o(t,O)||M(t,O,w(1,{})),t[O][e]=!0),H(t,e,n)):M(t,e,n)},q=function(t,e){g(t);for(var n,i=m(e=b(e)),o=0,r=i.length;r>o;)Q(t,n=i[o++],e[n]);return t},J=function(t,e){return void 0===e?E(t):q(E(t),e)},K=function(t){var e=z.call(this,t=S(t,!0));return!(this===Y&&o(F,t)&&!o(U,t))&&(!(e||!o(this,t)||!o(F,t)||o(this,O)&&this[O][t])||e)},$=function(t,e){if(t=b(t),e=S(e,!0),t!==Y||!o(F,e)||o(U,e)){var n=L(t,e);return!n||!o(F,e)||o(t,O)&&t[O][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=C(b(t)),i=[],r=0;n.length>r;)o(F,e=n[r++])||e==O||e==l||i.push(e);return i},et=function(t){for(var e,n=t===Y,i=C(n?U:b(t)),r=[],a=0;i.length>a;)!o(F,e=i[a++])||n&&!o(Y,e)||r.push(F[e]);return r};j||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===Y&&e.call(U,n),o(this,O)&&o(this[O],t)&&(this[O][t]=!1),H(this,t,w(1,n))};return r&&Z&&H(Y,t,{configurable:!0,set:e}),W(t)},s(R.prototype,"toString",function(){return this._k}),A.f=$,I.f=Q,n(264).f=T.f=tt,n(317).f=K,P.f=et,r&&!n(262)&&s(Y,"propertyIsEnumerable",K,!0),v.f=function(t){return W(h(t))}),a(a.G+a.W+a.F*!j,{Symbol:R});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)h(nt[it++]);for(var ot=k(h.store),rt=0;ot.length>rt;)p(ot[rt++]);a(a.S+a.F*!j,"Symbol",{for:function(t){return o(V,t+="")?V[t]:V[t]=R(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in V)if(V[e]===t)return e},useSetter:function(){Z=!0},useSimple:function(){Z=!1}}),a(a.S+a.F*!j,"Object",{create:J,defineProperty:Q,defineProperties:q,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var at=u(function(){P.f(1)});a(a.S+a.F*at,"Object",{getOwnPropertySymbols:function(t){return P.f(x(t))}}),N&&a(a.S+a.F*(!j||u(function(){var t=R();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(y(e)||void 0!==t)&&!X(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),i[1]=e,B.apply(N,i)}}),R.prototype[D]||n(151)(R.prototype,D,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){"use strict";var i=n(9),o=n(351),r=n(439),a=n(50),s=n(268),l=n(77),u=n(53),c=n(52).ArrayBuffer,f=n(318),d=r.ArrayBuffer,h=r.DataView,v=o.ABV&&c.isView,p=d.prototype.slice,m=o.VIEW;i(i.G+i.W+i.F*(c!==d),{ArrayBuffer:d}),i(i.S+i.F*!o.CONSTR,"ArrayBuffer",{isView:function(t){return v&&v(t)||u(t)&&m in t}}),i(i.P+i.U+i.F*n(51)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==p&&void 0===e)return p.call(a(this),t);for(var n=a(this).byteLength,i=s(t,n),o=s(void 0===e?n:e,n),r=new(f(this,d))(l(o-i)),u=new h(this),c=new h(r),v=0;i<o;)c.setUint8(v++,u.getUint8(i++));return r}}),n(285)("ArrayBuffer")},function(t,e,n){var i=n(9);i(i.G+i.W+i.F*!n(351).ABV,{DataView:n(439).DataView})},function(t,e,n){n(241)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(241)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(241)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(241)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(241)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(241)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(241)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(241)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(241)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){"use strict";var i,o=n(52),r=n(226)(0),a=n(142),s=n(248),l=n(528),u=n(519),c=n(53),f=n(270),d=n(270),h=!o.ActiveXObject&&"ActiveXObject"in o,v=s.getWeak,p=Object.isExtensible,m=u.ufstore,_=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(c(t)){var e=v(t);return!0===e?m(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},y=t.exports=n(342)("WeakMap",_,g,u,!0,!0);d&&h&&(i=u.getConstructor(_,"WeakMap"),l(i.prototype,g),s.NEED=!0,r(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];a(e,t,function(e,o){if(c(e)&&!p(e)){this._f||(this._f=new i);var r=this._f[t](e,o);return"set"==t?this:r}return n.call(this,e,o)})}))},function(t,e,n){"use strict";var i=n(519),o=n(270);n(342)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(o(this,"WeakSet"),t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(9),o=n(818),r=n(116),a=n(77),s=n(225),l=n(516);i(i.P,"Array",{flatMap:function(t){var e,n,i=r(this);return s(t),e=a(i.length),n=l(i,0),o(n,i,i,e,0,1,t,arguments[1]),n}}),n(261)("flatMap")},function(t,e,n){"use strict";var i=n(9),o=n(341)(!0);i(i.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(261)("includes")},function(t,e,n){var i=n(9),o=n(532)(!0);i(i.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){var i=n(9),o=n(533),r=n(152),a=n(228),s=n(420);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=r(t),l=a.f,u=o(i),c={},f=0;u.length>f;)void 0!==(n=l(i,e=u[f++]))&&s(c,e,n);return c}})},function(t,e,n){var i=n(9),o=n(532)(!1);i(i.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){"use strict";var i=n(9),o=n(84),r=n(52),a=n(318),s=n(536);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,o.Promise||r.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(9),o=n(538),r=n(352),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);i(i.P+i.F*a,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";var i=n(9),o=n(538),r=n(352),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);i(i.P+i.F*a,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";n(287)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(287)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){n(540)("asyncIterator")},function(t,e,n){for(var i=n(442),o=n(266),r=n(142),a=n(52),s=n(151),l=n(283),u=n(69),c=u("iterator"),f=u("toStringTag"),d=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=o(h),p=0;p<v.length;p++){var m,_=v[p],g=h[_],y=a[_],x=y&&y.prototype;if(x&&(x[c]||s(x,c,d),x[f]||s(x,f,_),l[_]=d,g))for(m in i)x[m]||r(x,m,i[m],!0)}},function(t,e,n){var i=n(9),o=n(438);i(i.G+i.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){var i=n(52),o=n(9),r=n(352),a=[].slice,s=/MSIE .\./.test(r),l=function(t){return function(e,n){var i=arguments.length>2,o=!!i&&a.call(arguments,2);return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,n)}};o(o.G+o.B+o.F*s,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(t,e,n){n(970),n(969),n(968),t.exports=n(84)},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(288),n(289),n(271),n(108))}(0,function(t){return function(){var e=t,n=e.lib,i=n.BlockCipher,o=e.algo,r=[],a=[],s=[],l=[],u=[],c=[],f=[],d=[],h=[],v=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var n=0,i=0,e=0;e<256;e++){var o=i^i<<1^i<<2^i<<3^i<<4;o=o>>>8^255&o^99,r[n]=o,a[o]=n;var p=t[n],m=t[p],_=t[m],g=257*t[o]^16843008*o;s[n]=g<<24|g>>>8,l[n]=g<<16|g>>>16,u[n]=g<<8|g>>>24,c[n]=g;var g=16843009*_^65537*m^257*p^16843008*n;f[o]=g<<24|g>>>8,d[o]=g<<16|g>>>16,h[o]=g<<8|g>>>24,v[o]=g,n?(n=p^t[t[t[_^p]]],i^=t[t[i]]):n=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],m=o.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,i=this._nRounds=n+6,o=4*(i+1),a=this._keySchedule=[],s=0;s<o;s++)if(s<n)a[s]=e[s];else{var l=a[s-1];s%n?n>6&&s%n==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=l<<8|l>>>24,l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=p[s/n|0]<<24),a[s]=a[s-n]^l}for(var u=this._invKeySchedule=[],c=0;c<o;c++){var s=o-c;if(c%4)var l=a[s];else var l=a[s-4];u[c]=c<4||s<=4?l:f[r[l>>>24]]^d[r[l>>>16&255]]^h[r[l>>>8&255]]^v[r[255&l]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,l,u,c,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,f,d,h,v,a);var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,o,r,a,s){for(var l=this._nRounds,u=t[e]^n[0],c=t[e+1]^n[1],f=t[e+2]^n[2],d=t[e+3]^n[3],h=4,v=1;v<l;v++){var p=i[u>>>24]^o[c>>>16&255]^r[f>>>8&255]^a[255&d]^n[h++],m=i[c>>>24]^o[f>>>16&255]^r[d>>>8&255]^a[255&u]^n[h++],_=i[f>>>24]^o[d>>>16&255]^r[u>>>8&255]^a[255&c]^n[h++],g=i[d>>>24]^o[u>>>16&255]^r[c>>>8&255]^a[255&f]^n[h++];u=p,c=m,f=_,d=g}var p=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^n[h++],m=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[h++],_=(s[f>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^n[h++],g=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^n[h++];t[e]=p,t[e+1]=m,t[e+2]=_,t[e+3]=g},keySize:8});e.AES=i._createHelper(m)}(),t.AES})},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){return function(){function e(t){return t<<8&4278255360|t>>>8&16711935}var n=t,i=n.lib,o=i.WordArray,r=n.enc;r.Utf16=r.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],o=0;o<n;o+=2){var r=e[o>>>2]>>>16-o%4*8&65535;i.push(String.fromCharCode(r))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return o.create(n,2*e)}};r.Utf16LE={stringify:function(t){for(var n=t.words,i=t.sigBytes,o=[],r=0;r<i;r+=2){var a=e(n[r>>>2]>>>16-r%4*8&65535);o.push(String.fromCharCode(a))}return o.join("")},parse:function(t){for(var n=t.length,i=[],r=0;r<n;r++)i[r>>>1]|=e(t.charCodeAt(r)<<16-r%2*16);return o.create(i,2*n)}}}(),t.enc.Utf16})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return function(e){var n=t,i=n.lib,o=i.CipherParams,r=n.enc,a=r.Hex,s=n.format;s.Hex={stringify:function(t){return t.ciphertext.toString(a)},parse:function(t){var e=a.parse(t);return o.create({ciphertext:e})}}}(),t.format.Hex})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(353),n(976),n(973),n(288),n(289),n(444),n(544),n(992),n(545),n(994),n(993),n(991),n(443),n(987),n(271),n(108),n(977),n(979),n(978),n(981),n(980),n(982),n(983),n(984),n(986),n(985),n(974),n(972),n(995),n(990),n(989),n(988))}(0,function(t){return t})},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t,n=e.lib,i=n.WordArray,o=i.init;(i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],i=0;i<e;i++)n[i>>>2]|=t[i]<<24-i%4*8;o.call(this,n,e)}else o.apply(this,arguments)}).prototype=i}}(),t.lib.WordArray})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.mode.CFB=function(){function e(t,e,n,i){var o=this._iv;if(o){var r=o.slice(0);this._iv=void 0}else var r=this._prevBlock;i.encryptBlock(r,0);for(var a=0;a<n;a++)t[e+a]^=r[a]}var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var i=this._cipher,o=i.blockSize;e.call(this,t,n,o,i),this._prevBlock=t.slice(n,n+o)}}),n.Decryptor=n.extend({processBlock:function(t,n){var i=this._cipher,o=i.blockSize,r=t.slice(n,n+o);e.call(this,t,n,o,i),this._prevBlock=r}}),n}(),t.mode.CFB})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */
    return t.mode.CTRGladman=function(){function e(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,i=255&t;255===e?(e=0,255===n?(n=0,255===i?i=0:++i):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=i}else t+=1<<24;return t}function n(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var i=t.lib.BlockCipherMode.extend(),o=i.Encryptor=i.extend({processBlock:function(t,e){var i=this._cipher,o=i.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0),n(a);var s=a.slice(0);i.encryptBlock(s,0);for(var l=0;l<o;l++)t[e+l]^=s[l]}});return i.Decryptor=o,i}(),t.mode.CTRGladman})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._counter;o&&(r=this._counter=o.slice(0),this._iv=void 0);var a=r.slice(0);n.encryptBlock(a,0),r[i-1]=r[i-1]+1|0;for(var s=0;s<i;s++)t[e+s]^=a[s]}});return e.Decryptor=n,e}(),t.mode.CTR})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e}(),t.mode.ECB})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._keystream;o&&(r=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var a=0;a<i;a++)t[e+a]^=r[a]}});return e.Decryptor=n,e}(),t.mode.OFB})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,i=4*e,o=i-n%i,r=n+o-1;t.clamp(),t.words[r>>>2]|=o<<24-r%4*8,t.sigBytes+=o},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.pad.Iso10126={pad:function(e,n){var i=4*n,o=i-e.sigBytes%i;e.concat(t.lib.WordArray.random(o-1)).concat(t.lib.WordArray.create([o<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(108))}(0,function(t){return t.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},t.pad.ZeroPadding})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(444),n(443))}(0,function(t){return function(){var e=t,n=e.lib,i=n.Base,o=n.WordArray,r=e.algo,a=r.SHA1,s=r.HMAC,l=r.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=s.create(n.hasher,t),r=o.create(),a=o.create([1]),l=r.words,u=a.words,c=n.keySize,f=n.iterations;l.length<c;){var d=i.update(e).finalize(a);i.reset();for(var h=d.words,v=h.length,p=d,m=1;m<f;m++){p=i.finalize(p),i.reset();for(var _=p.words,g=0;g<v;g++)h[g]^=_[g]}r.concat(d),u[0]++}return r.sigBytes=4*c,r}});e.PBKDF2=function(t,e,n){return l.create(n).compute(t,e)}}(),t.PBKDF2})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(288),n(289),n(271),n(108))}(0,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;n<8;n++)s[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<s[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<s[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<s[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<s[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<s[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<s[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<s[6]>>>0?1:0)|0,this._b=e[7]>>>0<s[7]>>>0?1:0;for(var n=0;n<8;n++){var i=t[n]+e[n],o=65535&i,r=i>>>16,a=((o*o>>>17)+o*r>>>15)+r*r,u=((4294901760&i)*i|0)+((65535&i)*i|0);l[n]=a^u}t[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,t[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,t[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,t[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,t[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,t[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,t[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,t[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var n=t,i=n.lib,o=i.StreamCipher,r=n.algo,a=[],s=[],l=[],u=r.RabbitLegacy=o.extend({_doReset:function(){var t=this._key.words,n=this.cfg.iv,i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var r=0;r<4;r++)e.call(this);for(var r=0;r<8;r++)o[r]^=i[r+4&7];if(n){var a=n.words,s=a[0],l=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=u>>>16|4294901760&c,d=c<<16|65535&u;o[0]^=u,o[1]^=f,o[2]^=c,o[3]^=d,o[4]^=u,o[5]^=f,o[6]^=c,o[7]^=d;for(var r=0;r<4;r++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),a[0]=i[0]^i[5]>>>16^i[3]<<16,a[1]=i[2]^i[7]>>>16^i[5]<<16,a[2]=i[4]^i[1]>>>16^i[7]<<16,a[3]=i[6]^i[3]>>>16^i[1]<<16;for(var o=0;o<4;o++)a[o]=16711935&(a[o]<<8|a[o]>>>24)|4278255360&(a[o]<<24|a[o]>>>8),t[n+o]^=a[o]},blockSize:4,ivSize:2});n.RabbitLegacy=o._createHelper(u)}(),t.RabbitLegacy})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(288),n(289),n(271),n(108))}(0,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;n<8;n++)s[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<s[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<s[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<s[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<s[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<s[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<s[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<s[6]>>>0?1:0)|0,this._b=e[7]>>>0<s[7]>>>0?1:0;for(var n=0;n<8;n++){var i=t[n]+e[n],o=65535&i,r=i>>>16,a=((o*o>>>17)+o*r>>>15)+r*r,u=((4294901760&i)*i|0)+((65535&i)*i|0);l[n]=a^u}t[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,t[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,t[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,t[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,t[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,t[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,t[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,t[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var n=t,i=n.lib,o=i.StreamCipher,r=n.algo,a=[],s=[],l=[],u=r.Rabbit=o.extend({_doReset:function(){for(var t=this._key.words,n=this.cfg.iv,i=0;i<4;i++)t[i]=16711935&(t[i]<<8|t[i]>>>24)|4278255360&(t[i]<<24|t[i]>>>8);var o=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)e.call(this);for(var i=0;i<8;i++)r[i]^=o[i+4&7];if(n){var a=n.words,s=a[0],l=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=u>>>16|4294901760&c,d=c<<16|65535&u;r[0]^=u,r[1]^=f,r[2]^=c,r[3]^=d,r[4]^=u,r[5]^=f,r[6]^=c,r[7]^=d;for(var i=0;i<4;i++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),a[0]=i[0]^i[5]>>>16^i[3]<<16,a[1]=i[2]^i[7]>>>16^i[5]<<16,a[2]=i[4]^i[1]>>>16^i[7]<<16,a[3]=i[6]^i[3]>>>16^i[1]<<16;for(var o=0;o<4;o++)a[o]=16711935&(a[o]<<8|a[o]>>>24)|4278255360&(a[o]<<24|a[o]>>>8),t[n+o]^=a[o]},blockSize:4,ivSize:2});n.Rabbit=o._createHelper(u)}(),t.Rabbit})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(288),n(289),n(271),n(108))}(0,function(t){return function(){function e(){for(var t=this._S,e=this._i,n=this._j,i=0,o=0;o<4;o++){e=(e+1)%256,n=(n+t[e])%256;var r=t[e];t[e]=t[n],t[n]=r,i|=t[(t[e]+t[n])%256]<<24-8*o}return this._i=e,this._j=n,i}var n=t,i=n.lib,o=i.StreamCipher,r=n.algo,a=r.RC4=o.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,i=this._S=[],o=0;o<256;o++)i[o]=o;for(var o=0,r=0;o<256;o++){var a=o%n,s=e[a>>>2]>>>24-a%4*8&255;r=(r+i[o]+s)%256;var l=i[o];i[o]=i[r],i[r]=l}this._i=this._j=0},_doProcessBlock:function(t,n){t[n]^=e.call(this)},keySize:8,ivSize:0});n.RC4=o._createHelper(a);var s=r.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});n.RC4Drop=o._createHelper(s)}(),t.RC4})},function(t,e,n){!function(i,o){t.exports=e=o(n(48))}(0,function(t){/** @preserve
 (c) 2012 by Cédric Mesnil. All rights reserved.

 Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

 - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
    return function(e){function n(t,e,n){return t^e^n}function i(t,e,n){return t&e|~t&n}function o(t,e,n){return(t|~e)^n}function r(t,e,n){return t&n|e&~n}function a(t,e,n){return t^(e|~n)}function s(t,e){return t<<e|t>>>32-e}var l=t,u=l.lib,c=u.WordArray,f=u.Hasher,d=l.algo,h=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),v=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),p=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),_=c.create([0,1518500249,1859775393,2400959708,2840853838]),g=c.create([1352829926,1548603684,1836072691,2053994217,0]),y=d.RIPEMD160=f.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var l=0;l<16;l++){var u=e+l,c=t[u];t[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var f,d,y,x,b,S,w,E,T,A,P=this._hash.words,I=_.words,k=g.words,L=h.words,M=v.words,C=p.words,R=m.words;S=f=P[0],w=d=P[1],E=y=P[2],T=x=P[3],A=b=P[4];for(var N,l=0;l<80;l+=1)N=f+t[e+L[l]]|0,N+=l<16?n(d,y,x)+I[0]:l<32?i(d,y,x)+I[1]:l<48?o(d,y,x)+I[2]:l<64?r(d,y,x)+I[3]:a(d,y,x)+I[4],N|=0,N=s(N,C[l]),N=N+b|0,f=b,b=x,x=s(y,10),y=d,d=N,N=S+t[e+M[l]]|0,N+=l<16?a(w,E,T)+k[0]:l<32?r(w,E,T)+k[1]:l<48?o(w,E,T)+k[2]:l<64?i(w,E,T)+k[3]:n(w,E,T)+k[4],N|=0,N=s(N,R[l]),N=N+A|0,S=A,A=T,T=s(E,10),E=w,w=N;N=P[1]+y+T|0,P[1]=P[2]+x+A|0,P[2]=P[3]+b+S|0,P[3]=P[4]+f+w|0,P[4]=P[0]+d+E|0,P[0]=N},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var o=this._hash,r=o.words,a=0;a<5;a++){var s=r[a];r[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return o},clone:function(){var t=f.clone.call(this);return t._hash=this._hash.clone(),t}});l.RIPEMD160=f._createHelper(y),l.HmacRIPEMD160=f._createHmacHelper(y)}(Math),t.RIPEMD160})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(544))}(0,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,o=e.algo,r=o.SHA256,a=o.SHA224=r.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=4,t}});e.SHA224=r._createHelper(a),e.HmacSHA224=r._createHmacHelper(a)}(),t.SHA224})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(353))}(0,function(t){return function(e){var n=t,i=n.lib,o=i.WordArray,r=i.Hasher,a=n.x64,s=a.Word,l=n.algo,u=[],c=[],f=[];!function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var i=e%5,o=(2*t+3*e)%5;t=i,e=o}for(var t=0;t<5;t++)for(var e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var r=1,a=0;a<24;a++){for(var l=0,d=0,h=0;h<7;h++){if(1&r){var v=(1<<h)-1;v<32?d^=1<<v:l^=1<<v-32}128&r?r=r<<1^113:r<<=1}f[a]=s.create(l,d)}}();var d=[];!function(){for(var t=0;t<25;t++)d[t]=s.create()}();var h=l.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,i=this.blockSize/2,o=0;o<i;o++){var r=t[e+2*o],a=t[e+2*o+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);var s=n[o];s.high^=a,s.low^=r}for(var l=0;l<24;l++){for(var h=0;h<5;h++){for(var v=0,p=0,m=0;m<5;m++){var s=n[h+5*m];v^=s.high,p^=s.low}var _=d[h];_.high=v,_.low=p}for(var h=0;h<5;h++)for(var g=d[(h+4)%5],y=d[(h+1)%5],x=y.high,b=y.low,v=g.high^(x<<1|b>>>31),p=g.low^(b<<1|x>>>31),m=0;m<5;m++){var s=n[h+5*m];s.high^=v,s.low^=p}for(var S=1;S<25;S++){var s=n[S],w=s.high,E=s.low,T=u[S];if(T<32)var v=w<<T|E>>>32-T,p=E<<T|w>>>32-T;else var v=E<<T-32|w>>>64-T,p=w<<T-32|E>>>64-T;var A=d[c[S]];A.high=v,A.low=p}var P=d[0],I=n[0];P.high=I.high,P.low=I.low;for(var h=0;h<5;h++)for(var m=0;m<5;m++){var S=h+5*m,s=n[S],k=d[S],L=d[(h+1)%5+5*m],M=d[(h+2)%5+5*m];s.high=k.high^~L.high&M.high,s.low=k.low^~L.low&M.low}var s=n[0],C=f[l];s.high^=C.high,s.low^=C.low}},_doFinalize:function(){var t=this._data,n=t.words,i=(this._nDataBytes,8*t.sigBytes),r=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/r)*r>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,l=s/8,u=[],c=0;c<l;c++){var f=a[c],d=f.high,h=f.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),u.push(h),u.push(d)}return new o.init(u,s)},clone:function(){for(var t=r.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});n.SHA3=r._createHelper(h),n.HmacSHA3=r._createHmacHelper(h)}(Math),t.SHA3})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(353),n(545))}(0,function(t){return function(){var e=t,n=e.x64,i=n.Word,o=n.WordArray,r=e.algo,a=r.SHA512,s=r.SHA384=a.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var t=a._doFinalize.call(this);return t.sigBytes-=16,t}});e.SHA384=a._createHelper(s),e.HmacSHA384=a._createHmacHelper(s)}(),t.SHA384})},function(t,e,n){!function(i,o,r){t.exports=e=o(n(48),n(288),n(289),n(271),n(108))}(0,function(t){return function(){function e(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function n(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var i=t,o=i.lib,r=o.WordArray,a=o.BlockCipher,s=i.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=a.extend({_doReset:function(){for(var t=this._key,e=t.words,n=[],i=0;i<56;i++){var o=l[i]-1;n[i]=e[o>>>5]>>>31-o%32&1}for(var r=this._subKeys=[],a=0;a<16;a++){for(var s=r[a]=[],f=c[a],i=0;i<24;i++)s[i/6|0]|=n[(u[i]-1+f)%28]<<31-i%6,s[4+(i/6|0)]|=n[28+(u[i+24]-1+f)%28]<<31-i%6;s[0]=s[0]<<1|s[0]>>>31;for(var i=1;i<7;i++)s[i]=s[i]>>>4*(i-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var d=this._invSubKeys=[],i=0;i<16;i++)d[i]=r[15-i]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,i,o){this._lBlock=t[i],this._rBlock=t[i+1],e.call(this,4,252645135),e.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),e.call(this,1,1431655765);for(var r=0;r<16;r++){for(var a=o[r],s=this._lBlock,l=this._rBlock,u=0,c=0;c<8;c++)u|=f[c][((l^a[c])&d[c])>>>0];this._lBlock=l,this._rBlock=s^u}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,e.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),t[i]=this._lBlock,t[i+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=a._createHelper(h);var v=s.TripleDES=a.extend({_doReset:function(){var t=this._key,e=t.words;this._des1=h.createEncryptor(r.create(e.slice(0,2))),this._des2=h.createEncryptor(r.create(e.slice(2,4))),this._des3=h.createEncryptor(r.create(e.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});i.TripleDES=a._createHelper(v)}(),t.TripleDES})},function(t,e,n){e=t.exports=n(272)(),e.push([t.i,'.floor-control{font-size:15px;color:#646464;height:180px;width:38px;background:#fff;position:relative;bottom:83px!important;margin-left:31px;margin-right:30px;border-radius:40px;webkit-user-select:none;ms-user-select:none;moz-user-select:none;apple-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10}.floor-control:after{position:absolute;top:0;left:0;width:200%;height:200%;transform:scale(.5);transform-origin:left top;border-radius:40px;z-index:1000000;box-shadow:0 0 1px 1px rgba(0,0,0,.12)}.floor-control ul{-webkit-padding-start:0;padding-inline-start:0;-webkit-padding-end:0;padding-inline-end:0;-webkit-margin-before:0;margin-block-start:0;-webkit-margin-after:0;margin-block-end:0}.floor-control .arr-top{width:38px;position:absolute;z-index:100;top:-2px}.floor-control .arr-bottom{width:38px;position:absolute;z-index:100;bottom:-2px}.floor-control .floor-control-wrapper{overflow:hidden;height:160px;width:100%;position:absolute;top:10px}.floor-control .floor-control-wrapper .floor-control-list{font-size:12px;list-style-type:none;margin:0}.floor-control .floor-control-wrapper .floor-control-list .floor-control-item{position:relative;display:block;text-align:center;text-decoration:none;width:38px;height:40px;line-height:40px;transition:color .3s ease-in}.floor-control .floor-control-wrapper .floor-control-list .floor-control-item:after{content:"";position:absolute;width:26px;height:26px;border-radius:30px;z-index:-10;pointer-events:none;left:0;right:0;top:0;bottom:0;margin:auto;opacity:0;transition:opacity .2s ease-out;background-color:#4875fd}.floor-control .floor-control-wrapper .floor-control-list .selected-item{color:#fff!important;opacity:1!important}.floor-control .floor-control-wrapper .floor-control-list .selected-item:after{opacity:1}.floor-control .floor-control-wrapper.freezing .floor-control-list .floor-control-item{color:#4d4d4d;opacity:.4}.floor-control-moveup{bottom:83px!important}',""])},function(t,e,n){e=t.exports=n(272)(),e.push([t.i,".rotate-circle{position:relative;width:60px;height:60px;padding:20px 20px 7px}.rotate-circle,.rotate-circle *{box-sizing:content-box}.rotate-circle .rotate-panel{position:relative;left:0;top:-60px;font-size:16px;line-height:normal;font-family:auto}.rotate-circle .rotate-left{top:15px;left:-6px;transform:rotate(-45deg)}.rotate-circle .rotate-left,.rotate-circle .rotate-top{position:absolute;width:30px;height:30px;border-radius:30px 0 0 0;background:#fff}.rotate-circle .rotate-top{left:15px;top:-6px;transform:rotate(45deg)}.rotate-circle .rotate-right{left:36px;top:15px;border-radius:0 30px 0 0}.rotate-circle .rotate-bottom,.rotate-circle .rotate-right{position:absolute;width:30px;height:30px;background:#fff;transform:rotate(45deg)}.rotate-circle .rotate-bottom{left:15px;top:36px;border-radius:0 0 30px 0}.rotate-circle .compass-circle{width:28px;height:28px;background:#fff;border:1px solid rgba(0,20,51,.1);border-radius:50%;position:relative;left:15px;top:-15px;z-index:100}.rotate-circle .compass-img{height:28px;left:30%;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.rotate-circle .compass-circle-background{width:28px;height:28px;background:#e7eaef;border:1px solid rgba(0,20,51,.1);border-radius:50%;position:relative;left:15px;top:15px;z-index:50}.rotate-circle .rotate-left-img{transform:scaleY(-1) rotate(-45deg)}.rotate-circle .rotate-left-img,.rotate-circle .rotate-right-img{width:6px;height:17px;position:relative;left:12px;top:5px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;vertical-align:baseline}.rotate-circle .rotate-right-img{transform:rotate(135deg)}.rotate-circle .rotate-top-img{transform:rotate(-45deg);left:10px;top:-1px}.rotate-circle .rotate-bottom-img,.rotate-circle .rotate-top-img{width:8px;height:4px;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;vertical-align:baseline}.rotate-circle .rotate-bottom-img{transform:rotate(135deg);left:13px;top:2px}.rotate-circle .unclickable-rotate-bottom .rotate-bottom-img,.rotate-circle .unclickable-rotate-left .rotate-left-img,.rotate-circle .unclickable-rotate-right .rotate-right-img,.rotate-circle .unclickable-rotate-top .rotate-top-img{opacity:.3}.rotate-circle .clickable-rotate-bottom:hover,.rotate-circle .clickable-rotate-left:hover,.rotate-circle .clickable-rotate-right:hover,.rotate-circle .clickable-rotate-top:hover{background:#f2f4f8}.rotate-circle .clickable-rotate-bottom:active,.rotate-circle .clickable-rotate-left:active,.rotate-circle .clickable-rotate-right:active,.rotate-circle .clickable-rotate-top:active{background:#e7eaef}",""])},function(t,e,n){e=t.exports=n(272)(),e.push([t.i,".tmap-zoom-control{margin:10px 30px 20px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:relative;width:40px;height:80px;background:#fff;box-shadow:0 8px 19px rgba(41,64,102,.12);border-radius:4px}.tmap-zoom-control .tmap-zoom-content{-ms-flex:auto;flex:auto;-ms-flex-order:1;order:1;-ms-flex-positive:0;flex-grow:0;margin:8px 0}.tmap-zoom-control .tmap-zoom-in{position:absolute;width:24px;height:24px;left:8px;top:8px}.tmap-zoom-control .tmap-zoom-out{position:absolute;width:24px;height:24px;left:8px;top:48px}.tmap-zoom-control .tmap-zoom-spliter{height:1px;width:40px;background-color:#dee2e8;margin:auto}.tmap-zoom-control .tmap-zoom-number{display:inline;height:22px;top:40px;text-align:center;font-size:14px;font-weight:600;font-style:medium;font-family:Microsoft YaHei,PingFang SC;color:#000;line-height:22px}",""])},,,function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
    function i(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,o=0,r=Math.min(n,i);o<r;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function r(t){return Object.prototype.toString.call(t)}function a(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(S.isFunction(t)){if(T)return t.name;var e=t.toString(),n=e.match(P);return n&&n[1]}}function l(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function u(t){if(T||!S.isFunction(t))return S.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return l(u(t.actual),128)+" "+t.operator+" "+l(u(t.expected),128)}function f(t,e,n,i,o){throw new A.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:o})}function d(t,e){t||f(t,!0,e,"==",A.ok)}function h(t,e,n,s){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(S.isDate(t)&&S.isDate(e))return t.getTime()===e.getTime();if(S.isRegExp(t)&&S.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(a(t)&&a(e)&&r(t)===r(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;s=s||{actual:[],expected:[]};var l=s.actual.indexOf(t);return-1!==l&&l===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),p(t,e,n,s))}return n?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function p(t,e,n,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(S.isPrimitive(t)||S.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=v(t),r=v(e);if(o&&!r||!o&&r)return!1;if(o)return t=E.call(t),e=E.call(e),h(t,e,n);var a,s,l=I(t),u=I(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;s>=0;s--)if(a=l[s],!h(t[a],e[a],n,i))return!1;return!0}function m(t,e,n){h(t,e,!0)&&f(t,e,n,"notDeepStrictEqual",m)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function g(t){var e;try{t()}catch(t){e=t}return e}function y(t,e,n,i){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),o=g(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!o&&f(o,n,"Missing expected exception"+i);var r="string"==typeof i,a=!t&&S.isError(o),s=!t&&o&&!n;if((a&&r&&_(o,n)||s)&&f(o,n,"Got unwanted exception"+i),t&&o&&n&&!_(o,n)||!t&&o)throw o}function x(t,e){t||f(t,!0,e,"==",x)}var b=n(1003),S=n(1041),w=Object.prototype.hasOwnProperty,E=Array.prototype.slice,T=function(){return"foo"===function(){}.name}(),A=t.exports=d,P=/\s*function\s+([^\(\s]*)\s*/;A.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,o=s(e),r=i.indexOf("\n"+o);if(r>=0){var a=i.indexOf("\n",r+1);i=i.substring(a+1)}this.stack=i}}},S.inherits(A.AssertionError,Error),A.fail=f,A.ok=d,A.equal=function(t,e,n){t!=e&&f(t,e,n,"==",A.equal)},A.notEqual=function(t,e,n){t==e&&f(t,e,n,"!=",A.notEqual)},A.deepEqual=function(t,e,n){h(t,e,!1)||f(t,e,n,"deepEqual",A.deepEqual)},A.deepStrictEqual=function(t,e,n){h(t,e,!0)||f(t,e,n,"deepStrictEqual",A.deepStrictEqual)},A.notDeepEqual=function(t,e,n){h(t,e,!1)&&f(t,e,n,"notDeepEqual",A.notDeepEqual)},A.notDeepStrictEqual=m,A.strictEqual=function(t,e,n){t!==e&&f(t,e,n,"===",A.strictEqual)},A.notStrictEqual=function(t,e,n){t===e&&f(t,e,n,"!==",A.notStrictEqual)},A.throws=function(t,e,n){y(!0,t,e,n)},A.doesNotThrow=function(t,e,n){y(!1,t,e,n)},A.ifError=function(t){if(t)throw t},A.strict=b(x,A,{equal:A.strictEqual,deepEqual:A.deepStrictEqual,notEqual:A.notStrictEqual,notDeepEqual:A.notDeepStrictEqual}),A.strict.strict=A.strict;var I=Object.keys||function(t){var e=[];for(var n in t)w.call(t,n)&&e.push(n);return e}}).call(e,n(153))},function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
    var o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,l=i(t),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)r.call(n,c)&&(l[c]=n[c]);if(o){s=o(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(l[s[f]]=n[s[f]])}}return l}},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=l.assign({level:v,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==h)throw new Error(c[n]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var o;if(o="string"==typeof e.dictionary?u.string2buf(e.dictionary):"[object ArrayBuffer]"===d.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=s.deflateSetDictionary(this.strm,o))!==h)throw new Error(c[n]);this._dict_set=!0}}function o(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg||c[n.err];return n.result}function r(t,e){return e=e||{},e.raw=!0,o(t,e)}function a(t,e){return e=e||{},e.gzip=!0,o(t,e)}var s=n(1006),l=n(250),u=n(547),c=n(449),f=n(551),d=Object.prototype.toString,h=0,v=-1,p=0,m=8;i.prototype.push=function(t,e){var n,i,o=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=u.string2buf(t):"[object ArrayBuffer]"===d.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new l.Buf8(r),o.next_out=0,o.avail_out=r),1!==(n=s.deflate(o,i))&&n!==h)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(u.buf2binstring(l.shrinkBuf(o.output,o.next_out))):this.onData(l.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===i?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==i||(this.onEnd(h),o.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=i,e.deflate=o,e.deflateRaw=r,e.gzip=a},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,e.windowBits);if(n!==u.Z_OK)throw new Error(c[n]);if(this.header=new d,a.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=l.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=a.inflateSetDictionary(this.strm,e.dictionary))!==u.Z_OK))throw new Error(c[n])}function o(t,e){var n=new i(e);if(n.push(t,!0),n.err)throw n.msg||c[n.err];return n.result}function r(t,e){return e=e||{},e.raw=!0,o(t,e)}var a=n(1009),s=n(250),l=n(547),u=n(549),c=n(449),f=n(551),d=n(1007),h=Object.prototype.toString;i.prototype.push=function(t,e){var n,i,o,r,c,f=this.strm,d=this.options.chunkSize,v=this.options.dictionary,p=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?f.input=l.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(d),f.next_out=0,f.avail_out=d),n=a.inflate(f,u.Z_NO_FLUSH),n===u.Z_NEED_DICT&&v&&(n=a.inflateSetDictionary(this.strm,v)),n===u.Z_BUF_ERROR&&!0===p&&(n=u.Z_OK,p=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==u.Z_STREAM_END&&(0!==f.avail_in||i!==u.Z_FINISH&&i!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(o=l.utf8border(f.output,f.next_out),r=f.next_out-o,c=l.buf2string(f.output,o),f.next_out=r,f.avail_out=d-r,r&&s.arraySet(f.output,f.output,o,r,0),this.onData(c)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(p=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(i=u.Z_FINISH),i===u.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):i!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),f.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=i,e.inflate=o,e.inflateRaw=r,e.ungzip=o},function(t,e,n){"use strict";function i(t,e){return t.msg=N[e],e}function o(t){return(t<<1)-(t>4?9:0)}function r(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(L.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function s(t,e){M._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,n,i){var o=t.avail_in;return o>i&&(o=i),0===o?0:(t.avail_in-=o,L.arraySet(e,t.input,t.next_in,o,n),1===t.state.wrap?t.adler=C(t.adler,e,o,n):2===t.state.wrap&&(t.adler=R(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)}function f(t,e){var n,i,o=t.max_chain_length,r=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-ut?t.strstart-(t.w_size-ut):0,u=t.window,c=t.w_mask,f=t.prev,d=t.strstart+lt,h=u[r+a-1],v=u[r+a];t.prev_length>=t.good_match&&(o>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,u[n+a]===v&&u[n+a-1]===h&&u[n]===u[r]&&u[++n]===u[r+1]){r+=2,n++;do{}while(u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&r<d);if(i=lt-(d-r),r=d-lt,i>a){if(t.match_start=e,a=i,i>=s)break;h=u[r+a-1],v=u[r+a]}}}while((e=f[e&c])>l&&0!=--o);return a<=t.lookahead?a:t.lookahead}function d(t){var e,n,i,o,r,a=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-ut)){L.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,n=t.hash_size,e=n;do{i=t.head[--e],t.head[e]=i>=a?i-a:0}while(--n);n=a,e=n;do{i=t.prev[--e],t.prev[e]=i>=a?i-a:0}while(--n);o+=a}if(0===t.strm.avail_in)break;if(n=c(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=st)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+st-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<st)););}while(t.lookahead<ut&&0!==t.strm.avail_in)}function h(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===B)return gt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,s(t,!1),0===t.strm.avail_out))return gt;if(t.strstart-t.block_start>=t.w_size-ut&&(s(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===z?(s(t,!0),0===t.strm.avail_out?xt:bt):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),gt)}function v(t,e){for(var n,i;;){if(t.lookahead<ut){if(d(t),t.lookahead<ut&&e===B)return gt;if(0===t.lookahead)break}if(n=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ut&&(t.match_length=f(t,n)),t.match_length>=st)if(i=M._tr_tally(t,t.strstart-t.match_start,t.match_length-st),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=st){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(s(t,!1),0===t.strm.avail_out))return gt}return t.insert=t.strstart<st-1?t.strstart:st-1,e===z?(s(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?gt:yt}function p(t,e){for(var n,i,o;;){if(t.lookahead<ut){if(d(t),t.lookahead<ut&&e===B)return gt;if(0===t.lookahead)break}if(n=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=st-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ut&&(t.match_length=f(t,n),t.match_length<=5&&(t.strategy===H||t.match_length===st&&t.strstart-t.match_start>4096)&&(t.match_length=st-1)),t.prev_length>=st&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-st,i=M._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-st),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=st-1,t.strstart++,i&&(s(t,!1),0===t.strm.avail_out))return gt}else if(t.match_available){if(i=M._tr_tally(t,0,t.window[t.strstart-1]),i&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return gt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=M._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<st-1?t.strstart:st-1,e===z?(s(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?gt:yt}function m(t,e){for(var n,i,o,r,a=t.window;;){if(t.lookahead<=lt){if(d(t),t.lookahead<=lt&&e===B)return gt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=st&&t.strstart>0&&(o=t.strstart-1,(i=a[o])===a[++o]&&i===a[++o]&&i===a[++o])){r=t.strstart+lt;do{}while(i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&o<r);t.match_length=lt-(r-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=st?(n=M._tr_tally(t,1,t.match_length-st),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(s(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===z?(s(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?gt:yt}function _(t,e){for(var n;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===B)return gt;break}if(t.match_length=0,n=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===z?(s(t,!0),0===t.strm.avail_out?xt:bt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?gt:yt}function g(t,e,n,i,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=o}function y(t){t.window_size=2*t.w_size,r(t.head),t.max_lazy_match=k[t.level].max_lazy,t.good_match=k[t.level].good_length,t.nice_match=k[t.level].nice_length,t.max_chain_length=k[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=st-1,t.match_available=0,t.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new L.Buf16(2*rt),this.dyn_dtree=new L.Buf16(2*(2*it+1)),this.bl_tree=new L.Buf16(2*(2*ot+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new L.Buf16(at+1),this.heap=new L.Buf16(2*nt+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new L.Buf16(2*nt+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=J,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ft:mt,t.adler=2===e.wrap?0:1,e.last_flush=B,M._tr_init(e),F):i(t,Y)}function S(t){var e=b(t);return e===F&&y(t.state),e}function w(t,e){return t&&t.state?2!==t.state.wrap?Y:(t.state.gzhead=e,F):Y}function E(t,e,n,o,r,a){if(!t)return Y;var s=1;if(e===Z&&(e=6),o<0?(s=0,o=-o):o>15&&(s=2,o-=16),r<1||r>$||n!==K||o<8||o>15||e<0||e>9||a<0||a>Q)return i(t,Y);8===o&&(o=9);var l=new x;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+st-1)/st),l.window=new L.Buf8(2*l.w_size),l.head=new L.Buf16(l.hash_size),l.prev=new L.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new L.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,S(t)}function T(t,e){return E(t,e,K,tt,et,q)}function A(t,e){var n,s,c,f;if(!t||!t.state||e>V||e<0)return t?i(t,Y):Y;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===_t&&e!==z)return i(t,0===t.avail_out?G:Y);if(s.strm=t,n=s.last_flush,s.last_flush=e,s.status===ft)if(2===s.wrap)t.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=R(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=dt):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,St),s.status=mt);else{var d=K+(s.w_bits-8<<4)<<8,h=-1;h=s.strategy>=W||s.level<2?0:s.level<6?1:6===s.level?2:3,d|=h<<6,0!==s.strstart&&(d|=ct),d+=31-d%31,s.status=mt,u(s,d),0!==s.strstart&&(u(s,t.adler>>>16),u(s,65535&t.adler)),t.adler=1}if(s.status===dt)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),a(t),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=ht)}else s.status=ht;if(s.status===ht)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),a(t),c=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),0===f&&(s.gzindex=0,s.status=vt)}else s.status=vt;if(s.status===vt)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),a(t),c=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>c&&(t.adler=R(t.adler,s.pending_buf,s.pending-c,c)),0===f&&(s.status=pt)}else s.status=pt;if(s.status===pt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(t),s.pending+2<=s.pending_buf_size&&(l(s,255&t.adler),l(s,t.adler>>8&255),t.adler=0,s.status=mt)):s.status=mt),0!==s.pending){if(a(t),0===t.avail_out)return s.last_flush=-1,F}else if(0===t.avail_in&&o(e)<=o(n)&&e!==z)return i(t,G);if(s.status===_t&&0!==t.avail_in)return i(t,G);if(0!==t.avail_in||0!==s.lookahead||e!==B&&s.status!==_t){var v=s.strategy===W?_(s,e):s.strategy===X?m(s,e):k[s.level].func(s,e);if(v!==xt&&v!==bt||(s.status=_t),v===gt||v===xt)return 0===t.avail_out&&(s.last_flush=-1),F;if(v===yt&&(e===O?M._tr_align(s):e!==V&&(M._tr_stored_block(s,0,0,!1),e===D&&(r(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(t),0===t.avail_out))return s.last_flush=-1,F}return e!==z?F:s.wrap<=0?U:(2===s.wrap?(l(s,255&t.adler),l(s,t.adler>>8&255),l(s,t.adler>>16&255),l(s,t.adler>>24&255),l(s,255&t.total_in),l(s,t.total_in>>8&255),l(s,t.total_in>>16&255),l(s,t.total_in>>24&255)):(u(s,t.adler>>>16),u(s,65535&t.adler)),a(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?F:U)}function P(t){var e;return t&&t.state?(e=t.state.status)!==ft&&e!==dt&&e!==ht&&e!==vt&&e!==pt&&e!==mt&&e!==_t?i(t,Y):(t.state=null,e===mt?i(t,j):F):Y}function I(t,e){var n,i,o,a,s,l,u,c,f=e.length;if(!t||!t.state)return Y;if(n=t.state,2===(a=n.wrap)||1===a&&n.status!==ft||n.lookahead)return Y;for(1===a&&(t.adler=C(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(r(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new L.Buf8(n.w_size),L.arraySet(c,e,f-n.w_size,n.w_size,0),e=c,f=n.w_size),s=t.avail_in,l=t.next_in,u=t.input,t.avail_in=f,t.next_in=0,t.input=e,d(n);n.lookahead>=st;){i=n.strstart,o=n.lookahead-(st-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+st-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=st-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=st-1,n.match_available=0,t.next_in=l,t.input=u,t.avail_in=s,n.wrap=a,F}var k,L=n(250),M=n(1011),C=n(548),R=n(550),N=n(449),B=0,O=1,D=3,z=4,V=5,F=0,U=1,Y=-2,j=-3,G=-5,Z=-1,H=1,W=2,X=3,Q=4,q=0,J=2,K=8,$=9,tt=15,et=8,nt=286,it=30,ot=19,rt=2*nt+1,at=15,st=3,lt=258,ut=lt+st+1,ct=32,ft=42,dt=69,ht=73,vt=91,pt=103,mt=113,_t=666,gt=1,yt=2,xt=3,bt=4,St=3;k=[new g(0,0,0,0,h),new g(4,4,8,4,v),new g(4,5,16,8,v),new g(4,6,32,32,v),new g(4,4,16,16,p),new g(8,16,32,32,p),new g(8,16,128,128,p),new g(8,32,128,256,p),new g(32,128,258,1024,p),new g(32,258,258,4096,p)],e.deflateInit=T,e.deflateInit2=E,e.deflateReset=S,e.deflateResetKeep=b,e.deflateSetHeader=w,e.deflate=A,e.deflateEnd=P,e.deflateSetDictionary=I,e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=i},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,o,r,a,s,l,u,c,f,d,h,v,p,m,_,g,y,x,b,S,w,E,T,A;n=t.state,i=t.next_in,T=t.input,o=i+(t.avail_in-5),r=t.next_out,A=t.output,a=r-(e-t.avail_out),s=r+(t.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,f=n.wnext,d=n.window,h=n.hold,v=n.bits,p=n.lencode,m=n.distcode,_=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;t:do{v<15&&(h+=T[i++]<<v,v+=8,h+=T[i++]<<v,v+=8),y=p[h&_];e:for(;;){if(x=y>>>24,h>>>=x,v-=x,0===(x=y>>>16&255))A[r++]=65535&y;else{if(!(16&x)){if(0==(64&x)){y=p[(65535&y)+(h&(1<<x)-1)];continue e}if(32&x){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}b=65535&y,x&=15,x&&(v<x&&(h+=T[i++]<<v,v+=8),b+=h&(1<<x)-1,h>>>=x,v-=x),v<15&&(h+=T[i++]<<v,v+=8,h+=T[i++]<<v,v+=8),y=m[h&g];n:for(;;){if(x=y>>>24,h>>>=x,v-=x,!(16&(x=y>>>16&255))){if(0==(64&x)){y=m[(65535&y)+(h&(1<<x)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(S=65535&y,x&=15,v<x&&(h+=T[i++]<<v,(v+=8)<x&&(h+=T[i++]<<v,v+=8)),(S+=h&(1<<x)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(h>>>=x,v-=x,x=r-a,S>x){if((x=S-x)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(w=0,E=d,0===f){if(w+=u-x,x<b){b-=x;do{A[r++]=d[w++]}while(--x);w=r-S,E=A}}else if(f<x){if(w+=u+f-x,(x-=f)<b){b-=x;do{A[r++]=d[w++]}while(--x);if(w=0,f<b){x=f,b-=x;do{A[r++]=d[w++]}while(--x);w=r-S,E=A}}}else if(w+=f-x,x<b){b-=x;do{A[r++]=d[w++]}while(--x);w=r-S,E=A}for(;b>2;)A[r++]=E[w++],A[r++]=E[w++],A[r++]=E[w++],b-=3;b&&(A[r++]=E[w++],b>1&&(A[r++]=E[w++]))}else{w=r-S;do{A[r++]=A[w++],A[r++]=A[w++],A[r++]=A[w++],b-=3}while(b>2);b&&(A[r++]=A[w++],b>1&&(A[r++]=A[w++]))}break}}break}}while(i<o&&r<s);b=v>>3,i-=b,v-=b<<3,h&=(1<<v)-1,t.next_in=i,t.next_out=r,t.avail_in=i<o?o-i+5:5-(i-o),t.avail_out=r<s?s-r+257:257-(r-s),n.hold=h,n.bits=v}},function(t,e,n){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=D,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new g.Buf32(pt),e.distcode=e.distdyn=new g.Buf32(mt),e.sane=1,e.back=-1,k):C}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,r(t)):C}function s(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?C:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):C}function l(t,e){var n,i;return t?(i=new o,t.state=i,i.window=null,n=s(t,e),n!==k&&(t.state=null),n):C}function u(t){return l(t,_t)}function c(t){if(gt){var e;for(m=new g.Buf32(512),_=new g.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(S(E,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;S(T,t.lens,0,32,_,0,t.work,{bits:5}),gt=!1}t.lencode=m,t.lenbits=9,t.distcode=_,t.distbits=5}function f(t,e,n,i){var o,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new g.Buf8(r.wsize)),i>=r.wsize?(g.arraySet(r.window,e,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(o=r.wsize-r.wnext,o>i&&(o=i),g.arraySet(r.window,e,n-i,o,r.wnext),i-=o,i?(g.arraySet(r.window,e,n-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}function d(t,e){var n,o,r,a,s,l,u,d,h,v,p,m,_,pt,mt,_t,gt,yt,xt,bt,St,wt,Et,Tt,At=0,Pt=new g.Buf8(4),It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return C;n=t.state,n.mode===X&&(n.mode=Q),s=t.next_out,r=t.output,u=t.avail_out,a=t.next_in,o=t.input,l=t.avail_in,d=n.hold,h=n.bits,v=l,p=u,wt=k;t:for(;;)switch(n.mode){case D:if(0===n.wrap){n.mode=Q;break}for(;h<16;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,Pt[0]=255&d,Pt[1]=d>>>8&255,n.check=x(n.check,Pt,2,0),d=0,h=0,n.mode=z;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",n.mode=dt;break}if((15&d)!==O){t.msg="unknown compression method",n.mode=dt;break}if(d>>>=4,h-=4,St=8+(15&d),0===n.wbits)n.wbits=St;else if(St>n.wbits){t.msg="invalid window size",n.mode=dt;break}n.dmax=1<<St,t.adler=n.check=1,n.mode=512&d?H:X,d=0,h=0;break;case z:for(;h<16;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==O){t.msg="unknown compression method",n.mode=dt;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=dt;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Pt[0]=255&d,Pt[1]=d>>>8&255,n.check=x(n.check,Pt,2,0)),d=0,h=0,n.mode=V;case V:for(;h<32;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(Pt[0]=255&d,Pt[1]=d>>>8&255,Pt[2]=d>>>16&255,Pt[3]=d>>>24&255,n.check=x(n.check,Pt,4,0)),d=0,h=0,n.mode=F;case F:for(;h<16;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Pt[0]=255&d,Pt[1]=d>>>8&255,n.check=x(n.check,Pt,2,0)),d=0,h=0,n.mode=U;case U:if(1024&n.flags){for(;h<16;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Pt[0]=255&d,Pt[1]=d>>>8&255,n.check=x(n.check,Pt,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=Y;case Y:if(1024&n.flags&&(m=n.length,m>l&&(m=l),m&&(n.head&&(St=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),g.arraySet(n.head.extra,o,a,m,St)),512&n.flags&&(n.check=x(n.check,o,m,a)),l-=m,a+=m,n.length-=m),n.length))break t;n.length=0,n.mode=j;case j:if(2048&n.flags){if(0===l)break t;m=0;do{St=o[a+m++],n.head&&St&&n.length<65536&&(n.head.name+=String.fromCharCode(St))}while(St&&m<l);if(512&n.flags&&(n.check=x(n.check,o,m,a)),l-=m,a+=m,St)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=G;case G:if(4096&n.flags){if(0===l)break t;m=0;do{St=o[a+m++],n.head&&St&&n.length<65536&&(n.head.comment+=String.fromCharCode(St))}while(St&&m<l);if(512&n.flags&&(n.check=x(n.check,o,m,a)),l-=m,a+=m,St)break t}else n.head&&(n.head.comment=null);n.mode=Z;case Z:if(512&n.flags){for(;h<16;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(d!==(65535&n.check)){t.msg="header crc mismatch",n.mode=dt;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=X;break;case H:for(;h<32;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}t.adler=n.check=i(d),d=0,h=0,n.mode=W;case W:if(0===n.havedict)return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=d,n.bits=h,M;t.adler=n.check=1,n.mode=X;case X:if(e===P||e===I)break t;case Q:if(n.last){d>>>=7&h,h-=7&h,n.mode=ut;break}for(;h<3;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=q;break;case 1:if(c(n),n.mode=nt,e===I){d>>>=2,h-=2;break t}break;case 2:n.mode=$;break;case 3:t.msg="invalid block type",n.mode=dt}d>>>=2,h-=2;break;case q:for(d>>>=7&h,h-=7&h;h<32;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",n.mode=dt;break}if(n.length=65535&d,d=0,h=0,n.mode=J,e===I)break t;case J:n.mode=K;case K:if(m=n.length){if(m>l&&(m=l),m>u&&(m=u),0===m)break t;g.arraySet(r,o,a,m,s),l-=m,a+=m,u-=m,s+=m,n.length-=m;break}n.mode=X;break;case $:for(;h<14;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(n.nlen=257+(31&d),d>>>=5,h-=5,n.ndist=1+(31&d),d>>>=5,h-=5,n.ncode=4+(15&d),d>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=dt;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.ncode;){for(;h<3;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}n.lens[It[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[It[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Et={bits:n.lenbits},wt=S(w,n.lens,0,19,n.lencode,0,n.work,Et),n.lenbits=Et.bits,wt){t.msg="invalid code lengths set",n.mode=dt;break}n.have=0,n.mode=et;case et:for(;n.have<n.nlen+n.ndist;){for(;At=n.lencode[d&(1<<n.lenbits)-1],mt=At>>>24,_t=At>>>16&255,gt=65535&At,!(mt<=h);){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(gt<16)d>>>=mt,h-=mt,n.lens[n.have++]=gt;else{if(16===gt){for(Tt=mt+2;h<Tt;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(d>>>=mt,h-=mt,0===n.have){t.msg="invalid bit length repeat",n.mode=dt;break}St=n.lens[n.have-1],m=3+(3&d),d>>>=2,h-=2}else if(17===gt){for(Tt=mt+3;h<Tt;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}d>>>=mt,h-=mt,St=0,m=3+(7&d),d>>>=3,h-=3}else{for(Tt=mt+7;h<Tt;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}d>>>=mt,h-=mt,St=0,m=11+(127&d),d>>>=7,h-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=dt;break}for(;m--;)n.lens[n.have++]=St}}if(n.mode===dt)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=dt;break}if(n.lenbits=9,Et={bits:n.lenbits},wt=S(E,n.lens,0,n.nlen,n.lencode,0,n.work,Et),n.lenbits=Et.bits,wt){t.msg="invalid literal/lengths set",n.mode=dt;break}if(n.distbits=6,n.distcode=n.distdyn,Et={bits:n.distbits},wt=S(T,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Et),n.distbits=Et.bits,wt){t.msg="invalid distances set",n.mode=dt;break}if(n.mode=nt,e===I)break t;case nt:n.mode=it;case it:if(l>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=d,n.bits=h,b(t,p),s=t.next_out,r=t.output,u=t.avail_out,a=t.next_in,o=t.input,l=t.avail_in,d=n.hold,h=n.bits,n.mode===X&&(n.back=-1);break}for(n.back=0;At=n.lencode[d&(1<<n.lenbits)-1],mt=At>>>24,_t=At>>>16&255,gt=65535&At,!(mt<=h);){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(_t&&0==(240&_t)){for(yt=mt,xt=_t,bt=gt;At=n.lencode[bt+((d&(1<<yt+xt)-1)>>yt)],mt=At>>>24,_t=At>>>16&255,gt=65535&At,!(yt+mt<=h);){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}d>>>=yt,h-=yt,n.back+=yt}if(d>>>=mt,h-=mt,n.back+=mt,n.length=gt,0===_t){n.mode=lt;break}if(32&_t){n.back=-1,n.mode=X;break}if(64&_t){t.msg="invalid literal/length code",n.mode=dt;break}n.extra=15&_t,n.mode=ot;case ot:if(n.extra){for(Tt=n.extra;h<Tt;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=rt;case rt:for(;At=n.distcode[d&(1<<n.distbits)-1],mt=At>>>24,_t=At>>>16&255,gt=65535&At,!(mt<=h);){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(0==(240&_t)){for(yt=mt,xt=_t,bt=gt;At=n.distcode[bt+((d&(1<<yt+xt)-1)>>yt)],mt=At>>>24,_t=At>>>16&255,gt=65535&At,!(yt+mt<=h);){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}d>>>=yt,h-=yt,n.back+=yt}if(d>>>=mt,h-=mt,n.back+=mt,64&_t){t.msg="invalid distance code",n.mode=dt;break}n.offset=gt,n.extra=15&_t,n.mode=at;case at:if(n.extra){for(Tt=n.extra;h<Tt;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=dt;break}n.mode=st;case st:if(0===u)break t;if(m=p-u,n.offset>m){if((m=n.offset-m)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=dt;break}m>n.wnext?(m-=n.wnext,_=n.wsize-m):_=n.wnext-m,m>n.length&&(m=n.length),pt=n.window}else pt=r,_=s-n.offset,m=n.length;m>u&&(m=u),u-=m,n.length-=m;do{r[s++]=pt[_++]}while(--m);0===n.length&&(n.mode=it);break;case lt:if(0===u)break t;r[s++]=n.length,u--,n.mode=it;break;case ut:if(n.wrap){for(;h<32;){if(0===l)break t;l--,d|=o[a++]<<h,h+=8}if(p-=u,t.total_out+=p,n.total+=p,p&&(t.adler=n.check=n.flags?x(n.check,r,p,s-p):y(n.check,r,p,s-p)),p=u,(n.flags?d:i(d))!==n.check){t.msg="incorrect data check",n.mode=dt;break}d=0,h=0}n.mode=ct;case ct:if(n.wrap&&n.flags){for(;h<32;){if(0===l)break t;l--,d+=o[a++]<<h,h+=8}if(d!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=dt;break}d=0,h=0}n.mode=ft;case ft:wt=L;break t;case dt:wt=R;break t;case ht:return N;case vt:default:return C}return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=l,n.hold=d,n.bits=h,(n.wsize||p!==t.avail_out&&n.mode<dt&&(n.mode<ut||e!==A))&&f(t,t.output,t.next_out,p-t.avail_out)?(n.mode=ht,N):(v-=t.avail_in,p-=t.avail_out,t.total_in+=v,t.total_out+=p,n.total+=p,n.wrap&&p&&(t.adler=n.check=n.flags?x(n.check,r,p,t.next_out-p):y(n.check,r,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===X?128:0)+(n.mode===nt||n.mode===J?256:0),(0===v&&0===p||e===A)&&wt===k&&(wt=B),wt)}function h(t){if(!t||!t.state)return C;var e=t.state;return e.window&&(e.window=null),t.state=null,k}function v(t,e){var n;return t&&t.state?(n=t.state,0==(2&n.wrap)?C:(n.head=e,e.done=!1,k)):C}function p(t,e){var n,i,o=e.length;return t&&t.state?(n=t.state,0!==n.wrap&&n.mode!==W?C:n.mode===W&&(i=1,(i=y(i,e,o,0))!==n.check)?R:f(t,e,o,o)?(n.mode=ht,N):(n.havedict=1,k)):C}var m,_,g=n(250),y=n(548),x=n(550),b=n(1008),S=n(1010),w=0,E=1,T=2,A=4,P=5,I=6,k=0,L=1,M=2,C=-2,R=-3,N=-4,B=-5,O=8,D=1,z=2,V=3,F=4,U=5,Y=6,j=7,G=8,Z=9,H=10,W=11,X=12,Q=13,q=14,J=15,K=16,$=17,tt=18,et=19,nt=20,it=21,ot=22,rt=23,at=24,st=25,lt=26,ut=27,ct=28,ft=29,dt=30,ht=31,vt=32,pt=852,mt=592,_t=15,gt=!0;e.inflateReset=a,e.inflateReset2=s,e.inflateResetKeep=r,e.inflateInit=u,e.inflateInit2=l,e.inflate=d,e.inflateEnd=h,e.inflateGetHeader=v,e.inflateSetDictionary=p,e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";var i=n(250),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,u,c,f,d){var h,v,p,m,_,g,y,x,b,S=d.bits,w=0,E=0,T=0,A=0,P=0,I=0,k=0,L=0,M=0,C=0,R=null,N=0,B=new i.Buf16(16),O=new i.Buf16(16),D=null,z=0;for(w=0;w<=15;w++)B[w]=0;for(E=0;E<l;E++)B[e[n+E]]++;for(P=S,A=15;A>=1&&0===B[A];A--);if(P>A&&(P=A),0===A)return u[c++]=20971520,u[c++]=20971520,d.bits=1,0;for(T=1;T<A&&0===B[T];T++);for(P<T&&(P=T),L=1,w=1;w<=15;w++)if(L<<=1,(L-=B[w])<0)return-1;if(L>0&&(0===t||1!==A))return-1;for(O[1]=0,w=1;w<15;w++)O[w+1]=O[w]+B[w];for(E=0;E<l;E++)0!==e[n+E]&&(f[O[e[n+E]]++]=E);if(0===t?(R=D=f,g=19):1===t?(R=o,N-=257,D=r,z-=257,g=256):(R=a,D=s,g=-1),C=0,E=0,w=T,_=c,I=P,k=0,p=-1,M=1<<P,m=M-1,1===t&&M>852||2===t&&M>592)return 1;for(;;){y=w-k,f[E]<g?(x=0,b=f[E]):f[E]>g?(x=D[z+f[E]],b=R[N+f[E]]):(x=96,b=0),h=1<<w-k,v=1<<I,T=v;do{v-=h,u[_+(C>>k)+v]=y<<24|x<<16|b|0}while(0!==v);for(h=1<<w-1;C&h;)h>>=1;if(0!==h?(C&=h-1,C+=h):C=0,E++,0==--B[w]){if(w===A)break;w=e[n+f[E]]}if(w>P&&(C&m)!==p){for(0===k&&(k=P),_+=T,I=w-k,L=1<<I;I+k<A&&!((L-=B[I+k])<=0);)I++,L<<=1;if(M+=1<<I,1===t&&M>852||2===t&&M>592)return 1;p=C&m,u[p]=P<<24|I<<16|_-c|0}}return 0!==C&&(u[_+C]=w-k<<24|64<<16|0),d.bits=P,0}},function(t,e,n){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function o(t,e,n,i,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=o,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?rt[t]:rt[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function l(t,e,n){t.bi_valid>W-n?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>W-t.bi_valid,t.bi_valid+=n-W):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function u(t,e,n){l(t,n[2*e],n[2*e+1])}function c(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function f(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function d(t,e){var n,i,o,r,a,s,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,v=e.stat_desc.max_length,p=0;for(r=0;r<=H;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<Z;n++)i=t.heap[n],r=l[2*l[2*i+1]+1]+1,r>v&&(r=v,p++),l[2*i+1]=r,i>u||(t.bl_count[r]++,a=0,i>=h&&(a=d[i-h]),s=l[2*i],t.opt_len+=s*(r+a),f&&(t.static_len+=s*(c[2*i+1]+a)));if(0!==p){do{for(r=v-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[v]--,p-=2}while(p>0);for(r=v;0!==r;r--)for(i=t.bl_count[r];0!==i;)(o=t.heap[--n])>u||(l[2*o+1]!==r&&(t.opt_len+=(r-l[2*o+1])*l[2*o],l[2*o+1]=r),i--)}}function h(t,e,n){var i,o,r=new Array(H+1),a=0;for(i=1;i<=H;i++)r[i]=a=a+n[i-1]<<1;for(o=0;o<=e;o++){var s=t[2*o+1];0!==s&&(t[2*o]=c(r[s]++,s))}}function v(){var t,e,n,i,r,a=new Array(H+1);for(n=0,i=0;i<F-1;i++)for(st[i]=n,t=0;t<1<<$[i];t++)at[n++]=i;for(at[n-1]=i,r=0,i=0;i<16;i++)for(lt[i]=r,t=0;t<1<<tt[i];t++)rt[r++]=i;for(r>>=7;i<j;i++)for(lt[i]=r<<7,t=0;t<1<<tt[i]-7;t++)rt[256+r++]=i;for(e=0;e<=H;e++)a[e]=0;for(t=0;t<=143;)it[2*t+1]=8,t++,a[8]++;for(;t<=255;)it[2*t+1]=9,t++,a[9]++;for(;t<=279;)it[2*t+1]=7,t++,a[7]++;for(;t<=287;)it[2*t+1]=8,t++,a[8]++;for(h(it,Y+1,a),t=0;t<j;t++)ot[2*t+1]=5,ot[2*t]=c(t,5);ut=new o(it,$,U+1,Y,H),ct=new o(ot,tt,0,j,H),ft=new o(new Array(0),et,0,G,X)}function p(t){var e;for(e=0;e<Y;e++)t.dyn_ltree[2*e]=0;for(e=0;e<j;e++)t.dyn_dtree[2*e]=0;for(e=0;e<G;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function m(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function _(t,e,n,i){m(t),i&&(s(t,n),s(t,~n)),C.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function g(t,e,n,i){var o=2*e,r=2*n;return t[o]<t[r]||t[o]===t[r]&&i[e]<=i[n]}function y(t,e,n){for(var i=t.heap[n],o=n<<1;o<=t.heap_len&&(o<t.heap_len&&g(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!g(e,i,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=i}function x(t,e,n){var i,o,r,s,c=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],o=t.pending_buf[t.l_buf+c],c++,0===i?u(t,o,e):(r=at[o],u(t,r+U+1,e),s=$[r],0!==s&&(o-=st[r],l(t,o,s)),i--,r=a(i),u(t,r,n),0!==(s=tt[r])&&(i-=lt[r],l(t,i,s)))}while(c<t.last_lit);u(t,Q,e)}function b(t,e){var n,i,o,r=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=Z,n=0;n<l;n++)0!==r[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):r[2*n+1]=0;for(;t.heap_len<2;)o=t.heap[++t.heap_len]=u<2?++u:0,r[2*o]=1,t.depth[o]=0,t.opt_len--,s&&(t.static_len-=a[2*o+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)y(t,r,n);o=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],y(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,r[2*o]=r[2*n]+r[2*i],t.depth[o]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,r[2*n+1]=r[2*i+1]=o,t.heap[1]=o++,y(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],d(t,e),h(r,u,t.bl_count)}function S(t,e,n){var i,o,r=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)o=a,a=e[2*(i+1)+1],++s<l&&o===a||(s<u?t.bl_tree[2*o]+=s:0!==o?(o!==r&&t.bl_tree[2*o]++,t.bl_tree[2*q]++):s<=10?t.bl_tree[2*J]++:t.bl_tree[2*K]++,s=0,r=o,0===a?(l=138,u=3):o===a?(l=6,u=3):(l=7,u=4))}function w(t,e,n){var i,o,r=-1,a=e[1],s=0,c=7,f=4;for(0===a&&(c=138,f=3),i=0;i<=n;i++)if(o=a,a=e[2*(i+1)+1],!(++s<c&&o===a)){if(s<f)do{u(t,o,t.bl_tree)}while(0!=--s);else 0!==o?(o!==r&&(u(t,o,t.bl_tree),s--),u(t,q,t.bl_tree),l(t,s-3,2)):s<=10?(u(t,J,t.bl_tree),l(t,s-3,3)):(u(t,K,t.bl_tree),l(t,s-11,7));s=0,r=o,0===a?(c=138,f=3):o===a?(c=6,f=3):(c=7,f=4)}}function E(t){var e;for(S(t,t.dyn_ltree,t.l_desc.max_code),S(t,t.dyn_dtree,t.d_desc.max_code),b(t,t.bl_desc),e=G-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function T(t,e,n,i){var o;for(l(t,e-257,5),l(t,n-1,5),l(t,i-4,4),o=0;o<i;o++)l(t,t.bl_tree[2*nt[o]+1],3);w(t,t.dyn_ltree,e-1),w(t,t.dyn_dtree,n-1)}function A(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return N;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return B;for(e=32;e<U;e++)if(0!==t.dyn_ltree[2*e])return B;return N}function P(t){dt||(v(),dt=!0),t.l_desc=new r(t.dyn_ltree,ut),t.d_desc=new r(t.dyn_dtree,ct),t.bl_desc=new r(t.bl_tree,ft),t.bi_buf=0,t.bi_valid=0,p(t)}function I(t,e,n,i){l(t,(D<<1)+(i?1:0),3),_(t,e,n,!0)}function k(t){l(t,z<<1,3),u(t,Q,it),f(t)}function L(t,e,n,i){var o,r,a=0;t.level>0?(t.strm.data_type===O&&(t.strm.data_type=A(t)),b(t,t.l_desc),b(t,t.d_desc),a=E(t),o=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=o&&(o=r)):o=r=n+5,n+4<=o&&-1!==e?I(t,e,n,i):t.strategy===R||r===o?(l(t,(z<<1)+(i?1:0),3),x(t,it,ot)):(l(t,(V<<1)+(i?1:0),3),T(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),x(t,t.dyn_ltree,t.dyn_dtree)),p(t),i&&m(t)}function M(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(at[n]+U+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}var C=n(250),R=4,N=0,B=1,O=2,D=0,z=1,V=2,F=29,U=256,Y=U+1+F,j=30,G=19,Z=2*Y+1,H=15,W=16,X=7,Q=256,q=16,J=17,K=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=new Array(2*(Y+2));i(it);var ot=new Array(2*j);i(ot);var rt=new Array(512);i(rt);var at=new Array(256);i(at);var st=new Array(F);i(st);var lt=new Array(j);i(lt);var ut,ct,ft,dt=!1;e._tr_init=P,e._tr_stored_block=I,e._tr_flush_block=L,e._tr_tally=M,e._tr_align=k},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function r(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){p&&h&&(p=!1,h.length?v=h.concat(v):m=-1,v.length&&s())}function s(){if(!p){var t=o(a);p=!0;for(var e=v.length;e;){for(h=v,v=[];++m<e;)h&&h[m].run();m=-1,e=v.length}h=null,p=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var c,f,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var h,v=[],p=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new l(t,e)),1!==v.length||p||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){t.exports="# WaveFront *.obj file (generated by CINEMA 4D)\n\nmtllib ./escalator.mtl\n\nv -10.38787460327148 3.49382448196411 0.05786377936602\nv -10.38787460327148 2.83549332618713 0.05786377936602\nv 8.37319946289062 3.49382448196411 15.20390701293945\nv 8.37319946289062 2.83549332618713 15.20390701293945\nv -15.11080265045166 2.83549332618713 4.95054340362549\nv -15.11080265045166 3.49382448196411 4.95054340362549\nv -17.63106727600098 3.49382448196411 2.51569700241089\nv -17.63106727600098 2.83549332618713 2.51569700241089\nv -15.63636589050293 2.83549332618713 4.89701271057129\nv -16.17062377929688 2.83549332618713 4.72479200363159\nv -16.67029190063477 2.83549332618713 4.42842483520508\nv -17.09063148498535 2.83549332618713 4.02233219146729\nv -17.39739608764648 2.83549332618713 3.53959894180298\nv -17.57565879821777 2.83549332618713 3.02344822883606\nv -15.63636589050293 3.49382448196411 4.89701271057129\nv -16.17062377929688 3.49382448196411 4.72479200363159\nv -16.67029190063477 3.49382448196411 4.42842483520508\nv -17.09063148498535 3.49382448196411 4.02233219146729\nv -17.39739608764648 3.49382448196411 3.53959894180298\nv -17.57565879821777 3.49382448196411 3.02344822883606\nv -15.11080265045166 3.49382448196411 0.05786377936602\nv -15.11080265045166 2.83549332618713 0.05786377936602\nv -17.63106727600098 3.49382448196411 2.49271011352539\nv -17.63106727600098 2.83549332618713 2.49271011352539\nv -15.63636589050293 3.49382448196411 0.11139420419931\nv -16.17062377929688 3.49382448196411 0.28361487388611\nv -16.67029190063477 3.49382448196411 0.57998245954514\nv -17.09063148498535 3.49382448196411 0.9860748052597\nv -17.39739608764648 3.49382448196411 1.4688081741333\nv -17.57565879821777 3.49382448196411 1.98495888710022\nv -15.63636589050293 2.83549332618713 0.11139420419931\nv -16.17062377929688 2.83549332618713 0.28361487388611\nv -16.67029190063477 2.83549332618713 0.57998245954514\nv -17.09063148498535 2.83549332618713 0.9860748052597\nv -17.39739608764648 2.83549332618713 1.4688081741333\nv -17.57565879821777 2.83549332618713 1.98495888710022\nv 13.17253494262695 3.49382448196411 20.09658622741699\nv 13.17253494262695 2.83549332618713 20.09658622741699\nv 15.69279861450195 2.83549332618713 17.66173934936523\nv 15.69279861450195 3.49382448196411 17.66173934936523\nv 13.69809818267822 3.49382448196411 20.04305648803711\nv 14.23235607147217 3.49382448196411 19.87083435058594\nv 14.73202419281006 3.49382448196411 19.5744686126709\nv 15.15236282348633 3.49382448196411 19.16837501525879\nv 15.45912742614746 3.49382448196411 18.68564224243164\nv 15.63739013671875 3.49382448196411 18.16949081420898\nv 13.69809818267822 2.83549332618713 20.04305648803711\nv 14.23235607147217 2.83549332618713 19.87083435058594\nv 14.73202419281006 2.83549332618713 19.5744686126709\nv 15.15236282348633 2.83549332618713 19.16837501525879\nv 15.45912742614746 2.83549332618713 18.68564224243164\nv 15.63739013671875 2.83549332618713 18.16949081420898\nv 13.17253494262695 2.83549332618713 15.20390701293945\nv 13.17253494262695 3.49382448196411 15.20390701293945\nv 15.69279861450195 2.83549332618713 17.63875389099121\nv 15.69279861450195 3.49382448196411 17.63875389099121\nv 13.69809818267822 2.83549332618713 15.25743770599365\nv 14.23235607147217 2.83549332618713 15.42965793609619\nv 14.73202419281006 2.83549332618713 15.72602558135986\nv 15.15236282348633 2.83549332618713 16.13211822509766\nv 15.45912742614746 2.83549332618713 16.6148509979248\nv 15.63739013671875 2.83549332618713 17.13100242614746\nv 13.69809818267822 3.49382448196411 15.25743770599365\nv 14.23235607147217 3.49382448196411 15.42965793609619\nv 14.73202419281006 3.49382448196411 15.72602558135986\nv 15.15236282348633 3.49382448196411 16.13211822509766\nv 15.45912742614746 3.49382448196411 16.6148509979248\nv 15.63739013671875 3.49382448196411 17.13100242614746\nv -10.38787460327148 2.83549332618713 4.22026777267456\nv -9.80783653259277 2.83549332618713 5.41881465911865\nv -9.80783653259277 3.49382448196411 5.41881465911865\nv -11.14376926422119 2.83549332618713 4.95054340362549\nv -11.14376926422119 3.49382448196411 4.95054340362549\nv -10.38787460327148 3.49382448196411 4.22026777267456\nv -10.93948745727539 2.83549332618713 4.96024227142334\nv -10.7346715927124 2.83549332618713 4.98972845077515\nv -10.53240394592285 2.83549332618713 5.03915452957153\nv -10.33578205108643 2.83549332618713 5.10807466506958\nv -10.14776611328125 2.83549332618713 5.19545078277588\nv -9.97102928161621 2.83549332618713 5.29970645904541\nv -9.97102928161621 3.49382448196411 5.29970645904541\nv -10.14776611328125 3.49382448196411 5.19545078277588\nv -10.33578205108643 3.49382448196411 5.10807466506958\nv -10.53240394592285 3.49382448196411 5.03915452957153\nv -10.7346715927124 3.49382448196411 4.98972845077515\nv -10.93948745727539 3.49382448196411 4.96024227142334\nv 8.37319946289062 2.83549332618713 19.37121200561523\nv 7.79705476760864 2.83549332618713 19.6314582824707\nv 7.79705476760864 3.49382448196411 19.6314582824707\nv 9.12402153015137 3.49382448196411 20.09658622741699\nv 9.12402153015137 2.83549332618713 20.09658622741699\nv 8.37319946289062 3.49382448196411 19.37121200561523\nv 7.95915222167969 2.83549332618713 19.7497673034668\nv 8.13470268249512 2.83549332618713 19.85332298278809\nv 8.32145690917969 2.83549332618713 19.94011306762695\nv 8.51675891876221 2.83549332618713 20.00856971740723\nv 8.71766948699951 2.83549332618713 20.05766487121582\nv 8.92111110687256 2.83549332618713 20.08695220947266\nv 8.92111110687256 3.49382448196411 20.08695220947266\nv 8.71766948699951 3.49382448196411 20.05766487121582\nv 8.51675891876221 3.49382448196411 20.00856971740723\nv 8.32145690917969 3.49382448196411 19.94011306762695\nv 8.13470268249512 3.49382448196411 19.85332298278809\nv 7.95915222167969 3.49382448196411 19.7497673034668\n# 104 vertices\n\nvn 0 0 1\nvn 0 0 0\nvn 1 0 0\nvn 0 0 -1\nvn -1 0 0\nvn 0 1 0\nvn 0.33310228586197 -0.94289070367813 0\nvn 0 -1 0\nvn -0.62815809249878 0.77808576822281 0\nvn -0.1013290733099 0.99485296010971 0\nvn -0.20520241558552 0.97871953248978 0\nvn -0.41104024648666 0.91161721944809 0\nvn -0.6065838932991 0.7950194478035 0\nvn -0.77482038736343 0.63218140602112 0\nvn -0.90074276924133 0.43435296416283 0\nvn -0.97576230764389 0.21883322298527 0\nvn -0.99409872293472 0.10847935080528 0\nvn -0.10132952034473 -0.99485290050507 0\nvn -0.20520263910294 -0.97871953248978 0\nvn -0.41104024648666 -0.91161721944809 0\nvn -0.6065838932991 -0.7950194478035 0\nvn -0.77482026815414 -0.63218152523041 0\nvn -0.90074276924133 -0.43435296416283 0\nvn -0.97576230764389 -0.21883311867714 0\nvn -0.99409866333008 -0.10847944766283 0\nvn 0.10132952034473 0.99485290050507 0\nvn 0.20520223677158 0.97871959209442 0\nvn 0.41103982925415 0.91161739826202 0\nvn 0.60658365488052 0.79501962661743 0\nvn 0.77482026815414 0.63218152523041 0\nvn 0.90074348449707 0.43435138463974 0\nvn 0.97576242685318 0.21883250772953 0\nvn 0.99409848451614 0.10848119109869 0\nvn 0.10132862627506 -0.99485301971436 0\nvn 0.20520259439945 -0.97871953248978 0\nvn 0.41104060411453 -0.91161704063416 0\nvn 0.60658323764801 -0.7950199842453 0\nvn 0.77481991052628 -0.63218206167221 0\nvn 0.90074348449707 -0.43435138463974 0\nvn 0.97576242685318 -0.21883250772953 0\nvn 0.99409848451614 -0.10848119109869 0\nvn -0.58953845500946 0.80774033069611 0\nvn -0.54946291446686 0.83551812171936 0\nvn -0.46531841158867 0.88514333963394 0\nvn -0.37656545639038 0.92638999223709 0\nvn -0.28441932797432 0.95870000123978 0\nvn -0.19015780091286 0.98175352811813 0\nvn -0.09506894648075 0.99547070264816 0\nvn -0.04742458090186 0.99887484312058 0\nvn -0.04742596670985 0.99887478351593 0\nvn -0.09506894648075 0.99547070264816 0\nvn -0.19015677273273 0.98175370693207 0\nvn -0.28441941738129 0.95869994163513 0\nvn -0.37656646966934 0.92638963460922 0\nvn -0.46531823277473 0.88514345884323 0\nvn -0.54946219921112 0.83551859855652 0\n# 56 normals\n\nvt 1 0 0\nvt 0.81572288274765 0 0\nvt 1 1 0\nvt 0 0.49765086174011 0\nvt 0 0.50234913825989 0\nvt 1 0.50234913825989 0\nvt 1 0.49765086174011 0\nvt 0 1 0\nvt 0.8346254825592 1 0\nvt 0.9365501999855 1 0\nvt 0.9365501999855 0 0\nvt 0.8346254825592 0 0\nvt 0.81572288274765 1 0\nvt 0.13769590854645 0 0\nvt 0.05349377542734 0 0\nvt 0.05349377542734 1 0\nvt 0.13769590854645 1 0\nvt 0.15374012291431 0 0\nvt 0.15374012291431 1 0\nvt 0.7953936457634 0 0\nvt 0.17420670390129 0 0\nvt 0.17420670390129 1 0\nvt 0.7953936457634 1 0\nvt 0.18427714705467 0 0\nvt 0.18427714705467 1 0\nvt 0 0 0\nvt -0.02524117194116 0 0\nvt -0.02524117194116 1 0\nvt -0.10397612303495 0 0\nvt -0.10397612303495 1 0\nvt -0.18271106481552 0 0\nvt -0.18271106481552 1 0\nvt -0.26144602894783 0 0\nvt -0.26144602894783 1 0\nvt -0.34018096327782 0 0\nvt -0.34018096327782 1 0\nvt -0.41891592741013 0 0\nvt -0.41891592741013 1 0\nvt -0.49765086174011 0 0\nvt -0.49765086174011 1 0\nvt 0.84625989198685 0 0\nvt 1.01670742034912 1 0\nvt 1.01670742034912 0 0\nvt 1.09686470031738 1 0\nvt 1.09686470031738 0 0\nvt 1.17702186107636 1 0\nvt 1.17702186107636 0 0\nvt 1.25717914104462 1 0\nvt 1.25717914104462 0 0\nvt 1.33733642101288 1 0\nvt 1.33733642101288 0 0\nvt 1.41749358177185 1 0\nvt 1.41749358177185 0 0\nvt 1.49765086174011 1 0\nvt 1.49765086174011 0 0\nvt 0.16899088025093 0 0\nvt 0.16899088025093 1 0\nvt 0.15374012291431 0.850741147995 0\nvt 0.30622574687004 0.35800528526306 0\nvt 0.45763164758682 0.31676697731018 0\nvt 0.60481113195419 0.25926399230957 0\nvt 0.74554884433746 0.18636214733124 0\nvt 0.87784332036972 0.09937715530396 0\nvt 0.15291278064251 0.38260698318481 0\nvt 0.84625989198685 0.850741147995 0\nvt 0.16377504169941 0 0\nvt 0.16377504169941 1 0\nvt 0.15855921804905 0 0\nvt 0.15855921804905 1 0\nvt 0.15334339439869 0 0\nvt 0.15334339439869 1 0\nvt 0.14812757074833 0 0\nvt 0.14812757074833 1 0\nvt 0.14291173219681 0 0\nvt 0.14291173219681 1 0\nvt 0.82902091741562 0 0\nvt 0.82902091741562 1 0\nvt 0.81572288274765 0.85174286365509 0\nvt 0.69377422332764 0.05365812778473 0\nvt 0.84708720445633 0.01328134536743 0\nvt 0.12215665727854 0.47812533378601 0\nvt 0.25445115566254 0.33536338806152 0\nvt 0.39518883824348 0.21571493148804 0\nvt 0.54236835241318 0.12133967876434 0\nvt 0.18427714705467 0.85174286365509 0\nvt 0.82341641187668 0 0\nvt 0.82341641187668 1 0\nvt 0.81781184673309 0 0\nvt 0.81781184673309 1 0\nvt 0.81220728158951 0 0\nvt 0.81220728158951 1 0\nvt 0.80660271644592 0 0\nvt 0.80660271644592 1 0\nvt 0.80099821090698 0 0\nvt 0.80099821090698 1 0\n# 95 texture coordinates\n\no 1\nusemtl escalator3\nf 4/2/2 53/2/1 57/8/1 58/26/1 59/3/1 60/1/1 61/26/1 62/1/1 55/3/1 39/26/1 52/3/1 51/1/1 50/3/1 49/3/1 48/2/1 47/1/1 38/8/1 91/2/1 87/8/1\nf 56/7/3 40/6/3 39/5/3 55/4/3\nf 3/24/2 92/3/4 90/3/4 37/8/4 41/1/4 42/3/4 43/26/4 44/3/4 45/1/4 46/8/4 40/3/4 56/1/4 68/3/4 67/3/4 66/3/4 65/3/4 64/1/4 63/1/4 54/8/4\nf 24/7/5 8/6/5 7/5/5 23/4/5\nf 91/12/6 38/11/6 37/10/6 90/9/6\nf 3/2/7 54/11/8 53/10/8 4/13/7\nf 73/17/6 6/16/6 5/15/6 72/14/6\nf 1/41/2 21/8/4 25/26/4 26/1/4 27/3/4 28/3/4 29/1/4 30/3/4 23/3/4 7/1/4 20/3/4 19/8/4 18/26/4 17/1/4 16/3/4 15/3/4 6/3/4 73/1/4 74/3/4\nf 2/19/7 22/16/8 21/15/8 1/18/7\nf 69/1/2 72/1/1 5/8/1 9/3/1 10/26/1 11/1/1 12/3/1 13/1/1 14/3/1 8/3/1 24/1/1 36/8/1 35/3/1 34/3/1 33/26/1 32/3/1 31/26/1 22/1/1 2/18/1\nf 89/23/9 71/22/9 70/21/9 88/20/9\nf 3/24/2 1/41/4 74/3/4 71/8/4 89/3/4 92/24/4\nf 4/13/7 2/19/7 1/18/7 3/2/7\nf 87/1/2 88/3/1 70/1/1 69/3/1 2/18/1 4/2/1\nf 6/16/10 15/28/11 9/27/11 5/15/10\nf 15/28/11 16/30/12 10/29/12 9/27/11\nf 16/30/12 17/32/13 11/31/13 10/29/12\nf 17/32/13 18/34/14 12/33/14 11/31/13\nf 18/34/14 19/36/15 13/35/15 12/33/14\nf 19/36/15 20/38/16 14/37/16 13/35/15\nf 20/38/16 7/40/17 8/39/17 14/37/16\nf 22/16/18 31/28/19 25/27/19 21/15/18\nf 31/28/19 32/30/20 26/29/20 25/27/19\nf 32/30/20 33/32/21 27/31/21 26/29/20\nf 33/32/21 34/34/22 28/33/22 27/31/21\nf 34/34/22 35/36/23 29/35/23 28/33/22\nf 35/36/23 36/38/24 30/37/24 29/35/23\nf 36/38/24 24/40/25 23/39/25 30/37/24\nf 38/11/26 47/43/27 41/42/27 37/10/26\nf 47/43/27 48/45/28 42/44/28 41/42/27\nf 48/45/28 49/47/29 43/46/29 42/44/28\nf 49/47/29 50/49/30 44/48/30 43/46/29\nf 50/49/30 51/51/31 45/50/31 44/48/30\nf 51/51/31 52/53/32 46/52/32 45/50/31\nf 52/53/32 39/55/33 40/54/33 46/52/32\nf 54/11/34 63/43/35 57/42/35 53/10/34\nf 63/43/35 64/45/36 58/44/36 57/42/35\nf 64/45/36 65/47/37 59/46/37 58/44/36\nf 65/47/37 66/49/38 60/48/38 59/46/37\nf 66/49/38 67/51/39 61/50/39 60/48/38\nf 67/51/39 68/53/40 62/52/40 61/50/39\nf 68/53/40 56/55/41 55/54/41 62/52/40\nf 71/22/42 81/57/43 80/56/43 70/21/42\nf 80/63/2 79/62/1 78/61/1 77/60/1 76/59/1 75/64/1 72/14/1 69/58/1 70/21/1\nf 74/65/2 73/17/4 86/64/4 85/59/4 84/60/4 83/61/4 82/62/4 81/63/4 71/22/4\nf 81/57/43 82/67/44 79/66/44 80/56/43\nf 82/67/44 83/69/45 78/68/45 79/66/44\nf 83/69/45 84/71/46 77/70/46 78/68/45\nf 84/71/46 85/73/47 76/72/47 77/70/46\nf 85/73/47 86/75/48 75/74/48 76/72/47\nf 86/75/48 73/17/49 72/14/49 75/74/48\nf 90/9/50 99/77/51 98/76/51 91/12/50\nf 87/78/1 91/12/1 98/80/1 97/79/1 96/84/1 95/83/1 94/82/1 93/81/1 88/20/1\nf 104/81/4 103/82/4 102/83/4 101/84/4 100/79/4 99/80/4 90/9/4 92/85/4 89/23/4\nf 99/77/51 100/87/52 97/86/52 98/76/51\nf 100/87/52 101/89/53 96/88/53 97/86/52\nf 101/89/53 102/91/54 95/90/54 96/88/53\nf 102/91/54 103/93/55 94/92/55 95/90/54\nf 103/93/55 104/95/56 93/94/56 94/92/55\nf 104/95/56 89/23/42 88/20/42 93/94/56\n\nv -14.80749797821045 -2.56458234786987 0.06820003688335\nv -14.80749797821045 -2.56458234786987 0.12007328867912\nv 13.05556869506836 -2.56458234786987 15.21544075012207\nv 13.05556869506836 -2.56458234786987 15.25115966796875\nv 13.05556869506836 2.8786358833313 15.21544075012207\nv 13.05556869506836 2.8786358833313 15.25115966796875\nv -14.80749797821045 2.8786358833313 0.06820003688335\nv -14.80749797821045 2.8786358833313 0.12007328867912\nv -10.3766450881958 2.8786358833313 0.12007328867912\nv -10.3766450881958 2.8786358833313 0.06820003688335\nv -10.3766450881958 -2.56458234786987 0.06820003688335\nv -10.3766450881958 -2.56458234786987 0.12007328867912\nv 8.33759689331055 2.8786358833313 15.25115966796875\nv 8.33759689331055 -2.56458234786987 15.25115966796875\nv 8.33759689331055 -2.56458234786987 15.21544075012207\nv 8.33759689331055 2.8786358833313 15.21544075012207\n# 16 vertices\n\nvn -0.33345052599907 0.94276762008667 0\nvn 0.33369651436806 -0.94268053770065 0\n# 2 normals\n\nvt 0.21950633823872 1 0\nvt 0.65553259849548 1 0\nvt 0.65553259849548 0 0\nvt 0.21950633823872 0 0\nvt 0.34446743130684 1 0\nvt 0.78049367666244 1 0\nvt 0.78049367666244 0 0\nvt 0.34446743130684 0 0\n# 8 texture coordinates\n\no 2\nusemtl escalator2\nf 115/99/1 119/98/1 118/97/1 116/96/1\nf 109/1/3 110/3/3 108/8/3 107/26/3\nf 120/103/4 114/102/4 113/101/4 117/100/4\nf 105/1/5 106/3/5 112/8/5 111/26/5\nf 116/99/57 118/98/57 117/97/57 113/96/57\nf 114/102/4 111/1/4 112/3/4 113/101/4\nf 115/96/58 105/8/8 111/26/8 114/99/58\nf 116/96/1 106/8/1 105/26/1 115/99/1\nf 113/96/57 112/8/6 106/26/6 116/99/57\nf 118/98/57 108/1/6 110/3/6 117/97/57\nf 119/98/1 107/1/1 108/3/1 118/97/1\nf 117/100/4 110/8/4 109/26/4 120/103/4\n\nusemtl escalator3\nf 114/99/58 120/98/58 119/97/58 115/96/58\nf 120/98/58 109/1/8 107/3/8 119/97/58\n\nv -10.38787460327148 -2.46053695678711 0.05786377936602\nv -10.38787460327148 -3.11886811256409 0.05786377936602\nv 8.37319946289062 -2.46053695678711 15.20390701293945\nv 8.37319946289062 -3.11886811256409 15.20390701293945\nv -15.11080265045166 -3.11886811256409 4.95054340362549\nv -15.11080265045166 -2.46053695678711 4.95054340362549\nv -17.63106727600098 -2.46053695678711 2.51569700241089\nv -17.63106727600098 -3.11886811256409 2.51569700241089\nv -15.63636589050293 -3.11886811256409 4.89701271057129\nv -16.17062377929688 -3.11886811256409 4.72479200363159\nv -16.67029190063477 -3.11886811256409 4.42842483520508\nv -17.09063148498535 -3.11886811256409 4.02233219146729\nv -17.39739608764648 -3.11886811256409 3.53959894180298\nv -17.57565879821777 -3.11886811256409 3.02344822883606\nv -15.63636589050293 -2.46053695678711 4.89701271057129\nv -16.17062377929688 -2.46053695678711 4.72479200363159\nv -16.67029190063477 -2.46053695678711 4.42842483520508\nv -17.09063148498535 -2.46053695678711 4.02233219146729\nv -17.39739608764648 -2.46053695678711 3.53959894180298\nv -17.57565879821777 -2.46053695678711 3.02344822883606\nv -15.11080265045166 -2.46053695678711 0.05786377936602\nv -15.11080265045166 -3.11886811256409 0.05786377936602\nv -17.63106727600098 -2.46053695678711 2.49271011352539\nv -17.63106727600098 -3.11886811256409 2.49271011352539\nv -15.63636589050293 -2.46053695678711 0.11139420419931\nv -16.17062377929688 -2.46053695678711 0.28361487388611\nv -16.67029190063477 -2.46053695678711 0.57998245954514\nv -17.09063148498535 -2.46053695678711 0.9860748052597\nv -17.39739608764648 -2.46053695678711 1.4688081741333\nv -17.57565879821777 -2.46053695678711 1.98495888710022\nv -15.63636589050293 -3.11886811256409 0.11139420419931\nv -16.17062377929688 -3.11886811256409 0.28361487388611\nv -16.67029190063477 -3.11886811256409 0.57998245954514\nv -17.09063148498535 -3.11886811256409 0.9860748052597\nv -17.39739608764648 -3.11886811256409 1.4688081741333\nv -17.57565879821777 -3.11886811256409 1.98495888710022\nv 13.17253494262695 -2.46053695678711 20.09658622741699\nv 13.17253494262695 -3.11886811256409 20.09658622741699\nv 15.69279861450195 -3.11886811256409 17.66173934936523\nv 15.69279861450195 -2.46053695678711 17.66173934936523\nv 13.69809818267822 -2.46053695678711 20.04305648803711\nv 14.23235607147217 -2.46053695678711 19.87083435058594\nv 14.73202419281006 -2.46053695678711 19.5744686126709\nv 15.15236282348633 -2.46053695678711 19.16837501525879\nv 15.45912742614746 -2.46053695678711 18.68564224243164\nv 15.63739013671875 -2.46053695678711 18.16949081420898\nv 13.69809818267822 -3.11886811256409 20.04305648803711\nv 14.23235607147217 -3.11886811256409 19.87083435058594\nv 14.73202419281006 -3.11886811256409 19.5744686126709\nv 15.15236282348633 -3.11886811256409 19.16837501525879\nv 15.45912742614746 -3.11886811256409 18.68564224243164\nv 15.63739013671875 -3.11886811256409 18.16949081420898\nv 13.17253494262695 -3.11886811256409 15.20390701293945\nv 13.17253494262695 -2.46053695678711 15.20390701293945\nv 15.69279861450195 -3.11886811256409 17.63875389099121\nv 15.69279861450195 -2.46053695678711 17.63875389099121\nv 13.69809818267822 -3.11886811256409 15.25743770599365\nv 14.23235607147217 -3.11886811256409 15.42965793609619\nv 14.73202419281006 -3.11886811256409 15.72602558135986\nv 15.15236282348633 -3.11886811256409 16.13211822509766\nv 15.45912742614746 -3.11886811256409 16.6148509979248\nv 15.63739013671875 -3.11886811256409 17.13100242614746\nv 13.69809818267822 -2.46053695678711 15.25743770599365\nv 14.23235607147217 -2.46053695678711 15.42965793609619\nv 14.73202419281006 -2.46053695678711 15.72602558135986\nv 15.15236282348633 -2.46053695678711 16.13211822509766\nv 15.45912742614746 -2.46053695678711 16.6148509979248\nv 15.63739013671875 -2.46053695678711 17.13100242614746\nv -10.38787460327148 -3.11886811256409 4.22026777267456\nv -9.80783653259277 -3.11886811256409 5.41881465911865\nv -9.80783653259277 -2.46053695678711 5.41881465911865\nv -11.14376926422119 -3.11886811256409 4.95054340362549\nv -11.14376926422119 -2.46053695678711 4.95054340362549\nv -10.38787460327148 -2.46053695678711 4.22026777267456\nv -10.93948745727539 -3.11886811256409 4.96024227142334\nv -10.7346715927124 -3.11886811256409 4.98972845077515\nv -10.53240394592285 -3.11886811256409 5.03915452957153\nv -10.33578205108643 -3.11886811256409 5.10807466506958\nv -10.14776611328125 -3.11886811256409 5.19545078277588\nv -9.97102928161621 -3.11886811256409 5.29970645904541\nv -9.97102928161621 -2.46053695678711 5.29970645904541\nv -10.14776611328125 -2.46053695678711 5.19545078277588\nv -10.33578205108643 -2.46053695678711 5.10807466506958\nv -10.53240394592285 -2.46053695678711 5.03915452957153\nv -10.7346715927124 -2.46053695678711 4.98972845077515\nv -10.93948745727539 -2.46053695678711 4.96024227142334\nv 8.37319946289062 -3.11886811256409 19.37121200561523\nv 7.79705476760864 -3.11886811256409 19.6314582824707\nv 7.79705476760864 -2.46053695678711 19.6314582824707\nv 9.12402153015137 -2.46053695678711 20.09658622741699\nv 9.12402153015137 -3.11886811256409 20.09658622741699\nv 8.37319946289062 -2.46053695678711 19.37121200561523\nv 7.95915222167969 -3.11886811256409 19.7497673034668\nv 8.13470268249512 -3.11886811256409 19.85332298278809\nv 8.32145690917969 -3.11886811256409 19.94011306762695\nv 8.51675891876221 -3.11886811256409 20.00856971740723\nv 8.71766948699951 -3.11886811256409 20.05766487121582\nv 8.92111110687256 -3.11886811256409 20.08695220947266\nv 8.92111110687256 -2.46053695678711 20.08695220947266\nv 8.71766948699951 -2.46053695678711 20.05766487121582\nv 8.51675891876221 -2.46053695678711 20.00856971740723\nv 8.32145690917969 -2.46053695678711 19.94011306762695\nv 8.13470268249512 -2.46053695678711 19.85332298278809\nv 7.95915222167969 -2.46053695678711 19.7497673034668\n# 104 vertices\n\n# 0 normal\n\n# 0 texture coordinate\n\no 3\nusemtl escalator3\nf 124/2/2 173/2/1 177/8/1 178/26/1 179/3/1 180/1/1 181/26/1 182/1/1 175/3/1 159/26/1 172/3/1 171/1/1 170/3/1 169/3/1 168/2/1 167/1/1 158/8/1 211/2/1 207/8/1\nf 176/7/3 160/6/3 159/5/3 175/4/3\nf 123/24/2 212/3/4 210/3/4 157/8/4 161/1/4 162/3/4 163/26/4 164/3/4 165/1/4 166/8/4 160/3/4 176/1/4 188/3/4 187/3/4 186/3/4 185/3/4 184/1/4 183/1/4 174/8/4\nf 144/7/5 128/6/5 127/5/5 143/4/5\nf 211/12/6 158/11/6 157/10/6 210/9/6\nf 123/2/7 174/11/8 173/10/8 124/13/7\nf 193/17/6 126/16/6 125/15/6 192/14/6\nf 121/41/2 141/8/4 145/26/4 146/1/4 147/3/4 148/3/4 149/1/4 150/3/4 143/3/4 127/1/4 140/3/4 139/8/4 138/26/4 137/1/4 136/3/4 135/3/4 126/3/4 193/1/4 194/3/4\nf 122/19/7 142/16/8 141/15/8 121/18/7\nf 189/1/2 192/1/1 125/8/1 129/3/1 130/26/1 131/1/1 132/3/1 133/1/1 134/3/1 128/3/1 144/1/1 156/8/1 155/3/1 154/3/1 153/26/1 152/3/1 151/26/1 142/1/1 122/18/1\nf 209/23/9 191/22/9 190/21/9 208/20/9\nf 123/24/2 121/41/4 194/3/4 191/8/4 209/3/4 212/24/4\nf 124/13/7 122/19/7 121/18/7 123/2/7\nf 207/1/2 208/3/1 190/1/1 189/3/1 122/18/1 124/2/1\nf 126/16/10 135/28/11 129/27/11 125/15/10\nf 135/28/11 136/30/12 130/29/12 129/27/11\nf 136/30/12 137/32/13 131/31/13 130/29/12\nf 137/32/13 138/34/14 132/33/14 131/31/13\nf 138/34/14 139/36/15 133/35/15 132/33/14\nf 139/36/15 140/38/16 134/37/16 133/35/15\nf 140/38/16 127/40/17 128/39/17 134/37/16\nf 142/16/18 151/28/19 145/27/19 141/15/18\nf 151/28/19 152/30/20 146/29/20 145/27/19\nf 152/30/20 153/32/21 147/31/21 146/29/20\nf 153/32/21 154/34/22 148/33/22 147/31/21\nf 154/34/22 155/36/23 149/35/23 148/33/22\nf 155/36/23 156/38/24 150/37/24 149/35/23\nf 156/38/24 144/40/25 143/39/25 150/37/24\nf 158/11/26 167/43/27 161/42/27 157/10/26\nf 167/43/27 168/45/28 162/44/28 161/42/27\nf 168/45/28 169/47/29 163/46/29 162/44/28\nf 169/47/29 170/49/30 164/48/30 163/46/29\nf 170/49/30 171/51/31 165/50/31 164/48/30\nf 171/51/31 172/53/32 166/52/32 165/50/31\nf 172/53/32 159/55/33 160/54/33 166/52/32\nf 174/11/34 183/43/35 177/42/35 173/10/34\nf 183/43/35 184/45/36 178/44/36 177/42/35\nf 184/45/36 185/47/37 179/46/37 178/44/36\nf 185/47/37 186/49/38 180/48/38 179/46/37\nf 186/49/38 187/51/39 181/50/39 180/48/38\nf 187/51/39 188/53/40 182/52/40 181/50/39\nf 188/53/40 176/55/41 175/54/41 182/52/40\nf 191/22/42 201/57/43 200/56/43 190/21/42\nf 200/63/2 199/62/1 198/61/1 197/60/1 196/59/1 195/64/1 192/14/1 189/58/1 190/21/1\nf 194/65/2 193/17/4 206/64/4 205/59/4 204/60/4 203/61/4 202/62/4 201/63/4 191/22/4\nf 201/57/43 202/67/44 199/66/44 200/56/43\nf 202/67/44 203/69/45 198/68/45 199/66/44\nf 203/69/45 204/71/46 197/70/46 198/68/45\nf 204/71/46 205/73/47 196/72/47 197/70/46\nf 205/73/47 206/75/48 195/74/48 196/72/47\nf 206/75/48 193/17/49 192/14/49 195/74/48\nf 210/9/50 219/77/51 218/76/51 211/12/50\nf 207/78/1 211/12/1 218/80/1 217/79/1 216/84/1 215/83/1 214/82/1 213/81/1 208/20/1\nf 224/81/4 223/82/4 222/83/4 221/84/4 220/79/4 219/80/4 210/9/4 212/85/4 209/23/4\nf 219/77/51 220/87/52 217/86/52 218/76/51\nf 220/87/52 221/89/53 216/88/53 217/86/52\nf 221/89/53 222/91/54 215/90/54 216/88/53\nf 222/91/54 223/93/55 214/92/55 215/90/54\nf 223/93/55 224/95/56 213/94/56 214/92/55\nf 224/95/56 209/23/42 208/20/42 213/94/56\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 1_1\nusemtl escalator3\nf 4/2/2 53/2/1 57/8/1 58/26/1 59/3/1 60/1/1 61/26/1 62/1/1 55/3/1 39/26/1 52/3/1 51/1/1 50/3/1 49/3/1 48/2/1 47/1/1 38/8/1 91/2/1 87/8/1\nf 56/7/3 40/6/3 39/5/3 55/4/3\nf 3/24/2 92/3/4 90/3/4 37/8/4 41/1/4 42/3/4 43/26/4 44/3/4 45/1/4 46/8/4 40/3/4 56/1/4 68/3/4 67/3/4 66/3/4 65/3/4 64/1/4 63/1/4 54/8/4\nf 24/7/5 8/6/5 7/5/5 23/4/5\nf 91/12/6 38/11/6 37/10/6 90/9/6\nf 3/2/7 54/11/8 53/10/8 4/13/7\nf 73/17/6 6/16/6 5/15/6 72/14/6\nf 1/41/2 21/8/4 25/26/4 26/1/4 27/3/4 28/3/4 29/1/4 30/3/4 23/3/4 7/1/4 20/3/4 19/8/4 18/26/4 17/1/4 16/3/4 15/3/4 6/3/4 73/1/4 74/3/4\nf 2/19/7 22/16/8 21/15/8 1/18/7\nf 69/1/2 72/1/1 5/8/1 9/3/1 10/26/1 11/1/1 12/3/1 13/1/1 14/3/1 8/3/1 24/1/1 36/8/1 35/3/1 34/3/1 33/26/1 32/3/1 31/26/1 22/1/1 2/18/1\nf 89/23/9 71/22/9 70/21/9 88/20/9\nf 3/24/2 1/41/4 74/3/4 71/8/4 89/3/4 92/24/4\nf 4/13/7 2/19/7 1/18/7 3/2/7\nf 87/1/2 88/3/1 70/1/1 69/3/1 2/18/1 4/2/1\nf 6/16/10 15/28/11 9/27/11 5/15/10\nf 15/28/11 16/30/12 10/29/12 9/27/11\nf 16/30/12 17/32/13 11/31/13 10/29/12\nf 17/32/13 18/34/14 12/33/14 11/31/13\nf 18/34/14 19/36/15 13/35/15 12/33/14\nf 19/36/15 20/38/16 14/37/16 13/35/15\nf 20/38/16 7/40/17 8/39/17 14/37/16\nf 22/16/18 31/28/19 25/27/19 21/15/18\nf 31/28/19 32/30/20 26/29/20 25/27/19\nf 32/30/20 33/32/21 27/31/21 26/29/20\nf 33/32/21 34/34/22 28/33/22 27/31/21\nf 34/34/22 35/36/23 29/35/23 28/33/22\nf 35/36/23 36/38/24 30/37/24 29/35/23\nf 36/38/24 24/40/25 23/39/25 30/37/24\nf 38/11/26 47/43/27 41/42/27 37/10/26\nf 47/43/27 48/45/28 42/44/28 41/42/27\nf 48/45/28 49/47/29 43/46/29 42/44/28\nf 49/47/29 50/49/30 44/48/30 43/46/29\nf 50/49/30 51/51/31 45/50/31 44/48/30\nf 51/51/31 52/53/32 46/52/32 45/50/31\nf 52/53/32 39/55/33 40/54/33 46/52/32\nf 54/11/34 63/43/35 57/42/35 53/10/34\nf 63/43/35 64/45/36 58/44/36 57/42/35\nf 64/45/36 65/47/37 59/46/37 58/44/36\nf 65/47/37 66/49/38 60/48/38 59/46/37\nf 66/49/38 67/51/39 61/50/39 60/48/38\nf 67/51/39 68/53/40 62/52/40 61/50/39\nf 68/53/40 56/55/41 55/54/41 62/52/40\nf 71/22/42 81/57/43 80/56/43 70/21/42\nf 80/63/2 79/62/1 78/61/1 77/60/1 76/59/1 75/64/1 72/14/1 69/58/1 70/21/1\nf 74/65/2 73/17/4 86/64/4 85/59/4 84/60/4 83/61/4 82/62/4 81/63/4 71/22/4\nf 81/57/43 82/67/44 79/66/44 80/56/43\nf 82/67/44 83/69/45 78/68/45 79/66/44\nf 83/69/45 84/71/46 77/70/46 78/68/45\nf 84/71/46 85/73/47 76/72/47 77/70/46\nf 85/73/47 86/75/48 75/74/48 76/72/47\nf 86/75/48 73/17/49 72/14/49 75/74/48\nf 90/9/50 99/77/51 98/76/51 91/12/50\nf 87/78/1 91/12/1 98/80/1 97/79/1 96/84/1 95/83/1 94/82/1 93/81/1 88/20/1\nf 104/81/4 103/82/4 102/83/4 101/84/4 100/79/4 99/80/4 90/9/4 92/85/4 89/23/4\nf 99/77/51 100/87/52 97/86/52 98/76/51\nf 100/87/52 101/89/53 96/88/53 97/86/52\nf 101/89/53 102/91/54 95/90/54 96/88/53\nf 102/91/54 103/93/55 94/92/55 95/90/54\nf 103/93/55 104/95/56 93/94/56 94/92/55\nf 104/95/56 89/23/42 88/20/42 93/94/56\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 2_1\nusemtl escalator2\nf 115/99/1 119/98/1 118/97/1 116/96/1\nf 109/1/3 110/3/3 108/8/3 107/26/3\nf 120/103/4 114/102/4 113/101/4 117/100/4\nf 105/1/5 106/3/5 112/8/5 111/26/5\nf 116/99/57 118/98/57 117/97/57 113/96/57\nf 114/102/4 111/1/4 112/3/4 113/101/4\nf 115/96/58 105/8/8 111/26/8 114/99/58\nf 116/96/1 106/8/1 105/26/1 115/99/1\nf 113/96/57 112/8/6 106/26/6 116/99/57\nf 118/98/57 108/1/6 110/3/6 117/97/57\nf 119/98/1 107/1/1 108/3/1 118/97/1\nf 117/100/4 110/8/4 109/26/4 120/103/4\n\nusemtl escalator3\nf 114/99/58 120/98/58 119/97/58 115/96/58\nf 120/98/58 109/1/8 107/3/8 119/97/58\n\n# 0 vertex\n\n# 0 normal\n\n# 0 texture coordinate\n\no 3_1\nusemtl escalator3\nf 124/2/2 173/2/1 177/8/1 178/26/1 179/3/1 180/1/1 181/26/1 182/1/1 175/3/1 159/26/1 172/3/1 171/1/1 170/3/1 169/3/1 168/2/1 167/1/1 158/8/1 211/2/1 207/8/1\nf 176/7/3 160/6/3 159/5/3 175/4/3\nf 123/24/2 212/3/4 210/3/4 157/8/4 161/1/4 162/3/4 163/26/4 164/3/4 165/1/4 166/8/4 160/3/4 176/1/4 188/3/4 187/3/4 186/3/4 185/3/4 184/1/4 183/1/4 174/8/4\nf 144/7/5 128/6/5 127/5/5 143/4/5\nf 211/12/6 158/11/6 157/10/6 210/9/6\nf 123/2/7 174/11/8 173/10/8 124/13/7\nf 193/17/6 126/16/6 125/15/6 192/14/6\nf 121/41/2 141/8/4 145/26/4 146/1/4 147/3/4 148/3/4 149/1/4 150/3/4 143/3/4 127/1/4 140/3/4 139/8/4 138/26/4 137/1/4 136/3/4 135/3/4 126/3/4 193/1/4 194/3/4\nf 122/19/7 142/16/8 141/15/8 121/18/7\nf 189/1/2 192/1/1 125/8/1 129/3/1 130/26/1 131/1/1 132/3/1 133/1/1 134/3/1 128/3/1 144/1/1 156/8/1 155/3/1 154/3/1 153/26/1 152/3/1 151/26/1 142/1/1 122/18/1\nf 209/23/9 191/22/9 190/21/9 208/20/9\nf 123/24/2 121/41/4 194/3/4 191/8/4 209/3/4 212/24/4\nf 124/13/7 122/19/7 121/18/7 123/2/7\nf 207/1/2 208/3/1 190/1/1 189/3/1 122/18/1 124/2/1\nf 126/16/10 135/28/11 129/27/11 125/15/10\nf 135/28/11 136/30/12 130/29/12 129/27/11\nf 136/30/12 137/32/13 131/31/13 130/29/12\nf 137/32/13 138/34/14 132/33/14 131/31/13\nf 138/34/14 139/36/15 133/35/15 132/33/14\nf 139/36/15 140/38/16 134/37/16 133/35/15\nf 140/38/16 127/40/17 128/39/17 134/37/16\nf 142/16/18 151/28/19 145/27/19 141/15/18\nf 151/28/19 152/30/20 146/29/20 145/27/19\nf 152/30/20 153/32/21 147/31/21 146/29/20\nf 153/32/21 154/34/22 148/33/22 147/31/21\nf 154/34/22 155/36/23 149/35/23 148/33/22\nf 155/36/23 156/38/24 150/37/24 149/35/23\nf 156/38/24 144/40/25 143/39/25 150/37/24\nf 158/11/26 167/43/27 161/42/27 157/10/26\nf 167/43/27 168/45/28 162/44/28 161/42/27\nf 168/45/28 169/47/29 163/46/29 162/44/28\nf 169/47/29 170/49/30 164/48/30 163/46/29\nf 170/49/30 171/51/31 165/50/31 164/48/30\nf 171/51/31 172/53/32 166/52/32 165/50/31\nf 172/53/32 159/55/33 160/54/33 166/52/32\nf 174/11/34 183/43/35 177/42/35 173/10/34\nf 183/43/35 184/45/36 178/44/36 177/42/35\nf 184/45/36 185/47/37 179/46/37 178/44/36\nf 185/47/37 186/49/38 180/48/38 179/46/37\nf 186/49/38 187/51/39 181/50/39 180/48/38\nf 187/51/39 188/53/40 182/52/40 181/50/39\nf 188/53/40 176/55/41 175/54/41 182/52/40\nf 191/22/42 201/57/43 200/56/43 190/21/42\nf 200/63/2 199/62/1 198/61/1 197/60/1 196/59/1 195/64/1 192/14/1 189/58/1 190/21/1\nf 194/65/2 193/17/4 206/64/4 205/59/4 204/60/4 203/61/4 202/62/4 201/63/4 191/22/4\nf 201/57/43 202/67/44 199/66/44 200/56/43\nf 202/67/44 203/69/45 198/68/45 199/66/44\nf 203/69/45 204/71/46 197/70/46 198/68/45\nf 204/71/46 205/73/47 196/72/47 197/70/46\nf 205/73/47 206/75/48 195/74/48 196/72/47\nf 206/75/48 193/17/49 192/14/49 195/74/48\nf 210/9/50 219/77/51 218/76/51 211/12/50\nf 207/78/1 211/12/1 218/80/1 217/79/1 216/84/1 215/83/1 214/82/1 213/81/1 208/20/1\nf 224/81/4 223/82/4 222/83/4 221/84/4 220/79/4 219/80/4 210/9/4 212/85/4 209/23/4\nf 219/77/51 220/87/52 217/86/52 218/76/51\nf 220/87/52 221/89/53 216/88/53 217/86/52\nf 221/89/53 222/91/54 215/90/54 216/88/53\nf 222/91/54 223/93/55 214/92/55 215/90/54\nf 223/93/55 224/95/56 213/94/56 214/92/55\nf 224/95/56 209/23/42 208/20/42 213/94/56\n\n"},function(t,e,n){var i=function(t){"use strict";function e(t,e,n,o){var r=e&&e.prototype instanceof i?e:i,a=Object.create(r.prototype),s=new d(o||[]);return a._invoke=l(t,n,s),a}function n(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function r(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(t,e){function i(o,r,a,s){var l=n(t[o],t,r);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&_.call(c,"__await")?e.resolve(c.__await).then(function(t){i("next",t,a,s)},function(t){i("throw",t,a,s)}):e.resolve(c).then(function(t){u.value=t,a(u)},function(t){return i("throw",t,a,s)})}s(l.arg)}function o(t,n){function o(){return new e(function(e,o){i(t,n,e,o)})}return r=r?r.then(o,o):o()}var r;this._invoke=o}function l(t,e,i){var o=S;return function(r,a){if(o===E)throw new Error("Generator is already running");if(o===T){if("throw"===r)throw a;return v()}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var l=u(s,i);if(l){if(l===A)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===S)throw o=T,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=E;var c=n(t,e,i);if("normal"===c.type){if(o=i.done?T:w,c.arg===A)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o=T,i.method="throw",i.arg=c.arg)}}}function u(t,e){var i=t.iterator[e.method];if(i===p){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=p,u(t,e),"throw"===e.method))return A;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var o=n(i,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,A;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=p),e.delegate=null,A):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function h(t){if(t){var e=t[y];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(_.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=p,e.done=!0,e};return i.next=i}}return{next:v}}function v(){return{value:p,done:!0}}var p,m=Object.prototype,_=m.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},y=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",b=g.toStringTag||"@@toStringTag";t.wrap=e;var S="suspendedStart",w="suspendedYield",E="executing",T="completed",A={},P={};P[y]=function(){return this};var I=Object.getPrototypeOf,k=I&&I(I(h([])));k&&k!==m&&_.call(k,y)&&(P=k);var L=r.prototype=i.prototype=Object.create(P);return o.prototype=L.constructor=r,r.constructor=o,r[b]=o.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,r):(t.__proto__=r,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},a(s.prototype),s.prototype[x]=function(){return this},t.AsyncIterator=s,t.async=function(n,i,o,r,a){void 0===a&&(a=Promise);var l=new s(e(n,i,o,r),a);return t.isGeneratorFunction(i)?l:l.next().then(function(t){return t.done?t.value:l.next()})},a(L),L[b]="Generator",L[y]=function(){return this},L.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=h,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&_.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return r.type="throw",r.arg=t,n.next=e,i&&(n.method="next",n.arg=p),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=_.call(o,"catchLoc"),s=_.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&_.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,A):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;f(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:h(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=p),A}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e){t.exports='<div class="floor-control indoor-control">  <img class="arr-top" src="">  <img class="arr-bottom" src="">  <div class="floor-control-wrapper">    <ul class="floor-control-list transition-animate">      <%Array.prototype.forEach.call(obj.floors, function(fl, idx){%>      <li class="floor-control-item marked-pseudo-background-color" data-index="<%= idx%>" data-floor="<%= fl%>"><%= fl%></li>      <%});%>    </ul>  </div></div>'},function(t,e){t.exports='<div class="rotate-circle">\t\t<div class="compass-circle-background"></div>\t\t<div class="compass-circle">\t\t\t<img class="compass-img" src=""/>\t\t</div>\t\t<div class="rotate-panel">\t\t\t<div class="rotate-left clickable-rotate-left">\t\t\t\t<img class="rotate-left-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-top  clickable-rotate-top">\t\t\t\t<img class="rotate-top-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-right  clickable-rotate-right">\t\t\t\t<img class="rotate-right-img" src=""/>\t\t\t</div>\t\t\t<div class="rotate-bottom  clickable-rotate-bottom">\t\t\t\t<img class="rotate-bottom-img" src=""/>\t\t\t</div>\t\t</div>\t</div>'},function(t,e){t.exports='<div class="tmap-zoom-control">    <div class="tmap-zoom-content">        <div class="tmap-zoom-in"><img class="tmap-zoom-in-image" src=""></img></div>        <div class="tmap-zoom-number" style="display:none"></div>        <div class="tmap-zoom-spliter" style="display:block"></div>        <div class="tmap-zoom-out"><img class="tmap-zoom-out-image" src=""></img></div>    </div></div>'},,function(t,e,n){var i=n(996);"string"==typeof i&&(i=[[t.i,i,""]]);n(274)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(997);"string"==typeof i&&(i=[[t.i,i,""]]);n(274)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(998);"string"==typeof i&&(i=[[t.i,i,""]]);n(274)(i,{});i.locals&&(t.exports=i.locals)},,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAgCAYAAAD+Fz2gAAABmElEQVR4AeTVMYrqUBjH0VtZzizBFbiEWYRby7osRRVEFE1SCqqJQvQ8biOveLxp7oXJ5JRJuh//LyElfKI2XDU+wk+GqeGahj5AYXiK0BcYYWY4ZhiFPsEYlUzu97vX6+U78ZvMSoxDH2GCk8SaprFcLu12u/8GOB6Pttut5/MpkxMmoc/whVZCj8fDer02n8/t93v/UpZlfB9DattWBg2+wlv/I51Sn7jVahUjOBwO/lZVVXxusVi43W4yOPU2zjfnrpJQXEZcSIwRz1lU13XuOCUm4TfCGLMc/6MYZbPZvONcr1cZzDAOvxlGKKQTlxKjvONcLhcZFBiFocAUtUTiYuKSzuezxGpMwxDhEwU6CXRdJ6EOBT7C0OFPe3RMwyAUBkD4X3GBBFhYkYMJEhyghPUJwAIbEwYw8IY2vaFbhybta8Nwl3wKrkHCVUpo4iVHtVhwx7+7YUEbb3NUjRE7ft2OEXV8lLM6TFiR8W0ZKyZ0UTRnVegxYEbChgMn8tOJAxsSZgzoUUXBzMzMzMzMzMzMzMzsAXLnMf6Zx2aAAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAgCAYAAAD+Fz2gAAACU0lEQVR4AezRIQ4AIBADQeD4/5uxDQnucDPJyqoOLgAAAADAbI0vh6yoov2ostg2HeaYPOO0Xw6wcwRRGK8dlDGLGHUbFrFRxGZju4pdI3ZSxmlY27bPWOTWm7v3db5gk2O18z9+Z+zM+94vb2berGvXri1yHGdHGIb74jg+Wq/Xr4jIK/X4DqCqHhEffM/v+Bv/w//yGnXtdo7BsboC+ztNoNRqta1RFB0WkZtMPv5fEcfimBz7z2FNwCRQMpnMKpXAAyLyEZrFOTgX52yB1QpqAqZarW5US9Jl5g1Tr4aa+xJjGHdQrUvZrEqlsoF7BQZEjIUxMbbWpW+squbBgwdL4zg+yZxg8FRXsZ24e/fukjGopvblzHGc3QAKSFFhGEKDCoy107I3knDOnj27gFWDlGVZFt68eQPDMKBDjJmxjxakZjizPn/+vEpEniBl2bYNwnn9+jX4ME0TOtRoNJ7SA720QBp+OPl8fp2I5JGyVC+TwPnx4wf4ys+sKB2iB3oZckjNcKrV6g4AqWfMcZwETrlchhKXuAQSK0uTrGKxuFN5m90EaQjhzKYRAAFSluu6ePv2LQhDzdH0W7VanQpI/hBCaq4cteSs11E5vu8ncAqFAjqpUqkkkDzP01ZJ9Dgky10znOfPn68RkQI0KIoifPz4EblcDr3EZS+TyUCnuCfR64BDaoZz8ODBRTzxaO72MSiiV3oeXEjNTeicMAxPYcxEz/Te1CcNWPUwsNnqFLUXYyp6Zw6YiyQvg7S0Xb58eYWIFDGmovfz588vT3Op+wWhHSH6nVaMlQAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAACnklEQVR4AWJwL/ABNGcOPnMFURSv7ai2+Vc07KyS2oxq22ZcI6gdVGGtsLaj6rMxvaf5brL69OYskpzsXZ33m7mjd58n5RgzNNPnWys6l+Hz3ZPXTxnGFIj+iJ7LZ7dEJ0Qzc4PBDl6vU6sf548c2TXTmF2ijwJha6Fy0WP53zI7cmRrOiBMpYe2V/SQddRv6dUFds6cxhRAafVYMf0Fc7K+iPdwz4DW2rpishlmCVRpls83r7aASGlTad15mCRDcq2jdtashjUGxMwMM0gaZI0A5Ycrkw0XpvlVAmYZM0J+VObR/E2Gz3cKQux1TEZPnIhxJz/44bX1WJDVC7HL7MYSFAMoXyx1HENz1AuxixfWyQjADL+/jZj+dTRdoqaIXRdz3XG0xSucZ6HPt1YBERNm9TJ4aXqfOBqiB7eGDZdthBn9+D8gThrYzAk9uE8BERMAy8GG9M4imEEHFBAxwxNsGNAnGGbwUUCmJ8xukczOKiBikuctpOM5KcVXFRAxyfM5zP6wWquArKyADYAFJLM7YT14l+RZgCXhE8nsqQIiZniCDem4R0rxCwVETPK8xzycflBAxAxPsDH2TdXvrFCoD4SYBLgWW90wDiBfKA4gJYSJwheKA+HHrT0E01fZgcAACDEBcFf4gbW7fFjoYpjl882FF4R7Xdf1D2UWBdQ073Zs8SW7bl09CLHj5NgOpkjAkSPbOR77oXeQo8ev8AKTAur6NSUNJsfY6m7c96YQcHO1lQXp3voZPt/1FPTceRSsalY8Gj++VTIhsaWhcFCr8ht6MgnpLkMtyKmAiYkjJhkJgPuBWhCjBKxL0B7XxRyqWMqWIqX0Ijp2HIB62LvLRU9QwUCZJWFV/nDhFBTxGMKYz/EeQ+De1uUxxD/5bqFw0Zjc3QAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAAAsCAQAAACUTQ8yAAAUiUlEQVR4Ae3cBZRUV6Lo/d/e51RVKw5BEoLFFQLRycT9Tua6u7u7u7u7u437TGQkTjzECJYgIWh7VZ2z92e9Ft1YgGvfe29+taxc/nVcginyQte6w2qzZSdjt4e8x3r7+bRTF7JJ/T7Pl04s31EfzF3ByWiaExcXxTP+0rskn/YfjHGWnxy78tHwbHdYW3Jyol5zrGleWsV/8/OGHEuhdLhaBUpNM+3VcY5vMhMbvN/zBg3Ypy35r1QIsvoYtw26zsX6ZE96v3FHFxROVZIIGc7y57tO/2B3a46i4ORlCefHW8vBd/gJw44ULXWLlRoyk4LaTu/3skFf6loX+2vv9msTZ3crmprD4fv9gCXWe4+H7FQzKVos22sC0G+mpjdX26VrupkudJ6G5CkvOABmW22VQmW9zT6n/rHuREYrx/f5XtnhCotd7EzZqQje8JhtIdPrT3Zd8y+dfRr+Y7rO8HmNwb/xMyqHm+ev6otHuiGbptnsebH+o+Kt7tgTOmnxmJdc/rGJjaLzXJnLV8eXb60XFjN7wiu+3dMyCG72kzo+6s/tFCz1Dd7qdLXjC4b8nn8w4pDCj6ev6IachFYK/+BH0Ofn6s+ucs4hNCfChxWb7ny608YtYc4+NxpzuAv9XlrV6ThFjSLuCD9ZCj537KoPdfdr+I9q2Ob++q7PCR/wkMMtyqu3DD8gmCpbXr1lRfGz43FT+lSOvrS3Z22eeMN20QqC5S/W/2p5vW703FXNz/CyMQS3+vHxxQfq074tzvML9vrizlftGh3rBMeXDQ4s+uG4y/skJs23bqcNEx3R1Y2Zl2nquMxlW+uXurWma8q+K23fm140IbuWpMeY6Zqur85+fmizwqnIel0zt+f7SvN9+XpbcsN/hqan0tn9Z3+Jp4ybKpiv87oXNU1Vya7oNsp91QeMKX04353bOkrZoMJo/YiWzRY7tzamRuFOP3+w/2OdTa46cPXnhCV+2rLRsQ/Vr4mOr7a0/sLmwDr3GWbSDIN70lNGNF2aZzLDHgv1b0/rdQ1anfsqKSiVkgDZ4XqtGmk/4wWFU9OxOvWcGV3bXvFMFf1nSR6vXGWJwyUKpVKQJAmlQoS8xFKlbKs93cqEIDtNiK94HbOdrxlcbyF63DUy46PdF4z5ZHhg3Do/rUMQj3spNZSSOulTOCTLUaGhFCAjyVGpoRCcgCCafI8oOCQIguMJGhqaIql0x456WHSqakkpMCnalQ7MmfVWGx1V5VxrtFSe9jQoHKh36hMlo+53mmFR9qp96QFR0rRTe2zp6p6b/LXajmaeqVLq+BSday52ZlHP1VWAwKTskGFtBEj+82WgttwSBZO6uvocW7DfBjWgtGa/CQ0nL0uyuVbabruSSR0H61mX+XNHlc2wVDPl+Cog2ONewxKSl2xUC0oPoCsojLjPIvOrniv8k1F/17z5msWxflCh61Ny/ZbBwXRnSgWy0LZXxoDZOSOHkLrxvTb6T5IRFWYYsNu4KZLl1im7KchCWb7gHnOss1ThCDnVZbnJC1NizKnb6ZSGh5al8ZLGivH+8A8hO6TWyRY4jtT0u/nL9JqUVCoBZDWgQgBZpSIDXvEDvT957YqhtAGVT0nhrWOtR3Vkhau3978zdwWXxVsmPGxUMLNcFwtHV8kOybrIji2Y43RXu965BjztF6w3RSGm+LPxgJZrfd5zE3scsNVXmWm6EJqj8V4XFSvUJpWyk5TVBq2MF5dLR+LTereu2KpkUpDVNB1fjUnZgLNMCIhGbUa2Qp/MpGyeVvSGCfCgH2386B0XFvUzOau8kbtzG5Vvw9nOz4N1nQSZlj/2CH4wr3M0SwxapSUDsh6X2qNfclQhm+kPndfpjKaDaSKvuLT5wz5PNt2u8Y29X+lLNg5tEVC4XzRdX75j0I22m6J0UirBrLC6PD/PGXKfvzXqj59vdKvSqQsW9ywOAsgbxl8WnOYz9Q5IDsk4u3uJx8GjjR9u/cZtK0J6Jp/jrqLxin8HpWCqEgRHilb7UeeZq12MAmVtpXc4WH+06Dokq01KhoqhFXvHdnnFHmO+p55/tmiayFW932Xd5oP3h1Elxm1gUgAMuKUuh4RTjJFVFoaLi4vywCbv9X4v4SuHl77QLpyMoFFbGxsBFHYYnQCicU+AQZu0RpKpkjPW9f1ceJu55so63t+8+5ZFM+Marc317/oYFE5Y03dOrNnU7u4rbVEjed7M8TQ+uzjzAjNyAmR9FpUJoieN2FHvF0WllkB0uOibRrobhx8JOzVQaEogoiujdnEoJ9LT8axTiFHL5oUrGufVfS/6Jx+2E5Te9lw1KjhxwX4v1K2r6+4boqS03jMiyMhKbLFFFkzV8aWdlSv9upXmSJjQ2yqvbRhL7wvvdHTZsUSLhjrvzmOCqCFIPibruKQ+c5GQOxAVeW//q4NP1R0BjwoKLbXCse0af7c9ag1k/W7XA0pb3CNLlnhL9lL8K7960jEq/dYU6/LAi/7JOxxg0i3t815MlYYTV9pml9ilI4BaVwQFAmpkhQySDLoyOd25tdiXAshZ3WyfUzYvQ6+mWpYdkvXpUciOpg6aaoFJTQQNshgRjPk3VR6pJxBQSio9Ftin61hG7dAQVUrBiO2uoxQPdDbJ6HOTntrf2y6eZIzaKtdb/Lq/9W92O6Tps3b0vtZpODldbRAF1M7SJwomPI2sz9laeNq4IFhouRq1WUGu6+fq5xRMiuZafE71S+XVallhfqiBnDT8rAnMUDiqIAgyICBiX/VKtUGNZAeiAJhtuWVhcd7vndqOJSgEKy33KSOyhxxwc7XfB70uyG6ylPd7n9M5qRiVy9xeFHt9redNd5ErH6uSwsnIBs0QgjxsCJXzXYIJ70dWuMSNshDm5Y9pq3Sc5QxZrkLHg/mGbpwQEREwkc3Mb99dpgzSPlkQjNvTreZBzv3Z4SqPzFnxFWWdG/WzHjah9DlmBaGb3mebAIiiArWsdreFuRzR3w6OI5jlmnBR1dAoPmlYbYOtgiFws4tz+IQf0+GkYlTOdYdOqgebn7/xF7VNseqLX5uxqR2dnMo5btBMOXzC/SAK5VD1IS8jWWqttkw+zw5PKrzhPe62pIiv+oim2Ge2KOiYkAUIw+Hd9Q4FICB7znMk4LMdoeOXi945lygsnhFjJugP87pGRmd3c6UUEMy1OKwKe9KjxlGEcp8f9PX5Kl3HkCzwlWmwtt8bq9fOGn+fgxhBULnamhj3uN8cB6STiFEbdIPgXVn59i9fNegnjTDpYjc/1m0rnawsFR7Mq3MDorad1cdsF9CU3CsBkiAr7fEvLq3POXPeNzcfb4xdM/eyHHKsXqwfNCY4XAAE2XEN+14NZ/u9sFQXQvSa9+bvzRO9Sm1Jn88Nc5lY38oZUNshOo6ov9C106qxRbvHt4sCaoWsdNDLafHcWT9no0/apH3CMVhrfvORzkty/rf67s8eLP2oEcBX7Jz5Ujs4JYUHXBgaUNjgE0aUaoXaNluYFJTIGHOfp9LbJlZcEP56YPlAj4blM2aFhElBlgAFyEiAcLwJWHRI0ikaF7ZbtudnJQh2254vUzEpOq6gWw83R5bv62y1QVshCwYNofScDc7MZ0+cfuacs/o6XpdPKEa2wOUOdh4QBRvzu6rPurs/+xFjuMSNT1QTSqckuVCZQfSaEYXaIrtlpSaTso5s0ByvKO13gK73eVKPpX7cVRIgDPbe1hlPAiG96mG1YJV1oQ7AaekpxxAcEnRt6N16xSzFSJCPujk1m1A7pmC7TxjKB+sxQURhlfPMs92ztiHaapPBevb4rHDJglY6oRi1y7UaH+0OKdGwKb+j+uy7+zp+VNdXb5/9bLt0KgrNyvWxETMQ1Ga4zut2C1a6PlQhC0J6yhMqs3yW9R73hgxN2bip48fgjca/nX6b09Vq/UX9CJgXVkSjCnRSn+BENLzia9zmS8NMtSNlA9U3lReFKjuWgzbKgkIyzzlWmqe/EBZVq+zwlM2ShjEjtuW+fIkTiFFZ6AI7us8JgNIr+Z3153xua8iT+aYHOuMaTl602bsVzZxeV0iSAVdbbUH4y5z1WBUXdL0myJY+GnNumK+/5+qJC7xinhzCARAdErS9099rYYWfqk+ToA5qP+EpfE392QonIpiwwVmyY+l1957Gc2lEoYLkMFEp6bfcKgvsMOaguu5TxllhVl6e9tnkJa+LksyJxChcqlk8Uk/9yRtezu+r3/bFjc99vvFyLp2Kwh57SCZ1XaPVjY2Dea+kaX7KsV4C0Ws5a5lPm9nWiCGut9mRgtoO0FLlwKRgl80YceIyCsdWHIh/mWqF2kLN4FnJFNmga8OZYZ6y0zBePmmHpiAaTDPMMM8ZrnJ5PlC8lLfpyfnNY2SzXGp7/byGQ2otg7nRPNC6r64VTk1QiJIkgbIV32Xd5jPqOmp7QAhKCIZR2WBzzpJFrog9L6uOO+aPposgOFGFM/Rqyo4p51FRVrpcf/Rx2TSLLTkY2vZ4n4Xpa6uJti6CYbvQdbOritZDpy05bTD3hMaWN49RW61ZPFR3lYAaS1xvRTlSvccepZPUSjJqS52jWaZqo1eAynlmbU5djHvRIQU6tiKq7bE69ZwvSv6L5NoSf670YW3HFPTq0bAmXtoqPuVvZcFUKfyW+7z2ev9p39vrPP3aurq6Kl1tidLfetLaek15U1gsHTdGNsOFdtWbFSCrzbXWGo3GK9177FI6SUFP0kWy2OUh7jJ3PLx86O2aY1qCo6vUggjJ0VVOSIZ4rI1LRT5Q7p85s5yzRO2QINY62pJMHGy9vY4WlDPHPOTHDDtMEnd4TXna59VfMza+ztWlmDpDDhh10B4LQhg1Ypf3lk+4WeC4MWqrzIgPplENNQatdamB5r7Og91ndBVOQY9cCSjUZXxn+pLcCxS0hDtMOLqO5zwmOo7gbJ/lNH8oOY6gUmf9SiYVLtQMGZJ77MudfHOakx0SjHl9VWugrjJzYt7Y+tQ5Kw3ZZodH7XM0EfPd+Eb6iFpv1dJr0Cx9TrNOozCRviBusE8Ljhsja7nQwfSsqDLHeS432BjufqKz3pBC4RQEA0kHWUsMuiaVNqX983IqcnSkpN/ZdsmOI5vjB51R9xa93qt2pGBSRyebqwEKX2SNteaN1jWSF2WzRFOFwn7vmLtw7moDcn6m/rXyU8711S5zkbtFe73fvY7UMKubdhoVEDT1aGhqidWannPv8k4f401jJAstix9NI+a5zAUGGwe693Sfs0+pdIqiWSmPC7KW6JDCi56tC0dXm+dMteMJWWvrisfqBe1r7/S42pEmKFEYM1q5wkw7NXyjr889W4rHqu25K6ChRnaEx8a/pXeWkjBUblOble44EDtomB3jMvfIDte2pyfMNIGAyjCgY0k+u1vM4QRiZKt184jbrdaMu9MD3Q2GBQ1OXTC7zhPI+oRoikrbsWN0vJmNPpl2pxFrg6bC0WwJaU6R0bUtL8vFN/t5w27b3/ev9VB3AgHQ65ywOEimKuTe7bYDokHrJhofGtuukH1ZmD/LDNl0wZBn5l7/JbkdRozaa8iIIcPaghKSILxJjNocy+rG6Ntnyi94Jm0xoVD6Dwrm13lMUOoJxiWTkiVyKEyXs0mDoimCw2SPybLsONYXnTMbn0DpGUvaZ90abnCvJRP1rhyRFFoGrI7n66/ssMkZzVCoZOOV5X7HVNm8bnvYmEItkTVMEVnmy7Av/uHALQNnzC0ksozasGF9Gtk8X2K2bIpSME2y0ozmXq/kJ+3VOelRUxYVdEwXLO3mIQxoRlt0TOq6NKyt1IJDOnrbRcoQ7LdDRAEdR8hq9BkIupKj2RqeXnjN6ek1pYM+ZE84uznvduNktZZ+S8KFxaoYhmzzCe9VumZWiGh7Jg305nUOs7HeqxAUWnQcFEyqdGL8QSCTQpZMMWAAneD7oEzd2iRK+4qBmKfecMC7643FiOIUR02FZrDbdD2WTuSDoplahW26gkm54cOeFk0irYy3PNC/Kwew324NbQs0Cy9JpqklMyx2Ybmq4b12iI7mg31XXBnfoVYY8iEH3VbHcb0t85wdL2jM6Xjdy+6Z3Lo/2/5FRaM7LlnvOT3ZNLVRSVBZrCd7SVcAShsNC7U3V0NhSDJJ6fHZb+1RCYBgoyQqnaqmmYX1prsoN/bmLJujL05fjx8aHvHXpvpJC3cefEkEQUPXoIv1tKv7ywyCmCQdM53uwvLcEA94ym8cc4z6Dp+x8i1r2k+olEqlVMcnB++8qXtOc3DC8+me+KT7dAH7bR64cmVYnwvBhAmHC4JKaa1mdJ8oAMGrtjoZQSkASh9YfMNgtVdhkkLh1CUL46x9Pm66z27n5yRdi/T3eNAcoVap1dAQJYcUcq1SgCw51xXOnOk3ywdkMOz12XGBS5xbLCriJh/yAZuMuoCsVgkSQQB0/Hzrd25deWb7PrsltZy9PPDxtQs96kNejDtN9/suuumcWK1XObraQle7uBkf9Q6lTkAlO1lZFx1Q+kRr00Ur7qkK/zmiNaUHbTfdbmFRXoDlpVdtsyfkpd4imSsWhmRTxJ0O3lheUZtUhgXFQPZH/lQC7PXgwrvvagzExhYf8U92GAP71DOcoxYsivY6CMg2+JHip8+/YMHY7vS6hULwhH/Q6w1DjrTVT7R+5/r5q6qd2o5mnsVxfk94zI8Z0/TyQHN1e67gVGT9eqOXQw6+dOwn/6Xemkv/cR1r413t8LUeMt1F/qbTF7LQ6Phl/yD7i+qKnIllscl3e8ZU83yzz9Mng2DMev/kfmMO6XOX623393ZPuT2mX3FnJ2ZB0dv4uG8w6pAlbvClzqgalE/4Mh3Hc5Hvcm1KtaNpFF71Dv/uNXC2X0/n112nqIhxmx/77zqMLLrARQqVp72ki37nOw/7PWC/ZLqmOUqTTBg1IZsuaqp1TdfjRpcrVLb6pI2mi3otdoHdnjbizfSabbVZgsNlL9poRAUIZrjQSsmpiHZ51IH/+gMsP+1//tDjT/vf5KD8T8eAT5+u4n/U/wXa0/2K2qv7yQAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAABHCAMAAABMB0n6AAAC9FBMVEUAAAD////////////////8/Pz///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8zMzMTfv//KwDb6/nd6vnZ7Pne6Png5/ni5fnW7vnX7fn9/f7T7/nk5Pnh5vnz+P2CgoLZ5fjR6vj2+P7v9/08PDzk5OT19fXV5vjp6uk2Njbh8vv5+fny9f1ERERBQUHm4/nx8fJSUlLT8Pmvr69JSUnt7e2/v7/d4/jf39+6urqqqqpxcXHZ4vjV6PjKysphYWHX6fh2dnb39/fZ2dq2trZbW1tVVVXc3Nz/LQDQ0NDq7fvd4Ph+fn5tbW0Fdv/3+/7g4vnGxsafn5+IiIh6enr/GgD6/f/Nzc2ZmZmUlJSNjY1paWn0+v7c5fi90uilpaU5OTnp8vvi6frn5+fV1daioqL/IwEAbv/g7frh4eHO7fnZ5/jCwsJMTEzu8fzd7/rF3O4Off8AZ/9lZWXU6/nL6vjN5vbe3t6cnJyWlpb/DwD/BwDy+f7r+P3O4PHF1er//PnT4vaRkZHl8vzm7PvS0tIAkf/w+/3v9Pz/AQDQ///V7/na7fmr9/+y3vXk7PForf7a8/vU3PPV4u272OzN2ui20Ofk5vqzs7NqamrU//8FhP/N2vKOjo630fv47/jV3OSTk5OPj4/wemvsZE/1SCzM///C/P/S9/58r/b89+k4ODjwOR74Lg6w6f9Alv4rjP5NmfZmp/Wpx+vc4uVnY6LhnZnThICWT3Pa/v+eyf0lhv3ox8bUpKWQkJDoiX/dfnQAWf+cxfPTtLr+ubJzXZa+PUeQvfseeOj/5+UGXd1umtrGrLNbZ67ZDA/0l2DFAAAAO3RSTlMADO+f2P7EmUMJJCgSA7ysqNGD5OkfjyoWt3hQB7FciCwawWnccWMw9LQ8WX9IyaNKNFFNV3tOVlVTUu3rZMMAABZ9SURBVGje1Zt5XFRVFMfHYAABARVMTUtTybR9r/NKpGxKQGFYwqGhYcfYl1AQEWQREAhQCLEFNXEpxRYzy8q0fd/3fd/3vX/6nXvfMjOMfeyPPtnv4zDvXd5j7vedc8+599zR5KTTvabPpMOTZebocf6m/4NOGkv/TJbps01Huo5hqG0dV+ydM2fO3r17F+wiqt5wKR9dQXT9ZfPmzbtsXj1Z7r/ubqH77991JxFNDzMd0fIlsmy/HkhzhRZcz1QbLoUE1oJ50HV3W6j+suvuvgy6Crp/O26aZjqCFUwUGwEoyTXn6rkA2LBgrjMWtHEvYK8DlA4Gix1nOmIFqg5QaVwFCdVEexcAUMe6VHLhePtGnQvafgRzwQN3gUfnWhCLBlBBOpbKBYwrNt7txIUxeJ7JXYEjIKfzkfLcEE4DnRvcroVGuraOkBr1D6jOtLCtDCVgYMUmzJXSsCTXZRtbiDC8XOx1lHsHQ4g1IUyDVM+P0T9wArG8TB7kRaqCxzsF6SBS5Xv4WEdRVGSEwVVQUE/VVxfMUbk0LMl13WVELTy8DK5q8ja5yI/s8RAdr1Mmi3M6RqUiwqm9iDzYazauFUqmYIMKN0hZ6LDtNY0sEZDOtQku2LOAqQwsxERIG15wQ+e4QWbZP6MXm+OgcjpdGouK0vj8SwrWMIf4vJPCPI2H2jghmx23q/KhR+KkrLjnMDUWQdCJK2EOXBADyx2LJdxwG9UDaN6eF1/eILlaaLTJWSdTjQK10dni9Fhap7BsFKp9YJo89Ri8ChWpNjicZt0sRVUvHe7UJhC2iXTiSlhIlgK44HAsiN1wHqLhdXtefPrD4peBJ8w103V4kyUFXaiiCepoqVWEbpbP/wTZyyEK9ji0olWCMvLWLTikYVkPG8uXWkAlxVQ9CPYJOPCIxVwbO4j2dH39xl0fvqj6YT2Fm5x1IuWiC3FmEuFsOvXjzDDfRMrhs3V0pngGYf7+ge5Y7QqUSCfLttFUxn8uzsDCXQEBAVNH/A2WN3VECiTJBWNVJxQAa3jIABP/fPnF6u+fX3nXloue3qOOr+10oslZM6hbgfJEv8Kok08M8zE0lE5Tp8wI9ibW2Akn+Tlj5abixyAFq05crEB1aRILDb4+JOU94eyj2TLehoLGyL80k3pihBJYO2Gsnk04uFrTJoT7uZsWaNqz5+UvXti6dc01W59/aePGjdexrnCLhafJ0TRIY0SvMnCsDi5jaPXT9HEExXf2Wu0EnTrCwBpcJS8XTROEE6c5kiTWlNHirqysrMQiHFnOwHh0VTBbnygqalGUpt31CBjayTZWbAuuiN0WC2278847O796YeuWi6656KItnz8asQuN3E6hbsPVzn3Ipcki7kWzpfj5Z9EJJtPRZGXGWkKGyiksi2Of66/aXEQTRhlY66Sb8oRzEpn5mugudWyNpYro/BQ+SUpJrXIQnUHpZamayh5pjKeg8cD6J/rluTXwPtaWF7Z32HeQqqNMLvKhAd060jjF0WJwTWQPdShQBlFRqWKo30q+OlalXbideCzh1MAnJVkSK4gY2dATNBpe7ixbLwUz1sIoXbHVMI2rpLVguju3fw6olTAUa+uHLx0o6Ii9k9XijnUcNSpQF80yzaJyPqRuMbiCeGgV8pOG4+UrQknyLZVCx2tY+cTEKWaaajIdT5UKZG+QWGR/TXY+FRZjNRAlJrlyxdNsYLXG6MIcN3Zngip1bPXw2Nqw58WK57cwlNTKNw7e++ANGFqs+92x/KhCgTbTSZybuYeUzc6WTCNGkYV9aoCkEXJrehOtFauk/WZoWKkyWGZjGh1AydzpNHJILPleazVTUVezOFSxSpubmwfiFNkUAqxITRExtxECSIQ25eUfIhL27NnT9dzKu9YASuqarc/dc/CGTZdJXeGOhfHAz7IZ1gmiZu695KyhM2fJo0YSgaCUpNiAhRSsYfWTXRFG84HhHTLLrZBY0na8gsUrhR1WxSomKB138zMYC6yLdayE3YjuczjQG7oaWJ/sl1C61qwpfungDViFecZC9KrCn38N076jxGfnUHKc6Nxx06QhMuCDon0cEtAMyhAm8taw0lQPTaeAU+RRMW1WsbrzB/JXkc8JJ5zA7mxgNVBQ0PEkBnUczWQsnSummtYngMqZK2EX1X/4BkMZQnR/9JYHN21AcvaMNY6elZ3xk0kni6hZZq7JVCk7LJJ0BUn18pAw0yQNyyIzn4OOo/gkEX00a7noGQ6RKlYeIWGNEc6egv4AS+OKuVb4oCvXnk++f2ErxpSLtnz36H744DzII9YxMlnloFubhSGmUxs/xmTCxEo6XxG/O7KkSviXdgrUsWSKyKdTpA9u1rFmHeeDe8uLWeV17lh+lGdgQRKrAwOtL8KJq++TPU8/v3Ur5ylnY2154c2CfZs2zhPyhBUoH3Ih+VC+mqTK5cSDRP5pIrK3K65qT6fxBhYVqkYdEO86lv8EslemKKrcsTARMLBYAiuKomAsgyvi0Ze/WmP4n2GsL+7Zb+8BlpDE8pi51Kf+MB07VjjdEMaGGpXT3bEwCZxqYMlA2U3pIl6Sj4Y1jqw2HBwmluSqp/WLI3T13f/o569zTB9G9fqb995SFIsCh5QHLHY+qJzWqeuJEKqTzlcoZ8ESq/DZVbq+jKcRBtZMimMvlD5YQhM1LA4hf4dVo2Ndq3K1YmjdFhOpU+2686stWwA1TFs/uufgLebqeRsOjQUnl2O+W41xsl9JyZTGdOidnbvdSc461WRgTaBVzI+fnLt1LOnEtuwsoVzPY8vAYnHWurgVcV5SdTz6kSdTcSq+994Hb7HQ3g2XHhJrvPSeaGGcVeSF2UaxNJ8iGsaR2SYi4ThWMAl5OWGdJ6eOGVUihgcZWN0iT0utcsdClhuGtXgJ1UdC6jplx32//rjyIs/GWv3gJotYrnjGgrypTET0NJGFzzeZQsnGh/GKbPCmVJG+zhJrl3SHw/FwkbMTjpLBJq5dTMLCXbF6KQDCta5YYbNmUr6ONV/DWk8LYzSuvh2f3vTYHR+vXDPcWNc8iHnTgnq6QtajPGP5ikc5UKzOmbCcFwmrbZ3aIBN2LfmMmTFxHJWoKzAnLPngtUmDgdUmsKZBrljFxCpRDKz5KtYiWgQswdUXf9uFay/0wIVU/PU9q2+4ZUE1dch6lGes80XmKuMPLhW1jnDxkc2F6qRqDDUyoOyMtpqe5ITlz26sTfHcsBpJ6gknrBKr1Zq1WX8OwFK5WqMQCCOl4II3XXghuH5YifjuPrJW35CwoIW2A4vlEYszl752GIcGf0wlVLVhfemn1l1ym9pWrMoXR7x4NrCQIwq1Asa5TlibBWkOy1GqY7moSUx1HwKXiIQLday+HU+uXXYhdOMdH7hyXXPXR2ysDRu2ESK81HAsSI4NmYPPwPkonl9I3U6z8Hs4pYuKaaIL1gyeFMuwaTKw2AkMecRKM9NpwMrMzFy8mF8LacnOxTGsa3e8BWOpXGvAZUwwXr/3XszdF6CaGKuVAq73hHUcZmxSybJUM1mvlSFBcXmShozuIGbTKXpBrZ2xTDxLhkrY2GNoUCZAsrjlrVx3rNJOGAtYizRZaOFueURP3nTjhRrXH8722vrFSwf29+yO3V5N9dtjpbZ5wkLCT0mx2Wwp0Wp5F/N0nKMBcwacMldnTuVAaWpqaXO0o4iOmiLmyLUptpQygXUiNeI4LZ7C+OY2HNs6yZcsq8pSndSkYvWXQmWluQ6iEwOB5VFvr2Ukw156vHjh0X374slNnrBGTKeiouTkZFwcLlNZKOFcNMwQDecc71JYmcpt55I5PrkomXxFSiccmymE939lO3B9yV0Sq4JUWWBcsejXZKHqKH5fRJ9+ozK5ja81W7576UBfR1RLy7Z6qt/WIlUNrOGaOpmETgx3bwCV1AnTvI4f7e09OsgrPEBPDMaug5+4ISTQaGfc83xxiyHf0zSs0awTJx5tkljLMyFtbLW2tsasj7yQ44XBxfFQXWfdc3D1DZtQCxBja8MGT2PLMNhIaITHhkNr0oiRxi4Qjifp7bh3lKfHZ8wynER0ySXzWRdnciTkKa8I7i5cyF8iuK/Me3P1DTsLuCoqIuFcPRL+dzo0luTK5LyF9BUfcyOM5aLHJBdn4gdvYaq5V3Pe4oMjGUtwZWKWAayLpbHcuX5ceQ0vSGCsuSjcFBTwLGMu67/GCiOrLJae444luZZiTpg5/+Kix5fBWMO4Hnt9y5bf71l96y2iQF8wt17uw0L/MVYglst1dXXlNMUDFrgyl1A1sDwZC7rj5z+fY6qEuRKLqOfquVL/IZaxp4vs6AELXJlYb83PfKoVYdCDli377f0H4YJ9sszWQ7S34PCwRpn+ZU07NSQkZJrJDeshlSuTV8eLD2GstWtf2QgquKDE6qD6gr/DmjX72Nnnj/c/1h+VIl89K40K85cKk6zjz5iKS88JnDF5hnrBrGOcdE6Y8ff8RroMqICReLnlCs9Yy+dbaP2S+Z6Mteymz97rvZVdUKsexlILfPCQWKOJFUo0k8iCfwGmEaeOPdWXDPnK74PQZFw6lghrFcjfm1w1GWNn6vjxYvfHazwk09hk/pWetv3D/U4KOilw1KSRk0YG+p0RKLEuv0TV0oW0cMdPw41149pl7x54fzVsFaPVsREIdyccGmsM3Z5dUpJB1ofJMUA1DkCgF8DDbhartxPTIK4MZCQSNayjvNxeYosGUUOGk9Ylkp86ciryko3HMZESs4rEi+01ZSaxxhpPTGJpXAiFtP6ztcP9752D1gOrb2UqtX5YgKG16+o5h8Q6Xpb3UBVLrFVIKaPpyC79tWRRNHHgOgOrDAehLkBtnHamjMLixbXM1ki+ZE+HErFKS2dhrTkr/EQsrSvwaiC/cH8scRx56c0ZZDFjxmnPy8ATE1gaF8eMTzF1d/W/tW9/a32aTYVoodVFEzqI5mCYHQrrFCp9raZSSa9UUvqT8pX+GjqZOtuVHMuq6LrmuujoftQnThdfCcgmKlXoYTlTxfQ8KRXLw0e686CcIWWQZE3EUBexPwqsZmBB8GSlNB3PJ02u5wYQEwWWzrWcCOssV6gbX0l/FaPq8Z16qY2xUCgVw+wQWOhMHOUo9sLCfqW0tHCghnyDqMiG2gzllWURDWHReAJGWjl6xlglih0VaB6EqASTNaWypqELv1GaQJrR1tbdllNS4nC0defkpMMfHemUi7VoLtAacIzrcovwp5U0rJhLKuJpjMTSuZbSrmU3ug6qdw52Ju5n/wOVJvFFmw5gQZ6xRkusit7EzUp2YmdvuZkgS7edqJsNFM1YZLm9W2nsovwkFEkbC9vjzIxVRTXqVp7ZDqwxCDvU/AhBic1tPKGnWqVEx0pVbmasQoIXK9FGAmMsKbYWorsr1HvvH7h1376dO1sjIZ0LuyjUo4Z6j1jYzU8qtfWXKe16IdrSUFPMcCVKg4ZlV1hU1x6dpgAlTljriXJRcatD38sZy4t4VyiL+CYHLgiHx3arWF2UgrU3anPt+JwMW+pgU9OKnJtpllyYLF++lLV86VOYNxkxfe0779389OqDB+KjYnY6bVhCO+GDO40dy55hWJPxmbb2FGu5LSWxMy1pHQJfkdhqKC8fUrrLrRIrubFOKWyTGwVtRdGKwFqVF91bVjaY1EgSi5Jz2sqU0meGhrCbPOSgcYhDtVQosMqJi2fYnY6rHIzOsLX3s5VX0ESBtUgXvXKTDrXs3fcSOw/csr91idmyaLdxDRb5uxcRVe+O1dXi2Qm7Ffug0t/YWKrkd6HDJTkozypCKXWMBTv04r1MsXU5UCSsk1hVRMnNsnKbyFhs07g0cVea2BpCc76K1WlRHqEgIjQQN3cl02Z1zutprY9A8e4Nr766b5893kyHIU8hIwXOEqewJdrjeN9OjGxa0VSlFDY5hLXUSGgufQ2BvgE+JsZWnSNNsTmyEf+iKwRWvJJqsZgh/Ey2wFpsojqBZbcqz9Bx0zHCbM3r2B3ykFiwTea66JeFGeSpz95d/Wri/v2t+5bsXhRVjStcFBVFVB+1MEocQy0t7t/K4h3jpNr8pGdrbBjGA6mUjY0pSkbdk0AA09U6YVE+B/jexFRFRsKq1KbBCntxd6nyhIpVRoZ8RdWbogVWfDbuPxdOaKvCpUqZUkei9gnNpIeWS1351FtrESfWvv3KrUhUt976+AOos7Uu5g2HxSgFqOrr28kBI6GvQAhDq2AXTff4RbPXiBRbVRWqlSXkMxJY7DE5MhIiHTOWDPBoNDci9/oQvMpM4uYcsucJrCLezJwEjRqFl9yXTmwSWOkDiEVhMhI2krKqUmlEqguR37Raf6UMhU89uQxD6q1v3+89sBpMD2S2zoew4UDXtkZeHKmpr6+eYhMi+iK0edSc7RTkaWw1Kuh/bn5+JYYK0UjVWgZWYDCCQmMFWyujP6sYOc1Pji1rRrZjRQVGi47lbTJ0NnU1dkprdTnwKEzs3RZlBciwR5hml98A86KFV14pwHbc982F9z2Z/uo+YahMIBlYXPVVxTOMiBjn/eVqmuGGhb1HG+qwjdFPPPvss19m5apYdZSlYXXR7GCxc5rGWAgTBFkkFlrjSnPNdDNjAT3X5atip5/CswyBlYejMzHjQmhUcuyI+48gKiEbQ/5IXJJr/ZOvPLAj/db99n2AQhZzwTL2zSMJMwznffMeMpvchL3EMlirVIHibLdHS6y4VFuzxOpGR4jsNmzplSAUEquk36HOMiixwRFdCFRgcU3bQROdqAhCo53q4IHQaOpSMoAFR+btmG6VKxReKLiWP7XjqaUPPP5AFC1Zeok7ls6FfRULPNDgiogib/dKGhEsM6R0cr0zY8UKpZ3MkyiZw7bESucNB3SnDq6G7tVuhmwi2yaVZWevKy7PKm7Izm5TBsWlZgpwru23PdM02K9UDqYpdYNNQxVse0u8UqlUOZTCrAF4uo/8aq0FVOBiITE/sBtLMIMrk7Ey9f1l3rLsMDaYQdVD+FRXcSxw4NPiCWoW23NBKDmk1dp5x+NhmCCbh1t6J5G3F2WpJfT8ZLaWi4BVYWtwWc8TKS56BhGmDgkwf8CeDw+kWlni5xL+Io0LumT5JajFAwtywwJXTB9KvzF9kQZXRAsiqpumUHl2ERVnY1PhJMrKy7NSqD+csIgAVO6w0pRQKsf6AafTOBlYs1kZRF7HU012iaFsK9jjyftol50Y681QlnhBdiL8S866GZfC/3CmYh1DtETngpYCZL3OZWCxFkdxvHCaH0Zup5kw1rD1FhOgn9xrPp7CsYlCzhW/mWCawr/0HS/W9AFBJDX2ONPR08lVExBXJo83GeJbXRUSQiFePMMNpuBw01k+/KlCk925FqGoIbk0LG3DsoO0PTCVCg1nm4ZryllTTSfgBQX4+cmShCxTHx0eIN6wNtcUdtZs6BhuGHHa7GN1zT7LH+WOYQUL/6OhAPGCcBf+jQyARSW+8d8hvA0uOcDqUY9aOp+5NKz5gupaREHYyuAC1ammI1Y+MIIT19KHiOqXLxf20rDmg+piJJZWXqNoZLFHNJUYAfVLLje4EO8WSq6lOlZmZD0OFxuJebeFsFN4RGviUQDbveQ2jWs9uGQhAFi3LX+IN5iruY4ov8VxbU9HLKBCLzAd6ToVYP9MoWNM/wdNCwo102FqZujk80xHrv4CWUyMHqIvW3YAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAoCAYAAAD32nqhAAADEklEQVR4AbWWNZgkZRCG3+rZOV3D3Z3za9xJcHc6wXsXi4jIyNAYmfw5C3HIcc7dMnzd/f/Y6+efembOtdrtra++qhVOaAxedvOH/Rdc+yEHiYQDhObd0RgU2oPUvuf8iAHDU5OZiUYza+zr68+OGADWJkAIRNsRAYYW3JkKloIwQGhp71kL0sNXEMj9PCJCID8sgO54sjExMiQMQyhCyHTavMZDAsZ6+zJBI+CfAkhq7BHZYZSgXBJgmIFEEWZGUMgPChi//v5UkJpF62okFFAp7Wi5Mj2wghByJCRBhFiVYMR7rsIBbp6CMsxT4qEIEghl/7mZNYCJkTE3D2K2ahesrqONNjqa7QPAQm61rkleguGqCq6mQl4H0C2PpIhUqslW86GIUL8m7ZhzfuqAALl/6CfyBYwI985MTZEXAD35ZCNmGW68sHKZ8lvtzP3xC5p+/YZZb78J5YZojbe0MLOBTrIgNWIxuxkNbzxP+SX3iVmvvwBBDL3zEZIohgoaJ7u7s0SQu+g4Aw0P3c3eMeOpB/Ekvidv2PbJe0xJKAQEKIirW1soUx+TJ7ey+/tVSBDiuyZIlCQVdyaiu3v72Du6untRVOmjbuGzhNa5y8xsMBqPBP/818m/HV1MTExObxP8/W8Hf/7dUVsBZslg69wZyw1g09ZdnwUpV4iNCyJIQCE3HoUkQMU5ZpWbrl3YlgCUoIKo7bPLrJts7xQkCRUfpKuuunQ1xmqA+mkuQF47ojreq29IF66OAE9RqPCBQhQfSxgFyBVYzF4HKJ3SvAzToMsUHq4GEAw2zSot2wcw7/TTBw1bhvC5rw2LTDMtmzdv3mA9wK+SStVA7asgqiq7/H0AC6fNNNnqav340FQ7k0ybd9Xqg/1WLgySaooGN1JE8w4GKNG6LEkY9F9p/iveps1j2T4J2TdYu2H7Z1LIg+QKBJXrlsxrO6gCV1EuVTDz+iUolZIKRxJrNmz9/fd1W/Tb2s2aPv5+xP8fJFCxqMKwyhEDyqVTlpkxCBqcVT5lGUcTqzdu+2D1+i0fcCLjf0XElF4DYemFAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAYAAADwdn+XAAAASklEQVR4AWPAB9JKWqNAmIEckFHS2pBW1PofhEFssjUjG0KGZkxDyNGMaQhhzYQNwQhtkAQpGCV20ovbQtKL2r4RqxmkFqQHpBcA3gqccd9+wbMAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAiCAYAAABr0zihAAABkUlEQVR4AWKgCsgs61RPK2p9llbVLwnopBwe5AiiMB7nGtu2nXNs28kwLMQY1atYp+SWY2xbf8ga17V7G4t+vdtVsztofr+Hr5AWECDwwASMAJGX9GJ6s0+QQJkDQGYsZnRSA2ZUR+z8QwRW+4qP3b/f3Yxa4AYCVLz3BYIUNiOx+Q9SURs4c3WYT/3wyAs4ECRbiK3mzBeFrQGWxbHYry44OoP5XiFqnstNnvrlQxVgZv/qrT9fAZh/qAvw66NtsWEYHU37KputlN9CTMSCBD64+zKv4zZw4rzoj6IxkULZTVutHkxgkv0gQuVc1CCDoHI6mORG1CCHlRpAnMAZxBQ1QIDgDNfHKgGrZjcQ4ddnqDMwsRuPKizWZJAbkK1cLlUD9OoyBBC5RQlECYzzzJu4ErCnNhHFzYB4iwQ+1v5vAojI0QMU7rvLOnYO+mqshQO4D7lDCRw7fW2IPefb1AcVf1zbS2X4rOyp2yLDqCwGh/TbJBXVrvF4l45b71zACy0QIbeGmsInZnlP0Y7X3k89HCaJpH6+oPwAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABdSURBVHgB7dTBCQAhDATA9bgO7grQGuy/BGvQBqxBMS/B1woiYgbyCcIiLAHUWT4fZQgv8xgGFqQHi2nA/gAzbFoNJ9oiChJycP1q+Q84vy8yBG3RBQHcNW09V8epFRQL9pWRYd8AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA4SURBVHgB7cixEQAQEEXBTwsaoAb9l6AGGlADQjMCM5dc8jZcCQC+wjOp9rNZFktDs5W7ogDA3wZy7gUEOT7xUAAAAABJRU5ErkJggg=="},,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFNWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHRpZmY6T3JpZW50YXRpb249IjEiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA1LTI2VDE2OjUyOjAxKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wOC0wN1QxMDo0OTo1OCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wOC0wN1QxMDo0OTo1OCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5OGM1MjA3My00NzRmLTQ5YTUtYTBiMy04YTBiNjUxOTg4MTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OThjNTIwNzMtNDc0Zi00OWE1LWEwYjMtOGEwYjY1MTk4ODE5IiBzdEV2dDp3aGVuPSIyMDIwLTA4LTA3VDEwOjQ5OjU4KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BNIWNwAAANBJREFUOI2lk7FtwzAQRZ9UpPIGAtyr8RaZwMgA2SGtN/AGadMZaTyFao9gQJ1bw0AKPTdHwTBCkUgO+MDxePcIkneNSsE64Dv8LTAuZqtLelcv6i10iVi2JrexUo8PoGcdI6cK+KqOC7CkMXKzwFb9VK8VsKRr1LSJ08SnbIADsC79UMbOwBtwatQd8AG8/BGW7AfYN+qtJjH84sEl4HyVWBefps3EJ+AL6B9ghN/H3vRrZW071LbXMzDbsLUDkIDFkSpoHlHUQe3+AUvq1OEOLQ87IC/d1y4AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABqSURBVHgB7dDRCYAgGATgqwkcwQ1rE0d0hEa4LhAq7I8/89EPDnzQEw5wILkoK3pQUVS2kog/VBCUzNNxDmilx4m1hBZlN8u3PS+7Wfx7Puxmya49jd0s1Z6T4wPeHsjb/RmdjcJROAo9do2y5zKNIp3eAAAAAElFTkSuQmCC"},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(t){function i(t,n){var i={seen:[],stylize:r};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(n)?i.showHidden=n:n&&e._extend(i,n),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),s(i,t,i.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function r(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function s(t,n,i){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(i,t);return g(o)||(o=s(t,o,i)),o}var r=l(t,n);if(r)return r;var v=Object.keys(n),p=a(v);if(t.showHidden&&(v=Object.getOwnPropertyNames(n)),E(n)&&(v.indexOf("message")>=0||v.indexOf("description")>=0))return u(n);if(0===v.length){if(T(n)){var m=n.name?": "+n.name:"";return t.stylize("[Function"+m+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return u(n)}var _="",y=!1,x=["{","}"];if(h(n)&&(y=!0,x=["[","]"]),T(n)){_=" [Function"+(n.name?": "+n.name:"")+"]"}if(b(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),E(n)&&(_=" "+u(n)),0===v.length&&(!y||0==n.length))return x[0]+_+x[1];if(i<0)return b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var S;return S=y?c(t,n,i,p,v):v.map(function(e){return f(t,n,i,p,e,y)}),t.seen.pop(),d(S,_,x)}function l(t,e){if(x(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return _(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):p(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,i,o){for(var r=[],a=0,s=e.length;a<s;++a)L(e,String(a))?r.push(f(t,e,n,i,String(a),!0)):r.push("");return o.forEach(function(o){o.match(/^\d+$/)||r.push(f(t,e,n,i,o,!0))}),r}function f(t,e,n,i,o,r){var a,l,u;if(u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},u.get?l=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(l=t.stylize("[Setter]","special")),L(i,o)||(a="["+o+"]"),l||(t.seen.indexOf(u.value)<0?(l=p(n)?s(t,u.value,null):s(t,u.value,n-1),l.indexOf("\n")>-1&&(l=r?l.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+l.split("\n").map(function(t){return"   "+t}).join("\n"))):l=t.stylize("[Circular]","special")),x(a)){if(r&&o.match(/^\d+$/))return l;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+l}function d(t,e,n){var i=0;return t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function p(t){return null===t}function m(t){return null==t}function _(t){return"number"==typeof t}function g(t){return"string"==typeof t}function y(t){return"symbol"==typeof t}function x(t){return void 0===t}function b(t){return S(t)&&"[object RegExp]"===P(t)}function S(t){return"object"==typeof t&&null!==t}function w(t){return S(t)&&"[object Date]"===P(t)}function E(t){return S(t)&&("[object Error]"===P(t)||t instanceof Error)}function T(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function P(t){return Object.prototype.toString.call(t)}function I(t){return t<10?"0"+t.toString(10):t.toString(10)}function k(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function C(e){function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var r=this,a=function(){return o.apply(r,arguments)};e.apply(this,n).then(function(e){t.nextTick(a,null,e)},function(e){t.nextTick(M,e,a)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,R(e)),n}var R=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++)n[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return n},N=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,o=arguments,r=o.length,a=String(t).replace(N,function(t){if("%%"===t)return"%";if(n>=r)return t;switch(t){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return t}}),s=o[n];n<r;s=o[++n])p(s)||!S(s)?a+=" "+s:a+=" "+i(s);return a},e.deprecate=function(n,i){function o(){if(!r){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),r=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,i).apply(this,arguments)};var r=!1;return o};var B,O={};e.debuglog=function(n){if(x(B)&&(B=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!O[n])if(new RegExp("\\b"+n+"\\b","i").test(B)){var i=t.pid;O[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,i,t)}}else O[n]=function(){};return O[n]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=v,e.isNull=p,e.isNullOrUndefined=m,e.isNumber=_,e.isString=g,e.isSymbol=y,e.isUndefined=x,e.isRegExp=b,e.isObject=S,e.isDate=w,e.isError=E,e.isFunction=T,e.isPrimitive=A,e.isBuffer=n(1040);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",k(),e.format.apply(e,arguments))},e.inherits=n(1001),e._extend=function(t,e){if(!e||!S(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t};var z="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,i=new Promise(function(t,i){e=t,n=i}),o=[],r=0;r<arguments.length;r++)o.push(arguments[r]);o.push(function(t,i){t?n(t):e(i)});try{t.apply(this,o)}catch(t){n(t)}return i}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(z&&t[z]){var e=t[z];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,z,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),z&&Object.defineProperty(e,z,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,R(t))},e.promisify.custom=z,e.callbackify=C}).call(e,n(1012))},function(t,e,n){"use strict";function i(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoord=i}]);
/*! library: visualization */
Seiya = window.Seiya || {};
Seiya.__load = function(onLoad) {
    onLoad({
        key: 'OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77',
        version: Seiya.__version,
        loadScriptTime: 1643013694685
    });
    delete Seiya.__load;
};

Seiya.__version = '1.1.4.3';
/*! @version 1.1.4.3 */
!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=275)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=i},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}e.a=r},function(t,e,n){"use strict";function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.a=i},function(t,e,n){"use strict";function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n.i(r.a)(t,e)}e.a=i;var r=n(170)},function(t,e,n){"use strict";function i(t,e){return!e||"object"!==n.i(r.a)(e)&&"function"!=typeof e?n.i(a.a)(t):e}e.a=i;var r=n(43),a=n(27)},function(t,e,n){"use strict";function i(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}e.a=i},function(t,e,n){"use strict";var i=n(112);n.d(e,"e",function(){return i.a});var r=n(236);n.d(e,"i",function(){return r.a});var a=(n(454),n(455));n.d(e,"b",function(){return a.a}),n.d(e,"c",function(){return a.b}),n.d(e,"f",function(){return a.c});var o=n(74);n.d(e,"a",function(){return o.a});var s=n(452);n.d(e,"g",function(){return s.a});var u=n(5);n.d(e,"h",function(){return u.a});var l=n(237);n.d(e,"d",function(){return l.a})},function(t,e,n){"use strict";var i=n(158);n.d(e,"k",function(){return i.b}),n.d(e,"l",function(){return i.c}),n.d(e,"c",function(){return i.a});var r=n(244);n.d(e,"m",function(){return r.a}),n.d(e,"a",function(){return r.b}),n.d(e,"d",function(){return r.c}),n.d(e,"b",function(){return r.d});var a=n(461);n.d(e,"g",function(){return a.a}),n.d(e,"h",function(){return a.b});var o=n(459);n.d(e,"q",function(){return o.a});var s=n(242);n.d(e,"p",function(){return s.a});var u=n(115);n.d(e,"o",function(){return u.c}),n.d(e,"n",function(){return u.d});var l=n(76);n.d(e,"e",function(){return l.a}),n.d(e,"f",function(){return l.b});var c=n(462);n.d(e,"j",function(){return c.a});var f=n(243);n.d(e,"i",function(){return f.a})},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(126),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports={default:n(341),__esModule:!0}},function(t,e,n){t.exports={default:n(346),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(244);n.d(e,"isWebGL",function(){return i.a}),n.d(e,"isWebGL2",function(){return i.b});var r=n(243);n.d(e,"cloneTextureFrom",function(){return r.a});var a=n(76);n.d(e,"getKeyValue",function(){return a.a}),n.d(e,"getKey",function(){return a.b});var o=n(154);n.d(e,"createGLContext",function(){return o.a}),n.d(e,"destroyGLContext",function(){return o.b}),n.d(e,"resizeGLContext",function(){return o.c}),n.d(e,"pollGLContext",function(){return o.d}),n.d(e,"setContextDefaults",function(){return o.e});var s=n(75);n.d(e,"trackContextState",function(){return s.a});var u=n(59);n.d(e,"resetParameters",function(){return u.a}),n.d(e,"getParameter",function(){return u.b}),n.d(e,"getParameters",function(){return u.c}),n.d(e,"setParameter",function(){return u.d}),n.d(e,"setParameters",function(){return u.e}),n.d(e,"withParameters",function(){return u.f}),n.d(e,"getModifiedParameters",function(){return u.g});var l=n(114);n.d(e,"getContextInfo",function(){return l.a}),n.d(e,"getGLContextInfo",function(){return l.b}),n.d(e,"getContextLimits",function(){return l.c}),n.d(e,"glGetDebugInfo",function(){return l.d});var c=n(113);n.d(e,"FEATURES",function(){return c.a}),n.d(e,"hasFeature",function(){return c.b}),n.d(e,"hasFeatures",function(){return c.c}),n.d(e,"getFeatures",function(){return c.d}),n.d(e,"canCompileGLGSExtension",function(){return c.e});var f=n(46);n.d(e,"Buffer",function(){return f.a});var d=n(119);n.d(e,"Shader",function(){return d.a}),n.d(e,"VertexShader",function(){return d.b}),n.d(e,"FragmentShader",function(){return d.c});var h=n(159);n.d(e,"Program",function(){return h.a});var v=n(91);n.d(e,"Framebuffer",function(){return v.a});var g=n(118);n.d(e,"Renderbuffer",function(){return g.a});var p=n(92);n.d(e,"Texture2D",function(){return p.a});var _=n(160);n.d(e,"TextureCube",function(){return _.a});var m=n(117);n.d(e,"clear",function(){return m.a}),n.d(e,"clearBuffer",function(){return m.b});var y=n(466);n.d(e,"FenceSync",function(){return y.a});var b=n(245);n.d(e,"Query",function(){return b.a});var E=n(246);n.d(e,"Sampler",function(){return E.a});var A=n(247);n.d(e,"Texture3D",function(){return A.a});var x=n(468);n.d(e,"Texture2DArray",function(){return x.a});var T=n(161);n.d(e,"TransformFeedback",function(){return T.a});var P=n(248);n.d(e,"VertexArrayObject",function(){return P.a});var w=n(249);n.d(e,"VertexArray",function(){return w.a});var C=n(469);n.d(e,"UniformBufferLayout",function(){return C.a});var k=n(116);n.d(e,"_Accessor",function(){return k.a}),n.d(e,"_clearBuffer",function(){return m.b});var S=n(148);n.d(e,"Object3D",function(){return S.a});var R=n(206);n.d(e,"Group",function(){return R.a});var M=n(89);n.d(e,"Model",function(){return M.a});var L=n(204);n.d(e,"AnimationLoop",function(){return L.a});var I=n(207);n.d(e,"pickModels",function(){return I.a});var O=n(413);n.d(e,"encodePickingColor",function(){return O.a}),n.d(e,"decodePickingColor",function(){return O.b}),n.d(e,"getNullPickingColor",function(){return O.c});var F=n(416);n.d(e,"Transform",function(){return F.a});var N=n(205);n.d(e,"_Attribute",function(){return N.a});var D=n(414);n.d(e,"_ShaderCache",function(){return D.a});var B=n(203);n.d(e,"_AnimationLoopProxy",function(){return B.a});var U=n(423);n.d(e,"_MultiPassRenderer",function(){return U.a});var G=n(225);n.d(e,"_RenderState",function(){return G.a});var j=n(53);n.d(e,"_Pass",function(){return j.a});var z=n(149);n.d(e,"_CompositePass",function(){return z.a});var W=n(421);n.d(e,"_ClearPass",function(){return W.a});var H=n(425);n.d(e,"_RenderPass",function(){return H.a});var V=n(422);n.d(e,"_CopyPass",function(){return V.a});var X=n(426);n.d(e,"_TexturePass",function(){return X.a});var Y=n(424);n.d(e,"_PickingPass",function(){return Y.a});var K=n(226);n.d(e,"_ShaderModulePass",function(){return K.a});var q=n(420);n.d(e,"_Canvas",function(){return q.a});var Z=n(52);n.d(e,"Geometry",function(){return Z.a});var Q=n(208);n.d(e,"ConeGeometry",function(){return Q.a});var J=n(209);n.d(e,"CubeGeometry",function(){return J.a});var $=n(210);n.d(e,"CylinderGeometry",function(){return $.a});var tt=n(211);n.d(e,"IcoSphereGeometry",function(){return tt.a});var et=n(212);n.d(e,"PlaneGeometry",function(){return et.a});var nt=n(213);n.d(e,"SphereGeometry",function(){return nt.a});var it=n(109);n.d(e,"TruncatedConeGeometry",function(){return it.a});var rt=n(217);n.d(e,"Cone",function(){return rt.a});var at=n(218);n.d(e,"Cube",function(){return at.a});var ot=n(219);n.d(e,"Cylinder",function(){return ot.a});var st=n(220);n.d(e,"IcoSphere",function(){return st.a});var ut=n(222);n.d(e,"Plane",function(){return ut.a});var lt=n(223);n.d(e,"Sphere",function(){return lt.a});var ct=n(224);n.d(e,"TruncatedCone",function(){return ct.a});var ft=n(110);n.d(e,"ClipSpace",function(){return ft.a});var dt=n(419);n.d(e,"setPathPrefix",function(){return dt.a}),n.d(e,"loadFile",function(){return dt.b}),n.d(e,"loadImage",function(){return dt.c}),n.d(e,"loadTexture",function(){return dt.d}),n.d(e,"loadFiles",function(){return dt.e}),n.d(e,"loadImages",function(){return dt.f}),n.d(e,"loadTextures",function(){return dt.g}),n.d(e,"loadProgram",function(){return dt.h}),n.d(e,"loadModel",function(){return dt.i}),n.d(e,"parseModel",function(){return dt.j});var ht=n(152);n.d(e,"setDefaultShaderModules",function(){return ht.a}),n.d(e,"registerShaderModules",function(){return ht.b});var vt=n(227);n.d(e,"assembleShaders",function(){return vt.a});var gt=n(229);n.d(e,"normalizeShaderModule",function(){return gt.a});var pt=n(232);n.d(e,"fp32",function(){return pt.a});var _t=n(233);n.d(e,"fp64",function(){return _t.a});var mt=n(153);n.d(e,"project",function(){return mt.a});var yt=n(234);n.d(e,"lighting",function(){return yt.a});var bt=n(231);n.d(e,"dirlight",function(){return bt.a});var Et=n(235);n.d(e,"picking",function(){return Et.a});var At=n(230);n.d(e,"diffuse",function(){return At.a});var xt=n(441);n.d(e,"pbr",function(){return xt.a});var Tt=n(5);n.d(e,"assert",function(){return Tt.a});var Pt=n(74);n.d(e,"log",function(){return Pt.a});var wt=n(73);n.d(e,"global",function(){return wt.a}),n.d(e,"window",function(){return wt.b}),n.d(e,"document",function(){return wt.c}),n.d(e,"self",function(){return wt.d});var Ct=n(112);n.d(e,"isBrowser",function(){return Ct.a});var kt=n(236);n.d(e,"isOldIE",function(){return kt.a});var St=n(237);n.d(e,"stubRemovedMethods",function(){return St.a});var Rt=n(155);n.d(e,"makeDebugContext",function(){return Rt.a}),n.d(e,"ClipSpaceQuad",function(){return ft.a}),n.d(e,"glGet",function(){return a.c}),n.d(e,"glKey",function(){return a.d}),n.d(e,"glKeyType",function(){return a.e}),n(214)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(55),a=i(r),o=n(22),s=i(o),u=n(324),l=i(u),c=n(39),f=TMap,d=f.GradientColor,h={};!function(t){["Number","String","Function","Undefined","Object","Array","Boolean"].forEach(function(e){var n=function(t){return"[object "+e+"]"===Object.prototype.toString.call(t)};t["is"+e]=n})}(h),h.isNaN=l.default,h.isInteger=function(t){return t%1==0},h.isNull=function(t){return null===t},h.isPositiveNumber=function(t){return h.isNumber(t)&&t>0},h.isNonNegativeNumber=function(t){return h.isNumber(t)&&t>=0},h.isInRange=function(t,e){return function(n){return h.isNumber(n)&&n>=t&&n<=e}},h.isValidLatLng=function(){var t=void 0,e=void 0;if(1===arguments.length){var n=Array.prototype.slice.call(arguments),i=n[0];if(h.isArray(i)){var r=(0,s.default)(i,2);t=r[0],e=r[1]}else t=i.lat,e=i.lng}else{if(2!==arguments.length)return!1;var a=Array.prototype.slice.call(arguments);t=a[0],e=a[1]}return!(!h.isNumber(t)||!h.isNumber(e))&&(Math.abs(t)<=90&&Math.abs(e)<=180)},h.isValidColor=function(t){return h.isArray(t)?(3===t.length||4===t.length)&&t.every(function(t){return t>=0&&t<=255}):!!h.isString(t)&&(c.HEX_REG.test(t)||c.RGB_REG.test(t)||c.RGBA_REG.test(t))},h.isValidGradientObject=function(t){return t instanceof d&&(!!h.isValidGradientStops(t.stops)&&!!h.isNumber(t.angle))},h.isValidGradientStops=function(t){if(h.isUndefined(t)||h.isNull(t))return!1;for(var e in t){var n=t[e];if(isNaN(parseFloat(e))||!h.isInRange(0,1)(parseFloat(e))||!h.isValidColor(n))return!1}return!0},h.checkGradientNum=function(t,e){return e&&2===(0,a.default)(t.stops).length?{result:!0,gradient:t}:!e&&(0,a.default)(t.stops).length>=2?{result:!0,gradient:t}:{result:!1,gradient:null}},h.checkGradientObject=function(t,e){if(h.isValidGradientObject(t))return h.checkGradientNum(t,e);if(h.isValidGradientStops(t)){var n=new d;for(var i in t){var r=t[i];n.addColorStop(parseFloat(i),r)}return h.checkGradientNum(n,e)}return{result:!1,gradient:null}},h.isValidEnum=function(t,e){return e.some(function(e){return t===e})},e.default=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(326),a=i(r),o=n(179),s=i(o),u=n(66),l=i(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,l.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(a.default?(0,a.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(66),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){var i=n(23),r=n(10),a=n(47),o=n(50),s=n(49),u=function(t,e,n){var l,c,f,d=t&u.F,h=t&u.G,v=t&u.S,g=t&u.P,p=t&u.B,_=t&u.W,m=h?r:r[e]||(r[e]={}),y=m.prototype,b=h?i:v?i[e]:(i[e]||{}).prototype;h&&(n=e);for(l in n)(c=!d&&b&&void 0!==b[l])&&s(m,l)||(f=c?b[l]:n[l],m[l]=h&&"function"!=typeof b[l]?n[l]:p&&c?a(f,i):_&&b[l]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):g&&"function"==typeof f?a(Function.call,f):f,g&&((m.virtual||(m.virtual={}))[l]=f,t&u.R&&y&&!y[l]&&o(y,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=i},function(t,e,n){t.exports=n(410)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.AJAXError=e.DeprecatedError=e.EnumError=e.ClassTypeError=e.BaseTypeError=void 0;var r=n(66),a=i(r),o=n(12),s=i(o),u=n(16),l=i(u),c=n(15),f=i(c),d=n(8),h=i(d),v=n(9),g=i(v),p=function(){function t(e){(0,h.default)(this,t),this.message=e}return(0,g.default)(t,[{key:"warn",value:function(){console.warn(this.message)}},{key:"error",value:function(){console.error(this.message)}},{key:"throw",value:function(){throw new Error(this.message)}}]),t}(),_=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,l.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"类型错误："+t+" 应该是 "+n.toUpperCase()+" 类型, 实际却是 "+(void 0===i?"undefined":(0,a.default)(i)).toUpperCase()+" 类型。"))}return(0,f.default)(e,t),e}(p),m=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,l.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"类型错误："+t+" 应该是 "+n+" 类型, 实际值为 "+i+"。"))}return(0,f.default)(e,t),e}(p),y=function(t){function e(t,n,i){return(0,h.default)(this,e),(0,l.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"枚举错误："+t+" 的可枚举值为 "+n.join(",")+"，实际却是 "+i))}return(0,f.default)(e,t),e}(p),b=function(t){function e(t,n){return(0,h.default)(this,e),(0,l.default)(this,(e.__proto__||(0,s.default)(e)).call(this,"API使用错误："+t+" 已被弃用，请使用 "+n))}return(0,f.default)(e,t),e}(p),E=function t(e,n){(0,h.default)(this,t),this.message=e,this.status=n};e.BaseTypeError=_,e.ClassTypeError=m,e.EnumError=y,e.DeprecatedError=b,e.AJAXError=E},function(t,e,n){"use strict";e.__esModule=!0;var i=n(126),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,n){return e in t?(0,r.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(321),a=i(r),o=n(35),s=i(o);e.default=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,u=(0,s.default)(t);!(i=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,a.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(12),a=i(r),o=n(325),s=i(o);e.default=function t(e,n,i){null===e&&(e=Function.prototype);var r=(0,s.default)(e,n);if(void 0===r){var o=(0,a.default)(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var u=r.get;if(void 0!==u)return u.call(i)}},function(t,e,n){var i=n(141)("wks"),r=n(107),a=n(23).Symbol,o="function"==typeof a;(t.exports=function(t){return i[t]||(i[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=i},function(t,e,n){"use strict";function i(t){return t-(0,o.default)(t)}function r(t){var e=(0,o.default)(t);return{high:e,low:t-e}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(322),o=function(t){return t&&t.__esModule?t:{default:t}}(a);e.fp64LowPart=i,e.splitLatLngNumber=r},function(t,e,n){"use strict";function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.a=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TYPE_ID={HEAT:"heat",ARC:"arc",AREA:"area",DOT:"dot",TRAIL:"trail",PIPE:"pipe",GRID:"grid",HEXAGON:"hexagon",PATH:"path",RADIATION:"radiation",WALL:"wall",PRISM:"prism"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UNIFORM_PART="\n    uniform mat4 uMatrix;\n\tuniform vec4 uCenter; // xHighPart, yHighPart, xLowPart, yLowPart\n\tuniform float uZoom;\n\tuniform float uProjMode;\n\tuniform float uMapScale;\n\tuniform vec3 uProject_uCommonUnitsPerWorldUnit;\n    uniform vec3 uProject_uCommonUnitsPerWorldUnit2;\n\n    uniform vec3 uPixelsPerMeter;\n\tuniform vec2 uResolution;\n\tuniform float uHeightScale;\n",e.PROJECTION_PART="\n    float PI = 3.141592653589793;\n\n    float degree_to_radian(float deg) {\n      return deg * PI / 180.;\n    }\n\n    vec2 fromLatLngToPoint(vec2 latlng) {\n      vec2 c = vec2(0.0, 0.0);\n\t  vec2 d = vec2(128.0, 128.0);\n\t  \n\t  // 经度转换\n\t  c.x = d.x + latlng.x * (256. / 360.);\n\t  \n\t  // 纬度转换-WebMercator\n\t  float e = clamp(sin(degree_to_radian(latlng.y)), -(1. - 1E-15), 1. - 1E-15);\n\t  float y_wm = d.y + 0.5 * log((1. + e) / (1. - e)) * -(256. / (2. * PI));\n\t  \n\t  // 纬度转换-LatLng\n\t  float y_ll = (d.y - latlng.y * (256. / 180.)) / 2. ;\n\n\t  // 根据projMode取值\n\t  c.y = mix(y_wm, y_ll, uProjMode);\n\n      return c * uMapScale;\n    }\n\n\n    vec2 project_position(vec2 latlng, float mapzoom) {\n      vec2 tileCoord = fromLatLngToPoint(latlng);\n      float dimension = pow(2., mapzoom);\n      tileCoord.xy *= dimension;\n\n      return tileCoord;\n    }\n\n    // 返回在v3 api中的3d坐标系下的坐标\n    vec2 project_view_local_position(vec2 latlng) {\n      vec2 centerCoord = project_position(uCenter.xy, uZoom);\n      vec2 p = project_position(latlng.xy, uZoom);\n\n      // return p - centerCoord;\n      return vec2(p.x - centerCoord.x, centerCoord.y - p.y);\n\t}\n\t\n\tvec3 project_offset(vec3 offset) {\n\t\tfloat dy = offset.y;\n\t  \n\t\tdy = clamp(dy, -1., 1.);\n\t\tvec3 commonUnitsPerWorldUnit = uProject_uCommonUnitsPerWorldUnit + uProject_uCommonUnitsPerWorldUnit2 * dy;\n\t  \n\t\treturn vec3(offset.xyz * commonUnitsPerWorldUnit.xyz);\n  \t}\n  \n\t// 返回在v3 api中的3d坐标系下的坐标, 采用高精度模式\n\tvec3 project_view_local_position_precision(vec3 latlngHigh, vec2 latlngLow) {\n\t\t// Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n\t\tvec2 high = latlngHigh.xy - uCenter.xy;\n\t\tvec2 low = latlngLow.xy - uCenter.zw;\n\n\t\treturn mix(\n\t\t\tvec3(project_view_local_position(latlngHigh.xy), uProject_uCommonUnitsPerWorldUnit.z * latlngHigh.z), // 防止小级别下高精模式算法问题\n\t\t\tproject_offset(vec3(high + low, latlngHigh.z)),\n\t\t\tstep(9.0, uZoom)\n\t\t);\n\t}\n\n\t// 重载\n\tvec2 project_view_local_position_precision(vec2 latlngHigh, vec2 latlngLow) {\n\t\tvec3 result = project_view_local_position_precision(vec3(latlngHigh.xy, 0.0), latlngLow);\n\n\t\treturn result.xy;\n\t}\n\n\tvoid project_for_line_precision(vec4 start, vec4 end, float startHeight, float endHeight, out vec3 startEndArray[2]) {\n\t\tvec4 startTemp = start;\n\t\tvec4 endTemp = end;\n\t\tfloat transit = 0.0;\n\t\tif (uCenter.x > 0.0) {\n\t\t\tif(abs((start.x + start.z) - (end.x + end.z)) <= 180.0){\n\t\t\t\tif((start.x + start.z) - (uCenter.x + uCenter.z) < -180.0 && (end.x + end.z) - (uCenter.x + uCenter.z) < -180.0){\n\t\t\t\t\tstartTemp.x = start.x + 360.0;\n\t\t\t\t\tendTemp.x = end.x + 360.0;\n\t\t\t\t}\n\t\t\t} else{\n\t\t\t\tif((start.x + start.z) - (uCenter.x + uCenter.z) < -180.0 ){\n\t\t\t\t\tstartTemp.x = start.x + 360.0;\n\t\t\t\t\ttransit = 1.0;\n\t\t\t\t}\n\t\t\t\tif((end.x + end.z) - (uCenter.x + uCenter.z) < -180.0 ){\n\t\t\t\t\tendTemp.x = end.x + 360.0;\n\t\t\t\t\ttransit = 1.0;\n\t\t\t\t}\n\t\t\t\tif(transit <= 0.0){\n\t\t\t\t\tif((start.x + start.z) - (end.x + end.z) > 180.0){\n\t\t\t\t\t\tendTemp.x = end.x + 360.0;\n\t\t\t\t\t}\n\t\t\t\t\tif((start.x + start.z) - (end.x + end.z) < -180.0){\n\t\t\t\t\t\tstartTemp.x = start.x + 360.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if(uCenter.x < 0.0) {\n\t\t\tif(abs((start.x + start.z) - (end.x + end.z)) <= 180.0){\n\t\t\t\tif((start.x + start.z) - (uCenter.x + uCenter.z) > 180.0 && (end.x + end.z) - (uCenter.x + uCenter.z) > 180.0){\n\t\t\t\t\tstartTemp.x = start.x - 360.0;\n\t\t\t\t\tendTemp.x = end.x - 360.0;\n\t\t\t\t}\n\t\t\t} else{\n\t\t\t\tif((start.x + start.z) - (uCenter.x + uCenter.z) > 180.0 ){\n\t\t\t\t\tstartTemp.x = start.x - 360.0;\n\t\t\t\t\ttransit = 1.0;\n\t\t\t\t}\n\t\t\t\tif((end.x + end.z) - (uCenter.x + uCenter.z) > 180.0 ){\n\t\t\t\t\tendTemp.x = end.x - 360.0;\n\t\t\t\t\ttransit = 1.0;\n\t\t\t\t}\n\t\t\t\tif(transit <= 0.0){\n\t\t\t\t\tif((start.x + start.z) - (end.x + end.z) > 180.0){\n\t\t\t\t\t\tstartTemp.x = start.x - 360.0;\n\t\t\t\t\t}\n\t\t\t\t\tif((start.x + start.z) - (end.x + end.z) < -180.0){\n\t\t\t\t\t\tendTemp.x = end.x - 360.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvec3 startNew = project_view_local_position_precision(vec3(startTemp.xy, startHeight), startTemp.zw);\n\t\tvec3 endNew = project_view_local_position_precision(vec3(endTemp.xy, endHeight), endTemp.zw);\n\t\t// vec3 startEndArray[2];\n\t\tstartEndArray[0] = startNew;\n\t\tstartEndArray[1] = endNew;\n\t\t// return startEndArray;\n\t}\n\t// 重载\n\tvoid project_for_line_precision(vec4 start, vec4 end, out vec3 startEndArray[2]) {\n\t\t//vec3 result[2];\n\t\tproject_for_line_precision(start, end, 0.0, 0.0, startEndArray);\n\t\t//vec2 startEndArray[2];\n\t\t// startEndArray[0] = result[0].xy;\n\t\t// startEndArray[1] = result[1].xy;\n\t\t//return startEndArray;\n\t}\n    // 透视投影坐标转屏幕坐标\n    vec2 proj_position_to_screen(vec4 device) {\n\t\tvec3 device_normal = device.xyz / device.w;\n\t\tvec2 clip_pos = (device_normal * 0.5 + 0.5).xy;\n\t\treturn clip_pos * uResolution;\n    }\n    \n    // 屏幕坐标转透视投影坐标\n\tvec4 screen_to_proj_position(vec2 screen, float z, float w) {\n\t\tvec2 clip_pos = screen / uResolution;\n\t\tvec2 device_normal = clip_pos * 2.0 - 1.0;\n\t\treturn vec4(device_normal * w, z, w);\n\t}\n\n    vec3 project_scale(vec3 meters) {\n      return meters * uPixelsPerMeter * uHeightScale; // 不知道v3有没有在z轴上做特殊处理，按照正常方式高度太低，这里先乘以10增加以下缩放量，(10.0被uHeightScale代替)\n    }\n\t// 根据width来做向量偏移\n\t// offset_direction is -1 (left) or 1 (right)\n\tvec2 getExtrusionOffset(vec2 line_screen, float offset_direction, float width) {\n    \n\t\tvec2 dir_screenspace = normalize(line_screen);\n\t\t// 找到法向量\n\t\tdir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n\t\tvec2 offset_screenspace = dir_screenspace * offset_direction * width / 2.0;\n\n\t\treturn offset_screenspace;\n\t}\n"},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";function i(t,e){return n.i(r.a)(t)||n.i(a.a)(t,e)||n.i(o.a)()}e.a=i;var r=n(265),a=n(269),o=n(270)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PICK_UNIFORM="\nuniform float picking_usePickingColor;\nuniform float picking_enablePicking;\nuniform vec3 picking_selectedPickingColor;\n\nuniform float picking_deltaTime;\nuniform float picking_currTime;\n\nuniform float picking_opacityFrom;\nuniform float picking_opacityTo;\n\nuniform float picking_enableSelectStyle;\nuniform float picking_enableHighlight;\n",e.PICK_FUNCTION="\n\tfloat picking_isPicked(vec3 instancePickingColors) {\n\t\tvec3 deltaPickingColor = picking_selectedPickingColor - instancePickingColors;\n\t\treturn step(0.001, length(deltaPickingColor));\n\t}\n\n\tfloat picking_useSelectStyle(vec3 instancePickingColors) {\n\t\treturn mix(picking_enableSelectStyle, \n\t\t\t0.0, \n\t\t\tpicking_isPicked(instancePickingColors)\n\t\t);\n\t}\n\n    vec4 picking_getFinalColor(vec4 vertexColor, vec3 instancePickingColors) {\n\t\tvec4 pickingColor = vec4(instancePickingColors.rgb,  255.0).rgba / 255.0;\n\t\tvec4 unselectColor = vertexColor * mix(picking_opacityFrom, picking_opacityTo, picking_currTime / picking_deltaTime);\n        \n        return mix(\n            mix(\n                vertexColor,\n                mix(\n                    vertexColor,\n                    mix(vertexColor, unselectColor, picking_enableHighlight),\n                    picking_isPicked(instancePickingColors)\n                ),\n                picking_enablePicking // 未开启拾取高亮使用顶点颜色, 开启拾取高亮后只有被拾取的颜色采用正常的顶点颜色，其他柱体增加一个透明度\n            ),\n            pickingColor,\n            picking_usePickingColor); // picking_usePickingColor为1则使用编码的拾取颜色来绘制\n    }\n"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=!0,a=!1,o=void 0;try{for(var u,l=(0,A.default)(n);!(r=(u=l.next()).done);r=!0){s(u.value,function(e,n){t[e]=n})}}catch(t){a=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return t}function a(t,e){return s(t,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function o(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function s(t,e){t&&(0,b.default)(t).forEach(function(t){e.apply(void 0,(0,m.default)(t))})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new p.default;if(null===t||"object"!==(void 0===t?"undefined":(0,v.default)(t)))return t;var n=t.constructor;if("object"!==(void 0===t?"undefined":(0,v.default)(t)))return t;if(n===RegExp)return new n(t);if(n===Date)return new n(t.getTime());var i=e.get(t);if(i)return i;var r=Array.isArray(t)?[]:{};return r.__proto__=t.__proto__,e.set(t,r),(0,d.default)(t).forEach(function(n){r[n]=u(t[n],e)}),r}function l(t,e){var n=[];return s(t,function(t){t in e||n.push(t)}),n}function c(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!e.deepEqual(t[i],n[i]))return!1;return!0}if("object"===(void 0===t?"undefined":(0,v.default)(t))&&null!==t&&null!==n){if("object"!==(void 0===n?"undefined":(0,v.default)(n)))return!1;if((0,d.default)(t).length!==(0,d.default)(n).length)return!1;for(var r in t)if(t.hasOwnProperty(r)&&!e.deepEqual(t[r],n[r]))return!1;return!0}return t===n}Object.defineProperty(e,"__esModule",{value:!0});var f=n(55),d=i(f),h=n(66),v=i(h),g=n(329),p=i(g),_=n(128),m=i(_),y=n(100),b=i(y),E=n(35),A=i(E);e.extend=r,e.overwrite=a,e.bindAll=o,e.forIn=s,e.clone=u,e.keysDifference=l,e.deepEqual=c},function(t,e,n){"use strict";function i(t){return{vs:r(t.vs),fs:a(t.fs)}}function r(t){return"#version 300 es\n"+t.replace(/attribute/g,"in").replace(/varying/g,"out").replace(/texture2D/g,"texture")}function a(t){return"#version 300 es\nlayout(location = 0) out vec4 fragColor;\n"+t.replace(/varying/g,"in").replace(/texture2D/g,"texture").replace(/gl_FragColor/g,"fragColor").replace(/\/\/#glsl3#/g,"")}Object.defineProperty(e,"__esModule",{value:!0}),e.transferToGlsl3=i,e.transferVertexShader=r,e.transferFragmentShader=a},function(t,e,n){t.exports={default:n(333),__esModule:!0}},function(t,e,n){t.exports=!n(56)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";function i(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function r(t){return Math.round(t/h.EPSILON)*h.EPSILON}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,i=void 0===n?h.precision||4:n;return t=r(t),parseFloat(t.toPrecision(i))}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function s(t){return t.clone?t.clone():new Array(t)}function u(t,e){if(o(t)){for(var n=s(t),i=0;i<n.length;++i)n[i]=e(n[i],i,n);return n}return e(t)}function l(t){return u(t,function(t){return t/180*Math.PI})}function c(t){return u(t,function(t){return 180*t/Math.PI})}function f(t,e,n){return u(t,function(t){return Math.max(e,Math.min(n,t))})}function d(t,e){if(o(t)&&o(e)){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!d(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}n.d(e,"d",function(){return h}),e.c=i,e.e=a,e.f=l,e.g=c,e.b=f,e.a=d;var h={};h.EPSILON=1e-12,h.debug=!0,h.precision=4,h.printTypes=!1,h.printDegrees=!1,h.printRowMajor=!0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BLOOM_VARIABLE="\n//#glsl3#uniform float uEnableBloom;\n//#glsl3#layout(location = 1) out vec4 emissiveColor;\n",e.BLOOM_OUT="//#glsl3#emissiveColor = mix(vec4(0.0), fragColor, uEnableBloom);"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.R_EARTH=6378136.49,e.LIGHT_SETTINGS={lighting_lightPositions:new Float32Array([0,-1,1.5,-2,2,.5,1,-1.5,-2,-2,2,-1.5]),lighting_ambientRatio:.8,lighting_diffuseRatio:.6,lighting_specularRatio:.2,lighting_lightStrengths:new Float32Array([.8,0,0,0]),lighting_numberOfLights:1},e.HEX_REG=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,e.RGB_REG=/^rgb\((\d+,?\s*){3}\)$/,e.RGBA_REG=/^rgba\((\d+,?\s*){3},\s*[0-9.]+\)$/,e.PROJ_MODE={mercator:0,latlng:1},e.DISTANCE_UNIT={pixel:0,meter:1}},function(t,e,n){var i=n(30);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(40),r=n(184),a=n(143),o=Object.defineProperty;e.f=n(36)?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(1),a=n(214),o=n(7),s=n(6),u=n(5),l="Resource subclass must define virtual methods",c=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,t),n.i(o.d)(e);var a=r.id,u=r.userData,l=void 0===u?{}:u;this.gl=e,this.id=a||n.i(s.b)(this.constructor.name),this.userData=l,this._bound=!1,this._handle=r.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return n.i(r.a)(t,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.deleteChildren,n=void 0!==e&&e,i=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),i&&n&&i.filter(Boolean).forEach(function(t){t.delete()}),this}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;if("function"!=typeof t)return this._bindHandle(t),this;var e;return this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=n.i(o.e)(this.gl,t),n.i(u.a)(t);var i=this.constructor.PARAMETERS||{},r=i[t];if(r){var a=n.i(o.a)(this.gl);if(!((!("webgl2"in r)||a)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){var s=r.webgl1,l="webgl2"in r?r.webgl2:r.webgl1;return a?l:s}}return this._getParameter(t,e)}},{key:"getParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},i=e.parameters,r=e.keys,a=this.constructor.PARAMETERS||{},s=n.i(o.a)(this.gl),u={},l=i||Object.keys(a),c=!0,f=!1,d=void 0;try{for(var h,v=l[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var g=h.value,p=a[g];if(p&&(!("webgl2"in p)||s)&&(!("extension"in p)||this.gl.getExtension(p.extension))){var _=r?n.i(o.f)(this.gl,g):g;u[_]=this.getParameter(g,t),r&&"GLenum"===p.type&&(u[_]=n.i(o.f)(this.gl,u[_]))}}}catch(t){f=!0,d=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw d}}return u}},{key:"setParameter",value:function(t,e){t=n.i(o.e)(this.gl,t),n.i(u.a)(t);var i=this.constructor.PARAMETERS||{},r=i[t];if(r){var a=n.i(o.a)(this.gl);if(!((!("webgl2"in r)||a)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(e=n.i(o.e)(e))}return this._setParameter(t,e),this}},{key:"setParameters",value:function(t){for(var e in t)this.setParameter(e,t[e]);return this}},{key:"stubRemovedMethods",value:function(t,e,i){return n.i(s.d)(this,t,e,i)}},{key:"initialize",value:function(t){}},{key:"_createHandle",value:function(){throw new Error(l)}},{key:"_deleteHandle",value:function(){throw new Error(l)}},{key:"_bindHandle",value:function(){throw new Error(l)}},{key:"_getOptsFromHandle",value:function(){throw new Error(l)}},{key:"_getParameter",value:function(t,e){throw new Error(l)}},{key:"_setParameter",value:function(t,e){throw new Error(l)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var t=this.constructor.name,e=a.default.stats;e.resourceCount=e.resourceCount||0,e.resourceMap=e.resourceMap||{},e.resourceCount++,e.resourceMap[t]=e.resourceMap[t]||{created:0,active:0},e.resourceMap[t].created++,e.resourceMap[t].active++}},{key:"_removeStats",value:function(){var t=this.constructor.name;a.default.stats.resourceMap[t].active--}},{key:"handle",get:function(){return this._handle}}]),t}()},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return(r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}e.a=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.deviceX,n=t.deviceY,i=t.deviceRadius,r=t.deviceWidth,a=t.deviceHeight;if(!(e>=0&&n>=0&&e<r&&n<a))return null;var o=Math.max(0,e-i),s=Math.max(0,n-i);return{x:o,y:s,width:Math.min(r,e+i)-o+1,height:Math.min(a,n+i)-s+1,centerX:e,centerY:n}}Object.defineProperty(e,"__esModule",{value:!0}),e.PickableBase=e.getPixelRatio=void 0;var a=n(11),o=i(a),s=n(22),u=i(s),l=n(21),c=i(l),f=n(12),d=i(f),h=n(8),v=i(h),g=n(9),p=i(g),_=n(16),m=i(_),y=n(24),b=i(y),E=n(15),A=i(E),x=n(19),T=i(x),P=n(13),w=n(172),C=i(w),k=n(314),S=n(14),R=i(S),M=n(20),L=n(315),I=n(54),O=R.default.isString,F=R.default.isBoolean,N=R.default.isValidEnum,D={action:null,style:null,enableHighlight:!0},B={enable:!0,animationType:"fade",duration:200,easingType:"Linear.None",repeat:1,from:0,to:1,yoyo:!1},U=["fade"],G=e.getPixelRatio=function(t){return t.useDevicePixels&&"undefined"!=typeof window?window.devicePixelRatio:1};e.PickableBase=function(t){function e(t){(0,v.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,d.default)(e)).call(this,t));return n._supportAnimationType.pick=U,n.updateAnimation("pick",B),n._setSelectOptions(t.selectOptions),n._mapEventHandlerList=[],n._uniforms=null,n._defaultpicking_selectedPickingColor=new Uint8Array(3),n._picking_selectedPickingColor=new Uint8Array(3),n._picking_enablePicking=!1,n._picking_deltaTime=n.getAnimation("pick").duration,n._picking_currTime=0,n._picking_opacityFrom=1,n._picking_opacityTo=1,n._picking_max_opacity=1,n._picking_min_opacity=.35,n._pickedColor=new Uint8Array(4),n._lastPickedInfo=-1,n._curPickedInfo=-1,n}return(0,A.default)(e,t),(0,p.default)(e,[{key:"_getPickingUniforms",value:function(){return{picking_usePickingColor:!1,picking_enablePicking:this._picking_enablePicking,picking_selectedPickingColor:this._picking_enablePicking?this._picking_selectedPickingColor:this._defaultpicking_selectedPickingColor,picking_deltaTime:this._picking_deltaTime,picking_currTime:this._picking_currTime,picking_opacityFrom:this._picking_opacityFrom,picking_opacityTo:this._picking_opacityTo,picking_enableSelectStyle:!!this._selectOptions.style,picking_enableHighlight:this._selectOptions.enableHighlight}}},{key:"_setSelectOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._selectOptions={action:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.action;if(t&&!O(t))new M.BaseTypeError("VisualSelectOptions.action","string/null",t).error();else{if(!O(t)||N(t,["click","hover"]))return t;console.error("VisualSelectOptions.action 取值无效: "+t)}return D.action}(t.action),enableHighlight:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.enableHighlight;return F(t)?t:(new M.BaseTypeError("VisualSelectOptions.enableHighlight","boolean",t).error(),D.enableHighlight)}(t.enableHighlight),style:this._getValidSelectStyle(t.style)}}},{key:"_getValidSelectStyle",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.style}},{key:"pickObject",value:function(t){var e=t.x,n=t.y,i=t.mode,r=t.radius,a=t.viewport;return this._model?this._pickObject({x:e,y:n,radius:r,mode:i,viewport:a,pickingFBO:this._getPickingFBO(),lastPickedInfo:this._lastPickedInfo,useDevicePixels:!0}):{objectIndex:-1}}},{key:"getEventDetailInfo",value:function(t){var e=this.data[t];return{key:this._typeId,value:e||null}}},{key:"_update",value:function(){this._isReady()&&(this._removeMapEventHandlers(),this._addMapEventHandlers())}},{key:"_onMapClick",value:function(t){var e=-1,n=-1;if(this.visible){var i=this.pickObject({x:t.point.x,y:t.point.y,mode:"query",radius:20});e=i.objectIndex,n=i.pickedColor}"click"===this._selectOptions.action&&this._animatePicking(e,n),this._emitVisualEvent("click",t,e),this._lastPickedInfo=e}},{key:"_onMapMouseMove",value:function(t){var e=this,n=["hover","mouseover","mouseout"].reduce(function(t,n){return t||e._listens(n)},!1);if(("hover"===this._selectOptions.action||n)&&this.visible){var i=this.pickObject({x:t.point.x,y:t.point.y,mode:"query",radius:20}),r=i.objectIndex,a=i.pickedColor;this._lastPickedInfo!==r&&("hover"===this._selectOptions.action&&this._animatePicking(r,a),this._emitVisualEvent("hover",t,r),this._lastPickedInfo>-1&&this._emitVisualEvent("mouseout",t,this._lastPickedInfo),r>-1&&this._emitVisualEvent("mouseover",t,r)),this._lastPickedInfo=r}}},{key:"_emitVisualEvent",value:function(t,e,n){var i=this.getEventDetailInfo(n);this.emit(t,{type:t,latLng:e.latLng||e.lngLat,originalEvent:e.originalEvent,point:e.point,target:this,detail:(0,c.default)({},i.key,i.value)})}},{key:"_addMapEventHandlers",value:function(){var t=this;this._mapEventHandlerList.push((0,k.on)(this.map,"click",function(e){t._onMapClick(e)}));var e=this,n=(0,L.throttle)(function(t){e._onMapMouseMove(t)},100);this._mapEventHandlerList.push((0,k.on)(this.map,"mousemove",function(t){n(t)}))}},{key:"_removeMapEventHandlers",value:function(){this._mapEventHandlerList.forEach(function(t){t&&t.remove&&t.remove()})}},{key:"_encodePickingColor",value:function(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}},{key:"_decodePickingColor",value:function(t){if(!t)return-1;var e=(0,u.default)(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"_calculateInstancePickingColors",value:function(t,e){for(var n=t.value,i=t.size,r=0;r<e;r++){var a=this._encodePickingColor(r),o=(0,u.default)(a,3);n[r*i+0]=o[0],n[r*i+1]=o[1],n[r*i+2]=o[2]}}},{key:"_getPickingFBO",value:function(){var t=this.gl;return this._pickingFBO=this._pickingFBO||new P.Framebuffer(t),this._pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this._pickingFBO}},{key:"_deletePickingFBO",value:function(){this._pickingFBO&&(this._pickingFBO.delete(),this._pickingFBO=null)}},{key:"_pickObject",value:function(t){var e=t.x,n=t.y,i=t.radius,a=t.mode,o=t.pickingFBO,s=t.useDevicePixels,u=t.viewport,l=G({useDevicePixels:s}),c=Math.round(e*l),f=Math.round(this.gl.canvas.height-n*l),d=Math.round(i*l),h=r({deviceX:c,deviceY:f,deviceRadius:d,deviceWidth:o.width,deviceHeight:o.height}),v=h&&this._getPickedColorFromPickingFBO({viewport:u,useDevicePixels:s,pickingFBO:o,deviceRect:h,mode:a});return{objectIndex:this._decodePickingColor(v),pickedColor:v}}},{key:"_getPickedColorFromPickingFBO",value:function(t){var e=t.viewport,n=t.useDevicePixels,i=t.pickingFBO,r=t.deviceRect,a=t.mode;this._drawPickingBuffer({viewport:e,useDevicePixels:n,pickingFBO:i,deviceRect:r,mode:a});var o=this._pickedColor;return i.readPixels({x:r.centerX,y:r.centerY,width:1,height:1,pixelArray:o}),o}},{key:"_animatePicking",value:function(t,e){if(this._curPickedInfo=t,t>-1){this._picking_enablePicking=!0;var n=(0,u.default)(e,3);this._picking_selectedPickingColor[0]=n[0],this._picking_selectedPickingColor[1]=n[1],this._picking_selectedPickingColor[2]=n[2],this._lastPickedInfo,this._picking_opacityFrom=this._picking_max_opacity,this._picking_opacityTo=this._picking_min_opacity}else this._lastPickedInfo>-1?(this._picking_enablePicking=!0,this._picking_opacityFrom=this._picking_min_opacity,this._picking_opacityTo=this._picking_max_opacity):(this._picking_enablePicking=!1,this._picking_opacityFrom=this._picking_max_opacity,this._picking_opacityTo=this._picking_max_opacity,this._picking_selectedPickingColor[0]=0,this._picking_selectedPickingColor[1]=0,this._picking_selectedPickingColor[2]=0);if(this._selectOptions.enableHighlight&&this._picking_opacityFrom!==this._picking_opacityTo){var i=0;this._curPickedInfo>-1&&this._lastPickedInfo>-1?i=this._picking_currTime:this._picking_currTime===this._picking_deltaTime||0===this._picking_currTime?(i=0,this._picking_currTime=0):(i=this._picking_deltaTime-this._picking_currTime,this._picking_currTime=i),this.playAnimation("pick",{startOffset:i})}else-1===t&&(this._picking_selectedPickingColor[0]=0,this._picking_selectedPickingColor[1]=0,this._picking_selectedPickingColor[2]=0,this._picking_enablePicking=!1),this.redraw()}},{key:"_drawPickingBuffer",value:function(t){var e,n=this,i=t.pickingFBO,r=t.deviceRect;(0,P.withParameters)(this.gl,(0,o.default)(this._getGLParams(),(e={framebuffer:i,scissorTest:!0,scissor:[r.x,r.y,r.width,r.height]},(0,c.default)(e,T.default.COLOR_CLEAR_VALUE,[0,0,0,.001]),(0,c.default)(e,T.default.DEPTH_TEST,!0),(0,c.default)(e,T.default.BLEND,!1),e)),function(){n.gl.clear(n.gl.COLOR_BUFFER_BIT|n.gl.DEPTH_BUFFER_BIT),n._model.render((0,o.default)({},n._uniforms,{picking_usePickingColor:!0}))})}},{key:"addTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.on("pick_update",this._onPickUpdate),this.on("pick_complete",this._onPickComplete),(0,b.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"addTo",this).call(this,t)}},{key:"_onRemoveToggleComplete",value:function(){this._removeMapEventHandlers(),this._deletePickingFBO(),this.off("pick_update",this._onPickUpdate),this.off("pick_complete",this._onPickComplete),(0,b.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"_onRemoveToggleComplete",this).call(this)}},{key:"_onPickUpdate",value:function(t){this._picking_currTime=t*this._picking_deltaTime}},{key:"_onPickComplete",value:function(){-1===this._curPickedInfo&&(this._picking_selectedPickingColor[0]=0,this._picking_selectedPickingColor[1]=0,this._picking_selectedPickingColor[2]=0,this._picking_enablePicking=!1)}},{key:"_getValidAnimationOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"process",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.supportTypes,r=void 0===i?[]:i;return"pick"===t?(0,I.getValidAnimationOptions)(t,e,{defaultOptions:B,supportTypes:r}):I.getValidAnimationOptions.apply(void 0,arguments)}},{key:"setSelectOptions",value:function(t){return this._setSelectOptions(t),this}},{key:"getSelectOptions",value:function(){return this._selectOptions}}]),e}(C.default)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(4===t.length){for(var e="#",n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}var i=t.slice(1);return{r:parseInt(i.slice(0,2),16),g:parseInt(i.slice(2,4),16),b:parseInt(i.slice(4),16)}}function a(t){return t=t.replace(/rgb/,"rgba").replace(")",",")+"1)",o(t)}function o(t){return t=t.replace(/rgba\(/,"").replace(")","").split(","),{r:parseInt(t[0],10),g:parseInt(t[1],10),b:parseInt(t[2],10),a:parseFloat(t[3])}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(8),u=i(s),l=n(9),c=i(l),f=n(14),d=i(f),h=n(39),v=d.default.isString,g=d.default.isArray,p=d.default.isUndefined,_=function(){function t(e,n){if((0,u.default)(this,t),this.r=1,this.g=1,this.b=1,this.a=1,v(e))this.turnStr2Rgba(e);else if(g(e)){var i=n&&n.max||255;this.r=e[0]/i,this.g=e[1]/i,this.b=e[2]/i,this.a=p(e[3])?1:e[3]}}return(0,c.default)(t,[{key:"turnStr2Rgba",value:function(t){t=t.toLowerCase();var e=h.HEX_REG,n=h.RGB_REG,i=h.RGBA_REG,s=null;e.test(t)?s=r(t):n.test(t)?s=a(t):i.test(t)&&(s=o(t)),s&&(this.r=s.r/255,this.g=s.g/255,this.b=s.b/255,this.a=p(s.a)?1:s.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toString",value:function(){return"rgba("+[""+Math.round(255*this.r),""+Math.round(255*this.g),""+Math.round(255*this.b),""+this.a].join(",")+")"}}]),t}();e.default=_},function(t,e,n){"use strict";n.d(e,"a",function(){return g});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(27),l=n(42),c=n(116),f=n(7),d=n(115),h=n(6),v=n(5),g=function(t){function e(t){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),r=n.i(a.a)(this,n.i(o.a)(e).call(this,t,s)),r.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),r.target=s.target||(r.gl.webgl2?36662:34962),r._initialize(s),Object.seal(n.i(u.a)(n.i(u.a)(r))),r}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"getElementCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/c.a.getBytesPerElement(t))}},{key:"getVertexCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/c.a.getBytesPerVertex(t))}},{key:"initialize",value:function(t){return this._initialize(t)}},{key:"setProps",value:function(t){return"data"in t&&this.setData(t),this}},{key:"setAccessor",value:function(t){return this.accessor=t,this}},{key:"reallocate",value:function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}},{key:"setData",value:function(t){return this.initialize(t)}},{key:"subData",value:function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,i=e.data,r=e.offset,a=void 0===r?0:r,o=e.srcOffset,s=void 0===o?0:o,u=t.byteLength||t.length;n.i(v.a)(i);var l=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(l,this.handle),0!==s||void 0!==u?(n.i(f.b)(this.gl),this.gl.bufferSubData(this.target,a,i,s,u)):this.gl.bufferSubData(l,a,i),this.gl.bindBuffer(l,null),this.debugData=null,this.accessor.type||this.setAccessor(new c.a(this.accessor,{type:n.i(d.b)(i)})),this}},{key:"copyData",value:function(t){var e=t.sourceBuffer,i=t.readOffset,r=void 0===i?0:i,a=t.writeOffset,o=void 0===a?0:a,s=t.size,u=this.gl;return n.i(f.b)(u),u.bindBuffer(36662,e.handle),u.bindBuffer(36663,this.handle),u.copyBufferSubData(36662,36663,r,o,s),u.bindBuffer(36662,null),u.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dstData,i=void 0===e?null:e,r=t.srcByteOffset,a=void 0===r?0:r,o=t.dstOffset,s=void 0===o?0:o,u=t.length,l=void 0===u?0:u;n.i(f.b)(this.gl);var c,h,g=n.i(d.a)(this.accessor.type||5126,{clamped:!1}),p=this._getAvailableElementCount(a),_=s;i?(h=i.length,c=h-_):(c=Math.min(p,l||p),h=_+c);var m=Math.min(p,c);return l=l||m,n.i(v.a)(l<=m),i=i||new g(h),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,a,i,s,l),this.gl.bindBuffer(36662,null),i}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,i=void 0===e?this.target:e,r=t.index,a=void 0===r?this.accessor&&this.accessor.index:r,o=t.offset,s=void 0===o?0:o,u=t.size;return 35345===i||35982===i?void 0!==u?this.gl.bindBufferRange(i,a,this.handle,s,u):(n.i(v.a)(0===s),this.gl.bindBufferBase(i,a,this.handle)):this.gl.bindBuffer(i,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,i=t.index,r=void 0===i?this.accessor&&this.accessor.index:i;return 35345===n||35982===n?this.gl.bindBufferBase(n,r,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t.bytes&&h.a.deprecated("bytes","byteLength");var e=t.byteLength||t.bytes||0;return this.usage=t.usage||35044,this.setAccessor(new c.a(t,t.accessor)),t.data?this._setData(t.data):this._setByteLength(e)}},{key:"_setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;n.i(v.a)(ArrayBuffer.isView(t));var i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,t,e),this.gl.bindBuffer(i,null),this.usage=e,this.debugData=t.slice(0,10),this.byteLength=t.byteLength,this.bytesUsed=t.byteLength;var r=n.i(d.b)(t);return n.i(v.a)(r),this.setAccessor(new c.a(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;n.i(v.a)(t>=0);var i=t;0===t&&(i=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.byteLength=t,this.bytesUsed=t,this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(t){var e=n.i(d.a)(this.accessor.type||5126,{clamped:!1}),i=t/e.BYTES_PER_ELEMENT;return this.getElementCount()-i}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}},{key:"updateAccessor",value:function(t){return h.a.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)"),this.accessor=new c.a(this.accessor,t),this}},{key:"setByteLength",value:function(t){return h.a.deprecated("setByteLength","reallocate"),this.reallocate(t)}},{key:"data",get:function(){h.a.removed("Buffer.data","N/A","v6.0")}},{key:"bytes",get:function(){return h.a.deprecated("Buffer.bytes","Buffer.byteLength","v6.1"),this.byteLength}}]),e}(l.a)},function(t,e,n){var i=n(80);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";var i=n(52);n.d(e,"a",function(){return i.a});var r=n(208);n.d(e,"h",function(){return r.a});var a=n(209);n.d(e,"g",function(){return a.a});var o=n(210);n.d(e,"f",function(){return o.a});var s=n(211);n.d(e,"e",function(){return s.a});var u=n(212);n.d(e,"d",function(){return u.a});var l=n(213);n.d(e,"c",function(){return l.a});var c=n(109);n.d(e,"b",function(){return c.a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(41),r=n(85);t.exports=n(36)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(133),r=n(130);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";function i(t){var e="string"==typeof t?u[t]||u.TRIANGLES:t;return n.i(s.a)(e>=0&&e<=u.TRIANGLE_FAN,"Illegal drawMode"),e}e.b=i,n.d(e,"a",function(){return l});var r=n(0),a=n(1),o=n(6),s=n(5),u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(r.a)(this,t);var a=e.id,s=e.drawMode,l=void 0===s?u.TRIANGLES:s,c=e.vertexCount,f=void 0===c?void 0:c,d=e.attributes;this.id=a||n.i(o.b)(this.constructor.name),this.drawMode=i(l),this.vertexCount=f,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),d&&this.setAttributes(d)}return n.i(a.a)(t,[{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e,i=!1;return i=i||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,i}},{key:"setVertexCount",value:function(t){this.vertexCount=t}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(t){return Boolean(this.attributes[t])}},{key:"getAttribute",value:function(t){var e=this.attributes[t];return n.i(s.a)(e),e.value}},{key:"getArray",value:function(t){var e=this.attributes[t];return n.i(s.a)(e),e.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(t){for(var e in t){var i=t[e];i=ArrayBuffer.isView(i)?{value:i}:i,n.i(s.a)(ArrayBuffer.isView(i.value),"".concat(this._print(e),": must be typed array or object with value as typed array")),this._autoDetectAttribute(e,i),this.attributes[e]=i}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(t,e){var i;switch(t){case"indices":i=i||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":i="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":i="vectors"}switch(i){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;case"indices":e.size=e.size||1,e.isIndexed=void 0===e.isIndexed||e.isIndexed,n.i(s.a)(e.value instanceof Uint16Array||e.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}n.i(s.a)(e.size,"attribute ".concat(t," needs size"))}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(0),r=n(1),a=n(60),o=n(75),s=function(){function t(e,r){n.i(i.a)(this,t);var a=r.id,o=void 0===a?"pass":a;this.id=o,this.gl=e,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,r)}return n.i(r.a)(t,[{key:"setProps",value:function(t){Object.assign(this.props,t)}},{key:"render",value:function(t,e){var i=this;if(this.props.enabled){var r=this.gl,s={gl:r,outputBuffer:t.writeBuffer,inputBuffer:t.readBuffer,animationProps:e,swapBuffers:function(){return t._swapFramebuffers()}};this.props.screen?(s.inputBuffer=s.outputBuffer,s.outputBuffer=a.c.getDefaultFramebuffer(r)):this.props.swap&&(s.inputBuffer=t.writeBuffer,s.outputBuffer=t.readBuffer),n.i(o.b)(r,{framebuffer:s.outputBuffer},function(){return i._renderPass(s)}),this.props.debug&&s.outputBuffer.log(0,this.id),this.props.swap&&t._swapFramebuffers()}}},{key:"_renderPass",value:function(t){t.gl,t.inputBuffer,t.outputBuffer,t.animationProps}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"process",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.defaultOptions,r=n.supportTypes,o=void 0===r?[]:r;if(p(i)&&(i="toggle"===t?y:b),!_(e))throw new f.BaseTypeError("animationOptions","object",e);var l=(0,u.overwrite)((0,s.default)({},i),e);if(h(l.enable)||(new f.BaseTypeError("AnimationOptions.enable","boolean",l.enable).error(),l.enable=i.enable),v(l.animationType)||(new f.BaseTypeError("AnimationOptions.animationType","string",l.animationType).error(),l.animationType=i.animationType),!o.includes(l.animationType)){var c=t+"参数错误：AnimationOptions.animationType 不支持 "+l.animationType;if(null===i.animationType)throw new Error(c);console.error(c),l.animationType=i.animationType}return g(l.duration)?m(l.duration)||(console.error("参数错误：AnimationOptions.duration 应该是 正数 ，实际却是 "+l.duration),l.duration=i.duration):(new f.BaseTypeError("AnimationOptions.duration","number",l.duration).error(),l.duration=i.duration),"process"===t?l.repeat=1/0:g(l.repeat)?m(l.repeat)||(console.error("取值范围错误：AnimationOptions.repeat 应该是 正数 ，实际却是 "+l.repeat),l.repeat=i.repeat):(new f.BaseTypeError("AnimationOptions.repeat","number",l.repeat).error(),l.repeat=i.repeat),h(l.yoyo)||(new f.BaseTypeError("AnimationOptions.yoyo","boolean",l.yoyo).error(),l.yoyo=i.yoyo),l.easingFunc=a(l.easingType),l}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Linear.None",e=t.split(".");return d.MyTWEEN.Easing[e[0]][e[1]]}Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_PROCESS_ANIMATION=e.DEFAULT_TOGGLE_ANIMATION=void 0;var o=n(11),s=i(o);e.getValidAnimationOptions=r;var u=n(33),l=n(14),c=i(l),f=n(20),d=n(176),h=c.default.isBoolean,v=c.default.isString,g=c.default.isNumber,p=c.default.isUndefined,_=c.default.isObject,m=c.default.isPositiveNumber,y=e.DEFAULT_TOGGLE_ANIMATION={enable:!0,animationType:"fade",duration:2e3,repeat:1,yoyo:!1,easingType:"Linear.None",from:0,to:1},b=e.DEFAULT_PROCESS_ANIMATION={enable:!0,animationType:null,duration:2e3,repeat:1/0,yoyo:!1,easingType:"Linear.None",from:0,to:1}},function(t,e,n){t.exports={default:n(347),__esModule:!0}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(130);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";var i=(n(204),n(203),n(89));n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";function i(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function r(t,e){n.i(l.c)(t,e);for(var i in e){var r=d[i];r&&r(t,e[i],i)}}function a(t,e,i){if(n.i(c.f)(e))return i(t);var a=e.nocatch,o=void 0===a||a;n.i(f.a)(!e.frameBuffer),n.i(u.b)(t),r(t,e);var s;if(o)s=i(t),n.i(u.c)(t);else try{s=i(t)}finally{n.i(u.c)(t)}return s}e.e=r,e.f=a;var o=n(31),s=n(64),u=n(156),l=n(241),c=n(6),f=n(5);n.d(e,"b",function(){return l.d}),n.d(e,"c",function(){return l.a}),n.d(e,"d",function(){return l.e}),n.d(e,"a",function(){return l.f}),n.d(e,"g",function(){return l.g});var d={framebuffer:function(t,e){var n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:function(t,e){return e?t.enable(3042):t.disable(3042)},blendColor:function(t,e){return t.blendColor.apply(t,n.i(s.a)(e))},blendEquation:function(t,e){e=i(e)?e:[e,e],t.blendEquationSeparate.apply(t,n.i(s.a)(e))},blendFunc:function(t,e){e=i(e)&&2===e.length?n.i(s.a)(e).concat(n.i(s.a)(e)):e,t.blendFuncSeparate.apply(t,n.i(s.a)(e))},clearColor:function(t,e){return t.clearColor.apply(t,n.i(s.a)(e))},clearDepth:function(t,e){return t.clearDepth(e)},clearStencil:function(t,e){return t.clearStencil(e)},colorMask:function(t,e){return t.colorMask.apply(t,n.i(s.a)(e))},cull:function(t,e){return e?t.enable(2884):t.disable(2884)},cullFace:function(t,e){return t.cullFace(e)},depthTest:function(t,e){return e?t.enable(2929):t.disable(2929)},depthFunc:function(t,e){return t.depthFunc(e)},depthMask:function(t,e){return t.depthMask(e)},depthRange:function(t,e){return t.depthRange.apply(t,n.i(s.a)(e))},dither:function(t,e){return e?t.enable(3024):t.disable(3024)},derivativeHint:function(t,e){t.hint(35723,e)},frontFace:function(t,e){return t.frontFace(e)},mipmapHint:function(t,e){return t.hint(33170,e)},lineWidth:function(t,e){return t.lineWidth(e)},polygonOffsetFill:function(t,e){return e?t.enable(32823):t.disable(32823)},polygonOffset:function(t,e){return t.polygonOffset.apply(t,n.i(s.a)(e))},sampleCoverage:function(t,e){return t.sampleCoverage.apply(t,n.i(s.a)(e))},scissorTest:function(t,e){return e?t.enable(3089):t.disable(3089)},scissor:function(t,e){return t.scissor.apply(t,n.i(s.a)(e))},stencilTest:function(t,e){return e?t.enable(2960):t.disable(2960)},stencilMask:function(t,e){e=i(e)?e:[e,e];var r=e,a=n.i(o.a)(r,2),s=a[0],u=a[1];t.stencilMaskSeparate(1028,s),t.stencilMaskSeparate(1029,u)},stencilFunc:function(t,e){e=i(e)&&3===e.length?n.i(s.a)(e).concat(n.i(s.a)(e)):e;var r=e,a=n.i(o.a)(r,6),u=a[0],l=a[1],c=a[2],f=a[3],d=a[4],h=a[5];t.stencilFuncSeparate(1028,u,l,c),t.stencilFuncSeparate(1029,f,d,h)},stencilOp:function(t,e){e=i(e)&&3===e.length?n.i(s.a)(e).concat(n.i(s.a)(e)):e;var r=e,a=n.i(o.a)(r,6),u=a[0],l=a[1],c=a[2],f=a[3],d=a[4],h=a[5];t.stencilOpSeparate(1028,u,l,c),t.stencilOpSeparate(1029,f,d,h)},viewport:function(t,e){return t.viewport.apply(t,n.i(s.a)(e))}}},function(t,e,n){"use strict";var i=(n(7),n(154));n.d(e,"e",function(){return i.f});var r=(n(59),n(114),n(117));n.d(e,"f",function(){return r.a});var a=(n(162),n(46));n.d(e,"d",function(){return a.a});var o=(n(119),n(159));n.d(e,"b",function(){return o.a});var s=n(91);n.d(e,"c",function(){return s.a});var u=(n(118),n(92));n.d(e,"a",function(){return u.a});var l=(n(160),n(249));n.d(e,"g",function(){return l.a});var c=n(161);n.d(e,"i",function(){return c.a});var f=n(245);n.d(e,"h",function(){return f.a})},function(t,e,n){"use strict";n.d(e,"e",function(){return a}),n.d(e,"d",function(){return o});var i=n(167),r=n(166);n.d(e,"g",function(){return r.d}),n.d(e,"b",function(){return r.a}),n.d(e,"c",function(){return r.b}),n.d(e,"f",function(){return r.e}),n.d(e,"a",function(){return r.c});var a="2.1.0",o=n.i(i.a)()},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function o(){g&&h&&(g=!1,h.length?v=h.concat(v):p=-1,v.length&&s())}function s(){if(!g){var t=r(o);g=!0;for(var e=v.length;e;){for(h=v,v=[];++p<e;)h&&h[p].run();p=-1,e=v.length}h=null,g=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,f,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var h,v=[],g=!1,p=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new u(t,e)),1!==v.length||g||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function i(t){return n.i(r.a)(t)||n.i(a.a)(t)||n.i(o.a)()}e.a=i;var r=n(266),a=n(268),o=n(271)},function(t,e,n){"use strict";function i(t){return t*(Math.PI/180)}function r(t,e){var n=i(t[0]),r=i(e[0]);return 2*Math.asin(Math.sqrt(Math.pow(Math.sin((n-r)/2),2)+Math.cos(n)*Math.cos(r)*Math.pow(Math.sin((i(t[1])-i(e[1]))/2),2)))}function a(t,e,n){var i=f.R_EARTH;return r(t,e)*(n||i)}function o(t,e){t=t/20037508.34*180,e=e/20037508.34*180,e=180/Math.PI*(2*Math.atan(Math.exp(e*Math.PI/180))-Math.PI/2);var n={};return n.lng=t,n.lat=e,n}function s(t,e){var n=e,i=t;n=20037508.34*n/180,i=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180),i=20037508.34*i/180;var r={};return r.x=n,r.y=i,r}function u(t,e){var n=Math.abs(t[0]-e[0]),r=Math.abs(t[1]-e[1]),a=n*Math.PI*f.R_EARTH/180,o=r*Math.PI*f.R_EARTH*Math.cos(i(t[0]))/180;return Math.sqrt(a*a+o*o)}function l(t,e){if(e<=0)return t;var n=[];return t.forEach(function(t){for(var i=!1,r=0;r<n.length;r++){var a=n[r];if(u([t.lat,t.lng],[a.lat,a.lng])<e){var o=t.value||t.count,s=o/(o+a.count);a.lat=a.lat*(1-s)+t.lat*s,a.lng=a.lng*(1-s)+t.lng*s,a.count+=o,a.containing.push(t),i=!0;break}}i||n.push({lat:t.lat,lng:t.lng,count:t.value||t.count,containing:[t]})}),n}function c(t){var e=256*t.transform.zoomScale(t.getZoom()),n=t.getCenter(),i=2*Math.PI*6378137*Math.abs(Math.cos(n.lat*(Math.PI/180))),r=e/i;return{pixelsPerMeter:[r,r,r]}}Object.defineProperty(e,"__esModule",{value:!0}),e.computeDistanceBetween=a,e.mercator2latLng=o,e.latLng2Mercator=s,e.getClusters=l,e.getDistanceScales=c;var f=n(39)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(328),a=i(r),o=n(327),s=i(o),u="function"==typeof s.default&&"symbol"==typeof a.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===u(a.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e,n){var i=n(47),r=n(187),a=n(185),o=n(40),s=n(106),u=n(146),l={},c={},e=t.exports=function(t,e,n,f,d){var h,v,g,p,_=d?function(){return t}:u(t),m=i(n,f,e?2:1),y=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(a(_)){for(h=s(t.length);h>y;y++)if((p=e?m(o(v=t[y])[0],v[1]):m(t[y]))===l||p===c)return p}else for(g=_.call(t);!(v=g.next()).done;)if((p=r(g,m,v.value,e))===l||p===c)return p};e.BREAK=l,e.RETURN=c},function(t,e){t.exports={}},function(t,e,n){var i=n(193),r=n(132);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){"use strict";var i=n(372)(!0);n(134)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(378);for(var i=n(23),r=n(50),a=n(68),o=n(25)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=i[l],f=c&&c.prototype;f&&!f[o]&&r(f,o,l),a[l]=a.Array}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"c",function(){return a});var i=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI},function(t,e,n){"use strict";(function(t){n.d(e,"d",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s});var i={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},r=i.self||i.window||i.global,a=i.window||i.self||i.global,o=i.global||i.self||i.window,s=i.document||{}}).call(e,n(63))},function(t,e,n){"use strict";var i=n(254);e.a=new i.a({id:"luma"}).enable()},function(t,e,n){"use strict";var i=n(154);n.d(e,"e",function(){return i.a}),n.d(e,"g",function(){return i.c});var r=n(59);n.d(e,"b",function(){return r.f}),n.d(e,"f",function(){return r.a});var a=(n(114),n(239));n.d(e,"c",function(){return a.a}),n.d(e,"d",function(){return a.b});var o=(n(240),n(238),n(156));n.d(e,"a",function(){return o.a})},function(t,e,n){"use strict";function i(t,e){if("string"!=typeof e)return e;var i=Number(e);if(!isNaN(i))return i;e=e.replace(/^.*\./,"");var r=t[e];return n.i(l.a)(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function r(t,e){e=Number(e);for(var n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}function a(t,e){n.i(l.a)(void 0!==e,"undefined key"),e=Number(e);for(var i in t)if(t[i]===e)return"GL.".concat(i);return String(e)}function o(t,e){return e||c.a.removed("glGet(name)","glGet(gl, name)","6.0")(),i(t,e)}function s(t,e){return void 0===e&&c.a.removed("glKey(value)","glKey(gl, value)","6.0")(),r(t,e)}function u(t,e){return void 0===e&&c.a.removed("glKeyType(value)","glKeyType(gl, value)","6.0")(),a(t,e)}e.a=i,e.b=r,e.c=o,e.d=s,e.e=u;var l=n(5),c=n(74)},function(t,e,n){"use strict";function i(t,e){var i=y[e];if(!i)return!1;if(void 0===i.gl1&&void 0===i.gl2)return!0;var r=n.i(g.a)(t)?i.gl2||i.gl1:i.gl1;return"string"==typeof r?t.getExtension(r):r}function r(t,e){var n=y[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}n.d(e,"a",function(){return b});var a,o=n(0),s=n(4),u=n(2),l=n(1),c=n(3),f=n(18),d=n(42),h=n(46),v=n(59),g=n(7),p=n(6),_=n(5),m=[9729,9728],y=(a={},n.i(f.a)(a,6407,{dataFormat:6407,types:[5121,33635]}),n.i(f.a)(a,6408,{dataFormat:6408,types:[5121,32819,32820]}),n.i(f.a)(a,6406,{dataFormat:6406,types:[5121]}),n.i(f.a)(a,6409,{dataFormat:6409,types:[5121]}),n.i(f.a)(a,6410,{dataFormat:6410,types:[5121]}),n.i(f.a)(a,33326,{dataFormat:6403,types:[5126],gl2:!0}),n.i(f.a)(a,33328,{dataFormat:33319,types:[5126],gl2:!0}),n.i(f.a)(a,34837,{dataFormat:6407,types:[5126],gl2:!0}),n.i(f.a)(a,34836,{dataFormat:6408,types:[5126],gl2:!0}),a),b=function(t){function e(t,i){var r;n.i(o.a)(this,e);var a=i.id,l=void 0===a?n.i(p.b)("texture"):a,c=i.handle,f=i.target;return r=n.i(s.a)(this,n.i(u.a)(e).call(this,t,{id:l,handle:c})),r.target=f,r.hasFloatTexture=t.getExtension("OES_texture_float"),r.textureUnit=void 0,r}return n.i(c.a)(e,t),n.i(l.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format,a=e.linearFiltering,o=!0;return n&&(o=o&&i(t,n),o=o&&(!a||r(t,n))),o}}]),n.i(l.a)(e,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,i=t.pixels,r=void 0===i?null:i,a=t.format,o=void 0===a?6408:a,s=t.type,u=void 0===s?5121:s,l=t.border,c=void 0===l?0:l,d=t.recreate,h=void 0!==d&&d,v=t.parameters,g=void 0===v?{}:v,_=t.pixelStore,m=void 0===_?{}:_,y=t.textureUnit,b=void 0===y?void 0:y,E=t.unpackFlipY,A=void 0===E||E,x=t.mipmaps,T=void 0===x||x;e||(e=r);var P=t.width,w=t.height,C=t.dataFormat,k=this._deduceParameters({format:o,type:u,dataFormat:C,compressed:!1,data:e,width:P,height:w});P=k.width,w=k.height,C=k.dataFormat,this.width=P,this.height=w,this.format=o,this.type=u,this.dataFormat=C,this.border=c,this.textureUnit=b,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var S=n.i(f.a)({},37440,A),R=Object.assign({},S,m);this._isNPOT()&&T&&(p.a.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),T=!1,this._updateForNPOT(g)),this.mipmaps=T,this.setImageData({data:e,width:P,height:w,format:o,type:u,dataFormat:C,border:c,mipmaps:T,parameters:R}),T&&this.generateMipmap(),this.setParameters(g),h&&(this.data=e)}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),n.i(v.f)(this.gl,e,function(){t.gl.generateMipmap(t.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(t){var e=t.target,i=void 0===e?this.target:e,r=t.pixels,a=void 0===r?null:r,o=t.data,s=void 0===o?null:o,u=t.width,l=void 0===u?this.width:u,c=t.height,f=void 0===c?this.height:c,d=t.level,h=void 0===d?0:d,p=t.format,m=void 0===p?this.format:p,y=t.type,b=void 0===y?this.type:y,E=t.dataFormat,A=void 0===E?this.dataFormat:E,x=t.offset,T=void 0===x?0:x,P=t.border,w=void 0===P?this.border:P,C=t.compressed,k=void 0!==C&&C,S=t.parameters,R=void 0===S?{}:S;s||(s=a);var M=this._deduceParameters({format:m,type:b,dataFormat:A,compressed:k,data:s,width:l,height:f});b=M.type,A=M.dataFormat,k=M.compressed,l=M.width,f=M.height;var L=this.gl;L.bindTexture(this.target,this.handle);var I=null,O=this._getDataType({data:s,compressed:k});s=O.data,I=O.dataType,n.i(v.f)(this.gl,R,function(){switch(I){case"null":L.texImage2D(i,h,m,l,f,w,A,b,s);break;case"typed-array":L.texImage2D(i,h,m,l,f,w,A,b,s,T);break;case"buffer":n.i(g.b)(L),L.bindBuffer(35052,s.handle||s),L.texImage2D(i,h,m,l,f,w,A,b,T),L.bindBuffer(35052,null);break;case"browser-object":n.i(g.a)(L)?L.texImage2D(i,h,m,l,f,w,A,b,s):L.texImage2D(i,h,m,A,b,s);break;case"compressed":L.compressedTexImage2D(i,h,m,l,f,w,s);break;default:n.i(_.a)(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function(t){var e=this,i=t.target,r=void 0===i?this.target:i,a=t.pixels,o=void 0===a?null:a,s=t.data,u=void 0===s?null:s,l=t.x,c=void 0===l?0:l,f=t.y,d=void 0===f?0:f,p=t.width,_=void 0===p?this.width:p,m=t.height,y=void 0===m?this.height:m,b=t.level,E=void 0===b?0:b,A=t.format,x=void 0===A?this.format:A,T=t.type,P=void 0===T?this.type:T,w=t.dataFormat,C=void 0===w?this.dataFormat:w,k=t.compressed,S=void 0!==k&&k,R=t.offset,M=void 0===R?0:R,L=t.border,I=(void 0===L&&this.border,t.parameters),O=void 0===I?{}:I,F=this._deduceParameters({format:x,type:P,dataFormat:C,compressed:S,data:u,width:_,height:y});if(P=F.type,C=F.dataFormat,S=F.compressed,_=F.width,y=F.height,u||(u=o),u&&u.data){var N=u;u=N.data,_=N.shape[0],y=N.shape[1]}u instanceof h.a&&(u=u.handle),this.gl.bindTexture(this.target,this.handle),n.i(v.f)(this.gl,O,function(){S?e.gl.compressedTexSubImage2D(r,E,c,d,_,y,x,u):null===u?e.gl.texSubImage2D(r,E,c,d,_,y,C,P,null):ArrayBuffer.isView(u)?e.gl.texSubImage2D(r,E,c,d,_,y,C,P,u,M):u instanceof g.c?(n.i(g.b)(e.gl),e.gl.bindBuffer(35052,u),e.gl.texSubImage2D(r,E,c,d,_,y,C,P,M),e.gl.bindBuffer(35052,null)):n.i(g.a)(e.gl)?e.gl.texSubImage2D(r,E,c,d,_,y,C,P,u):e.gl.texSubImage2D(r,E,c,d,C,P,u)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(t){var e=t.target,n=(void 0===e&&this.target,t.framebuffer),i=t.x,r=void 0===i?0:i,a=t.y,o=void 0===a?0:a,s=t.width,u=t.height,l=t.level,c=void 0===l?0:l,f=t.internalFormat,d=void 0===f?6408:f,h=t.border,v=void 0===h?0:h;n&&n.bind(),this.bind(0),this.gl.copyTexImage2D(this.target,c,d,r,o,s,u,v),this.unbind(),n&&n.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,this.gl.activeTexture(33984+t),this.gl.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(t){var e=t.data,n=t.compressed;return void 0!==n&&n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof h.a?{data:e.handle,dataType:"buffer"}:e instanceof g.c?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}},{key:"setImage3D",value:function(t){var e=t.level,n=void 0===e?0:e,i=t.internalformat,r=void 0===i?6408:i,a=t.width,o=t.height,s=t.depth,u=void 0===s?1:s,l=t.border,c=void 0===l?0:l,f=t.format,d=t.type,v=void 0===d?5121:d,g=t.offset,p=void 0===g?0:g,_=t.pixels;return ArrayBuffer.isView(_)?(this.gl.texImage3D(this.target,n,r,a,o,u,c,f,v,_),this):(_ instanceof h.a&&(this.gl.bindBuffer(35052,_.handle),this.gl.texImage3D(this.target,n,r,a,o,u,c,f,v,p)),this)}},{key:"_deduceParameters",value:function(t){var e=t.format,n=t.data,i=t.width,r=t.height,a=t.dataFormat,o=t.type,s=t.compressed,u=y[e];a=a||u&&u.dataFormat,o=o||u&&u.types[0],s=s||u&&u.compressed;var l=this._deduceImageSize(n,i,r);return i=l.width,r=l.height,{dataFormat:a,type:o,compressed:s,width:i,height:r,format:e,data:n}}},{key:"_deduceImageSize",value:function(t,e,i){var r;return r="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:i}:{width:e>=0?e:1,height:i>=0?i:1},n.i(_.a)(r,"Could not deduced texture size"),n.i(_.a)(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),n.i(_.a)(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:"_setParameter",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:n.i(_.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(n.i(g.a)(this.gl)||n.i(p.c)(this.width)&&n.i(p.c)(this.height))}},{key:"_updateForNPOT",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(t,e){if(this._isNPOT())switch(t){case 10241:-1===m.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}]),e}(d.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(163),l=n(37),c=n(88),f=[0,0,0],d=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n.i(i.a)(this,e),t=n.i(a.a)(this,n.i(o.a)(e).call(this)),Array.isArray(r)&&1===arguments.length?t.copy(r):t.set(r,s,u),t}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"angle",value:function(t){return c.j(this,t)}},{key:"cross",value:function(t){return c.d(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,i=void 0===n?f:n;return c.k(this,this,i,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,i=void 0===n?f:n;return c.l(this,this,i,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,i=void 0===n?f:n;return c.m(this,this,i,e),this.check()}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=n.i(l.c)(t)}}]),e}(u.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LIGHT_NUMBER="\n// 定义最大光源数目\n#define MAX_NUM_OF_LIGHTS 4\n",e.LIGHT_UNIFORM="\nuniform vec3 project_uCameraPosition;\nuniform float viewRotation;\n\n// TODO these should be using lighting_ prefix\nuniform vec3 lighting_lightPositions[MAX_NUM_OF_LIGHTS];\nuniform float lighting_lightStrengths[MAX_NUM_OF_LIGHTS];\nuniform float lighting_ambientRatio;\nuniform float lighting_diffuseRatio;\nuniform float lighting_specularRatio;\nuniform int lighting_numberOfLights;\n",e.LIGHT_FUNCTION="\n  float getLightFactor(vec3 target, vec3 normal) {\n    return 1.0;\n  }\n  \n  float lighting_getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n    float lightWeight = 0.0;\n  \n    vec3 normals_worldspace_vec3 = normals_worldspace.xyz;\n  \n    vec3 camera_pos_worldspace = project_uCameraPosition;\n    vec3 view_direction = normalize(camera_pos_worldspace - position_worldspace_vec3);\n  \n    for (int i = 0; i < MAX_NUM_OF_LIGHTS; i++) {\n      if (i >= lighting_numberOfLights) {\n        break;\n      }\n      vec3 lighting_position = lighting_lightPositions[i];\n      \n      // vec2 projected_lighting_position = project_view_local_position(lighting_position.xy);\n      // vec3 light_position_worldspace = vec3(projected_lighting_position, lighting_position.z);\n\n      // vec3 light_direction = normalize(light_position_worldspace - position_worldspace_vec3);\n\n      vec3 light_direction = normalize(lighting_position);\n  \n      vec3 halfway_direction = normalize(light_direction + view_direction);\n      float lambertian = dot(light_direction, normals_worldspace_vec3);\n      float specular = 0.0;\n      if (lambertian > 0.0) {\n        float specular_angle = max(dot(normals_worldspace_vec3, halfway_direction), 0.0);\n        specular = pow(specular_angle, 32.0);\n      }\n      lambertian = max(lambertian, 0.0);\n      lightWeight += (lighting_ambientRatio + lambertian * lighting_diffuseRatio + specular * lighting_specularRatio) *\n        lighting_lightStrengths[i];\n    }\n  \n    return lightWeight;\n  }\n  \n  // DEPRECATED - Backwards compatibility\n  \n  float getLightWeight(vec3 position_worldspace_vec3, vec3 normals_worldspace) {\n\t// 地图旋转引起法向量旋转\n\tmat3 viewMatrix = mat3(cos(viewRotation), -sin(viewRotation), 0.0, sin(viewRotation), cos(viewRotation), 0.0, 0.0, 0.0, 1.0);\n\treturn lighting_getLightWeight(position_worldspace_vec3, viewMatrix * normals_worldspace);\n  }\n"},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=!0},function(t,e,n){var i=n(107)("meta"),r=n(30),a=n(49),o=n(41).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(56)(function(){return u(Object.preventExtensions({}))}),c=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},d=function(t,e){if(!a(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},h=function(t){return l&&v.NEED&&u(t)&&!a(t,i)&&c(t),t},v=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(41).f,r=n(49),a=n(25)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},function(t,e,n){var i=n(30);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";function i(){var t=new g.a(3);return g.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function r(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function a(t,e,n){var i=new g.a(3);return i[0]=t,i[1]=e,i[2]=n,i}function o(t,e){var n=e[0],i=e[1],r=e[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function s(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function u(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=r*u-a*s,t[1]=a*o-i*u,t[2]=i*s-r*o,t}function l(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[3]*i+n[7]*r+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*a+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*a+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*a+n[14])/o,t}function c(t,e,n){var i=e[0],r=e[1],a=e[2];return t[0]=i*n[0]+r*n[3]+a*n[6],t[1]=i*n[1]+r*n[4]+a*n[7],t[2]=i*n[2]+r*n[5]+a*n[8],t}function f(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[0],a[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),a[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function d(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),a[1]=r[1],a[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function h(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),a[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),a[2]=r[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function v(t,e){var n=a(t[0],t[1],t[2]),i=a(e[0],e[1],e[2]);o(n,n),o(i,i);var r=s(n,i);return r>1?0:r<-1?Math.PI:Math.acos(r)}e.a=i,e.h=r,e.b=a,e.f=o,e.c=s,e.d=u,e.g=l,e.i=c,e.k=f,e.l=d,e.m=h,e.j=v,n.d(e,"e",function(){return p});var g=n(72),p=r;!function(){var t=i()}()},function(t,e,n){"use strict";n.d(e,"a",function(){return x});var i=n(18),r=n(0),a=n(1),o=n(4),s=n(2),u=n(3),l=n(205),c=n(148),f=n(52),d=n(60),h=n(7),v=n(445),g=n(150),p=n(417),_=n(457),m=n(458),y=n(456),b=n(6),E=n(5),A=["renderPickingBuffer","pickingEnabled"],x=function(t){function e(t){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(r.a)(this,e),i=n.i(o.a)(this,n.i(s.a)(e).call(this,a)),n.i(E.a)(n.i(h.m)(t)),i.gl=t,i.lastLogTime=0,i.initialize(a),i}return n.i(u.a)(e,t),n.i(a.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(t),this.vertexArray=new d.g(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this.setProps(t),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(t.moduleSettings))),this.isInstanced=t.isInstanced||t.instanced,this.onBeforeRender=t.onBeforeRender||function(){},this.onAfterRender=t.onAfterRender||function(){},n.i(E.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(t){Object.assign(this.props,t),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"uniforms"in t&&this.setUniforms(t.uniforms,t.samplers),"pickable"in t&&(this.pickable=t.pickable),"timerQueryEnabled"in t&&(this.timerQueryEnabled=t.timerQueryEnabled&&d.h.isSupported(this.gl,["timers"]),t.timerQueryEnabled&&!this.timerQueryEnabled&&b.a.warn("GPU timer not supported")()),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers),"_animationProps"in t&&this._setAnimationProps(t._animationProps),"_animationLoop"in t&&(this.animationLoop=t._animationLoop)}},{key:"delete",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this.program.delete(),this.vertexArray.delete(),n.i(p.a)(this.id)}},{key:"destroy",value:function(){this.delete()}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e,i=!1;return i=i||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,this.geometry&&(i=i||this.geometry.getNeedsRedraw({clearRedrawFlags:n})),this.animated&&(i=i||"animated model ".concat(this.id)),i}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getUniforms",value:function(){return this.program.getUniforms}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"setDrawMode",value:function(t){return this.props.drawMode=n.i(f.b)(t),this}},{key:"setVertexCount",value:function(t){return n.i(E.a)(Number.isFinite(t)),this.props.vertexCount=t,this}},{key:"setInstanceCount",value:function(t){return n.i(E.a)(Number.isFinite(t)),this.instanceCount=t,this}},{key:"setGeometry",value:function(t){this.geometry=t;var e=this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());return this.vertexArray.setAttributes(e),this.setNeedsRedraw(),this}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.i(b.f)(t))return this;Object.assign(this.attributes,t);var e=this._createBuffersFromAttributeDescriptors(t);return this.vertexArray.setAttributes(e),this.setNeedsRedraw(),this}},{key:"setUniforms",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({},e),n.i(p.b)(this.id,e),e=this._extractAnimatedUniforms(e),this.program.setUniforms(e,i,function(){t._checkForDeprecatedUniforms(e),t.setNeedsRedraw()})}},{key:"_setAnimationProps",value:function(t){var e=this;if(this.animated){n.i(E.a)(t,"Model.draw(): animated uniforms but no animationProps");var i=this._evaluateAnimateUniforms(t);this.program.setUniforms(i,{},function(){e._checkForDeprecatedUniforms(i),e.setNeedsRedraw()})}}},{key:"updateModuleSettings",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:"clear",value:function(t){return n.i(d.f)(this.program.gl,t),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.moduleSettings,i=void 0===e?null:e,r=t.framebuffer,a=t.uniforms,o=void 0===a?{}:a,s=t.attributes,u=void 0===s?{}:s,l=t.samplers,c=void 0===l?{}:l,f=t.transformFeedback,d=void 0===f?this.transformFeedback:f,h=t.parameters,v=void 0===h?{}:h,g=t.vertexArray,_=void 0===g?this.vertexArray:g,m=t.animationProps;n.i(p.c)(this),this.setAttributes(u),this.updateModuleSettings(i),this.setUniforms(o,c),this._refreshAnimationProps(m);var y=this._logDrawCallStart(2),E=this.vertexArray.getDrawParams(this.props);E.isInstanced&&!this.isInstanced&&b.a.warn("Found instanced attributes on non-instanced model",this.id)();var A=E.isIndexed,x=E.indexType,T=this.isInstanced,P=this.instanceCount;return this.onBeforeRender(),this._timerQueryStart(),this.program.draw(Object.assign({},t,{logPriority:y,uniforms:null,framebuffer:r,parameters:v,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:_,transformFeedback:d,isIndexed:A,indexType:x,isInstanced:T,instanceCount:P})),this._timerQueryEnd(),this.onAfterRender(),this.setNeedsRedraw(!1),this._logDrawCallEnd(y,_,r),this}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,r=void 0===e||e,a=t.feedbackBuffers,o=t.unbindModels,s=void 0===o?[]:o,u=t.parameters;a&&this._setFeedbackBuffers(a),r&&(u=Object.assign({},u,n.i(i.a)({},35977,r))),s.forEach(function(t){return t.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},t,{parameters:u}))}finally{s.forEach(function(t){return t.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.i(E.a)(arguments.length<=1),this.draw({uniforms:t})}},{key:"_createProgram",value:function(t){var e=t.vs,i=void 0===e?null:e,r=t.fs,a=void 0===r?null:r,o=t.modules,s=void 0===o?null:o,u=t.defines,l=void 0===u?{}:u,c=t.inject,f=void 0===c?{}:c,h=t.shaderCache,p=void 0===h?null:h,_=t.varyings,m=void 0===_?null:_,y=t.bufferMode,A=void 0===y?35981:y,x=t.program,T=void 0===x?null:x;this.getModuleUniforms=function(t){};var P=this.id;if(!T){i=i||v.a.vs,a=a||v.a.fs;var w=n.i(g.g)(this.gl,{vs:i,fs:a,modules:s,inject:f,defines:l,log:b.a});i=w.vs,a=w.fs,T=p?p.getProgram(this.gl,{id:P,vs:i,fs:a}):new d.b(this.gl,{id:P,vs:i,fs:a,varyings:m,bufferMode:A}),this.getModuleUniforms=w.getUniforms||function(t){}}return n.i(E.a)(T instanceof d.b,"Model needs a program"),T}},{key:"_checkForDeprecatedUniforms",value:function(t){A.forEach(function(e){e in t&&b.a.deprecated(e,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function(t){(t=t||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(t)}},{key:"_evaluateAnimateUniforms",value:function(t){if(!this.animated)return{};var e={};for(var n in this.animatedUniforms){var i=this.animatedUniforms[n];e[n]=i(t)}return e}},{key:"_extractAnimatedUniforms",value:function(t){var e=!1;for(var i in t){var r=t[i];"function"==typeof r?(this.animatedUniforms[i]=r,e=!0):delete this.animatedUniforms[i]}if(this.animated=!n.i(b.f)(this.animatedUniforms),!e)return t;var a={};for(var o in t)this.animatedUniforms[o]||(a[o]=t[o]);return a}},{key:"_setFeedbackBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.i(b.f)(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new d.i(e,{program:this.program}),this.transformFeedback.setBuffers(t),this.setNeedsRedraw(),this}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new d.h(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var t=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=t,this.stats.accumulatedFrameTime+=t,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,b.a.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function(t){var e=this.program.gl,n={};for(var i in t){var r=t[i],a=this._attributes[i];r instanceof l.a?a=r:r instanceof d.d?(a=a||new l.a(e,Object.assign({},r,r.layout,{id:i})),a.update({buffer:r})):a?a.update(r):a=new l.a(e,Object.assign({},r,{id:i})),this._attributes[i]=a,n[i]=a.getValue()}return n}},{key:"_logDrawCallStart",value:function(t){var e=t>3?0:1e4;if(!(b.a.priority<t||Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),b.a.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:b.a.priority<=2})(),t}},{key:"_logDrawCallEnd",value:function(t,e,i,r){if(void 0!==t){var a=n.i(m.a)({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),o=n.i(_.a)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),s=o.table,u=o.unusedTable,l=o.unusedCount,c=n.i(_.a)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0}),f=c.table;c.count>0&&b.a.log("MISSING UNIFORMS",Object.keys(f))(),l>0&&b.a.log("UNUSED UNIFORMS",Object.keys(u))();var d=n.i(y.a)(this.vertexArray.configuration);b.a.table(t,a)(),b.a.table(t,s)(),b.a.table(t+1,d)(),n.i(p.d)(this,i),r&&r.log({priority:2,message:"Rendered to ".concat(r.id)}),b.a.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}},{key:"vertexCount",get:function(){return Number.isFinite(this.props.vertexCount)?this.props.vertexCount:this.geometry&&this.geometry.getVertexCount()}},{key:"drawMode",get:function(){return Number.isFinite(this.props.drawMode)?this.props.drawMode:this.geometry&&this.geometry.drawMode}}]),e}(c.a)},function(t,e,n){"use strict";function i(t){switch(t){case v:return v;case g:case _:case p:return g;case m:case y:case b:return m;default:return n.i(l.a)(!1),0}}function r(t){var e=A[t];if(!e)return null;var i=n.i(s.a)(e,2);return{type:i[0],components:i[1]}}function a(t,e){switch(t){case c:case f:case d:case h:t=E}for(var i in A){var r=n.i(s.a)(A[i],3),a=r[0],o=r[1],u=r[2];if(a===t&&o===e)return{glType:i,name:u}}return null}e.c=i,e.b=r,e.a=a;var o,s=n(31),u=n(18),l=n(5),c=5120,f=5121,d=5122,h=5123,v=0,g=1,p=2,_=3,m=4,y=5,b=6,E=5126,A=(o={},n.i(u.a)(o,E,[E,1,"float"]),n.i(u.a)(o,35664,[E,2,"vec2"]),n.i(u.a)(o,35665,[E,3,"vec3"]),n.i(u.a)(o,35666,[E,4,"vec4"]),n.i(u.a)(o,5124,[5124,1,"int"]),n.i(u.a)(o,35667,[5124,2,"ivec2"]),n.i(u.a)(o,35668,[5124,3,"ivec3"]),n.i(u.a)(o,35669,[5124,4,"ivec4"]),n.i(u.a)(o,5125,[5125,1,"uint"]),n.i(u.a)(o,36294,[5125,2,"uvec2"]),n.i(u.a)(o,36295,[5125,3,"uvec3"]),n.i(u.a)(o,36296,[5125,4,"uvec4"]),n.i(u.a)(o,35670,[E,1,"bool"]),n.i(u.a)(o,35671,[E,2,"bvec2"]),n.i(u.a)(o,35672,[E,3,"bvec3"]),n.i(u.a)(o,35673,[E,4,"bvec4"]),n.i(u.a)(o,35674,[E,8,"mat2"]),n.i(u.a)(o,35685,[E,8,"mat2x3"]),n.i(u.a)(o,35686,[E,8,"mat2x4"]),n.i(u.a)(o,35675,[E,12,"mat3"]),n.i(u.a)(o,35687,[E,12,"mat3x2"]),n.i(u.a)(o,35688,[E,12,"mat3x4"]),n.i(u.a)(o,35676,[E,16,"mat4"]),n.i(u.a)(o,35689,[E,16,"mat4x2"]),n.i(u.a)(o,35690,[E,16,"mat4x3"]),o)},function(t,e,n){"use strict";function i(t){return t<34069?t+34069:t}function r(t){return(w.STATUS||{})[t]||"Framebuffer error ".concat(t)}n.d(e,"a",function(){return w});var a=n(18),o=n(31),s=n(0),u=n(4),l=n(2),c=n(1),f=n(3),d=n(27),h=n(42),v=n(92),g=n(118),p=n(46),_=n(117),m=n(75),y=n(113),b=n(115),E=n(460),A=n(7),x=n(76),T=n(6),P=n(5),w=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(s.a)(this,e),i=n.i(u.a)(this,n.i(l.a)(e).call(this,t,r)),i.width=null,i.height=null,i.attachments={},i.readBuffer=36064,i.drawBuffers=[36064],i.initialize(r),Object.seal(n.i(d.a)(n.i(d.a)(i))),i}return n.i(f.a)(e,t),n.i(c.a)(e,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.colorBufferFloat,r=e.colorBufferHalfFloat;return i&&t.getExtension(n.i(A.a)(t)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),r&&t.getExtension(n.i(A.a)(t)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new e(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}}]),n.i(c.a)(e,[{key:"initialize",value:function(t){var e=t.width,i=void 0===e?1:e,r=t.height,a=void 0===r?1:r,o=t.attachments,s=void 0===o?null:o,u=t.color,l=void 0===u||u,c=t.depth,f=void 0===c||c,d=t.stencil,h=void 0!==d&&d,v=t.check,g=void 0===v||v,p=t.readBuffer,_=t.drawBuffers;if(n.i(P.a)(i>=0&&a>=0,"Width and height need to be integers"),this.width=i,this.height=a,s)for(var m in s){var y=s[m],b=Array.isArray(y)?y[0]:y;b.resize({width:i,height:a})}else s=this._createDefaultAttachments(l,f,h,i,a);this.update({clearAttachments:!0,attachments:s,readBuffer:p,drawBuffers:_}),s&&g&&this.checkStatus()}},{key:"update",value:function(t){var e=t.attachments,n=void 0===e?{}:e,i=t.readBuffer,r=t.drawBuffers,a=t.clearAttachments,o=void 0!==a&&a,s=t.resizeAttachments,u=void 0===s||s;this.attach(n,{clearAttachments:o,resizeAttachments:u});var l=this.gl,c=l.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),l.bindFramebuffer(36160,c||null),this}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,i=t.height;if(null===this.handle)return n.i(P.a)(void 0===e&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),e!==this.width&&i!==this.height&&T.a.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(i));for(var r in this.attachments)this.attachments[r].resize({width:e,height:i});return this.width=e,this.height=i,this}},{key:"attach",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.clearAttachments,a=void 0!==r&&r,s=i.resizeAttachments,u=void 0===s||s,l={};a&&Object.keys(this.attachments).forEach(function(t){l[t]=null}),Object.assign(l,t);var c=this.gl.bindFramebuffer(36160,this.handle);for(var f in l){n.i(P.a)(void 0!==f,"Misspelled framebuffer binding point?");var d=Number(f),h=l[d],v=h;if(v)if(v instanceof g.a)this._attachRenderbuffer({attachment:d,renderbuffer:v});else if(Array.isArray(h)){var p=n.i(o.a)(h,3),_=p[0],m=p[1],y=void 0===m?0:m,b=p[2],E=void 0===b?0:b;v=_,this._attachTexture({attachment:d,texture:_,layer:y,level:E})}else this._attachTexture({attachment:d,texture:v,layer:0,level:0});else this._unattach(d);u&&v&&v.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,c||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(function(t){return!e.attachments[t]}).forEach(function(t){delete e.attachments[t]})}},{key:"checkStatus",value:function(){var t=this.gl,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);if(t.bindFramebuffer(36160,e||null),36053!==n)throw new Error(r(n));return this}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,i=t.depth,r=t.stencil,a=t.drawBuffers,o=void 0===a?[]:a,s=this.gl.bindFramebuffer(36160,this.handle);return(e||i||r)&&n.i(_.a)(this.gl,{color:e,depth:i,stencil:r}),o.forEach(function(t,e){n.i(_.b)({drawBuffer:e,value:t})}),this.gl.bindFramebuffer(36160,s||null),this}},{key:"readPixels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,i=void 0===e?0:e,r=t.y,a=void 0===r?0:r,o=t.width,s=void 0===o?this.width:o,u=t.height,l=void 0===u?this.height:u,c=t.format,f=void 0===c?6408:c,d=t.type,h=t.pixelArray,v=void 0===h?null:h,g=t.attachment,p=void 0===g?36064:g;this.gl;if(36064===p&&null===this.handle&&(p=1028),n.i(P.a)(this.attachments[p]),d=d||this.attachments[p].type,!v){d=d||5121;var _=n.i(b.a)(d,{clamped:!1}),m=n.i(E.a)(f);v=v||new _(s*l*m)}d=d||n.i(b.b)(v);var y=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(i,a,s,l,f,d,v),this.gl.bindFramebuffer(36160,y||null),v}},{key:"readPixelsToBuffer",value:function(t){var e=t.x,i=void 0===e?0:e,r=t.y,a=void 0===r?0:r,o=t.width,s=void 0===o?this.width:o,u=t.height,l=void 0===u?this.height:u,c=t.format,f=void 0===c?6408:c,d=t.type,h=t.buffer,v=void 0===h?null:h,g=t.byteOffset,_=void 0===g?0:g,y=this.gl;if(n.i(A.b)(y),d=d||(v?v.type:5121),!v){var b=n.i(E.a)(f),x=n.i(E.b)(d),T=_+s*l*b*x;v=new p.a(y,{bytes:T,type:d,size:b})}return v.bind({target:35051}),n.i(m.b)(y,{framebuffer:this},function(){y.readPixels(i,a,s,l,f,d,_)}),v.unbind({target:35051}),v}},{key:"copyToDataUrl",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.attachment,i=void 0===e?36064:e,r=t.maxHeight,a=void 0===r?Number.MAX_SAFE_INTEGER:r,o=this.readPixels({attachment:i}),s=this.width,u=this.height;u>a;){var l=n.i(A.n)({data:o,width:s,height:u});o=l.data,s=l.width,u=l.height}n.i(A.o)({data:o,width:s,height:u});var c=document.createElement("canvas");c.width=s,c.height=u;var f=c.getContext("2d"),d=f.createImageData(s,u);return d.data.set(o),f.putImageData(d,0,0),c.toDataURL()}},{key:"copyToImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.image,n=void 0===e?null:e,i=t.attachment,r=void 0===i?36064:i,a=t.maxHeight,o=(void 0===a&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:r}));return n=n||new Image,n.src=o,n}},{key:"copyToTexture",value:function(t){var e=t.texture,i=t.target,r=t.xoffset,a=void 0===r?0:r,o=t.yoffset,s=void 0===o?0:o,u=t.zoffset,l=void 0===u?0:u,c=t.mipmapLevel,f=void 0===c?0:c,d=(t.attachment,t.x),h=void 0===d?0:d,v=t.y,g=void 0===v?0:v,p=t.width,_=t.height,m=this.gl,y=m.bindFramebuffer(36160,this.handle);switch(n.i(P.a)(i||e),e&&(p=Number.isFinite(p)?p:e.width,_=Number.isFinite(_)?_:e.height,e.bind(0)),e.target){case 3553:case 34067:m.copyTexSubImage2D(i||e.target,f,a,s,h,g,p,_);break;case 35866:case 32879:m.copyTexSubImage3D(i||e.target,f,a,s,l,h,g,p,_)}return e&&e.unbind(),m.bindFramebuffer(36160,y||null),e}},{key:"blit",value:function(t){var e=t.srcFramebuffer,i=t.attachment,r=void 0===i?36064:i,a=t.srcX0,o=void 0===a?0:a,s=t.srcY0,u=void 0===s?0:s,l=t.srcX1,c=t.srcY1,f=t.dstX0,d=void 0===f?0:f,h=t.dstY0,v=void 0===h?0:h,g=t.dstX1,p=t.dstY1,_=t.color,m=void 0===_||_,y=t.depth,b=void 0!==y&&y,E=t.stencil,x=void 0!==E&&E,T=t.mask,w=void 0===T?0:T,C=t.filter,k=void 0===C?9728:C,S=this.gl;n.i(A.b)(S),e.handle||36064!==r||(r=1028),m&&(w|=16384),b&&(w|=256),x&&(w|=1024),n.i(P.a)(w),l=void 0===l?e.width:l,c=void 0===c?e.height:c,g=void 0===g?this.width:g,p=void 0===p?this.height:p;var R=S.bindFramebuffer(36009,this.handle),M=S.bindFramebuffer(36008,e.handle);return S.readBuffer(r),S.blitFramebuffer(o,u,l,c,d,v,g,p,w,k),S.readBuffer(this.readBuffer),S.bindFramebuffer(36008,M||null),S.bindFramebuffer(36009,R||null),this}},{key:"invalidate",value:function(t){var e=t.attachments,i=void 0===e?[]:e,r=t.x,a=void 0===r?0:r,o=t.y,s=void 0===o?0:o,u=t.width,l=t.height,c=this.gl;n.i(A.b)(c);var f=c.bindFramebuffer(36008,this.handle);return 0===a&&0===s&&void 0===u&&void 0===l?c.invalidateFramebuffer(36008,i):c.invalidateFramebuffer(36008,i,a,s,u,l),c.bindFramebuffer(36008,f),this}},{key:"getAttachmentParameter",value:function(t,e,i){var r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=n.i(x.d)(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},a=!0,o=!1,s=void 0;try{for(var u,l=i[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;r[e?n.i(x.d)(this.gl,c):c]=this.getAttachmentParameter(t,c,e)}}catch(t){o=!0,s=t}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return r}},{key:"getParameters",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object.keys(this.attachments),i={},r=0;r<e.length;r++){var a=e[r],o=Number(a);i[t?n.i(x.d)(this.gl,o):o]=this.getAttachmentParameters(o,t)}return i}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>T.a.priority||"undefined"==typeof window)return this;e=e||"Framebuffer ".concat(this.id);var n=this.copyToDataUrl({maxHeight:100});return T.a.image({priority:t,message:e,image:n},e)(),this}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(t,e,i,r,o){var s=null;if(t){var u;s=s||{},s[36064]=new v.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:o,mipmaps:!1,parameters:(u={},n.i(a.a)(u,10241,9728),n.i(a.a)(u,10240,9728),n.i(a.a)(u,10242,33071),n.i(a.a)(u,10243,33071),u)})}return e&&i?(s=s||{},s[33306]=new g.a(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111})):e?(s=s||{},s[36096]=new g.a(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:o})):i&&n.i(P.a)(!1),s}},{key:"_unattach",value:function(t){var e=this.attachments[t];e&&(e instanceof g.a?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}},{key:"_attachRenderbuffer",value:function(t){var e=t.attachment,n=void 0===e?36064:e,i=t.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}},{key:"_attachTexture",value:function(t){var e=t.attachment,r=void 0===e?36064:e,a=t.texture,o=t.layer,s=t.level,u=this.gl;switch(u.bindTexture(a.target,a.handle),a.target){case 35866:case 32879:u.framebufferTextureLayer(36160,r,a.target,s,o);break;case 34067:var l=i(o);u.framebufferTexture2D(36160,r,l,a.handle,s);break;case 3553:u.framebufferTexture2D(36160,r,3553,a.handle,s);break;default:n.i(P.a)(!1,"Illegal texture type")}u.bindTexture(a.target,null),this.attachments[r]=a}},{key:"_setReadBuffer",value:function(t,e){n.i(A.a)(t)?t.readBuffer(e):n.i(P.a)(36064===e||1029===e,"Multiple render targets not supported"),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(t,e){if(n.i(A.a)(t))t.drawBuffers(e);else{var i=t.getExtension("WEBGL.draw_buffers");i?i.drawBuffersWEBGL(e):n.i(P.a)(1===e.length&&(36064===e[0]||1029===e[0]),"Multiple render targets not supported")}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(t){var e=n.i(y.d)(this.gl);switch(t){case 36052:return e.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.webgl2?null:8;case 33297:return e.webgl2?null:5125;case 33296:return e.webgl2||e.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(t){return this.gl.bindFramebuffer(36160,t)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),e}(h.a),C=[36049,36048,33296,33298,33299,33300,33301,33302,33303];w.ATTACHMENT_PARAMETERS=C},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),r=n(4),a=n(2),o=n(1),s=n(3),u=n(27),l=n(77),c=n(7),f=function(t){function e(t){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(c.d)(t),o=n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},s,{target:3553}))),o.initialize(s),Object.seal(n.i(u.a)(n.i(u.a)(o))),o}return n.i(s.a)(e,t),n.i(o.a)(e,null,[{key:"isSupported",value:function(t,e){return l.a.isSupported(t,e)}}]),n.i(o.a)(e,[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return t.activeTexture(33984+this.textureUnit),t.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}}]),e}(l.a)},function(t,e,n){"use strict";var i=(n(165),n(78));n.d(e,"a",function(){return i.a});var r=(n(253),n(471),n(164));n.d(e,"b",function(){return r.a});n(252),n(37),n(473),n(472),n(250),n(470)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(37),l=function(t){function e(){return n.i(i.a)(this,e),n.i(a.a)(this,n.i(o.a)(e).apply(this,arguments))}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"toString",value:function(){return this.formatString(u.d)}},{key:"formatString",value:function(t){for(var e="",i=0;i<this.ELEMENTS;++i)e+=(i>0?", ":"")+n.i(u.e)(this[i],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!n.i(u.a)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var i=0;i<this.ELEMENTS;++i){var r=t[i];this[i]=r+n*(e[i]-r)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t&&t.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(t[n]);return e}},{key:"check",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(u.d.debug&&!this.validate(t))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}}]),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={serverConfig:{},localConfig:{services:{pr:"https://pr.map.qq.com/pingd?appid=seiya",checkKeySrc:"https://apikey.map.qq.com/mkey/index.php/mkey/check",getDataLayerSrc:"http://test.datalayer.map.qq.com/console/datalayer/data"}}};!function(){var t=window.Seiya&&window.Seiya.__load;t&&t(function(t){i.serverConfig=t})}(),e.default=i},function(t,e,n){"use strict";(function(e){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
    function i(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,a=Math.min(n,i);r<a;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0}function r(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function a(t){return Object.prototype.toString.call(t)}function o(t){return!r(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(A.isFunction(t)){if(P)return t.name;var e=t.toString(),n=e.match(C);return n&&n[1]}}function u(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function l(t){if(P||!A.isFunction(t))return A.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function c(t){return u(l(t.actual),128)+" "+t.operator+" "+u(l(t.expected),128)}function f(t,e,n,i,r){throw new w.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function d(t,e){t||f(t,!0,e,"==",w.ok)}function h(t,e,n,s){if(t===e)return!0;if(r(t)&&r(e))return 0===i(t,e);if(A.isDate(t)&&A.isDate(e))return t.getTime()===e.getTime();if(A.isRegExp(t)&&A.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(o(t)&&o(e)&&a(t)===a(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(r(t)!==r(e))return!1;s=s||{actual:[],expected:[]};var u=s.actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),g(t,e,n,s))}return n?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function g(t,e,n,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(A.isPrimitive(t)||A.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=v(t),a=v(e);if(r&&!a||!r&&a)return!1;if(r)return t=T.call(t),e=T.call(e),h(t,e,n);var o,s,u=k(t),l=k(e);if(u.length!==l.length)return!1;for(u.sort(),l.sort(),s=u.length-1;s>=0;s--)if(u[s]!==l[s])return!1;for(s=u.length-1;s>=0;s--)if(o=u[s],!h(t[o],e[o],n,i))return!1;return!0}function p(t,e,n){h(t,e,!0)&&f(t,e,n,"notDeepStrictEqual",p)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function m(t){var e;try{t()}catch(t){e=t}return e}function y(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=m(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&f(r,n,"Missing expected exception"+i);var a="string"==typeof i,o=!t&&A.isError(r),s=!t&&r&&!n;if((o&&a&&_(r,n)||s)&&f(r,n,"Got unwanted exception"+i),t&&r&&n&&!_(r,n)||!t&&r)throw r}function b(t,e){t||f(t,!0,e,"==",b)}var E=n(474),A=n(259),x=Object.prototype.hasOwnProperty,T=Array.prototype.slice,P=function(){return"foo"===function(){}.name}(),w=t.exports=d,C=/\s*function\s+([^\(\s]*)\s*/;w.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var e=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,r=s(e),a=i.indexOf("\n"+r);if(a>=0){var o=i.indexOf("\n",a+1);i=i.substring(o+1)}this.stack=i}}},A.inherits(w.AssertionError,Error),w.fail=f,w.ok=d,w.equal=function(t,e,n){t!=e&&f(t,e,n,"==",w.equal)},w.notEqual=function(t,e,n){t==e&&f(t,e,n,"!=",w.notEqual)},w.deepEqual=function(t,e,n){h(t,e,!1)||f(t,e,n,"deepEqual",w.deepEqual)},w.deepStrictEqual=function(t,e,n){h(t,e,!0)||f(t,e,n,"deepStrictEqual",w.deepStrictEqual)},w.notDeepEqual=function(t,e,n){h(t,e,!1)&&f(t,e,n,"notDeepEqual",w.notDeepEqual)},w.notDeepStrictEqual=p,w.strictEqual=function(t,e,n){t!==e&&f(t,e,n,"===",w.strictEqual)},w.notStrictEqual=function(t,e,n){t===e&&f(t,e,n,"!==",w.notStrictEqual)},w.throws=function(t,e,n){y(!0,t,e,n)},w.doesNotThrow=function(t,e,n){y(!1,t,e,n)},w.ifError=function(t){if(t)throw t},w.strict=E(b,w,{equal:w.strictEqual,deepEqual:w.deepStrictEqual,notEqual:w.notStrictEqual,notDeepEqual:w.notDeepStrictEqual}),w.strict.strict=w.strict;var k=Object.keys||function(t){var e=[];for(var n in t)x.call(t,n)&&e.push(n);return e}}).call(e,n(63))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(95),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.serverConfig.key||""},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(95),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default.localConfig.services},function(t,e,n){t.exports={default:n(335),__esModule:!0}},function(t,e,n){t.exports={default:n(344),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(11),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(81),r=n(25)("toStringTag"),a="Arguments"==i(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=o(e=Object(t),r))?n:a?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(40),r=n(368),a=n(132),o=n(140)("IE_PROTO"),s=function(){},u=function(){var t,e=n(131)("iframe"),i=a.length;for(e.style.display="none",n(183).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[a[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[o]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(50);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){var i=n(142),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(52),u={x:[2,0,1],y:[0,1,2],z:[1,2,0]},l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(i.a)(this,e);for(var o=t.bottomRadius,s=void 0===o?0:o,l=t.topRadius,c=void 0===l?0:l,f=t.height,d=void 0===f?1:f,h=t.nradial,v=void 0===h?10:h,g=t.nvertical,p=void 0===g?10:g,_=t.verticalAxis,m=void 0===_?"y":_,y=t.topCap,b=void 0!==y&&y,E=t.bottomCap,A=void 0!==E&&E,x=(b?2:0)+(A?2:0),T=(v+1)*(p+1+x),P=Math.atan2(s-c,d),w=Math.sin,C=Math.cos,k=Math.PI,S=C(P),R=w(P),M=b?-2:0,L=p+(A?2:0),I=v+1,O=new Float32Array(3*T),F=new Float32Array(3*T),N=new Float32Array(2*T),D=new Uint16Array(v*(p+x)*6),B=u[m],U=0,G=0,j=M;j<=L;j++){var z=j/p,W=d*z,H=void 0;j<0?(W=0,z=1,H=s):j>p?(W=d,z=1,H=c):H=s+j/p*(c-s),-2!==j&&j!==p+2||(H=0,z=0),W-=d/2;for(var V=0;V<I;V++){var X=w(V*k*2/v),Y=C(V*k*2/v);O[U+B[0]]=X*H,O[U+B[1]]=W,O[U+B[2]]=Y*H,F[U+B[0]]=j<0||j>p?0:X*S,F[U+B[1]]=j<0?-1:j>p?1:R,F[U+B[2]]=j<0||j>p?0:Y*S,N[G+0]=V/v,N[G+1]=z,G+=2,U+=3}}for(var K=0;K<p+x;K++)for(var q=0;q<v;q++){var Z=6*(K*v+q);D[Z+0]=I*(K+0)+0+q,D[Z+1]=I*(K+0)+1+q,D[Z+2]=I*(K+1)+1+q,D[Z+3]=I*(K+0)+0+q,D[Z+4]=I*(K+1)+1+q,D[Z+5]=I*(K+1)+0+q}return n.i(r.a)(this,n.i(a.a)(e).call(this,Object.assign({},t,{attributes:{positions:O,normals:F,texCoords:N,indices:D}})))}return n.i(o.a)(e,t),e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(58),u=n(48),l="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",c=[-1,-1,1,-1,-1,1,1,1],f=function(t){function e(t,o){var s;n.i(i.a)(this,e);var f=c.map(function(t){return-1===t?0:t});return s=n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{vs:l,geometry:new u.a({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(c)},aTexCoord:{size:2,value:new Float32Array(f)},aCoordinate:{size:2,value:new Float32Array(f)}}})}))),s.setVertexCount(4),s}return n.i(o.a)(e,t),e}(s.a)},function(t,e,n){"use strict";function i(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}e.a=i},function(t,e,n){"use strict";(function(t){var i=n(43),r=n(453),a="object"===(void 0===t?"undefined":n.i(i.a)(t))&&"[object process]"===String(t)&&!t.browser,o=!a||r.a;e.a=o}).call(e,n(62))},function(t,e,n){"use strict";function i(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=f[e];if(n.i(c.a)(r,e),!n.i(l.i)(i))return!0;if(e in h)return h[e];var a=r[0],o="#extension GL_".concat(a," : enable\nvoid main(void) {}"),s=t.createShader(35633);t.shaderSource(s,o),t.compileShader(s);var u=t.getShaderParameter(s,35713);return t.deleteShader(s),h[e]=u,u}function r(t,e){var i=f[e];n.i(c.a)(i,e);var r=n.i(u.a)(t)?i[1]||i[0]:i[0],a="string"==typeof r?Boolean(t.getExtension(r)):r;return n.i(c.a)(!1===a||!0===a),a}function a(t,e){return o(t,e)}function o(t,e){return e=Array.isArray(e)?e:[e],e.every(function(e){return r(t,e)})}function s(t){if(t.luma=t.luma||{},!t.luma.caps){t.luma.caps={},t.luma.caps.webgl2=n.i(u.a)(t);for(var e in f)t.luma.caps[e]=r(t,e)}return t.luma.caps}n.d(e,"a",function(){return d}),e.e=i,e.b=a,e.c=o,e.d=s;var u=n(7),l=n(6),c=n(5),f={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},d={};Object.keys(f).forEach(function(t){d[t]=t});var h={}},function(t,e,n){"use strict";function i(t){if(t.luma=t.luma||{},!t.luma.limits){t.luma.limits={},t.luma.webgl1MinLimits={},t.luma.webgl2MinLimits={};var e=n.i(c.a)(t);for(var i in f){var r=f[i],a=r.gl1,o="gl2"in r?r.gl2:r.gl1,s=e?o:a,u="gl2"in r&&!e||"extension"in r&&!t.getExtension(r.extension),l=u?s:t.getParameter(i);t.luma.limits[i]=l,t.luma.webgl1MinLimits[i]=a,t.luma.webgl2MinLimits[i]=o}}return t.luma.limits}function r(t){if(t.luma=t.luma||{},!t.luma.info){var e,i=t.getExtension("WEBGL_debug_renderer_info");t.luma.info=(e={},n.i(l.a)(e,7936,t.getParameter(7936)),n.i(l.a)(e,7937,t.getParameter(7937)),n.i(l.a)(e,37445,t.getParameter(i&&i.UNMASKED_VENDOR_WEBGL||7936)),n.i(l.a)(e,37446,t.getParameter(i&&i.UNMASKED_RENDERER_WEBGL||7937)),n.i(l.a)(e,7938,t.getParameter(7938)),n.i(l.a)(e,35724,t.getParameter(35724)),e)}return t.luma.info}function a(t){var e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info"),r=i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936),a=i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937);return{vendor:r||e,renderer:a||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function o(t){var e=i(t),n=r(t);return{vendor:n[d]||n[7936],renderer:n[h]||n[7937],version:n[7938],shadingLanguageVersion:n[35724],info:n,limits:e,webgl1MinLimits:t.luma.webgl1MinLimits,webgl2MinLimits:t.luma.webgl2MinLimits}}function s(t){return a(t)}e.c=i,e.b=r,e.a=o,e.d=s;var u,l=n(18),c=n(7),f=(u={},n.i(l.a)(u,33902,{gl1:new Float32Array([1,1])}),n.i(l.a)(u,33901,{gl1:new Float32Array([1,1])}),n.i(l.a)(u,3379,{gl1:64,gl2:2048}),n.i(l.a)(u,34076,{gl1:16}),n.i(l.a)(u,34930,{gl1:8}),n.i(l.a)(u,35661,{gl1:8}),n.i(l.a)(u,35660,{gl1:0}),n.i(l.a)(u,34024,{gl1:1}),n.i(l.a)(u,36348,{gl1:8}),n.i(l.a)(u,34921,{gl1:8}),n.i(l.a)(u,36347,{gl1:128}),n.i(l.a)(u,36349,{gl1:16}),n.i(l.a)(u,3386,{gl1:new Int32Array([0,0])}),n.i(l.a)(u,32883,{gl1:0,gl2:256}),n.i(l.a)(u,35071,{gl1:0,gl2:256}),n.i(l.a)(u,37447,{gl1:0,gl2:0}),n.i(l.a)(u,36063,{gl1:0,gl2:4}),n.i(l.a)(u,35379,{gl1:0,gl2:0}),n.i(l.a)(u,35374,{gl1:0,gl2:0}),n.i(l.a)(u,35377,{gl1:0,gl2:0}),n.i(l.a)(u,34852,{gl1:0,gl2:4}),n.i(l.a)(u,36203,{gl1:0,gl2:0}),n.i(l.a)(u,33001,{gl1:0,gl2:0}),n.i(l.a)(u,33e3,{gl1:0,gl2:0}),n.i(l.a)(u,37157,{gl1:0,gl2:0}),n.i(l.a)(u,35373,{gl1:0,gl2:0}),n.i(l.a)(u,35657,{gl1:0,gl2:0}),n.i(l.a)(u,36183,{gl1:0,gl2:0}),n.i(l.a)(u,37137,{gl1:0,gl2:0}),n.i(l.a)(u,34045,{gl1:0,gl2:0}),n.i(l.a)(u,35978,{gl1:0,gl2:0}),n.i(l.a)(u,35979,{gl1:0,gl2:0}),n.i(l.a)(u,35968,{gl1:0,gl2:0}),n.i(l.a)(u,35376,{gl1:0,gl2:0}),n.i(l.a)(u,35375,{gl1:0,gl2:0}),n.i(l.a)(u,35659,{gl1:0,gl2:0}),n.i(l.a)(u,37154,{gl1:0,gl2:0}),n.i(l.a)(u,35371,{gl1:0,gl2:0}),n.i(l.a)(u,35658,{gl1:0,gl2:0}),n.i(l.a)(u,35076,{gl1:0,gl2:-8,negative:!0}),n.i(l.a)(u,35077,{gl1:0,gl2:7}),n.i(l.a)(u,35380,{gl1:0,gl2:0}),u),d=37445,h=37446},function(t,e,n){"use strict";function i(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(s)}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clamped,i=void 0===n||n;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return i?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a(t){var e=t.data,n=t.width,i=t.height,r=t.bytesPerPixel,a=void 0===r?4:r,o=t.temp,s=n*a;o=o||new Uint8Array(s);for(var u=0;u<i/2;++u){var l=u*s,c=(i-u-1)*s;o.set(e.subarray(l,l+s)),e.copyWithin(l,c,c+s),e.set(o,c)}}function o(t){for(var e=t.data,n=t.width,i=t.height,r=Math.round(n/2),a=Math.round(i/2),o=new Uint8Array(r*a*4),s=0;s<a;s++)for(var u=0;u<r;u++)for(var l=0;l<4;l++)o[4*(s*r+u)+l]=e[4*(2*s*n+2*u)+l];return{data:o,width:r,height:a}}e.b=i,e.a=r,e.c=a,e.d=o;var s="Failed to deduce GL constant from typed array"},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(267),r=n(0),a=n(1),o=n(115),s=n(74),u=n(5),l={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},c=function(){function t(){var e=this;n.i(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(t){return e._assign(t)}),Object.freeze(this)}return n.i(a.a)(t,null,[{key:"getBytesPerElement",value:function(t){return n.i(o.a)(t.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(t){return n.i(u.a)(t.size),n.i(o.a)(t.type||5126).BYTES_PER_ELEMENT*t.size}},{key:"resolve",value:function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n.i(i.a)(t,[l].concat(r))}}]),n.i(a.a)(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==t.type&&(this.type!==t.type&&s.a.warn("accessor type mismatch"),this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size!==t.size&&s.a.warn("accessor size mismatch"),this.size=t.size),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.instanced&&(s.a.deprecated("Accessor.instanced","Accessor.divisor"),this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(s.a.deprecated("Accessor.isInstanced","Accessor.divisor"),this.divisor=t.isInstanced?1:0),void 0!==t.index&&(this.index=t.index?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}}]),t}()},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.framebuffer,r=void 0===i?null:i,a=e.color,s=void 0===a?null:a,d=e.depth,h=void 0===d?null:d,v=e.stencil,g=void 0===v?null:v,_={};r&&(_.framebuffer=r);var m=0;s&&(m|=f,!0!==s&&(_.clearColor=s)),h&&(m|=l,!0!==h&&(_.clearDepth=h)),g&&(m|=c,!0!==h&&(_.clearStencil=h)),n.i(u.a)(0!==m,p),n.i(o.f)(t,_,function(){t.clear(m)})}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.framebuffer,r=void 0===i?null:i,l=e.buffer,c=void 0===l?d:l,f=e.drawBuffer,_=void 0===f?0:f,m=e.value,y=void 0===m?[0,0,0,0]:m;n.i(s.b)(t),n.i(o.f)(t,{framebuffer:r},function(){switch(c){case d:switch(y.constructor){case Int32Array:t.clearBufferiv(c,_,y);break;case Uint32Array:t.clearBufferuiv(c,_,y);break;case Float32Array:default:t.clearBufferfv(c,_,y)}break;case h:t.clearBufferfv(h,0,[y]);break;case v:t.clearBufferiv(v,0,[y]);break;case g:var e=n.i(a.a)(y,2),i=e[0],r=e[1];t.clearBufferfi(g,0,i,r);break;default:n.i(u.a)(!1,p)}})}e.a=i,e.b=r;var a=n(31),o=n(59),s=n(7),u=n(5),l=256,c=1024,f=16384,d=6144,h=6145,v=6146,g=34041,p="clear: bad arguments"},function(t,e,n){"use strict";function i(t,e,i){var r=i[e];if(!r)return!1;var a=n.i(d.a)(t)?r.gl2||r.gl1:r.gl1;return"string"==typeof a?t.getExtension(a):a}n.d(e,"a",function(){return _});var r,a=n(0),o=n(4),s=n(2),u=n(1),l=n(3),c=n(27),f=n(18),d=n(7),h=n(42),v=n(5),g="EXT_color_buffer_float",p=(r={},n.i(f.a)(r,33189,{}),n.i(f.a)(r,33190,{gl2:!0}),n.i(f.a)(r,36012,{gl2:!0}),n.i(f.a)(r,36168,{}),n.i(f.a)(r,34041,{}),n.i(f.a)(r,35056,{gl2:!0}),n.i(f.a)(r,36013,{gl2:!0}),n.i(f.a)(r,32854,{}),n.i(f.a)(r,36194,{}),n.i(f.a)(r,32855,{}),n.i(f.a)(r,33321,{gl2:!0}),n.i(f.a)(r,33330,{gl2:!0}),n.i(f.a)(r,33329,{gl2:!0}),n.i(f.a)(r,33332,{gl2:!0}),n.i(f.a)(r,33331,{gl2:!0}),n.i(f.a)(r,33334,{gl2:!0}),n.i(f.a)(r,33333,{gl2:!0}),n.i(f.a)(r,33323,{gl2:!0}),n.i(f.a)(r,33336,{gl2:!0}),n.i(f.a)(r,33335,{gl2:!0}),n.i(f.a)(r,33338,{gl2:!0}),n.i(f.a)(r,33337,{gl2:!0}),n.i(f.a)(r,33340,{gl2:!0}),n.i(f.a)(r,33339,{gl2:!0}),n.i(f.a)(r,32849,{gl2:!0}),n.i(f.a)(r,32856,{gl2:!0}),n.i(f.a)(r,32857,{gl2:!0}),n.i(f.a)(r,36220,{gl2:!0}),n.i(f.a)(r,36238,{gl2:!0}),n.i(f.a)(r,36975,{gl2:!0}),n.i(f.a)(r,36214,{gl2:!0}),n.i(f.a)(r,36232,{gl2:!0}),n.i(f.a)(r,36226,{gl2:!0}),n.i(f.a)(r,36208,{gl2:!0}),n.i(f.a)(r,33325,{gl2:g}),n.i(f.a)(r,33327,{gl2:g}),n.i(f.a)(r,34842,{gl2:g}),n.i(f.a)(r,33326,{gl2:g}),n.i(f.a)(r,33328,{gl2:g}),n.i(f.a)(r,34836,{gl2:g}),n.i(f.a)(r,35898,{gl2:g}),r),_=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(a.a)(this,e),i=n.i(o.a)(this,n.i(s.a)(e).call(this,t,r)),i.initialize(r),Object.seal(n.i(c.a)(n.i(c.a)(i))),i}return n.i(l.a)(e,t),n.i(u.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format;return!n||i(t,n,p)}},{key:"getSamplesForFormat",value:function(t,e){var n=e.format;return t.getInternalformatParameter(36161,n,32937)}}]),n.i(u.a)(e,[{key:"initialize",value:function(t){var e=t.format,i=t.width,r=void 0===i?1:i,a=t.height,o=void 0===a?1:a,s=t.samples,u=void 0===s?0:s;return n.i(v.a)(e,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==u&&n.i(d.a)(this.gl)?this.gl.renderbufferStorageMultisample(36161,u,e,r,o):this.gl.renderbufferStorage(36161,e,r,o),this.format=e,this.width=r,this.height=o,this.samples=u,this}},{key:"resize",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindRenderbuffer(36161,t)}},{key:"_syncHandle",value:function(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}]),e}(h.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return g}),n.d(e,"b",function(){return p}),n.d(e,"c",function(){return _});var i=n(0),r=n(4),a=n(2),o=n(1),s=n(3),u=n(42),l=n(7),c=n(6),f=n(5),d="Shader: GLSL source code must be a JavaScript string",h=35632,v=35633,g=function(t){function e(t,o){var s;n.i(i.a)(this,e),n.i(l.d)(t),n.i(f.a)("string"==typeof o.source,d);var u=n.i(l.p)(o.source,null)||o.id||n.i(c.b)("unnamed ".concat(e.getTypeName(o.shaderType)));return s=n.i(r.a)(this,n.i(a.a)(e).call(this,t,{id:u})),s.shaderType=o.shaderType,s.source=o.source,s.initialize(o),s}return n.i(s.a)(e,t),n.i(o.a)(e,null,[{key:"getTypeName",value:function(t){switch(t){case v:return"vertex-shader";case h:return"fragment-shader";default:return n.i(f.a)(!1),"unknown"}}}]),n.i(o.a)(e,[{key:"initialize",value:function(t){var e=t.source,i=n.i(l.p)(e,null);i&&(this.id=n.i(c.b)(i)),this._compile(e)}},{key:"getParameter",value:function(t){return this.gl.getShaderParameter(this.handle,t)}},{key:"toString",value:function(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return n.i(l.p)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var t=this.gl.getShaderInfoLog(this.handle),e=n.i(l.q)(t,this.source,this.shaderType,this.id),i=e.shaderName,r=e.errors,a=e.warnings;throw c.a.error("GLSL compilation errors in ".concat(i,"\n").concat(r))(),c.a.warn("GLSL compilation warnings in ".concat(i,"\n").concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),e}(u.a),p=function(t){function e(t,o){return n.i(i.a)(this,e),"string"==typeof o&&(c.a.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),o={source:o}),n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{shaderType:v})))}return n.i(s.a)(e,t),n.i(o.a)(e,[{key:"_createHandle",value:function(){return this.gl.createShader(v)}}]),e}(g),_=function(t){function e(t,o){return n.i(i.a)(this,e),"string"==typeof o&&(c.a.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),o={source:o}),n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{shaderType:h})))}return n.i(s.a)(e,t),n.i(o.a)(e,[{key:"_createHandle",value:function(){return this.gl.createShader(h)}}]),e}(g)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),a=i(r),o=n(11),s=i(o),u=n(8),l=i(u),c=n(9),f=i(c),d=n(13),h=n(19),v=i(h),g=function(){function t(e,n){(0,l.default)(this,t);var i=n.id,r=void 0===i?"pass":i;this.id=r,this.gl=e,this.props={enabled:!0,screen:!1,swap:!1},(0,s.default)(this.props,n)}return(0,f.default)(t,[{key:"setProps",value:function(t){(0,s.default)(this.props,t)}},{key:"render",value:function(t,e){var n,i=this;if(this.props.enabled){var r=this.gl,o={gl:r,outputBuffer:t.writeBuffer,inputBuffer:t.readBuffer,animationProps:e,swapBuffers:function(){return t._swapFramebuffers()}};this.props.screen?(o.inputBuffer=o.outputBuffer,o.outputBuffer=d.Framebuffer.getDefaultFramebuffer(r)):this.props.swap&&(o.inputBuffer=t.writeBuffer,o.outputBuffer=t.readBuffer),(0,d.withParameters)(r,(n={framebuffer:o.outputBuffer},(0,a.default)(n,v.default.VIEWPORT,[0,0,r.canvas.width,r.canvas.height]),(0,a.default)(n,"clearColor",[0,0,0,.001]),n),function(){i._renderPass(o)}),this.props.debug&&o.outputBuffer.log(0,this.id),this.props.swap&&t._swapFramebuffers()}}},{key:"destroy",value:function(){this.id=null,this.gl=null,this.props=null}}]),t}();e.default=g},function(t,e,n){"use strict";function i(){return"&random="+(+new Date).toString(36)}function r(t){var e=new Image;e.src=t+i(),e=null}Object.defineProperty(e,"__esModule",{value:!0}),e.sendOnce=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.length>=3&&(0,R.default)(t[0].lat)&&(0,R.default)(t[0].lng)}function a(t){return t.length>=1&&t.every(function(t){return t.length>=3&&r(t)})}function o(t){return t.length>=1&&t.every(function(t){return a(t)})}function s(t){var e=(0,k.default)(t,1),n=e[0],i=t[t.length-1];return n.lat===i.lat&&n.lng===i.lng?t:t.concat([n])}function u(t){for(var e=0,n=1,i=void 0,r=void 0;n<t.length;)i=r||t[0],r=t[n],e+=(r.lng-i.lng)*(r.lat+i.lat),n+=1;return e>0}function l(t){return(r(t)?[[s(t)]]:a(t)?[t.map(function(t){return s(t)})]:t.map(function(t){return t.map(s)})).map(function(t){return t.map(function(t,e){var n=[];return t.forEach(function(t){if(n.length>0){var e=n[n.length-1];t.lat===e.lat&&t.lng===e.lng||n.push(t)}else n.push(t)}),0===e?u(n)?n.reverse():n:u(n)?n:n.reverse()})})}function c(t){return l(t).reduce(function(t,e){var n=e.reduce(function(t,e){return t.push(e),t},[]);return t.push.apply(t,(0,w.default)(n)),t},[])}function f(t){return r(t)?t.length:t.reduce(function(t,e){return t+e.reduce(function(t,e){return t+e.length},0)},0)}function d(t){return t.reduce(function(t,e){return t+h(e)},0)}function h(t){var e=0,n=!0,i=!0,r=!1,a=void 0;try{for(var o,s=(0,T.default)(t);!(i=(o=s.next()).done);i=!0){var u=o.value,l=u.length;e+=n?l>=3?l-3:0:l+1,n=!1}}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return e}function v(t){var e=null;if(t.length>1){var n=0;e=[],t.forEach(function(t){n+=t.length,e.push(n)}),e.pop()}return e}function g(t,e){var n=3*d(t),i=m(t),r=new e(n),a=0;return t.forEach(function(t,e){var n=_(t),o=!0,s=!1,u=void 0;try{for(var l,c=(0,T.default)(n);!(o=(l=c.next()).done);o=!0){var f=l.value;r[a]=f+i[e],a+=1}}catch(t){s=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}}),r}function p(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.result,i=void 0===n?[]:n,r=e.dimensions,a=void 0===r?3:r,o=0;o<t.length;){var s=t[o];Array.isArray(s)||ArrayBuffer.isView(s)?p(s,{result:i,dimensions:a}):i.push(s.lng,s.lat),o+=1}return i}function _(t){var e=v(t),n=p(t,{dimensions:2,result:[]});return(0,L.default)(n,e,2)}function m(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,i){n+=t.reduce(function(t,e){return t+e.length},0),e[i+1]=n}),e}function y(t){if(!N(t))return void new F.BaseTypeError("data数组中每个元素的属性path","array",t).error();var e=[];if(b(t)){if(!E(t))return console.error("参数错误：Plane中的path不合法"),[];for(var n=0;n<t.length;n+=2)e.push(new B(t[n],t[n+1]));return e}return t.forEach(function(t){var n=y(t);e.push(n)}),e}function b(t){return"number"==typeof t[0]}function E(t){return N(t)&&t.length%2==0}function A(t){var e=[];return t.complexPolygons.forEach(function(t){var n=0,i=[];t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){0===n?(i.push(t.lng),i.push(t.lng),i.push(t.lat),i.push(t.lat)):(i[0]=Math.min(i[0],t.lng),i[1]=Math.max(i[1],t.lng),i[2]=Math.min(i[2],t.lat),i[3]=Math.max(i[3],t.lat)),n+=1})})}),e.push(i)}),e}Object.defineProperty(e,"__esModule",{value:!0});var x=n(35),T=i(x),P=n(128),w=i(P),C=n(22),k=i(C),S=n(125),R=i(S);e.isSimple=r,e.isPart=a,e.isComplex=o,e.isClockWise=u,e.normalize=l,e.getBorderPolyline=c,e.getVertexCount=f,e.getTriangleCount=d,e.getTriangleCountOfPart=h,e.getSurfaceIndices=g,e.getPolygonPath=y,e.getPolygonsBBXList=A;var M=n(313),L=i(M),I=n(14),O=i(I),F=n(20),N=O.default.isArray,D=TMap,B=D.LatLng},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n={},i=null,r=Math.min(256,b),a=r,o=a*(0,f.default)(t).length,s=o<=b?1:1/Math.pow(2,Math.ceil(Math.log(o/b)/Math.LN2));o*=s,r*=s,a=r;var u=document.createElement("canvas"),c=u.getContext("2d");u.width=r,u.height=o;var h=0;for(var g in t){var p=t[g];for(var y in p)n[p[y]]={topY:1-h/o,bottomY:1-(h+a)/o};if(c.save(),m(g))c.fillStyle=g,c.fillRect(0,h,r,a);else{var E=JSON.parse(g),A=E.angle&&_(E.angle)?E.angle:0,x=.5*r,T=.5*r,P=.5*a,w=T-x*Math.cos(A*Math.PI/180),C=P+x*Math.sin(A*Math.PI/180),k=T+x*Math.cos(A*Math.PI/180),S=P-x*Math.sin(A*Math.PI/180),R=c.createLinearGradient(w,C,k,S);for(var M in E.stops)R.addColorStop(M,E.stops[M]);c.fillStyle=R,c.translate(0,h),c.fillRect(0,0,r,a)}c.restore(),h+=a}if(u){var L;i=new d.Texture2D(e,{data:u,parameters:(L={},(0,l.default)(L,v.default.TEXTURE_MAG_FILTER,v.default.LINEAR),(0,l.default)(L,v.default.TEXTURE_MIN_FILTER,v.default.LINEAR),L)})}return{gradientUvMap:n,gradientTexture:i}}function a(t,e,n,i){var r={};for(var a in t){var o=t[a];if(!i||!o.texture){var u=void 0,l=o[e]||n,c=y(l,!1);m(l)?u=l:c.result?u=(0,s.default)(l):console.error("styles中的color颜色值不合法: ",l),u&&(r[u]?r[u].push(a):r[u]=[a])}}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_TEXTURE_SIZE=void 0;var o=n(99),s=i(o),u=n(21),l=i(u),c=n(55),f=i(c);e.genGradientTexture=r,e.getColorsList=a;var d=n(13),h=n(19),v=i(h),g=n(14),p=i(g),_=p.default.isNumber,m=p.default.isValidColor,y=p.default.checkGradientObject,b=e.MAX_TEXTURE_SIZE=function(){var t=document.createElement("canvas"),e=t.getContext("webgl"),n=0;return e?(n=e.getParameter(e.MAX_TEXTURE_SIZE),e.getExtension("WEBGL_lose_context").loseContext()):console.error("当前浏览器不支持webgl，请升级浏览器至支持webgl的版本，或者更换浏览器"),n}()},function(t,e,n){"use strict";function i(t,e){var n=[];for(var i in e)n.push(i+"="+e[i]);return t+(-1===t.indexOf("?")?"?":"&")+n.join("&")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){t.exports={default:n(339),__esModule:!0}},function(t,e,n){t.exports={default:n(343),__esModule:!0}},function(t,e,n){t.exports={default:n(349),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(320),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},function(t,e,n){var i=n(47),r=n(133),a=n(57),o=n(106),s=n(357);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,f=6==t,d=5==t||f,h=e||s;return function(e,s,v){for(var g,p,_=a(e),m=r(_),y=i(s,v,3),b=o(m.length),E=0,A=n?h(e,b):u?h(e,0):void 0;b>E;E++)if((d||E in m)&&(g=m[E],p=y(g,E,_),t))if(n)A[E]=p;else if(p)switch(t){case 3:return!0;case 5:return g;case 6:return E;case 2:A.push(g)}else if(c)return!1;return f?-1:l||c?c:A}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(30),r=n(23).document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(81);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var i=n(82),r=n(17),a=n(139),o=n(50),s=n(68),u=n(364),l=n(86),c=n(192),f=n(25)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,g,p,_){u(n,e,v);var m,y,b,E=function(t){if(!d&&t in P)return P[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},A=e+" Iterator",x="values"==g,T=!1,P=t.prototype,w=P[f]||P["@@iterator"]||g&&P[g],C=w||E(g),k=g?x?E("entries"):C:void 0,S="Array"==e?P.entries||w:w;if(S&&(b=c(S.call(new t)))!==Object.prototype&&b.next&&(l(b,A,!0),i||"function"==typeof b[f]||o(b,f,h)),x&&w&&"values"!==w.name&&(T=!0,C=function(){return w.call(this)}),i&&!_||!d&&!T&&P[f]||o(P,f,C),s[e]=C,s[A]=h,g)if(m={values:x?C:E("values"),keys:p?C:E("keys"),entries:k},_)for(y in m)y in P||a(P,y,m[y]);else r(r.P+r.F*(d||T),e,m);return m}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(80);t.exports.f=function(t){return new i(t)}},function(t,e,n){var i=n(84),r=n(85),a=n(51),o=n(143),s=n(49),u=n(184),l=Object.getOwnPropertyDescriptor;e.f=n(36)?l:function(t,e){if(t=a(t),e=o(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(17),r=n(10),a=n(56);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},function(t,e,n){t.exports=n(50)},function(t,e,n){var i=n(141)("keys"),r=n(107);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(10),r=n(23),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(82)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(30);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(23),r=n(10),a=n(82),o=n(145),s=n(41).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,n){e.f=n(25)},function(t,e,n){var i=n(103),r=n(25)("iterator"),a=n(68);t.exports=n(10).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||a[i(t)]}},function(t,e,n){"use strict";function i(){var t=new s.a(2);return s.a!=Float32Array&&(t[0]=0,t[1]=0),t}function r(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}function a(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}function o(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}e.b=r,e.c=a,e.a=o;var s=n(72);!function(){var t=i()}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),r=n(1),a=n(6),o=n(93),s=n(5),u=function(){function t(e){var r=e.id;e.display;n.i(i.a)(this,t),this.id=r||n.i(a.b)(this.constructor.name),this.display=!0,this.position=new o.a,this.rotation=new o.a,this.scale=new o.a(1,1,1),this.matrix=new o.b,this.userData={}}return n.i(r.a)(t,[{key:"toString",value:function(){return"{id: ".concat(this.id,", children: ").concat(this.children,")}")}},{key:"setPosition",value:function(t){return n.i(s.a)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return n.i(s.a)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return n.i(s.a)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrixComponents",value:function(t){var e=t.position,n=t.rotation,i=t.scale,r=t.update,a=void 0===r||r;return e&&this.setPosition(e),n&&this.setRotation(n),i&&this.setScale(i),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(n),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,n=t.rotation,i=t.scale;return e&&this.setPosition(e),n&&this.setRotation(n),i&&this.setScale(i),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){n.i(s.a)(t),e=e||this.matrix;var i=new o.b(t).multiplyRight(e),r=i.invert();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:r.transpose()}}},{key:"transform",value:function(){if(this.parent){var t=this.parent;this.endPosition.set(this.position.add(t.endPosition)),this.endRotation.set(this.rotation.add(t.endRotation)),this.endScale.set(this.scale.add(t.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var e=this.children,n=0;n<e.length;++n)e[n].transform();return this}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(53),l=function(t){function e(t,r){return n.i(i.a)(this,e),r=Array.isArray(r)?{passes:r}:r,n.i(a.a)(this,n.i(o.a)(e).call(this,t,Object.assign({id:"composite-pass"},r)))}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"render",value:function(){var t=this.props.passes,e=void 0===t?[]:t,n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.render.apply(s,arguments)}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}}]),e}(u.a)},function(t,e,n){"use strict";var i=n(227);n.d(e,"g",function(){return i.a});var r=(n(152),n(151));n.d(e,"d",function(){return r.b});var a=(n(232),n(233),n(153),n(234),n(231),n(235),n(230),n(449));n.d(e,"e",function(){return a.a}),n.d(e,"b",function(){return a.b}),n.d(e,"f",function(){return a.c}),n.d(e,"a",function(){return a.d});var o=n(444);n.d(e,"c",function(){return o.a})},function(t,e,n){"use strict";function i(t,e,n,i){var r=e===u.a;for(var a in n)!function(e){var i=n[e];switch(e){case"vs:#decl":r&&(t=t.replace(d,function(t){return"".concat(i,"\n").concat(t)}));break;case"vs:#main-start":r&&(t=t.replace(d,function(t){return t+i}));break;case"vs:#main-end":r&&(t=t.replace(h,function(t){return i+t}));break;case"fs:#decl":r||(t=t.replace(d,function(t){return"".concat(i,"\n").concat(t)}));break;case"fs:#main-start":r||(t=t.replace(d,function(t){return t+i}));break;case"fs:#main-end":r||(t=t.replace(h,function(t){return i+t}));break;default:t=t.replace(e,function(t){return t+i})}}(a);return i&&(t=t.replace("}s*$",function(t){return t+f[e]})),t}function r(t){var e={};return c()(Array.isArray(t)&&t.length>1),t.forEach(function(t){for(var n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]}),e}e.a=i,e.b=r;var a,o=n(18),s=n(438),u=n(228),l=n(96),c=n.n(l),f=(a={},n.i(o.a)(a,u.a,s.a),n.i(o.a)(a,u.b,s.b),a),d=/void main\s*\([^\)]*\)\s*\{\n?/,h=/}\n?[^{}]*$/},function(t,e,n){"use strict";function i(t){c.setDefaultShaderModules(t)}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ignoreMultipleRegistrations,i=void 0!==n&&n;c.registerShaderModules(t,{ignoreMultipleRegistrations:i})}function a(t){return t=t.concat(c.defaultShaderModules),t=c.resolveModules(t),s(t)}function o(t){return c.getShaderModule(t)}function s(t){var e={},n={};return u({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(function(t,e){return n[e]-n[t]}).map(function(t){return e[t]})}function u(t){var e=t.modules,n=t.level,i=t.moduleMap,r=t.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var a=!0,o=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;i[f.name]=f,(void 0===r[f.name]||r[f.name]<n)&&(r[f.name]=n)}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var d=!0,h=!1,v=void 0;try{for(var g,p=e[Symbol.iterator]();!(d=(g=p.next()).done);d=!0){var _=g.value;_.dependencies&&u({modules:_.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}}catch(t){h=!0,v=t}finally{try{d||null==p.return||p.return()}finally{if(h)throw v}}}e.a=i,e.b=r,e.c=a,e.d=o;var l=n(429),c=new l.a},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{});return void 0!==t.modelMatrix&&(e.modelMatrix=t.modelMatrix),void 0!==t.viewMatrix&&(e.viewMatrix=t.viewMatrix),void 0!==t.projectionMatrix&&(e.projectionMatrix=t.projectionMatrix),void 0!==t.cameraPositionWorld&&(e.cameraPositionWorld=t.cameraPositionWorld),void 0===t.projectionMatrix&&void 0===t.viewMatrix||(e.viewProjectionMatrix=new r.b(t.projectionMatrix).multiplyRight(t.viewMatrix)),e}var r=n(93),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o={modelMatrix:a,viewMatrix:a,projectionMatrix:a,cameraPositionWorld:[0,0,0]},s="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",u="".concat(s,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),l="\n".concat(s);e.a={name:"project",getUniforms:i,vs:u,fs:l}},function(t,e,n){"use strict";function i(t){return Boolean(t&&(t instanceof f.k||t.ARRAY_BUFFER===b))}function r(t){return Boolean(t&&(t instanceof f.l||t.TEXTURE_BINDING_3D===E))}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(A,{width:1,height:1},t)}function o(){function t(t){if(u)throw new Error(t);return null}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},A,e);var i,r=e,a=r.canvas,o=r.width,s=r.height,u=r.throwOnError,l=r.manageState,f=r.debug;if(y.e){var _=n.i(h.b)({canvas:a,width:o,height:s,onError:t});i=n.i(v.a)({canvas:_,opts:e})}else i=n.i(d.a)({width:o,height:s,opts:e,onError:t});return i?(l&&n.i(g.a)(i,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.a.log.apply(y.a,[1].concat(e))()}}),y.e&&f&&(i=n.i(p.a)(i,{debug:f}),y.a.priority=Math.max(y.a.priority,1)),c(i),i):null}function s(t){var e=t.getExtension("STACKGL_destroy_context");e&&e.destroy()}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){var n=e.useDevicePixels?window.devicePixelRatio||1:1,i="width"in e?e.width:t.canvas.clientWidth,r="height"in e?e.height:t.canvas.clientHeight;return t.canvas.width=i*n,void(t.canvas.height=r*n)}var a=t.getExtension("STACKGL_resize_drawingbuffer");a&&"width"in e&&"height"in e&&a.resize(e.width,e.height)}function l(t){m.a.poll(t)}function c(t){var e=r(t)?"WebGL2":"WebGL1",i=n.i(_.d)(t),a=i?"(".concat(i.vendor,",").concat(i.renderer,")"):"",o=t.debug?" debug":"";y.a.once(0,"".concat(e).concat(o," context ").concat(a))()}e.f=i,e.e=a,e.a=o,e.b=s,e.c=u,e.d=l;var f=n(7),d=n(240),h=n(239),v=n(238),g=n(156),p=n(155),_=n(114),m=n(157),y=n(6),b=(n(5),34962),E=32874,A={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600}},function(t,e,n){"use strict";function i(t){return t.luma=t.luma||{},t.luma}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.debug,i=void 0===n||n;return null===t?null:i?o(t):a(t)}function a(t){if(null===t)return null;var e=i(t);return e.realContext?e.realContext:t}function o(t){if(null===t)return null;if(!f.a.WebGLDebug)return d.a.warn('WebGL debug mode not activated. import "luma.gl/debug" to enable.')(),t;var e=i(t);if(e.realContext)return t;if(e.debugContext)return e.debugContext;var r=function t(){n.i(c.a)(this,t)},a=f.a.WebGLDebug.makeDebugContext(t,u,l);return Object.assign(r.prototype,a),e.debugContext=a,a.debug=!0,a.gl=t,d.a.info("debug context actived."),a}function s(t,e){var n=f.a.WebGLDebug.glFunctionArgsToString(t,e);return n="".concat(n.slice(0,100)).concat(n.length>100?"...":""),"gl.".concat(t,"(").concat(n,")")}function u(t,e,n){var i=f.a.WebGLDebug.glEnumToString(t),r=f.a.WebGLDebug.glFunctionArgsToString(e,n),a="".concat(i," in gl.").concat(e,"(").concat(r,")");if(d.a.throw)throw new Error(a);d.a.error(a)()}function l(t,e){var n;if(d.a.priority>=4&&(n=s(t,e),d.a.log(4,n)()),d.a.break){n=n||s(t,e);d.a.break&&d.a.break.every(function(t){return-1!==n.indexOf(t)})}var i=!0,r=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){if(void 0===o.value){if(n=n||s(t,e),d.a.throw)throw new Error("Undefined argument: ".concat(n));d.a.error("Undefined argument: ".concat(n))}}}catch(t){r=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(r)throw a}}}e.a=r;var c=n(0),f=n(73),d=n(6)},function(t,e,n){"use strict";(function(t){function i(t,e){var n=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache||(t.state.cache[e]=n.apply(void 0,arguments)),t.state.enable?t.state.cache[e]:n.apply(void 0,arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function r(t,e,n){var i=t[e].bind(t);t[e]=function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var s=n.apply(void 0,[t.state._updateCache].concat(a)),u=s.valueChanged,l=s.oldValue;if(u){var c;(c=t.state).log.apply(c,["gl.".concat(e)].concat(a)),i.apply(void 0,a)}return l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function a(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.enable,s=void 0===o||o,u=a.copyState;if(n.i(d.a)(void 0!==u),!e.state){var l=void 0!==t?t:window;l.polyfillContext&&l.polyfillContext(e),e.state=new g(e,{copyState:u,enable:s});for(var c in v){r(e,c,v[c])}i(e,"getParameter"),i(e,"isEnabled")}return e.state.enable=s,e}function o(t){t.state||a(t,{copyState:!1}),t.state.push()}function s(t){n.i(d.a)(t.state),t.state.pop()}e.a=a,e.b=o,e.c=s;var u=n(0),l=n(1),c=n(18),f=n(241),d=n(5),h=function(t,e){var n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return t===e},v={enable:function(t,e){return t(n.i(c.a)({},e,!0))},disable:function(t,e){return t(n.i(c.a)({},e,!1))},pixelStorei:function(t,e,i){return t(n.i(c.a)({},e,i))},hint:function(t,e,i){return t(n.i(c.a)({},e,i))},bindFramebuffer:function(t,e,i){var r;switch(e){case 36160:return t((r={},n.i(c.a)(r,36006,i),n.i(c.a)(r,36010,i),r));case 36009:return t(n.i(c.a)({},36006,i));case 36008:return t(n.i(c.a)({},36010,i));default:return null}},blendColor:function(t,e,i,r,a){return t(n.i(c.a)({},32773,new Float32Array([e,i,r,a])))},blendEquation:function(t,e){var i;return t((i={},n.i(c.a)(i,32777,e),n.i(c.a)(i,34877,e),i))},blendEquationSeparate:function(t,e,i){var r;return t((r={},n.i(c.a)(r,32777,e),n.i(c.a)(r,34877,i),r))},blendFunc:function(t,e,i){var r;return t((r={},n.i(c.a)(r,32969,e),n.i(c.a)(r,32968,i),n.i(c.a)(r,32971,e),n.i(c.a)(r,32970,i),r))},blendFuncSeparate:function(t,e,i,r,a){var o;return t((o={},n.i(c.a)(o,32969,e),n.i(c.a)(o,32968,i),n.i(c.a)(o,32971,r),n.i(c.a)(o,32970,a),o))},clearColor:function(t,e,i,r,a){return t(n.i(c.a)({},3106,new Float32Array([e,i,r,a])))},clearDepth:function(t,e){return t(n.i(c.a)({},2931,e))},clearStencil:function(t,e){return t(n.i(c.a)({},2961,e))},colorMask:function(t,e,i,r,a){return t(n.i(c.a)({},3107,[e,i,r,a]))},cullFace:function(t,e){return t(n.i(c.a)({},2885,e))},depthFunc:function(t,e){return t(n.i(c.a)({},2932,e))},depthRange:function(t,e,i){return t(n.i(c.a)({},2928,new Float32Array([e,i])))},depthMask:function(t,e){return t(n.i(c.a)({},2930,e))},frontFace:function(t,e){return t(n.i(c.a)({},2886,e))},lineWidth:function(t,e){return t(n.i(c.a)({},2849,e))},polygonOffset:function(t,e,i){var r;return t((r={},n.i(c.a)(r,32824,e),n.i(c.a)(r,10752,i),r))},sampleCoverage:function(t,e,i){var r;return t((r={},n.i(c.a)(r,32938,e),n.i(c.a)(r,32939,i),r))},scissor:function(t,e,i,r,a){return t(n.i(c.a)({},3088,new Int32Array([e,i,r,a])))},stencilMask:function(t,e){var i;return t((i={},n.i(c.a)(i,2968,e),n.i(c.a)(i,36005,e),i))},stencilMaskSeparate:function(t,e,i){return t(n.i(c.a)({},1028===e?2968:36005,i))},stencilFunc:function(t,e,i,r){var a;return t((a={},n.i(c.a)(a,2962,e),n.i(c.a)(a,2967,i),n.i(c.a)(a,2963,r),n.i(c.a)(a,34816,e),n.i(c.a)(a,36003,i),n.i(c.a)(a,36004,r),a))},stencilFuncSeparate:function(t,e,i,r,a){var o;return t((o={},n.i(c.a)(o,1028===e?2962:34816,i),n.i(c.a)(o,1028===e?2967:36003,r),n.i(c.a)(o,1028===e?2963:36004,a),o))},stencilOp:function(t,e,i,r){var a;return t((a={},n.i(c.a)(a,2964,e),n.i(c.a)(a,2965,i),n.i(c.a)(a,2966,r),n.i(c.a)(a,34817,e),n.i(c.a)(a,34818,i),n.i(c.a)(a,34819,r),a))},stencilOpSeparate:function(t,e,i,r,a){var o;return t((o={},n.i(c.a)(o,1028===e?2964:34817,i),n.i(c.a)(o,1028===e?2965:34818,r),n.i(c.a)(o,1028===e?2966:34819,a),o))},viewport:function(t,e,i,r,a){return t(n.i(c.a)({},2978,new Int32Array([e,i,r,a])))}},g=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.copyState,a=void 0!==r&&r,o=i.log,s=void 0===o?function(){}:o;n.i(u.a)(this,t),this.gl=e,this.stateStack=[],this.enable=!0,this.cache=a?n.i(f.a)(e):Object.assign({},f.b),this.log=s,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return n.i(l.a)(t,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){n.i(d.a)(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];n.i(f.c)(this.gl,t,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(t){var e,i=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var a in t)n.i(d.a)(void 0!==a),h(t[a],this.cache[a])||(i=!0,e=this.cache[a],!r||a in r||(r[a]=this.cache[a]),this.cache[a]=t[a]);return{valueChanged:i,oldValue:e}}}]),t}()}).call(e,n(63))},function(t,e,n){"use strict";var i=n(0),r=n(1),a=function(t){return t},o=function(){function t(){n.i(i.a)(this,t),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return n.i(r.a)(t,[{key:"poll",value:function(t){this.cancelInvalidQueries(t);var e=!0,n=!1,i=void 0;try{for(var r,a=this.pendingQueries.values()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;if(o.isResultAvailable()){var s=o.getResult();this.resolveQuery(o,s)}}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setInvalidator",value:function(t){var e=t.queryType,n=t.errorMessage,i=t.checkInvalid;this.invalidQueryType=e,this.invalidErrorMessage=n,this.checkInvalid=i}},{key:"beginQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;this.cancelInvalidQueries(t.gl),this.cancelQuery(t);var i={};return t.promise=new Promise(function(t,e){i.resolve=t,i.reject=e}),Object.assign(t.promise,i),this.pendingQueries.add(t),t.promise.then(e).catch(n)}},{key:"resolveQuery",value:function(t,e){this.pendingQueries.delete(t),t.promise.resolve(e)}},{key:"rejectQuery",value:function(t,e){this.pendingQueries.delete(t),t.promise&&t.promise.reject(new Error(e))}},{key:"deleteQuery",value:function(t){return this.rejectQuery(t,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(t){return this.rejectQuery(t,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(t){t instanceof this.invalidQueryType&&this.rejectQuery(t,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(t){if(this.checkInvalid(t)){var e=!0,n=!1,i=void 0;try{for(var r,a=this.pendingQueries.values()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;this.invalidateQuery(o)}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}}}]),t}();e.a=new o},function(t,e,n){"use strict";(function(t){n.d(e,"d",function(){return s}),n.d(e,"b",function(){return f}),n.d(e,"a",function(){return h}),n.d(e,"c",function(){return v});var i=n(0),r=n(73),a=n(112),o=null,s=function(){throw new Error("luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.")};if(!a.a)try{s=t.require("gl"),o=t.require("gl/wrap")}catch(t){}var u=function t(){n.i(i.a)(this,t)},l=o||r.a,c=l.WebGLRenderingContext,f=void 0===c?u:c,d=(l.WebGLProgram,l.WebGLShader,l.WebGLBuffer),h=void 0===d?u:d,v=(l.WebGLFramebuffer,l.WebGLRenderbuffer,l.WebGLTexture,l.WebGLUniformLocation,l.WebGLActiveInfo,l.WebGLShaderPrecisionFormat,function(){var t=function t(){n.i(i.a)(this,t)};return r.a.WebGL2RenderingContext||t}());!function(){r.a.Image}()}).call(e,n(260)(t))},function(t,e,n){"use strict";n.d(e,"a",function(){return x});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(169),u=n(3),l=n(27),c=n(42),f=n(77),d=n(91),h=n(162),v=n(119),g=n(467),p=n(59),_=n(162),m=n(7),y=n(90),b=n(76),E=n(6),A=n(5),x=function(t){function e(t){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),r=n.i(a.a)(this,n.i(o.a)(e).call(this,t,s)),r.stubRemovedMethods("Program","v6.0",["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"]),r._isCached=!1,r.initialize(s),Object.seal(n.i(l.a)(n.i(l.a)(r))),r._setId(s.id),r}return n.i(u.a)(e,t),n.i(r.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vs,i=t.fs,r=t.varyings,a=t.bufferMode,o=void 0===a?35981:a;return this.vs="string"==typeof e?new v.b(this.gl,{id:"".concat(t.id,"-vs"),source:e}):e,this.fs="string"==typeof i?new v.c(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,n.i(A.a)(this.vs instanceof v.b),n.i(A.a)(this.fs instanceof v.c),this.uniforms={},this.samplers={},r&&(n.i(m.b)(this.gl),this.varyings=r,this.gl.transformFeedbackVaryings(this.handle,r,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new g.a(this),this.setProps(t)}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:n.i(s.a)(n.i(o.a)(e.prototype),"delete",this).call(this,t)}},{key:"setProps",value:function(t){return"uniforms"in t&&this.setUniforms(t.uniforms,t.samplers),this}},{key:"draw",value:function(t){var e=this,i=t.logPriority,r=t.drawMode,a=void 0===r?4:r,o=t.vertexCount,s=t.offset,u=void 0===s?0:s,l=t.start,c=t.end,f=t.isIndexed,d=void 0!==f&&f,h=t.indexType,v=void 0===h?5123:h,g=t.isInstanced,_=void 0!==g&&g,x=t.instanceCount,T=void 0===x?0:x,P=t.vertexArray,w=void 0===P?null:P,C=t.transformFeedback,k=t.framebuffer,S=t.parameters,R=void 0===S?{}:S,M=t.uniforms,L=void 0===M?{}:M,I=t.samplers,O=void 0===I?{}:I;if(void 0!==i){var F=k?k.id:"default",N="mode=".concat(n.i(b.b)(this.gl,a)," verts=").concat(o," ")+"instances=".concat(T," indexType=").concat(n.i(b.b)(this.gl,v)," ")+"isInstanced=".concat(_," isIndexed=").concat(d," ")+"Framebuffer=".concat(F);E.a.log(i,N)()}return this.gl.useProgram(this.handle),n.i(A.a)(w),w.bindForDraw(o,T,function(){if(L&&(E.a.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)"),e.setUniforms(L,O)),e._bindTextures(),void 0!==k&&(R=Object.assign({},R,{framebuffer:k})),C){var t=n.i(y.c)(a);C.begin(t)}n.i(p.f)(e.gl,R,function(){d&&_?e.gl.drawElementsInstanced(a,o,v,u,T):d&&n.i(m.a)(e.gl)&&!isNaN(l)&&!isNaN(c)?e.gl.drawRangeElements(a,l,c,o,v,u):d?e.gl.drawElements(a,o,v,u):_?e.gl.drawArraysInstanced(a,u,o,T):e.gl.drawArrays(a,u,o)}),C&&C.end()}),this}},{key:"setSamplers",value:function(t){Object.assign(this.samplers,t)}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,a={};for(var o in t)n.i(_.a)(this.uniforms[o],t[o])||(r=!0,a[o]=t[o],this.uniforms[o]=n.i(_.b)(t[o]));return r&&(i(),n.i(_.c)(a,this.id,this._uniformSetters),Object.assign(this.samplers,e),this._setUniforms(a)),this}},{key:"_bindTextures",value:function(){for(var t in this.uniforms){var e=this._uniformSetters[t];if(e&&void 0!==e.textureIndex){var n=this.uniforms[t],i=this.samplers[t];n instanceof d.a&&(n=n.texture),n instanceof f.a&&n.bind(e.textureIndex),i&&i.bind(e.textureIndex)}}}},{key:"_setUniforms",value:function(t){this.gl.useProgram(this.handle);for(var e in t){var n=t[e],i=this._uniformSetters[e];if(i)if(n instanceof d.a&&(n=n.texture),n instanceof f.a){void 0===i.textureIndex&&(i.textureIndex=this._textureIndexCounter++);var r=n,a=i.textureIndex;r.bind(a),i(a)}else i(n)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(t){var e=this.gl.getAttachedShaders(t),n={},i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new v.b({handle:u});break;case 35632:n.fs=new v.c({handle:u})}}}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}},{key:"_getParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_setId",value:function(t){if(!t){var e=this._getName();this.id=n.i(E.b)(e)}}},{key:"_getName",value:function(){var t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program"}},{key:"_compileAndLink",value:function(){var t=this.gl;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),E.a.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),E.a.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||E.a.priority>0){t.validateProgram(this.handle);if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var e=0;e<this._uniformCount;e++){var i=this.gl.getActiveUniform(this.handle,e),r=n.i(h.d)(i.name),a=r.name,o=r.isArray,s=t.getUniformLocation(this.handle,a);this._uniformSetters[a]=n.i(h.e)(t,s,i,o)}this._textureIndexCounter=0}},{key:"reset",value:function(){}},{key:"getActiveUniforms",value:function(t,e){return this.gl.getActiveUniforms(this.handle,t,e)}},{key:"getUniformBlockIndex",value:function(t){return this.gl.getUniformBlockIndex(this.handle,t)}},{key:"getActiveUniformBlockParameter",value:function(t,e){return this.gl.getActiveUniformBlockParameter(this.handle,t,e)}},{key:"uniformBlockBinding",value:function(t,e){this.gl.uniformBlockBinding(this.handle,t,e)}}]),e}(c.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(27),l=n(77),c=n(5),f=[34069,34070,34071,34072,34073,34074],d=function(t){function e(t){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),r=n.i(a.a)(this,n.i(o.a)(e).call(this,t,Object.assign({},s,{target:34067}))),r.initialize(s),Object.seal(n.i(u.a)(n.i(u.a)(r))),r}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.format,i=void 0===e?6408:e,r=t.mipmaps,a=void 0===r||r,o=t.width,s=void 0===o?1:o,u=t.height,l=void 0===u?1:u,f=t.type,d=void 0===f?5121:f,h=t.dataFormat,v=this._deduceParameters({format:i,type:d,dataFormat:h});d=v.type,h=v.dataFormat;var g=this._deduceImageSize({data:t[34069],width:s,height:l});s=g.width,l=g.height,n.i(c.a)(s===l),this.setCubeMapImageData(t),a&&this.generateMipmap(t),this.opts=t}},{key:"subImage",value:function(t){var e=t.face,n=t.data,i=t.x,r=void 0===i?0:i,a=t.y,o=void 0===a?0:a,s=t.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:e,data:n,x:r,y:o,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(t){var e=t.width,n=t.height,i=t.pixels,r=t.data,a=t.border,o=void 0===a?0:a,s=t.format,u=void 0===s?6408:s,l=t.type,c=void 0===l?5121:l,d=(t.generateMipmap,this.gl);if(i=i||r,this.bind(),this.width||this.height)for(var h=0;h<f.length;h++){var v=f[h];d.texImage2D(v,0,u,e,n,o,u,c,i[v])}else for(var g=0;g<f.length;g++){var p=f[g];d.texImage2D(p,0,u,u,c,i[p])}}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.index;return void 0!==e&&this.gl.activeTexture(33984+e),this.gl.bindTexture(34067,this.handle),e}},{key:"unbind",value:function(){return this.gl.bindTexture(34067,null),this}}]),e}(l.a);d.FACES=f},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(0),r=n(4),a=n(2),o=n(1),s=n(3),u=n(27),l=n(42),c=n(46),f=n(7),d=n(6),h=function(t){function e(t){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(f.b)(t),o=n.i(r.a)(this,n.i(a.a)(e).call(this,t,s)),o.initialize(s),o.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(n.i(u.a)(n.i(u.a)(o))),o}return n.i(s.a)(e,t),n.i(o.a)(e,null,[{key:"isSupported",value:function(t){return n.i(f.a)(t)}}]),n.i(o.a)(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,n.i(d.f)(this.buffers)||this.bind(function(){return t._unbindBuffers()}),this.setProps(e),this}},{key:"setProps",value:function(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}},{key:"setBuffers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var n in e)t.setBuffer(n,e[n])}),this}},{key:"setBuffer",value:function(t,e){var n=this,i=this._getVaryingIndex(t),r=this._getBufferParams(e),a=r.buffer,o=r.sizeInBytes,s=r.offsetInBytes;return i<0?(this.unused[t]=a,d.a.warn(function(){return"".concat(n.id," unused varying buffer ").concat(t)})(),this):(this.buffers[i]=e,this.bindOnUse||this._bindBuffer(i,a,s,o),this)}},{key:"begin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(t){var e,n,i;return t instanceof c.a==!1?(i=t.buffer,n=t.sizeInBytes,e=t.offsetInBytes):i=t,void 0===e&&void 0===n||(e=e||0,n=n||i.byteLength-e),{buffer:i,offsetInBytes:e,sizeInBytes:n}}},{key:"_getVaryingInfo",value:function(t){return this.configuration&&this.configuration.getVaryingInfo(t)}},{key:"_getVaryingIndex",value:function(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers){var e=this._getBufferParams(this.buffers[t]),n=e.buffer,i=e.sizeInBytes,r=e.offsetInBytes;this._bindBuffer(t,n,r,i)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,null)}},{key:"_bindBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,r=e&&e.handle;return r&&void 0!==i?this.gl.bindBufferRange(35982,t,r,n,i):this.gl.bindBufferBase(35982,t,r),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(t){this.gl.bindTransformFeedback(36386,this.handle)}}]),e}(l.a)},function(t,e,n){"use strict";function i(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(P[0]=t,t=P);var r=t.length;if(r%e&&b.a.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;var a=i[r];a||(a=new n(r),i[r]=a);for(var o=0;o<r;o++)a[o]=t[o];return a}function r(t,e){return i(t,e,Float32Array,A)}function a(t,e){return i(t,e,Int32Array,x)}function o(t,e){return i(t,e,Uint32Array,T)}function s(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};var e=/([^\[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function u(t,e,n){var i=E[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i.bind(null,t,e)}function l(t,e,n){for(var i in t){var r=t[i];if((!n||Boolean(n[i]))&&!c(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}return!0}function c(t){return Array.isArray(t)||ArrayBuffer.isView(t)?f(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof m.a||t instanceof y.a||(t instanceof _.a||t instanceof p.a&&Boolean(t.texture))))}function f(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function d(t,e){if(Array.isArray(t)||ArrayBuffer.isView(t)){if(!e)return!1;var n=t.length;if(e.length!==n)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return t===e}function h(t){return Array.isArray(t)||ArrayBuffer.isView(t)?t.slice():t}e.d=s,e.e=u,e.c=l,e.a=d,e.b=h;var v,g=n(18),p=n(91),_=n(118),m=n(77),y=n(246),b=n(6),E=(v={},n.i(g.a)(v,5126,function(t,e,n){return t.uniform1fv(e,r(n,1))}),n.i(g.a)(v,35664,function(t,e,n){return t.uniform2fv(e,r(n,2))}),n.i(g.a)(v,35665,function(t,e,n){return t.uniform3fv(e,r(n,3))}),n.i(g.a)(v,35666,function(t,e,n){return t.uniform4fv(e,r(n,4))}),n.i(g.a)(v,5124,function(t,e,n){return t.uniform1iv(e,a(n,1))}),n.i(g.a)(v,35667,function(t,e,n){return t.uniform2iv(e,a(n,2))}),n.i(g.a)(v,35668,function(t,e,n){return t.uniform3iv(e,a(n,3))}),n.i(g.a)(v,35669,function(t,e,n){return t.uniform4iv(e,a(n,4))}),n.i(g.a)(v,35670,function(t,e,n){return t.uniform1iv(e,a(n,1))}),n.i(g.a)(v,35671,function(t,e,n){return t.uniform2iv(e,a(n,2))}),n.i(g.a)(v,35672,function(t,e,n){return t.uniform3iv(e,a(n,3))}),n.i(g.a)(v,35673,function(t,e,n){return t.uniform4iv(e,a(n,4))}),n.i(g.a)(v,35674,function(t,e,n){return t.uniformMatrix2fv(e,!1,r(n,4))}),n.i(g.a)(v,35675,function(t,e,n){return t.uniformMatrix3fv(e,!1,r(n,9))}),n.i(g.a)(v,35676,function(t,e,n){return t.uniformMatrix4fv(e,!1,r(n,16))}),n.i(g.a)(v,35678,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,35680,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,5125,function(t,e,n){return t.uniform1uiv(e,o(n,1))}),n.i(g.a)(v,36294,function(t,e,n){return t.uniform2uiv(e,o(n,2))}),n.i(g.a)(v,36295,function(t,e,n){return t.uniform3uiv(e,o(n,3))}),n.i(g.a)(v,36296,function(t,e,n){return t.uniform4uiv(e,o(n,4))}),n.i(g.a)(v,35685,function(t,e,n){return t.uniformMatrix2x3fv(e,!1,r(n,6))}),n.i(g.a)(v,35686,function(t,e,n){return t.uniformMatrix2x4fv(e,!1,r(n,8))}),n.i(g.a)(v,35687,function(t,e,n){return t.uniformMatrix3x2fv(e,!1,r(n,6))}),n.i(g.a)(v,35688,function(t,e,n){return t.uniformMatrix3x4fv(e,!1,r(n,12))}),n.i(g.a)(v,35689,function(t,e,n){return t.uniformMatrix4x2fv(e,!1,r(n,8))}),n.i(g.a)(v,35690,function(t,e,n){return t.uniformMatrix4x3fv(e,!1,r(n,12))}),n.i(g.a)(v,35679,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,35682,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36289,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36292,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36293,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36298,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36299,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36300,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36303,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36306,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36307,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36308,function(t,e,n){return t.uniform1i(e,n)}),n.i(g.a)(v,36311,function(t,e,n){return t.uniform1i(e,n)}),v),A={},x={},T={},P=[0]},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(94),l=n(37),c=function(t,e){if(!t)throw new Error(e)},f=function(t){function e(){return n.i(i.a)(this,e),n.i(a.a)(this,n.i(o.a)(e).apply(this,arguments))}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,i=0;i<this.ELEMENTS;++i){var r=this[i]-t[i];e+=r*r}return n.i(l.c)(e)}},{key:"dot",value:function(t){for(var e=0,i=0;i<this.ELEMENTS;++i)e+=this[i]*t[i];return n.i(l.c)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0;i<e.length;i++)for(var r=e[i],a=0;a<this.ELEMENTS;++a)this[a]+=r[a];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0;i<e.length;i++)for(var r=e[i],a=0;a<this.ELEMENTS;++a)this[a]-=r[a];return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0;i<e.length;i++)for(var r=e[i],a=0;a<this.ELEMENTS;++a)this[a]*=r[a];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0;i<e.length;i++)for(var r=e[i],a=0;a<this.ELEMENTS;++a)this[a]/=r[a];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"scaleAndAdd",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*e+t[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return c(t>=0&&t<this.ELEMENTS,"index is out of range"),n.i(l.c)(this[t])}},{key:"setComponent",value:function(t,e){return c(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=n.i(l.c)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=n.i(l.c)(t)}}]),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return E});var i=n(31),r=n(64),a=n(0),o=n(1),s=n(4),u=n(2),l=n(3),c=n(94),f=n(37),d=n(251),h=n(165),v=n(78),g=n(253),p=n(406),_=n(147),m=n(88),y=n(202),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E=function(t){function e(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n.i(a.a)(this,e),t=n.i(s.a)(this,n.i(u.a)(e).call(this)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return n.i(l.a)(e,t),n.i(o.a)(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=r,this[2]=u,this[3]=d,this[4]=e,this[5]=a,this[6]=l,this[7]=h,this[8]=n,this[9]=o,this[10]=c,this[11]=v,this[12]=i,this[13]=s,this[14]=f,this[15]=g,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this[4]=r,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=f,this[12]=d,this[13]=h,this[14]=v,this[15]=g,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,n.i(r.a)(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,i){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[t][e]=n.i(f.c)(i):this[e][t]=n.i(f.c)(i),this}},{key:"determinant",value:function(){return p.a(this)}},{key:"identity",value:function(){return this.copy(b)}},{key:"fromQuaternion",value:function(t){return p.b(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,n=t.right,i=t.bottom,r=t.top,a=t.near,o=t.far;return p.c(this,e,n,i,r,a,o),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,n=t.center,i=void 0===n?[0,0,0]:n,r=t.up,a=void 0===r?[0,1,0]:r;return p.d(this,e,i,a),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,i=t.bottom,r=t.top,a=t.near,o=void 0===a?.1:a,s=t.far,u=void 0===s?500:s;return p.e(this,e,n,i,r,o,u),this.check()}},{key:"orthographic",value:function(t){var n=t.fovy,i=void 0===n?45*Math.PI/180:n,r=t.aspect,a=void 0===r?1:r,o=t.focalDistance,s=void 0===o?1:o,u=t.near,l=void 0===u?.1:u,c=t.far,f=void 0===c?500:c;if(i>2*Math.PI)throw Error("radians");var d=i/2,h=s*Math.tan(d),v=h*a;return(new e).ortho({left:-v,right:v,bottom:-h,top:h,near:l,far:f})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,i=void 0===n?45*Math.PI/180:n,r=t.aspect,a=void 0===r?1:r,o=t.near,s=void 0===o?.1:o,u=t.far,l=void 0===u?500:u;if((e=e||i)>2*Math.PI)throw Error("radians");return p.f(this,e,a,s,l),this.check()}},{key:"transpose",value:function(){return p.g(this,this),this.check()}},{key:"invert",value:function(){return p.h(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return p.i(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return p.i(this,this,t),this.check()}},{key:"rotateX",value:function(t){return p.j(this,this,t),this.check()}},{key:"rotateY",value:function(t){return p.k(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return p.l(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=n.i(i.a)(t,3),r=e[0],a=e[1],o=e[2];return this.rotateX(r).rotateY(a).rotateZ(o)}},{key:"rotateAxis",value:function(t,e){return p.m(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?p.n(this,this,t):p.n(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return p.o(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new h.a,_.a(e,t,this),n.i(d.a)(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new v.a,m.g(e,t,this),n.i(d.a)(e,3),e}},{key:"transformVector4",value:function(t,e){return e=e||new g.a,y.n(e,t,this),n.i(d.a)(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,i){switch(t.length){case 2:e=e||new h.a,y.n(e,[t[0],t[1],0,i],this),e.length=2,n.i(d.a)(e,2);break;case 3:e=e||new v.a,y.n(e,[t[0],t[1],t[2],i],this),e.length=3,n.i(d.a)(e,3);break;case 4:if(Boolean(i)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");e=e||new g.a,y.n(e,t,this),n.i(d.a)(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"ELEMENTS",get:function(){return 16}}]),e}(c.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(163),l=n(147),c=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n.i(i.a)(this,e),t=n.i(a.a)(this,n.i(o.a)(e).call(this)),Array.isArray(r)&&1===arguments.length?t.copy(r):t.set(r,s),t}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"cross",value:function(t){return l.b(this,this,t),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),e}(u.a)},function(t,e,n){"use strict";(function(t,i){n.d(e,"d",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"e",function(){return l}),n.d(e,"c",function(){return c});var r=n(43),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document,process:"object"===(void 0===i?"undefined":n.i(r.a)(i))&&i},o=a.window||a.self||a.global,s=a.global||a.self||a.window,u=a.document||{},l=a.process||{},c=console}).call(e,n(63),n(62))},function(t,e,n){"use strict";(function(t){function i(){return!("object"===(void 0===t?"undefined":n.i(r.a)(t))&&"[object process]"===String(t)&&!t.browser)||n.i(a.a)()}e.a=i;var r=n(43),a=n(168)}).call(e,n(62))},function(t,e,n){"use strict";(function(t){function i(e){if("undefined"!=typeof window&&"object"===n.i(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==t&&"object"===n.i(r.a)(t.versions)&&Boolean(t.versions.electron))return!0;var i="object"===("undefined"==typeof navigator?"undefined":n.i(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,a=e||i;return!!(a&&a.indexOf("Electron")>=0)}e.a=i;var r=n(43)}).call(e,n(62))},function(t,e,n){"use strict";function i(t,e,a){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var a=n.i(r.a)(t,e);if(a){var o=Object.getOwnPropertyDescriptor(a,e);return o.get?o.get.call(i):o.value}})(t,e,a||t)}e.a=i;var r=(n(2),n(272))},function(t,e,n){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Columnar=void 0;var r=n(21),a=i(r),o=n(11),s=i(o),u=n(125),l=i(u),c=n(35),f=i(c),d=n(22),h=i(d),v=n(12),g=i(v),p=n(8),_=i(p),m=n(9),y=i(m),b=n(16),E=i(b),A=n(24),x=i(A),T=n(15),P=i(T),w=n(13),C=n(19),k=i(C),S=n(173),R=i(S),M=n(44),L=n(286),I=i(L),O=n(14),F=i(O),N=n(20),D=n(39),B=n(26),U=n(45),G=i(U),j=n(33),z=F.default.isArray,W=F.default.isNumber,H=F.default.isValidColor,V=F.default.isValidLatLng,X=F.default.isUndefined,Y=F.default.isBoolean,K=["#D8AFA7","#842610","#641200"],q=["fade","grow"],Z=[],Q=[1,100];e.Columnar=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_.default)(this,e),t.toggleSupportTypes=q,t.processSupportTypes=Z;var n=(0,E.default)(this,(e.__proto__||(0,g.default)(e)).call(this,t));return n._typeId=t.typeId,n._initClassName(),n._checkParameters(t),n._initPrivateProp(t),n.processor=new I.default({colorList:t.colorList,heightRange:t.heightRange,showRange:t.showRange}),n.viewport={projectFlat:function(t){var e=(0,h.default)(t,2),i=e[0],r=e[1],a=n.transform.latLngToCoord({lat:r,lng:i},n.map.getZoom());return[a.x,a.y]},unprojectFlat:function(t){var e=(0,h.default)(t,2),i=e[0],r=e[1],a=n.transform.coordToLatLng({x:i,y:r},n.map.getZoom());return[a.lng,a.lat]},getDistanceScales:function(){var t=256*n.transform.zoomScale(n.map.getZoom()),e=n.map.getCenter(),i=2*Math.PI*6378137*Math.abs(Math.cos(e.lat*(Math.PI/180))),r=t/i;return{pixelsPerMeter:[r,r,r]}}},n}return(0,P.default)(e,t),(0,y.default)(e,[{key:"setData",value:function(t){try{this._originData=(0,j.clone)(t),t.map(function(t){if(!V(t))throw Error("数据错误：HeatPoint 经纬度数据无效。");if(t.count&&!W(t.count))throw Error("数据错误：HeatPoint.count无效。");(X(t.count)||t.count<=0)&&(t.count=1)})}catch(t){return console.error(t),this}return(0,x.default)(e.prototype.__proto__||(0,g.default)(e.prototype),"setData",this).call(this,t)}},{key:"getData",value:function(){return this._originData}},{key:"_initClassName",value:function(){this._className=""}},{key:"_checkParameters",value:function(t){t.colorList=t.colorList||K,this._checkColorList(t.colorList)||(t.colorList=K),!X(t.heightRange)&&this._checkHeightRange(t.heightRange)||(t.heightRange=Q),this._checkShowRange(t.showRange)||(t.showRange=void 0),!X(t.coverage)&&this._checkCoverage(t.coverage)||(t.coverage=.8),!X(t.heightScale)&&this._checkHeightScale(t.heightScale)||(t.heightScale=1)}},{key:"_checkColorList",value:function(t){var e=!0;return z(t)?t.forEach(function(t,n){H(t)||(console.error("参数错误：颜色列表第"+n+"个颜色值不合法"),e=!1)}):(new N.BaseTypeError(this._className+".colorList","Array",t).error(),e=!1),e}},{key:"_checkHeightRange",value:function(t){if(z(t))if(W(t[0]))if(W(t[1]))if(t[1]<=t[0])console.error("参数错误: "+this._className+".heightRange 应该传入[最小值, 最大值]的形式，实际传入["+t[0]+", "+t[1]+"]");else if(t[0]<0||t[0]%1!=0)console.error("参数错误："+this._className+".heightRange 的最大值、最小值应该传入正整数，实际传入["+t[0]+", "+t[1]+"]");else{if(!(t[1]<0||t[1]%1!=0))return!0;console.error("参数错误："+this._className+".heightRange 的最大值、最小值应该传入正整数，实际传入["+t[0]+", "+t[1]+"]")}else new N.BaseTypeError(this._className+".heightRange[1]","Number",t[1]).error();else new N.BaseTypeError(this._className+".heightRange[0]","Number",t[0]).error();else new N.BaseTypeError(this._className+".heightRange","Array",t).error();return!1}},{key:"_checkShowRange",value:function(t){if(z(t))if(W(t[0]))if(W(t[1]))if(t[1]<t[0])console.error("参数错误: "+this._className+".showRange 应该传入[最小值, 最大值]的形式，实际传入["+t[0]+", "+t[1]+"]");else if(t[0]<0||t[0]%1!=0)console.error("参数错误："+this._className+".showRange 的最大值、最小值应该传入正整数，实际传入["+t[0]+", "+t[1]+"]");else{if(!(t[1]<0||t[1]%1!=0))return!0;console.error("参数错误："+this._className+".showRange 的最大值、最小值应该传入正整数，实际传入["+t[0]+", "+t[1]+"]")}else new N.BaseTypeError(this._className+".showRange[1]","Number",t[1]).error();else new N.BaseTypeError(this._className+".showRange[0]","Number",t[0]).error();else new N.BaseTypeError(this._className+".showRange","Array",t).error();return!1}},{key:"_checkCoverage",value:function(t){if(W(t)){if(!(t<=0||t>1))return!0;console.error("参数错误："+this._className+".coverage 取值范围为(0,1]，传入值为"+t+"。")}else new N.BaseTypeError(this._className+".coverage","Number",t).error();return!1}},{key:"_checkHeightScale",value:function(t){if(W(t)){if(!(t<0))return!0;console.error("参数错误: "+this._className+".heightScale 应该大于等于0!")}else new N.BaseTypeError(this._className+".heightScale","Number",t).error();return!1}},{key:"_initPrivateProp",value:function(t){this._metricValue=1e3,this._extrudable=!1!==t.extrudable,this._coverage=t.coverage,this._valueRange=[0,0],this._vertexShader=null,this._fragmentShader=null,this._modelId=null}},{key:"getValueRange",value:function(){return this._valueRange}},{key:"setShowRange",value:function(t){return this._checkShowRange(t)&&(this.processor.setShowRange(t),this._updateModel()),this}},{key:"getShowRange",value:function(){return this.processor.elevationValueDomain}},{key:"setExtrudable",value:function(t){return Y(t)?(this._extrudable=t,this._update()):new N.BaseTypeError(this._className+".extrudable","Boolean",t).error(),this}},{key:"getExtrudable",value:function(){return this._extrudable}},{key:"setColorList",value:function(t){return this._checkColorList(t)&&(this.processor.setColorList(t),this._update()),this}},{key:"getColorList",value:function(){return this.processor.getColorList()}},{key:"setHeightRange",value:function(t){return this._checkHeightRange(t)&&(this.processor.setElevationRange(t),this._update()),this}},{key:"getHeightRange",value:function(){return this.processor.elevationRange}},{key:"_update",value:function(){if((0,x.default)(e.prototype.__proto__||(0,g.default)(e.prototype),"_update",this).call(this),this._isReady()){window.polyfillContext&&window.polyfillContext(this.gl),this._columnarList=this._aggregator();for(var t=this._columnarList.map(function(t){return t&&t.count}),n=1/0,i=-1/0,r=0;r<t.length;r++)n=Math.min(n,t[r]),i=Math.max(i,t[r]);this._valueRange=[n,i],this.geometry||(this.geometry=this._getGeometry()),this._updateModel()}}},{key:"_aggregator",value:function(){}},{key:"_updateModel",value:function(){this._isReady()&&(this.getShowRange()||this.setShowRange(this.getValueRange()),this._model&&(this._antiAliasEffect&&this._antiAliasEffect.removeModel(this._model),this._model.delete(),this._model=null),this._antiAliasEffect||(this._antiAliasEffect=new R.default(this.gl)),this._antiAliasEffect.updateContext(this.gl),this._model=this._getModel(this.gl),this.redraw())}},{key:"_getGeometry",value:function(){}},{key:"_getModel",value:function(t){if(!this._isReady())return null;var e=new Float32Array(3*this._columnarList.length),n=new Float32Array(2*this._columnarList.length),i=0,r=!0,a=!1,o=void 0;try{for(var s,u=(0,f.default)(this._columnarList);!(r=(s=u.next()).done);r=!0){var c=s.value,d=(0,h.default)(c.centroid,2),v=d[0],g=d[1],p=this.processor.getElevation(c),_=(0,B.splitLatLngNumber)(v),m=(0,B.splitLatLngNumber)(g);e[3*i]=_.high,e[3*i+1]=m.high,e[3*i+2]=p||0,n[2*i]=_.low,n[2*i+1]=m.low,i+=1}}catch(t){a=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}var y=new Uint8ClampedArray(4*this._columnarList.length);i=0;var b=!0,E=!1,A=void 0;try{for(var x,T=(0,f.default)(this._columnarList);!(b=(x=T.next()).done);b=!0){var P=x.value,C=this.processor.getColor(P),k=(0,h.default)(C,3);y[i+0]=k[0],y[i+1]=k[1],y[i+2]=k[2],y[i+3]=(0,l.default)(C[3])?C[3]:this.processor.defaultColor[3],i+=4}}catch(t){E=!0,A=t}finally{try{!b&&T.return&&T.return()}finally{if(E)throw A}}var S=new Uint8ClampedArray(3*this._columnarList.length);this._calculateInstancePickingColors({size:3,value:S},this._columnarList.length);var R=new w._Attribute(this.gl,{size:3,isInstanced:!0,value:e}),M=new w._Attribute(this.gl,{size:2,isInstanced:!0,value:n}),L=new w._Attribute(this.gl,{size:4,isInstanced:!0,value:y}),I=new w._Attribute(this.gl,{size:3,isInstanced:!0,value:S}),O=new w.Model(t,{id:this._modelId,vs:this._vertexShader,fs:this._fragmentShader,geometry:this.geometry,isInstanced:!0,instanceCount:e.length/3,shaderCache:this._shaderCache});return O.setAttributes({instancePositions:R,instancePositionsLow:M,instanceColors:L,instancePickingColors:I}),O}},{key:"getEventDetailInfo",value:function(t){var e=this._columnarList[t];return{key:"aggregator",value:e?{count:e.count,centroid:new TMap.LatLng(e.centroid[1],e.centroid[0]),rawData:e.points,indexes:e.indexes}:null}}},{key:"_getValidSelectStyle",value:function(t){return t&&!H(t)?(console.error("参数错误：SelectOptions.style 颜色值不合法。"),null):t?new G.default(t).toArray().map(function(t){return 255*t}):null}},{key:"_getUniforms",value:function(t){return(0,s.default)({},D.LIGHT_SETTINGS,{radius:this._metricValue,elevationScale:1,angle:0,extruded:this._extrudable,coverage:this._coverage,opacity:1,uPixelsPerMeter:new Float32Array(this.viewport.getDistanceScales().pixelsPerMeter),project_uCameraPosition:new Float32Array(t.look.slice(0,3)),viewRotation:this.map.getRotation()*Math.PI/180,uSelectStyle:new Uint8ClampedArray(this._selectOptions.style||[255,255,255,255]),uEnableBloom:this._enableBloom,uHeightScale:this._heightScale},this._getPickingUniforms())}},{key:"_getGLParams",value:function(){var t;return t={},(0,a.default)(t,k.default.DEPTH_TEST,!0),(0,a.default)(t,k.default.CULL_FACE,!0),(0,a.default)(t,k.default.CULL_FACE_MODE,k.default.FRONT),(0,a.default)(t,k.default.BLEND,!0),(0,a.default)(t,k.default.COLOR_CLEAR_VALUE,[0,0,0,.001]),t}}]),e}(M.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),a=i(r),o=n(21),s=i(o),u=n(12),l=i(u),c=n(8),f=i(c),d=n(9),h=i(d),v=n(16),g=i(v),p=n(24),_=i(p),m=n(15),y=i(m),b=n(13),E=n(19),A=i(E),x=n(39),T=n(26),P=n(309),w=i(P),C=n(175),k=i(C),S=n(28),R=n(176),M=n(33),L=n(14),I=i(L),O=n(54),F=TMap,N=F.VisualPlugin,D=I.default.isNull,B=function(t){function e(t){(0,f.default)(this,e);var n=(0,g.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n.map=null,n.data=null,n._visible=!0,n._shaderCache=null,n._geometry=null,n._model=null,(0,w.default)(t.typeId),n._typeId=t.typeId,n._needStatCr=!0,n._initAnimation(t),n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"redraw",value:function(){return this.map&&this.map._render(),this}},{key:"addTo",value:function(t){var n;this.map&&this.remove(!0),(0,_.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"addTo",this).call(this,t),t.fpsManager.addCallback("tweentick",function(){R.MyTWEEN.update()}),this._visible&&this.playAnimation("toggle"),this.playAnimation("process"),this._shaderCache||(this._shaderCache=new b._ShaderCache({gl:this.gl,_cachePrograms:!0}));var i=this.gl.getParameter(this.gl.COLOR_CLEAR_VALUE),r=this.gl.getParameter(this.gl.UNPACK_FLIP_Y_WEBGL),a=this.gl.getParameter(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL);return(0,b.withParameters)(this.gl,(0,s.default)({},A.default.BLEND,!0),function(){}),(0,b.setParameters)(this.gl,(n={},(0,s.default)(n,A.default.DEPTH_TEST,!1),(0,s.default)(n,A.default.BLEND,!0),(0,s.default)(n,A.default.BLEND_SRC_RGB,A.default.ONE),(0,s.default)(n,A.default.BLEND_DST_RGB,A.default.ONE_MINUS_SRC_ALPHA),(0,s.default)(n,A.default.BLEND_SRC_ALPHA,A.default.ONE),(0,s.default)(n,A.default.BLEND_DST_ALPHA,A.default.ONE_MINUS_SRC_ALPHA),(0,s.default)(n,A.default.VIEWPORT,[0,0,this.gl.canvas.width,this.gl.canvas.height]),(0,s.default)(n,A.default.COLOR_CLEAR_VALUE,i),(0,s.default)(n,A.default.UNPACK_FLIP_Y_WEBGL,r),(0,s.default)(n,A.default.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),n)),this._update(),this}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return D(this.map)?this:(t||!this.hasAnimation("toggle")?(this._isRemoving&&(this.stopAnimation("toggle"),this.off("toggle_complete",this._onRemoveToggleComplete)),this._onRemoveToggleComplete()):this._isRemoving||(this.playAnimation("toggle",{startOffset:(1-this._toggleFactor)*this.getAnimation("toggle").duration,reverse:!0}),this._isRemoving=!0,this.once("toggle_complete",this._onRemoveToggleComplete)),this)}},{key:"_onRemoveToggleComplete",value:function(){this._isRemoving=!1;try{1===this.map.layerResource.getPlugins().filter(function(t){return t instanceof e}).length&&this.map.fpsManager.removeCallback("tweentick")}catch(t){}this.stopAllAnimations(),(0,_.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"remove",this).call(this),this._shaderCache&&this._shaderCache.delete(),this._shaderCache=null,this.emit("removed")}},{key:"destroy",value:function(){return this.remove(!0),this.data=null,this._visible=!0,this._model&&this._model.delete(),this._model=null,this._geometry=null,this._depthBuffer&&this._depthBuffer.delete(),this._depthBuffer=null,this.removeAllListeners(),this}},{key:"show",value:function(){return this._isRemoving?(console.warn("当前图层已从地图上移除，无法执行show方法。"),this):this._visible&&!this._isHiding?this:(this._isHiding&&(this.off("toggle_complete",this._onHideToggleComplete),this._isHiding=!1),this._visible=!0,this.redraw(),this.hasAnimation("toggle")?this.playAnimation("toggle",{startOffset:this._toggleFactor*this.getAnimation("toggle").duration}):this._toggleFactor=1,this)}},{key:"hide",value:function(){return this._isRemoving?(console.warn("当前图层已从地图上移除，无法执行hide方法。"),this):!this._visible||this._isHiding?this:(this.hasAnimation("toggle")?(this.playAnimation("toggle",{startOffset:(1-this._toggleFactor)*this.getAnimation("toggle").duration,reverse:!0}),this._isHiding=!0,this.once("toggle_complete",this._onHideToggleComplete)):(this._toggleFactor=0,this._visible=!1,this.redraw()),this)}},{key:"_onHideToggleComplete",value:function(){this._isHiding=!1,this._visible=!1}},{key:"setData",value:function(t){return this.data=t,this._update(),this}},{key:"getData",value:function(){return this.data}},{key:"_getGeometry",value:function(){}},{key:"_getModel",value:function(){}},{key:"_isReady",value:function(){return this.map&&this.data}},{key:"_update",value:function(){}},{key:"draw",value:function(t){var e=this.gl;e.isWebGL2&&e.frameBuffer&&e.frameBuffer.getColorAttach&&e.frameBuffer.getColorAttach(1)?(e.frameBuffer.setDrawBuffers(["COLOR_ATTACHMENT0","COLOR_ATTACHMENT1"]),this._draw(t),e.frameBuffer.setDrawBuffers(["COLOR_ATTACHMENT0"])):this._draw(t)}},{key:"_draw",value:function(t){var e=this;if(this._isReady()&&this._visible&&this._model){var n=this.map.getZoom();if(!(n<this.minZoom||n>this.maxZoom)){var i=this.gl,r=this.map.getCenter(),o=this.transform.getDistanceScales(),u=(0,T.splitLatLngNumber)(r.lat),l=(0,T.splitLatLngNumber)(r.lng);this._uniforms=(0,a.default)({uMatrix:t.pvMatrix.elements,uCenter:new Float32Array([l.high,u.high,l.low,u.low]),uZoom:n,uProject_uCommonUnitsPerWorldUnit:new Float32Array(o.pixelsPerDegree),uProject_uCommonUnitsPerWorldUnit2:new Float32Array(o.pixelsPerDegree2),uProjMode:this._projMode?x.PROJ_MODE[this._projMode]:x.PROJ_MODE.mercator,uMapScale:this._mapScale||1,uToggleFactor:this._toggleFactor,uProcessFactor:this._processFactor,uAnimationParams:this._getAnimationUniforms()},this._getUniforms(t));var c=+new Date,f=this._getGLParams();if(f[A.default.DEPTH_TEST]){var d;(0,b.withParameters)(i,(0,a.default)((d={},(0,s.default)(d,A.default.BLEND_SRC_RGB,A.default.SRC_ALPHA),(0,s.default)(d,A.default.BLEND_DST_RGB,A.default.ONE_MINUS_SRC_ALPHA),(0,s.default)(d,A.default.BLEND_SRC_ALPHA,A.default.SRC_ALPHA),(0,s.default)(d,A.default.BLEND_DST_ALPHA,A.default.ONE_MINUS_SRC_ALPHA),(0,s.default)(d,A.default.COLOR_WRITEMASK,[!1,!1,!1,!1]),d),f),function(){var t;e._model.render(e._uniforms),i.frameBuffer&&(i._depthBuffer=i.frameBuffer.depth,e._depthBuffer?i.frameBuffer.attach("depth",e._depthBuffer):("DEPTH24_STENCIL8"===i._depthBuffer.internalformat?i.frameBuffer.attach("depth",{internalformat:"DEPTH24_STENCIL8"}):i.frameBuffer.attach("depth"),e._depthBuffer=i.frameBuffer.depth),i.clear(i.DEPTH_BUFFER_BIT),e._typeId!==S.TYPE_ID.HEAT&&e._model.render(e._uniforms)),(0,b.withParameters)(i,(t={},(0,s.default)(t,A.default.DEPTH_FUNC,A.default.LEQUAL),(0,s.default)(t,A.default.COLOR_WRITEMASK,[!0,!0,!0,!0]),t),function(){e._model.render(e._uniforms)}),i.frameBuffer&&i.frameBuffer.attach("depth",i._depthBuffer,{resizeAttach:!1})})}else{var h;(0,b.withParameters)(i,(0,a.default)((h={},(0,s.default)(h,A.default.BLEND_SRC_RGB,A.default.SRC_ALPHA),(0,s.default)(h,A.default.BLEND_DST_RGB,A.default.ONE_MINUS_SRC_ALPHA),(0,s.default)(h,A.default.BLEND_SRC_ALPHA,A.default.SRC_ALPHA),(0,s.default)(h,A.default.BLEND_DST_ALPHA,A.default.ONE_MINUS_SRC_ALPHA),h),f),function(){e._model.render(e._uniforms)})}if(this._needStatCr){var v=+new Date;(0,k.default)({visualType:this._typeId,dataLength:this._getDataLength(),renderTime:v-c}),this._needStatCr=!1}}}}},{key:"_getUniforms",value:function(){return{}}},{key:"_getGLParams",value:function(){return{}}},{key:"_getDataLength",value:function(){return this.data.length}},{key:"_initAnimation",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.toggleAnimation,i=e.processAnimation,r=e.validTypes,a=void 0===r?[]:r,o=e.toggleSupportTypes,s=void 0===o?[]:o,u=e.processSupportTypes,l=void 0===u?[]:u;this._animates={},this._supportAnimationType={toggle:s,process:l},this._validTypes=a.concat(["pick"]),this._processFactor=1,this._toggleFactor=1,n&&this.updateAnimation("toggle",n),i&&this.updateAnimation("process",i),this.hasAnimation("toggle")&&(this._toggleFactor=0),this.on("process_update",function(e){t._processFactor=e}),this.on("process_stop",function(){t._processFactor=1}),this.on("toggle_update",function(e){t._toggleFactor=e}),this.on("toggle_complete",function(){!t.visible||t._isHiding||t._isRemoving?t._toggleFactor=0:t._toggleFactor=1})}},{key:"updateAnimation",value:function(t,e){if(!this._validTypes.includes(t))return console.error("不支持此类型的动画设置 "+t),this;var n=this.checkAnimationRunning(t);if(this.stopAnimation(t),e){try{this._animates[t]=this._getValidAnimationOptions(t,e,{supportTypes:this._supportAnimationType[t]})}catch(t){console.error(t)}this._resetAnimation(t,n)}else delete this._animates[t];return this}},{key:"_resetAnimation",value:function(t,e){"process"===t?this.playAnimation("process"):"toggle"!==t&&"transit"!==t||!e||(this.getAnimation(t).enable?this.playAnimation(t):"toggle"===t?this._toggleFactor=1:this._transitFactor=1)}},{key:"_getValidAnimationOptions",value:function(){return O.getValidAnimationOptions.apply(void 0,arguments)}},{key:"getAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"process";return this._validTypes.includes(t)?this._animates[t]:void console.error("不支持此类型的动画设置 "+t)}},{key:"playAnimation",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.startOffset,r=n.reverse,a=void 0!==r&&r,o=this._animates[t];if(o&&o.enable&&this.map){o.tween&&this.stopAnimation(t);var s=function(){R.MyTWEEN.remove(u),delete o.tween,e.map&&e.map.keepHighFps(!1)},u=new R.MyTWEEN.Tween({value:a?o.to:o.from}).to({value:a?o.from:o.to},o.duration).easing(o.easingFunc).repeat(o.repeat-1).yoyo(o.yoyo).onUpdate(function(n){e.emit(t+"_update",n.value)}).onComplete(function(){e.emit(t+"_complete"),s()}).onStart(function(){e.emit(t+"_start")}).onStop(function(){e.emit(t+"_stop"),s()});o.tween=u,this.map.keepHighFps(!0),u.start(i)}}},{key:"stopAnimation",value:function(t){var e=this._animates[t];e&&e.tween&&e.tween.stop()}},{key:"stopAllAnimations",value:function(){var t=this;(0,M.forIn)(this._animates,function(e){t.stopAnimation(e)})}},{key:"hasAnimation",value:function(t){var e=this._animates[t];return!(!e||!e.enable)}},{key:"checkAnimationRunning",value:function(t){return this.hasAnimation(t)&&this.getAnimation(t).tween}},{key:"_getAnimationUniforms",value:function(){return[this._toggleFactor,this._getToggleAnimationType(),this._processFactor,this._getProcessAnimationType()]}},{key:"_getToggleAnimationType",value:function(){switch((this.getAnimation("toggle")||{}).animationType){case"grow":return-1;case"fade":default:return 1}}},{key:"_getProcessAnimationType",value:function(){return 1}},{key:"visible",get:function(){return this._visible}}]),e}(N);e.default=B},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),a=i(r),o=n(9),s=i(o),u=n(293),l=i(u),c=n(294),f=i(c),d=n(292),h=i(d),v=function(){function t(e){(0,a.default)(this,t),this.gl=null,this.updateContext(e)}return(0,s.default)(t,[{key:"updateContext",value:function(t){t!==this.gl&&(this.gl=t,this._renderPass&&this._renderPass.destroy(),this._renderPass=new f.default(this.gl,{swap:!0,models:[]}),this._fxaaPass&&this._fxaaPass.destroy(),this._fxaaPass=new h.default(this.gl,{screen:!0}),this._multiPass&&this._multiPass.destroy(),this._multiPass=new l.default(this.gl,{passes:[this._renderPass,this._fxaaPass]}))}},{key:"setModels",value:function(t){this._renderPass.props.models=t}},{key:"addModel",value:function(t){this._renderPass.props.models.includes(t)||this._renderPass.props.models.push(t)}},{key:"removeModel",value:function(t){var e=this._renderPass.props.models.indexOf(t);e>-1&&this._renderPass.props.models.splice(e,1)}},{key:"render",value:function(){this._multiPass.render()}}]),t}();e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.heatSketchFragment=e.heatSketchVertex=e.heatFragment=e.heatVertex=void 0;var i=n(29),r=n(79),a="\n#define SHADER_NAME heat-vertex-shader\n"+r.LIGHT_NUMBER+"\n"+r.LIGHT_UNIFORM+"\n"+r.LIGHT_FUNCTION+"\n\nprecision highp float;\n\nattribute vec2 positions;\n\nuniform float uExpand;\nuniform vec3 uHeatInfos; // [height,offset,distanceUnit]\nuniform float uEnableLighting;\nuniform mat4 uMatrix;\nuniform vec3 uProject_uCommonUnitsPerWorldUnit;\nuniform mat4 uInverseMatrix;\nuniform float uXCount;\nuniform float uYCount;\nuniform sampler2D uSketchTexture;\nuniform sampler2D uSketchTextureOld;\nuniform float uTransitFactor;\nuniform float uFogEdgeY;\nvarying float vAlpha;\nvarying float vLightWeight;\n\nfloat gauss(float x) {\n\tfloat height = uHeatInfos.x;\n\tfloat a = mix(height, height * uProject_uCommonUnitsPerWorldUnit.z, uHeatInfos.z);\n\tfloat b = 1.0;\n\tfloat c = sqrt(1.0 / 2.0);\n\n\tfloat y = a * exp(- pow(x - b, 2.0) / (2.0 * c * c));\n\treturn y;\n}\n\n// vec3 position, float alpha\nvec4 getPositionAlpha(vec2 uv) {\n\tfloat alphaNew = texture2D(uSketchTexture, uv).a;\n\tfloat alphaOld = texture2D(uSketchTextureOld, uv).a;\n\n\tfloat alpha = mix(alphaOld, alphaNew, uTransitFactor);\n\n\n\t// 纹理坐标转ndc坐标\n\tvec2 ndcCoord = uv * 2.0 - vec2(1.0);\n\t\n\t// 射线法：ndc转地图屏幕坐标\n\tvec4 n_0 = vec4(ndcCoord.xy, 0.0, 1.0);\n\tvec4 n_1 = vec4(ndcCoord.xy, 1.0, 1.0);\n\n\tvec4 m_0 = uInverseMatrix * n_0;\n\tvec4 m_1 = uInverseMatrix * n_1;\n\tm_0 = m_0 / m_0.w;\n\tm_1 = m_1 / m_1.w;\n\n\tfloat zPos = (0.0 - m_0.z) / (m_1.z - m_0.z);\n\tvec4 mapCoord = m_0 + zPos * (m_1 - m_0);\n\n\t// 映射高度\n\tfloat offset = uHeatInfos.y;\n\toffset = mix(offset, offset * uProject_uCommonUnitsPerWorldUnit.z, uHeatInfos.z);\n\tmapCoord.z = gauss(alpha) - gauss(0.0) + offset;\n\t\n\tvec3 position = mapCoord.xyz;\n\n\treturn vec4(position, alpha);\n}\n\nvoid main(void) {\n\t// 纹理坐标\n\tvec2 texCoord = positions * vec2(1.0, (uFogEdgeY + 1.0) / 2.0);\n\tvec4 positionAlpha = getPositionAlpha(texCoord);\n\n\tvAlpha = positionAlpha.a;\n\tgl_Position = uMatrix * vec4(positionAlpha.xyz, 1.0);\n\t// gl_Position = vec4(ndcCoord.xy, 0.0, 1.0);\n\n\t// 计算四个方向相邻点的坐标（x, y, -x, -y）\n\t// wrap: CLAMP_TO_EDGE\n\tfloat textureUnitX = 1.0 / uXCount;\n\tfloat textureUnitY = 1.0 / uYCount;\n\tvec3 positionX = getPositionAlpha(texCoord + vec2(textureUnitX, 0.0)).xyz;\n\tvec3 positionY = getPositionAlpha(texCoord + vec2(0.0, textureUnitY)).xyz;\n\tvec3 positionXn = getPositionAlpha(texCoord - vec2(textureUnitX, 0.0)).xyz;\n\tvec3 positionYn = getPositionAlpha(texCoord - vec2(0.0, textureUnitY)).xyz;\n\t// 计算四个方向相邻点的方向\n\tvec3 normalX = normalize(positionX - positionAlpha.xyz);\n\tvec3 normalY = normalize(positionY - positionAlpha.xyz);\n\tvec3 normalXn = normalize(positionXn - positionAlpha.xyz);\n\tvec3 normalYn = normalize(positionYn - positionAlpha.xyz);\n\t// 两两计算面法向量并求得平均法向量，作为点的法线\n\tvec3 normal = normalize(cross(normalX,  normalY) + cross(normalXn,  normalYn));\n\t\n\tvLightWeight = getLightWeight(positionAlpha.xyz, normal); // 计算光照\n\tvLightWeight = mix(1.0, vLightWeight, uEnableLighting); // 应用光照开关\n}\n",o="\n#define SHADER_NAME heat-sketch-vertex-shader\n\nprecision highp float;\n\nattribute vec2 positions; // 正方形顶点\nattribute vec4 instancePositions;\nattribute float instanceHeatCount;\n\nuniform vec4 uSketchInfos;\n"+i.UNIFORM_PART+"\n\nvarying vec2 vOffset;\nvarying float vIntensity;\n\n"+i.PROJECTION_PART+"\n\nvoid main(void) {\n\tfloat min = uSketchInfos.x;\n\tfloat max = uSketchInfos.y;\n\tfloat radius = uSketchInfos.z;\n\tfloat distanceUnit = uSketchInfos.w;\n\t// 转地理坐标为相对像素坐标\n\tvec2 p = project_view_local_position_precision(instancePositions.xy, instancePositions.zw);\n\n\t// 计算偏移\n\tvOffset = positions;\n\n\t// 计算强度\n\tvIntensity = clamp((instanceHeatCount - min) / (max - min), 0.0, 1.0);\n\n\t// 计算半径\n\tfloat size = mix(radius, radius * uProject_uCommonUnitsPerWorldUnit.z, distanceUnit);\n\n\tgl_Position = uMatrix * vec4((p.x + size * vOffset.x), (p.y + size * vOffset.y), 0., 1.);\n}";e.heatVertex=a,e.heatFragment="\n#define SHADER_NAME heat-fragment-shader\n\nprecision highp float;\n\nuniform float uGlobalAlpha;\nuniform sampler2D uPaletteTexture;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nvarying float vAlpha;\nvarying float vLightWeight;\n\nfloat toBezier(float t) {\n\tfloat t2 = t * t;\n\tfloat one_minus_t = 1.0 - t;\n\tfloat one_minus_t2 = one_minus_t * one_minus_t;\n\treturn (0.9 * 3.0 * t * one_minus_t2 + 1.0 * 3.0 * t2 * one_minus_t + t2 * t);\n}\n\nvoid main(void) {\n\tif (vAlpha == 0.0) {\n\t\tdiscard;\n\t}\n\tfloat vBezierAlpha = toBezier(vAlpha);\n\tvec4 color = texture2D(uPaletteTexture, vec2(vAlpha, 0));\n\t\n\tcolor.rgb *= vLightWeight; // 应用光照\n\n\tvec4 passColor=vec4(color.rgb, vBezierAlpha * uGlobalAlpha);\n\t//淡出\n\tpassColor.a = mix(passColor.a, passColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n\n\tgl_FragColor =passColor;\n}\n",e.heatSketchVertex=o,e.heatSketchFragment="\n#define SHADER_NAME heat-sketch-fragment-shader\n\n\nprecision highp float;\n\nvarying vec2 vOffset;\nvarying float vIntensity;\nvoid main(void){\n\tfloat falloff = 1.0 - clamp(length(vOffset), 0.0, 1.0);\n\tfloat intensity = falloff * vIntensity;\n\n\tgl_FragColor= vec4(0., 0., 0., intensity);\n\n}"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=(0,c.default)(o.default.pr,{logid:"cr",key:u.default||"",type:t.visualType||"",l:t.dataLength||0,t:t.renderTime||0,tag:"first"});(0,f.sendOnce)(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=n(98),o=i(a),s=n(97),u=i(s),l=n(124),c=i(l),f=n(121)},function(t,e,n){"use strict";(function(t){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.MyTWEEN=void 0;var r=n(66),a=i(r),o=n(179),s=i(o),u=n(55),l=i(u),c={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-c.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*c.Bounce.In(2*t):.5*c.Bounce.Out(2*t-1)+.5}}},f=void 0;f="undefined"==typeof self&&void 0!==t&&t.hrtime?function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var d=f,h=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return(0,l.default)(this._tweens).map(function(e){return t._tweens[e]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=d()),void 0===e&&(e=!1);var n=(0,l.default)(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]],a=!e;r&&!1===r.update(t,a)&&!e&&delete this._tweens[n[i]]}n=(0,l.default)(this._tweensAddedDuringUpdate)}return!0},t}(),v={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=v.Utils.Linear;return e<0?a(t[0],t[1],i):e>1?a(t[n],t[n-1],n-i):a(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,a=v.Utils.Bernstein,o=0;o<=i;o++)n+=r(1-e,i-o)*r(e,o)*t[o]*a(i,o);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=v.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=v.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var a=.5*(n-t),o=.5*(i-e),s=r*r;return(2*e-2*n+a+o)*(r*s)+(-3*e+3*n-2*a-o)*s+a*r+e}}},g=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),p=new h,_=function(){function t(t,e){void 0===e&&(e=p),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=c.Linear.None,this._interpolationFunction=v.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=g.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.updateInitProperty=function(t){return this._object=t,this},t.prototype.to=function(t,e){return this._valuesEnd=(0,s.default)(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var e in this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?d()-parseFloat(t):d()-t:d(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,n,i){for(var r in n){var o=t[r],s=Array.isArray(o),u=s?"array":void 0===o?"undefined":(0,a.default)(o),l=!s&&Array.isArray(n[r]);if("undefined"!==u&&"function"!==u){if(l){var c=n[r];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,o)),n[r]=[o].concat(c)}if("object"!==u&&!s||!o||l)void 0===e[r]&&(e[r]=o),s||(e[r]*=1),i[r]=l?n[r].slice().reverse():e[r]||0;else{e[r]=s?[]:{};for(var f in o)e[r][f]=o[f];i[r]=s?[]:{},this._setupProperties(o,e[r],n[r],i[r])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=d()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},t.prototype.resume=function(t){return void 0===t&&(t=d()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=d()),void 0===e&&(e=!0),this._isPaused)return!0;var n=void 0,i=void 0,r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>r)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var a=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(n in this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,s=this._chainedTweens.length;o<s;o++)this._chainedTweens[o].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,n,i){for(var r in n)if(void 0!==e[r]){var o=e[r]||0,s=n[r],u=Array.isArray(t[r]),l=Array.isArray(s),c=!u&&l;c?t[r]=this._interpolationFunction(s,i):"object"===(void 0===s?"undefined":(0,a.default)(s))&&s?this._updateProperties(t[r],o,s,i):"number"==typeof(s=this._handleRelativeValue(o,s))&&(t[r]=o+(s-o)*i)}},t.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),m=g.nextId,y=p,b=y.getAll.bind(y),E=y.removeAll.bind(y),A=y.add.bind(y),x=y.remove.bind(y),T=y.update.bind(y),P=y;P.Easing=c,P.Group=h,P.Interpolation=v,P.now=d,P.Sequence=g,P.VERSION="18.6.4",P.nextId=m,P.Tween=_,P.getAll=b,P.removeAll=E,P.add=A,P.remove=x,P.update=T,e.MyTWEEN=P}).call(e,n(62))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t.reduce(function(t,e){return t+E.getVertexCount(e)},0)}function a(t){return t.reduce(function(t,e){return t+E.getTriangleCount(e)},0)}function o(t){var e=new Array(t.length+1);e[0]=0;var n=0;return t.forEach(function(t,i){n+=E.getVertexCount(t),e[i+1]=n}),e}function s(t){var e=t.complexPolygons,n=t.IndexType,i=void 0===n?Uint32Array:n,r=3*a(e),s=o(e),u=new i(r),l=0;return e.forEach(function(t,e){var n=E.getSurfaceIndices(t,i),r=!0,a=!1,o=void 0;try{for(var c,f=(0,g.default)(n);!(r=(c=f.next()).done);r=!0){var d=c.value;u[l]=d+s[e],l+=1}}catch(t){a=!0,o=t}finally{try{!r&&f.return&&f.return()}finally{if(a)throw o}}}),u}function u(t){var e=t.cache,n=e.positions,i=e.positions64xyLow,r=e.vertexValid,a=t.complexPolygons,o=t.fp64,s=0;a.forEach(function(t){t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){var e=t.lng,r=t.lat,a=t.z||0;n[3*s]=e,n[3*s+1]=r,n[3*s+2]=a,o&&(i[2*s]=(0,A.fp64LowPart)(e),i[2*s+1]=(0,A.fp64LowPart)(r)),s+=1}),r[s-1]=0})})})}function l(t){var e=t.cache,n=t.complexPolygons,i=t.pointCount,r=t.getColor,a=e||new Uint8ClampedArray(4*i),o=0;return n.forEach(function(t,e){var n=r(e);isNaN(n[3])&&(n[3]=255);var i=E.getVertexCount(t);c({target:a,source:n,start:o,count:i}),o+=n.length*i}),a}function c(t){for(var e=t.target,n=t.source,i=t.start,r=void 0===i?0:i,a=t.count,o=void 0===a?1:a,s=n.length,u=o*s,l=0,c=r;l<s;l++)e[c]=n[l],c+=1;for(;l<u;)l<u-l?(e.copyWithin(r+l,r,r+l),l*=2):(e.copyWithin(r+l,r,r+u-l),l=u);return e}function f(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function d(t){var e=t.complexPolygons,n=t.pointCount,i=new Uint8ClampedArray(3*n),r=0;return e.forEach(function(t,e){var n=f(e),a=E.getVertexCount(t);c({target:i,source:n,start:r,count:a}),r+=n.length*a}),i}function h(t){var e=[];return{polygonGeometries:t.map(function(t,n){var i=t.path,r=t.styleId,a=void 0===r?"default":r,o=E.getPolygonPath(i);return e.push(o),{id:String(n),styleId:a,paths:o}}),polygonParseHelper:new T({complexPolygons:e,IndexType:Uint32Array})}}Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonParseHelper=void 0;var v=n(35),g=i(v),p=n(8),_=i(p),m=n(9),y=i(m);e.parsePolygonData=h;var b=n(122),E=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(b),A=n(26),x=[0,0,0,255],T=e.PolygonParseHelper=function(){function t(e){var n=e.complexPolygons,i=e.IndexType;(0,_.default)(this,t),n=n.map(function(t){return E.normalize(t)});var a=r(n);this.complexPolygons=n,this.pointCount=a,this.IndexType=i,this.attributes={pickingColors:d({complexPolygons:n,pointCount:a})}}return(0,y.default)(t,[{key:"updatePositions",value:function(t){var e=t.fp64,n=t.extruded;e=!0;var i=this.attributes,r=this.complexPolygons,a=this.pointCount;i.positions=i.positions||new Float32Array(3*a),i.vertexValid=i.vertexValid||new Uint8ClampedArray(a).fill(1),e&&(i.positions64xyLow=i.positions64xyLow||new Float32Array(2*a)),u({cache:i,complexPolygons:r,extruded:n,fp64:e})}},{key:"getIndices",value:function(){return s({complexPolygons:this.complexPolygons,IndexType:this.IndexType})}},{key:"getPositions",value:function(){return this.attributes.positions}},{key:"getPositions64xyLow",value:function(){return this.attributes.positions64xyLow}},{key:"getVertexValid",value:function(){return this.attributes.vertexValid}},{key:"getColors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=void 0===e?"colors":e,i=t.getColor,r=void 0===i?function(){return x}:i,a=this.attributes,o=this.complexPolygons,s=this.pointCount,u=l({cache:a[n],complexPolygons:o,pointCount:s,getColor:r});return a[n]=u,u}},{key:"getPickingColors",value:function(){return this.attributes.pickingColors}}]),t}()},function(t,e,n){t.exports={default:n(336),__esModule:!0}},function(t,e,n){t.exports={default:n(342),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(127),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,n){function i(a,o){try{var s=e[a](o),u=s.value}catch(t){return void n(t)}if(!s.done)return r.default.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});t(u)}return i("next")})}}},function(t,e,n){t.exports=n(330)},function(t,e,n){"use strict";var i=n(23),r=n(17),a=n(83),o=n(56),s=n(50),u=n(105),l=n(67),c=n(102),f=n(30),d=n(86),h=n(41).f,v=n(129)(0),g=n(36);t.exports=function(t,e,n,p,_,m){var y=i[t],b=y,E=_?"set":"add",A=b&&b.prototype,x={};return g&&"function"==typeof b&&(m||A.forEach&&!o(function(){(new b).entries().next()}))?(b=e(function(e,n){c(e,b,t,"_c"),e._c=new y,void 0!=n&&l(n,_,e[E],e)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in A&&(!m||"clear"!=t)&&s(b.prototype,t,function(n,i){if(c(this,b,t),!e&&m&&!f(n))return"get"==t&&void 0;var r=this._c[t](0===n?0:n,i);return e?this:r})}),m||h(b.prototype,"size",{get:function(){return this._c.size}})):(b=p.getConstructor(e,t,_,E),u(b.prototype,n),a.NEED=!0),d(b,t),x[t]=b,r(r.G+r.W+r.F,x),m||p.setStrong(b,t,_),b}},function(t,e,n){var i=n(23).document;t.exports=i&&i.documentElement},function(t,e,n){t.exports=!n(36)&&!n(56)(function(){return 7!=Object.defineProperty(n(131)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(68),r=n(25)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[r]===t)}},function(t,e,n){var i=n(81);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(40);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&i(a.call(t)),e}}},function(t,e,n){var i=n(25)("iterator"),r=!1;try{var a=[7][i]();a.return=function(){r=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var a=[7],o=a[i]();o.next=function(){return{done:n=!0}},a[i]=function(){return o},t(a)}catch(t){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i=n(36),r=n(69),a=n(137),o=n(84),s=n(57),u=n(133),l=Object.assign;t.exports=!l||n(56)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i})?function(t,e){for(var n=s(t),l=arguments.length,c=1,f=a.f,d=o.f;l>c;)for(var h,v=u(arguments[c++]),g=f?r(v).concat(f(v)):r(v),p=g.length,_=0;p>_;)h=g[_++],i&&!d.call(v,h)||(n[h]=v[h]);return n}:l},function(t,e,n){var i=n(193),r=n(132).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(49),r=n(57),a=n(140)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){var i=n(49),r=n(51),a=n(355)(!1),o=n(140)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,l=[];for(n in s)n!=o&&i(s,n)&&l.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~a(l,n)||l.push(n));return l}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(40),r=n(30),a=n(135);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var i=n(17),r=n(80),a=n(47),o=n(67);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,s,u=arguments[1];return r(this),e=void 0!==u,e&&r(u),void 0==t?new this:(n=[],e?(i=0,s=a(u,arguments[2],2),o(t,!1,function(t){n.push(s(t,i++))})):o(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";var i=n(17);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var i=n(23),r=n(10),a=n(41),o=n(36),s=n(25)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];o&&e&&!e[s]&&a.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(40),r=n(80),a=n(25)("species");t.exports=function(t,e){var n,o=i(t).constructor;return void 0===o||void 0==(n=i(o)[a])?e:r(n)}},function(t,e,n){var i,r,a,o=n(47),s=n(363),u=n(183),l=n(131),c=n(23),f=c.process,d=c.setImmediate,h=c.clearImmediate,v=c.MessageChannel,g=c.Dispatch,p=0,_={},m=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){m.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++p]=function(){s("function"==typeof t?t:Function(t),e)},i(p),p},h=function(t){delete _[t]},"process"==n(81)(f)?i=function(t){f.nextTick(o(m,t,1))}:g&&g.now?i=function(t){g.now(o(m,t,1))}:v?(r=new v,a=r.port2,r.port1.onmessage=y,i=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(o(m,t,1),0)}),t.exports={set:d,clear:h}},function(t,e,n){"use strict";function i(){var t=new d.a(9);return d.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function r(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function a(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=c*o-s*l,d=-c*a+s*u,h=l*a-o*u,v=n*f+i*d+r*h;return v?(v=1/v,t[0]=f*v,t[1]=(-c*i+r*l)*v,t[2]=(s*i-r*o)*v,t[3]=d*v,t[4]=(c*n-r*u)*v,t[5]=(-s*n+r*a)*v,t[6]=h*v,t[7]=(-l*n+i*u)*v,t[8]=(o*n-i*a)*v,t):null}function o(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*(l*a-o*u)+n*(-l*r+o*s)+i*(u*r-a*s)}function s(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=n[0],h=n[1],v=n[2],g=n[3],p=n[4],_=n[5],m=n[6],y=n[7],b=n[8];return t[0]=d*i+h*o+v*l,t[1]=d*r+h*s+v*c,t[2]=d*a+h*u+v*f,t[3]=g*i+p*o+_*l,t[4]=g*r+p*s+_*c,t[5]=g*a+p*u+_*f,t[6]=m*i+y*o+b*l,t[7]=m*r+y*s+b*c,t[8]=m*a+y*u+b*f,t}function u(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=n[0],h=n[1];return t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=d*i+h*o+l,t[7]=d*r+h*s+c,t[8]=d*a+h*u+f,t}function l(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=Math.sin(n),h=Math.cos(n);return t[0]=h*i+d*o,t[1]=h*r+d*s,t[2]=h*a+d*u,t[3]=h*o-d*i,t[4]=h*s-d*r,t[5]=h*u-d*a,t[6]=l,t[7]=c,t[8]=f,t}function c(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function f(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n+n,s=i+i,u=r+r,l=n*o,c=i*o,f=i*s,d=r*o,h=r*s,v=r*u,g=a*o,p=a*s,_=a*u;return t[0]=1-f-v,t[3]=c-_,t[6]=d+p,t[1]=c+_,t[4]=1-l-v,t[7]=h-g,t[2]=d-p,t[5]=h+g,t[8]=1-l-f,t}e.a=i,e.d=r,e.e=a,e.b=o,e.f=s,e.i=u,e.g=l,e.h=c,e.c=f;var d=n(72)},function(t,e,n){"use strict";function i(){var t=new m.a(4);return m.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function r(t){var e=new m.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,n,i){var r=new m.a(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function l(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function c(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)}function f(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}function d(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=a*o,t}function h(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function v(t,e,n,i){var r=e[0],a=e[1],o=e[2],s=e[3];return t[0]=r+i*(n[0]-r),t[1]=a+i*(n[1]-a),t[2]=o+i*(n[2]-o),t[3]=s+i*(n[3]-s),t}function g(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,t}function p(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function _(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-o)<=m.b*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=m.b*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-u)<=m.b*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-l)<=m.b*Math.max(1,Math.abs(a),Math.abs(l))}e.a=r,e.b=a,e.c=o,e.d=s,e.e=u,e.f=l,e.i=c,e.j=f,e.k=d,e.g=h,e.h=v,e.n=g,e.l=p,e.m=_;var m=n(72);!function(){var t=i()}()},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(43),r=n(0),a=n(1),o=n(75),s=n(7),u=n(6),l=n(5),c=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(r.a)(this,t);var a=i.onInitialize,o=void 0===a?function(){}:a,s=i.onFinalize,u=void 0===s?function(){}:s,c=i.useDevicePixels,f=void 0===c||c,d=i.autoResizeDrawingBuffer,h=void 0===d||d;this.props={onInitialize:o,onFinalize:u},this.setProps({autoResizeDrawingBuffer:h,useDevicePixels:f}),n.i(l.a)(e instanceof Worker),this.worker=e,this.canvas=null,this.width=null,this.height=null,this._stopped=!0,this._animationFrameId=null,this._startPromise=null,this._onMessage=this._onMessage.bind(this),this._onEvent=this._onEvent.bind(this),this._updateFrame=this._updateFrame.bind(this)}return n.i(a.a)(t,null,[{key:"createWorker",value:function(t){return function(e){function n(t){var n=new Map;t.addEventListener=function(t,i){e.postMessage({command:"addEventListener",type:t}),n.has(t)||n.set(t,[]),n.get(t).push(i)},t.removeEventListener=function(t,i){e.postMessage({command:"removeEventListener",type:t});var r=n.get(t);r&&r.splice(r.indexOf(i),1)},t.dispatchEvent=function(t,e){var i=n.get(t);i&&i.forEach(function(t){return t(e)})},e.canvas=t}t.setProps({useDevicePixels:!1,autoResizeDrawingBuffer:!1}),e.canvas=null,e.addEventListener("message",function(i){switch(i.data.command){case"start":n(i.data.opts.canvas),t.start(i.data.opts);break;case"stop":t.stop();break;case"resize":e.canvas.width=i.data.width,e.canvas.height=i.data.height;break;case"event":e.canvas.dispatchEvent(i.data.type,i.data.event)}})}}}]),n.i(a.a)(t,[{key:"setProps",value:function(t){return"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this.worker.onmessage=this._onMessage,this._startPromise=n.i(o.c)().then(function(){return t._createAndTransferCanvas(e),t.props.onInitialize(t)}).then(function(){t._stopped||(t._animationFrameId=n.i(s.g)(t._updateFrame))})),this}},{key:"stop",value:function(){return this._animationFrameId&&(n.i(s.h)(this._animationFrameId),this._animationFrameId=null,this._stopped=!0,this.props.onFinalize(this)),this.worker.postMessage({command:"stop"}),this}},{key:"_onMessage",value:function(t){switch(t.data.command){case"addEventListener":this.canvas.addEventListener(t.data.type,this._onEvent);break;case"removeEventListener":this.canvas.removeEventListener(t.data.type,this._onEvent)}}},{key:"_onEvent",value:function(t){var e=this.useDevicePixels?window.devicePixelRatio||1:1,r=t.type,a={};for(var o in t){var s=t[o],u=n.i(i.a)(s);"offsetX"!==o&&"offsetY"!==o||(s*=e),"number"!==u&&"boolean"!==u&&"string"!==u||(a[o]=s)}this.worker.postMessage({command:"event",type:r,event:a})}},{key:"_updateFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._animationFrameId=n.i(s.g)(this._updateFrame)}},{key:"_createAndTransferCanvas",value:function(t){var e=n.i(o.d)(t);e.transferControlToOffscreen||u.a.error("OffscreenCanvas is not available in your browser.")();var i=e.transferControlToOffscreen();this.worker.postMessage({command:"start",opts:Object.assign({},t,{canvas:i})},[i]),this.canvas=e}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.autoResizeDrawingBuffer){var t=this.useDevicePixels?window.devicePixelRatio||1:1,e=this.canvas.clientWidth*t,n=this.canvas.clientHeight*t;this.width===e&&this.height===n||(this.width=e,this.height=n,this.worker.postMessage({command:"resize",width:e,height:n}))}}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(43),r=n(0),a=n(1),o=n(75),s=n(155),u=n(7),l=n(6),c=n(5),f=n(60),d={preserveDrawingBuffer:!0},h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(r.a)(this,t);var i=e.onCreateContext,a=void 0===i?function(t){return n.i(o.e)(t)}:i,s=e.onAddHTML,u=void 0===s?null:s,c=e.onInitialize,f=void 0===c?function(){}:c,d=e.onRender,h=void 0===d?function(){}:d,v=e.onFinalize,g=void 0===v?function(){}:v,p=e.gl,_=void 0===p?null:p,m=e.glOptions,y=void 0===m?{}:m,b=e.debug,E=void 0!==b&&b,A=e.createFramebuffer,x=void 0!==A&&A,T=e.autoResizeViewport,P=void 0===T||T,w=e.autoResizeDrawingBuffer,C=void 0===w||w,k=e.useDevicePixels,S=void 0===k||k;return"useDevicePixelRatio"in e&&(l.a.deprecated("useDevicePixelRatio","useDevicePixels")(),S=e.useDevicePixelRatio),this.props={onCreateContext:a,onAddHTML:u,onInitialize:f,onRender:h,onFinalize:g,gl:_,glOptions:y,debug:E,createFramebuffer:x},this.gl=_,this.needsRedraw=null,this._initialized=!1,this._running=!1,this._animationFrameId=null,this._startPromise=null,this.setProps({autoResizeViewport:P,autoResizeDrawingBuffer:C,useDevicePixels:S}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this),this}return n.i(a.a)(t,[{key:"setNeedsRedraw",value:function(t){return n.i(c.a)("string"==typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:"setProps",value:function(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,this._startPromise=n.i(o.c)().then(function(){if(!t._running||t._initialized)return null;t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport();var n=t.onInitialize(t.animationProps);return t._initialized=!0,n}).then(function(e){t._running&&(t._addCallbackData(e||{}),!1!==e&&t._startLoop())}),this)}},{key:"redraw",value:function(){return this._setupFrame(),this._updateCallbackData(),this.onRender(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),n.i(u.h)(this._animationFrameId),this._animationFrameId=null,this._running=!1),this}},{key:"onCreateContext",value:function(){var t;return(t=this.props).onCreateContext.apply(t,arguments)}},{key:"onInitialize",value:function(){var t;return(t=this.props).onInitialize.apply(t,arguments)}},{key:"onRender",value:function(){var t;return(t=this.props).onRender.apply(t,arguments)}},{key:"onFinalize",value:function(){var t;return(t=this.props).onFinalize.apply(t,arguments)}},{key:"getHTMLControlValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}},{key:"setViewParameters",value:function(){return l.a.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var t=this,e=function e(){t._running&&(t.redraw(),t._animationFrameId=n.i(u.g)(e))};n.i(u.h)(this._animationFrameId),this._animationFrameId=n.i(u.g)(e)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var t=this._getSizeAndAspect(),e=t.width,n=t.height,i=t.aspect;e===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(t){"object"===n.i(i.a)(t)&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:"_createWebGLContext",value:function(t){if(this.offScreen=t.canvas&&"undefined"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,d,this.props.glOptions),this.gl=this.props.gl||this.onCreateContext(t),!n.i(u.m)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=n.i(s.a)(this.gl)),n.i(o.f)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);var n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,i=this.gl.canvas,r=i.clientWidth,a=i.clientHeight;return r>=0&&a>=0?n=e>0?r/a:1:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&n.i(o.g)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new f.c(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_startEventHandling",value:function(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:"_onMouseleave",value:function(t){this.animationProps._mousePosition=null}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),r=n(1),a=n(60),o=n(6),s=n(113),u=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,t);var a=r.id,u=void 0===a?n.i(o.b)("attribute"):a,l=r.type,c=r.isIndexed,f=void 0!==c&&c;this.gl=e,this.id=u,this.isIndexed=f,this.target=f?34963:34962,this.type=l,f&&!l&&(this.type=e&&n.i(s.b)(e,s.a.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(r),Object.seal(this),this._validateAttributeDefinition()}return n.i(r.a)(t,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(t){var e=t.value,n=t.buffer,i=t.constant,r=void 0===i?this.constant||!1:i;this.constant=r,n?(this.externalBuffer=n,this.constant=!1,this.type=n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor)):e&&(this.externalBuffer=null,this.value=e,!r&&this.gl&&(this.buffer=this.buffer||new a.d(this.gl,Object.assign({},t,{id:this.id,target:this.target,type:this.type})),this.buffer.setData({data:e}),this.type=this.buffer.accessor.type)),this._setAccessor(t)}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var t=this.externalBuffer||this.buffer;return t?[t,this]:null}},{key:"_setAccessor",value:function(t){var e=t.size,n=void 0===e?this.size:e,i=t.offset,r=void 0===i?this.offset||0:i,a=t.stride,s=void 0===a?this.stride||0:a,u=t.normalized,l=void 0===u?this.normalized||!1:u,c=t.integer,f=void 0===c?this.integer||!1:c,d=t.divisor,h=void 0===d?this.divisor||0:d,v=t.instanced,g=t.isInstanced;this.size=n,this.offset=r,this.stride=s,this.normalized=l,this.integer=f,this.divisor=h,void 0!==g&&(o.a.deprecated("Attribute.isInstanced"),this.divisor=g?1:0),void 0!==v&&(o.a.deprecated("Attribute.instanced"),this.divisor=v?1:0)}},{key:"_validateAttributeDefinition",value:function(){}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(64),r=n(0),a=n(1),o=n(4),s=n(2),u=n(3),l=n(148),c=n(93),f=n(5),d=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(r.a)(this,e),i=Array.isArray(i)?{children:i}:i;var a=i,u=a.children,c=void 0===u?[]:u;return c.every(function(t){return n.i(f.a)(t instanceof l.a)}),t=n.i(o.a)(this,n.i(s.a)(e).call(this,i)),t.children=c,t}return n.i(u.a)(e,t),n.i(a.a)(e,[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var a=0;a<e.length;a++){var o=e[a];Array.isArray(o)?this.add.apply(this,n.i(i.a)(o)):this.children.push(o)}return this}},{key:"remove",value:function(t){var e=this.children,n=e.indexOf(t);return n>-1&&e.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"traverse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.modelMatrix,r=void 0===i?new c.b:i,a=!0,o=!1,s=void 0;try{for(var u,l=this.children[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value,d=f.matrix;r=r.multiplyRight(d);var h=void 0;if(h=f instanceof e?f.traverse(t,{modelMatrix:r}):t(f,{}))return h}}catch(t){o=!0,s=t}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return null}},{key:"traverseReverse",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.modelMatrix,r=void 0===i?new c.b:i,a=this.children.length-1;a>=0;--a){var o=this.children[a],s=o.matrix;r=r.multiplyRight(s);var u=void 0;if(u=o instanceof e?o.traverseReverse(t,{modelMatrix:r}):t(o,{}))return u}return null}}]),e}(l.a)},function(t,e,n){"use strict";function i(){return"undefined"!=typeof window?window.devicePixelRatio:1}function r(t,e){var r=e.models,l=e.position,c=e.uniforms,f=void 0===c?{}:c,d=e.parameters,h=void 0===d?{}:d,v=e.settings,g=e.useDevicePixels,p=void 0===g||g,_=e.framebuffer,m=e.context;n.i(u.a)(n.i(o.e)(t)&&_&&l);var y=n.i(a.a)(l,2),b=y[0],E=y[1];_.resize({width:t.canvas.width,height:t.canvas.height});var A=p?i():1,x=b*A,T=t.canvas.height-E*A;return new s.a({children:r}).traverseReverse(function(i){if(i.pickable){n.i(o.f)(t,{framebuffer:_,color:!0,depth:!0}),i.setUniforms({picking_uActive:1}),i.draw(Object.assign({},e,{uniforms:f,parameters:h,settings:v,framebuffer:_,context:m})),i.setUniforms({picking_uActive:0});var r=_.readPixels({x:x,y:T,width:1,height:1,format:6408,type:5121});if(0!==r[0]||0!==r[1]||0!==r[2])return{model:i,color:r,x:b,y:E,deviceX:x,deviceY:T}}return null})}e.a=r;var a=n(31),o=n(60),s=n(206),u=n(5)},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(109),u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(i.a)(this,e);var o=t.radius,s=void 0===o?1:o,u=t.cap,l=void 0===u||u;return n.i(r.a)(this,n.i(a.a)(e).call(this,Object.assign({},t,{topRadius:0,topCap:Boolean(l),bottomCap:Boolean(l),bottomRadius:s})))}return n.i(o.a)(e,t),e}(s.a)},function(t,e,n){"use strict";function i(){return{indices:new Uint16Array(f),positions:new Float32Array(d),normals:new Float32Array(h),texCoords:new Float32Array(v)}}n.d(e,"a",function(){return c});var r=n(0),a=n(4),o=n(2),s=n(3),u=n(52),l=n(6),c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(r.a)(this,e);var s=t.id,u=void 0===s?n.i(l.b)("cube-geometry"):s;return n.i(a.a)(this,n.i(o.a)(e).call(this,Object.assign({},t,{id:u,attributes:i()})))}return n.i(s.a)(e,t),e}(u.a),f=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),d=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),h=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),v=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1])},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(109),u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(i.a)(this,e);var o=t.radius,s=void 0===o?1:o;return n.i(r.a)(this,n.i(a.a)(e).call(this,Object.assign({},t,{bottomRadius:s,topRadius:s})))}return n.i(o.a)(e,t),e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(52),u=n(93),l=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],c=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(i.a)(this,e);var o=t.iterations,s=void 0===o?0:o,f=Math.PI,d=2*f,h=l.concat(),v=c.concat();h.push(),v.push();for(var g=(function(){var t={};return function(e,n){e*=3,n*=3;var i=e<n?e:n,r=e>n?e:n,a="".concat(i,"|").concat(r);if(a in t)return t[a];var o=h[e],s=h[e+1],u=h[e+2],l=h[n],c=h[n+1],f=h[n+2],d=(o+l)/2,v=(s+c)/2,g=(u+f)/2,p=Math.sqrt(d*d+v*v+g*g);return d/=p,v/=p,g/=p,h.push(d,v,g),t[a]=h.length/3-1}}()),p=0;p<s;p++){for(var _=[],m=0;m<v.length;m+=3){var y=g(v[m+0],v[m+1]),b=g(v[m+1],v[m+2]),E=g(v[m+2],v[m+0]);_.push(E,v[m+0],y,y,v[m+1],b,b,v[m+2],E,y,b,E)}v=_}for(var A=new Array(3*v.length),x=new Array(2*v.length),T=v.length,P=T-3;P>=0;P-=3){var w=v[P+0],C=v[P+1],k=v[P+2],S=3*w,R=3*C,M=3*k,L=2*w,I=2*C,O=2*k,F=h[S+0],N=h[S+1],D=h[S+2],B=Math.acos(D/Math.sqrt(F*F+N*N+D*D)),U=Math.atan2(N,F)+f,G=B/f,j=1-U/d,z=h[R+0],W=h[R+1],H=h[R+2],V=Math.acos(H/Math.sqrt(z*z+W*W+H*H)),X=Math.atan2(W,z)+f,Y=V/f,K=1-X/d,q=h[M+0],Z=h[M+1],Q=h[M+2],J=Math.acos(Q/Math.sqrt(q*q+Z*Z+Q*Q)),$=Math.atan2(Z,q)+f,tt=J/f,et=1-$/d,nt=[q-z,Z-W,Q-H],it=[F-z,N-W,D-H],rt=new u.a(nt).cross(it).normalize(),at=void 0;(0===j||0===K||0===et)&&(0===j||j>.5)&&(0===K||K>.5)&&(0===et||et>.5)&&(h.push(h[S+0],h[S+1],h[S+2]),at=h.length/3-1,v.push(at),x[2*at+0]=1,x[2*at+1]=G,A[3*at+0]=rt.x,A[3*at+1]=rt.y,A[3*at+2]=rt.z,h.push(h[R+0],h[R+1],h[R+2]),at=h.length/3-1,v.push(at),x[2*at+0]=1,x[2*at+1]=Y,A[3*at+0]=rt.x,A[3*at+1]=rt.y,A[3*at+2]=rt.z,h.push(h[M+0],h[M+1],h[M+2]),at=h.length/3-1,v.push(at),x[2*at+0]=1,x[2*at+1]=tt,A[3*at+0]=rt.x,A[3*at+1]=rt.y,A[3*at+2]=rt.z),A[S+0]=A[R+0]=A[M+0]=rt.x,A[S+1]=A[R+1]=A[M+1]=rt.y,A[S+2]=A[R+2]=A[M+2]=rt.z,x[L+0]=j,x[L+1]=G,x[I+0]=K,x[I+1]=Y,x[O+0]=et,x[O+1]=tt}return n.i(r.a)(this,n.i(a.a)(e).call(this,Object.assign({},t,{attributes:{positions:new Float32Array(h),normals:new Float32Array(A),texCoords:new Float32Array(x),indices:new Uint16Array(v)}})))}return n.i(o.a)(e,t),e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(52),u=n(6),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(i.a)(this,e);var o=t.type,s=void 0===o?"x,y":o,l=t.offset,c=void 0===l?0:l,f=t.flipCull,d=void 0!==f&&f,h=t.unpack,v=void 0!==h&&h,g=t.id,p=void 0===g?n.i(u.b)("plane-geometry"):g,_=s.split(","),m=t["".concat(_[0],"len")],y=t["".concat(_[1],"len")],b=t["n".concat(_[0])]||1,E=t["n".concat(_[1])]||1,A=(b+1)*(E+1),x=new Float32Array(3*A),T=new Float32Array(3*A),P=new Float32Array(2*A);d&&(m=-m);for(var w=0,C=0,k=0;k<=E;k++)for(var S=0;S<=b;S++){var R=S/b,M=k/E;switch(P[w+0]=d?1-R:R,P[w+1]=M,s){case"x,y":x[C+0]=m*R-.5*m,x[C+1]=y*M-.5*y,x[C+2]=c,T[C+0]=0,T[C+1]=0,T[C+2]=d?1:-1;break;case"x,z":x[C+0]=m*R-.5*m,x[C+1]=c,x[C+2]=y*M-.5*y,T[C+0]=0,T[C+1]=d?1:-1,T[C+2]=0;break;case"y,z":x[C+0]=c,x[C+1]=m*R-.5*m,x[C+2]=y*M-.5*y,T[C+0]=d?1:-1,T[C+1]=0,T[C+2]=0}w+=2,C+=3}for(var L=b+1,I=new Uint16Array(b*E*6),O=0;O<E;O++)for(var F=0;F<b;F++){var N=6*(O*b+F);I[N+0]=(O+0)*L+F,I[N+1]=(O+1)*L+F,I[N+2]=(O+0)*L+F+1,I[N+3]=(O+1)*L+F,I[N+4]=(O+1)*L+F+1,I[N+5]=(O+0)*L+F+1}if(v){for(var D=new Float32Array(3*I.length),B=new Float32Array(3*I.length),U=new Float32Array(2*I.length),G=0;G<I.length;++G){var j=I[G];D[3*G+0]=x[3*j+0],D[3*G+1]=x[3*j+1],D[3*G+2]=x[3*j+2],B[3*G+0]=T[3*j+0],B[3*G+1]=T[3*j+1],B[3*G+2]=T[3*j+2],U[2*G+0]=P[2*j+0],U[2*G+1]=P[2*j+1]}x=D,T=B,P=U,I=void 0}var z={positions:x,normals:T,texCoords:P};return I&&(z.indices=I),n.i(r.a)(this,n.i(a.a)(e).call(this,Object.assign({},t,{attributes:z,id:p})))}return n.i(o.a)(e,t),e}(s.a)},function(t,e,n){"use strict";function i(t,e,n){var i=Math.PI,r=i-0,a=2*Math.PI,o=a-0,s=(t+1)*(e+1);if("number"==typeof n){var u=n;n=function(t,e,n,i,r){return u}}for(var l=new Float32Array(3*s),c=new Float32Array(3*s),f=new Float32Array(2*s),d=new Uint16Array(t*e*6),h=0;h<=t;h++)for(var v=0;v<=e;v++){var g=v/e,p=h/t,_=v+h*(e+1),m=2*_,y=3*_,b=o*g,E=r*p,A=Math.sin(b),x=Math.cos(b),T=Math.sin(E),P=Math.cos(E),w=x*T,C=P,k=A*T,S=n(w,C,k,g,p);l[y+0]=S*w,l[y+1]=S*C,l[y+2]=S*k,c[y+0]=w,c[y+1]=C,c[y+2]=k,f[m+0]=g,f[m+1]=p}for(var R=t+1,M=0;M<t;M++)for(var L=0;L<e;L++){var I=6*(M*e+L);d[I+0]=L*R+M,d[I+1]=L*R+M+1,d[I+2]=(L+1)*R+M,d[I+3]=(L+1)*R+M,d[I+4]=L*R+M+1,d[I+5]=(L+1)*R+M+1}return{positions:l,indices:d,normals:c,texCoords:f}}n.d(e,"a",function(){return c});var r=n(0),a=n(4),o=n(2),s=n(3),u=n(52),l=n(6),c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.i(r.a)(this,e);var s=t.nlat,u=void 0===s?10:s,c=t.nlong,f=void 0===c?10:c,d=t.radius,h=void 0===d?1:d,v=t.id,g=void 0===v?n.i(l.b)("sphere-geometry"):v;return n.i(a.a)(this,n.i(o.a)(e).call(this,Object.assign({},t,{id:g,attributes:i(u,f,h)})))}return n.i(s.a)(e,t),e}(u.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(112),r=n(73),a=n(74);n(463);n.d(e,"global",function(){return r.a});if(r.a.luma&&"6.4.3"!==r.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(r.a.luma.VERSION," vs ").concat("6.4.3"));r.a.luma||(i.a&&a.a.log(0,"luma.gl ".concat("6.4.3"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),r.a.luma=r.a.luma||{VERSION:"6.4.3",version:"6.4.3",log:a.a,stats:{},globals:{modules:{},nodeIO:{}}}),e.default=r.a.luma},function(t,e,n){"use strict";function i(t){s=t}function r(t,e){return"string"==typeof t||e||(e=t,t=e.url),e.url=s?s+t:t,n.i(o.a)(e)}function a(t,e){return t=s?s+t:t,"undefined"==typeof Image?(t=new URL(t,location.pathname).href,n.i(o.a)({url:t,responseType:"arraybuffer"}).then(function(t){var e=new Blob([new Uint8Array(t)]);return createImageBitmap(e)})):new Promise(function(n,i){try{var r=new Image;r.onload=function(){return n(r)},r.onerror=function(){return i(new Error("Could not load image ".concat(t,".")))},r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(t){i(t)}})}e.a=i,e.b=r,e.c=a;var o=n(418),s=""},function(t,e,n){"use strict";function i(){}function r(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.i(h.a)("string"==typeof e,"loadTexture: url must be string"),n.i(v.c)(e,i).then(function(n){return new g.a(t,Object.assign({id:e},i,{data:n}))})}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.urls,r=t.onProgress,a=void 0===r?i:r;n.i(h.a)(e.every(function(t){return"string"==typeof t}),"loadImages: {urls} must be array of strings");var o=0;return Promise.all(e.map(function(i){var r=n.i(v.b)(Object.assign({url:i},t));return r.then(function(t){return a({progress:++o/e.length,count:o,total:e.length,url:i})}),r}))}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.urls,r=t.onProgress,a=void 0===r?i:r;n.i(h.a)(e.every(function(t){return"string"==typeof t}),"loadImages: {urls} must be array of strings");var o=0;return Promise.all(e.map(function(i){var r=n.i(v.c)(i,t);return r.then(function(t){return a({progress:++o/e.length,count:o,total:e.length,url:i})}),r}))}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.urls,a=e.onProgress,s=void 0===a?i:a;return n.i(h.a)(r.every(function(t){return"string"==typeof t}),"loadTextures: {urls} must be array of strings"),o(Object.assign({urls:r,onProgress:s},e)).then(function(n){return n.map(function(n,i){return new g.a(t,Object.assign({id:r[i]},e,{data:n}))})})}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.vs,o=e.fs,s=e.onProgress,u=void 0===s?i:s;return a(Object.assign({urls:[r,o],onProgress:u},e)).then(function(i){var r=n.i(d.a)(i,2),a=r[0],o=r[1];return new g.b(t,Object.assign({vs:a,fs:o},e))})}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.url,o=e.onProgress,s=void 0===o?i:o;return a(Object.assign({urls:[r],onProgress:s},e)).then(function(i){var r=n.i(d.a)(i,1),a=r[0];return c(t,Object.assign({file:a},e))})}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.file,i=e.program,r=void 0===i?new g.b(t):i,a="string"==typeof n?f(n):n,o={},s={};for(var u in a){var l=a[u];Array.isArray(l)?o[u]="indices"===u?new Uint16Array(l):new Float32Array(l):s[u]=l}return new p.a(t,Object.assign({program:r,geometry:new _.a({attributes:o})},s,e))}function f(t){try{return JSON.parse(t)}catch(t){throw new Error("Failed to parse JSON: ".concat(t))}}e.a=r,e.b=a,e.c=o,e.d=s,e.e=u,e.f=l,e.g=c;var d=n(31),h=n(5),v=n(215),g=n(60),p=n(58),_=n(48)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(48),u=n(58),l=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{geometry:new s.h(o)})))}return n.i(o.a)(e,t),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(48),u=n(58),l=n(6),c=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,e);var u=o.id,c=void 0===u?n.i(l.b)("cube"):u;return n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{id:c,geometry:new s.g(o)})))}return n.i(o.a)(e,t),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(48),u=n(89),l=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{geometry:new s.f(o)})))}return n.i(o.a)(e,t),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(58),u=n(48),l=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{geometry:new u.e(o)})))}return n.i(o.a)(e,t),e}(s.a)},function(t,e,n){"use strict";var i=(n(217),n(218),n(219),n(220),n(222),n(223),n(224),n(110));n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(48),u=n(89),l=n(6),c=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,e);var u=o.id,c=void 0===u?n.i(l.b)("plane"):u;return n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{id:c,geometry:new s.d(o)})))}return n.i(o.a)(e,t),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(58),u=n(48),l=n(6),c=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,e);var s=o.id,c=void 0===s?n.i(l.b)("sphere"):s;return n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{id:c,geometry:new u.c(o)})))}return n.i(o.a)(e,t),e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(4),a=n(2),o=n(3),s=n(48),u=n(58),l=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},o,{geometry:new s.b(o)})))}return n.i(o.a)(e,t),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(0),r=n(1),a=n(60),o=function(){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.i(i.a)(this,t),this.gl=e,this.framebuffer1=new a.c(e,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new a.c(e,{id:"multi-pass-2",stencil:!0}),this.reset()}return n.i(r.a)(t,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}}]),t}()},function(t,e,n){"use strict";function i(t,e,n,i){if(e.filter||e.sampler){var o=a(e);return[new g(t,{id:n,model:r(t,e,o,n,i),uniforms:null})]}var s=e.passes||[];return s.map(function(o){var u=a(e,o),l="".concat(n,"-").concat(s.length+1);return new g(t,Object.assign({id:l,model:r(t,e,u,l,i),uniforms:o.uniforms},i))})}function r(t,e,n,i,r){var a=new h.a(t,{id:i,fs:n,modules:[e]}),o=Object.assign(e.getUniforms(),e.getUniforms(r));return a.setUniforms(o),a}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(e.filter){var n="string"==typeof e.filter?e.filter:"".concat(t.name,"_filterColor");return _(n)}if(e.sampler){var i="string"==typeof e.sampler?e.sampler:"".concat(t.name,"_sampleColor");return m(i)}return null}n.d(e,"a",function(){return p});var o=n(0),s=n(1),u=n(4),l=n(2),c=n(3),f=n(53),d=n(149),h=n(110),v=n(229),g=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(o.a)(this,e),n.i(u.a)(this,n.i(l.a)(e).call(this,t,Object.assign({swap:!0},i)))}return n.i(c.a)(e,t),n.i(s.a)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer;t.swapBuffers;this.props.model.setUniforms(this.props),this.props.model.draw({uniforms:{texture:e,texSize:[e.width,e.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(f.a),p=function(t){function e(t,r){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.i(o.a)(this,e);var c="".concat(r.name,"-pass");n.i(v.a)(r);var f=i(t,r,c,s);return a=n.i(u.a)(this,n.i(l.a)(e).call(this,t,Object.assign({id:c,passes:f},s))),a.module=r,a}return n.i(c.a)(e,t),n.i(s.a)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=t.swapBuffers,i=!0,r=!0,a=!1,o=void 0;try{for(var s,u=this.module.passes[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;i||n(),i=!1,l.uniforms&&l.model.setUniforms(l.uniforms),l.model.draw({uniforms:{texture:e,texSize:[e.width,e.height]},parameters:{depthWrite:!1,depthTest:!1}})}}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}}}]),e}(d.a),_=function(t){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(t,"(gl_FragColor, texSize, texCoord);\n}\n")},m=function(t){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(t,"(texture, texSize, texCoord);\n}\n")}},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.vs,s=e.fs,u=n.i(d.c)(e.modules||[]);return{gl:t,vs:r(t,Object.assign({},e,{source:i,type:f.a,modules:u})),fs:r(t,Object.assign({},e,{source:s,type:f.b,modules:u})),getUniforms:a(u),modules:o(u)}}function r(t,e){var i=e.id,r=e.source,a=e.type,o=e.modules,l=void 0===o?[]:o,c=e.defines,d=void 0===c?{}:c,p=e.inject,m=void 0===p?{}:p,y=e.prologue,b=void 0===y||y,E=e.log;n.i(g.a)("string"==typeof r,"shader source must be a string");var A=a===f.a,x=r.split("\n"),T=100,P="",w=r;0===x[0].indexOf("#version ")&&(T=300,P=x[0],w=x.slice(1).join("\n"));var C=b?"".concat(P,"\n").concat(s({id:i,source:r,type:a}),"\n").concat(n.i(h.a)(t),"\n").concat(n.i(h.b)(t,T,!A),"\n").concat(u(d),"\n").concat(A?"":_,"\n"):"".concat(P,"\n"),k=!1,S=!0,R=!1,M=void 0;try{for(var L,I=l[Symbol.iterator]();!(S=(L=I.next()).done);S=!0){var O=L.value;switch(O.name){case"inject":k=!0;break;default:O.checkDeprecations(w,E);C+=O.getModuleSource(a,T)}}}catch(t){R=!0,M=t}finally{try{S||null==I.return||I.return()}finally{if(R)throw M}}return C+=w,C=n.i(v.a)(C,a,m,k)}function a(t){return function(e){var n={},i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=u.getUniforms(e,n);Object.assign(n,l)}}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}function o(t){var e={},i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var u=o.value,l=n.i(d.d)(u);e[u]=l}}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return e}function s(t){var e=t.id,n=t.source,i=t.type;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(p[i],"\n\n"):""}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(var i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;var r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}e.a=i;var l,c=n(18),f=n(228),d=n(152),h=n(428),v=n(151),g=n(111),p=(l={},n.i(c.a)(l,f.a,"vertex"),n.i(c.a)(l,f.b,"fragment"),l),_="precision highp float;\n\n"},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i="vs",r="fs"},function(t,e,n){"use strict";function i(t,e){var n={};if(void 0===e){for(var i in t.uniforms)n[i]=t.uniforms[i].value;return n}for(var r in e)n[r]=e[r];return n}function r(t){if(!t.normalized){if(t.normalized=!0,t.uniforms){var e=n.i(a.a)(t.uniforms),r=e.propTypes;t.uniforms=r}t.uniforms&&!t.getUniforms&&(t.getUniforms=i.bind(null,t))}return t}e.a=r;var a=n(427)},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e={};return void 0!==t.diffuseTexture&&(e.diffuse_uHasTexture=Boolean(t.diffuseTexture),e.diffuse_uTexture=t.diffuseTexture),void 0!==t.diffuseColor&&(e.diffuse_uColor=t.diffuseColor),e}var r={diffuseTexture:null,diffuseColor:[.5,.5,.5,1]};e.a={name:"diffuse",getUniforms:i,vs:"out vec2 diffuse_vTexCoord;\nvoid diffuse_setTextureCoordinate(vec2 uv) {\n  diffuse_vTexCoord = uv;\n}\n",fs:"uniform vec4 diffuse_uColor;\nuniform bool diffuse_uHasTexture;\nuniform sampler2D diffuse_uTexture;\n\nin vec2 diffuse_vTexCoord;\n\n\n\nvec4 diffuse_getColor() {\n  vec2 texCoord = diffuse_vTexCoord;\n  return diffuse_uHasTexture ?\n    texture2D(diffuse_uTexture, vec2(texCoord.s, texCoord.t)) :\n    diffuse_uColor;\n}\n\nvec4 diffuse_filterColor(vec4 color) {\n  return diffuse_getColor();\n}\n"}},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e={};return t.lightDirection&&(e.dirlight_uLightDirection=t.lightDirection),e}var r=n(153),a=new Float32Array([1,1,2]),o={lightDirection:a};e.a={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:i,dependencies:[r.a]}},function(t,e,n){"use strict";e.a={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},function(t,e,n){"use strict";function i(){return Object.assign({},u)}var r=n(434),a=n(432),o=n(433),s="".concat(a.a,"\n").concat(o.a),u={ONE:1};e.a={name:"fp64",vs:s,fs:null,fp64ify:r.a,fp64LowPart:r.b,fp64ifyMatrix4:r.c,getUniforms:i};"".concat(a.a)},function(t,e,n){"use strict";function i(t){var e=t.lightingEnable,n=void 0!==e&&e,i=t.lightingAmbientColor,o=void 0===i?[.2,.2,.2]:i,s=t.lightingDirection,u=void 0===s?[1,1,1]:s,l=(t.lightingDirectionalColor,t.lightingPointLights),c=void 0===l?[]:l;return Object.assign({lightingEnable:n,lightingAmbientColor:o},r(u),a(c))}function r(t){var e=t.color,n=t.direction,i=new o.a(n.x,n.y,n.z).normalize().scale(-1,-1,-1);return{directionalColor:[e.r,e.g,e.b],lightingDirection:[i.x,i.y,i.z]}}function a(t){t=t instanceof Array?t:[t];var e=t.length,n=[],i=[],r=[],a=[],o=!0,s=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,d=f.position,h=f.color,v=f.diffuse,g=f.specular,p=h||v;n.push(d.x,d.y,d.z),i.push(p.r,p.g,p.b),r.push(Number(Boolean(g))),g?a.push(g.r,g.g,g.b):a.push(0,0,0)}}catch(t){s=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}return{numberPoints:e,pointLocation:n,pointColor:i,enableSpecular:r,pointSpecularColor:a}}var o=n(93),s=n(435),u=n(437),l=n(436),c="".concat(s.a,"\n").concat(u.a,"\n"),f="".concat(s.a,"\n").concat(l.a,"\n");e.a={name:"lighting",vs:c,fs:f,getUniforms:i}},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e={};if(void 0!==t.pickingSelectedColor)if(null===t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{var n=[t.pickingSelectedColor[0],t.pickingSelectedColor[1],t.pickingSelectedColor[2]];e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}return void 0!==t.pickingHighlightColor&&(e.picking_uHighlightColor=t.pickingHighlightColor),void 0!==t.pickingThreshold&&(e.picking_uThreshold=t.pickingThreshold),void 0!==t.pickingActive&&(e.picking_uActive=t.pickingActive?1:0),e}var r=new Uint8Array([0,255,255,255]),a={pickingSelectedColor:null,pickingHighlightColor:r,pickingThreshold:1,pickingActive:!1};e.a={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:i}},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.b.navigator||{},n=t.userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),a=-1!==n.indexOf("Trident/");return i||a}e.a=i;var r=n(73)},function(t,e,n){"use strict";function i(t,e,n,i){var a="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach(function(t){o.methodName||(o[t]=function(){throw r.a.removed("Calling removed method ".concat(e,".").concat(t,": "),a),new Error(t)})})}e.a=i;var r=n(74)},function(t,e,n){"use strict";function i(t){function e(t){o("WebGL context: ".concat(t.statusMessage||"Unknown error"))}var n=t.canvas,i=t.opts,r=void 0===i?{}:i,a=t.onError,o=void 0===a?function(t){return null}:a;n.addEventListener("webglcontextcreationerror",e,!1);var s=r.webgl1,u=void 0===s||s,l=r.webgl2,c=void 0===l||l,f=null;return c&&(f=f||n.getContext("webgl2",r),f=f||n.getContext("experimental-webgl2",r)),u&&(f=f||n.getContext("webgl",r),f=f||n.getContext("experimental-webgl",r)),n.removeEventListener("webglcontextcreationerror",e,!1),f||o("Failed to create ".concat(c&&!u?"WebGL2":"WebGL"," context"))}e.a=i},function(t,e,n){"use strict";function i(){return o||(o=u?new Promise(function(t,e){if(u&&"complete"===document.readyState)return l=!0,void t(document);window.onload=function(){l=!0,t(document)}}):Promise.resolve({})),o}function r(t){var e=t.width,n=void 0===e?800:e,i=t.height,r=void 0===i?600:i,a=t.id,o=void 0===a?"gl-canvas":a,s=t.insert,u=void 0===s||s,l=document.createElement("canvas");if(l.id=o,l.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",l.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",u){var c=document.body;c.insertBefore(l,c.firstChild)}return l}function a(t){var e,n=t.canvas,i=t.width,a=t.height,o=t.onError,s=void 0===o?function(){}:o;return"string"==typeof n?(l||s("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)):e=n||r({id:"lumagl-canvas",width:i,height:a,onError:s}),e}e.a=i,e.b=a;var o,s=n(6),u=s.e&&"undefined"!=typeof document,l=u&&"complete"===document.readyState},function(t,e,n){"use strict";function i(t){var e=t.width,i=t.height,s=t.opts,u=t.onError,l=s.webgl1;if(s.webgl2&&!l)return u("headless-gl does not support WebGL2");if(!r.d)return u(a);var c=n.i(r.d)(e,i,s);return c||u(o)}e.a=i;var r=n(158),a="Failed to create WebGL context in Node.js, headless gl not available",o="Failed to create WebGL context in Node.js, headless gl returned null"},function(t,e,n){"use strict";function i(t,e,i){var r=w[e],a=r?r(t,Number(e)):t.getParameter(Number(e)),o=x[e];return n.i(p.a)("function"==typeof o),o(t,i,Number(e)),a}function r(t,e){var n={};for(var i in e){var r=Number(i),a=x[i];a&&("string"==typeof a?n[a]=!0:a(t,e[i],r))}var o=t.state&&t.state.cache;if(o){var s=Object.assign({},o,e);for(var u in n){(0,T[u])(t,s)}}}function a(t,e){var n=w[e];return n?n(t,Number(e)):t.getParameter(Number(e))}function o(t,e){e=e||_;var n=Array.isArray(e)?e:Object.keys(e),i={},r=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value;i[c]=a(t,c)}}catch(t){o=!0,s=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}return i}function s(t){return Object.assign({},_,{})}function u(t){r(t,s(t))}function l(t){var e=o(_),n={};for(var i in _)C(e[i],_[i])||(n[i]=e[i]);return n}n.d(e,"b",function(){return _}),e.e=i,e.c=r,e.d=a,e.a=o,e.f=u,e.g=l;var c,f,d,h=n(64),v=n(18),g=n(7),p=n(5),_=(c={},n.i(v.a)(c,3042,!1),n.i(v.a)(c,32773,new Float32Array([0,0,0,0])),n.i(v.a)(c,32777,32774),n.i(v.a)(c,34877,32774),n.i(v.a)(c,32969,1),n.i(v.a)(c,32968,0),n.i(v.a)(c,32971,1),n.i(v.a)(c,32970,0),n.i(v.a)(c,3106,new Float32Array([0,0,0,0])),n.i(v.a)(c,3107,[!0,!0,!0,!0]),n.i(v.a)(c,2884,!1),n.i(v.a)(c,2885,1029),n.i(v.a)(c,2929,!1),n.i(v.a)(c,2931,1),n.i(v.a)(c,2932,513),n.i(v.a)(c,2928,new Float32Array([0,1])),n.i(v.a)(c,2930,!0),n.i(v.a)(c,3024,!0),n.i(v.a)(c,36006,null),n.i(v.a)(c,2886,2305),n.i(v.a)(c,33170,4352),n.i(v.a)(c,2849,1),n.i(v.a)(c,32823,!1),n.i(v.a)(c,32824,0),n.i(v.a)(c,10752,0),n.i(v.a)(c,32938,1),n.i(v.a)(c,32939,!1),n.i(v.a)(c,3089,!1),n.i(v.a)(c,3088,new Int32Array([0,0,1024,1024])),n.i(v.a)(c,2960,!1),n.i(v.a)(c,2961,0),n.i(v.a)(c,2968,4294967295),n.i(v.a)(c,36005,4294967295),n.i(v.a)(c,2962,519),n.i(v.a)(c,2967,0),n.i(v.a)(c,2963,4294967295),n.i(v.a)(c,34816,519),n.i(v.a)(c,36003,0),n.i(v.a)(c,36004,4294967295),n.i(v.a)(c,2964,7680),n.i(v.a)(c,2965,7680),n.i(v.a)(c,2966,7680),n.i(v.a)(c,34817,7680),n.i(v.a)(c,34818,7680),n.i(v.a)(c,34819,7680),n.i(v.a)(c,2978,new Int32Array([0,0,1024,1024])),n.i(v.a)(c,3333,4),n.i(v.a)(c,3317,4),n.i(v.a)(c,37440,!1),n.i(v.a)(c,37441,!1),n.i(v.a)(c,37443,37444),n.i(v.a)(c,35723,4352),n.i(v.a)(c,36010,null),n.i(v.a)(c,35977,!1),n.i(v.a)(c,3330,0),n.i(v.a)(c,3332,0),n.i(v.a)(c,3331,0),n.i(v.a)(c,3314,0),n.i(v.a)(c,32878,0),n.i(v.a)(c,3316,0),n.i(v.a)(c,3315,0),n.i(v.a)(c,32877,0),c),m=function(t,e,n){return e?t.enable(n):t.disable(n)},y=function(t,e,n){return t.hint(n,e)},b=function(t,e,n){return t.pixelStorei(n,e)},E=function(t,e){var i=n.i(g.a)(t)?36009:36160;return t.bindFramebuffer(i,e)},A=function(t,e){return t.bindFramebuffer(36008,e)},x=(f={},n.i(v.a)(f,3042,m),n.i(v.a)(f,32773,function(t,e){return t.blendColor.apply(t,n.i(h.a)(e))}),n.i(v.a)(f,32777,"blendEquation"),n.i(v.a)(f,34877,"blendEquation"),n.i(v.a)(f,32969,"blendFunc"),n.i(v.a)(f,32968,"blendFunc"),n.i(v.a)(f,32971,"blendFunc"),n.i(v.a)(f,32970,"blendFunc"),n.i(v.a)(f,3106,function(t,e){return t.clearColor.apply(t,n.i(h.a)(e))}),n.i(v.a)(f,3107,function(t,e){return t.colorMask.apply(t,n.i(h.a)(e))}),n.i(v.a)(f,2884,m),n.i(v.a)(f,2885,function(t,e){return t.cullFace(e)}),n.i(v.a)(f,2929,m),n.i(v.a)(f,2931,function(t,e){return t.clearDepth(e)}),n.i(v.a)(f,2932,function(t,e){return t.depthFunc(e)}),n.i(v.a)(f,2928,function(t,e){return t.depthRange.apply(t,n.i(h.a)(e))}),n.i(v.a)(f,2930,function(t,e){return t.depthMask(e)}),n.i(v.a)(f,3024,m),n.i(v.a)(f,35723,y),n.i(v.a)(f,36006,E),n.i(v.a)(f,2886,function(t,e){return t.frontFace(e)}),n.i(v.a)(f,33170,y),n.i(v.a)(f,2849,function(t,e){return t.lineWidth(e)}),n.i(v.a)(f,32823,m),n.i(v.a)(f,32824,"polygonOffset"),n.i(v.a)(f,10752,"polygonOffset"),n.i(v.a)(f,35977,m),n.i(v.a)(f,32938,"sampleCoverage"),n.i(v.a)(f,32939,"sampleCoverage"),n.i(v.a)(f,3089,m),n.i(v.a)(f,3088,function(t,e){return t.scissor.apply(t,n.i(h.a)(e))}),n.i(v.a)(f,2960,m),n.i(v.a)(f,2961,function(t,e){return t.clearStencil(e)}),n.i(v.a)(f,2968,function(t,e){return t.stencilMaskSeparate(1028,e)}),n.i(v.a)(f,36005,function(t,e){return t.stencilMaskSeparate(1029,e)}),n.i(v.a)(f,2962,"stencilFuncFront"),n.i(v.a)(f,2967,"stencilFuncFront"),n.i(v.a)(f,2963,"stencilFuncFront"),n.i(v.a)(f,34816,"stencilFuncBack"),n.i(v.a)(f,36003,"stencilFuncBack"),n.i(v.a)(f,36004,"stencilFuncBack"),n.i(v.a)(f,2964,"stencilOpFront"),n.i(v.a)(f,2965,"stencilOpFront"),n.i(v.a)(f,2966,"stencilOpFront"),n.i(v.a)(f,34817,"stencilOpBack"),n.i(v.a)(f,34818,"stencilOpBack"),n.i(v.a)(f,34819,"stencilOpBack"),n.i(v.a)(f,2978,function(t,e){return t.viewport.apply(t,n.i(h.a)(e))}),n.i(v.a)(f,3333,b),n.i(v.a)(f,3317,b),n.i(v.a)(f,37440,b),n.i(v.a)(f,37441,b),n.i(v.a)(f,37443,b),n.i(v.a)(f,3330,b),n.i(v.a)(f,3332,b),n.i(v.a)(f,3331,b),n.i(v.a)(f,36010,A),n.i(v.a)(f,3314,b),n.i(v.a)(f,32878,b),n.i(v.a)(f,3316,b),n.i(v.a)(f,3315,b),n.i(v.a)(f,32877,b),f),T={blendEquation:function(t,e){return t.blendEquationSeparate(e[32777],e[34877])},blendFunc:function(t,e){return t.blendFuncSeparate(e[32969],e[32968],e[32971],e[32970])},polygonOffset:function(t,e){return t.polygonOffset(e[32824],e[10752])},sampleCoverage:function(t,e){return t.sampleCoverage(e[32938],e[32939])},stencilFuncFront:function(t,e){return t.stencilFuncSeparate(1028,e[2962],e[2967],e[2963])},stencilFuncBack:function(t,e){return t.stencilFuncSeparate(1029,e[34816],e[36003],e[36004])},stencilOpFront:function(t,e){return t.stencilOpSeparate(1028,e[2964],e[2965],e[2966])},stencilOpBack:function(t,e){return t.stencilOpSeparate(1029,e[34817],e[34818],e[34819])}},P=function(t,e){return t.isEnabled(e)},w=(d={},n.i(v.a)(d,3042,P),n.i(v.a)(d,2884,P),n.i(v.a)(d,2929,P),n.i(v.a)(d,3024,P),n.i(v.a)(d,32823,P),n.i(v.a)(d,32926,P),n.i(v.a)(d,32928,P),n.i(v.a)(d,3089,P),n.i(v.a)(d,2960,P),n.i(v.a)(d,35977,P),d),C=function(t,e){if(t===e)return!0;var n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,i=t.match(n);return i?i[1]:e}function r(t){switch(t){case a:return"fragment";case o:return"vertex";default:return"unknown type"}}e.a=i,e.b=r;var a=35632,o=35633},function(t,e,n){"use strict";function i(t,e){u()(t instanceof r.a||t instanceof a.a||t instanceof o.a);var n=t.constructor,i=t.gl,s=t.width,l=t.height,c=t.format,f=t.type,d=t.dataFormat,h=t.border,v=t.mipmaps;return new n(i,Object.assign({width:s,height:l,format:c,type:f,dataFormat:d,border:h,mipmaps:v},e))}e.a=i;var r=n(92),a=n(160),o=n(247),s=n(96),u=n.n(s)},function(t,e,n){"use strict";function i(t){return Boolean(t&&(t instanceof s.b||t.ARRAY_BUFFER===l))}function r(t){return Boolean(t&&(t instanceof s.c||t.TEXTURE_BINDING_3D===c))}function a(t){n.i(u.a)(i(t),f)}function o(t){n.i(u.a)(r(t),d)}e.a=i,e.b=r,e.c=a,e.d=o;var s=n(158),u=n(5),l=34962,c=32874,f="Invalid WebGLRenderingContext",d="Requires WebGL2"},function(t,e,n){"use strict";n.d(e,"a",function(){return g});var i=n(0),r=n(4),a=n(2),o=n(1),s=n(3),u=n(27),l=n(42),c=n(113),f=n(7),d=n(157),h=n(5),v=function(t){return t},g=function(t){function e(t){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,e),o=n.i(r.a)(this,n.i(a.a)(e).call(this,t,s));var l=s.onComplete,c=void 0===l?v:l,f=s.onError,d=void 0===f?v:f;return o.target=null,o.onComplete=c,o.onError=d,o.promise=null,Object.seal(n.i(u.a)(n.i(u.a)(o))),o}return n.i(s.a)(e,t),n.i(o.a)(e,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=n.i(f.a)(t),r=n.i(c.c)(t,c.a.TIMER_QUERY),a=i||r,o=!0,s=!1,u=void 0;try{for(var l,d=e[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){switch(l.value){case"queries":a=a&&i;break;case"timers":a=a&&r;break;case"timestamps":var v=r?t.getQuery(36392,34916):0;a=a&&v>0;break;default:n.i(h.a)(!1)}}}catch(t){s=!0,u=t}finally{try{o||null==d.return||d.return()}finally{if(s)throw u}}return a}}]),n.i(o.a)(e,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.conservative,n=void 0!==e&&e;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"getTimestamp",value:function(){d.a.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(t){d.a.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function(t){d.a.beginQuery(this,this.onComplete,this.onError),this.target=t;try{this.gl.beginQuery(this.target,this.handle)}catch(t){d.a.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.gl.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),d.a.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function(){var t=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(t)?t/1e6:0}},{key:"_createHandle",value:function(){return e.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){d.a.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(t){d.a.poll(t)}}]),e}(l.a);d.a.setInvalidator({queryType:g,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(t){return t.getParameter(36795)}})},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),r=n(4),a=n(2),o=n(1),s=n(3),u=n(27),l=n(7),c=n(42),f=function(t){function e(t,o){var s;return n.i(i.a)(this,e),n.i(l.b)(t),s=n.i(r.a)(this,n.i(a.a)(e).call(this,t,o)),Object.seal(n.i(u.a)(n.i(u.a)(s))),s}return n.i(s.a)(e,t),n.i(o.a)(e,null,[{key:"isSupported",value:function(t){return n.i(l.a)(t)}}]),n.i(o.a)(e,[{key:"bind",value:function(t){return this.gl.bindSampler(t,this.handle),this}},{key:"unbind",value:function(t){return this.gl.bindSampler(t,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(t){return this.gl.getSamplerParameter(this.handle,t)}},{key:"_setParameter",value:function(t,e){switch(t){case 33082:case 33083:this.gl.samplerParameterf(this.handle,t,e);break;default:this.gl.samplerParameteri(this.handle,t,e)}return this}}]),e}(c.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(0),r=n(4),a=n(2),o=n(1),s=n(3),u=n(27),l=n(7),c=n(59),f=n(77),d=n(46),h=function(t){function e(t){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(l.b)(t),o=n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},s,{target:s.target||32879}))),o.width=null,o.height=null,o.depth=null,Object.seal(n.i(u.a)(n.i(u.a)(o))),o.setImageData(s),s.generateMipmap&&o.generateMipmap(),o}return n.i(s.a)(e,t),n.i(o.a)(e,null,[{key:"isSupported",value:function(t){return n.i(l.a)(t)}}]),n.i(o.a)(e,[{key:"initialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,e);var i=this.opts,r=i.pixels,a=i.settings;a&&(n.i(c.f)(a,function(){r&&t.setImage3D(t.opts)}),this.setParameters(e))}},{key:"setImage3D",value:function(t){var e=t.level,n=void 0===e?0:e,i=t.internalformat,r=void 0===i?6408:i,a=t.width,o=t.height,s=t.depth,u=void 0===s?1:s,l=t.border,c=void 0===l?0:l,f=t.format,h=t.type,v=void 0===h?5121:h,g=t.offset,p=void 0===g?0:g,_=t.pixels;if(ArrayBuffer.isView(_))return void this.gl.texImage3D(this.target,n,r,a,o,u,c,f,v,_);_ instanceof d.a&&(this.gl.bindBuffer(35052,_.handle),this.gl.texImage3D(this.target,n,r,a,o,u,c,f,v,p),this.gl.bindBuffer(35052,_.handle))}}]),e}(f.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n(0),r=n(4),a=n(2),o=n(169),s=n(1),u=n(3),l=n(27),c=n(42),f=n(46),d=n(7),h=n(451),v=n(6),g=n(254),p=function(t){function e(t){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,e);var u=s.id||s.program&&s.program.id;return o=n.i(r.a)(this,n.i(a.a)(e).call(this,t,Object.assign({},s,{id:u}))),o.hasVertexArrays=e.isSupported(t),o.buffer=null,o.bufferValue=null,o.initialize(s),Object.seal(n.i(l.a)(n.i(l.a)(o))),o}return n.i(u.a)(e,t),n.i(s.a)(e,null,[{key:"isSupported",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?n.i(d.a)(t)||"Chrome"===n.i(g.b)():n.i(d.a)(t)||t.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new e(t,{handle:null})),t.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(t){return e.MAX_ATTRIBUTES=e.MAX_ATTRIBUTES||t.getParameter(34921),e.MAX_ATTRIBUTES}},{key:"setConstant",value:function(t,i,r){switch(r.constructor){case Float32Array:e._setConstantFloatArray(t,i,r);break;case Int32Array:e._setConstantIntArray(t,i,r);break;case Uint32Array:e._setConstantUintArray(t,i,r);break;default:n.i(v.h)(!1)}}}]),n.i(s.a)(e,[{key:"delete",value:function(){n.i(o.a)(n.i(a.a)(e.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}},{key:"setProps",value:function(t){return this}},{key:"setElementBuffer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.i(v.h)(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){t.gl.bindBuffer(34963,e?e.handle:null)}),this}},{key:"setBuffer",value:function(t,e,i){if(34963===e.target)return this.setElementBuffer(e,i);var r=i.size,a=i.type,o=i.stride,s=i.offset,u=i.normalized,l=i.integer,c=i.divisor,f=this.gl;return t=Number(t),this.bind(function(){f.bindBuffer(34962,e.handle),l?(n.i(v.h)(n.i(d.a)(f)),f.vertexAttribIPointer(t,r,a,o,s)):f.vertexAttribPointer(t,r,a,u,o,s),f.enableVertexAttribArray(t),f.vertexAttribDivisor(t,c||0)}),this}},{key:"enable",value:function(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!i&&0===t&&!e.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(function(){return i?n.gl.enableVertexAttribArray(t):n.gl.disableVertexAttribArray(t)})),this}},{key:"getConstantBuffer",value:function(t,e,i){var r=this._normalizeConstantArrayValue(e,i),a=r.byteLength*t,o=r.length*t,s=!this.buffer;if(this.buffer=this.buffer||new f.a(this.gl,a),s=s||this.buffer.setByteLength(a),s=s||!this._compareConstantArrayValues(r,this.bufferValue)){var u=n.i(h.a)(e.constructor,o);n.i(h.b)({target:u,source:r,start:0,count:o}),this.buffer.subData(u),this.bufferValue=e}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(t,e){return Array.isArray(t)?new Float32Array(t):t}},{key:"_compareConstantArrayValues",value:function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=e.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(t){return this.hasVertexArrays&&this.gl.deleteVertexArray(t),[this.elements]}},{key:"_bindHandle",value:function(t){this.hasVertexArrays&&this.gl.bindVertexArray(t)}},{key:"_getParameter",value:function(t,e){var i=this,r=e.location;return n.i(v.h)(Number.isFinite(r)),this.bind(function(){switch(t){case 34373:return i.gl.getVertexAttribOffset(r,t);default:return i.gl.getVertexAttrib(r,t)}})}},{key:"MAX_ATTRIBUTES",get:function(){return e.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(t,e,i){switch(i.length){case 1:t.vertexAttrib1fv(e,i);break;case 2:t.vertexAttrib2fv(e,i);break;case 3:t.vertexAttrib3fv(e,i);break;case 4:t.vertexAttrib4fv(e,i);break;default:n.i(v.h)(!1)}}},{key:"_setConstantIntArray",value:function(t,e,i){switch(n.i(v.h)(n.i(d.a)(t)),i.length){case 1:t.vertexAttribI1iv(e,i);break;case 2:t.vertexAttribI2iv(e,i);break;case 3:t.vertexAttribI3iv(e,i);break;case 4:t.vertexAttribI4iv(e,i);break;default:n.i(v.h)(!1)}}},{key:"_setConstantUintArray",value:function(t,e,i){switch(n.i(v.h)(n.i(d.a)(t)),i.length){case 1:t.vertexAttribI1uiv(e,i);break;case 2:t.vertexAttribI2uiv(e,i);break;case 3:t.vertexAttribI3uiv(e,i);break;case 4:t.vertexAttribI4uiv(e,i);break;default:n.i(v.h)(!1)}}}]),e}(c.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(1),a=n(116),o=n(46),s=n(248),u=n(6),l=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,t);var a=r.id||r.program&&r.program.id;this.id=a,this.gl=e,this.configuration=null,this.elements=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=s.a.isSupported(e)?new s.a(e):s.a.getDefaultArray(e),n.i(u.d)(this,"VertexArray","v6.0",["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"]),this.initialize(r),Object.seal(this)}return n.i(r.a)(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}},{key:"reset",value:function(){this.elements=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(t){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,t)}},{key:"setAttributes",value:function(t){var e=this;return this.vertexArrayObject.bind(function(){for(var n in t){var i=t[n];if(i instanceof o.a)e.setBuffer(n,i);else if(Array.isArray(i)&&i.length&&i[0]instanceof o.a){var r=i[0],a=i[1];e.setBuffer(n,r,a)}else{if(!ArrayBuffer.isView(i)&&!Array.isArray(i))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");e.setConstant(n,i)}}e.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(t,e),this}},{key:"setBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e);var i=this._resolveLocationAndAccessor(t,e,e.accessor,n),r=i.location,a=i.accessor;return r>=0&&(this.values[r]=e,this.accessors[r]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(r,e,a)),this}},{key:"setConstant",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._resolveLocationAndAccessor(t,e,n),r=i.location,a=i.accessor;return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e,a),this.values[r]=e,this.accessors[r]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(r,!1)),this}},{key:"unbindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind(function(){t.elements&&t.setElementBuffer(null),t.buffer=t.buffer||new o.a(t.gl,{size:4});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof o.a&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(34962,t.buffer.handle),t.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var t=this;return this.vertexArrayObject.bind(function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var n=t.values[e];n instanceof o.a&&t.setBuffer(e,n)}}),this}},{key:"bindForDraw",value:function(t,e,n){var i,r=this;return this.vertexArrayObject.bind(function(){r._setConstantAttributes(t,e),r.vertexArrayObject.hasVertexArrays||r.bindBuffers(),i=n(),r.vertexArrayObject.hasVertexArrays||r.unbindBuffers()}),i}},{key:"_resolveLocationAndAccessor",value:function(t,e,i,r){var o=this,s=this._getAttributeIndex(t);if(!Number.isFinite(s)||s<0)return this.unused[t]=e,u.a.once(3,function(){return"unused value ".concat(t," in ").concat(o.id)})(),this;var l=this._getAttributeInfo(t),c=a.a.resolve(l.accessor,i,r),f=c.size,d=c.type;return n.i(u.h)(Number.isFinite(f)&&Number.isFinite(d)),{location:s,accessor:c}}},{key:"_getAttributeInfo",value:function(t){return this.configuration&&this.configuration.getAttributeInfo(t)}},{key:"_getAttributeIndex",value:function(t){if(this.configuration)return this.configuration.getAttributeLocation(t);var e=Number(t);return Number.isFinite(e)?e:-1}},{key:"_setConstantAttributes",value:function(t,e){var n=Math.max(0|t,0|e),i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(var r=1;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)i=this.values[r],ArrayBuffer.isView(i)&&this._setConstantAttribute(r,i)}},{key:"_setConstantAttributeZero",value:function(t,e){if(s.a.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);var n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}},{key:"_setConstantAttribute",value:function(t,e){s.a.setConstant(this.gl,t,e),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(t,!1)}},{key:"_updateDrawParams",value:function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elements.accessor.type),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}},{key:"_updateDrawParamsForLocation",value:function(t,e){var n=this.values[e],i=this.accessors[e];if(n){var r=i.divisor,a=r>0;if(t.isInstanced=t.isInstanced||a,n instanceof o.a){var s=n;if(a){var u=s.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,u)}else{var l=s.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}}},{key:"setElements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.a.deprecated("setElements","setElementBuffer"),this.setElementBuffer(t,e)}}]),t}()},function(t,e,n){"use strict";function i(t){return t>=0&&t<6}function r(t){if(t<0&&t>=6)throw new Error(p);return t}n.d(e,"a",function(){return _});var a=n(31),o=n(0),s=n(4),u=n(2),l=n(1),c=n(3),f=n(94),d=n(37),h=n(164),v=n(252),g=n(78),p="Unknown Euler angle order",_=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;if(n.i(o.a)(this,e),t=n.i(s.a)(this,n.i(u.a)(e).call(this)),arguments.length>0&&Array.isArray(arguments[0])){var c;(c=t).fromVector3.apply(c,arguments)}else t.set(i,r,a,l);return t}return n.i(c.a)(e,t),n.i(l.a)(e,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return e.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return e.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),n.i(l.a)(e,[{key:"fromQuaternion",value:function(t){var i=n.i(a.a)(t,4),r=i[0],o=i[1],s=i[2],u=i[3],l=o*o,c=-2*(l+s*s)+1,f=2*(r*o+u*s),d=-2*(r*s-u*o),h=2*(o*s+u*r),v=-2*(r*r+l)+1;return d=d>1?1:d,d=d<-1?-1:d,new e(Math.atan2(h,v),Math.asin(d),Math.atan2(f,c),e.RollPitchYaw)}},{key:"copy",value:function(t){for(var e=0;e<3;++e)this[e]=t[e];return this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=e,this[2]=n,this[3]=Number.isFinite(i)?i:this[3],this.check()}},{key:"validate",value:function(){return i(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(t){return t?t.set(this[0],this[1],this[2]):new g.a(this[0],this[1],this[2])}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,n,i){return this.set(t,n,i,e.ZYX)}},{key:"fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder;return this._fromRotationMatrix(t,n),this.check()}},{key:"getRotationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h.a;return this._getRotationMatrix(t),t}},{key:"getQuaternion",value:function(){var t=new v.a;switch(this[4]){case e.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case e.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case e.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case e.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case e.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case e.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(p)}}},{key:"_fromRotationMatrix",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder,r=t.elements,a=r[0],o=r[4],s=r[8],u=r[1],l=r[5],c=r[9],f=r[2],h=r[6],v=r[10];switch(i=i||this[3]){case e.XYZ:this[1]=Math.asin(n.i(d.b)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-c,v),this[2]=Math.atan2(-o,a)):(this[0]=Math.atan2(h,l),this[2]=0);break;case e.YXZ:this[0]=Math.asin(-n.i(d.b)(c,-1,1)),Math.abs(c)<.99999?(this[1]=Math.atan2(s,v),this[2]=Math.atan2(u,l)):(this[1]=Math.atan2(-f,a),this[2]=0);break;case e.ZXY:this[0]=Math.asin(n.i(d.b)(h,-1,1)),Math.abs(h)<.99999?(this[1]=Math.atan2(-f,v),this[2]=Math.atan2(-o,l)):(this[1]=0,this[2]=Math.atan2(u,a));break;case e.ZYX:this[1]=Math.asin(-n.i(d.b)(f,-1,1)),Math.abs(f)<.99999?(this[0]=Math.atan2(h,v),this[2]=Math.atan2(u,a)):(this[0]=0,this[2]=Math.atan2(-o,l));break;case e.YZX:this[2]=Math.asin(n.i(d.b)(u,-1,1)),Math.abs(u)<.99999?(this[0]=Math.atan2(-c,l),this[1]=Math.atan2(-f,a)):(this[0]=0,this[1]=Math.atan2(s,v));break;case e.XZY:this[2]=Math.asin(-n.i(d.b)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(h,l),this[1]=Math.atan2(s,a)):(this[0]=Math.atan2(-c,v),this[1]=0);break;default:throw new Error(p)}return this[3]=i,this}},{key:"_getRotationMatrix",value:function(){var t=new h.a,n=this.x,i=this.y,r=this.z,a=Math.cos(n),o=Math.cos(i),s=Math.cos(r),u=Math.sin(n),l=Math.sin(i),c=Math.sin(r);switch(this[3]){case e.XYZ:var f=a*s,d=a*c,v=u*s,g=u*c;t[0]=o*s,t[4]=-o*c,t[8]=l,t[1]=d+v*l,t[5]=f-g*l,t[9]=-u*o,t[2]=g-f*l,t[6]=v+d*l,t[10]=a*o;break;case e.YXZ:var _=o*s,m=o*c,y=l*s,b=l*c;t[0]=_+b*u,t[4]=y*u-m,t[8]=a*l,t[1]=a*c,t[5]=a*s,t[9]=-u,t[2]=m*u-y,t[6]=b+_*u,t[10]=a*o;break;case e.ZXY:var E=o*s,A=o*c,x=l*s,T=l*c;t[0]=E-T*u,t[4]=-a*c,t[8]=x+A*u,t[1]=A+x*u,t[5]=a*s,t[9]=T-E*u,t[2]=-a*l,t[6]=u,t[10]=a*o;break;case e.ZYX:var P=a*s,w=a*c,C=u*s,k=u*c;t[0]=o*s,t[4]=C*l-w,t[8]=P*l+k,t[1]=o*c,t[5]=k*l+P,t[9]=w*l-C,t[2]=-l,t[6]=u*o,t[10]=a*o;break;case e.YZX:var S=a*o,R=a*l,M=u*o,L=u*l;t[0]=o*s,t[4]=L-S*c,t[8]=M*c+R,t[1]=c,t[5]=a*s,t[9]=-u*s,t[2]=-l*s,t[6]=R*c+M,t[10]=S-L*c;break;case e.XZY:var I=a*o,O=a*l,F=u*o,N=u*l;t[0]=o*s,t[4]=-c,t[8]=l*s,t[1]=I*c+N,t[5]=a*s,t[9]=O*c-F,t[2]=F*c-O,t[6]=u*s,t[10]=N*c+I;break;default:throw new Error(p)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"toQuaternion",value:function(){var t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),n=Math.cos(.5*this.roll),i=Math.sin(.5*this.roll),r=Math.cos(.5*this.pitch),a=Math.sin(.5*this.pitch),o=t*n*r+e*i*a,s=t*i*r-e*n*a,u=t*n*a+e*i*r,l=e*n*r-t*i*a;return new v.a(s,u,l,o)}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=n.i(d.c)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=n.i(d.c)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=n.i(d.c)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){return this[0]=n.i(d.c)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){return this[1]=n.i(d.c)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){return this[2]=n.i(d.c)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){return this[0]=n.i(d.c)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){return this[1]=n.i(d.c)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){return this[2]=n.i(d.c)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){return this[0]=n.i(d.c)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){return this[1]=n.i(d.c)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){return this[2]=n.i(d.c)(t)}},{key:"order",get:function(){return this[3]},set:function(t){return this[3]=r(t)}}]),e}(f.a)},function(t,e,n){"use strict";function i(t,e){return t.length===e&&t.every(Number.isFinite)}e.a=i},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(94),l=n(37),c=n(407),f=[0,0,0,1],d=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return n.i(i.a)(this,e),t=n.i(a.a)(this,n.i(o.a)(e).call(this)),Array.isArray(r)&&1===arguments.length?t.copy(r):t.set(r,s,u,l),t}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"fromMatrix3",value:function(t){return c.a(this,t),this.check()}},{key:"fromValues",value:function(t,e,n,i){return this.set(t,e,n,i)}},{key:"identity",value:function(){return c.b(this),this.check()}},{key:"length",value:function(){return c.c(this)}},{key:"squaredLength",value:function(t){return c.d(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return c.e(this,t)}},{key:"rotationTo",value:function(t,e){return c.f(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return c.g(this,t),this.check()}},{key:"calculateW",value:function(){return c.h(this,this),this.check()}},{key:"conjugate",value:function(){return c.i(this,this),this.check()}},{key:"invert",value:function(){return c.j(this,this),this.check()}},{key:"lerp",value:function(t,e,n){return c.k(this,t,e,n),this.check()}},{key:"multiply",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.multiply only takes one argument");return c.l(this,this,t),this.check()}},{key:"normalize",value:function(){return c.m(this,this),this.check()}},{key:"rotateX",value:function(t){return c.n(this,this,t),this.check()}},{key:"rotateY",value:function(t){return c.o(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return c.p(this,this,t),this.check()}},{key:"scale",value:function(t){return c.q(this,this,t),this.check()}},{key:"set",value:function(t,e,n,i){return c.r(this,t,e,n,i),this.check()}},{key:"setAxisAngle",value:function(t,e){return c.s(this,t,e),this.check()}},{key:"slerp",value:function(t){var e=t.start,n=void 0===e?f:e,i=t.target,r=t.ratio;return c.t(this,n,i,r),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=n.i(l.c)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=n.i(l.c)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=n.i(l.c)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=n.i(l.c)(t)}}]),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(163),l=n(37),c=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n.i(i.a)(this,e),t=n.i(a.a)(this,n.i(o.a)(e).call(this)),Array.isArray(r)&&1===arguments.length?t.copy(r):t.set(r,s,u,l),t}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"applyMatrix4",value:function(t){return t.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=n.i(l.c)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=n.i(l.c)(t)}}]),e}(u.a)},function(t,e,n){"use strict";var i=(n(477),n(61),n(166),n(167),n(476));n.d(e,"b",function(){return i.a});var r=(n(168),n(475),n(478),n(255));n.d(e,"a",function(){return r.a});n(256),n(482),new r.a({id:"probe.gl"})},function(t,e,n){"use strict";(function(t){function i(){}function r(t){for(var e in t)for(var n in t[e])return n||"untitled";return"empty"}n.d(e,"a",function(){return b});var a=n(43),o=n(64),s=n(18),u=n(0),l=n(1),c=n(61),f=n(481),d=n(258),h=n(257),v=n(256),g=n(480),p=n(479),_={debug:c.d?console.debug||console.log:console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},m={enabled:!1,priority:0},y={},b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.id;n.i(u.a)(this,e),this.id=i,this.VERSION=c.e,this._startTs=n.i(d.a)(),this._deltaTs=n.i(d.a)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new f.a("__probe-".concat(this.id,"__"),m),this.userData={},this.timeStamp("".concat(this.id," started")),n.i(g.a)(this),Object.seal(this)}return n.i(l.a)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number((n.i(d.a)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((n.i(d.a)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:"setLevel",value:function(t){return this._storage.updateConfiguration({priority:t}),this}},{key:"assert",value:function(t,e){n.i(p.a)(t,e)}},{key:"warn",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this._getLogFunction({message:t,args:n,method:_.warn,once:!0})}},{key:"error",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this._getLogFunction({message:t,args:n,method:_.error})}},{key:"deprecated",value:function(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}},{key:"removed",value:function(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}},{key:"probe",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction({priority:t,message:e,args:i,method:_.log,time:!0,once:!0})}},{key:"log",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction({priority:t,message:e,args:i,method:_.debug})}},{key:"info",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction({priority:t,message:e,args:i,method:console.info})}},{key:"once",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this._getLogFunction({priority:t,message:e,args:i,method:_.debug||_.info,once:!0})}},{key:"table",value:function(t,e,n){if(e){var a=r(e);return this._getLogFunction({priority:t,message:e,args:n&&[n],tag:a,method:console.table||i})}return i}},{key:"image",value:function(t){var e=t.priority,n=t.image,r=t.message,a=void 0===r?"":r,o=t.scale,s=void 0===o?1:o;return e>this.getPriority()?i:c.d?this._logImageInBrowser({image:n,message:a,scale:s}):this._logImageInNode({image:n,message:a,scale:s})}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(t){return this._storage.config[t]}},{key:"set",value:function(t,e){this._storage.updateConfiguration(n.i(s.a)({},t,e))}},{key:"_logImageInNode",value:function(e){var n=e.image,r=(e.message,e.scale),a=void 0===r?1:r,o=null;try{o=t.require("asciify-image")}catch(t){}return o?function(){return o(n,{fit:"box",width:"".concat(Math.round(80*a),"%")}).then(function(t){return console.log(t)})}:i}},{key:"_logImageInBrowser",value:function(t){var e=t.image,r=t.message,a=void 0===r?"":r,s=t.scale,u=void 0===s?1:s;if("string"==typeof e){var l=new Image;return l.onload=function(){var t,e=n.i(h.a)(l,a,u);(t=console).log.apply(t,n.i(o.a)(e))},l.src=e,i}var c=e.nodeName||"";if("img"===c.toLowerCase()){var f;return(f=console).log.apply(f,n.i(o.a)(n.i(h.a)(e,a,u))),i}if("canvas"===c.toLowerCase()){var d=new Image;return d.onload=function(){var t;return(t=console).log.apply(t,n.i(o.a)(n.i(h.a)(d,a,u)))},d.src=e.toDataURL(),i}return i}},{key:"time",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(t,e){return this._getLogFunction({priority:t,message:e,method:console.timeStamp||i})}},{key:"group",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};n=this._normalizeArguments({priority:t,message:e,opts:n});var i=n,r=i.collapsed;return this._getLogFunction({priority:t,message:e,opts:n,method:(r?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(t){return this._getLogFunction({priority:t,message:"",method:console.groupEnd||i})}},{key:"withGroup",value:function(t,e,n){var i=this._normalizeArguments({priority:t,message:e});this.group(i);try{n()}finally{this.groupEnd(i.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(t){return 0===(t=this._normalizePriority(t))||this.isEnabled()&&this.getPriority()>=t}},{key:"_getElapsedTime",value:function(){var t=this.getTotal(),e=this.getDelta();return this._deltaTs=n.i(d.a)(),{total:t,delta:e}}},{key:"_getLogFunction",value:function(t){if(this._shouldLog(t.priority)){var e=t,r=e.method;t=this._parseArguments(t),n.i(p.a)(r);var a=t,s=a.message,u=t.tag||t.message;if(t.once){if(y[u])return i;y[u]=n.i(d.a)()}return s=this._decorateMessage(s,t),r.bind.apply(r,[console,s].concat(n.i(o.a)(t.args)))}return i}},{key:"_parseArguments",value:function(t){var e=this._normalizeArguments(t),n=this._getElapsedTime(),i=n.delta,r=n.total;return Object.assign(t,e,{delta:i,total:r})}},{key:"_normalizePriority",value:function(t){var e;switch(n.i(a.a)(t)){case"number":e=t;break;case"object":e=t.priority||0;break;default:e=0}return n.i(p.a)(Number.isFinite(e)&&e>=0),e}},{key:"_normalizeArguments",value:function(t){var e=t.priority,i=t.message,r=t.args,o=void 0===r?[]:r,s=t.opts,u={priority:this._normalizePriority(e),message:i,args:o};switch(n.i(a.a)(e)){case"string":case"function":void 0!==i&&o.unshift(i),Object.assign(u,{message:e});break;case"object":Object.assign(u,e)}return"function"==typeof u.message&&(u.message=this._shouldLog(u.priority)?u.message():""),n.i(p.a)("string"==typeof u.message||"object"===n.i(a.a)(u.message)),Object.assign(u,s)}},{key:"_decorateMessage",value:function(t,e){if("string"==typeof t){var i="";if(e.time){var r=this._getElapsedTime(),a=r.total;i=n.i(h.b)(n.i(h.c)(a))}t=e.time?"".concat(this.id,": ").concat(i,"  ").concat(t):"".concat(this.id,": ").concat(t),t=n.i(v.a)(t,e.color,e.background)}return t}},{key:"priority",set:function(t){return this._storage.updateConfiguration({priority:t}),this},get:function(){return this._storage.config.priority}}]),e}();b.VERSION=c.e}).call(e,n(260)(t))},function(t,e,n){"use strict";function i(t){return"string"==typeof t?o[t.toUpperCase()]||o.WHITE:t}function r(t,e,n){return a.d||"string"!=typeof t||(e&&(e=i(e),t="[".concat(e,"m").concat(t,"[39m")),n&&(e=i(n),t="[".concat(n+10,"m").concat(t,"[49m"))),t}e.a=r;var a=n(61),o={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97}},function(t,e,n){"use strict";function i(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return"".concat(" ".repeat(Math.max(e-t.length,0))).concat(t)}function a(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));var a=t.width*n,o=t.height*n,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),s]}e.c=i,e.b=r,e.a=a},function(t,e,n){"use strict";function i(){if(!r.d){var t=r.f.hrtime();return t[0]+t[1]/1e6}return r.g.performance?r.g.performance.now():Date.now()}e.a=i;var r=n(61);i()},function(t,e,n){(function(t){function i(t,n){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(n)?i.showHidden=n:n&&e._extend(i,n),b(i.showHidden)&&(i.showHidden=!1),b(i.depth)&&(i.depth=2),b(i.colors)&&(i.colors=!1),b(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=r),s(i,t,i.depth)}function r(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function o(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function s(t,n,i){if(t.customInspect&&n&&P(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return m(r)||(r=s(t,r,i)),r}var a=u(t,n);if(a)return a;var v=Object.keys(n),g=o(v);if(t.showHidden&&(v=Object.getOwnPropertyNames(n)),T(n)&&(v.indexOf("message")>=0||v.indexOf("description")>=0))return l(n);if(0===v.length){if(P(n)){var p=n.name?": "+n.name:"";return t.stylize("[Function"+p+"]","special")}if(E(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return l(n)}var _="",y=!1,b=["{","}"];if(h(n)&&(y=!0,b=["[","]"]),P(n)){_=" [Function"+(n.name?": "+n.name:"")+"]"}if(E(n)&&(_=" "+RegExp.prototype.toString.call(n)),x(n)&&(_=" "+Date.prototype.toUTCString.call(n)),T(n)&&(_=" "+l(n)),0===v.length&&(!y||0==n.length))return b[0]+_+b[1];if(i<0)return E(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var A;return A=y?c(t,n,i,g,v):v.map(function(e){return f(t,n,i,g,e,y)}),t.seen.pop(),d(A,_,b)}function u(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return _(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,i,r){for(var a=[],o=0,s=e.length;o<s;++o)R(e,String(o))?a.push(f(t,e,n,i,String(o),!0)):a.push("");return r.forEach(function(r){r.match(/^\d+$/)||a.push(f(t,e,n,i,r,!0))}),a}function f(t,e,n,i,r,a){var o,u,l;if(l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},l.get?u=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(u=t.stylize("[Setter]","special")),R(i,r)||(o="["+r+"]"),u||(t.seen.indexOf(l.value)<0?(u=g(n)?s(t,l.value,null):s(t,l.value,n-1),u.indexOf("\n")>-1&&(u=a?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),b(o)){if(a&&r.match(/^\d+$/))return u;o=JSON.stringify(""+r),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+u}function d(t,e,n){var i=0;return t.reduce(function(t,e){return i++,e.indexOf("\n")>=0&&i++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function h(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function p(t){return null==t}function _(t){return"number"==typeof t}function m(t){return"string"==typeof t}function y(t){return"symbol"==typeof t}function b(t){return void 0===t}function E(t){return A(t)&&"[object RegExp]"===C(t)}function A(t){return"object"==typeof t&&null!==t}function x(t){return A(t)&&"[object Date]"===C(t)}function T(t){return A(t)&&("[object Error]"===C(t)||t instanceof Error)}function P(t){return"function"==typeof t}function w(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function C(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}function S(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function L(e){function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return r.apply(a,arguments)};e.apply(this,n).then(function(e){t.nextTick(o,null,e)},function(e){t.nextTick(M,e,o)})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,I(e)),n}var I=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++)n[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return n},O=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(t).replace(O,function(t){if("%%"===t)return"%";if(n>=a)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<a;s=r[++n])g(s)||!A(s)?o+=" "+s:o+=" "+i(s);return o},e.deprecate=function(n,i){function r(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,i).apply(this,arguments)};var a=!1;return r};var F,N={};e.debuglog=function(n){if(b(F)&&(F=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!N[n])if(new RegExp("\\b"+n+"\\b","i").test(F)){var i=t.pid;N[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,i,t)}}else N[n]=function(){};return N[n]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=v,e.isNull=g,e.isNullOrUndefined=p,e.isNumber=_,e.isString=m,e.isSymbol=y,e.isUndefined=b,e.isRegExp=E,e.isObject=A,e.isDate=x,e.isError=T,e.isFunction=P,e.isPrimitive=w,e.isBuffer=n(484);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",S(),e.format.apply(e,arguments))},e.inherits=n(408),e._extend=function(t,e){if(!e||!A(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t};var B="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){function e(){for(var e,n,i=new Promise(function(t,i){e=t,n=i}),r=[],a=0;a<arguments.length;a++)r.push(arguments[a]);r.push(function(t,i){t?n(t):e(i)});try{t.apply(this,r)}catch(t){n(t)}return i}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(B&&t[B]){var e=t[B];if("function"!=typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,B,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),B&&Object.defineProperty(e,B,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,I(t))},e.promisify.custom=B,e.callbackify=L}).call(e,n(62))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(e){var n={subkey:e.subkey,subpid:e.subpid};return(0,k.checkKey)(e.id,n).then(function(n){if(!n)throw"请传入正确的key";if(!n.data_layer||!n.data_layer.enable)throw"无数据图层权限";var i=y(t,n.data_layer.layers);if(!i)throw"请传入正确的layerId";return a(t,C.default,i,e).then(function(t){return t})}).catch(function(t){return console.error("数据图层鉴权失败："+t),P.default.resolve(null)})}return console.error("数据图层鉴权失败：未绑定地图对象。"),P.default.resolve(null)}function a(t,e,n,i){var r=n+"?key="+e+"&layerid="+t+"&data_ver=&cfg_ver=";return fetch(r).then(function(t){return t.json()}).then(function(t){if(0!==t.info.error)return console.error(t.info.msg),null;var e=t.detail.layerType;switch(e){case"heat":return o(t,i);case"honey":return s(t,i);case"arcline":return u(t,i);default:return console.error("未支持此图层类型："+e),null}}).catch(function(t){console.error("Fetch Error : Unable to send request -S",t)})}function o(t,e){var n=l(t),i=d(t),r=new TMap.visualization.Heat(i).setData(n).addTo(e);return i.hidden&&r.hide(),r}function s(t,e){var n=l(t),i=h(t),r=(0,x.default)(i,2),a=r[0];if("grid"===r[1].shapeType){var o=new TMap.visualization.Grid(a).setData(n).addTo(e);return a.hidden&&o.hide(),o}a.radius=a.sideLength,delete a.sideLength;var s=new TMap.visualization.Hexagon(a).setData(n).addTo(e);return a.hidden&&s.hide(),s}function u(t,e){var n=v(t),i=g(t),r=new TMap.visualization.Arc(i).setData(n).addTo(e);return i.hidden&&r.hide(),r}function l(t){var e=[];return t.detail.data.default.forEach(function(n){var i={};if("Points"===n.type){var r=t.detail.data.default[0].coordinates,a=r.slice(3),o=(0,x.default)(r,3),s=o[0],u=o[1],l=o[2];e.push({lat:s,lng:u,count:l}),a.forEach(function(t,n){if((n+1)%3==1){var r=(s*L+t)/L;s=r,i.lat=r}else if((n+1)%3==2){var a=(u*L+t)/L;u=a,i.lng=a}else{var o=(l*I+t)/I;l=o,i.count=o;var c=JSON.parse((0,E.default)(i));e.push(c)}})}}),e}function c(t,e,n){n.forEach(function(n){t[n[1]]=e[n[0]]})}function f(t){var e=t.detail.styleTable.control.themeName,n=t.detail.styleTable.mapping.rule.default;return t.detail.styleTable.theme[e][n]}function d(t){var e={},n=t.detail.styleTable.control,i=f(t);c(e,n,S),e.radius=i.radius;var r=p(i.gradient.colors),a=m(r,i.gradient.points);e.gradientColor=a;var o={};for(var s in i.animation)o[s]=i.animation[s];return n.animated&&o.duration>0?o.enable=!0:(o.enable=!1,o.duration+=1),o.duration*=1e3,e.toggleAnimation=o,n.enable3D||(e.height=0),e}function h(t){var e={},n=t.detail.styleTable.control,i=f(t);c(e,n,R);var r=[n.minIntensity,n.maxIntensity];e.showRange=r,e.sideLength=i.radius;var a=_(i.gradient.colors,n.opacity);e.colorList=a;var o={},s=void 0;for(s in i.animation)o[s]=i.animation[s];return n.animated&&o.duration>0?o.enable=!0:(o.enable=!1,o.duration+=1),o.duration*=1e3,o.animationType="grow",e.toggleAnimation=o,[e,i]}function v(t){var e=[];return t.detail.data.default.forEach(function(t){var n={from:{},to:{}};if("Line"===t.type){var i=(0,x.default)(t.coordinates,2),r=i[0],a=i[1],o=(0,x.default)(r,2);n.from.lat=o[0],n.from.lng=o[1];var s=(0,x.default)(a,2);n.to.lat=s[0],n.to.lng=s[1],e.push(n)}}),e}function g(t){var e={};e.processAnimation={};var n=t.detail.styleTable.control,i=f(t);c(e,n,M),e.curvature=i.radian,e.processAnimation.duration=1e3*n.animation.duration,n.animated&&n.animation.duration>0?e.processAnimation.enable=!0:(e.processAnimation.enable=!1,e.processAnimation.duration+=1),e.processAnimation.tailFactor=n.animation.highlightDuration,e.mode=n.enable3D?"vertical":"horizontal";var r={};r.width=i.width;var a=_([n.animation.highlightColor],n.opacity),o=(0,x.default)(a,1);r.animateColor=o[0];var s=_(i.gradient.colors,n.opacity);if(s.length<=1){var u=(0,x.default)(s,1);r.color=u[0],!1===e.processAnimation.enable&&(r.animateColor=r.color)}else{var l=m(s,i.gradient.points);if(s.length>2){var d={};d[0]=l[0],d[1]=l[1],r.color=d,!1===e.processAnimation.enable&&(r.animateColor=l[1])}else r.color=l,!1===e.processAnimation.enable&&(r.animateColor=l[1])}return e.pickStyle=function(){return r},e}function p(t){var e=[];return t.forEach(function(t){var n=t.toString(16);n=n.substring(2),n="#"+n,e.push(n)}),e}function _(t,e){var n=[];return t.forEach(function(t){var i=t,r=parseInt(i%256,10);i>>>=8;var a=parseInt(i%256,10);i>>>=8;var o=parseInt(i%256,10);n.push("rgba("+o+", "+a+", "+r+", "+e+")")}),n}function m(t,e){var n=void 0,i={};for(n=0;n<e.length;n++)i[e[n]]=t[n];return i}function y(t,e){if(e){var n=e.find(function(e){return e.layerid===t});if(n){var i=n.url,r=i.split("?");return i=(0,x.default)(r,1)[0]}}}Object.defineProperty(e,"__esModule",{value:!0});var b=n(99),E=i(b),A=n(22),x=i(A),T=n(127),P=i(T);e.createDataLayer=r;var w=n(97),C=i(w),k=n(310),S=[["opacity","opacity"],["maxIntensity","max"],["minIntensity","min"],["zIndex","zIndex"],["displayLevel","displayLevel"],["height","height"],["maxZoom","maxZoom"],["minZoom","minZoom"],["hidden","hidden"]],R=[["heightRange","heightRange"],["enable3D","extrudable"],["zIndex","zIndex"],["displayLevel","displayLevel"],["maxZoom","maxZoom"],["minZoom","minZoom"],["hidden","hidden"]],M=[["zIndex","zIndex"],["displayLevel","displayLevel"],["maxZoom","maxZoom"],["minZoom","minZoom"],["hidden","hidden"]],L=1e6,I=100},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(282);Object.defineProperty(e,"Trail",{enumerable:!0,get:function(){return i.Trail}});var r=n(288);Object.defineProperty(e,"Hexagon",{enumerable:!0,get:function(){return r.Hexagon}});var a=n(287);Object.defineProperty(e,"Grid",{enumerable:!0,get:function(){return a.Grid}});var o=n(289);Object.defineProperty(e,"Heat",{enumerable:!0,get:function(){return o.Heat}});var s=n(284);Object.defineProperty(e,"Arc",{enumerable:!0,get:function(){return s.Arc}});var u=n(278);Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return u.Path}});var l=n(279);Object.defineProperty(e,"Pipe",{enumerable:!0,get:function(){return l.Pipe}});var c=n(277);Object.defineProperty(e,"Dot",{enumerable:!0,get:function(){return c.Dot}});var f=n(276);Object.defineProperty(e,"Area",{enumerable:!0,get:function(){return f.Area}});var d=n(281);Object.defineProperty(e,"Radiation",{enumerable:!0,get:function(){return d.Radiation}});var h=n(283);Object.defineProperty(e,"Wall",{enumerable:!0,get:function(){return h.Wall}});var v=n(280);Object.defineProperty(e,"Prism",{enumerable:!0,get:function(){return v.Prism}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=(0,u.default)(o.default.pr,{logid:"pv",key:t.key||"",v:t.version||"null",lt:t.loadDeltaTime||-1,d:document.domain});(0,l.sendOnce)(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=n(98),o=i(a),s=n(124),u=i(s),l=n(121)},function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=n},function(t,e,n){"use strict";function i(t){if(Array.isArray(t))return t}e.a=i},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}e.a=i},function(t,e,n){"use strict";function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function r(t,e,o){return r=i()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var o=Function.bind.apply(t,r),s=new o;return i&&n.i(a.a)(s,i.prototype),s},r.apply(null,arguments)}e.a=r;var a=n(170)},function(t,e,n){"use strict";function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}e.a=i},function(t,e,n){"use strict";function i(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}e.a=i},function(t,e,n){"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}e.a=i},function(t,e,n){"use strict";function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.a=i},function(t,e,n){"use strict";function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n.i(r.a)(t)););return t}e.a=i;var r=n(2)},function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="TMap"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(11),a=i(r),o=n(95),s=i(o),u=n(263),l=i(u),c=n(262),f=n(261),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(f),h={Arc:c.Arc,Trail:c.Trail,Hexagon:c.Hexagon,Grid:c.Grid,Heat:c.Heat,Path:c.Path,Pipe:c.Pipe,Dot:c.Dot,Area:c.Area,Radiation:c.Radiation,Wall:c.Wall,Prism:c.Prism,createDataLayer:d.createDataLayer};window.Seiya=(0,a.default)(window.Seiya||{},h),window.TMap=window.TMap,window.TMap.visualization=window.Seiya;var v=+new Date,g=s.default.serverConfig,p=g.key,_=g.version,m=g.loadScriptTime;(0,l.default)({key:p,version:_,loadDeltaTime:v-m})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return V(t)&&2===t.length&&t.every(function(t){return X(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.Area=void 0;var a=n(11),o=i(a),s=n(22),u=i(s),l=n(100),c=i(l),f=n(35),d=i(f),h=n(101),v=i(h),g=n(12),p=i(g),_=n(8),m=i(_),y=n(9),b=i(y),E=n(16),A=i(E),x=n(24),T=i(x),P=n(15),w=i(P),C=n(13),k=n(19),S=i(k),R=n(44),M=n(14),L=i(M),I=n(20),O=n(28),F=n(45),N=i(F),D=n(177),B=n(122),U=n(298),G=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(U),j=n(34),z=n(26),W=n(33),H=n(123),V=L.default.isArray,X=L.default.isNumber,Y=L.default.isValidColor,K=L.default.isObject,q=L.default.checkGradientObject,Z=L.default.isUndefined,Q=O.TYPE_ID.AREA,J={fillColor:"rgba(56, 124, 234, 0.7)",strokeColor:"#6799EA",strokeWidth:1,strokeDashArray:[0,0]};e.Area=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,m.default)(this,e),t.typeId=Q,t.validTypes=["toggle"],t.toggleSupportTypes=["fade"],t.processSupportTypes=[];var n=(0,A.default)(this,(e.__proto__||(0,p.default)(e)).call(this,t));return n._enableBloom=t.enableBloom,n.setStyles(t.styles),n}return(0,w.default)(e,t),(0,b.default)(e,[{key:"setStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};if(!K(t))return void new I.BaseTypeError("Area.styles","object",t).error();t=(0,v.default)({default:J},t),this._selectOptions.action&&this._selectOptions.style&&(t.selectedStyle=(0,v.default)({},this._selectOptions.style));var n=!0,i=!1,a=void 0;try{for(var o,s=(0,d.default)((0,c.default)(t));!(n=(o=s.next()).done);n=!0){var l=(0,u.default)(o.value,2),f=l[0],h=l[1],g=h.fillColor,p=void 0===g?J.fillColor:g,_=h.strokeColor,m=void 0===_?J.strokeColor:_,y=h.strokeWidth,b=void 0===y?J.strokeWidth:y,E=h.strokeDashArray,A=void 0===E?J.strokeDashArray:E;Y(p)||q(p,!1).result||(console.error(f+"中得到的fillColor颜色值不合法: ",p),p=J.fillColor),Y(m)||(console.error(f+"中得到的strokeColor颜色值不合法: ",m),m=J.strokeColor),X(b)&&b>=0?b=Math.round(b):(console.error(f+"中得到的strokeWidth宽度值不合法: ",b),b=J.strokeWidth),r(A)?A=A.map(function(t){return Math.round(t)}):(console.error(f+"中得到的strokeDashArray值不合法: ",A),A=J.strokeDashArray),e[f]={fillColor:p,strokeColor:m,strokeWidth:b,strokeDashArray:A}}}catch(t){i=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return this._polygonStyles=e,this.styles=t,this._update(),this}},{key:"_calcTrianglesUV",value:function(){var t=this;if(this._gradientUvMap&&this._gradientUvMap.default){var e=(0,B.getPolygonsBBXList)(this._polygonParseHelper),n=[];this._polygonParseHelper.complexPolygons.forEach(function(i,r){var a=e[r],o=(0,u.default)(a,4),s=o[0],l=o[1],c=o[2],f=o[3],d=l-s,h=f-c,v=t._polygonGeometries[r].styleId,g=t._gradientUvMap[v]?t._gradientUvMap[v].topY:t._gradientUvMap.default.topY,p=t._gradientUvMap[v]?t._gradientUvMap[v].bottomY:t._gradientUvMap.default.bottomY;i.forEach(function(t){t.forEach(function(t){t.forEach(function(t){var e=(t.lng-s)/d,i=(t.lat-c)/h;i=p+(g-p)*i,n.push(e),n.push(i)})})})}),this._triangleUVs=n}}},{key:"_getValidSelectStyle",value:function(t){return t?Z(t.fillColor)||Z(t.strokeColor)||Z(t.strokeWidth)||Z(t.strokeDashArray)?null:Y(t.fillColor)?Y(t.strokeColor)?X(t.strokeWidth)&&t.strokeWidth>=0?r(t.strokeDashArray)?{color:new N.default(t.fillColor).toArray().map(function(t){return 255*t}),strokeColor:new N.default(t.strokeColor).toArray().map(function(t){return 255*t}),strokeWidth:Math.round(t.strokeWidth),strokeDashArray:t.strokeDashArray.map(function(t){return Math.round(t)})}:(console.error("参数错误：SelectOptions.style.strokeDashArray 中的值不合法：",t.strokeDashArray),null):(console.error("参数错误：SelectOptions.style.strokeWidth 中的值不合法：",t.strokeWidth),null):(console.error("参数错误：SelectOptions.style.strokeColor 中的值不合法：",t.strokeColor),null):(console.error("参数错误：SelectOptions.style.fillColor 中的值不合法：",t.fillColor),null):null}},{key:"setData",value:function(t){if(!V(t))return new I.BaseTypeError("Area.data","array",t).error(),this;this._originData=(0,W.clone)(t);var n=(0,D.parsePolygonData)(t);return this._polygonGeometries=n.polygonGeometries,this._polygonParseHelper=n.polygonParseHelper,(0,T.default)(e.prototype.__proto__||(0,p.default)(e.prototype),"setData",this).call(this,t)}},{key:"getData",value:function(){return this._originData}},{key:"_update",value:function(){if((0,T.default)(e.prototype.__proto__||(0,p.default)(e.prototype),"_update",this).call(this),this._isReady()){var t=(0,H.getColorsList)(this.styles,"fillColor",J.fillColor,!1),n=(0,H.genGradientTexture)(t,this.gl);this._gradientUvMap=n.gradientUvMap,this._gradientTexture=n.gradientTexture,this._calcTrianglesUV(),this.geometry=this._getGeometry(),this._updateModel()}}},{key:"_updateModel",value:function(){this._isReady()&&(this._model&&this._model.delete(),this._model=this._getModel(this.gl),this.redraw())}},{key:"_getGeometry",value:function(){if(!this._isReady())return null;if(!this._triangleUVs)return null;this._polygonParseHelper.updatePositions({fp64:!0});var t=this._polygonParseHelper.getPositions(),e=this._polygonParseHelper.getIndices(),n=this._polygonParseHelper.getPositions64xyLow(),i=this._polygonParseHelper.getPickingColors(),r=new Float32Array(2*this._polygonParseHelper.pointCount);this._triangleUVs.forEach(function(t,e){r[e]=t});var a=new C.Geometry({drawMode:S.default.TRIANGLES,attributes:{positions:{size:3,value:t},positions64xyLow:{size:2,value:n},pickingColors:{size:3,value:i},texCoords:{size:2,value:r},indices:e}}),o=new Int8Array([-1,1,-1,-1,1,1,1,-1]);return{triangles:a,lines:new C.Geometry({drawMode:S.default.TRIANGLE_STRIP,attributes:{positions:{size:2,value:o},texCoords:{size:2,value:new Float32Array([0,1,0,0,1,1,1,0])}},vertexCount:4})}}},{key:"_getModel",value:function(t){var e=this;if(!this._isReady())return null;if(!this._triangleUVs)return null;var n=function(t){var n=e._polygonStyles[t.styleId]||J,i=n.strokeColor,r=void 0===i?J.strokeColor:i,a=n.strokeWidth,o=void 0===a?J.strokeWidth:a,s=n.strokeDashArray,u=void 0===s?J.strokeDashArray:s;return{strokeColor:new N.default(r).toArray().map(function(t){return 255*t}),strokeWidth:Math.round(o),strokeDashArray:u.map(function(t){return Math.round(t)})}},i=G.areaVertex,r=G.areaFragment,a=new C.Model(t,{id:Q+this.id,vs:t.isWebGL2?(0,j.transferVertexShader)(i):i,fs:t.isWebGL2?(0,j.transferFragmentShader)(r):r,geometry:this.geometry.triangles,shaderCache:this._shaderCache}),o=this._getLinesModel(t,n);return{triangles:a,lines:o,render:function(t){a.render(t),o.render(t)},delete:function(){a.delete(),o.delete()}}}},{key:"_getLinesModel",value:function(t,e){var n=this,i=0;this._polygonParseHelper.complexPolygons.forEach(function(t){t.forEach(function(t){t.forEach(function(t){i+=t.length-1})})});var r=new Float32Array(4*i),a=new Float32Array(4*i),o=new Uint8ClampedArray(4*i),s=new Uint8ClampedArray(3*i),u=new Float32Array(i),l=new Float32Array(2*i),c=-1;this._polygonParseHelper.complexPolygons.forEach(function(t,i){var f=e(n._polygonGeometries[i]),d=n._encodePickingColor(i),h=void 0;t.forEach(function(t){t.forEach(function(t){t.forEach(function(t,e){if(e>0){c+=1;var n=h,i=t,v=(0,z.splitLatLngNumber)(n.lng),g=(0,z.splitLatLngNumber)(n.lat),p=(0,z.splitLatLngNumber)(i.lng),_=(0,z.splitLatLngNumber)(i.lat);r.set([v.high,g.high,v.low,g.low],4*c),a.set([p.high,_.high,p.low,_.low],4*c),o.set(f.strokeColor,4*c),s.set(d,3*c),u[c]=f.strokeWidth,l.set(f.strokeDashArray,2*c)}h=t})})})});var f=new C._Attribute(this.gl,{size:4,isInstanced:!0,value:r}),d=new C._Attribute(this.gl,{size:4,isInstanced:!0,value:a}),h=new C._Attribute(this.gl,{size:4,isInstanced:!0,value:o}),v=new C._Attribute(this.gl,{size:3,isInstanced:!0,value:s}),g=new C._Attribute(this.gl,{size:1,isInstanced:!0,value:u}),p=new C._Attribute(this.gl,{size:2,isInstanced:!0,value:l}),_=G.linesVertex,m=G.linesFragment,y=new C.Model(t,{id:Q+"lines"+this.id,vs:t.isWebGL2?(0,j.transferVertexShader)(_):_,fs:t.isWebGL2?(0,j.transferFragmentShader)(m):m,geometry:this.geometry.lines,isInstanced:!0,instanceCount:i,shaderCache:this._shaderCache});return y.setAttributes({instancePositionStart:f,instancePositionEnd:d,instanceColor:h,instancePickingColor:v,instanceWidth:g,instanceStrokeDash:p}),y}},{key:"_getUniforms",value:function(){var t={uGradientTexture:this._gradientTexture};return this._selectOptions&&(t.uSelectColor=this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.color):new Uint8ClampedArray([255,255,255,255]),t.uStrokeColor=this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.strokeColor):new Uint8ClampedArray([0,0,0,255]),t.uStrokeWidth=this._selectOptions.style?this._selectOptions.style.strokeWidth:0,t.uStrokeDashArray=this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.strokeDashArray):new Uint8ClampedArray([0,0])),(0,o.default)({uEnableBloom:this._enableBloom},t,this._getPickingUniforms())}}]),e}(R.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){switch(t.type){case at.IMAGE:return o(t);case at.CIRCLE:default:return a(t)}}function a(t){var e=(0,S.default)({},et,t);return q(e.fillColor)||$(e.fillColor,!1).result||(console.error("CircleDotStyle.fillColor不合法: ",e.fillColor),e.fillColor=et.fillColor),q(e.strokeColor)||(console.error("CircleDotStyle.fillColor不合法: ",e.strokeColor),e.strokeColor=et.strokeColor),V(e.strokeWidth)||(new U.BaseTypeError("CircleDotStyle.strokeWidth","number",e.strokeWidth).error(),e.strokeWidth=et.strokeWidth),e.strokeWidth<0&&(console.error("参数错误：CircleDotStyle.strokeWidth 应大于或等于 0。"),e.strokeWidth=et.strokeWidth),V(e.radius)||(new U.BaseTypeError("CircleDotStyle.radius","number",e.radius).error(),e.radius=et.radius),e.radius<0&&(console.error("参数错误：CircleDotStyle.radius 应大于或等于 0。"),e.radius=et.radius),e}function o(t){var e=(0,S.default)({},nt,t);return V(e.width)||(new U.BaseTypeError("ImageDotStyle.width","number",e.width).error(),e.width=nt.width),e.width<0&&(console.error("参数错误：ImageDotStyle.width 应大于或等于 0。"),e.width=nt.width),V(e.height)||(new U.BaseTypeError("ImageDotStyle.height","number",e.height).error(),e.height=nt.height),e.height<0&&(console.error("参数错误：ImageDotStyle.height 应大于或等于 0。"),e.height=nt.height),X(e.src)||(new U.BaseTypeError("ImageDotStyle.src","string",e.src).error(),e.src=nt.src),e.anchor||(e.anchor={x:e.width/2,y:e.height/2}),Z(e.anchor)&&V(e.anchor.x)&&V(e.anchor.y)||(console.error("ImageDotStyle.anchor 参数类型错误: ",e.anchor),e.anchor={x:e.width/2,y:e.height/2}),e._offset={x:Math.round(e.width/2-e.anchor.x),y:Math.round(e.anchor.y-e.height/2)},e}function s(t){new U.DeprecatedError("DotOptions.animation","DotOptions.processAnimation").warn(),Z(t)||(new U.BaseTypeError("DotOptions.animation","object",t).error(),t={});var e=t,n=e.type,i=void 0===n?ot:n,r=e.enableFade,a=void 0===r?ut:r,o=e.amplitude,s=void 0===o?lt:o,u=t,l=u.playRate,c=void 0===l?st:l;return V(c)?J(c)||(console.error("参数错误：DotAnimationOptions.playRate 应该是 正数 ，实际却是 "+c),c=st):(new U.BaseTypeError("DotAnimationOptions.playRate","number",c).error(),c=st),{animationType:i,duration:1e3/c,beatingAmplitude:s,enableFade:a}}Object.defineProperty(e,"__esModule",{value:!0}),e.Dot=void 0;var u=n(181),l=i(u),c=n(180),f=i(c),d=n(21),h=i(d),v=n(22),g=i(v),p=n(12),_=i(p),m=n(8),y=i(m),b=n(9),E=i(b),A=n(16),x=i(A),T=n(24),P=i(T),w=n(15),C=i(w),k=n(11),S=i(k),R=function(){var t=(0,f.default)(l.default.mark(function t(e,n){var i,r,a,o,s,u,c,f,d,h,v,g,p,_,m;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=it*rt,r=it*rt,a=rt,e.clearRect(0,0,i,r),o=0,s=0,u=0,t.t0=l.default.keys(n);case 8:if((t.t1=t.t0()).done){t.next=50;break}if(c=t.t1.value,f=n[c]){t.next=13;break}return t.abrupt("continue",8);case 13:if(d=a*Math.round(f.width||2*(f.radius+f.strokeWidth)||0),h=a*Math.round(f.height||2*(f.radius+f.strokeWidth)||0),o+d>i&&(o=0,s+=u,u=0),!(s+h>r||o+d>i)){t.next=18;break}throw Error("Dot: 样式纹理大小超出空间。");case 18:f.x=o,f.y=s,f.w=d/a,f.h=h/a,t.t2=f.type,t.next="image"===t.t2?25:32;break;case 25:return t.next=27,(0,M.loadImage)(f.src);case 27:return v=t.sent,e.drawImage(v,o,s,d,h),o+=d,u=Math.max(u,h),t.abrupt("break",48);case 32:if(g=d/2,e.save(),p=$(f.fillColor,!1),q(f.fillColor))e.fillStyle=f.fillColor;else if(p.result){_=e.createRadialGradient(g,g,0,g,g,g);for(m in f.fillColor.stops)_.addColorStop(m,f.fillColor.stops[m]);e.fillStyle=_}else console.error("pickStyle得到的color颜色值不合法: ",f.fillColor);e.fillStyle=f.fillColor,e.strokeStyle=f.strokeColor,e.lineWidth=f.strokeWidth,e.translate(o,s),e.beginPath(),e.arc(g,g,a*f.radius,0,2*Math.PI),e.closePath(),e.fill(),f.strokeWidth&&e.stroke(),e.restore(),o+=2*g,u=Math.max(u,2*g);case 48:t.next=8;break;case 50:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),M=n(13),L=n(19),I=i(L),O=n(44),F=n(299),N=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(F),D=n(14),B=i(D),U=n(20),G=n(26),j=n(28),z=n(54),W=n(34),H=n(33),V=B.default.isNumber,X=B.default.isString,Y=B.default.isArray,K=B.default.isValidLatLng,q=B.default.isValidColor,Z=B.default.isObject,Q=B.default.isBoolean,J=B.default.isPositiveNumber,$=B.default.checkGradientObject,tt=j.TYPE_ID.DOT,et={type:"circle",fillColor:"rgba(56, 124, 234, 0.75)",strokeColor:"rgba(0, 0, 255, 0.8)",strokeWidth:0,radius:4,_offset:{x:0,y:0}},nt={type:"image",width:10,height:10,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAhnUlEQVR42u1dCZwU5ZVvFA/wiJIIHoOMMEwfMEdPdVfVVz1AM0d3fdUk2Zg1idkcG03WuMlustkYdXVjDt3duDk3HknWqImbVTHxRBCYngEVOYJyrgIDM9PdVdUjeAYVNWrvez0zBpFjgKquo9//9/t+A6PMUd/717vfCwQIBAKBQCAQCIeBUiAwZnMkcvyuRPCUZ9ulSXkuTBtIyy26ytqLmvyJgqr8Q4HL39K58gWdyx82MkwpcilipOKTCywyYa0gjO9JBsbSkyQQ7CHosX1lYirTBngsqnOxDch5gaGxrxiZxLcNTfmOmWHXGRnlh3Bu0jXlt6am3A+EfRT+29NwnoPzKpwc/Ju18N8Xw8e7Dc5ugc/9rJhR/gNI/T348zW6xi7LI9E1Nk9XFZYDoutcqhlMNZ6ELwq6DQJhFNgcCRw/2B6bWlDl8w0OJM2wnwPBboOP9wI5lwEBNwFBd8Kf3zEziZJVB77uq0DeAZ2zNfCSWASa+05TY7+Az/17Ps2+Clpb0dtDHwQyH0O3RCDshcHGSScV0/EZOVX+PGrVIpdvhY8brSToUZGbK8+ZXHkESP5jg8uXG1xK7eqMnk3mN6Fqfddca8PpoNlEI82+oqfla3VNvhtNXbeQ9iCa+g3QzCsMTb4RtPW/gjn+V2gxlOrqTqCbJfjan+1Pxs8spqW5oNEuBwL8AMzgh4C0L7mdtAcntLKhwJVbDVW+ZlCVPoWWxM7kGSeT30zwBbYkgqdg8AlNTzBDfwraa7mXCXsIMm+H3/MuXZW/n+fSRf1JIbRWEI4jKSB4DgVWM05XRQYm5vcwKuxX0h7E1C5iVLygSp8x26JTShcEjiWpILgemJft74w3m6p8FfiIC6uNuPvRyr3wErs538k+hi7ENRTFJrjSx00mxxpzE0Ezzb4GxL2n2on7/kg222Coyo9MlaWxiCRAPjLBFcQF07APTERdk/9W54nfGFx5jQh7UNN6lcnl64qczdmSSJxCEkRwKqp8TH8ycmYhLX0czMQbgbgGEfSwTo+hSVcWOgXJEM4aTxJFqBRxxxTSkQlA2BRok+uxZJHIeMT+8ZvwDBfqqvL3+ZQys5dTLplgI4x5wnhDlVrBn/tu2RQkElpzsGaby3eZmvTZ/mRzLZVrEixHuXJKFS8EzdtFpLONyDldk2/ECjWM5pPUEY4amPbQeWNNUWXfBJNvMxGtAqZ1hj2AxS/YCUUSSDhyfzeZHIttdUDcHxla4kUiVyVJrHRhgPCl1tbTSRIJh43+ZO2JhU5ZAvLeSoRyzKReY6riJfnO6NkkkYRRA+uXC1zmBk/cS0Ry+PByJdf3jJQQmh+gckzCoSLNSeFD2Jerc/YYEcg16aaXgMS/wdryXmpbJOwP+HbPtcem6qp0NdbvEnHcSOTEQqNTSqGFRBJL+EuwShCOG+xgDUVeHl/zOpHFvac874vLn9wKlhJJLiFQYGwcCEQCfK07iCCeSTOtL6jyP+7oEM6lwQHV7O8KwvhcWu7QNWUBEcNjmlhjeTj/hhM7SZKrEFjpY6bFWViLS4TwKomVXThPDPuMSaKrLGDVlxKbQAj+h4jg+Qj1FpPLXwZz+gMk2dUQsAKfKd8mTDO4chMRwC8FH2yVqcrnP8FqxpGE+xzbU40TcYIivLnfIuH308SPcunlXJpV7WPgDiE9LX3BzLA+Eno/HvaAwWNRikz7EFjbXFQlDTTviioI7pQKnJUGVLnUn5ZLOfiIf8fPw+/v8wEBym39qlxLEu8j4GxiLMPDxV9+JuuOlFTq7RRLWzpipU1tQunJOc2lNbOaSuuTzaWn4e9b4fO9nfFSH/x/7yW1r9JLJm6M0NvFD5Lk+wDYz5tLx2cYnN3uce1SAsEsky63D1k3D5P1cWVmqUeOHPQsg7OqtRFIHR0mdbz8dfrT+5Da2yWXmwsqu3hzMnIyMcDjMDqEc03OfuJFsuaBUANArB0psbQNNOeW9ljp/4B0TwFZV4yCrKM9SOrVI6SG74Hfa3vK26Q2MsoTeorNK9FkD+8Ch88VVOkKEL7dXiEuEqZ3mKyb21pKT85uKj3OZlhG1tGe5cOk3rAXqdH0RjJ7xY8GTbzU6JQTNGPLg8BxLCaX/8b0wNTIEY2Lmha1YKXJOtqzMtFQJvOA6h0Sw/3fN9Ahh4kR3irWOMZMKbOBFD1e0brPADGsNIvtPOvAhMeXjRe0cXlxOZd+sotaEL2DIo+eAeS9zgtaF83SDXOjniDue7Rx64g2lt1PYq6s1tNiJkD5YfcD65wxeGHwxHo3kxcDVFs64qUnPKJ1D6yNo57Qxrqq/FYXKbXkeuhJqQY0209drXXTqHVbPE3cvc/qWY2lZzpiZVfArSTGReQ4CIC2I7rZ900Gxhoqu1DXlH73at1YaWVipm/I+35tjJFqlxaHaMpdNOHS1WmjljqDs1vcqnU3etDXPWxt3NpYToHlXBiphp9nm8mVL5VouqX7gA36ubT8ZbikF10VYQbyYgnjqtYG35N374PpMHxpua4ARFPuy3OBpni4TvtqrAEIc5ebtG5/2psRZit9YyzVdJM2hp9D11V2WYnaDt2D8hYFVbrCNb4ukHcbCO7qKtO6o9HGLrmjRYUOoYGY4xKYmhgzNPagWwJVm3wUYbbqrAFtjPXVbtDEuOeqwOX/oA2IbvB9k5GTsX3MLa19WzvjRNgDHOyYQrfCFea0xpZhiykxyFmMyaeU2SAQWTdoX2yeX9naSGQ9yNnU1lIu+nBF8z9nt/TX1p5INHIILyabTzO5cq1bTOcNZDof8qxIzCx3NrnDlFZWGmm5g5jklO+bZmp5BSWZzt4ypWe7yZRO/G6tcNZ4YlOFgVvqTC7/ixu0L0ZYV7ov4vznbin8Uo8Ufg7Oq3DecZUpPdc1pnTW6GBRYlSFMZASz9O58is3tAKuTzprOnfL4beArC/3SJHBbimShz/3w1mVFcPfz8aDl3aJwd91i+Et8LmBbilkIKnh42vw8W2nfmYc/4M5Yue1sJKDF8nXiVEVBnYcgfn8lNOmM5YNOkDYPwEZd/bIYb1bjuSyUvjJpWL42iXN9drD0fOmLAwE9rdDd8yChg+cnhXqWpYI9V/siofvAhJvzUqhPJDbhK/3PJw9lST12tlNZevFaRLrYEYvpL3DlQPWshYzyuVOa98dIHwrEhUyncEEBqK9AiTTu6TQvy2J1WuLmmtr/2v/ZB11FH9+5NQJi1umCcvi9V/KxkO/h+9TQPO7UiTG+nCnTWks7NjRLtYTsyqEncn4mfDQf+a06bxhTrRi5M2KoV3d8dAv76s97TQ7n+0jLaF58JJYC9p9TyX85seUGeUOLSe1sKGxrTqXvkDMqpj5LLbhomffm86odcFXBUIZXbHzOiv1fB8JTzmrJx68o0cMFyuhjcumdMpZU1rX2O/mU5dSZYo3DO6c+Vw2nUHYbJ9fhdoPg01i6Pb5NadOcOJBL40FPwpm+1Pwc7xutzbemHQ4Kq0lHiy0NZ1D9LIZudaG0wsqu97ZqHPUbl8XCBPSl8Smak4/7yXRyWd3x4Lz4WfahdFu20xpNqM82M8pLWxwtt5U2ceIYTaj0ClLYD4/7JTp/IydpnNZy4VfWBoP3flg/SkfcpPVA/73+VkpvA7M+Tfs0sZ/dDAqbWSUN7C0khhmM+AhfxWI9CcntC920zyuzLDR3w0PZuOhD7v12S+Onz05Gw/eDz/na3a9xDY4WeChKffp7SEafGcXhjuPrnOg/azclL4u2WwneZ/PCqGU2+9gYd2EU+HnXWqXOf2og6Y0KIfVOhfbiGk2YTClzDRUdrcT2ndbh2in6fx6Vgx7xnxbLE+XMNXUbVPRBw6Ox1hD5c3oxIuGxq4nptmVPlLlz4MGzlfc9+U2+r6ofeWw0WNzftdqdInBq8AnLto1igcj/Q71Cf9hsHHSScQ2y023wAngG33XiUvFETkb7WgVHDKdn1vcEvSc2Tb/jMDJPVJocY8NpjRGpLG4wxECc+XRfKcYI8ZZDGxeMDLs105cKjbq40gYG2qaX8vGgzd59U6WiMFYjxxaY0dUGnceOxSNNgoqu4IYZ7X5PE9s0sG8ccL/xXWfy+xJGekPfCjg6aVbWTF4WdkF8EmNNNz3HuxyI8ZZjKIqJ0ED9zgTwIrbUKwR2rmspX6W1+/lwbMC47NSaInVWvgphwJZw1mHu4lxFsPUpI/Dm3GzEwGsp60OYEmRV3riwZ/45W6WNE9vxv5jK0nsZCALXtr30Nxoq01orlyqa8ouJwJYG6wsnRxqUNAXTwr4KtK5JBb8OvxeeSvzwfjiNJwh8H2DjY0UibY2haRcZWrKOxUPYKkYwGqyUvu+uFSq/3u/3c9iZdrEbimStTyQ5QyBF2xPNU4k1lmEUiAwxqnZz1g+aXEAa7ArXh/32x1dEwiMBTN6obWBrBZHtjkYGluab6P9SZYBJ+gbnH3PqQi0tRHWsP5IpGaCH+8pK4ZuAy38qtcrskyNPZZX43FinkXYlQieYnDlB37oPsKhc/ArjfHjPYFl8UXwg3dYG8gSneg6e6qgShoxzyL0tc+cBBr4596vwArv6ZJCv/frPT0Sqxe7xdBqqxsbnNgjDHd/ETHPIuA+V3iotzlTgdVkpQZ+IStO/7Jf72lx47SJ2Klk7SqWygeyQNYGMeZCzLMIoH2jcO7zfABLihS7mqf61rfCQFZWCi/weiALq7Goud/SFBJrNzVlWcUrsCwOYKH/e2/oHF83jGfF8H93Y6GKhRVZA5UOZGnKO1SNZSWBNfkTQKjNng9gyeEB+HWO8fNddQnBi8EP3m5ZIKt1aK+wA37w73sCVI1llQn9VSNT2SqsoQqsFivJu6dbDPv+rY4uQrms0uKKLAci0ffvTEZOJvZZALNcxKG8XdkAllROY1hH4MjzXbHQJX6/q8WNkyYCgZd4PpCVUR7uT8bPJPZZoYE15ZpKv4GxkP5xK2c/S5HBrFCX8vtdza+pGddjcSALNxlWvDdYUxbn2humEvssQDGT+HalCYyBE9wYYGUNdDZe7/tG8cXxaZO7pVDW6wRGDZxPRM8m9lniAyvfgvNapX3gTVYWcUiRN7NS8FHf+8BCcC6Y0E9auYZ0S0fciZ7gBzezyARinwUoaOwSQ2Omp6PQuKBMCvf9MhA4ztcEFkPfwHSZVc9tjUN9wdhSaMwTxhP7rNDAqvIpM6M84/U8MK7uxFUlfr6rrBS6x8qFaOvmRMszuZ1II60V/P2yrRj0tJIBn2R15QNZ1m5i6JYjz3pxAuVocVtt4EQwnx/2R0uhck/Ap00nlTehOZujcyXr/UBW+CWcp+zXe3pQmHouuAk9no9ADwWx5hPzLIKZkgQg8QNe70YCDfznbin0uG/NZ3FaW7ccfsqq54UrXLc6EsBS3sDmGWKeRRjokMOGxv7X84u8hwa59/s1kJWNh76Jfr7V2wodWbHCE/9JzLMI/apca/DKD3W3YyIHzlB+qKnGl4ukMYDVbWUAKxkt5ZyYDZ1RDIOGu1tI4GT8zKLGbnBiJpbVFVmggXcuiU9t99sd9dQGTuyRQ4us9n8dCmBtL3DlS8Q8i7BWEMabDqwVfTeQZWlTf/jlbDx4te+0r1A3DV5Oj1o7ldKhAJbGVuXT4ixinkXAqZSmplztBIELVldk4TIwMbRlcWzaTL/cz/xA4HgcaNdjYR/w4w4FsIYJvKg32VhDzLM0lST/DbyNe50JZFk9mbIcjX7itkDgRF9o39j0C0H7brXyGeEoIycCWCMrRnt53QnEOguRTzPRyCgL/DFathzM+tNSsf6fPO/7tkyrWyaFFwKB37B0yXcyWk7jOVAD/ToGTIlxVmvgtqZzwLS52ZFAFmiCxxMzrZ4P/RZqrUVSsNGrd7IwEDihZ2gW9CtWv+AcDGD1g//7VWKc1QRmNeOKmvJ9xwJZs5ss18JDpnR45S/PCniyaD4bq/8suALbbXguzu0H1pSVJgWw7IHJE//iVCBr81zBDgKXNxV2icHLvXYXi2LnBeHls9hq09nJCqyRPmC09ohtdmhhjX3asUBWR9wWAgMB3kYttjRWF/WM34tNC2L4N3aYzuUKLAcDWOXVonUUwLIpkBUTwQ92JJC1vVMsLbdDAw+b0uBLrvitR1aOLpWCF2WlcL9Nz6K0PtniUABL2WNy9ktiml0E7oyebWiJG/yRD35fVPq14U4lV4+dXd4yPdwjh7vsMJ3xrGptLPXCy9IJ/9dE6y4tUwWWXVgbCBzn1JpRFCicVGlTMGvIlJbDRlYMzr9/5tmT3fbssVijW5z+6fLESSmy245nsJzNKAevCk6QdyiFtBQbZ4hpNkLPiBkwo9c6ReJtoB1wVrE9Aa1yt9KerBR5bGl8+vkBlzSULxQmT+sWQ7eXI85S+HW7rJCn5kQrv4XhvRVYdy8k/9debJ8dn2xw5SanLrlsSrfZZ0rvFdjaAn7mHUuCzo3gwbbHZWLwAizUAOLutvN3Xu2k6TzSwKCyS4hhlTCjVeUq597S9prS+wzBexXOo9lo3UcqHmlurq1dJoVuhRfJ1m4bte7I9oX/Q9OZK45pX5wDbaixIDGsEukkLnN44GucumzdblN6XyKL4afBN76la+bESXY/2/KGwZb6j2XF0AK7ta6jC8zen/+9k8znShF4qKzyBicvvFzcYbMpvQ+Jd4MfumxJrF7D7QdWP9MLAoFjl0amntsdD90K5H2mx2atu+/yMqdM52Grqpf6fyuIEmgJIPCVjr6xy6a0bL8pvQ+Re+Twph6sgJIjC7Px0BU9sekdi5pDtT+uCYw7HLJ2hc754NKmumhPPPgZIOzN8DUfgrPcruKMAy8uExyped7nLhcVOqXpxKwKwlRZ2uCVHzW7rymNgZfHKmFKH2A8DxBuPfioy3EaBhDxoS4hePlSIHU2et4UrJiaD2SdHzl1Qnf0vKblQujTXfHQDaDJH+wWy7ncVeBjb4OPL2PgrNI//7pkcynntOmsKe/oXLljcyRyPLGqwkUd4Af/zMnLr7gpPbo0lA5a+ikc71qe0QyaFTT1EiD3EzhIAD73khNkfZ/pPMt503mYwNsKKruYGFXpKCmY0XnOLjIyiu60KW1jt5Ivz8jOX507S97y/XH2gDE7PpkY5QD6U0IIzNjfOi4EI6a0MoMIOqpaZ+dN55HeX1wej24GsckBoN8CvvDfgSn9rDtMaYEI6hHTeZjAD+W5MI2Y5KQvnIrNNLh8pxu0MJrST5IpfcCDwT7c+Ki7gLxmRsnl0/I3SqR9nQUOHzM09hXQwi+4gcTYdmjlHGlfmc4ObRrcv++rPGyAC0YMcgH0lNikc+X3bhCMoeb/WNlUJNL+JWi1bk5zuUnfFaZzRtHBavtWKRkYS+xxQzArWXuiydnXDC2x23nhGCIxbnRYn4ySz9vaWHq6LVZ2LwxXmM7l+1mErhcxx02FHSlJMB3YYHgwcxojrSi8KMTVp3UjZa2LAasCd4fZPNy0UDRV5Soq3HAZyutXVPmf4IJedQ2JMTqNfjEIMQpzVWnddsFVWnfvrqOBNrmFGONCGJxFTZ6411UCs5c2xjTTKh9r4+XDnUX4wtLdRtwh8m4z0/KXe6nryL2+cC7FPgck7nMfiRPlyqNe1MY+9I1R62JPryu17l4TN3TaeeRyEqvNtYYm3+hGAdo7X7x5bktpVaLBH1p3dnO5Eq3A3Unc4bO+qLILSi4ZU0Q4ALAszkhJnUCUFW4msc5ZWeixI8er5EV3AN2CgbR7te7w837J4PIPc60NpxNDPGFKN5+mp+VvGC4o7hiNNsZxtSs9pI2XwXlyWOvq7ta6I0UbXboqMmKGh5BLx2eAz/O/rheud7VxvBwAcr3WhRcNvnD6XVKUMZpZz3pKvrREaSNvAfN8Opf+Ws8oz7heyEa0cXpIG/9xVmPpcRd1NmElFZrLGHzbBi8aTI0ZHnim5cOVO/vaolOIER4EELgGiPEj0yPCNqKNseRwa0es7F8iodfNiVaM1FiAgWRFa2AjEBaDbdiAgNHznCp7Q+v+ZVH3hmJK/iQFrjwKuLhjcmm5A0zpVZ4Ruv0QGonTBwRCUmOqZhMcLNPEIQIrjqJxAiPIK1sbylHkDfD1NpXJKpTzuGgNYAWVpwj73mf3Cjy7nz7THvogMcHLvnBrw+m6plztRSE8GLHz72rq+JCmbmspk/qPByD18nLUuKHc7jhC1qfh32H31AhZdS+ZxoduF3x0QGXtxAA/mNIdkox7b/xE4v11Qe1L6o1A0pEzRNY4kFXyIVn3NZ0TpqGyKzY0Np5E0u8DGIIw3uDSRSZ3fnJHpUk9cowq+r1xzhW4HE0k+X4isRoLwsXeXk0ErsZj8KEVoWsF4TiSej8FtOBC82npo15JK9E54rTRHUaHcC5JvA+Bs6QLKrueBN2n2ldTNhqUNvJ3WqmQlubqnK0mgfedv7+7oEnXF9KRCSTpPsaLWCetsstMTfkzCb6PCMzZsgF4OZOEV4MprcbjhsaWkuD75hjwUv7mhhSljaoCOH4HTOnPAomLJPx+MJ/ZHwodQgNJdhVhZ5rVGRnl10QAzweueg3OLiolkzQitsq08HF6WsyAL/w0EcHTed9fGylaTladWjgZP1Pn8nVEBK+WTCobaUxOFeOaQOCYfFqcpWvKGiKE50znl02uXFtIM0obVTNw/E6BS18DgXidiOEpAmcLnM0hCSYEBngsClp4MRHDI+TNKAaQ9+vGPGE8SS8hUGA144pc/qShMZMI4gnf9y6ceUaSS3gXufbYVPCpfkUEcX/aSFfFz/cEaLMgYS/gqkmDSykgMXUruXfKxttgJd3cy2m7AmE/GEwpE+EN/x0iimsbFjYVNOnjJKmE/WvhQGAMDgA3NbaWCOPG7Qrs27RdgXBQ9HLp1DyXLwVz7TUijqvqnZfkVKmVJJRwSOD29gJnjxBx3JM2MjTpK5gtIOkkHBK4prSQlj4OJhulldyhfX9nZuQwSSZh1DC16BQQnF8QgRzP+W43VekzpUDgWJJKwqjRkwyM1bnYZmiJrUQkx8j7Fm5XwFlmJJGEww9ozYqekU9L/0pkciryzDYYqvwRkkTCEaeViqoSNzRlHRGq0oGrxIsFjV2JzSYkiYQjxpZE8JSCyi4GbfAKEauiRRuLdC7JJIGEo4aRYiGDKw8TsSplOidMeGlegtkAkj7C0fvCvO4Encsfpm6liu02uh1X4ZDkESzD0LJwdgMRzPbTZ6jswvmUNiJYHNA6FsfvYDsbkcy2euc3gbzXD8wSziKJI1gOnL8EvvDlRDbbTOf1BVXSSNIItmGnFm8uasomIpz13Ua4XWFHh/ABkjKCbRhMNZ5kpqXP6pRWsprACzDnThJGsB15rkwDAi8g4llWcVUspNjFvXV1J5B0EWzH5kjk+Hw6ruqaMkgEtMT3vaWQZnUkWYRK+sJnGqr8MyLgUTcs5PS0/Anc3UxSRagYME+pd7TIoIX7iYhHPKTuDZPL1z7bLk0iiSJUHLgs3OTSPxMRjzhwtc5ISZ0kSQTHgHtpTa5sIUIeftqowNnXeiXpVJIigmMwBGF8vlP6lMGV3UTMwwpcPTCQlltIggiOw2xTpoA2eYiIOWrtu1Pn7HMYzSfpITiOEi4L52KbqSnPEkFHpX1vxlU2JDkE16DIo2cYXP4hEfSQaSPdVOPnX0NpI4KrtDAI5ECb0AK+cJ6IesD5zm/gdoXtqcaJJDEE1wG3Ohiq/A+gZd4hwu7XdH6yoMpJkhSCa9E3NxY0NGUHEfZ92vdlncuX7kxGTiYpIbgW5a0Oqny+rinUrfTe7Qp/6FOlRpIQguuR70ycDQS+n4j7btro+bwqXrhWEI4j6SC4P6CVDIzFTXpA4ueJwGXf9+dmW3QKSQbBM8DxOwWu/IDSRsqz+bT0URyST1JB8I4WBoHFNaVmRilWL3kTrxsau9JICh8iiSB4Djh+J5+K47Lwt6vU9/2jweUESQLBs+hPyrUGV7ZX4WqUVwqa/MUN8BIjKSB4FuWtDik2D3zBV6uKwJzNz3EpQhJA8Dy2p5SJhsruraZe3yJX/nqtEKC0EcEXAa1j+9JMRMGukqKNH29PxSfTzRN8AxxYbnL5uiqYc/VCobO8XYHSRgRfaeExO9qb6kELv+Dfgg3lTTOt/HOBsQl04wTfAQR7XJ5LF4Gwv+XPwJWyOg+uAt00wbcYSAtngaDv8GHgag+OycGXFN0ywbfAgn4jHeswtcQePxG4wJU7dU2spxsm+B651obTwV+8x0fa9xVDlT/SEwiMpdslVENA65hn1ZZGww89wzh9RGX/vitNS7kJVQSskwat9R0f5Hxf1tV4O90ooerQ1xae4mUtXNQSfy6oyj/2J5tPo9skVB1wH25BlT7j1W4lePmsNDiL0k0SqjeglWnFgFavB8n7pqGKF+IMMLpFQvUGtC4IHNvfGZ9jgjnqraIN+Y48F6bRDRKqHpuTkZN1Vb7bQ5HnN00uc9yRTLdHIC0cCIwx5jYGixkPaGFMG2ny9/toKTeB8BegL6mrytUeqHd+GSdu0o0RCPugT5o5qejmRoehoo1LaCk3gbA/UzqZHKt3xD/h1t1KhsZW5NLxGXRTBMLBAlqass2VDQuqfD7mrumWCIQDB7SOGWgXmevIq8m3GR3CuXRDBMIhgJMsDS7/j6vM53Ssg9JGBMLotPCYwZR4nmtqnnni27RdgUA4zIBWTmVXuqBR/7l8ezxON0IgHCYK6cgE5wksf2lLIngK3QaBcAQBrZwqXuDgdoVlejuNySEQjpzEuJqFs41OEHhQlT9CaSMC4ei08Ji+TkGqfNGG/N+FtqZz6AYIhKMn8VjQwrdXuGgjWaK0EYFgDbCIooKrQa8upGm7AoFgqSltcOVbdtdJw/cw9M54c4l2GxEI1gK7gOwmcEFlF2M9Nj1tAsEGFDsxrWTPEDzQvl35NoXG5BAIdmFzJHB8gbM1dmhiXRPnYR02PWUCwUYUMK1k8RA8XWW/2JmMn0lPl0CwGZjeMbnyKyvXlOY6pFZKGxEIFUK/HKoF4r1ujfaVr9rY2nA6PVUCoXJaeIyusctwwPpRBq76t6diMyltRCBUWgsna0/TeWL30QS08qr8t8Y8YTw9TQLBARhc/uSRLgvXVbaory06hZ4igeAQnqipGadzZdmRBLTyGlM3RyLH01MkEBzE0BA85dXD833lm4o8egY9PQLBYQx1K8k3GRnljVGXTHbKEqWNCASXINcem2pkEn8ane8rXb22Q/gAPTUCwT1aeIyusm8CQV87xG6jXmNuIkhpIwLBZSiwyASDM/NgaSU9xT5XYGwcPS0CwYXIq+KFhpbYvf8xOcoCPdlYEyDtSyC4ExsaJ52kc/bI/iq0DE3qLAnCcfSUCAQXI9cpJ4DAL+1T73wjzpmmp0MguBzDPcM/f09AK9Ui0G4jAsEjeJYL00xNeW54MffVNCaHQPAQcKuDkWFKkbM5vTx6BqWNCAQCgUAgEKzC/wPx5tts/R3O6QAAAABJRU5ErkJggg=="},it=1024,rt=Math.ceil(Math.min(window.devicePixelRatio,2)),at={IMAGE:"image",CIRCLE:"circle"},ot="radiated",st=1,ut=!1,lt=5,ct=(0,S.default)({},z.DEFAULT_PROCESS_ANIMATION,{animationType:"radiated"});e.Dot=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,y.default)(this,e),t.typeId=tt,t.validTypes=["toggle","process"],t.toggleSupportTypes=["fade"],t.processSupportTypes=["beating","radiated"],t.animation&&!t.processAnimation&&(t.processAnimation=s(t.animation));var n=(0,x.default)(this,(e.__proto__||(0,_.default)(e)).call(this,t));return n._enableBloom=!!t.enableBloom,n._setStyles(t.styles),n._setFaceTo(t.faceTo),n._debug=t.debug||!1,n}return(0,C.default)(e,t),(0,E.default)(e,[{key:"setData",value:function(t){try{Y(t)||new U.BaseTypeError("Dot.data","array",t).throw(),t.forEach(function(t){if(!K(t))throw Error("数据错误：DotPoint 经纬度数据无效。");t.styleId&&!X(t.styleId)&&new U.BaseTypeError("DotPoint.styleId","string",t.styleId).throw()})}catch(t){return console.error(t),this}return this._originData=(0,H.clone)(t),(0,P.default)(e.prototype.__proto__||(0,_.default)(e.prototype),"setData",this).call(this,t)}},{key:"getData",value:function(){return this._originData}},{key:"setStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._setStyles(t),this._update(),this}},{key:"getStyles",value:function(){return this._styles}},{key:"setFaceTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"screen";return this._setFaceTo(t),this._update(),this}},{key:"getFaceTo",value:function(){return this._faceTo}},{key:"_setStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={default:et};Z(t)||(new U.BaseTypeError("DotOptions.styles","object",t).error(),t={});for(var n in t){var i=t[n];Z(i)||(new U.BaseTypeError("DotStyle","object",i).error(),i={}),e[n]=r(i)}this._styles=e}},{key:"_setFaceTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"screen";X(t)||(new U.BaseTypeError("DotOptions.faceTo","string",t).error(),t="screen"),this._faceTo="map"===t?"map":"screen"}},{key:"_getValidSelectStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?t&&!Z(t)?(new U.BaseTypeError("SelectOptions.style","object",t).error(),null):r(t):null}},{key:"_onRemoveToggleComplete",value:function(){this._styleTexture&&(this._styleTexture.delete(),this._styleTexture=null),(0,P.default)(e.prototype.__proto__||(0,_.default)(e.prototype),"_onRemoveToggleComplete",this).call(this)}},{key:"_update",value:function(){var t=this;(0,P.default)(e.prototype.__proto__||(0,_.default)(e.prototype),"_update",this).call(this),this._isReady()&&(window.polyfillContext&&window.polyfillContext(this.gl),this._getStyleTexture(function(){t._geometry=t._getGeometry(),t._model&&t._model.delete(),t._model=t._getModel(t.gl),t.redraw()}))}},{key:"_getGeometry",value:function(){var t=new Int8Array([-1,1,-1,-1,1,1,1,-1]);return new M.Geometry({drawMode:I.default.TRIANGLE_STRIP,attributes:{positions:{size:2,value:t}},vertexCount:4})}},{key:"_getModel",value:function(t){var e=this;if(!this._isReady())return null;var n=this.data,i=this._styles,r=new Float32Array(4*n.length),a=new Uint16Array(4*n.length),o=new Int16Array(2*n.length),s=new Uint8ClampedArray(3*n.length);n.forEach(function(t,n){var u=i[t.styleId]||i.default,l=(0,G.splitLatLngNumber)(t.lng),c=(0,G.splitLatLngNumber)(t.lat);r[4*n]=l.high,r[4*n+1]=c.high,r[4*n+2]=l.low,r[4*n+3]=c.low,a[4*n]=u.x,a[4*n+1]=u.y,a[4*n+2]=u.w,a[4*n+3]=u.h,o[2*n]=u._offset.x,o[2*n+1]=u._offset.y;var f=e._encodePickingColor(n),d=(0,g.default)(f,3);s[3*n+0]=d[0],s[3*n+1]=d[1],s[3*n+2]=d[2]});var u=new M._Attribute(t,{size:4,isInstanced:!0,value:r}),l=new M._Attribute(t,{size:4,isInstanced:!0,value:a}),c=new M._Attribute(t,{size:2,isInstanced:!0,value:o}),f=new M._Attribute(t,{size:3,isInstanced:!0,value:s}),d=N.dotVertex,h=N.dotFragment,v=new M.Model(t,{id:tt+this.id,vs:t.isWebGL2?(0,W.transferVertexShader)(d):d,fs:t.isWebGL2?(0,W.transferFragmentShader)(h):h,geometry:this._geometry,isInstanced:!0,instanceCount:n.length,shaderCache:this._shaderCache});return v.setAttributes({instancePositions:u,instanceStyles:l,instanceOffsets:c,instancePickingColors:f}),v}},{key:"_getValidAnimationOptions",value:function(t,e,n){if("process"===t){n.defaultOptions=ct;var i=(0,z.getValidAnimationOptions)(t,e,n),r=e.enableFade,a=void 0===r?ut:r,o=e.beatingAmplitude,s=void 0===o?lt:o;return Q(a)?i.enableFade=a:(new U.BaseTypeError("DotAnimationOptions.enableFade","boolean",a).error(),i.enableFade=ut),V(s)?i.beatingAmplitude=s:(new U.BaseTypeError("DotAnimationOptions.beatingAmplitude","number",s).error(),i.beatingAmplitude=ut),i}return z.getValidAnimationOptions.apply(void 0,arguments)}},{key:"_getProcessAnimationType",value:function(){var t=this.getAnimation("process")||{},e=void 0;switch(t.animationType){case"beating":e=0;break;case"radiated":default:e=1}return e}},{key:"_getProcessAnimationParams",value:function(){var t=this.getAnimation("process")||{},e=t.enableFade?1:0,n=t.beatingAmplitude;return[e,void 0===n?lt:n]}},{key:"_getUniforms",value:function(t){var e=this._selectOptions.style,n=e?[e.x,e.y,e.w,e.h]:[255,255,255,255],i=e?[e._offset.x,e._offset.y]:[0,0],r=this._getProcessAnimationParams();return(0,S.default)({uFaceToMap:"map"===this._faceTo,uViewSize:new Float32Array([t.view.right,t.view.top]),uScale:rt,uSelectStyle:new Uint16Array(n),uSelectOffset:new Int16Array(i),uStyleTexture:this._styleTexture,uTexSize:it*rt,uEnableFade:r[0],uBeatingAmplitude:r[1],uEnableBloom:this._enableBloom},this._getPickingUniforms())}},{key:"_getGLParams",value:function(){var t;return t={},(0,h.default)(t,I.default.COLOR_CLEAR_VALUE,[0,0,0,.001]),(0,h.default)(t,I.default.CULL_FACE,!0),(0,h.default)(t,I.default.CULL_FACE_MODE,I.default.BACK),(0,h.default)(t,I.default.BLEND,!0),(0,h.default)(t,I.default.BLEND_SRC_RGB,I.default.ONE),(0,h.default)(t,I.default.BLEND_SRC_ALPHA,I.default.ONE),t}},{key:"_getStyleTexture",value:function(t){var e=this,n=this.gl,i=this._styles,r=this._debug,a=it*rt,o=it*rt,s=this._styleCanvas;this._styleCanvas||(s=document.createElement("canvas"),s.width=a,s.height=o,r&&(s.style.display="none",document.body.appendChild(s)),this._styleCanvas=s);var u=s.getContext("2d"),l=(0,S.default)({},i,{_select:this._selectOptions.style});R(u,l).then(function(){var i={data:s,width:a,height:o,format:I.default.RGBA,type:I.default.UNSIGNED_BYTE,border:0};if(e._styleTexture){var r;i.parameters=(r={},(0,h.default)(r,I.default.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),(0,h.default)(r,I.default.UNPACK_FLIP_Y_WEBGL,!0),r),e._styleTexture.setImageData(i)}else{var u,l;i.parameters=(u={},(0,h.default)(u,I.default.TEXTURE_WRAP_S,I.default.CLAMP_TO_EDGE),(0,h.default)(u,I.default.TEXTURE_WRAP_T,I.default.CLAMP_TO_EDGE),(0,h.default)(u,I.default.TEXTURE_MAG_FILTER,I.default.NEAREST),(0,h.default)(u,I.default.TEXTURE_MIN_FILTER,I.default.NEAREST),u),i.pixelStore=(l={},(0,h.default)(l,I.default.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),(0,h.default)(l,I.default.UNPACK_FLIP_Y_WEBGL,!0),l),e._styleTexture=new M.Texture2D(n,i)}t()})}}]),e}(O.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var r=n(21),a=i(r),o=n(11),s=i(o),u=n(22),l=i(u),c=n(12),f=i(c),d=n(8),h=i(d),v=n(9),g=i(v),p=n(16),_=i(p),m=n(24),y=i(m),b=n(15),E=i(b),A=n(13),x=n(19),T=i(x),P=n(44),w=n(302),C=n(45),k=i(C),S=n(14),R=i(S),M=n(20),L=n(175),I=i(L),O=n(259),F=n(26),N=n(28),D=n(65),B=R.default.isArray,U=R.default.isNumber,G=R.default.isFunction,j=R.default.isValidColor,z=N.TYPE_ID.PATH,W={color:"#FFF",width:1,opacity:1},H=function(){return W},V={meter:"meter",pixel:"pixel"},X={miter:"miter",round:"round"},Y={butt:"butt",round:"round",square:"square"};e.Path=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,h.default)(this,e),t.typeId=z,t.validTypes=["toggle","process"];var n=t,i=(0,_.default)(this,(e.__proto__||(0,f.default)(e)).call(this,n));return i._checkParameters(n),i._initPrivateProp(),i.viewport={},i}return(0,E.default)(e,t),(0,g.default)(e,[{key:"setData",value:function(t){return B(t)?(0,y.default)(e.prototype.__proto__||(0,f.default)(e.prototype),"setData",this).call(this,t):(new M.BaseTypeError("Arc.data","array",t).error(),this)}},{key:"setLineCap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"butt";t!==this._lineCap&&((0,O.isString)(t)?Y[t]?this._lineCap=Y[t]:(console.error("Path.lineCap 必须是 butt、round、square 中的一个，实际传入值为：",t),this._lineCap=Y.butt):(new M.BaseTypeError("Path.lineCap","string",t).error(),this._lineCap=Y.butt))}},{key:"setWidthUnit",value:function(t){t!==this._widthUnit&&((0,O.isString)(t)?V[t]?this._widthUnit=t:(console.error("Path.widthUnit 必须是 meter 或者 pixel 中的一个，实际传入值为：",t),this._widthUnit=V.pixel):(new M.BaseTypeError("Path.widthUnit","string",t).error(),this._widthUnit=V.pixel))}},{key:"_checkParameters",value:function(t){G(t.pickStyle)?this._pickStyle=t.pickStyle:(new M.BaseTypeError("Path.pickStyle","function",t.pickStyle).error(),this._pickStyle=H),this.setWidthUnit(t.widthUnit),this._lineJoin=X.miter,this.setLineCap(t.lineCap)}},{key:"_initPrivateProp",value:function(){this._vertexShader=w.pathVertex,this._fragmentShader=w.pathFragment}},{key:"addTo",value:function(t){return(0,y.default)(e.prototype.__proto__||(0,f.default)(e.prototype),"addTo",this).call(this,t),this}},{key:"_update",value:function(){}},{key:"_updateModel",value:function(){}},{key:"_getGeometry",value:function(){var t=new Int16Array([0,1,0,-1,1,1,1,-1]),e=new Uint16Array([0,1,2,1,3,2]);return new A.Geometry({drawMode:T.default.TRIANGLES,attributes:{positions:{size:2,value:t},indices:{size:1,value:e}},vertexCount:6})}},{key:"_getModel",value:function(t){var e=this;if(!this._isReady())return null;var n=function(t){var n=e._pickStyle(t)||W;j(n.color)||(console.error("pickStyle得到的color颜色值不合法: ",n.color),n.color=W.color),U(n.width)&&n.width>0||(console.error("pickStyle得到的width值不合法: ",n.width),n.width=W.width);var i=new k.default(n.color).toArray().map(function(t){return 255*t});return{color:i,width:n.width,opacity:"number"==typeof i[3]&&isFinite(i[3])?i[3]:255*W.opacity}},i=this.data.reduce(function(t,e){return t+e.path.length-1},0),r=new Float32Array(3*i),a=new Float32Array(3*i),o=new Float32Array(3*i),s=new Float32Array(3*i),u=new Float32Array(4*i),c=new Uint8ClampedArray(4*i),f=new Uint8ClampedArray(3*i),d=new Float32Array(1*i),h=0,v=0,g=0,p=0,_=0,m=0,y=0,b=0;this.data.forEach(function(t,i){if(!t.path)return void console.error("数据错误： 索引为 "+i+" 的数据无效");for(var E=n(t),A=(0,l.default)(t.path,1),x=A[0],T=0;T<t.path.length;T++){if(T<t.path.length-1){var P=t.path[T],w=(0,l.default)(P,2);r[h+1]=w[0],r[h]=w[1],h+=2,r[h]=0,h+=1,o[g]=P[1]-x[1],g+=1,o[g]=P[0]-x[0],g+=1,o[g]=0,g+=1,x=P;var C=t.path[T],k=t.path[T+1];u[_]=(0,F.fp64LowPart)(C[1]),_+=1,u[_]=(0,F.fp64LowPart)(C[0]),_+=1,u[_]=(0,F.fp64LowPart)(k[1]),_+=1,u[_]=(0,F.fp64LowPart)(k[0]),_+=1}if(T>0){var S=t.path[T],R=t.path[T+1];R||(R=S);var M=(0,l.default)(S,2);a[v+1]=M[0],a[v]=M[1],v+=2,a[v]=0,v+=1,s[p]=R[1]-S[1],p+=1,s[p]=R[0]-S[0],p+=1,s[p]=0,p+=1}if(T>0){var L=(0,l.default)(E.color,3);c[m]=L[0],c[m+1]=L[1],c[m+2]=L[2],m+=3,c[m]=E.opacity,m+=1;var I=e._encodePickingColor(i),O=(0,l.default)(I,3);f[3*y+0]=O[0],f[3*y+1]=O[1],f[3*y+2]=O[2],y+=1,d[b]=E.width,b+=1}}});var E=new A._Attribute(this.gl,{size:3,isInstanced:!0,value:r}),x=new A._Attribute(this.gl,{size:3,isInstanced:!0,value:a}),T=new A._Attribute(this.gl,{size:3,isInstanced:!0,value:o}),P=new A._Attribute(this.gl,{size:3,isInstanced:!0,value:s}),w=new A._Attribute(this.gl,{size:4,isInstanced:!0,value:u}),C=new A._Attribute(this.gl,{size:4,isInstanced:!0,value:c}),S=new A._Attribute(this.gl,{size:3,isInstanced:!0,value:f}),R=new A._Attribute(this.gl,{size:1,isInstanced:!0,value:d}),M=new A.Model(t,{id:z+this.id,vs:this._vertexShader,fs:this._fragmentShader,geometry:this.geometry,isInstanced:!0,instanceCount:i,shaderCache:this._shaderCache});return M.setAttributes({instanceStartPositions:E,instanceEndPositions:x,instanceLeftDeltas:T,instanceRightDeltas:P,instanceStartEndPositions64xyLow:w,instanceWidths:R,instanceColors:C,instancePickingColors:S}),M}},{key:"_getLineJoinNumber",value:function(){return this._lineJoin===X.miter?0:this._lineJoin===X.round?1:void 0}},{key:"_getLineCapNumber",value:function(){return this._lineCap===Y.butt?0:this._lineCap===Y.square?1:this._lineCap===Y.round?2:void 0}},{key:"draw",value:function(t){var e=this;if(this._isReady()&&this._visible){var n=this.map.getCenter(),i=(0,D.getDistanceScales)(this.map),r=i.pixelsPerMeter;this._uniforms=(0,s.default)({},{widthScale:this._widthUnit===V.meter?1:1/r[0],widthMinPixels:1,widthMaxPixels:1e4,miterLimit:500,lineJoin:this._getLineJoinNumber(),lineCap:this._getLineCapNumber(),opacity:1,uPixelsPerMeter:new Float32Array(r),uMatrix:t.pvMatrix.elements,center:new Float32Array([n.lng,n.lat]),zoom:this.map.getZoom()},this._getPickingUniforms());var o=(0,a.default)({},T.default.COLOR_CLEAR_VALUE,[0,0,0,.001]);this._picking_enablePicking&&(o[T.default.COLOR_WRITEMASK]=[!1,!1,!1,!1]),(0,A.withParameters)(this.gl,o,function(){var t,n=+new Date;if(e._picking_enablePicking&&e._model.render(e._uniforms),(0,A.withParameters)(e.gl,(t={},(0,a.default)(t,T.default.DEPTH_FUNC,T.default.LEQUAL),(0,a.default)(t,T.default.COLOR_WRITEMASK,[!0,!0,!0,!0]),t),function(){e._model.render(e._uniforms)}),e._needStatCr){var i=+new Date;(0,I.default)({visualType:z,dataLength:e.data.length,renderTime:i-n}),e._needStatCr=!1}})}}}]),e}(P.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Pipe=void 0;var r=n(21),a=i(r),o=n(11),s=i(o),u=n(12),l=i(u),c=n(8),f=i(c),d=n(9),h=i(d),v=n(16),g=i(v),p=n(24),_=i(p),m=n(15),y=i(m),b=n(44),E=n(13),A=n(19),x=i(A),T=n(303),P=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(T),w=n(34),C=n(45),k=i(C),S=n(14),R=i(S),M=n(39),L=n(20),I=n(26),O=n(28),F=n(65),N=n(33),D=R.default.isArray,B=R.default.isNumber,U=R.default.isFunction,G=R.default.isValidColor,j=R.default.isValidLatLng,z=R.default.isUndefined,W=O.TYPE_ID.PIPE,H=16,V=16,X={color:"rgba(56, 124, 234, 0.7)"},Y=function(){return X};e.Pipe=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,e),t.typeId=W,t.validTypes=["toggle"],t.toggleSupportTypes=["fade","grow"],t.processSupportTypes=[];var n=(0,g.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t));return n._checkParameters(t),n._pipeSegments=t.pipeSegments||H,n._connectorSegments=t.connectorSegments||V,n._wireframe=t.wireframe,n._enableBloom=!!t.enableBloom,n._uPixelsPerMeter=new Float32Array(3),n._uSelectColor=new Uint8ClampedArray(4),n.viewport={},n}return(0,y.default)(e,t),(0,h.default)(e,[{key:"setData",value:function(t){if(!D(t))return new L.BaseTypeError("Pipe.data","array",t).error(),this;var n=(0,N.clone)(t),i=void 0;try{i=t.map(function(t){var e=(0,s.default)({},t);if(D(e.path)||new L.BaseTypeError("PipeLine.path","array",e.path).throw(),B(e.radius)){if(e.radius<=0)throw Error("数据错误：管道半径必须大于0")}else new L.BaseTypeError("PipeLine.radius","number",e.radius).throw();return e.path=e.path.map(function(t){if(!j(t))throw Error("数据错误：PipeLine.path 经纬度数据无效。");return TMap.LatLng.convert(t)}),e}),this._originData=n}catch(t){return console.error(t),this}return(0,_.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"setData",this).call(this,i)}},{key:"getData",value:function(){return this._originData}},{key:"getPickStyle",value:function(){return this._pickStyle}},{key:"setPickStyle",value:function(t){return U(t)?(this._pickStyle=t,this._update(),this):(new L.BaseTypeError("Pipe.pickStyle","function",t).error(),this)}},{key:"_checkParameters",value:function(t){var e=t.pickStyle;z(e)?this._pickStyle=Y:U(e)?this._pickStyle=e:(new L.BaseTypeError("Pipe.pickStyle","function",e).error(),this._pickStyle=Y)}},{key:"_update",value:function(){(0,_.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"_update",this).call(this),this._isReady()&&(window.polyfillContext&&window.polyfillContext(this.gl),this.viewport.resolution||(this.viewport.resolution=new Float32Array([this.transform.width,this.transform.height])),this.geometry||(this._geometry=this._getGeometry()),this._updateModel())}},{key:"_updateModel",value:function(){this._isReady()&&(this._model&&(this._model.pipe.delete(),this._model.connector.delete()),this._model=this._getModel(this.gl),this.redraw())}},{key:"_getGeometry",value:function(){var t=new E.TruncatedConeGeometry({topRadius:1,bottomRadius:1,height:1,nvertical:1,nradial:this._pipeSegments,verticalAxis:"z",topCap:!1,bottomCap:!1});t.drawMode=this._wireframe?x.default.LINES:x.default.TRIANGLES;var e=new E.SphereGeometry({nlat:this._connectorSegments,nlong:this._connectorSegments,radius:1});if(e.drawMode=this._wireframe?x.default.LINES:x.default.TRIANGLES,this._wireframe){var n=void 0,i=void 0;n=t.attributes.indices.value,i=new Uint16Array(n.length/6*8);for(var r=0;r<n.length;r+=6)i.set([n[r+0],n[r+1],n[r+1],n[r+2],n[r+2],n[r+5],n[r+5],n[r+0]],r/6*8);t.attributes.indices.value=i,n=e.attributes.indices.value,i=new Uint16Array(n.length/6*8);for(var a=0;a<n.length;a+=6)i.set([n[a+0],n[a+1],n[a+1],n[a+5],n[a+5],n[a+2],n[a+2],n[a+0]],a/6*8);e.attributes.indices.value=i}return{pipe:t,connector:e}}},{key:"_getValidSelectStyle",value:function(t){return t?z(t.color)?null:G(t.color)?{color:new k.default(t.color).toArray().map(function(t){return 255*t})}:(console.error("参数错误：SelectOptions.style.color 颜色值不合法。"),null):null}},{key:"_calcPercentArr",value:function(t){for(var e=0,n=[],i=0;i<t.length;i++)if(0===i)n.push(0);else{var r=t[i-1],a=t[i],o=(0,F.computeDistanceBetween)([r.getLat(),r.getLng()],[a.getLat(),a.getLng()]);e+=Math.sqrt(Math.pow(o,2)+Math.pow(a.getHeight()-r.getHeight(),2)),n.push(e)}return n.map(function(t){return t/e})}},{key:"_getPipeModel",value:function(t,e){var n=this,i=this.data.map(function(t){return Math.max(t.path.length-1,0)}).reduce(function(t,e){return e+t}),r=new Float32Array(4*i),a=new Float32Array(4*i),o=new Float32Array(3*i),s=new Uint8ClampedArray(4*i),u=new Uint8ClampedArray(3*i),l=new Float32Array(2*i),c=-1,f=0;this.data.forEach(function(t,i){var d=t.path,h=t.radius,v=e(t),g=n._encodePickingColor(i),p=void 0,_=n._calcPercentArr(d);d.forEach(function(t,e){if(e>0){c+=1;var n=p,i=t,m=(0,I.splitLatLngNumber)(n.lng),y=(0,I.splitLatLngNumber)(n.lat),b=(0,I.splitLatLngNumber)(i.lng),E=(0,I.splitLatLngNumber)(i.lat);r.set([m.high,y.high,m.low,y.low],4*c),a.set([b.high,E.high,b.low,E.low],4*c),o.set([n.height,i.height,h],3*c),s.set(v.color,4*c),u.set(g,3*c)}e<d.length-1&&(l[2*f+2*e]=_[e],l[2*f+2*e+1]=_[e+1]),p=t}),f+=d.length-1});var d=new E._Attribute(this.gl,{size:4,isInstanced:!0,value:r}),h=new E._Attribute(this.gl,{size:4,isInstanced:!0,value:a}),v=new E._Attribute(this.gl,{size:3,isInstanced:!0,value:o}),g=new E._Attribute(this.gl,{size:4,isInstanced:!0,value:s}),p=new E._Attribute(this.gl,{size:3,isInstanced:!0,value:u}),_=new E._Attribute(this.gl,{size:2,isInstanced:!0,value:l}),m=P.pipeVertex,y=P.pipeFragment,b=new E.Model(t,{id:W+"pipe"+this.id,vs:t.isWebGL2?(0,w.transferVertexShader)(m):m,fs:t.isWebGL2?(0,w.transferFragmentShader)(y):y,geometry:this._geometry.pipe,isInstanced:!0,instanceCount:i,shaderCache:this._shaderCache});return b.setAttributes({instancePositionStart:d,instancePositionEnd:h,instanceHeightStartHeightEndRadius:v,instanceColor:g,instancePickingColor:p,instancePercents:_}),b}},{key:"_getConnectorModel",value:function(t,e){var n=this,i=this.data.map(function(t){return Math.max(t.path.length-2,0)}).reduce(function(t,e){return e+t}),r=new Float32Array(4*i),a=new Float32Array(2*i),o=new Uint8ClampedArray(4*i),s=new Uint8ClampedArray(3*i),u=new Float32Array(1*i),l=-1,c=0;this.data.forEach(function(t,i){var f=t.path,d=t.radius,h=e(t),v=n._encodePickingColor(i),g=n._calcPercentArr(f);f.forEach(function(t,e){if(e>0&&e<f.length-1){l+=1;var n=(0,I.splitLatLngNumber)(t.lng),i=(0,I.splitLatLngNumber)(t.lat),p=[n.high,i.high,n.low,i.low];r.set(p,4*l),a.set([t.height,d],2*l),o.set(h.color,4*l),s.set(v,3*l)}e>0&&e<f.length-1&&(u[c+e-1]=g[e])}),c+=f.length-2});var f=new E._Attribute(this.gl,{size:4,isInstanced:!0,value:r}),d=new E._Attribute(this.gl,{size:2,isInstanced:!0,value:a}),h=new E._Attribute(this.gl,{size:4,isInstanced:!0,value:o}),v=new E._Attribute(this.gl,{size:3,isInstanced:!0,value:s}),g=new E._Attribute(this.gl,{size:1,isInstanced:!0,value:u}),p=P.connectorVertex,_=P.connectorFragment,m=new E.Model(t,{id:W+"connector"+this.id,vs:t.isWebGL2?(0,w.transferVertexShader)(p):p,fs:t.isWebGL2?(0,w.transferFragmentShader)(_):_,geometry:this._geometry.connector,isInstanced:!0,instanceCount:i,shaderCache:this._shaderCache});return m.setAttributes({instancePosition:f,instanceHeightRadius:d,instanceColor:h,instancePickingColor:v,instancePercents:g}),m}},{key:"_getModel",value:function(t){var e=this;if(!this._isReady())return null;var n=function(t){var n=e._pickStyle(t)||X;return z(n.color)?n.color=X.color:G(n.color)||(console.error("pickStyle得到的color颜色值不合法: ",n.color),n.color=X.color),{color:new k.default(n.color).toArray().map(function(t){return 255*t})}},i=this._getPipeModel(t,n),r=this._getConnectorModel(t,n);return{pipe:i,connector:r,render:function(t){i.render(t),r.render(t)},delete:function(){i.delete(),r.delete()}}}},{key:"_getUniforms",value:function(){return this._uPixelsPerMeter.set((0,F.getDistanceScales)(this.map).pixelsPerMeter),this._uSelectColor.set(this._selectOptions.style?this._selectOptions.style.color:[255,255,255,255]),(0,s.default)({},M.LIGHT_SETTINGS,{uPixelsPerMeter:this._uPixelsPerMeter,uSelectColor:this._uSelectColor,uEnableBloom:this._enableBloom},this._getPickingUniforms())}},{key:"_getGLParams",value:function(){var t;return t={},(0,a.default)(t,x.default.DEPTH_TEST,!0),(0,a.default)(t,x.default.CULL_FACE,!1),t}}]),e}(b.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Prism=void 0;var r=n(99),a=i(r),o=n(11),s=i(o),u=n(21),l=i(u),c=n(22),f=i(c),d=n(100),h=i(d),v=n(35),g=i(v),p=n(101),_=i(p),m=n(12),y=i(m),b=n(8),E=i(b),A=n(9),x=i(A),T=n(16),P=i(T),w=n(24),C=i(w),k=n(15),S=i(k),R=n(13),M=n(19),L=i(M),I=n(44),O=n(14),F=i(O),N=n(20),D=n(28),B=n(45),U=i(B),G=n(177),j=n(122),z=n(304),W=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(z),H=n(34),V=n(26),X=n(39),Y=n(123),K=n(33),q=F.default.isArray,Z=F.default.isUndefined,Q=F.default.isNumber,J=F.default.isObject,$=F.default.isNonNegativeNumber,tt=F.default.isValidColor,et=F.default.checkGradientObject,nt=D.TYPE_ID.PRISM,it={topFillColor:"#017CF7",sideFillColor:"#017CF7",height:0,offset:0};e.Prism=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,E.default)(this,e),t.typeId=nt,t.validTypes=["toggle"],t.toggleSupportTypes=["fade","grow"],t.processSupportTypes=[];var n=(0,P.default)(this,(e.__proto__||(0,y.default)(e)).call(this,t));return n._checkParam(t),n.setStyles(t.styles),n}return(0,S.default)(e,t),(0,x.default)(e,[{key:"_checkParam",value:function(t){this._enableBloom=!!t.enableBloom,this._enableLighting=t.enableLighting,Z(this._enableLighting)&&(this._enableLighting=!0),this._enableLighting=!!this._enableLighting}},{key:"setStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};if(!J(t))return void new N.BaseTypeError("Prism.styles","object",t).error();t=(0,_.default)({default:it},t);var n=!0,i=!1,r=void 0;try{for(var a,o=(0,g.default)((0,h.default)(t));!(n=(a=o.next()).done);n=!0){var s=(0,f.default)(a.value,2),u=s[0],l=s[1],c=l.topFillColor,d=void 0===c?it.topFillColor:c,v=l.sideFillColor,p=void 0===v?it.sideFillColor:v,m=l.height,y=void 0===m?it.height:m,b=l.offset,E=void 0===b?it.offset:b;tt(d)||et(d,!1).result||(console.error(u+"中得到的topFillColor颜色值不合法: ",d),d=it.topFillColor),tt(p)||et(p,!1).result||(console.error(u+"中得到的sideFillColor颜色值不合法: ",p),p=it.sideFillColor),$(y)||(console.error(u+"中得到的height的值不合法: ",y),y=it.height),Q(E)||(console.error(u+"中得到的offset的值不合法: ",E),E=it.offset),e[u]={topFillColor:d,sideFillColor:p,height:y,offset:E}}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}return this._polygonStyles=e,this.styles=t,this._update(),this}},{key:"_calcTopPlaneParam",value:function(){var t=this;if(this._gradientUvMap){var e=(0,j.getPolygonsBBXList)(this._polygonParseHelper),n=[],i=[];this._polygonParseHelper.complexPolygons.forEach(function(r,a){var o=e[a],s=(0,f.default)(o,4),u=s[0],l=s[1],c=s[2],d=s[3],h=l-u,v=d-c,g=t._polygonGeometries[a].styleId,p=t._getStyle(g);g+="_0";var _=t._gradientUvMap[g]?t._gradientUvMap[g].topY:t._gradientUvMap.default_0.topY,m=t._gradientUvMap[g]?t._gradientUvMap[g].bottomY:t._gradientUvMap.default_0.bottomY;r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){var e=(t.lng-u)/h,r=(t.lat-c)/v;r=m+(_-m)*r,n.push(e),n.push(r),i.push(p.height),i.push(p.offset)})})})}),this._topPlaneUVs=n,this._heightAndOffset=i}}},{key:"_getValidSelectStyle",value:function(t){return t?Z(t.topFillColor)||Z(t.sideFillColor)?null:tt(t.topFillColor)?tt(t.sideFillColor)?{topFillColor:new U.default(t.topFillColor).toArray().map(function(t){return 255*t}),sideFillColor:new U.default(t.sideFillColor).toArray().map(function(t){return 255*t})}:(console.error("参数错误：SelectOptions.style.sideFillColor 中的值不合法：",t.sideFillColor),null):(console.error("参数错误：SelectOptions.style.topFillColor 中的值不合法：",t.topFillColor),null):null}},{key:"setData",value:function(t){if(!q(t))return new N.BaseTypeError("Prism.data","array",t).error(),this;this._originData=(0,K.clone)(t);var n=(0,G.parsePolygonData)(t);return this._polygonGeometries=n.polygonGeometries,this._polygonParseHelper=n.polygonParseHelper,(0,C.default)(e.prototype.__proto__||(0,y.default)(e.prototype),"setData",this).call(this,t)}},{key:"getData",value:function(){return this._originData}},{key:"_update",value:function(){if((0,C.default)(e.prototype.__proto__||(0,y.default)(e.prototype),"_update",this).call(this),this._isReady()){var t=this._getColorsList(this.styles),n=(0,Y.genGradientTexture)(t,this.gl);this._gradientUvMap=n.gradientUvMap,this._gradientTexture=n.gradientTexture,this._calcTopPlaneParam(),this.geometry=this._getGeometry(),this._updateModel()}}},{key:"_updateModel",value:function(){this._isReady()&&(this._model&&this._model.delete(),this._model=this._getModel(this.gl),this.redraw())}},{key:"_getGeometry",value:function(){if(!this._isReady())return null;if(!this._topPlaneUVs||!this._heightAndOffset)return null;this._polygonParseHelper.updatePositions({fp64:!0});var t=this._polygonParseHelper.getPositions(),e=this._polygonParseHelper.getIndices(),n=this._polygonParseHelper.getPositions64xyLow(),i=this._polygonParseHelper.getPickingColors(),r=new Float32Array(2*this._polygonParseHelper.pointCount);this._topPlaneUVs.forEach(function(t,e){r[e]=t});var a=new Float32Array(2*this._polygonParseHelper.pointCount);this._heightAndOffset.forEach(function(t,e){a[e]=t});var o=new R.Geometry({drawMode:L.default.TRIANGLES,attributes:{positions:{size:3,value:t},positions64xyLow:{size:2,value:n},pickingColors:{size:3,value:i},texCoords:{size:2,value:r},heightOffset:{size:2,value:a},indices:e}}),s=new Int8Array([-1,1,-1,-1,1,1,1,-1]);return{topPlane:o,sidePlane:new R.Geometry({drawMode:L.default.TRIANGLE_STRIP,attributes:{positions:{size:2,value:s},texCoords:{size:2,value:new Float32Array([0,1,0,0,1,1,1,0])}},vertexCount:4})}}},{key:"_getStyle",value:function(t){var e=this._polygonStyles[t]||it,n=e.height,i=void 0===n?it.height:n,r=e.offset;return{height:i,offset:void 0===r?it.offset:r}}},{key:"_getModel",value:function(t){if(!this._isReady())return null;if(!this._topPlaneUVs)return null;var e=W.topPlaneVertex,n=W.topPlaneFragment,i=new R.Model(t,{id:nt+this.id,vs:t.isWebGL2?(0,H.transferVertexShader)(e):e,fs:t.isWebGL2?(0,H.transferFragmentShader)(n):n,geometry:this.geometry.topPlane,shaderCache:this._shaderCache}),r=this._getSidePlaneModel(t);return{topPlane:i,sidePlane:r,render:function(t){i.render(t),r.render(t)},delete:function(){i.delete(),r.delete()}}}},{key:"_getSidePlaneModel",value:function(t){var e=this,n=0;this._polygonParseHelper.complexPolygons.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n+=t.length-1})})});var i=new Float32Array(4*n),r=new Float32Array(4*n),a=new Uint8ClampedArray(3*n),o=new Float32Array(n),s=new Float32Array(n),u=new Float32Array(2*n),l=-1;this._polygonParseHelper.complexPolygons.forEach(function(t,n){var c=e._getStyle(e._polygonGeometries[n].styleId),f=e._encodePickingColor(n),d=e._polygonGeometries[n].styleId;d+="_1";var h=void 0;t.forEach(function(t){t.forEach(function(t){t.forEach(function(t,n){if(n>0){l+=1;var v=h,g=t,p=(0,V.splitLatLngNumber)(v.lng),_=(0,V.splitLatLngNumber)(v.lat),m=(0,V.splitLatLngNumber)(g.lng),y=(0,V.splitLatLngNumber)(g.lat);i.set([p.high,_.high,p.low,_.low],4*l),r.set([m.high,y.high,m.low,y.low],4*l),a.set(f,3*l),o[l]=c.height,s[l]=c.offset;var b=e._gradientUvMap[d]?e._gradientUvMap[d].topY:e._gradientUvMap.default_1.topY,E=e._gradientUvMap[d]?e._gradientUvMap[d].bottomY:e._gradientUvMap.default_1.bottomY;u.set([b,E],2*l)}h=t})})})});var c=new R._Attribute(this.gl,{size:4,isInstanced:!0,value:i}),f=new R._Attribute(this.gl,{size:4,isInstanced:!0,value:r}),d=new R._Attribute(this.gl,{size:3,isInstanced:!0,value:a}),h=new R._Attribute(this.gl,{size:1,isInstanced:!0,value:o}),v=new R._Attribute(this.gl,{size:1,isInstanced:!0,value:s}),g=new R._Attribute(this.gl,{size:2,isInstanced:!0,value:u}),p=W.sidePlaneVertex,_=W.sidePlaneFragment,m=new R.Model(t,{id:nt+"sidePlane"+this.id,vs:t.isWebGL2?(0,H.transferVertexShader)(p):p,fs:t.isWebGL2?(0,H.transferFragmentShader)(_):_,geometry:this.geometry.sidePlane,isInstanced:!0,instanceCount:n,shaderCache:this._shaderCache});return m.setAttributes({instancePositionStart:c,instancePositionEnd:f,instancePickingColor:d,instanceHeight:h,instanceOffset:v,instanceSideUV:g}),m}},{key:"_getGLParams",value:function(){var t;return t={},(0,l.default)(t,L.default.DEPTH_TEST,!0),(0,l.default)(t,L.default.CULL_FACE,!0),(0,l.default)(t,L.default.CULL_FACE_MODE,L.default.BACK),t}},{key:"_getUniforms",value:function(){var t={uGradientTexture:this._gradientTexture};return this._selectOptions&&(t.uSelectTopColor=this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.topFillColor):new Uint8ClampedArray([255,255,255,255]),t.uSelectSideColor=this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.sideFillColor):new Uint8ClampedArray([255,255,255,255])),(0,s.default)({},X.LIGHT_SETTINGS,{uEnableBloom:this._enableBloom,uEnableLighting:this._enableLighting},t,this._getPickingUniforms())}},{key:"_getColorString",value:function(t,e,n,i){var r=void 0,o=et(t,!1);tt(t)?r=t:o.result?r=(0,a.default)(t):console.error("styles中的颜色值不合法: ",t),r&&(n=n+"_"+e,i[r]?i[r].push(n):i[r]=[n])}},{key:"_getColorsList",value:function(t){var e={};for(var n in t){var i=t[n],r=i.topFillColor||it.topFillColor;this._getColorString(r,0,n,e);var a=i.sideFillColor||it.sideFillColor;this._getColorString(a,1,n,e)}return e}}]),e}(I.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=(0,A.default)({},q,t);return W(e.fillColor)||(console.error("RadiationStyle.fillColor不合法: ",e.fillColor),e.fillColor=q.fillColor),W(e.strokeColor)||(console.error("RadiationStyle.fillColor不合法: ",e.strokeColor),e.strokeColor=q.strokeColor),U(e.strokeWidth)||(new M.BaseTypeError("RadiationStyle.strokeWidth","number",e.strokeWidth).error(),e.strokeWidth=q.strokeWidth),e.strokeWidth<0&&(console.error("参数错误：RadiationStyle.strokeWidth 应大于或等于 0。"),e.strokeWidth=q.strokeWidth),{fillColor:new F.default(e.fillColor).toArray().map(function(t){return 255*t}),strokeColor:new F.default(e.strokeColor).toArray().map(function(t){return 255*t}),strokeWidth:e.strokeWidth}}Object.defineProperty(e,"__esModule",{value:!0}),e.Radiation=void 0;var a=n(21),o=i(a),s=n(22),u=i(s),l=n(12),c=i(l),f=n(8),d=i(f),h=n(9),v=i(h),g=n(16),p=i(g),_=n(24),m=i(_),y=n(15),b=i(y),E=n(11),A=i(E),x=n(13),T=n(19),P=i(T),w=n(44),C=n(305),k=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(C),S=n(14),R=i(S),M=n(20),L=n(26),I=n(28),O=n(45),F=i(O),N=n(33),D=n(54),B=n(34),U=R.default.isNumber,G=R.default.isString,j=R.default.isArray,z=R.default.isValidLatLng,W=R.default.isValidColor,H=R.default.isInteger,V=R.default.isObject,X=R.default.isUndefined,Y=R.default.isPositiveNumber,K=I.TYPE_ID.RADIATION,q={fillColor:"rgba(56, 124, 234, 0.75)",strokeColor:"rgba(103, 153, 234, 1)",strokeWidth:1},Z=Math.ceil(Math.min(window.devicePixelRatio,2)),Q=(0,A.default)({},D.DEFAULT_PROCESS_ANIMATION,{animationType:"radiated"});e.Radiation=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.default)(this,e),t.typeId=K,t.validTypes=["toggle","process"],t.toggleSupportTypes=["fade","grow"],t.processSupportTypes=["radiated"],X(t.processAnimation)&&(t.processAnimation={enable:!0});var n=(0,p.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t));return n._enableBloom=!!t.enableBloom,n.setNumber(t.number),n._setStyles(t.styles),n}return(0,b.default)(e,t),(0,v.default)(e,[{key:"setNumber",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return X(this.number)&&(this.number=1),U(t)?Y(t)&&H(t)?this.number=t:console.error("参数错误：RadiationOptions.number 应该是 正整数 ，实际却是 "+t):new M.BaseTypeError("RadiationOptions.number","number",t).error(),this}},{key:"getNumber",value:function(){return this.number}},{key:"setData",value:function(t){var n=this;try{var i=(0,N.clone)(t),r=(0,N.clone)(t),a=[];return j(r)||new M.BaseTypeError("Radiation.data","array",r).throw(),r.forEach(function(t){if(!z(t.center))throw Error("数据错误：RadiationPlane.center 经纬度数据无效。");if(!U(t.radius)||t.radius<=0)throw Error("数据错误：RadiationPlane.radius 半径数据无效");t.styleId&&!G(t.styleId)&&new M.BaseTypeError("数据错误：RadiationPlane.styleId","string",t.styleId).throw(),n._styles[t.styleId]||(t.styleId="default");for(var e=n.number;e>=1;e--){var i=(0,A.default)({},t);i.order=e,a.push(i)}}),this._originData=i,(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setData",this).call(this,a)}catch(t){return console.error(t),this}}},{key:"getData",value:function(){return this._originData}},{key:"setStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._setStyles(t),this._update(),this}},{key:"getStyles",value:function(){return this._styles}},{key:"_setStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={default:r(q)};V(t)||(new M.BaseTypeError("RadiationOptions.styles","object",t).error(),t={});for(var n in t){var i=t[n];V(i)||(new M.BaseTypeError("RadiationStyle","object",i).error(),i={}),e[n]=r(i)}this._styles=e}},{key:"_getValidSelectStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?t&&!V(t)?(new M.BaseTypeError("SelectOptions.style","object",t).error(),null):X(t.fillColor)||X(t.strokeColor)||X(t.strokeWidth)?null:W(t.fillColor)?W(t.strokeColor)?U(t.strokeWidth)?t.strokeWidth<0?(console.error("参数错误：RadiationStyle.strokeWidth 应大于或等于 0。"),null):{fillColor:new F.default(t.fillColor).toArray().map(function(t){return 255*t}),strokeColor:new F.default(t.strokeColor).toArray().map(function(t){return 255*t}),strokeWidth:t.strokeWidth}:(new M.BaseTypeError("RadiationStyle.strokeWidth","number",t.strokeWidth).error(),null):(console.error("RadiationStyle.fillColor不合法: ",t.strokeColor),null):(console.error("RadiationStyle.fillColor不合法: ",t.fillColor),null):null}},{key:"_update",value:function(){(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"_update",this).call(this),this._isReady()&&(window.polyfillContext&&window.polyfillContext(this.gl),this._geometry=this._getGeometry(),this._model&&this._model.delete(),this._model=this._getModel(this.gl),this.redraw())}},{key:"_getGeometry",value:function(){for(var t=[],e=100;e>=0;e--){var n=2*e*Math.PI/100,i=1*Math.sin(n),r=1*Math.cos(n);t.push(i,r)}var a=new Float32Array(t);return new x.Geometry({drawMode:P.default.TRIANGLE_FAN,attributes:{positions:{size:2,value:a}},vertexCount:100})}},{key:"_getModel",value:function(t){var e=this;if(!this._isReady())return null;var n=this.data,i=this._styles,r=new Float32Array(4*n.length),a=new Uint16Array(4*n.length),o=new Int16Array(4*n.length),s=new Uint8ClampedArray(3*n.length),l=new Int16Array(n.length),c=new Float32Array(n.length),f=new Int16Array(n.length),d=0;n.forEach(function(t,n){var h=i[t.styleId]||i.default,v=(0,L.splitLatLngNumber)(t.center.getLng()),g=(0,L.splitLatLngNumber)(t.center.getLat());r[4*n]=v.high,r[4*n+1]=g.high,r[4*n+2]=v.low,r[4*n+3]=g.low;var p=(0,u.default)(h.fillColor,4);a[4*n]=p[0],a[4*n+1]=p[1],a[4*n+2]=p[2],a[4*n+3]=p[3];var _=(0,u.default)(h.strokeColor,4);o[4*n]=_[0],o[4*n+1]=_[1],o[4*n+2]=_[2],o[4*n+3]=_[3],l[n]=h.strokeWidth,c[n]=t.radius,f[n]=t.order,n%e.number==0&&(d+=1);var m=e._encodePickingColor(d),y=(0,u.default)(m,3);s[3*n+0]=y[0],s[3*n+1]=y[1],s[3*n+2]=y[2]});var h=new x._Attribute(t,{size:4,isInstanced:!0,value:r}),v=new x._Attribute(t,{size:4,isInstanced:!0,value:a}),g=new x._Attribute(t,{size:4,isInstanced:!0,value:o}),p=new x._Attribute(t,{size:3,isInstanced:!0,value:s}),_=new x._Attribute(t,{size:1,isInstanced:!0,value:l}),m=new x._Attribute(t,{size:1,isInstanced:!0,value:c}),y=new x._Attribute(t,{size:1,isInstanced:!0,value:f}),b=k.radiationVertex,E=k.radiationFragment,A=new x.Model(t,{id:K+this.id,vs:t.isWebGL2?(0,B.transferVertexShader)(b):b,fs:t.isWebGL2?(0,B.transferFragmentShader)(E):E,geometry:this._geometry,isInstanced:!0,instanceCount:n.length,shaderCache:this._shaderCache});return A.setAttributes({instancePositions:h,instanceFillColors:v,instanceStrokeColors:g,instanceStrokeWidths:_,instanceRadius:m,instancePickingColors:p,instanceOrder:y}),A}},{key:"_getValidAnimationOptions",value:function(t,e,n){return"process"===t&&(n.defaultOptions=Q),(0,D.getValidAnimationOptions)(t,e,n)}},{key:"_getUniforms",value:function(){var t={uWaveCount:this.number,uScale:Z,uSelectFillColor:new Uint8ClampedArray([255,255,255,255]),uSelectStrokeColor:new Uint8ClampedArray([255,255,255,255]),uSelectStrokeWidth:1,uEnableBloom:this._enableBloom,uEnableFade:this.hasAnimation("process")};if(this._selectOptions){var e=this._selectOptions.style;t.uSelectFillColor=new Uint8ClampedArray(e?e.fillColor:[255,255,255,255]),t.uSelectStrokeColor=new Uint8ClampedArray(e?e.strokeColor:[0,0,0,255]),t.uSelectStrokeWidth=e?e.strokeWidth:0}return(0,A.default)(t,this._getPickingUniforms())}},{key:"_getGLParams",value:function(){var t;return t={},(0,o.default)(t,P.default.COLOR_CLEAR_VALUE,[0,0,0,.001]),(0,o.default)(t,P.default.CULL_FACE,!0),(0,o.default)(t,P.default.CULL_FACE_MODE,P.default.BACK),(0,o.default)(t,P.default.BLEND,!0),(0,o.default)(t,P.default.BLEND_SRC_RGB,P.default.ONE),(0,o.default)(t,P.default.BLEND_SRC_ALPHA,P.default.ONE),t}}]),e}(w.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(X(t)){var e=new F.default(t).toArray().map(function(t){return 255*t});return e.concat(e)}if(Z(t,!0).result){var n=new F.default(t.stops[0]).toArray().map(function(t){return 255*t}),i=new F.default(t.stops[1]).toArray().map(function(t){return 255*t});return n.concat(i)}console.error("pickStyle得到的color颜色值不合法: ",t)}function a(t){if(z(t))return t;if(W(t)){var e=Date.parse(t);if(!K(e))return e/1e3}else t&&new I.BaseTypeError("Trail.startTime|Trail.endTime","number|string",t).error();return null}function o(t){var e=0,n=0;return t.forEach(function(t){e+=1,t.path&&t.path.forEach(function(){n+=1})}),{lineLength:e,pointLength:n}}Object.defineProperty(e,"__esModule",{value:!0}),e.Trail=void 0;var s=n(21),u=i(s),l=n(22),c=i(l),f=n(11),d=i(f),h=n(12),v=i(h),g=n(8),p=i(g),_=n(9),m=i(_),y=n(16),b=i(y),E=n(24),A=i(E),x=n(15),T=i(x),P=n(44),w=n(13),C=n(19),k=i(C),S=n(306),R=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(S),M=n(14),L=i(M),I=n(20),O=n(45),F=i(O),N=n(65),D=n(26),B=n(28),U=n(33),G=n(34),j=L.default.isFunction,z=L.default.isNumber,W=L.default.isString,H=L.default.isUndefined,V=L.default.isArray,X=L.default.isValidColor,Y=L.default.isValidLatLng,K=L.default.isNaN,q=L.default.isPositiveNumber,Z=L.default.checkGradientObject,Q=B.TYPE_ID.TRAIL,J={color:"#387CEA",width:4,height:0},$=function(){return J},tt=!1,et=!1;e.Trail=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,p.default)(this,e),t.typeId=Q,t.validTypes=["toggle","process"],t.toggleSupportTypes=["fade"],t.processSupportTypes=["flow"];var n=(0,b.default)(this,(e.__proto__||(0,v.default)(e)).call(this,t));t.startTime=a(t.startTime),t.endTime=a(t.endTime),n._options=t,n._setPickStyle(t.pickStyle),n._setLoop(t.startTime,t.endTime),n.setPlayRate(t.playRate),n.setShowDuration(t.showDuration),n._enableBloom=!!t.enableBloom;var i=t.enableGeodesic,r=void 0===i?tt:i;n._enableGeodesic=!!r;var o=t.enableHighlightPoint,s=void 0===o?et:o;return n._enableHighlightPoint=!!s,n}return(0,T.default)(e,t),(0,m.default)(e,[{key:"updateAnimation",value:function(t,n){return"process"===t?console.error("不支持此类型的动画设置 "+t):"_process"===t?(0,A.default)(e.prototype.__proto__||(0,v.default)(e.prototype),"updateAnimation",this).call(this,"process",n):(0,A.default)(e.prototype.__proto__||(0,v.default)(e.prototype),"updateAnimation",this).call(this,t,n),this}},{key:"_updateProcessAnimation",value:function(){var t=this.startTime,e=this.endTime,n=this.playRate,i=void 0===n?1:n;H(t)||H(e)||this.updateAnimation("_process",{animationType:"flow",from:t,to:e,duration:1e3*(e-t)/i},!0)}},{key:"setData",value:function(t){var n=void 0,i=void 0,r=1/0,o=-1/0;if(!V(t))return new I.BaseTypeError("Trail.data","array",t).error(),this;var s=(0,U.clone)(t),u=void 0;try{u=t.map(function(t){var e=(0,d.default)({},t);return V(e.path)||new I.BaseTypeError("TrailLine.path","array",e.path).throw(),e.path.forEach(function(t,e){if(V(t)||new I.BaseTypeError("TrailLine.path元素","array",t).throw(),!Y(t[0],t[1]))throw Error("数据错误：TrailData.path 经纬度数据无效。");var s=void 0;if(H(t[2]))if(e){var u=(0,N.computeDistanceBetween)([t[0],t[1]],[n[0],n[1]]);s=i+u/1}else s=0;else if(s=a(t[2]),!z(s))throw Error("数据错误：TrailData.path 时间数据无效。");r=Math.min(r,s),o=Math.max(o,s),t[2]=s,n=t,i=s}),e})}catch(t){return console.error(t),this}return z(this._options.startTime)||z(this._options.endTime)?z(this._options.startTime)?z(this._options.endTime)||this._setLoop(null,o):this._setLoop(r,null):this._setLoop(r,o),this._minTime=r,this._maxTime=o,this._originData=s,(0,A.default)(e.prototype.__proto__||(0,v.default)(e.prototype),"setData",this).call(this,u)}},{key:"getData",value:function(){return this._originData}},{key:"setPickStyle",value:function(t){return this._setPickStyle(t),this._update(),this}},{key:"getPickStyle",value:function(){return this.pickStyle}},{key:"setShowDuration",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return this.showDuration=this.showDuration||5,z(t)?t<=0?console.error("参数错误：Trail.showDuration 应大于 0 。"):this.showDuration=t:new I.BaseTypeError("Trail.showDuration","number",t).error(),this}},{key:"getShowDuration",value:function(){return this.showDuration}},{key:"setPlayRate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return H(this.playRate)&&(this.playRate=1,this._updateProcessAnimation()),z(t)?q(t)?(this.playRate=t,this._updateProcessAnimation()):console.error("参数错误：DotAnimationOptions.playRate 应该是 正数 ，实际却是 "+t):new I.BaseTypeError("Trail.playRate","number",t).error(),this}},{key:"getPlayRate",value:function(){return this.playRate}},{key:"_setPickStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;j(t)?this.pickStyle=t:(new I.BaseTypeError("Trail.pickStyle","function",t).error(),this.pickStyle=$)}},{key:"_setLoop",value:function(t,e){var n=z(t)?t:this.startTime,i=z(e)?e:this.endTime;n>=i&&console.error("参数错误：Trail.endTime 应大于 Trail.startTime。"),this.startTime=n,this.endTime=i,this._updateProcessAnimation()}},{key:"_update",value:function(){(0,A.default)(e.prototype.__proto__||(0,v.default)(e.prototype),"_update",this).call(this),this._isReady()&&(window.polyfillContext&&window.polyfillContext(this.gl),this._geometry=this._getGeometry(this.data),this._model&&this._model.delete(),this._model=this._getModel(this.gl),this.gl.getExtension("OES_element_index_uint"),this.redraw())}},{key:"_getGeometry",value:function(){var t=new Int8Array([-1,1,-1,-1,1,1,1,-1]);return new w.Geometry({drawMode:k.default.TRIANGLE_STRIP,attributes:{positions:{size:2,value:t}},vertexCount:4})}},{key:"_getModel",value:function(t){var e=this;if(!this._isReady())return null;var n=this.data,i=this._minTime,a=function(t){var n=(0,d.default)({},J,e.pickStyle(t)),i=n.color,r=n.width,a=n.height;return r=r>0?r:J.width,a=a>0?a:J.height,{color:i,width:Math.ceil(r),height:Math.ceil(a)}},o=[];n.forEach(function(t,n){for(var i=t.path,s=a(t),u=s.color,l=s.width,c=s.height,f=e._encodePickingColor(n),d=0;d<i.length-1;d++){var h=r(u);o.push({start:i[d],end:i[d+1],gradientColor:h,width:l,height:c,pickingColor:f})}});var s=o.length,u=new Float32Array(4*s),l=new Float32Array(4*s),f=new Float32Array(4*s),h=new Float32Array(2*s),v=new Uint8Array(2*s),g=new Uint8ClampedArray(3*s),p=new Float32Array(4*s);o.forEach(function(t,e){var n=(0,c.default)(t.start,3),r=n[0],a=n[1],o=n[2],s=(0,c.default)(t.end,3),d=s[0],_=s[1],m=s[2],y=(0,D.splitLatLngNumber)(a),b=(0,D.splitLatLngNumber)(r),E=(0,D.splitLatLngNumber)(_),A=(0,D.splitLatLngNumber)(d);u[4*e]=y.high,u[4*e+1]=b.high,u[4*e+2]=y.low,u[4*e+3]=b.low,l[4*e]=E.high,l[4*e+1]=A.high,l[4*e+2]=E.low,l[4*e+3]=A.low;var x=(0,c.default)(t.gradientColor,8);f[4*e]=x[0],f[4*e+1]=x[1],f[4*e+2]=x[2],f[4*e+3]=x[3],p[4*e]=x[4],p[4*e+1]=x[5],p[4*e+2]=x[6],p[4*e+3]=x[7],h[2*e]=o-i,h[2*e+1]=m-i,v[2*e]=t.width,v[2*e+1]=t.height;var T=(0,c.default)(t.pickingColor,3);g[3*e+0]=T[0],g[3*e+1]=T[1],g[3*e+2]=T[2]});var _=R.trailVertex,m=R.trailFragment,y=new w.Model(t,{id:Q+this.id,vs:t.isWebGL2?(0,G.transferVertexShader)(_):_,fs:t.isWebGL2?(0,G.transferFragmentShader)(m):m,geometry:this._geometry,isInstanced:!0,instanceCount:s,shaderCache:this._shaderCache});return y.setAttributes({instanceStarts:new w._Attribute(t,{size:4,isInstanced:!0,value:u}),instanceEnds:new w._Attribute(t,{size:4,isInstanced:!0,value:l}),instanceColors:new w._Attribute(t,{size:4,isInstanced:!0,value:f}),instanceGradientColors:new w._Attribute(t,{size:4,isInstanced:!0,value:p}),instanceTimes:new w._Attribute(t,{size:2,isInstanced:!0,value:h}),instanceWidthHeight:new w._Attribute(t,{size:2,isInstanced:!0,value:v}),instancePickingColors:new w._Attribute(t,{size:3,isInstanced:!0,value:g})}),y}},{key:"_getValidSelectStyle",value:function(t){return t?H(t.color)||H(t.width)?null:X(t.color)?z(t.width)?{color:new F.default(t.color).toArray().map(function(t){return 255*t}),width:Math.round(t.width)}:(console.error("参数错误：SelectOptions.style.width 宽度值不合法。"),null):(console.error("参数错误：SelectOptions.style.color 颜色值不合法。"),null):null}},{key:"_getUniforms",value:function(){return(0,d.default)({},{showDuration:this.showDuration,uSelectColor:this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.color):new Uint8ClampedArray([255,255,255,255]),uSelectWidth:this._selectOptions.style?this._selectOptions.style.width:J.width,uEnableBloom:this._enableBloom,uCurrTime:this._processFactor-this._minTime,uEnableGeodesic:this._enableGeodesic,uWidthRatio:2,uEnableHighlightPoint:this._enableHighlightPoint},this._getPickingUniforms())}},{key:"_getGLParams",value:function(){var t;return t={},(0,u.default)(t,k.default.BLEND,!0),(0,u.default)(t,k.default.BLEND_SRC_RGB,k.default.SRC_ALPHA),(0,u.default)(t,k.default.BLEND_SRC_ALPHA,k.default.ONE),(0,u.default)(t,k.default.POLYGON_OFFSET_FILL,!0),(0,u.default)(t,k.default.POLYGON_OFFSET_FACTOR,2),(0,u.default)(t,k.default.POLYGON_OFFSET_UNITS,1),t}},{key:"_getDataLength",value:function(){return o(this.data).pointLength}},{key:"draw",value:function(t){this.hasAnimation("process")&&(0,A.default)(e.prototype.__proto__||(0,v.default)(e.prototype),"draw",this).call(this,t)}}]),e}(P.PickableBase)},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Wall=void 0;var a=n(22),o=r(a),s=n(101),u=r(s),l=n(181),c=r(l),f=n(21),d=r(f),h=n(180),v=r(h),g=n(12),p=r(g),_=n(8),m=r(_),y=n(9),b=r(y),E=n(16),A=r(E),x=n(24),T=r(x),P=n(15),w=r(P),C=n(11),k=r(C),S=n(13),R=n(19),M=r(R),L=n(44),I=n(307),O=i(I),F=n(308),N=i(F),D=n(34),B=n(65),U=n(20),G=n(28),j=n(26),z=n(14),W=r(z),H=n(45),V=r(H),X=n(33),Y=n(54),K=n(123),q=W.default.isValidColor,Z=W.default.isNumber,Q=W.default.isString,J=W.default.isValidLatLng,$=W.default.isUndefined,tt=W.default.isNonNegativeNumber,et=W.default.isNull,nt=G.TYPE_ID.WALL,it=[0,100],rt={texture:null,color:"rgba(255,255,255,1)",repeatX:1,repeatY:1,strokeColor:"rgba(29,250,242,1)",strokeWidth:0},at=(0,k.default)({},Y.DEFAULT_PROCESS_ANIMATION,{animationType:"flow",breathAmplitude:.2,flowDirection:"horizontal"});e.Wall=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,m.default)(this,e),t.typeId=nt,t.validTypes=["toggle","process"],t.toggleSupportTypes=["fade","grow"],t.processSupportTypes=["flow","breath"];var n=(0,A.default)(this,(e.__proto__||(0,p.default)(e)).call(this,t));return n._enableBloom=!!t.enableBloom,n._enableAutoClose=!!t.enableAutoClose,n.setStyles(t.styles),n._wallAnimationParams=new Float32Array(2),n.viewport={},n}return(0,w.default)(e,t),(0,b.default)(e,[{key:"_getProcessAnimationType",value:function(){switch((this.getAnimation("process")||{}).animationType){case"breath":return-1;case"flow":default:return 1}}},{key:"setData",value:function(t){var n=this;try{Array.isArray(t)||new U.BaseTypeError("Wall.data","array",t).throw();var i=(0,X.clone)(t),r=(0,X.clone)(t);return r.forEach(function(t){if(($(t)||et(t))&&new U.ClassTypeError("Wall.data","object",t).throw(),Q(t.styleId)){n._styles[t.styleId]||(t.styleId="default")}else new U.BaseTypeError("Wall.data.styleId","string",t.styleId).throw();Array.isArray(t.path)?t.path.length<=1&&console.error("Wall.data.path长度不正确，需要至少2个点"):new U.BaseTypeError("Wall.data.path","array",t.path).throw(),Z(t.height)?t.height<=0?(console.warn("Wall.data.height超出范围限制，自动修正为默认值10"),t.height=10):t.height>5e5&&(console.warn("Wall.data.height超出范围限制，自动修正为最大值"+5e5),t.height=5e5):(console.warn("Wall.data.height类型不正确，自动修正为默认值10"),t.height=10),t.path.forEach(function(t){if(!J(t))throw"包含不合法经纬度数据"})}),this._originData=i,(0,T.default)(e.prototype.__proto__||(0,p.default)(e.prototype),"setData",this).call(this,r)}catch(t){return console.error(t),this}}},{key:"getData",value:function(){return this._originData}},{key:"setStyles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(t.default)&&(t.default=rt);for(var e in t){var n=t[e];this._checkRepeat(n,"repeatX"),this._checkRepeat(n,"repeatY"),this._checkColor(n.strokeColor,"style.strokeColor")||(n.strokeColor=rt.strokeColor),$(n.strokeWidth)&&(n.strokeWidth=rt.strokeWidth),tt(n.strokeWidth)||(console.error("参数错误：SelectOptions.style.strokeWidth 要求为非负数，传入值为"+n.strokeWidth+"。"),n.strokeWidth=rt.strokeWidth)}return this._hasTexture=!1,this._texture=null,this._styles=t,this._genTexture(t),this}},{key:"_checkRepeat",value:function(t,e){Z(t[e])?t[e]<=it[0]?(t[e]=1,console.warn("style."+e+"超出取值范围 ("+it[0]+","+it[1]+"]，被设为默认值1")):t[e]>it[1]&&(t[e]=it[1],console.warn("style."+e+"超出取值范围 ("+it[0]+","+it[1]+"]，被设为最大值"+it[1])):($(t[e])||new U.BaseTypeError("style."+e,"number",t[e]).error(),t[e]=1)}},{key:"_genTexture",value:function(){function t(t){return e.apply(this,arguments)}var e=(0,v.default)(c.default.mark(function t(e){var n,i,r,a,o,s,u,l,f,h,v,g,p,_,m;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=this,this._styleUvMap={},r={};for(a in e)o=e[a],o.texture&&(r[o.texture]?r[o.texture].push(a):r[o.texture]=[a]);s=0,t.t0=c.default.keys(r);case 7:if((t.t1=t.t0()).done){t.next=16;break}return u=t.t1.value,t.next=11,(0,S.loadImage)(u);case 11:l=t.sent,n.push({image:l,styleIds:r[u],index:s}),s+=1,t.next=7;break;case 16:return f=0,h=Math.min(512,K.MAX_TEXTURE_SIZE),n.length>0&&(n.sort(function(t,e){return t.index>e.index}),n.forEach(function(t){f+=h*t.image.height/t.image.width}),g=f<=K.MAX_TEXTURE_SIZE?1:1/Math.pow(2,Math.ceil(Math.log(f/K.MAX_TEXTURE_SIZE)/Math.LN2)),h*=g,f*=g,p=document.createElement("canvas"),_=p.getContext("2d"),p.width=h,p.height=f,m=0,n.forEach(function(t){var e=h*t.image.height/t.image.width;t.styleIds.forEach(function(t){i._styleUvMap[t]={topY:1-m/f,bottomY:1-(m+e)/f}}),_.drawImage(t.image,0,m,h,e),m+=e}),this._texture=new S.Texture2D(this.gl,{data:p,parameters:(v={},(0,d.default)(v,M.default.TEXTURE_WRAP_S,M.default.CLAMP_TO_EDGE),(0,d.default)(v,M.default.TEXTURE_WRAP_T,M.default.CLAMP_TO_EDGE),(0,d.default)(v,M.default.TEXTURE_MAG_FILTER,M.default.LINEAR),(0,d.default)(v,M.default.TEXTURE_MIN_FILTER,M.default.LINEAR),v)}),this._hasTexture=!0),this._update(),t.abrupt("return",this);case 22:case"end":return t.stop()}},t,this)}));return t}()},{key:"_update",value:function(){if((0,T.default)(e.prototype.__proto__||(0,p.default)(e.prototype),"_update",this).call(this),this._isReady()){window.polyfillContext&&window.polyfillContext(this.gl),this.viewport.resolution||(this.viewport.resolution=new Float32Array([this.transform.width,this.transform.height]));var t=(0,K.getColorsList)(this._styles,"color",rt.color,!0),n=(0,K.genGradientTexture)(t,this.gl);this._gradientUvMap=n.gradientUvMap,this._gradientTexture=n.gradientTexture,this.geometry||(this.geometry=this._getGeometry()),this._model&&this._model.delete(),this._model=this._getModel(this.gl),this.redraw()}}},{key:"_getGeometry",value:function(){var t=new Float32Array([-1,1,-1,-1,1,1,1,-1]),e=new Float32Array([0,1,0,0,1,1,1,0]);return new S.Geometry({drawMode:M.default.TRIANGLE_STRIP,attributes:{positions:{size:2,value:t},texCoords:{size:2,value:e}},vertexCount:4})}},{key:"_getValidAnimationOptions",value:function(t,e,n){if("process"===t){n.defaultOptions=at;var i=(0,Y.getValidAnimationOptions)(t,e,n),r=i.breathAmplitude,a=i.flowDirection;Z(r)||(new U.BaseTypeError("WallAnimationOptions.breathAmplitude","number",r).error(),i.breathAmplitude=.2);var o=["horizontal","vertical"];return Q(a)?o.includes(a)||(new U.EnumError("WallAnimationOptions.flowDirection",o,a).error(),i.flowDirection="horizontal"):(new U.BaseTypeError("WallAnimationOptions.flowDirection","string",a).error(),i.flowDirection="horizontal"),i}return Y.getValidAnimationOptions.apply(void 0,arguments)}},{key:"_getWallAnimationParams",value:function(){var t=this.getAnimation("process")||{};switch(this._wallAnimationParams[0]=t.breathAmplitude||.2,t.flowDirection){case"vertical":this._wallAnimationParams[1]=-1;break;case"horizontal":default:this._wallAnimationParams[1]=1}return this._wallAnimationParams}},{key:"_getValidSelectStyle",value:function(t){return t&&this._checkColor(t.color,"SelectOptions.style.color")&&this._checkColor(t.strokeColor,"SelectOptions.style.color")?$(t.strokeWidth)?null:tt(t.strokeWidth)?{color:this._formatColor(t.color),strokeColor:this._formatColor(t.strokeColor),strokeWidth:t.strokeWidth}:(console.error("参数错误：SelectOptions.style.strokeWidth 要求为非负数，传入值为"+t.strokeWidth+"。"),null):null}},{key:"_checkColor",value:function(t,e){return!$(t)&&(!!q(t)||(console.error("参数错误："+e+"颜色值不合法，传入值为"+t+"。"),!1))}},{key:"_formatColor",value:function(t){return new V.default(t).toArray().map(function(t){return 255*t})}},{key:"_getUniforms",value:function(t){var e={uHasTexture:!!this._hasTexture,uWallAnimationParams:this._getWallAnimationParams(),uEnableBloom:this._enableBloom,uGradientTexture:this._gradientTexture,uViewSize:new Float32Array([t.view.right,t.view.top]),uResolution:this.viewport.resolution,uEnableAutoClose:this._enableAutoClose};return this._selectOptions&&(e.uSelectColor=this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.color):new Uint8ClampedArray(this._formatColor(rt.color)),e.uSelectStrokeColor=this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.strokeColor):new Uint8ClampedArray(this._formatColor(rt.strokeColor)),e.uSelectStrokeWidth=this._selectOptions.style?this._selectOptions.style.strokeWidth:rt.strokeWidth),this._hasTexture&&(e.uTexture=this._texture),(0,k.default)({},e,this._getPickingUniforms())}},{key:"_getGLParams",value:function(){var t;return t={},(0,d.default)(t,M.default.DEPTH_TEST,!0),(0,d.default)(t,M.default.CULL_FACE,!1),t}},{key:"_getModel",value:function(t){if(!this._isReady())return null;if(!this._styles)return null;var e=this._createSegments(),n=e.segmentList,i=e.strokeSegmentList,r=this._createWallModel(n,t),a=this._createWallStrokeModel(i,t);return{render:function(t){r.render(t),a.render(t)},delete:function(){r.delete(),a.delete()}}}},{key:"_createSegments",value:function(){var t=this,e=[],n=[];return this.data.forEach(function(i,r){var a=t._encodePickingColor(r),o=i.path,s=0,l=[],c=o.length;!t._enableAutoClose||o[c-1].lat===o[0].lat&&o[c-1].lng===o[0].lng||(o.push(o[0]),c+=1);for(var f=0;f<c;f++)if(0===f)l.push(0);else{var d=o[f-1],h=o[f],v=(0,B.computeDistanceBetween)([d.getLat(),d.getLng()],[h.getLat(),h.getLng()]);s+=v,l.push(s)}for(var g=t._styles[i.styleId]||rt,p=l.map(function(t){return t/s*(g.repeatX||1)}),_=i.height,m=t._styleUvMap[i.styleId]||{topY:-1,bottomY:-1},y=t._gradientUvMap[i.styleId]?t._gradientUvMap[i.styleId]:t._gradientUvMap.default?t._gradientUvMap.default:{topY:-1,bottomY:-1},b=g.repeatX,E=g.repeatY,A=g.strokeWidth,x=new V.default(g.strokeColor).toArray().map(function(t){return 255*t}),T=0;T<c-1;T++){var P={percent1:p[T],percent2:p[T+1],start:o[T],end:o[T+1],pickingColor:a,height:_,repeatX:b,repeatY:E};e.push((0,u.default)({},P,{uvPercent:m,uvGradientPercent:y}));var w=(0,u.default)({},P,{strokeWidth:A,strokeColor:x});0===T?n.push((0,u.default)({},w,{percent1:0,percent2:0,percentY:[0,1],start:o[T],end:o[T]})):T===c-2&&n.push((0,u.default)({},w,{percent1:p[T+1],percent2:p[T+1],percentY:[1,0],start:o[T+1],end:o[T+1]})),n.push((0,u.default)({},w,{percent1:p[T],percent2:p[T+1],percentY:[1,1],start:o[T],end:o[T+1]})),n.push((0,u.default)({},w,{percent1:p[T+1],percent2:p[T],percentY:[0,0],start:o[T+1],end:o[T]}))}}),{segmentList:e,strokeSegmentList:n}}},{key:"_createWallModel",value:function(t,e){var n=t.length,i=O.wallVertex,r=O.wallFragment,a=new S.Model(e,{id:nt+this.id,vs:e.isWebGL2?(0,D.transferVertexShader)(i):i,fs:e.isWebGL2?(0,D.transferFragmentShader)(r):r,geometry:this.geometry,isInstanced:!0,instanceCount:n,shaderCache:this._shaderCache});this._setCommonAttri(a,t,e);var o=new Float32Array(2*n),s=new Float32Array(2*n);return t.forEach(function(t,e){o[2*e]=t.uvPercent.topY,o[2*e+1]=t.uvPercent.bottomY,s[2*e]=t.uvGradientPercent.topY,s[2*e+1]=t.uvGradientPercent.bottomY}),a.setAttributes({instanceUvPercents:new S._Attribute(e,{size:2,isInstanced:!0,value:o}),instanceUvGradientPercents:new S._Attribute(e,{size:2,isInstanced:!0,value:s})}),a}},{key:"_createWallStrokeModel",value:function(t,e){var n=t.length,i=N.wallStrokeVertex,r=N.wallStrokeFragment,a=new S.Model(e,{id:nt+"_stoke_"+this.id,vs:e.isWebGL2?(0,D.transferVertexShader)(i):i,fs:e.isWebGL2?(0,D.transferFragmentShader)(r):r,geometry:this.geometry,isInstanced:!0,instanceCount:n,shaderCache:this._shaderCache});this._setCommonAttri(a,t,e);var s=new Float32Array(2*n),u=new Float32Array(4*n),l=new Float32Array(1*n);return t.forEach(function(t,e){var n=(0,o.default)(t.percentY,2);s[2*e]=n[0],s[2*e+1]=n[1];var i=(0,o.default)(t.strokeColor,4);u[4*e+0]=i[0],u[4*e+1]=i[1],u[4*e+2]=i[2],u[4*e+3]=i[3],l[e]=t.strokeWidth}),a.setAttributes({instancePercentYs:new S._Attribute(e,{size:2,isInstanced:!0,value:s}),instanceColor:new S._Attribute(e,{size:4,isInstanced:!0,value:u}),instanceWidth:new S._Attribute(e,{size:1,isInstanced:!0,value:l})}),a}},{key:"_setCommonAttri",value:function(t,e,n){var i=e.length,r=new Float32Array(4*i),a=new Float32Array(4*i),s=new Uint8ClampedArray(3*i),u=new Float32Array(1*i),l=new Float32Array(2*i),c=new Float32Array(2*i);e.forEach(function(t,e){var n=(0,j.splitLatLngNumber)(t.start.getLng()),i=(0,j.splitLatLngNumber)(t.start.getLat()),f=(0,j.splitLatLngNumber)(t.end.getLng()),d=(0,j.splitLatLngNumber)(t.end.getLat());r[4*e]=n.high,r[4*e+1]=i.high,r[4*e+2]=n.low,r[4*e+3]=i.low,u[e]=t.height,l[2*e]=t.percent1,l[2*e+1]=t.percent2,a[4*e]=f.high,a[4*e+1]=d.high,a[4*e+2]=f.low,a[4*e+3]=d.low;var h=(0,o.default)(t.pickingColor,3);s[3*e+0]=h[0],s[3*e+1]=h[1],s[3*e+2]=h[2],c[2*e]=t.repeatX,c[2*e+1]=t.repeatY}),t.setAttributes({instanceStarts:new S._Attribute(n,{size:4,isInstanced:!0,value:r}),instanceEnds:new S._Attribute(n,{size:4,isInstanced:!0,value:a}),instancePercents:new S._Attribute(n,{size:2,isInstanced:!0,value:l}),instancePickingColors:new S._Attribute(n,{size:3,isInstanced:!0,value:s}),instanceHeights:new S._Attribute(n,{size:1,isInstanced:!0,value:u}),instanceRepeats:new S._Attribute(n,{size:2,isInstanced:!0,value:c})})}}]),e}(L.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(nt(t.animatable)||new W.DeprecatedError("ArcOptions.animatable","ArcOptions.processAnimation").warn(),nt(t.opacity)||new W.DeprecatedError("ArcOptions.opacity","ArcStyle中的color设置透明度").warn(),nt(t.width)||new W.DeprecatedError("ArcOptions.width","ArcStyle中的width").warn(),t.processAnimation)return t.processAnimation;var e=t.animatable;return{enable:void 0===e?ct:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var a=n(21),o=i(a),s=n(22),u=i(s),l=n(100),c=i(l),f=n(35),d=i(f),h=n(12),v=i(h),g=n(8),p=i(g),_=n(9),m=i(_),y=n(16),b=i(y),E=n(24),A=i(E),x=n(15),T=i(x),P=n(11),w=i(P),C=n(101),k=i(C),S=n(13),R=n(19),M=i(R),L=n(173),I=i(L),O=n(44),F=n(297),N=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(F),D=n(34),B=n(45),U=i(B),G=n(14),j=i(G),z=n(39),W=n(20),H=n(26),V=n(28),X=n(54),Y=n(285),K=i(Y),q=n(65),Z=n(33),Q=j.default.isArray,J=j.default.isNumber,$=j.default.isFunction,tt=j.default.isValidLatLng,et=j.default.isValidColor,nt=j.default.isUndefined,it=j.default.isString,rt=j.default.isBoolean,at=j.default.isInRange,ot=j.default.checkGradientObject,st=V.TYPE_ID.ARC,ut={color:"rgba(56, 124, 234, 0.3)",animateColor:"rgba(29, 211, 253, 1)",width:4},lt=function(t){return t?function(){return(0,k.default)({},ut,{width:t})}:function(){return ut}},ct=!0,ft=(0,w.default)({},X.DEFAULT_PROCESS_ANIMATION,{animationType:"flow",duration:3e3}),dt={horizontal:0,vertical:1};e.Arc=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,p.default)(this,e),t.typeId=st,t.validTypes=["toggle","process"],t.toggleSupportTypes=["fade","grow"],t.processSupportTypes=["flow"],t.processAnimation=r(t);var n=(0,b.default)(this,(e.__proto__||(0,v.default)(e)).call(this,t));return n._enableBloom=!!t.enableBloom,n._enableGeodesic=!!t.enableGeodesic,n._checkParameters(t),n.viewport={},n}return(0,T.default)(e,t),(0,m.default)(e,[{key:"setData",value:function(t){return Q(t)?(this._originData=(0,Z.clone)(t),(0,A.default)(e.prototype.__proto__||(0,v.default)(e.prototype),"setData",this).call(this,t)):(new W.BaseTypeError("Arc.data","array",t).error(),this)}},{key:"getData",value:function(){return this._originData}},{key:"setAnimatable",value:function(t){return new W.DeprecatedError("setAnimatable","ArcAnimationOptions中的enable").warn(),rt(t)?(this._animates.process.enable=t,this.updateAnimation("process",this._animates.process)):new W.BaseTypeError("Arc.animatable","boolean",t).error(),this}},{key:"getAnimatable",value:function(){return new W.DeprecatedError("getAnimatable","ArcAnimationOptions中的enable").warn(),this._animates.process.enable}},{key:"setPickStyle",value:function(t){return $(t)?(this._pickStyle=t,this._update(),this):(new W.BaseTypeError("Arc.pickStyle","function",t).error(),this)}},{key:"getPickStyle",value:function(){return this._pickStyle}},{key:"setCurvature",value:function(t){return J(t)?t<=0||t>1?(console.error("参数错误：Arc.curvature 取值范围为(0,1]，传入了"+t+"。"),this):(this._curvature=t,this):(new W.BaseTypeError("Arc.curvature","Number",t).error(),this)}},{key:"getCurvature",value:function(){return this._curvature}},{key:"setMode",value:function(t){return it(t)?t in dt?(this._mode=t in dt?dt[t]:dt.vertical,this):(console.error('参数错误：Arc.mode 应为"vertical"或"horizonral".'),this):(new W.BaseTypeError("Arc.mode","String",t).error(),this)}},{key:"getMode",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=(0,d.default)((0,c.default)(dt));!(t=(i=r.next()).done);t=!0){var a=(0,u.default)(i.value,2),o=a[0];if(a[1]===this._mode)return o}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}}},{key:"setAnimDuration",value:function(t){return new W.DeprecatedError("setAnimDuration","ArcAnimationOptions中的duration").warn(),J(t)&&t>0?(this._animates.process.duration=t,this.updateAnimation("process",this._animates.process)):console.error("参数错误：Arc.animDuration 应为数字类型且大于0"),this}},{key:"getAnimDuration",value:function(){return new W.DeprecatedError("getAnimDuration","ArcAnimationOptions中的duration").warn(),this._animates.process.duration}},{key:"setHighlightDuration",value:function(t){return new W.DeprecatedError("setHighlightDuration","ArcAnimationOptions中的tailFactor").warn(),J(t)&&t>0&&t<=this._animates.process.duration?this._animates.process.tailFactor=t/this._animates.process.duration:console.error("参数错误：Arc.highlightDuration 应为数字类型，大于0且小于等于过程动画总时长"),this}},{key:"getHighlightDuration",value:function(){return new W.DeprecatedError("getHighlightDuration","ArcAnimationOptions中的tailFactor").warn(),this._animates.process.tailFactor*this._animates.process.duration}},{key:"_checkParameters",value:function(t){var e=t.pickStyle,n=t.opacity,i=void 0===n?.5:n,r=t.width,a=void 0===r?ut.width:r,o=t.mode,s=void 0===o?"vertical":o,u=t.curvature,l=void 0===u?.6:u;J(a)?a<=0?(console.error("参数错误：Arc.width 应大于0."),this._width=ut.width):this._width=Math.round(a)||ut.width:(new W.BaseTypeError("Arc.width","number",a).error(),this._width=ut.width),nt(e)?this._pickStyle=lt(this._width):$(e)?this._pickStyle=e:(new W.BaseTypeError("Arc.pickStyle","function",e).error(),this._pickStyle=lt(this._width)),J(i)?i<0||i>1?(console.error("参数错误：Arc.opacity 取值范围在0-1之间，实际传入: "+i+"."),this._opacity=.5):this._opacity=i||.5:(new W.BaseTypeError("Arc.opacity","number",i).error(),this._opacity=.5),this.setCurvature(l),this._mode=s in dt?dt[s]:dt.vertical}},{key:"_update",value:function(){(0,A.default)(e.prototype.__proto__||(0,v.default)(e.prototype),"_update",this).call(this),this._isReady()&&(window.polyfillContext&&window.polyfillContext(this.gl),this.viewport.resolution||(this.viewport.resolution=new Float32Array([this.transform.width,this.transform.height])),this.geometry||(this.geometry=this._getGeometry()),this._updateModel())}},{key:"_updateModel",value:function(){this._isReady()&&(this._model&&(this._antiAliasEffect&&this._antiAliasEffect.removeModel(this._model),this._model.delete(),this._model=null),this._antiAliasEffect||(this._antiAliasEffect=new I.default(this.gl)),this._antiAliasEffect.updateContext(this.gl),this._model=this._getModel(this.gl),this.redraw())}},{key:"_getGeometry",value:function(){for(var t=new Int8Array(400),e=0;e<100;e++){var n=4*e;t[n]=e,t[n+1]=1,t[n+2]=e,t[n+3]=-1}return new S.Geometry({drawMode:M.default.TRIANGLE_STRIP,attributes:{positions:{size:2,value:t}},vertexCount:t.length/2})}},{key:"_formatColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(z.RGBA_REG.test(t))return new U.default(t).toArray().map(function(t){return 255*t});var n=255*e;return new U.default(t).toArray().map(function(t,e){return 3===e?n:255*t})}},{key:"_formatColors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[];return t.forEach(function(t){if(z.RGBA_REG.test(t)){var i=new U.default(t).toArray().map(function(t){return 255*t});n=n.concat(i)}else{var r=255*e,a=new U.default(t).toArray().map(function(t,e){return 3===e?r:255*t});n=n.concat(a)}}),n}},{key:"_getModel",value:function(t){var e=this;if(!this._isReady())return null;var n=function(t){var n=e._pickStyle(t)||(0,k.default)({},ut,{width:e._width}),i=n.color,r=void 0===i?ut.color:i,a=n.animateColor,o=void 0===a?ut.animateColor:a,s=n.width,u=void 0===s?e._width:s,l=[],c=ot(r,!0);return et(r)?l=[r,r]:c.result?l=[c.gradient.stops[0],c.gradient.stops[1]]:console.error("pickStyle得到的color颜色值不合法: ",r),et(o)||(console.error("pickStyle得到的animateColor颜色值不合法: ",o),o=ut.animateColor),J(u)&&u>0||(console.error("pickStyle得到的width宽度值不合法: ",u),u=e._width),{color:e._formatColors(l,e._opacity),animateColor:e._formatColor(o,e._opacity),width:Math.round(u)||e._width}},i=new Float32Array(4*this.data.length),r=new Float32Array(4*this.data.length),a=new Uint8ClampedArray(4*this.data.length),o=new Uint8ClampedArray(4*this.data.length),s=new Uint8ClampedArray(4*this.data.length),l=new Uint8ClampedArray(this.data.length),c=new Uint8ClampedArray(3*this.data.length),f=new Float32Array(this.data.length);this.data.forEach(function(t,d){if(e._checkFromTo(t,d)){var h=(0,H.splitLatLngNumber)(t.from.lng),v=(0,H.splitLatLngNumber)(t.from.lat),g=(0,H.splitLatLngNumber)(t.to.lng),p=(0,H.splitLatLngNumber)(t.to.lat);i[4*d]=h.high,i[4*d+1]=v.high,i[4*d+2]=h.low,i[4*d+3]=v.low,r[4*d]=g.high,r[4*d+1]=p.high,r[4*d+2]=g.low,r[4*d+3]=p.low;var _=e._checkTilt(t.tilt,d);f[d]=_;var m=n(t),y=(0,u.default)(m.color,8);a[4*d+0]=y[0],a[4*d+1]=y[1],a[4*d+2]=y[2],a[4*d+3]=y[3],o[4*d+0]=y[4],o[4*d+1]=y[5],o[4*d+2]=y[6],o[4*d+3]=y[7];var b=(0,u.default)(m.animateColor,4);s[4*d+0]=b[0],s[4*d+1]=b[1],s[4*d+2]=b[2],s[4*d+3]=b[3],l[d]=m.width;var E=e._encodePickingColor(d),A=(0,u.default)(E,3);c[3*d+0]=A[0],c[3*d+1]=A[1],c[3*d+2]=A[2]}});var d=new S._Attribute(this.gl,{size:4,isInstanced:!0,value:i}),h=new S._Attribute(this.gl,{size:4,isInstanced:!0,value:r}),v=new S._Attribute(this.gl,{size:4,isInstanced:!0,value:a}),g=new S._Attribute(this.gl,{size:4,isInstanced:!0,value:o}),p=new S._Attribute(this.gl,{size:4,isInstanced:!0,value:s}),_=new S._Attribute(t,{size:1,isInstanced:!0,value:l}),m=new S._Attribute(this.gl,{size:3,isInstanced:!0,value:c}),y=new S._Attribute(t,{size:1,isInstanced:!0,value:f}),b=N.arcVertex,E=N.arcFragment,A=new S.Model(t,{id:st+this.id,vs:t.isWebGL2?(0,D.transferVertexShader)(b):b,fs:t.isWebGL2?(0,D.transferFragmentShader)(E):E,geometry:this.geometry,isInstanced:!0,instanceCount:this.data.length,shaderCache:this._shaderCache});return A.setAttributes({instanceFromPositions:d,instanceToPositions:h,instanceColors:v,instanceGradientColors:g,instanceAnimateColors:p,instanceWidth:_,instancePickingColors:m,instanceTilt:y}),A}},{key:"_checkFromTo",value:function(t,e){return t.from&&t.to?!(!tt(t.from)||!tt(t.to))||(console.error("数据错误：弧线 "+e+" 的经纬度数据无效。"),!1):(console.error("数据错误： 弧线 "+e+" 的数据无效"),!1)}},{key:"_checkTilt",value:function(t,e){var n=0;return nt(t)||(J(t)?t<-90||t>90?(console.error("参数错误: 弧线 "+e+" 的tilt值应在[-90, 90]范围内。",t),n=0):n=t:(new W.BaseTypeError("弧线 "+e+" 的tilt值","Number",t).error(),n=0)),n}},{key:"_getValidSelectStyle",value:function(t){return t?nt(t.color)||nt(t.animateColor)||nt(t.width)?null:et(t.color)?et(t.animateColor)?J(t.width)?{color:this._formatColor(t.color),animateColor:this._formatColor(t.animateColor),width:Math.round(t.width)}:(console.error("参数错误：SelectOptions.style.width 宽度值不合法。"),null):(console.error("参数错误：SelectOptions.style.animateColor 颜色值不合法。"),null):(console.error("参数错误：SelectOptions.style.color 颜色值不合法。"),null):null}},{key:"_getUniforms",value:function(){return(0,w.default)({},z.LIGHT_SETTINGS,{curvature:this._curvature,numSegments:100,mode:this._mode,uResolution:this.viewport.resolution,uPixelsPerMeter:new Float32Array((0,q.getDistanceScales)(this.map).pixelsPerMeter),uSelectColor:this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.color):new Uint8ClampedArray([255,255,255,255]),uSelectAnimateColor:this._selectOptions.style?new Uint8ClampedArray(this._selectOptions.style.animateColor):new Uint8ClampedArray([255,255,255,255]),uSelectWidth:this._selectOptions.style?this._selectOptions.style.width:ut.width,uEnableBloom:this._enableBloom,uTailFactor:this._animates.process.tailFactor,uEnableGeodesic:this._enableGeodesic},this._getPickingUniforms())}},{key:"_getGLParams",value:function(){var t;return t={},(0,o.default)(t,M.default.COLOR_CLEAR_VALUE,[0,0,0,.001]),(0,o.default)(t,M.default.CULL_FACE,!0),(0,o.default)(t,M.default.CULL_FACE_MODE,M.default.BACK),t}},{key:"_getValidAnimationOptions",value:function(t,e,n){if("process"===t){n.defaultOptions=ft;var i=(0,X.getValidAnimationOptions)(t,e,n),r=e.tailFactor,a=void 0===r?.3:r;return!J(a)||a<0||a>1?(new W.BaseTypeError("ArcAnimationOptions.tailFactor","number",a),i.tailFactor=.3):at(0,1)?i.tailFactor=a:(console.error("取值范围错误：ArcAnimationOptions.tailFactor 取值范围为(0,1]，传入值为 "+i.tailFactor),i.tailFactor=.3),i}return X.getValidAnimationOptions.apply(void 0,arguments)}},{key:"getMidPositions",value:function(){var t=this,e=[];return this.data?this.data.forEach(function(n,i){if(t._checkFromTo(n,i)){var r=t._checkTilt(n.tilt,i),a=(0,K.default)(n.from,n.to,t._curvature,t._mode,r);e.push(a)}}):console.error("Arc的数据为空，请先调用setdata设置数据"),e}}]),e}(O.PickableBase)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t*(Math.PI/180)}function a(t,e){var n=r(t.lat),i=r(e.lat);return 2*d*Math.asin(Math.sqrt(Math.pow(Math.sin((n-i)/2),2)+Math.cos(n)*Math.cos(i)*Math.pow(Math.sin((r(t.lng)-r(e.lng))/2),2)))}function o(t,e,n){var i=a(t,e),r=n*Math.PI*.5,o=i/2/Math.sin(r);return o-Math.cos(r)*o}function s(t,e,n,i){var s=o(t,e,n),u=s*Math.cos(r(i)),c=[t.lng,t.lat],d=[e.lng,e.lat],h=g(c),p=g(d),_=[(h[0]+p[0])/2,(h[1]+p[1])/2];if(s<f.default){var m=v(_),y=(0,l.default)(m,2),b=y[0],E=y[1];return new TMap.LatLng(E,b,s)}var A=a(t,e),x={x:(p[0]-h[0])/A,y:(p[1]-h[1])/A},T=x.y*s*Math.sin(r(i)),P=-x.x*s*Math.sin(r(i)),w=[_[0]+T,_[1]+P],C=v(w),k=(0,l.default)(C,2),S=k[0],R=k[1];return new TMap.LatLng(R,S,u)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(22),l=i(u),c=n(323),f=i(c),d=6378136.49,h=Math.PI*d,v=function(t){var e=(0,l.default)(t,2),n=e[0],i=e[1];return n=n/h*180,i=i/h*180,i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2),[n,i]},g=function(t){var e=(0,l.default)(t,2),n=e[0],i=e[1];return n=n*h/180,i=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180),i=i*h/180,[n,i]},p=function(t,e,n,i){var r=[],a=g(t),o=(0,l.default)(a,2),s=o[0],u=o[1],c=g(e),f=(0,l.default)(c,2),d=f[0],h=f[1];if(n*n<((d-s)*(d-s)+(h-u)*(h-u))/4)r=[(s+d)/2,(u+h)/2];else if(s===d){var p=(u+h)/2,_=0;_="right"===i?s+Math.sqrt(n*n-(h-u)/2*((h-u)/2)):s-Math.sqrt(n*n-(h-u)/2*((h-u)/2)),r=[_,p]}else if(u===h){var m=(s+d)/2,y=0;y="right"===i?u+Math.sqrt(n*n-(d-s)/2*((d-s)/2)):u-Math.sqrt(n*n-(d-s)/2*((d-s)/2)),r=[m,y]}else{var b=(d*d-s*s+h*h-u*u)/(2*(d-s)),E=(h-u)/(d-s),A=E*E+1,x=2*s*E-2*b*E-2*u,T=s*s-2*s*b+b*b+u*u-n*n,P=x*x-4*A*T;if(P>=0){var w=0,C=0,k=Math.sqrt(P);C="right"===i?s>d?(-x+k)/2/A:(-x-k)/2/A:s>d?(-x-k)/2/A:(-x+k)/2/A,w=b-E*C,r=[w,C]}else r=[(s+d)/2,(u+h)/2]}return v(r)},_=function(t,e){var n=g(t),i=(0,l.default)(n,2),r=i[0],a=i[1],o=g(e),s=(0,l.default)(o,2),u=s[0],c=s[1],f=u-r,d=c-a,h=Math.sqrt(f*f+d*d);return 0===f?0===d?0:d>0?90:270:f>0?0===d?0:d>0?180/Math.PI*Math.asin(d/h):360+180/Math.PI*Math.asin(d/h):180-180/Math.PI*Math.asin(d/h)},m=function(t,e,n){var i=g(t),r=(0,l.default)(i,2),a=r[0],o=r[1],s=g(e),u=(0,l.default)(s,2),c=u[0],f=u[1];return Math.sqrt((c-a)*(c-a)+(f-o)*(f-o))/2/Math.sin(n/2)},y=function(t,e,n){t=[t.lng,t.lat],e=[e.lng,e.lat];var i=n*Math.PI,r=m(t,e,i),a=p(t,e,r,"right"),o=g(a),s=void 0;s=_(a,e);var u=r*Math.cos(i/2),l=r*Math.sin(i/2),c=Math.cos(s/180*Math.PI)*u-Math.sin(s/180*Math.PI)*l,f=Math.cos(s/180*Math.PI)*l+Math.sin(s/180*Math.PI)*u;c+=o[0],f+=o[1];var d=[c,f],h=v(d);return new TMap.LatLng(h[1],h[0],0)},b=function(t,e,n,i,r){var a=null;return 0===i?a=y(t,e,n):1===i&&(a=s(t,e,n,r)),a};e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){var i=a(e,n,t),r=i.gridHash,s=i.gridOffset;return{gridOffset:s,layerData:o(r,s)}}function a(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=1/0,r=-1/0,a=void 0,o=0;o<n.length;o++){var u=e(n[o]);a=(0,h.default)(u,2)[1],(0,g.default)(a)&&(i=a<i?a:i,r=a>r?a:r)}var l=(i+r)/2,c=s(t,l);return c.xOffset<=0||c.yOffset<=0?{gridHash:{},gridOffset:c}:{gridHash:n.reduce(function(t,n,i){var r=e(n),a=(0,h.default)(r,2),o=a[0],s=a[1];if(!(0,g.default)(s)||!(0,g.default)(o))return t;var u=Math.floor(s/c.yOffset),l=Math.floor(o/c.xOffset),f=u+"_"+l;return t[f]=t[f]||{count:0,points:[],indexes:[]},t[f].count+=1,t[f].points.push(n),t[f].indexes.push(i),t},{}),gridOffset:c}}function o(t,e){return(0,f.default)(t).reduce(function(n,i,r){var a=i.split("_"),o=parseInt(a[0],10),s=parseInt(a[1],10);return n.push((0,_.default)({index:r,position:[e.xOffset*(s+.5),e.yOffset*(o+.5)]},t[i])),n},[])}function s(t,e){return{yOffset:u(t),xOffset:l(e,t)}}function u(t){return t/P.R_EARTH*(180/Math.PI)}function l(t,e){return e/P.R_EARTH*(180/Math.PI)/Math.cos(t*Math.PI/180)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(55),f=i(c),d=n(22),h=i(d),v=n(125),g=i(v),p=n(11),_=i(p),m=n(8),y=i(m),b=n(9),E=i(b);e.pointToDensityGridData=r;var A=n(404),x=n(45),T=i(x),P=n(39),w=function(){function t(e){(0,y.default)(this,t),this.colorValueDomain=e.showRange,this.elevationValueDomain=e.showRange,this.elevationRange=e.heightRange,this.defaultColor=[255,255,255,255],this.setColorList(e.colorList)}return(0,E.default)(t,[{key:"setShowRange",value:function(t){this.setColorValueDomain(t),this.setElevationValueDomain(t)}},{key:"setColorValueDomain",value:function(t){this.colorValueDomain=t}},{key:"setColorList",value:function(t){this.colorList=t;var e=t.map(function(t){return new T.default(t).toArray().map(function(t){return 255*t})});return this.setColorRange(e),this}},{key:"getColorList",value:function(){return this.colorList}},{key:"setColorRange",value:function(t){this.colorRange=t}},{key:"setElevationValueDomain",value:function(t){this.elevationValueDomain=t}},{key:"setElevationRange",value:function(t){this.elevationRange=t}},{key:"setDefaultColor",value:function(t){this.defaultColor=t}},{key:"aggregatorHexagon",value:function(t,e){var n=t.data,i=t.radius,r=t.getPosition,a=this.getRadiusInPixel(i,e),o=n.map(function(t,n){return(0,_.default)({screenCoord:e.projectFlat(r(t)),index:n},t)});return{hexagons:(0,A.hexbin)().radius(a).x(function(t){return t.screenCoord[0]}).y(function(t){return t.screenCoord[1]})(o).map(function(t,i){return{centroid:e.unprojectFlat([t.x,t.y]),points:t.map(function(t){return n[t.index]}),count:t.reduce(function(t,e){return t+(e.count||1)},0),indexes:t.map(function(t){return t.index}),index:i}})}}},{key:"aggregatorGrid",value:function(t){return{grids:r(t.data,t.cellSize,t.getPosition).layerData.map(function(t,e){return{centroid:t.position,points:t.points,indexes:t.indexes,count:t.points.reduce(function(t,e){return t+(e.count||1)},0),index:e}})}}},{key:"getRadiusInPixel",value:function(t,e){return t*e.getDistanceScales().pixelsPerMeter[0]}},{key:"getColor",value:function(t){var e=t.count,n=this.colorValueDomain,i=e>=n[0]&&e<=n[n.length-1],r=i?this.colorScaleFunc(e,this.colorValueDomain,this.colorRange):[0,0,0,0];return r[3]=(0,g.default)(r[3])?r[3]:255,r||this.defaultColor}},{key:"colorScaleFunc",value:function(t,e,n){var i=(e[1]-e[0])/n.length,r=i?Math.floor((t-e[0])/i):0;return n[Math.max(Math.min(r,n.length-1),0)]}},{key:"getElevation",value:function(t){var e=t.count,n=this.elevationValueDomain;return e>=n[0]&&e<=n[n.length-1]?this.elevationScaleFunc(e,this.elevationValueDomain,this.elevationRange):-1}},{key:"elevationScaleFunc",value:function(t,e,n){return(t-e[0])/(e[1]-e[0])*(n[1]-n[0])+n[0]}}]),t}();e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Grid=void 0;var r=n(12),a=i(r),o=n(8),s=i(o),u=n(9),l=i(u),c=n(16),f=i(c),d=n(24),h=i(d),v=n(15),g=i(v),p=n(13),_=n(171),m=n(14),y=i(m),b=n(20),E=n(28),A=n(300),x=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(A),T=n(34),P=y.default.isArray,w=y.default.isNumber,C=y.default.isUndefined,k=E.TYPE_ID.GRID;e.Grid=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),t.typeId=k,t.validTypes=["toggle"];var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n._enableBloom=t.enableBloom,n._heightScale=t.heightScale,n}return(0,g.default)(e,t),(0,l.default)(e,[{key:"setData",value:function(t){return P(t)?(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"setData",this).call(this,t):(new b.BaseTypeError("Grid.data","array",t).error(),this)}},{key:"setSideLength",value:function(t){return this._checkSideLength(t)?(this._metricValue=t,this._update(),this):this}},{key:"getSideLength",value:function(){return this._metricValue}},{key:"_initClassName",value:function(){this._className="Grid"}},{key:"_checkParameters",value:function(t){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_checkParameters",this).call(this,t),t.sideLength=C(t.sideLength)?1e3:t.sideLength,this._checkSideLength(t.sideLength)||(t.sideLength=1e3)}},{key:"_checkSideLength",value:function(t){if(w(t)){if(!(t<=0))return!0;console.error("参数错误: "+this._className+".sideLength 应该大于0!")}else new b.BaseTypeError(this._className+".sideLength","Number",t).error();return!1}},{key:"_initPrivateProp",value:function(t){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_initPrivateProp",this).call(this,t),this._metricValue=t.sideLength,this._modelId=k+this.id}},{key:"_aggregator",value:function(){return this.processor.aggregatorGrid({data:this.data,cellSize:this._metricValue,getPosition:function(t){return[t.lng||0,t.lat||0]}},this.viewport).grids}},{key:"_getGeometry",value:function(){return this._isReady()&&this._columnarList?new p.CubeGeometry:null}},{key:"_getModel",value:function(t){var n=x.gridVertex,i=x.gridFragment;return this._vertexShader=t.isWebGL2?(0,T.transferVertexShader)(n):n,this._fragmentShader=t.isWebGL2?(0,T.transferFragmentShader)(i):i,(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_getModel",this).call(this,t)}}]),e}(_.Columnar)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Hexagon=void 0;var r=n(12),a=i(r),o=n(8),s=i(o),u=n(9),l=i(u),c=n(16),f=i(c),d=n(24),h=i(d),v=n(15),g=i(v),p=n(13),_=n(171),m=n(14),y=i(m),b=n(20),E=n(28),A=n(301),x=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(A),T=n(34),P=y.default.isArray,w=y.default.isNumber,C=y.default.isUndefined,k=E.TYPE_ID.HEXAGON;e.Hexagon=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,e),t.typeId=k,t.validTypes=["toggle"];var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return n._enableBloom=t.enableBloom,n._heightScale=t.heightScale,n}return(0,g.default)(e,t),(0,l.default)(e,[{key:"setData",value:function(t){return P(t)?(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"setData",this).call(this,t):(new b.BaseTypeError("Hexagon.data","array",t).error(),this)}},{key:"setRadius",value:function(t){return this._checkRadius(t)?(this._metricValue=t,this._update(),this):this}},{key:"getRadius",value:function(){return this._metricValue}},{key:"_initClassName",value:function(){this._className="Hexagon"}},{key:"_checkParameters",value:function(t){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_checkParameters",this).call(this,t),t.radius=C(t.radius)?1e3:t.radius,this._checkRadius(t.radius)||(t.sideLength=1e3)}},{key:"_checkRadius",value:function(t){if(w(t)){if(!(t<=0))return!0;console.error("参数错误: "+this._className+".radius 应该大于0!")}else new b.BaseTypeError(this._className+".radius","Number",t).error();return!1}},{key:"_initPrivateProp",value:function(t){(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_initPrivateProp",this).call(this,t),this._metricValue=t.radius,this._modelId=k+this.id}},{key:"_aggregator",value:function(){return this.processor.aggregatorHexagon({data:this.data,radius:this._metricValue,getPosition:function(t){return[t.lng,t.lat]}},this.viewport).hexagons}},{key:"_getGeometry",value:function(){return this._isReady()&&this._columnarList?new p.CylinderGeometry({id:this._modelId,radius:1,topRadius:1,topCap:!0,bottomCap:!0,height:1,nradial:6,nvertical:1}):null}},{key:"_getModel",value:function(t){var n=x.hexagonVertex,i=x.hexagonFragment;return this._vertexShader=t.isWebGL2?(0,T.transferVertexShader)(n):n,this._fragmentShader=t.isWebGL2?(0,T.transferFragmentShader)(i):i,(0,h.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"_getModel",this).call(this,t)}}]),e}(_.Columnar)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n,i=document.createElement("canvas");i.width=256,i.height=1;var r=i.getContext("2d"),a=r.createLinearGradient(0,0,256,0);for(var s in e){var u=e[s];B(s)||new L.BaseTypeError("The key of GradientColor","number",s).throw,U(u)||new L.BaseTypeError("The value of GradientColor","string",u).throw,a.addColorStop(s,u)}return r.fillStyle=a,r.fillRect(0,0,256,1),new P.Texture2D(t,{data:i,width:256,height:1,format:C.default.RGBA,type:C.default.UNSIGNED_BYTE,border:0,parameters:(n={},(0,o.default)(n,C.default.TEXTURE_WRAP_S,C.default.CLAMP_TO_EDGE),(0,o.default)(n,C.default.TEXTURE_WRAP_T,C.default.CLAMP_TO_EDGE),(0,o.default)(n,C.default.TEXTURE_MAG_FILTER,C.default.NEAREST),(0,o.default)(n,C.default.TEXTURE_MIN_FILTER,C.default.NEAREST),n),pixelStore:(0,o.default)({},C.default.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1)})}Object.defineProperty(e,"__esModule",{value:!0}),e.Heat=void 0;var a=n(21),o=i(a),s=n(11),u=i(s),l=n(12),c=i(l),f=n(8),d=i(f),h=n(9),v=i(h),g=n(16),p=i(g),_=n(24),m=i(_),y=n(15),b=i(y),E=n(172),A=i(E),x=n(290),T=i(x),P=n(13),w=n(19),C=i(w),k=n(174),S=n(39),R=n(14),M=i(R),L=n(20),I=n(26),O=n(28),F=n(54),N=n(34),D=n(33),B=M.default.isNumber,U=M.default.isString,G=M.default.isUndefined,j=M.default.checkGradientObject,z=TMap,W=z.GradientColor,H=O.TYPE_ID.HEAT,V={0:"#13B06A",.4:"#13B06A",.8:"#E9AB1D",.9:"#E9AB1D",1:"#E05649"},X=100,Y=0,K="pixel",q={enable:!0,animationType:"mix",duration:2e3,easingType:"Linear.None",repeat:1,from:0,to:1,yoyo:!1},Z=["fade"],Q=[],J=["mix"],$={lighting_lightPositions:new Float32Array([0,-1,1,-1,0,1,1,0,1,1,-1,1]),lighting_ambientRatio:.3,lighting_diffuseRatio:1,lighting_specularRatio:0,lighting_lightStrengths:new Float32Array([1,.2,.2,0]),lighting_numberOfLights:3};e.Heat=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.default)(this,e),t.typeId=H,t.validTypes=["toggle","transit"],t.toggleSupportTypes=Z,t.processSupportTypes=Q;var n=(0,p.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t));return n._supportAnimationType.transit=J,n.updateAnimation("transit",t.transitAnimation),n._sketch=new T.default(t),n._sketchOld=new T.default(t),n.heatInfos=new Float32Array([X,Y,K]),n._setHeight(t.height),n._setGradientColor(t.gradientColor,!0),n._setOpacity(t.opacity),n._setEnableLighting(t.enableLighting),n._setOffset(t.offset),n._setDistanceUnit(t.distanceUnit),n._updateSketch=!1,n._transitFactor=0,n}return(0,b.default)(e,t),(0,v.default)(e,[{key:"redraw",value:function(){this._updateSketch=!0,(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"redraw",this).call(this),this.map.moving||(this._updateSketch=!1)}},{key:"addTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"addTo",this).call(this,t),this._addListener(),this._transitFactor=1,this}},{key:"_onRemoveToggleComplete",value:function(){this._removeListener(),(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"_onRemoveToggleComplete",this).call(this)}},{key:"_addListener",value:function(){this.map&&(this._onMapMoveStart=this._onMapMoveStart.bind(this),this._redraw=this.redraw.bind(this),this.map.on("movestart",this._onMapMoveStart),this.map.on("moveend",this._redraw),this.map.on("resize",this._redraw),this.on("transit_update",this._onTransitUpdate),this.on("transit_stop",this._onTransitStop),this.on("transit_complete",this._onTransitComplete))}},{key:"_removeListener",value:function(){this.map&&(this.map.off("movestart",this._onMapMoveStart),this.map.off("moveend",this._redraw),this.map.off("resize",this._redraw),this.off("transit_update",this._onTransitUpdate),this.off("transit_stop",this._onTransitStop),this.off("transit_complete",this._onTransitComplete))}},{key:"_onMapMoveStart",value:function(){this._updateSketch=!0}},{key:"_onTransitUpdate",value:function(t){this._transitFactor=t}},{key:"_onTransitStop",value:function(){this._transitFactor=1,this._sketchOld.setData(this.data)}},{key:"_onTransitComplete",value:function(){this._onTransitStop()}},{key:"setData",value:function(t){try{if(!t)throw"数据为空";this._sketch.setData(t)}catch(t){return console.error(t),this}return this._transitFactor=0,this._originData=(0,D.clone)(t),(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"setData",this).call(this,t),this.hasAnimation("transit")&&this.getAnimation("transit").enable&&this.map?this.playAnimation("transit"):(this._transitFactor=1,this._sketchOld.setData(this.data)),this}},{key:"getData",value:function(){return this._originData}},{key:"setRadius",value:function(t){return this._sketch._setRadius(t),this._sketchOld._setRadius(t),this.redraw(),this}},{key:"getRadius",value:function(){return this._sketch.radius}},{key:"setGradientColor",value:function(t){return this._setGradientColor(t,!1),this._update(),this}},{key:"getGradientColor",value:function(){return this.gradientColor}},{key:"setMin",value:function(t){return this.setThreshold(t,this._sketch.max)}},{key:"getMin",value:function(){return this._sketch.min}},{key:"setMax",value:function(t){return this.setThreshold(this._sketch.min,t)}},{key:"getMax",value:function(){return this._sketch.max}},{key:"setThreshold",value:function(t,e){return this._sketch.setThreshold(t,e),this._sketchOld.setThreshold(t,e),this.redraw(),this}},{key:"setHeight",value:function(t){return this._setHeight(t),this}},{key:"getHeight",value:function(){return this.height}},{key:"setOpacity",value:function(t){return this._setOpacity(t),this}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setOffset",value:function(t){return G(t)?(new L.BaseTypeError("Heat.offset","number",t).error(),this):(this._setOffset(t),this)}},{key:"getOffset",value:function(){return this.offset}},{key:"_setHeight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;G(this.height)&&(this.height=X),B(t)?t<0?console.error("参数错误：Heat.height 应大于或等于 0 。"):this.height=t:new L.BaseTypeError("Heat.height","number",t).error(),this.heatInfos[0]=this.height}},{key:"_setGradientColor",value:function(t,e){var n=j(t,!1);if(n.result)this.gradientColor=n.gradient;else if(e){G(t)||console.error("参数错误：gradientColor参数错误，使用默认样式",t),this.gradientColor=new W;for(var i in V){var r=V[i];this.gradientColor.addColorStop(parseFloat(i),r)}}else console.error("参数错误：gradientColor参数错误，保持原样式",t)}},{key:"_setOpacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8;G(this.opacity)&&(this.opacity=.8),B(t)?t<0||t>1?console.error("参数错误：Heat.opacity 取值应在[0, 1]范围内。"):this.opacity=t:new L.BaseTypeError("Heat.opacity","number",t).error()}},{key:"_setEnableLighting",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];G(this.enableLighting)&&(this.enableLighting=!1),this.enableLighting=!!t}},{key:"_setOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;G(this.offset)&&(this.offset=Y),B(t)?t<0?console.error("参数错误：Heat.offset 应大于或等于 0 ,实际为："+t):this.offset=t:new L.BaseTypeError("Heat.offset","number",t).error(),this.heatInfos[1]=this.offset}},{key:"_setDistanceUnit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;G(this.distanceUnit)&&(this.distanceUnit=S.DISTANCE_UNIT[K]),U(t)?void 0===S.DISTANCE_UNIT[t]?console.error("参数错误：Heat.distanceUnit 应为'pixel'或'meter',实际为："+t):this.distanceUnit=S.DISTANCE_UNIT[t]:new L.BaseTypeError("Heat.distanceUnit","string",t).error(),this.heatInfos[2]=this.distanceUnit,this._sketch._setDistanceUnit(this.distanceUnit),this._sketchOld._setDistanceUnit(this.distanceUnit)}},{key:"_update",value:function(){this._isReady()&&(window.polyfillContext&&window.polyfillContext(this.gl),this._sketch.update(this.gl),this._sketchOld.update(this.gl),this._paletteTexture&&this._paletteTexture.delete(),this._paletteTexture=this._getPaletteTexture(),this._geometry=this._getGeometry(),this._model&&this._model.delete(),this._model=this._getModel(this.gl),this.redraw())}},{key:"_getPaletteTexture",value:function(){var t=this.gl,e=this.gradientColor,n=null;try{n=r(t,e.stops)}catch(e){console.error(e),n=r(t,V)}return n}},{key:"_getGeometry",value:function(){if(!this._isReady())return null;for(var t=new Float32Array(241402),e=new Uint32Array(72e4),n=0,i=0,r=0;r<=300;r++)for(var a=0;a<=400;a++)if(t[n]=a/400,n+=1,t[n]=r/300,n+=1,r<300&&a<400){var o=401*r+a;e[i]=o,i+=1,e[i]=o+1,i+=1,e[i]=o+401,i+=1,e[i]=o+1,i+=1,e[i]=o+401+1,i+=1,e[i]=o+401,i+=1}return this._vertexCount=e.length,new P.Geometry({attributes:{positions:{size:2,value:t},indices:e},id:H+this.id,drawMode:C.default.TRIANGLES})}},{key:"_getModel",value:function(t){if(!this._isReady())return null;var e=t.isWebGL2?(0,N.transferVertexShader)(k.heatVertex):k.heatVertex,n=t.isWebGL2?(0,N.transferFragmentShader)(k.heatFragment):k.heatFragment;return new P.Model(t,{id:H+this.id,vs:e,fs:n,geometry:this._geometry,vertexCount:this._vertexCount,shaderCache:this._shaderCache,uniforms:{uExpand:1.2,uPaletteTexture:this._paletteTexture}})}},{key:"_getUniforms",value:function(t){var e=this.map.getCenter(),n=this.map.getZoom(),i=this.transform.getDistanceScales(),r=(0,I.splitLatLngNumber)(e.lat),a=(0,I.splitLatLngNumber)(e.lng),o=t.pvMatrix.clone().scale(1,1/1.2,1),s=this._sketch,l=this._sketchOld,c={uniforms:{uCenter:new Float32Array([a.high,r.high,a.low,r.low]),uZoom:n,uProject_uCommonUnitsPerWorldUnit:new Float32Array(i.pixelsPerDegree),uProject_uCommonUnitsPerWorldUnit2:new Float32Array(i.pixelsPerDegree2),uProjMode:this._projMode?S.PROJ_MODE[this._projMode]:S.PROJ_MODE.mercator,uMapScale:this._mapScale||1,uMatrix:o.elements},expand:1.2,metersPerPixel:this.map._getSpatialResolution()*this.map.getScale()};return this._updateSketch&&(s.draw(c),0!==this._sketchOld.dataLadder.length&&1!==this._transitFactor&&l.draw(c)),(0,u.default)({},$,this._lightSettings,{uInverseMatrix:o.clone().invert().elements,uXCount:400,uYCount:300,uSketchTexture:s.framebuffer.texture,uFogEdgeY:Math.min(t.getFogEdge()[1],1),uSketchTextureOld:l.framebuffer.texture,uTransitFactor:this._transitFactor,uEnableLighting:this.enableLighting,uHeatInfos:this.heatInfos,uGlobalAlpha:this.opacity})}},{key:"_getGLParams",value:function(){var t;return t={},(0,o.default)(t,C.default.DEPTH_TEST,!0),(0,o.default)(t,C.default.CULL_FACE,!0),(0,o.default)(t,C.default.CULL_FACE_MODE,C.default.BACK),t}},{key:"_getValidAnimationOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"process",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.supportTypes,r=void 0===i?[]:i;return"transit"===t?(0,F.getValidAnimationOptions)(t,e,{defaultOptions:q,supportTypes:r}):F.getValidAnimationOptions.apply(void 0,arguments)}},{key:"draw",value:function(t){this._draw(t)}}]),e}(A.default)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=new Float32Array(4*t.length),n=new Float32Array(t.length);return t.forEach(function(t,i){var r=(0,b.splitLatLngNumber)(t.lng),a=(0,b.splitLatLngNumber)(t.lat);e[4*i]=r.high,e[4*i+1]=a.high,e[4*i+2]=r.low,e[4*i+3]=a.low,n[i]=t.count}),{instancePositionList:e,instanceHeatCountList:n,instanceCount:t.length}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(21),u=i(s),l=n(8),c=i(l),f=n(9),d=i(f),h=n(13),v=n(19),g=i(v),p=n(174),_=n(14),m=i(_),y=n(20),b=n(26),E=n(316),A=i(E),x=n(34),T=n(39),P=m.default.isNumber,w=m.default.isValidLatLng,C=m.default.isUndefined,k=m.default.isArray,S=(0,A.default)(),R="heat_sketch",M=50,L=0,I=void 0,O=0,F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.default)(this,t),this.id=R+O,O+=1,this._options=e,this.sketchInfos=new Float32Array([L,I,M,T.DISTANCE_UNIT.pixel]),this._setRadius(e.radius),this.setThreshold(e.min,e.max),this.enableAggregation=!!e.enableAggregation,this.dataLadder=[]}return(0,d.default)(t,[{key:"setData",value:function(t){k(t)||new y.BaseTypeError("Heat.data","array",t).throw();var e=t.reduce(function(t,e){if(!w(e))throw Error("数据错误：HeatPoint 经纬度数据无效。");if(e.count&&!P(e.count))throw Error("数据错误：HeatPoint.count无效。");return(C(e.count)||e.count<=0)&&(e.count=1),Math.max(t,e.count)},0);this._dataMax=e,this._needUpdateData=!0,this.preprocess(t)}},{key:"update",value:function(t){this.gl=t,C(this.max)&&(this._setMax(this._dataMax),this.max<=this.min&&(console.error("参数错误：Heat.max 应大于 Heat.min。"),this._setMin(L))),this._geometry=this._getSketchGeometry(),this._model&&this._model.delete(),this._model=this._getModel(this.gl),this.framebuffer&&(this.framebuffer.delete(),this.framebuffer.attachments[g.default.COLOR_ATTACHMENT0].delete()),this.framebuffer=this._getFramebuffer(this.gl),this.attributes={positionAttribute:new h._Attribute(t,{size:4,isInstanced:!0}),heatCountAttribute:new h._Attribute(t,{size:1,isInstanced:!0})},this._needUpdateData=!0}},{key:"resize",value:function(t,e){this.framebuffer.resize({width:t,height:e})}},{key:"draw",value:function(t){var e,n=this,i=t.uniforms,r=t.expand,a=t.metersPerPixel;if(this._drawParamsCache=arguments,this._model&&this._geometry){var s=this.radius,l=this.gl,c=this.framebuffer,f=l.canvas.width*r,d=l.canvas.height*r;c.resize({width:f,height:d}),this._switchData(a,s),(0,h.withParameters)(l,(e={},(0,u.default)(e,l.BLEND,!0),(0,u.default)(e,g.default.BLEND_SRC_ALPHA,g.default.ONE),(0,u.default)(e,g.default.BLEND_DST_ALPHA,g.default.ONE),(0,u.default)(e,g.default.VIEWPORT,[0,0,f,d]),(0,u.default)(e,"clearColor",[0,0,0,.001]),(0,u.default)(e,"framebuffer",c),e),function(){l.clear(g.default.COLOR_BUFFER_BIT),n._model.render((0,o.default)({uSketchInfos:n.sketchInfos},i))})}}},{key:"redraw",value:function(){this.draw.apply(this,this._drawParamsCache)}},{key:"_setRadius",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.radius=this.radius||M,P(t)?t<=0?console.error("参数错误：Heat.radius 应大于 0 。"):this.radius=t:new y.BaseTypeError("Heat.radius","number",t).error(),this.sketchInfos[2]=this.radius}},{key:"_setDistanceUnit",value:function(t){this.distanceUnit=t,this.sketchInfos[3]=t}},{key:"setThreshold",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;t&&!P(t)&&(new y.BaseTypeError("Heat.min","number",t).error(),t=L),(!C(this.max)&&C(e)||e&&!P(e))&&(new y.BaseTypeError("Heat.max","number",e).error(),e=this._getDefaultMax()),!C(e)&&t>=e&&(console.error("参数错误：Heat.max 应大于 Heat.min。"),t=L,e=this._getDefaultMax()),t<0&&(console.error("参数错误：Heat.min 应大于等于 0。"),t=L),e<0&&(console.error("参数错误：Heat.max 应大于等于 0。"),e=this._getDefaultMax()),this._setMin(t),this._setMax(e)}},{key:"_getDefaultMax",value:function(){var t=this.max;return t||(t=this._dataMax?this._dataMax:I)}},{key:"_setMin",value:function(t){this.min=t,this.sketchInfos[0]=t}},{key:"_setMax",value:function(t){this.max=t,this.sketchInfos[1]=t}},{key:"_getSketchGeometry",value:function(){var t=new Int8Array([-1,1,-1,-1,1,1,1,-1]);return new h.Geometry({drawMode:g.default.TRIANGLE_STRIP,attributes:{positions:{size:2,value:t}},vertexCount:4})}},{key:"_getModel",value:function(t){var e=t.isWebGL2?(0,x.transferVertexShader)(p.heatSketchVertex):p.heatSketchVertex,n=t.isWebGL2?(0,x.transferFragmentShader)(p.heatSketchFragment):p.heatSketchFragment;return new h.Model(t,{id:this.id,vs:e,fs:n,geometry:this._geometry,isInstanced:!0,instanceCount:1})}},{key:"_getFramebuffer",value:function(t){var e,n=new h.Texture2D(t,{data:null,format:g.default.RGBA,type:g.default.UNSIGNED_BYTE,border:0,mipmaps:!0,parameters:(e={},(0,u.default)(e,g.default.TEXTURE_WRAP_S,g.default.CLAMP_TO_EDGE),(0,u.default)(e,g.default.TEXTURE_WRAP_T,g.default.CLAMP_TO_EDGE),(0,u.default)(e,g.default.TEXTURE_MAG_FILTER,g.default.NEAREST),(0,u.default)(e,g.default.TEXTURE_MIN_FILTER,g.default.NEAREST),e),dataFormat:g.default.RGBA});return new h.Framebuffer(t,{attachments:(0,u.default)({},g.default.COLOR_ATTACHMENT0,n)})}},{key:"_switchData",value:function(t,e){this.distanceUnit!==T.DISTANCE_UNIT.meter&&(e*=t);for(var n=.5*e,i=this.dataLadder,r=i.length,a=i[r-1],o=1;o<r;o++)if(n<i[o].size){a=i[o-1];break}if(a.size!==this._currentSize||this._needUpdateData){var s=a,u=s.instancePositionList,l=s.instanceHeatCountList,c=s.instanceCount,f=this.attributes,d=f.positionAttribute,h=f.heatCountAttribute;d.update({value:u}),h.update({value:l}),this._model.setAttributes({instancePositions:d,instanceHeatCount:h}),this._model.setInstanceCount(c),this._currentSize=a.size,this._needUpdateData=!1}}},{key:"preprocess",value:function(t){var e=this,n=[],i=r(t);if(i.size=0,n.push(i),this.dataLadder=n,this.enableAggregation){var a=[10,50,100,1e3,1e4,1e5];S.abort(this.waiting),this.waiting=S.send({type:"HEAT",cmd:"getClusters",params:{data:t,sizeList:a}},function(t){t.forEach(function(t){if(t.points.length>100){var e=r(t.points);e.size=t.size,n.push(e)}}),n.sort(function(t,e){return t.size-e.size}),e.redraw()})}}}]),t}();e.default=F},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(35),a=i(r),o=n(11),s=i(o),u=n(12),l=i(u),c=n(8),f=i(c),d=n(9),h=i(d),v=n(16),g=i(v),p=n(15),_=i(p),m=n(120),y=i(m),b=function(t){function e(t,n){return(0,f.default)(this,e),n=Array.isArray(n)?{passes:n}:n,(0,g.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t,(0,s.default)({id:"composite-pass"},n)))}return(0,_.default)(e,t),(0,h.default)(e,[{key:"render",value:function(){var t=this.props.passes,e=void 0===t?[]:t,n=!0,i=!1,r=void 0;try{for(var o,s=(0,a.default)(e);!(n=(o=s.next()).done);n=!0){var u=o.value;u.render.apply(u,arguments)}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}]),e}(y.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),a=i(r),o=n(11),s=i(o),u=n(12),l=i(u),c=n(8),f=i(c),d=n(9),h=i(d),v=n(16),g=i(v),p=n(15),_=i(p),m=n(13),y=n(120),b=i(y),E=n(19),A=i(E),x=n(296),T=[-1,-1,1,-1,-1,1,1,1],P=T.map(function(t){return-1===t?0:t}),w=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,f.default)(this,e);var i=(0,g.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t,(0,s.default)({id:"fxaa-pass",swap:!0},n)));return i._quardGeometry=new m.Geometry({drawMode:A.default.TRIANGLE_STRIP,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(T)},uv:{size:2,value:new Float32Array(P)}}}),i.resolution=new Float32Array([t.canvas.width,t.canvas.height]),i._uniforms={resolution:i.resolution,tDiffuse:null,enabled:!0},i.fxaaModel=new m.Model(t,{geometry:i._quardGeometry,vs:x.simpleFxaaVertex,fs:x.simpleFxaaFragment}),i}return(0,_.default)(e,t),(0,h.default)(e,[{key:"_renderPass",value:function(t){var e,n=this,i=t.inputBuffer;this._uniforms.tDiffuse=i.texture,this.resolution[0]=i.width,this.resolution[1]=i.height,(0,m.withParameters)(this.gl,(e={},(0,a.default)(e,A.default.CULL_FACE,!0),(0,a.default)(e,A.default.CULL_FACE_MODE,A.default.BACK),e),function(){n.fxaaModel.render(n._uniforms)})}}]),e}(b.default);e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(35),a=i(r),o=n(11),s=i(o),u=n(12),l=i(u),c=n(8),f=i(c),d=n(9),h=i(d),v=n(16),g=i(v),p=n(24),_=i(p),m=n(15),y=i(m),b=n(291),E=i(b),A=n(295),x=i(A),T=function(t){function e(t,n){(0,f.default)(this,e),n=Array.isArray(n)?{passes:n}:n;var i=(0,g.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t,(0,s.default)({id:"multi-pass"},n)));return i.renderState=new x.default(t,n),i}return(0,y.default)(e,t),(0,h.default)(e,[{key:"render",value:function(t){this.renderState.reset();var e=this.props.passes,n=void 0===e?[]:e,i=!0,r=!1,o=void 0;try{for(var s,u=(0,a.default)(n);!(i=(s=u.next()).done);i=!0){s.value.render(this.renderState,t)}}catch(t){r=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return this}},{key:"destroy",value:function(){(0,_.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"destroy",this).call(this),this.renderState.reset(),this.renderState=null}}]),e}(E.default);e.default=T},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(35),a=i(r),o=n(11),s=i(o),u=n(12),l=i(u),c=n(8),f=i(c),d=n(9),h=i(d),v=n(16),g=i(v),p=n(15),_=i(p),m=n(120),y=i(m),b=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.default)(this,e),(0,g.default)(this,(e.__proto__||(0,l.default)(e)).call(this,t,(0,s.default)({id:"render-pass"},n)))}return(0,_.default)(e,t),(0,h.default)(e,[{key:"_renderPass",value:function(t){var e=t.animationProps,n=this.props,i=n.models,r=void 0===i?[]:i,o=n.drawParams,u=!0,l=!1,c=void 0;try{for(var f,d=(0,a.default)(r);!(u=(f=d.next()).done);u=!0){f.value.draw((0,s.default)({},o,{animationProps:e}))}}catch(t){l=!0,c=t}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}}}]),e}(y.default);e.default=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),a=i(r),o=n(8),s=i(o),u=n(9),l=i(u),c=n(13),f=n(19),d=i(f),h=function(){function t(e){var n,i;(0,s.default)(this,t),this.gl=e,this.framebuffer1=new c.Framebuffer(e,{id:"multi-pass-1",depth:!0}),this.framebuffer1.texture.setParameters((n={},(0,a.default)(n,d.default.TEXTURE_MAG_FILTER,d.default.LINEAR),(0,a.default)(n,d.default.TEXTURE_MIN_FILTER,d.default.LINEAR),n)),this.framebuffer2=new c.Framebuffer(e,{id:"multi-pass-2",depth:!0}),this.framebuffer2.texture.setParameters((i={},(0,a.default)(i,d.default.TEXTURE_MAG_FILTER,d.default.LINEAR),(0,a.default)(i,d.default.TEXTURE_MIN_FILTER,d.default.LINEAR),i)),this.reset()}return(0,l.default)(t,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.framebuffer1.clear({color:!0,depth:!0,stencil:!0}),this.framebuffer2.clear({color:!0,depth:!0,stencil:!0}),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}}]),t}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.simpleFxaaVertex="\n#define SHADER_NAME FXAAShader-vertex-shader\nattribute vec2 aClipSpacePosition;\n\nvoid main() {\n  gl_Position = vec4(aClipSpacePosition, 1.0, 1.0);\n}\n",e.simpleFxaaFragment="\n#define SHADER_NAME FXAAShader-fragment-shader\nprecision mediump float;\n\nuniform vec2 resolution;\nuniform sampler2D tDiffuse;\nuniform bool enabled;\n\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent \n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE, \n            vec2 v_rgbSW, vec2 v_rgbSE, \n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.2126, 0.7152, 0.0722);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n\n    float clearLuma = dot(vec3(0.0, 0.0, 0.0), luma);\n    \n    // 如果没有亮度就采用中心点的亮度\n    lumaNW = mix(lumaM, lumaNW, step(0.1, lumaNW));\n    lumaNE = mix(lumaM, lumaNE, step(0.1, lumaNE));\n    lumaSW = mix(lumaM, lumaSW, step(0.1, lumaSW));\n    lumaSE = mix(lumaM, lumaSE, step(0.1, lumaSE));\n\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n    \n\n    vec3 rgbATex1 = texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz;\n    vec3 rgbATex2 = texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz;\n    \n    // 如果没有亮度就采用中心点的亮度\n    rgbATex1 = mix(rgbM, rgbATex1, float(clearLuma !=dot(rgbATex1, luma)));\n    rgbATex2 = mix(rgbM, rgbATex2, float(clearLuma !=dot(rgbATex2, luma)));\n\n    vec3 rgbA = 0.5 * (rgbATex1 + rgbATex2);\n\n    vec3 rgbBTex1 = texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz;\n    vec3 rgbBTex2 = texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz;\n\n    // 如果没有亮度就采用中心点的亮度\n    rgbBTex1 = mix(rgbM, rgbBTex1, float(clearLuma !=dot(rgbBTex1, luma)));\n    rgbBTex2 = mix(rgbM, rgbBTex2, float(clearLuma !=dot(rgbBTex2, luma)));\n\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (rgbBTex1 + rgbBTex2);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax)){\n        color = vec4(rgbA, texColor.a);\n    } else {\n        // 混合一部分中心点的颜色，防止颜色过度模糊\n        color = vec4((rgbB * 0.9 + rgbM * 0.1), texColor.a);\n    }\n\n    return color;\n}\n\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n    out vec2 v_rgbNW, out vec2 v_rgbNE,\n    out vec2 v_rgbSW, out vec2 v_rgbSE,\n    out vec2 v_rgbM) {\n        vec2 inverseVP = 1.0 / resolution.xy;\n        v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n        v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n        v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n        v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n        v_rgbM = vec2(fragCoord * inverseVP);\n}\n\n\n\n\nvec4 apply(sampler2D tex, vec2 fragCoord, vec2 resolution) {\n\tmediump vec2 v_rgbNW;\n\tmediump vec2 v_rgbNE;\n\tmediump vec2 v_rgbSW;\n\tmediump vec2 v_rgbSE;\n\tmediump vec2 v_rgbM;\n\n\t//compute the texture coords\n\ttexcoords(fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\t\n\t//compute FXAA\n\treturn fxaa(tex, fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n\n\n\n//import our fxaa shader\n// #pragma glslify: fxaa = require('../')\n\nvoid main() {\n  vec2 uv = vec2(gl_FragCoord.xy / resolution.xy);\n//   uv.y = 1.0 - uv.y;\n\n  //can also use gl_FragCoord.xy\n  vec2 fragCoord = uv * resolution; \n\n  vec4 color;\n  if (enabled) {\n      color = apply(tDiffuse, fragCoord, resolution);\n  } else {\n      color = texture2D(tDiffuse, uv);\n  }\n\n  gl_FragColor = color;\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arcFragment=e.arcVertex=void 0;var i=n(29),r=n(32),a=n(38);e.arcVertex="\n#define SHADER_NAME arc-vertex-shader\n\n// precision highp float;\n\nattribute vec2 positions; // 条带顶点位置\nattribute vec4 instanceFromPositions; // 实例起点的位置\nattribute vec4 instanceToPositions; // 实例终点的位置\nattribute vec4 instanceColors; // 实例的颜色\nattribute vec4 instanceGradientColors;// 实例渐变色，当实例是纯色时，此参数等同instanceColors，当实例为双色渐变时，instanceColors为起点颜色，此参数为终点颜色\nattribute vec4 instanceAnimateColors; // 动画颜色\nattribute float instanceWidth; // 实例宽度\nattribute float instanceTilt; // 实例倾斜度\n\nattribute vec3 instancePickingColors;\n\nuniform float curvature;\nuniform float numSegments;\n// uniform float opacity;\n// uniform float width;\nuniform float mode; // 0代表贴地弧线，1代表垂直于水平面的弧线\n\nuniform float totalTime; // 动画总时间\n\nuniform vec4 uSelectColor; // 选中样式\nuniform vec4 uSelectAnimateColor;\nuniform float uSelectWidth;\nuniform float uEnableGeodesic; //是否开启大地曲线绘制模式\n\n"+i.UNIFORM_PART+"\n\n"+r.PICK_UNIFORM+"\n\nvarying vec4 vColor;\nvarying vec4 vAnimateColor;\nvarying float vTime;\nvarying float vSide;\nvarying float vSegmentRatio;\n"+i.PROJECTION_PART+"\n\n"+r.PICK_FUNCTION+"\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n    vec2 x = mix(source, target, ratio);\n    vec2 center = mix(source, target, 0.5);\n  \n    float dSourceCenter = distance(source, center);\n    float dXCenter = distance(x, center);\n    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nfloat getArcHeight(vec2 source, vec2 target, float ratio) {\n\tvec2 pos = mix(source, target, ratio);\n    vec2 middle = mix(source, target, 0.5);\n  \n    float disSourceMiddle = distance(source, middle);\n\tfloat disPosMiddle = distance(pos, middle);\n\t\n\tfloat radian = curvature * PI * 0.5;\n\tfloat radius = disSourceMiddle / sin(radian);\n\tfloat circleY = radius * cos(radian);\n\n\treturn sqrt(radius * radius - disPosMiddle * disPosMiddle) - circleY;\n}\n\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, clamp(index / (numSegments - 1.0), 0.0, 1.0));\n}\n  \nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n    // float vertex_height = paraboloid(source, target, segmentRatio);\n\tfloat vertex_height = max(0.0, getArcHeight(source, target, segmentRatio));\n\n    vec2 pos = mix(source, target, segmentRatio);\n    vec2 dir = pos - source;\n    vec2 dirNormalize = normalize(dir);\n\n    // vertical模式下的计算\n    vec2 offsetV = vec2(dirNormalize.y, -dirNormalize.x) * vertex_height * sin(degree_to_radian(instanceTilt));\n    float tilted_height = vertex_height * cos(degree_to_radian(instanceTilt));\n    // return vec3(pos + offsetV, tilted_height);\n\n    // horizontal模式下的计算\n    vec2 normal = vec2(-dirNormalize.y, dirNormalize.x) * vertex_height;\n    // normalize(vec2(0.0, 0.0)) 在部分机型部分浏览器上可能为非法值，需使用if-else特殊处理\n    vec2 offsetH = mix(vec2(0.0), normal, step(0.00001, segmentRatio));\n    // return vec3(pos + offsetH, 0.0);\n\n    return mix(vec3(pos + offsetH, 0.0), vec3(pos + offsetV, tilted_height), step(0.01, mode));\n}\n\nvoid main(void) {\n    // 开启大地曲线绘制模式下的计算\n    vec3 startEndArray[2];\n    project_for_line_precision(instanceFromPositions, instanceToPositions, startEndArray);\n    vec2 source1 = startEndArray[0].xy;\n    vec2 target1 = startEndArray[1].xy;\n\n    // 关闭大地曲线绘制模式下的计算\n    vec2 source2 = project_view_local_position_precision(instanceFromPositions.xy, instanceFromPositions.zw);\n    vec2 target2 = project_view_local_position_precision(instanceToPositions.xy, instanceToPositions.zw);\n\n    vec2 source = mix(source2, source1, step(0.5, uEnableGeodesic));\n    vec2 target = mix(target2, target1, step(0.5, uEnableGeodesic));\n\n    float segmentIndex = positions.x;\n    float segmentRatio = getSegmentRatio(segmentIndex);\n\n    // 计算下一个点的百分比\n    // positions.x值为0-numsegment，如果是第一个点使用next-curr\n    // 否则使用curr-prev\n    float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n    float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n    // 计算渐变色\n    vec4 gradient = mix(instanceColors, instanceGradientColors, segmentRatio);\n\n    // 实例色 or 选中色\n\tfloat isPicked = picking_useSelectStyle(instancePickingColors);\n\tvec4 color = mix(gradient, uSelectColor, isPicked);\n\tvec4 animateColor = mix(instanceAnimateColors, uSelectAnimateColor, isPicked);\n\tfloat width = mix(instanceWidth, uSelectWidth, isPicked);\n\n    vec3 currPos = getPos(source, target, segmentRatio);\n    vec3 nextPos = getPos(source, target, nextSegmentRatio);\n\n    vec4 currProj = uMatrix * vec4(currPos, 1.0);\n    vec4 nextProj = uMatrix * vec4(nextPos, 1.0);\n\n    vec2 currScreen = proj_position_to_screen(currProj);\n    vec2 nextScreen = proj_position_to_screen(nextProj);\n\n    vec2 offsetScreen = getExtrusionOffset((nextScreen - currScreen) * indexDir, positions.y, width);\n    // vec2 offsetScreen = vec2(10.0, 10.0);\n\n    gl_Position = screen_to_proj_position(currScreen + offsetScreen, currProj.z, currProj.w);\n\n    vec4 vertexColor = color.rgba / 255.0;\n    vColor = picking_getFinalColor(vertexColor, instancePickingColors);\n\n    vAnimateColor = animateColor.rgba / 255.0;\n    vTime = mix(0.0, totalTime, segmentRatio);\n    vSegmentRatio=segmentRatio;\n    vSide = positions.y;\n}\n\n",e.arcFragment="\n#define SHADER_NAME arc-fragment-shader\n\nprecision highp float;\nuniform float currTime;\nuniform float timeLength;\n// uniform float opacity;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nuniform float uTailFactor;\nvarying float vSegmentRatio;\n"+r.PICK_UNIFORM+"\n\nvarying vec4 vColor;\nvarying vec4 vAnimateColor;\nvarying float vTime;\nvarying float vSide;\n"+a.BLOOM_VARIABLE+"\n\nvoid main(void) {\n  if(uAnimationParams[1] < 0.&& vSegmentRatio > uAnimationParams[0]){\n    discard;\n  }\n\n    vec4 finalColor = mix(\n        vColor,\n        mix(\n            mix(vec4(vAnimateColor.rgba), vColor, clamp((uAnimationParams[2] - vSegmentRatio) / uTailFactor, 0.0, 1.0)), // 随着拖尾时间由小到大颜色由高亮渐变为vColor\n            vColor,\n            step(uTailFactor, (uAnimationParams[2] - vSegmentRatio)) // 大于timeLength的像素使用vColor，在timeLength拖尾区域内的点进入mix渐变\n        ),\n        step(0.0, (uAnimationParams[2] - vSegmentRatio)) // 大于当前时刻的点全部显示vColor，小于当前时刻的像素进入mix判断\n    );\n\n    finalColor = mix(finalColor, vColor, abs(vSide)); // width方向根据中心线距离渐变为vColor\n    finalColor.a = mix(finalColor.a, finalColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n    \n    vec4 passColor=mix(\n        finalColor,\n        vColor,\n        picking_usePickingColor); // 点击拾取时使用拾取颜色处理\n\n    gl_FragColor = passColor;\n    "+a.BLOOM_OUT+"\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linesFragment=e.linesVertex=e.areaFragment=e.areaVertex=void 0;var i=n(29),r=n(32),a=n(38);e.areaVertex="\n#define SHADER_NAME area-vertex-shader\n\n// precision highp float;\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 pickingColors; \nattribute vec2 texCoords;\n\n"+i.UNIFORM_PART+"\n\n"+r.PICK_UNIFORM+"\n\nvarying vec2 vTexCoords;\nvarying vec3 vPickingColors;\n\n"+i.PROJECTION_PART+"\n\nvoid main(void) {\n    vec3 local_position = project_view_local_position_precision(positions.xyz, positions64xyLow.xy);\n\n\tgl_Position = uMatrix * vec4(local_position, 1.0);\n    vTexCoords = texCoords;\n    vPickingColors = pickingColors;\n}\n\n",e.areaFragment="\n#define SHADER_NAME area-fragment-shader\n\nprecision highp float;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\n"+r.PICK_UNIFORM+"\n\nvarying vec2 vTexCoords;\nvarying vec3 vPickingColors;\n"+r.PICK_FUNCTION+"\n"+a.BLOOM_VARIABLE+"\nuniform sampler2D uGradientTexture;\nuniform vec4 uSelectColor; // 选中的颜色\n\nvoid main(void) {\n    vec4 passColor = texture2D(uGradientTexture,vTexCoords);\n\n    // 选中色的分量取值是0-255，需要转化到0-1\n    vec4 selectColor = uSelectColor.rgba / 255.0;\n    float isPicked = picking_useSelectStyle(vPickingColors);\n    vec4 color = mix(passColor, selectColor, isPicked);\n\n    //淡出\n    color.a = mix(color.a, color.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n\n    gl_FragColor = picking_getFinalColor(color, vPickingColors);\n    "+a.BLOOM_OUT+"\n}\n",e.linesVertex="\n#define SHADER_NAME lines-vertex-shader\n\n// precision highp float;\n\nattribute vec2 positions;\nattribute vec2 texCoords;\n\nattribute vec4 instancePositionStart;\nattribute vec4 instancePositionEnd;\nattribute vec4 instanceColor;\nattribute vec3 instancePickingColor;\nattribute float instanceWidth;\nattribute vec2 instanceStrokeDash;\nuniform vec4 uStrokeColor; // 边线颜色\nuniform float uStrokeWidth;\nuniform vec2 uStrokeDashArray;\n\n"+i.UNIFORM_PART+"\n\n"+r.PICK_UNIFORM+"\n\nvarying vec4 vColor;\nvarying vec2 vDists;\nvarying vec4 vVectors;\nvarying vec2 vPositions;\nvarying vec2 vStrokeDash;\n\n"+i.PROJECTION_PART+"\n\n"+r.PICK_FUNCTION+"\n\nvoid main(void) {\n    //如果选中则设置为选中颜色\n    float isPicked = picking_useSelectStyle(instancePickingColor);\n    vec4 color = mix(instanceColor, uStrokeColor, isPicked);\n    vec4 color1 = color.rgba / 255.0;\n    vColor = picking_getFinalColor(color1, instancePickingColor); // 拾取颜色+底色\n    float width = mix(instanceWidth, uStrokeWidth, isPicked);\n    vec2 strokeDashArray = mix(instanceStrokeDash, uStrokeDashArray, isPicked);\n\n    vec2 startPoint = project_view_local_position_precision(instancePositionStart.xy, instancePositionStart.zw);\n    vec2 endPoint = project_view_local_position_precision(instancePositionEnd.xy, instancePositionEnd.zw);\n\n    // middle point\n    vec2 midPoint = (startPoint + endPoint) / 2.0;\n\n    vec2 midToEnd = endPoint - midPoint;\n    vec2 horizontal = normalize(midToEnd);\n    vec2 vertical = vec2(-horizontal.y, horizontal.x);\n    float radius = width / 2.0;\n    float halfLength = length(midToEnd);\n    float halfLengthWithCap = halfLength + radius;\n\n    vec2 coord = midPoint + horizontal * halfLengthWithCap * positions.x + vertical * radius * positions.y;\n\n\tgl_Position = uMatrix * vec4(coord, 0.0, 1.0);\n\n    vDists = vec2(halfLength, radius);\n    vVectors = vec4(horizontal.x, horizontal.y, vertical.x, vertical.y);\n    vPositions = positions;\n    vStrokeDash = strokeDashArray;\n}\n\n",e.linesFragment="\n#define SHADER_NAME lines-fragment-shader\n\nprecision highp float;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\n\n"+r.PICK_UNIFORM+"\n\nvarying vec4 vColor;\nvarying vec2 vDists;\nvarying vec4 vVectors;\nvarying vec2 vPositions;\nvarying vec2 vStrokeDash;\n"+a.BLOOM_VARIABLE+"\nvoid main(void) {\n    // compute coord while cap as center\n    vec2 horizontal = vVectors.xy;\n    vec2 vertical = vVectors.zw;\n    float halfLength = vDists.x;\n    float radius = vDists.y;\n    float halfLengthWithCap = halfLength + radius;\n    vec2 capCoord = horizontal * (halfLengthWithCap * abs(vPositions.x) - halfLength) + vertical * radius * abs(vPositions.y);\n    float isCap = step(halfLength / halfLengthWithCap, abs(vPositions.x));\n\n    // visible if in circle at start or out at end\n    float visible = mix(\n        // x < 0 : in circle || !isCap\n        float(length(capCoord) * isCap < radius),\n        // x > 0 : out circle && !isCap\n        float(length(capCoord) * (1. - isCap) > radius),\n        1. - step(0., vPositions.x)\n        );\n\n    // 计算是虚线还是实线\n    vec2 capCoord1 = horizontal * (halfLengthWithCap * vPositions.x - halfLength) + vertical * radius * vPositions.y;\n    float segmentLength = length(capCoord1);\n    float isInGap = step(vStrokeDash.x, mod(segmentLength, vStrokeDash.x + vStrokeDash.y));\n    \n    if(visible == 0.0 || vStrokeDash.x > 0.0 && isInGap > 0.0){\n        discard;\n    }\n\n    vec4 passColor = vColor;\n\n    //淡出\n    passColor.a = mix(passColor.a, passColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n\n    gl_FragColor = passColor;\n    "+a.BLOOM_OUT+"\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dotFragment=e.dotVertex=void 0;var i=n(29),r=n(32),a=n(38),o="\n#define SHADER_NAME dot-vertex-shader\n\nprecision highp float;\n\nattribute vec2 positions; // 四边形顶点\nattribute vec4 instancePositions; // 实例的位置\nattribute vec4 instanceStyles; // 实例的纹理坐标及大小\nattribute vec2 instanceOffsets; // 实例的锚点\n\nattribute vec3 instancePickingColors;\n\nuniform bool uFaceToMap;\nuniform vec2 uViewSize;\nuniform float uScale;\nuniform vec4 uSelectStyle;\nuniform vec2 uSelectOffset;\nuniform float uBeatingAmplitude;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\n"+i.UNIFORM_PART+"\n"+r.PICK_UNIFORM+"\n\nvarying vec2 vTexCoord;\nvarying vec3 vPickingColor;\n\n"+i.PROJECTION_PART+"\n"+r.PICK_FUNCTION+"\n\nvoid main(void) {\n  float percentage = uAnimationParams[2];\n   // uAnimationType值为0是跳动动画，1是辐射动画\n  float animationType = step(0.5, uAnimationParams[3]);\n  float beatingHeight = mix(uBeatingAmplitude * sin(degree_to_radian(percentage * 180.0)), 0.0, animationType);\n  float radiatedRadius = mix(1.0, percentage, animationType);\n\n\t// 判断是否改用选中样式\n\tfloat useSelectStyle = picking_useSelectStyle(instancePickingColors);\n\tvec4 finalStyle = mix(instanceStyles, uSelectStyle, useSelectStyle);\n\tvec2 finalOffset = mix(instanceOffsets, uSelectOffset, useSelectStyle);\n\n\t// 根据局部坐标计算纹理坐标\n\tvec2 normalPosition = (positions + vec2(1.0)) / 2.0;\n\tvTexCoord= finalStyle.xy + vec2(normalPosition.x * finalStyle.z, (1.0 - normalPosition.y) * finalStyle.w) * uScale;\n\tvPickingColor = instancePickingColors;\n\n\t// 转地理坐标为相对像素坐标\n\tvec2 instancePixelPos = project_view_local_position_precision(instancePositions.xy, instancePositions.zw);\n\n\t// 局部坐标根据实例大小进行拉伸，根据锚点进行平移\n\tvec2 scalePositions = vec2(positions.x * finalStyle.z, positions.y * finalStyle.w) * radiatedRadius / 2.0;\n\tvec2 localCoord = scalePositions + finalOffset; \n\n\tvec4 ndcCoord = uMatrix * vec4(instancePixelPos, 0.0, 1.0);\n\tgl_Position = mix(\n\t\tndcCoord + vec4(localCoord.x / uViewSize.x, (localCoord.y + beatingHeight) / uViewSize.y, 0.0, 0.0) * ndcCoord.w, // 朝向屏幕\n\t\tuMatrix * vec4(instancePixelPos + localCoord + vec2(0.0, beatingHeight), 0.0, 1.0), // 朝向地图\n\t\tfloat(uFaceToMap)\n\t);\n}\n",s="\n#define SHADER_NAME dot-fragment-shader\n\nuniform sampler2D uStyleTexture;\nuniform float uTexSize;\n\n"+r.PICK_UNIFORM+"\nvarying vec2 vTexCoord;\nvarying vec3 vPickingColor;\n"+r.PICK_FUNCTION+"\nuniform float uEnableFade;\nuniform float uBeatingAmplitude;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\n\n"+a.BLOOM_VARIABLE+"\n\nvoid main(void) {\n  float percentage = uAnimationParams[2];\n  float animationType = step(0.5, uAnimationParams[3]);;\n\t// 归一化\n\tvec2 normalTexCoord = vTexCoord / uTexSize;\n\t\n\tfloat alpha = mix(1.0, mix(1.0, (1.0 - percentage), uEnableFade), animationType);\n\t// 纹理颜色\n\tvec4 texColor = texture2D(uStyleTexture, vec2(normalTexCoord.x, 1.0 - normalTexCoord.y))* alpha;\n\t\n  // 开关渐变\n  texColor = mix(texColor, texColor * uAnimationParams[0], step(0., uAnimationParams[1]));\n\n  // 纹理颜色 or 拾取标识色\n\tvec4 passColor=picking_getFinalColor(texColor, vPickingColor);\n\n\tgl_FragColor=passColor;\n  "+a.BLOOM_OUT+"\n}\n";e.dotVertex=o,e.dotFragment=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gridFragment=e.gridVertex=void 0;var i=n(29),r=n(79),a=n(32),o=n(38);e.gridVertex="#define SHADER_NAME grid-vertex-shader\n"+r.LIGHT_NUMBER+"\n\n\nprecision highp float;\n\nattribute vec3 positions; // CylinderGeometry的顶点坐标，纵坐标是y轴\nattribute vec3 normals;\nattribute vec3 instancePositions; // 实例的位置\nattribute vec2 instancePositionsLow;\nattribute vec4 instanceColors; // 实例的颜色\n\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded; // 在外界是个boolean值，控制六边形是否拔高\nuniform float coverage; // coverage可以控制显示时候的半径大小，但并不影响数据值\nuniform float elevationScale; // 也是控制显示的属性，不影响数据值\nuniform vec4 uSelectStyle;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\n"+i.UNIFORM_PART+"\n\n"+r.LIGHT_UNIFORM+"\n\n"+a.PICK_UNIFORM+"\n\nvarying vec4 vColor;\n\n"+i.PROJECTION_PART+"\n\n"+r.LIGHT_FUNCTION+"\n\n"+a.PICK_FUNCTION+"\n\n// 魔法数，控制缩放比例的\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n  // 实例色 or 选中色\n  vec4 color = mix(instanceColors, uSelectStyle, picking_useSelectStyle(instancePickingColors));\n\n  // 绕y轴旋转角度\n  mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n\n  // cube的y轴是纵轴\n  vec2 rPosition = rotationMatrix * positions.xz;\n  vec2 rNormal = rotationMatrix * normals.xz;\n\n  vec3 rotatedPosition = vec3(rPosition.x, positions.y, rPosition.y);\n  vec3 rotatedNormal = vec3(rNormal.x, rNormal.y, normals.y);\n\n  // luma中CubeGeometry的纵坐标范围在-1~1之间，这里把它转化成0~1之间\n  // 同时将高度由米为单位转变成由瓦片像素为单位\n  float elevation = mix(0.0, project_scale(vec3(instancePositions.z * (positions.y * 0.5 + 0.5) * ELEVATION_SCALE * elevationScale)).z, extruded);\n\n  elevation=mix(mix(0.,elevation,uAnimationParams[0]), elevation, step(0.0, uAnimationParams[1]));\n\n  // 对于透明或者高度小于零的图形不渲染\n  float isNoRender = float(color.a == 0.0 || instancePositions.z < 0.0);\n  float useRadius = radius * uPixelsPerMeter[0] * mix(1.0, 0.0, isNoRender);// isNoRender为1,mix为0;isNoRender为0,mix为1\n\n  // 计算cube中心点的瓦片像素坐标\n  vec4 cubeCenterPosition = vec4(project_view_local_position_precision(instancePositions.xy, instancePositionsLow.xy), elevation, 0.0);\n  \n  // 计算cube该顶点的位置, cube的X坐标范围是-1~1，(rotatedPosition.x * coverage) / 2.0坐标范围在-0.5~0.5之间\n  // cube的Z坐标范围是-1~1，(rotatedPosition.z * coverage) / 2.0坐标范围在-0.5~0.5之间\n  // cubeCenterPosition在cube局部坐标系的(0, 0, 0)位置\n  vec4 vertexPosition = cubeCenterPosition + vec4(\n    vec2(\n      (rotatedPosition.x * coverage) / 2.0 * useRadius,\n      (rotatedPosition.z * coverage) / 2.0 * useRadius\n    ),\n    1.0, 1.0\n  );\n\n  gl_Position = uMatrix * vertexPosition;\n\n  float lightWeight = mix(1.0, getLightWeight(vertexPosition.xyz, rotatedNormal), extruded);\n\n  vec3 lightMixColor = lightWeight * color.rgb;\n  \n  vec4 vertexColor = vec4(lightMixColor, opacity * color.a).rgba / 255.0;\n\n  vColor = picking_getFinalColor(vertexColor, instancePickingColors);\n}\n",e.gridFragment="#define SHADER_NAME grid-fragment-shader\n\nprecision highp float;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nvarying vec4 vColor;\n\n"+o.BLOOM_VARIABLE+"\n\nvoid main(void) {\n  vec4 passColor=vColor;\n  //淡出\n  passColor.a = mix(passColor.a, passColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n\n  gl_FragColor = passColor;\n  "+o.BLOOM_OUT+"\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexagonFragment=e.hexagonVertex=void 0;var i=n(29),r=n(79),a=n(32),o=n(38);e.hexagonVertex="#define SHADER_NAME hexagon-vertex-shader\n"+r.LIGHT_NUMBER+"\n\n\nprecision highp float;\n\nattribute vec3 positions; // CylinderGeometry的顶点坐标，纵坐标是y轴\nattribute vec3 normals;\nattribute vec3 instancePositions; // 实例的位置\nattribute vec2 instancePositionsLow;\nattribute vec4 instanceColors; // 实例的颜色\n\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform float extruded; // 在外界是个boolean值，控制六边形是否拔高\nuniform float coverage; // coverage可以控制显示时候的半径大小，但并不影响数据值\nuniform float elevationScale; // 也是控制显示的属性，不影响数据值\nuniform vec4 uSelectStyle;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\n"+i.UNIFORM_PART+"\n\n"+r.LIGHT_UNIFORM+"\n\n"+a.PICK_UNIFORM+"\n\nvarying vec4 vColor;\n\n"+i.PROJECTION_PART+"\n\n"+r.LIGHT_FUNCTION+"\n\n"+a.PICK_FUNCTION+"\n\n// 魔法数，控制缩放比例的\n#define ELEVATION_SCALE 0.8\n\nvoid main(void) {\n  // 实例色 or 选中色\n  vec4 color = mix(instanceColors, uSelectStyle, picking_useSelectStyle(instancePickingColors));\n  \n  // 绕y轴旋转角度\n  mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n\n  // 六边体的y轴是纵轴\n  vec2 rPosition = rotationMatrix * positions.xz;\n  vec2 rNormal = rotationMatrix * normals.xz;\n\n  vec3 rotatedPosition = vec3(rPosition.x, positions.y, rPosition.y);\n  vec3 rotatedNormal = vec3(rNormal.x, rNormal.y, normals.y);\n\n  // luma中CylinderGeometry的纵坐标范围在-0.5~0.5之间，这里把它转化成0~1之间\n  // 同时将高度由米为单位转变成由瓦片像素为单位\n\n  float elevation = mix(0.0, project_scale(vec3(instancePositions.z * (positions.y + 0.5) * ELEVATION_SCALE * elevationScale)).z, extruded);\n\n  elevation=mix(mix(0.,elevation,uAnimationParams[0]), elevation, step(0.0, uAnimationParams[1]));\n\n  // 对于透明或者高度小于零的图形不渲染\n  float isNoRender = float(color.a == 0.0 || instancePositions.z < 0.0);\n  float useRadius = radius * uPixelsPerMeter[0] * mix(coverage, 0.0, isNoRender);// isNoRender为1,mix为0;isNoRender为0,mix为1\n\n  // 计算六边形中心点的瓦片像素坐标\n  vec4 hexagonCenterPosition = vec4(project_view_local_position_precision(instancePositions.xy, instancePositionsLow.xy), elevation, 0.0);\n  // 计算六边形该顶点的位置\n  vec4 vertexPosition = hexagonCenterPosition + vec4(vec2(rotatedPosition.xz * useRadius), 1.0, 1.0);\n\n  gl_Position = uMatrix * vertexPosition;\n\n  float lightWeight = mix(1.0, getLightWeight(vertexPosition.xyz, rotatedNormal), extruded);\n\n  vec3 lightMixColor = lightWeight * color.rgb;\n  \n  vec4 vertexColor = vec4(lightMixColor, opacity * color.a).rgba / 255.0;\n\n  vColor = picking_getFinalColor(vertexColor, instancePickingColors);\n}\n",e.hexagonFragment="#define SHADER_NAME hexagon-fragment-shader\n\nprecision highp float;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nvarying vec4 vColor;\n\n"+o.BLOOM_VARIABLE+"\n\nvoid main(void) {\n  vec4 passColor=vColor;\n  //淡出\n  passColor.a = mix(passColor.a, passColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n\n  gl_FragColor = passColor;\n  "+o.BLOOM_OUT+"\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pathFragment=e.pathVertex=void 0;var i=n(29),r=n(32);e.pathVertex="\n#define SHADER_NAME path-vertex-shader\n\nprecision highp float;\n\nattribute vec2 positions; // 线段顶点位置\nattribute vec3 instanceStartPositions; // 线段起点\nattribute vec3 instanceEndPositions; // 线段终点\nattribute vec3 instanceLeftDeltas; // 线段与一个线段起点差值\nattribute vec3 instanceRightDeltas; // 线段与下一个线段终点差值\nattribute vec4 instanceStartEndPositions64xyLow; // 记录经纬度转为64为浮点数之后的差值\nattribute float instanceWidths; // 线段宽度\nattribute vec4 instanceColors; // 线段颜色\n\n\nattribute vec3 instancePickingColors; // 线段拾取颜色\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float miterLimit; // 限制miter长度\n\nuniform float lineJoin;\nuniform float lineCap;\n\nuniform float opacity;\n\nconst float EPSILON = 0.001;\nconst float PIXEL_EPSILON = 0.1;\n\n"+i.UNIFORM_PART+"\n\n"+r.PICK_UNIFORM+"\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset; // 用来做lineCap处理\nvarying float vMiterLength; // 拐角的偏移长度\nvarying float vCapLength;\nvarying float vMiterScale; // 拐角偏移比例，用于做lineJoin为round使用\nvarying float vSide;\n\n"+i.PROJECTION_PART+"\n\n"+r.PICK_FUNCTION+"\n\nvec3 calculateLinePosition(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n    float isEnd = positions.x;\n    \n    float width = clamp(instanceWidths * uPixelsPerMeter[0] * widthScale, widthMinPixels, widthMaxPixels) / 2.0;\n\n    vec2 deltaA = currPoint.xy - prevPoint.xy;\n    vec2 deltaB = nextPoint.xy - currPoint.xy;\n\n    float lenA = length(deltaA);\n    float lenB = length(deltaB);\n\n    lenA = mix(0.0, lenA, step(PIXEL_EPSILON, lenA));\n    lenB = mix(0.0, lenB, step(PIXEL_EPSILON, lenB));\n\n    // 单位方向向量\n    vec2 dirA = mix(vec2(0.0), normalize(deltaA), step(PIXEL_EPSILON, lenA));\n    vec2 dirB = mix(vec2(0.0), normalize(deltaB), step(PIXEL_EPSILON, lenB));\n\n    vec2 perpA = vec2(-dirA.y, dirA.x);\n    vec2 perpB = vec2(-dirB.y, dirB.x);\n\n    // 角平分线\n    vec2 tangent = vec2(dirA + dirB);\n    tangent = mix(perpA, normalize(tangent), step(EPSILON, length(tangent)));\n\n    vec2 miterVec = vec2(-tangent.y, tangent.x);\n    vec2 perp = mix(perpB, perpA, isEnd);\n\n    float L = mix(lenB, lenA, isEnd);\n\n    float offsetScale = 1.0 / dot(miterVec, perp);\n\n    // 计算出线段的垂直方向偏移\n    vec2 vertical_offset = miterVec * offsetScale * width * -positions.y;\n    vMiterScale = offsetScale;\n    vMiterLength = length(vertical_offset);\n\n\n    // 路线的起点和终点需要进行linecap处理，起点的lenA为0，终点的lenB为0\n    bool isPathStart = step(0.0, -lenA) > 0.5;\n    bool isPathEnd = step(0.0, -lenB) > 0.5;\n    vec2 dir = mix(dirB, dirA, isEnd);\n    \n    // 计算线段方向的水平偏移，为lineCap做准备\n    vec2 horizontal_offset = vec2(0.0);\n    float capLength = sqrt(pow(L / width, 2.0) + 1.0);\n    vCornerOffset = vec2(L / width, positions.y);\n    if (isPathStart) {\n        horizontal_offset = -dir * width;\n\n        vCornerOffset = vec2(-1, positions.y);\n        capLength = -1.0;\n    }\n\n    if (isPathEnd) {\n        horizontal_offset = dir * width;\n\n        vCornerOffset = vec2(-1, positions.y);\n        capLength = -1.0;\n    }\n    vCapLength = capLength;\n\n    // lineCap为butt时不做处理\n    horizontal_offset = mix(vec2(0.0), horizontal_offset, step(0.1, lineCap));\n\n    return currPoint + vec3(vertical_offset, 0.0) + vec3(horizontal_offset, 0.0);\n}\n\nvoid main(void) {\n    float isEnd = positions.x;\n\n    // 计算线段起终点在地图local平面坐标系下的向量\n    vec3 startLocalPosition = vec3(project_view_local_position(instanceStartPositions.xy + instanceStartEndPositions64xyLow.xy), 0.0);\n    vec3 endLocalPosition = vec3(project_view_local_position(instanceEndPositions.xy + instanceStartEndPositions64xyLow.zw), 0.0);\n    vec3 segmentDirection = normalize(mix(startLocalPosition - endLocalPosition, endLocalPosition - startLocalPosition, isEnd));\n    // 改变向量长度，给prevPosition和nextPosition都增加一个小的偏移量，防止浮点数精度问题在一些机器上无法绘制开头和结尾的线段\n    // 发现问题的环境：联想 ThinkCentre M8500t-N000 台式机 firefox 集显Intel(R) HD Graphics 4600 (2112 MB)\n    // 联想刃9000 i7-8700k chrome74 gtx1060 6g\n    // dell inspiron 7559 chrome74 gtx960m 4g\n    segmentDirection *= 0.01;\n\n\n    vec3 prevPosition = mix(-instanceLeftDeltas, vec3(0.0), isEnd) + instanceStartPositions;\n    vec2 prevPosition64xyLow = instanceStartEndPositions64xyLow.xy;\n    prevPosition = vec3(project_view_local_position(prevPosition.xy + prevPosition64xyLow), 0.0) + segmentDirection;\n\n    vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n    vec2 currPositionxy64Low = mix(instanceStartEndPositions64xyLow.xy, instanceStartEndPositions64xyLow.zw, isEnd);\n    currPosition = vec3(project_view_local_position(currPosition.xy + currPositionxy64Low), 0.0);\n\n    vec3 nextPosition = mix(vec3(0.0), instanceRightDeltas, isEnd) + instanceEndPositions;\n    vec2 nextPosition64xyLow = instanceStartEndPositions64xyLow.zw;\n    nextPosition = vec3(project_view_local_position(nextPosition.xy + nextPosition64xyLow), 0.0) + segmentDirection;\n\n    vec3 pos = calculateLinePosition(prevPosition, currPosition, nextPosition);\n\n    gl_Position = uMatrix * vec4(pos, 1.0);\n\n    vec4 vertexColor = instanceColors.rgba / 255.0 * opacity;\n    vColor = picking_getFinalColor(vertexColor, instancePickingColors);\n\n    vSide = positions.y;\n}\n\n",e.pathFragment="\n#define SHADER_NAME path-fragment-shader\n\nprecision highp float;\nuniform float miterLimit; // 限制miter长度\n\nuniform float lineJoin;\nuniform float lineCap;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset; // 用来做lineCap处理\nvarying float vCapLength; // 控制linecap的方向\nvarying float vMiterLength; // 拐角的偏移长度\nvarying float vMiterScale; // 拐角偏移比例，用于做lineJoin为round使用\nvarying float vSide;\n\nvoid main(void) {\n    vec4 fColor = vColor;\n    \n    if (lineJoin == 0.0 && vMiterLength > miterLimit) { // 处理miter超长问题\n        discard;\n    } else if (lineJoin == 1.0 && vMiterScale > 1.0) { // lineJoin为round\n        // gl_FragColor = vec4(0, 0, 0, 1.0);\n        fColor.a = 0.0;\n        // return;\n    }\n\n    // if (lineCap == 2.0 && length(vCornerOffset) > 1.0) { // 调试代码\n    //     fColor = fColor * 0.0;\n    // }\n\n    if (lineCap == 2.0 && length(vCornerOffset) > 1.0 && vCapLength < 0.0) { // 处理lineCap为round形式\n        fColor = fColor * 0.0;\n    }\n\n    gl_FragColor = fColor;\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connectorFragment=e.connectorVertex=e.pipeFragment=e.pipeVertex=void 0;var i=n(29),r=n(79),a=n(32),o=n(38);e.pipeVertex="\n#define SHADER_NAME pipe-vertex-shader\n"+r.LIGHT_NUMBER+"\n\nprecision highp float;\n\n"+i.UNIFORM_PART+"\n\n"+r.LIGHT_UNIFORM+"\n\n"+a.PICK_UNIFORM+"\n\nvarying vec4 vColor;\n\n"+i.PROJECTION_PART+"\n\n"+r.LIGHT_FUNCTION+"\n\n"+a.PICK_FUNCTION+"\n\nattribute vec2 texCoords;\n\nattribute vec4 instancePositionStart;\nattribute vec4 instancePositionEnd;\nattribute vec3 instanceHeightStartHeightEndRadius;\nattribute vec4 instanceColor;\nattribute vec3 instancePickingColor;\nattribute vec2 instancePercents;\nuniform vec4 uSelectColor; // 选中样式\nvarying float vPercent;\nconst vec3 axis_z = vec3(0.0, 0.0, 1.0);\nconst vec3 axis_x = vec3(1.0, 0.0, 0.0);\n\nvoid main() {\n\t// 实例色 or 选中色\n\tfloat isPicked = picking_useSelectStyle(instancePickingColor);\n  float angle = texCoords.s * PI * 2.0;\n  float side = texCoords.t; // 0 = start, 1 = end\n\n\n  float instanceHeightStart = instanceHeightStartHeightEndRadius[0];\n  float instanceHeightEnd = instanceHeightStartHeightEndRadius[1];\n  float instanceRadius = instanceHeightStartHeightEndRadius[2];\n\n  vec3 positionStart3d = project_view_local_position_precision(vec3(instancePositionStart.xy, instanceHeightStart), instancePositionStart.zw);\n  vec3 positionEnd3d = project_view_local_position_precision(vec3(instancePositionEnd.xy, instanceHeightEnd), instancePositionEnd.zw);\n  vec3 position3d = mix(positionStart3d, positionEnd3d, side);\n  vec3 dir = normalize(positionEnd3d - positionStart3d);\n  vec3 up = mix(axis_z, axis_x, step(0.7, abs(dot(dir, axis_z)))); // cos(PI/4) ≈ 0.7\n  vec3 zeroAngleDir = normalize(cross(up, dir)); // left\n  up = normalize(cross(dir, zeroAngleDir));\n  vec3 normal = zeroAngleDir * cos(angle) + up * sin(angle);\n  vec3 vertexPosition = position3d + normal * instanceRadius * uPixelsPerMeter.x;\n\n  gl_Position = uMatrix * vec4(vertexPosition, 1.0);\n\n  vec4 selectedColor = mix(instanceColor, uSelectColor, isPicked);\n\n  float lightWeight = getLightWeight(vertexPosition, normal);\n  vec3 lightMixColor = lightWeight * selectedColor.rgb;\n  vec4 vertexColor = vec4(lightMixColor, selectedColor.a) / 255.0;\n  vColor = picking_getFinalColor(vertexColor, instancePickingColor);\n  vPercent = mix(instancePercents[0], instancePercents[1], texCoords.t);\n}\n\n",e.pipeFragment="\n#define SHADER_NAME pipe-fragment-shader\n\n"+a.PICK_UNIFORM+"\n\n"+a.PICK_FUNCTION+"\n\nprecision highp float;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nvarying vec4 vColor;\nvarying float vPercent;\n\n"+o.BLOOM_VARIABLE+"\nvoid main() {\n  vec4 passColor=vColor;\n  \n  //淡出(uAnimationParams[1] == 1.0)\n  passColor.a = mix(passColor.a, passColor.a*uAnimationParams[0], step(0.0, uAnimationParams[1]));\n  //生长(uAnimationParams[1] == -1.0)\n  if(uAnimationParams[1]<0.0 && vPercent>uAnimationParams[0]) discard;\n\n  gl_FragColor = passColor;\n  "+o.BLOOM_OUT+"\n}\n",e.connectorVertex="\n#define SHADER_NAME connector-vertex-shader\n"+r.LIGHT_NUMBER+"\n\nprecision highp float;\n\n"+i.UNIFORM_PART+"\n\n"+r.LIGHT_UNIFORM+"\n\n"+a.PICK_UNIFORM+"\n\nvarying vec4 vColor;\n\n"+i.PROJECTION_PART+"\n\n"+r.LIGHT_FUNCTION+"\n\n"+a.PICK_FUNCTION+"\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec4 instancePosition;\nattribute vec4 instancePositionEnd;\nattribute vec2 instanceHeightRadius;\nattribute vec4 instanceColor;\nattribute vec3 instancePickingColor;\nuniform vec4 uSelectColor; // 选中样式\nattribute float instancePercents;\nvarying float vPercent;\nvoid main() {\n\t// 实例色 or 选中色\n\tfloat isPicked = picking_useSelectStyle(instancePickingColor);\n\n  float instanceHeight = instanceHeightRadius[0];\n  float instanceRadius = instanceHeightRadius[1];\n\n  vec3 position3d = project_view_local_position_precision(vec3(instancePosition.xy, instanceHeight), instancePosition.zw);\n  vec3 vertexPosition = position3d + normals * instanceRadius * uPixelsPerMeter.x;\n\n  gl_Position = uMatrix * vec4(vertexPosition, 1.0);\n\n  vec4 selectedColor = mix(instanceColor, uSelectColor, isPicked);\n\n  float lightWeight = getLightWeight(vertexPosition, normals); // world space?\n  vec3 lightMixColor = lightWeight * selectedColor.rgb;\n  vec4 vertexColor = vec4(lightMixColor, selectedColor.a) / 255.0;\n  vColor = picking_getFinalColor(vertexColor, instancePickingColor);\n  vPercent=instancePercents;\n}\n\n",e.connectorFragment="\n#define SHADER_NAME connector-fragment-shader\n\n"+a.PICK_UNIFORM+"\n\n"+a.PICK_FUNCTION+"\n\nprecision highp float;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nvarying vec4 vColor;\nvarying float vPercent;\n\n"+o.BLOOM_VARIABLE+"\nvoid main() {\n  vec4 passColor=vColor;\n\n  //淡出(uAnimationParams[1] == 1.0)\n  passColor.a = mix(passColor.a, passColor.a*uAnimationParams[0], step(0.0, uAnimationParams[1]));\n  //生长(uAnimationParams[1] == -1.0)\n  if(uAnimationParams[1]<0.0 && vPercent>uAnimationParams[0]) discard;\n  \n\tgl_FragColor =passColor;\n  "+o.BLOOM_OUT+"\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sidePlaneFragment=e.sidePlaneVertex=e.topPlaneFragment=e.topPlaneVertex=void 0;var i=n(29),r=n(32),a=n(38),o=n(79);e.topPlaneVertex="\n#define SHADER_NAME topPlane-vertex-shader\n\n// precision highp float;\n\nattribute vec3 positions;\nattribute vec2 positions64xyLow;\nattribute vec3 pickingColors; \nattribute vec2 texCoords;\nattribute vec2 heightOffset;\n\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nuniform float uEnableLighting;\n\n"+i.UNIFORM_PART+"\n"+r.PICK_UNIFORM+"\n"+r.PICK_FUNCTION+"\n"+o.LIGHT_NUMBER+"\n"+o.LIGHT_UNIFORM+"\n"+o.LIGHT_FUNCTION+"\n"+i.PROJECTION_PART+"\n\nvarying vec2 vTexCoords;\nvarying vec3 vPickingColors;\nvarying float vLightWeight;\n\nconst vec3 axis_z = vec3(0.0, 0.0, 1.0);\n\nvoid main(void) {\n    float totalHeight = positions.z + heightOffset.x + heightOffset.y;\n    totalHeight = mix(totalHeight*uAnimationParams[0], totalHeight, step(0.0, uAnimationParams[1]));\n    vec3 local_position = project_view_local_position_precision(vec3(positions.xy, totalHeight), positions64xyLow.xy);\n\n\tgl_Position = uMatrix * vec4(local_position, 1.0);\n\n    vLightWeight = mix(1.0, getLightWeight(local_position, axis_z), uEnableLighting);\n    vTexCoords = texCoords;\n    vPickingColors = pickingColors;\n}\n\n",e.topPlaneFragment="\n#define SHADER_NAME topPlane-fragment-shader\n\nprecision highp float;\n\nuniform sampler2D uGradientTexture;\nuniform vec4 uSelectTopColor; // 顶面选中颜色\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\n\n"+r.PICK_UNIFORM+"\n"+r.PICK_FUNCTION+"\n"+a.BLOOM_VARIABLE+"\n\nvarying vec2 vTexCoords;\nvarying vec3 vPickingColors;\nvarying float vLightWeight;\n\nvoid main(void) {\n    //如果选中则设置为选中颜色\n    float isPicked = picking_useSelectStyle(vPickingColors);\n    vec4 texColor = texture2D(uGradientTexture, vTexCoords);\n    // 选中色的分量取值是0-255，需要转化到0-1\n    vec4 selectColor = uSelectTopColor.rgba / 255.0;\n    vec4 passColor = mix(texColor, selectColor, isPicked);\n\n    // 光照\n    passColor.rgb *= vLightWeight;\n\n    // 淡出\n    passColor.a = mix(passColor.a, passColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n    gl_FragColor = picking_getFinalColor(passColor, vPickingColors);\n    "+a.BLOOM_OUT+"\n}\n",e.sidePlaneVertex="\n#define SHADER_NAME sidePlane-vertex-shader\n\n// precision highp float;\n\nattribute vec2 positions;\nattribute vec2 texCoords;\n\nattribute vec4 instancePositionStart;\nattribute vec4 instancePositionEnd;\nattribute vec3 instancePickingColor;\nattribute float instanceHeight;\nattribute float instanceOffset;\nattribute vec2 instanceSideUV;\n\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nuniform float uEnableLighting;\n\n"+i.UNIFORM_PART+"\n"+r.PICK_UNIFORM+"\n"+r.PICK_FUNCTION+"\n"+o.LIGHT_NUMBER+"\n"+o.LIGHT_UNIFORM+"\n"+o.LIGHT_FUNCTION+"\n"+i.PROJECTION_PART+"\n\nvarying vec2 vTexCoords;\nvarying vec3 vPickingColors;\nvarying float vLightWeight;\n\nconst vec3 axis_z = vec3(0.0, 0.0, 1.0);\n\nvoid main(void) {\n    float totalHeight = instanceOffset + instanceHeight * texCoords.y; // 偏移+高度\n    totalHeight = mix(totalHeight*uAnimationParams[0], totalHeight, step(0.0, uAnimationParams[1]));\n    vec3 pos = project_view_local_position_precision(\n        vec3(mix(instancePositionStart.xy, instancePositionEnd.xy, texCoords.x), totalHeight),\n        mix(instancePositionStart.zw, instancePositionEnd.zw, texCoords.x)\n    );\n\n    gl_Position = uMatrix * vec4(pos, 1.0) ;\n\n    // 计算法向量\n    vec3 posStart = project_view_local_position_precision(vec3(instancePositionStart.xy, 0.0), instancePositionStart.zw);\n    vec3 posEnd = project_view_local_position_precision(vec3(instancePositionEnd.xy, 0.0), instancePositionEnd.zw);\n    vec3 normal = normalize(cross(posEnd - posStart, axis_z));\n    vLightWeight = mix(1.0, getLightWeight(pos, normal), uEnableLighting);\n\n    vTexCoords = vec2(texCoords.x, mix(instanceSideUV.x, instanceSideUV.y, texCoords.y));\n    vPickingColors = instancePickingColor;\n}\n\n",e.sidePlaneFragment="\n#define SHADER_NAME sidePlane-fragment-shader\n\nprecision highp float;\n\nuniform sampler2D uGradientTexture;\nuniform vec4 uSelectSideColor; // 顶面选中颜色\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\n\n"+r.PICK_UNIFORM+"\n"+r.PICK_FUNCTION+"\n"+a.BLOOM_VARIABLE+"\n\nvarying vec2 vTexCoords;\nvarying vec3 vPickingColors;\nvarying float vLightWeight;\n\nvoid main(void) {\n    //如果选中则设置为选中颜色\n    float isPicked = picking_useSelectStyle(vPickingColors);\n    vec4 texColor = texture2D(uGradientTexture, vTexCoords);\n    // 选中色的分量取值是0-255，需要转化到0-1\n    vec4 selectColor = uSelectSideColor.rgba / 255.0;\n    vec4 passColor = mix(texColor, selectColor, isPicked);\n\n    // 光照\n    passColor.rgb *= vLightWeight;\n\n    //淡出\n    passColor.a = mix(passColor.a, passColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n    gl_FragColor = picking_getFinalColor(passColor, vPickingColors);\n    "+a.BLOOM_OUT+"\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.radiationFragment=e.radiationVertex=void 0;var i=n(38),r=n(29),a=n(32),o="\n#define SHADER_NAME dot-vertex-shader\n\nprecision highp float;\n\nattribute vec2 positions; // 圆形顶点\nattribute vec4 instancePositions; // 实例的位置\nattribute vec4 instanceFillColors; // 实例的填充颜色\nattribute vec4 instanceStrokeColors; // 实例的边线颜色\nattribute float instanceStrokeWidths; // 实例的边线宽度\nattribute float instanceRadius; // 实例的半径\nattribute float instanceOrder; // 实例的顺序\n\nattribute vec3 instancePickingColors;\n\nuniform vec4 uSelectFillColor;\nuniform vec4 uSelectStrokeColor;\nuniform float uSelectStrokeWidth;\n\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nuniform float uWaveCount;\nuniform float uEnableFade;\n"+r.UNIFORM_PART+"\n"+a.PICK_UNIFORM+"\n\nvarying vec3 vPickingColor;\nvarying vec2 vPositions;\nvarying float vAlpha;\nvarying float vFillRate;\nvarying float vSelectFillRate;\nvarying vec4 vFillColor;\nvarying vec4 vStrokeColor;\n"+r.PROJECTION_PART+"\n"+a.PICK_FUNCTION+"\n\nvoid main(void) {\n  float PI = 3.141592653589793;\n  float lat = instancePositions.y;\n  float earth_radius = 6378136.49;\n  float transform = (pow(2., uZoom) * 256.) / (2. * PI * earth_radius * cos(degree_to_radian(instancePositions.y)));\n\n  float percentage = uAnimationParams[2];\n\n  float p = instanceOrder / uWaveCount;\n  vPositions = positions;\n  float r = mix(p, fract(p + percentage), step(0.5, uEnableFade));\n  vAlpha = mix(1., 1.0 - r, step(0.5, uEnableFade));\n\n  r = mix(r * uAnimationParams[0], r, step(0., uAnimationParams[1]));\n\n\t// 判断是否改用选中样式\n\tfloat useSelectStyle = picking_useSelectStyle(instancePickingColors);\n  float strokeWidth = mix(instanceStrokeWidths, uSelectStrokeWidth, useSelectStyle);\n  \n  vFillRate = instanceRadius / (strokeWidth + instanceRadius);\n\n\tvec4 fillColor = mix(instanceFillColors, uSelectFillColor, useSelectStyle);\n\tvec4 strokeColor = mix(instanceStrokeColors, uSelectStrokeColor, useSelectStyle);\n\tvFillColor = fillColor / 255.0;\n\tvStrokeColor = strokeColor / 255.0;\n\n\t// 根据局部坐标计算纹理坐标\n\tvec2 normalPosition = (positions + vec2(1.0)) / 2.0;\n\tvPickingColor = instancePickingColors;\n\n\t// 转地理坐标为相对像素坐标\n\tvec2 instancePixelPos = project_view_local_position_precision(instancePositions.xy, instancePositions.zw);\n\n\t// 局部坐标根据实例大小进行拉伸\n\tvec2 localCoord = vec2(positions.x, positions.y) * (instanceRadius + strokeWidth) * r * transform;\n\n\tgl_Position = uMatrix * vec4(instancePixelPos + localCoord, 0.0, 1.0);\n\t\n}\n",s="\n#define SHADER_NAME dot-fragment-shader\n\n"+a.PICK_UNIFORM+"\n\nvarying vec3 vPickingColor;\nvarying vec2 vPositions;\nvarying float vAlpha;\nvarying float vFillRate;\nvarying vec4 vFillColor;\nvarying vec4 vStrokeColor;\n"+a.PICK_FUNCTION+"\nuniform vec4 uAnimationParams;\n\n"+i.BLOOM_VARIABLE+"\n\nvoid main(void) {\n  float d = pow(vPositions.x * 10.0, 2.0) + pow(vPositions.y * 10.0, 2.0);\n  vec4 color = mix(vFillColor, vStrokeColor, step(100.0 * vFillRate, d));\n  color = vec4(color.rgb * color.a, color.a) * vAlpha;\n  color = mix(color, color * uAnimationParams[0], step(0., uAnimationParams[1]));\n\n  vec4 passColor=picking_getFinalColor(color, vPickingColor);\n\n\t// 纹理颜色 or 拾取标识色\n\tgl_FragColor = passColor;\n  "+i.BLOOM_OUT+"\n}\n";e.radiationVertex=o,e.radiationFragment=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.trailFragment=e.trailVertex=void 0;var i=n(38),r=n(29),a=n(32);e.trailVertex="\n#define SHADER_NAME trail-vertex-shader\n\nprecision highp float;\n\nattribute vec2 positions; // 正方形顶点\nattribute vec4 instanceStarts; // [lngPart.high, latPart.high, lngPart.low, latPart.low]\nattribute vec4 instanceEnds;\nattribute vec4 instanceColors; // [r, g, b, a]\nattribute vec4 instanceGradientColors; // 实例渐变色，当实例是纯色时，此参数等同instanceColors，当实例为双色渐变时，instanceColors为起点颜色，此参数为终点颜色\nattribute vec2 instanceTimes; // [startTime, endTime]\nattribute vec2 instanceWidthHeight; // [width, height]，高度暂时按照实例属性传进来，理论上可以支持每个点都有单独的高度\nattribute vec3 instancePickingColors;   // 被选中的instance信息\n\nuniform float showDuration;\nuniform vec4 uSelectColor; // 选中的颜色\nuniform float uSelectWidth; // 选中的宽度\nuniform float uEnableGeodesic; //是否开启大地曲线绘制模式\nuniform float uWidthRatio;\n\nuniform float uCurrTime;\nuniform float uEnableHighlightPoint;\n\n"+r.UNIFORM_PART+"\n\n"+a.PICK_UNIFORM+"\n\nvarying vec2 vTimes;\nvarying vec4 vColor;\nvarying vec2 vDists;\nvarying vec4 vVectors;\nvarying vec2 vPositions;\n\n"+r.PROJECTION_PART+"\n\n"+a.PICK_FUNCTION+"\n\nvoid main(void) {\n  float isPicked = picking_useSelectStyle(instancePickingColors);\n  // vec4 color = mix(gradient, uSelectColor, isPicked);\n  float width = mix(instanceWidthHeight.x, uSelectWidth, isPicked);\n  // latlng -> pixel\n  vec2 startPoint;\n  float startHeight;\n  vec2 endPoint;\n  if(uEnableGeodesic > 0.5){\n    vec3 startEndArray[2];\n    project_for_line_precision(instanceStarts, instanceEnds, instanceWidthHeight.y, 0.0, startEndArray);\n    vec3 source = startEndArray[0];\n    vec3 target = startEndArray[1];\n    startPoint = source.xy;\n    startHeight = source.z;\n    endPoint = target.xy;\n  } else {\n    vec3 startPointWithHeight = project_view_local_position_precision(vec3(instanceStarts.xy, instanceWidthHeight.y), instanceStarts.zw);\n    startPoint = startPointWithHeight.xy;\n    startHeight = startPointWithHeight.z;\n    endPoint = project_view_local_position_precision(instanceEnds.xy, instanceEnds.zw);\n  }\n  \n  // middle point\n  vec2 midPoint = (startPoint + endPoint) / 2.0;\n\n  vec2 midToEnd = endPoint - midPoint;\n  vec2 horizontal = normalize(midToEnd);\n  vec2 vertical = vec2(-horizontal.y, horizontal.x);\n\n  // 为绘制高亮头部预留空间\n  float radius = mix(width / 2.0, width * uWidthRatio / 2.0, uEnableHighlightPoint);\n\n  float halfLength = length(midToEnd);\n  float halfLengthWithCap = halfLength + radius;\n\n  vec2 coord = midPoint + horizontal * halfLengthWithCap * positions.x + vertical * radius * positions.y;\n\n  // the magic de-flickering factor\n  vec4 shift = vec4(0., 0., mod(instanceTimes.x, showDuration) * 1e-4, 0.);\n  gl_Position = uMatrix * vec4(coord, startHeight, 1.0) + shift;\n\n  // time\n  float capRatio = halfLength / halfLengthWithCap;\n  float time = mix(\n    instanceTimes.x, \n    instanceTimes.y, \n    (clamp(positions.x, -capRatio, capRatio) / capRatio + 1.0) / 2.0\n  );\n\n  // varying\n  // vColor = instanceColors; // 原来是这样的\n  vTimes.x = 1.0 - (uCurrTime - time) / showDuration;\n  vTimes.y= (uCurrTime - instanceTimes.x) / (instanceTimes.y - instanceTimes.x);\n\n  vec4 color = mix(mix(instanceGradientColors, instanceColors, vTimes.x), uSelectColor, isPicked);\n\n  vDists = vec2(halfLength, radius);\n  vVectors = vec4(horizontal.x, horizontal.y, vertical.x, vertical.y);\n  vPositions = positions;\n  vColor = picking_getFinalColor(color / 255., instancePickingColors); // 拾取颜色+底色\n}\n",e.trailFragment="\n#define SHADER_NAME trail-fragment-shader\n\nprecision highp float;\n\n"+a.PICK_UNIFORM+"\n\nvarying vec2 vTimes;\nvarying vec4 vColor;\nvarying vec2 vDists;\nvarying vec4 vVectors;\nvarying vec2 vPositions;\n\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nuniform float showDuration;\nuniform float uWidthRatio;\nuniform float uEnableHighlightPoint;\n\n"+i.BLOOM_VARIABLE+"\n\nvoid main(void) {\n\n  vec4 passColor;\n  float showTime = vTimes.x;\n  float currPos = vTimes.y;\n  vec2 horizontal = vVectors.xy;\n  vec2 vertical = vVectors.zw;\n  float halfLength = vDists.x;\n  float radius1 = vDists.y;\n  float halfLengthWithCap1 = halfLength + radius1;\n  vec2 capCoord = horizontal * (halfLengthWithCap1 * vPositions.x + halfLength * (1.0 - currPos * 2.0)) + vertical * radius1 * abs(vPositions.y);\n  if(length(capCoord) < radius1 && abs(currPos - 0.5) < 0.5 && uEnableHighlightPoint > 0.5){\n    // 说明处于高亮头部\n    passColor = vec4(1., 1., 1., 1. - length(capCoord) / radius1);\n    passColor.a = mix(passColor.a, passColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n    gl_FragColor = passColor;\n    "+i.BLOOM_OUT+"\n  }else{\n    float widthRatio = mix(1.0, uWidthRatio, uEnableHighlightPoint);\n    float radius2 = vDists.y * 1.0 / widthRatio;\n    float halfLengthWithCap2 = halfLength + radius2;\n    if((abs(vPositions.y) > 1.0 / widthRatio) || ((abs(vPositions.x)) * halfLengthWithCap1 > halfLengthWithCap2)){\n      // 把x方向和y方向因为绘制高亮头部预留空间的多余部分去掉\n      discard;\n    }\n\n    float x = vPositions.x * halfLengthWithCap1 / halfLengthWithCap2;\n    float y = vPositions.y * widthRatio;\n    \n    vec2 capCoord2 = horizontal * (halfLengthWithCap2 * abs(x) - halfLength) + vertical * radius2 * abs(y);\n    float isCap = step(halfLength / halfLengthWithCap2, abs(x));\n    // invisible if showTime > 1 or showTime < 0\n    float visible = float(abs(showTime - 0.5) < 0.5);\n\n    // visible if in circle at start or out at end\n    visible = mix(\n      // x < 0 : in circle || !isCap\n      float(length(capCoord2) * isCap < radius2),\n      // x > 0 : out circle && !isCap\n      float(length(capCoord2) * (1. - isCap) > radius2),\n      1. - step(0., x)\n    ) * visible;\n    \n    if(visible == 0.0)\n      discard;\n  \n    passColor = vColor;\n  \n    passColor.a = passColor.a * showTime * visible;\n  \n    //淡出\n    passColor.a = mix(passColor.a, passColor.a * uAnimationParams[0], step(0., uAnimationParams[1]));\n  \n    gl_FragColor = passColor;\n    "+i.BLOOM_OUT+"\n  }\n  \n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wallFragment=e.wallVertex=void 0;var i=n(29),r=n(32),a=n(38);e.wallVertex="\n#define SHADER_NAME wall-vertex-shader\n\nprecision highp float;\n\n"+i.UNIFORM_PART+"\n\nattribute vec4 positions;\nattribute vec4 instanceStarts; \nattribute vec4 instanceEnds;\nattribute vec2 instanceUvPercents; \nattribute vec2 instanceUvGradientPercents; \nattribute vec3 instancePickingColors; \nattribute float instanceHeights;\nattribute vec2 instanceRepeats;\nattribute vec2 texCoords;\nattribute vec2 instancePercents;\n\n"+i.PROJECTION_PART+"\nvarying vec2 vUv;\nvarying vec4 vOffsets; // [vHeightUvRange, vBottomY, vGradientHeightUvRange, vGradienBottomY]\nvarying vec2 vInstanceRepeats;\nvarying vec3 vPickingColors;\n\nvoid main(void) {\n    vec3 pos;\n    vec2 uv;\n\n    float vHeightUvRange;\n    float vBottomY;\n    float vGradientHeightUvRange;\n    float vGradienBottomY;\n  \n    float topY=instanceUvPercents.x;\n    float bottomY=instanceUvPercents.y;\n    float heightUvRange=abs(topY-bottomY);\n    vHeightUvRange=heightUvRange;\n    vBottomY=bottomY;\n\n    float gradientTopY=instanceUvGradientPercents.x;\n    float gradientBottomY=instanceUvGradientPercents.y;\n    float gradientHeightUvRange=abs(gradientTopY-gradientBottomY);\n    vGradientHeightUvRange=gradientHeightUvRange;\n    vGradienBottomY=gradientBottomY;\n\n    vInstanceRepeats=instanceRepeats;\n\n    uv = vec2(\n        mix(instancePercents[0], instancePercents[1], texCoords.x), // 纹理横向保持一致\n        mix(0.0, 1.0, texCoords.y) // 纹理纵向保持一致\n    );\n    float height = mix(0.0, instanceHeights, texCoords.y); // 高度与纹理方向一致\n    pos = project_view_local_position_precision(\n        vec3(mix(instanceStarts.xy, instanceEnds.xy, texCoords.x), height), // 纹理横向与起止经纬度保持一致\n        mix(instanceStarts.zw, instanceEnds.zw, texCoords.x) // 纹理横向与起止经纬度保持一致\n    );\n\n    gl_Position = uMatrix * vec4(pos, 1.0) ;\n    vUv=uv;\n    vPickingColors = instancePickingColors;\n\n    vOffsets = vec4(vHeightUvRange, vBottomY, vGradientHeightUvRange, vGradienBottomY);\n}   \n",e.wallFragment="\n#define SHADER_NAME wall-fragment-shader\nprecision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uGradientTexture;\nuniform vec4 uSelectColor; // 选中的颜色\nuniform bool uHasTexture;\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nuniform vec2 uWallAnimationParams; // [uBreathAmplitude, uFlowDirection]\n\nvarying vec2 vUv;\nvarying vec4 vOffsets; // [vHeightUvRange, vBottomY, vGradientHeightUvRange, vGradienBottomY]\nvarying vec2 vInstanceRepeats;\nvarying vec3 vPickingColors;\n"+r.PICK_UNIFORM+"\n"+r.PICK_FUNCTION+"\n"+a.BLOOM_VARIABLE+"\n\nvoid main(void) {\n    float uBreathAmplitude = uWallAnimationParams[0];\n    float uFlowDirection = uWallAnimationParams[1];\n\n    float vHeightUvRange = vOffsets[0];\n    float vBottomY = vOffsets[1];\n    float vGradientHeightUvRange = vOffsets[2];\n    float vGradienBottomY = vOffsets[3];\n    \n   \n    vec4 passColor=vec4(1.,1.,1.,1.);\n  \n    float u=mod(vUv.x,1.0);\n    float v=mod(vUv.y,1./vInstanceRepeats.y)/(1./vInstanceRepeats.y)*vHeightUvRange+vBottomY;\n    float vGradient=vUv.y*vGradientHeightUvRange+vGradienBottomY;\n\n    vec4 flowColor, breathColor;\n    \n    //流动\n    flowColor = texture2D(uTexture,\n        mix(\n            vec2(u,vBottomY+mod(v-uAnimationParams[2]*vHeightUvRange,vHeightUvRange)), // 垂直\n            vec2(mod(u-uAnimationParams[2], 1.0),v), // 水平\n            step(0.0, uFlowDirection)\n        )\n    );\n    //呼吸\n    breathColor = texture2D(uTexture, vec2(u,v));\n    breathColor.a=breathColor.a-uAnimationParams[2]*uBreathAmplitude;\n    vec4 textureColor = mix(breathColor, flowColor, step(0.0, uAnimationParams[3]));\n    \n    // 如果没有纹理的话，color不使用repeat参数\n    float uGradient = vUv.x / vInstanceRepeats.x;\n    //流动\n    flowColor = texture2D(uGradientTexture,\n        mix(\n            vec2(uGradient,vGradienBottomY+mod(vGradient - uAnimationParams[2]*vGradientHeightUvRange,vGradientHeightUvRange)),\n            vec2(uGradient - uAnimationParams[2],vGradient),\n            step(0.0, uFlowDirection)\n        )\n    );\n    breathColor = texture2D(uGradientTexture,vec2(uGradient,vGradient));\n    breathColor.a=breathColor.a-uAnimationParams[2]*uBreathAmplitude;\n    vec4 noTextureColor = mix(breathColor, flowColor, step(0.0, uAnimationParams[3]));\n    \n    \n    // passColor = mix(noTextureColor, textureColor, step(0.0, uHasTexture * vHeightUvRange)); // mix结果不正确\n    passColor = mix(noTextureColor, textureColor, uHasTexture && vHeightUvRange > 0.0 ? 1.0 : 0.0);\n    \n    //淡出(uAnimationParams[1] == 1.0)\n    passColor.a = mix(passColor.a, passColor.a*uAnimationParams[0], step(0.0, uAnimationParams[1]));\n    //生长(uAnimationParams[1] == -1.0)\n    if(uAnimationParams[1]<0.0 && vUv.x/vInstanceRepeats.x>uAnimationParams[0]) discard;\n\n    // 选中色的分量取值是0-255，需要转化到0-1\n    vec4 selectColor = uSelectColor.rgba / 255.0;\n    // 选中色的a需要与动画的a保持一致\n    selectColor.a = mix(selectColor.a-uAnimationParams[2]*uBreathAmplitude, selectColor.a,step(0.0, uAnimationParams[3]));\n    selectColor.a = mix(selectColor.a, selectColor.a*uAnimationParams[0],step(0.0, uAnimationParams[1]));\n    float isPicked = picking_useSelectStyle(vPickingColors);\n    vec4 color = mix(passColor, selectColor, isPicked);\n   \n    gl_FragColor = picking_getFinalColor(color, vPickingColors);\n    "+a.BLOOM_OUT+"\n}\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wallStrokeFragment=e.wallStrokeVertex=void 0;var i=n(29),r=n(32),a=n(38);e.wallStrokeVertex="\n#define SHADER_NAME wall-vertex-shader\n\nprecision highp float;\n\n"+i.UNIFORM_PART+"\n\nattribute vec4 positions;\nattribute vec4 instanceStarts; \nattribute vec4 instanceEnds;\nattribute vec3 instancePickingColors; \nattribute float instanceHeights;\nattribute vec2 instanceRepeats;\nattribute vec2 texCoords;\nattribute vec2 instancePercents;\nattribute vec2 instancePercentYs;\nattribute vec4 instanceColor;\nattribute float instanceWidth;\n\nuniform vec4 uSelectColor; // 拾取后的边线颜色\nuniform float uSelectStrokeWidth;// 拾取后的边线颜色\n\nuniform vec2 uViewSize;\n\n\n"+i.PROJECTION_PART+"\nvarying vec2 vUv;\nvarying vec4 vOffsets; // [vHeightUvRange, vBottomY, vGradientHeightUvRange, vGradienBottomY]\nvarying vec2 vInstanceRepeats;\nvarying vec4 vColor;\nvarying vec2 vPercents;\nvarying vec2 vPercentYs;\nvarying vec3 vPickingColors;\nvarying float vIsMiddle;\nvarying vec4 vPositions;\nvarying vec2 vDists;\nvarying vec4 vVectors;\n"+r.PICK_UNIFORM+"\n\n"+r.PICK_FUNCTION+"\n\nvoid main(void) {\n    vec2 uv;\n\n    uv = vec2(\n        mix(instancePercents[0], instancePercents[1], texCoords.x), // 纹理横向保持一致\n        mix(instancePercentYs[0], instancePercentYs[1], texCoords.y) // 纹理纵向保持一致\n    );\n    // instancePercentYs.y与instancePercentYs.x不相等时为围墙线两端\n    float isMiddle = mix(1.0, 0.0, abs(instancePercentYs.y - instancePercentYs.x));\n\n    float sHeight = mix(0.0, instanceHeights, instancePercentYs.x); // 高度与纹理方向一致\n    float eHeight = mix(0.0, instanceHeights, instancePercentYs.y); // 高度与纹理方向一致\n    vec3 sPos = project_view_local_position_precision(\n        vec3(instanceStarts.xy, sHeight), \n        instanceStarts.zw \n    );\n    vec3 ePos = project_view_local_position_precision(\n        vec3(instanceEnds.xy, eHeight), \n        instanceEnds.zw \n    );\n\n    vec4 sNdcCoord = uMatrix * vec4(sPos, 1.0);\n    vec4 eNdcCoord = uMatrix * vec4(ePos, 1.0);\n\n    vec2 sScreenPos = proj_position_to_screen(sNdcCoord);\n    vec2 eScreenPos = proj_position_to_screen(eNdcCoord);\n\n    vec2 horizontal = normalize(eScreenPos - sScreenPos);\n    float halfLength = length(eScreenPos - sScreenPos) / 2.0;\n    vec2 vertical = vec2(horizontal.y, -horizontal.x);\n\n    float isPicked = picking_useSelectStyle(instancePickingColors);\n    float width = mix(instanceWidth, uSelectStrokeWidth, isPicked);\n\n    //计算扩展后两端端点的z值\n    float w = width * 0.5;\n    float l = halfLength * 2.0;\n    float sz = mix(sNdcCoord.z, eNdcCoord.z, -w/l);\n    float ez = mix(sNdcCoord.z, eNdcCoord.z,(l+w)/l);\n    float sw = mix(sNdcCoord.w, eNdcCoord.w, -w/l);\n    float ew = mix(sNdcCoord.w, eNdcCoord.w,(l+w)/l);\n    vec2 offsetScreenY = getExtrusionOffset(horizontal, positions.y, width);\n    vec2 offsetScreenX = getExtrusionOffset(vertical, positions.x, width);\n\n    gl_Position = screen_to_proj_position(\n        mix(sScreenPos, eScreenPos, texCoords.x) + offsetScreenY + offsetScreenX, \n        mix(sz ,ez / ew * sw, texCoords.x), \n        sw\n    );\n    // gl_Position = screen_to_proj_position(\n    //     mix(sScreenPos, eScreenPos, texCoords.x) + offsetScreenY + offsetScreenX, \n    //     mix(sNdcCoord.z ,eNdcCoord.z / eNdcCoord.w * sNdcCoord.w, texCoords.x), \n    //     sNdcCoord.w\n    // );\n    vInstanceRepeats = instanceRepeats;\n    vUv=uv;\n    vColor = instanceColor;\n    vPickingColors = instancePickingColors;\n    vIsMiddle = isMiddle;\n    vPositions = positions;\n    vDists = vec2(halfLength, width / 2.0);\n    vVectors = vec4(horizontal.x, horizontal.y, vertical.x, vertical.y);\n\n}   \n",e.wallStrokeFragment="\n#define SHADER_NAME wall-fragment-shader\nprecision highp float;\nuniform vec4 uSelectStrokeColor; // 选中的颜色\nuniform vec4 uAnimationParams; // [toggleFactor, toggleType, processFactor, processType]\nuniform float uEnableAutoClose; // 自动闭合开关\n\nvarying vec2 vUv;\nvarying vec2 vInstanceRepeats;\nvarying vec4 vColor;\nvarying vec3 vPickingColors;\nvarying float vIsMiddle;\nvarying vec4 vPositions;\nvarying vec2 vDists;\nvarying vec4 vVectors;\n"+r.PICK_UNIFORM+"\n\n"+r.PICK_FUNCTION+"\n"+a.BLOOM_VARIABLE+"\n\nvoid main(void) {\n    if(vIsMiddle < 0.5 && uEnableAutoClose > 0.5){\n        discard;\n    }\n    vec2 horizontal = vVectors.xy;\n    vec2 vertical = vVectors.zw;\n    float halfLength = vDists.x;\n    float radius = vDists.y;\n    float halfLengthWithCap = halfLength + radius;\n    vec2 capCoord = horizontal * (halfLengthWithCap * abs(vPositions.x) - halfLength) + vertical * radius * abs(vPositions.y);\n    float isCap = step(halfLength / halfLengthWithCap, abs(vPositions.x));\n\n    // visible if in circle at start or out at end\n    // float visible = mix(\n    //     // x < 0 : in circle || !isCap\n    //     float(length(capCoord) * isCap < radius),\n    //     // x > 0 : out circle && !isCap\n    //     float(length(capCoord) * (1. - isCap) > radius),\n    //     1. - step(0., vPositions.x)\n    // );\n    // 两端同时绘制半圆，处理半圆被遮挡问题，有深度不会有边线叠加问题\n    float visible = float(length(capCoord) * isCap < radius);\n    if(visible == 0.0){\n        discard;\n    }\n    vec4 passColor = vColor;\n    //淡出(uAnimationParams[1] == 1.0)\n    passColor.a = mix(passColor.a, passColor.a*uAnimationParams[0], step(0.0, uAnimationParams[1]));\n    //生长(uAnimationParams[1] == -1.0)\n    if(uAnimationParams[1]<0.0 && vUv.x/vInstanceRepeats.x>uAnimationParams[0]) discard;\n\n    float isPicked = picking_useSelectStyle(vPickingColors);\n\tvec4 color = mix(passColor, uSelectStrokeColor, isPicked);\n    vec4 vertexColor = color.rgba / 255.0;\n    gl_FragColor  = picking_getFinalColor(vertexColor, vPickingColors);\n    "+a.BLOOM_OUT+"\n}\n"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=(0,c.default)(o.default.pr,{logid:"type",key:u.default||"",t:t||""});(0,f.sendOnce)(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=n(98),o=i(a),s=n(97),u=i(s),l=n(124),c=i(l),f=n(121)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!_.has(t)){var n=new s.default(function(t){if(!f.default||h.default.serverConfig.isLocal)return void t(null);var n=e.subkey,i=e.subpid,r=["key="+f.default,"pid="+document.domain,"channel=0"];n&&r.push("key2="+n,"pid2="+i);var a=m+"?"+r.join("&");p(null,a,function(e){var i=null;e&&e.info&&0===e.info.error?(i=e.detail&&e.detail.cfg)&&(i.subkey=n):console.error("鉴权失败："+e.info.msg),t(i)},function(){console.error("鉴权失败：网络请求失败。"),t(null)})});_.set(t,n)}return _.get(t)}function a(t){_.delete(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(127),s=i(o),u=n(178),l=i(u);e.checkKey=r,e.revokeKeyCheck=a;var c=n(97),f=i(c),d=n(95),h=i(d),v=n(98),g=i(v),p=n(312).send,_=new l.default,m=g.default.checkKeySrc},function(t,e,n){"use strict";function i(){a.removeEventListener("DOMContentLoaded",i,!1),r.fireReady()}var r=[],a=document;r.isReady=!1,r._used=!1,r.ready=function(t){r.initReady(),r.isReady?t():r.push(t)},r.initReady=function(){if(!r._used){if(r._used=!0,"complete"===a.readyState||"interactive"===a.readyState)return r.fireReady();a.addEventListener("DOMContentLoaded",i,!1)}},r.fireReady=function(){if(!r.isReady){if(!a.body)return setTimeout(r.fireReady,16);if(r.isReady=!0,r.length)for(var t,e=0;t=r[e];e++)t()}},e.domReady=r.ready},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return document.getElementsByTagName("head")[0]}function a(){return"cb"+(new Date).getTime().toString(36)+(x++).toString(36)}function o(t,e){A.push({name:t,sender:e})}function s(t){t.clearAttributes&&t.clearAttributes(),t[y]=null,t.onerror=null,t.parentNode&&t.parentNode.removeChild(t)}function u(t,e,n,i,a){var s=null,u=!1,l=["output=jsonp","pf=jsapi","ref=jsapi","cb="+E+"."+t],f=_.createElement("script");f.setAttribute("type","text/javascript"),f.setAttribute("charset",a||"GBK"),f.async=!0,f.src=e+(-1===e.indexOf("?")?"?":"&")+l.join("&"),f.onerror=function(){u=!0,i&&i(),c(t)},b[t]=function(t){s=t},f[y]=function(){m.test(this.readyState)&&(c(t),s?(s.id=t,n&&n(s)):u||i&&i())};var d=r();d.insertBefore(f,d.firstChild),o(t,f)}function l(t,e,n,i){return t||(t=a()),p(function(){c(t),u(t,e,n,i)}),t}function c(t){if(t){for(var e=0,n=null,i=A.length;e<i;e++)if(A[e].name===t){var r=A.splice(e,1),a=(0,d.default)(r,1);n=a[0];break}n&&s(n.sender),b[t]&&delete b[t]}}var f=n(22),d=i(f),h=n(274),v=i(h),g=n(311),p=g.domReady,_=window.document,m=/loaded|complete|undefined/i,y=_.dispatchEvent?"onload":"onreadystatechange",b=window[v.default]._svcb||(window[v.default]._svcb={}),E=v.default+"._svcb",A=[],x=0;e.send=l,e.cancel=c},function(t,e,n){"use strict";function i(t,e,n,i){n=n||2;var a=e&&e.length,s=a?e[0]*n:t.length,u=r(t,0,s,n,!0),l=[];if(!u)return l;var c=void 0,d=void 0,h=void 0,v=void 0,g=void 0,p=void 0,_=void 0;if(a&&(u=f(t,e,u,n)),t.length>80*n){var m=(0,I.default)(t,2);h=m[0],v=m[1],c=h,d=v;for(var y=n;y<s;y+=n)g=t[y],p=t[y+1],g<c&&(c=g),p<d&&(d=p),g>h&&(h=g),p>v&&(v=p);_=Math.max(h-c,v-d)}return o(u,l,n,c,d,_,void 0,i),l}function r(t,e,n,i,r){var a=void 0,o=void 0;if(r===M(t,e,n,i)>0)for(a=e;a<n;a+=i)o=k(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=k(a,t[a],t[a+1],o);return o&&A(o,o.next)&&(S(o),o=o.next),o}function a(t,e){if(!t)return t;e||(e=t);var n=t,i=void 0;do{if(i=!1,n.steiner||!A(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{if(S(n),e=n.prev,(n=e)===n.next)return null;i=!0}}while(i||n!==e);return e}function o(t,e,n,i,r,f,d,h){if(h=h||0,t){!d&&f&&g(t,i,r,f);for(var v=t,p=void 0,_=void 0;t.prev!==t.next;)if(p=t.prev,_=t.next,f?u(t,i,r,f):s(t))e.push(p.i/n+h),e.push(t.i/n+h),e.push(_.i/n+h),S(t),t=_.next,v=_.next;else if((t=_)===v){d?1===d?(t=l(t,e,n,h),o(t,e,n,i,r,f,2,h)):2===d&&c(t,e,n,i,r,f,h):o(a(t),e,n,i,r,f,1,h);break}}}function s(t){var e=t.prev,n=t,i=t.next;if(E(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(y(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&E(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,a=t,o=t.next;if(E(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,u=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,l=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,f=_(s,u,e,n,i),d=_(l,c,e,n,i),h=t.nextZ;h&&h.z<=d;){if(h!==t.prev&&h!==t.next&&y(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&E(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=f;){if(h!==t.prev&&h!==t.next&&y(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&E(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function l(t,e,n,i){var r=t;do{var a=r.prev,o=r.next.next;!A(a,o)&&x(a,r,r.next,o)&&P(a,o)&&P(o,a)&&(e.push(a.i/n+i),e.push(r.i/n+i),e.push(o.i/n+i),S(r),S(r.next),t=o,r=t),r=r.next}while(r!==t);return r}function c(t,e,n,i,r,s,u){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&b(l,c)){var f=C(l,c);return l=a(l,l.next),f=a(f,f.next),o(l,e,n,i,r,s,void 0,u),void o(f,e,n,i,r,s,void 0,u)}c=c.next}l=l.next}while(l!==t)}function f(t,e,n,i){var o=[],s=void 0,u=void 0,l=void 0,c=void 0,f=void 0;for(s=0,u=e.length;s<u;s++)l=e[s]*i,c=s<u-1?e[s+1]*i:t.length,f=r(t,l,c,i,!1),f===f.next&&(f.steiner=!0),o.push(m(f));for(o.sort(d),s=0;s<o.length;s++)h(o[s],n),n=a(n,n.next);return n}function d(t,e){return t.x-e.x}function h(t,e){if(e=v(t,e)){var n=C(e,t);a(n,n.next)}}function v(t,e){var n=e,i=t.x,r=t.y,a=-1/0,o=void 0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var s=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===a)return o.prev;var u=o,l=o.x,c=o.y,f=1/0,d=void 0;for(n=o.next;n!==u;)i>=n.x&&n.x>=l&&i!==n.x&&y(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)&&((d=Math.abs(r-n.y)/(i-n.x))<f||d===f&&n.x>o.x)&&P(n,t)&&(o=n,f=d),n=n.next;return o}function g(t,e,n,i){var r=t;do{null===r.z&&(r.z=_(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,p(r)}function p(t){var e=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=1;do{for(n=t,t=null,a=null,o=0;n;){for(o+=1,i=n,s=0,e=0;e<l&&(s+=1,i=i.nextZ);e++);for(u=l;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s-=1):(r=i,i=i.nextZ,u-=1),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a&&(a.nextZ=null),l*=2}while(o>1);return t}function _(t,e,n,i,r){return t=32767*(t-n)/r,e=32767*(e-i)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!T(t,e)&&P(t,e)&&P(e,t)&&w(t,e)}function E(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function A(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,n,i){return!!(A(t,e)&&A(n,i)||A(t,i)&&A(n,e))||E(t,e,n)>0!=E(t,e,i)>0&&E(n,i,t)>0!=E(n,i,e)>0}function T(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&x(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function P(t,e){return E(t.prev,t,t.next)<0?E(t,e,t.next)>=0&&E(t,t.prev,e)>=0:E(t,e,t.prev)<0||E(t,t.next,e)<0}function w(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function C(t,e){var n=new R(t.i,t.x,t.y),i=new R(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function k(t,e,n,i){var r=new R(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}var L=n(22),I=function(t){return t&&t.__esModule?t:{default:t}}(L);t.exports=i,i.deviation=function(t,e,n,i){var r=e&&e.length,a=r?e[0]*n:t.length,o=Math.abs(M(t,0,a,n));if(r)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;o-=Math.abs(M(t,l,c,n))}for(var f=0,d=0;d<i.length;d+=3){var h=i[d]*n,v=i[d+1]*n,g=i[d+2]*n;f+=Math.abs((t[h]-t[g])*(t[v+1]-t[h+1])-(t[h]-t[v])*(t[g+1]-t[h+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[r][a][o]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=null;return function(){var i=arguments;n&&clearTimeout(n),n=setTimeout(function(){t.apply(void 0,(0,v.default)(i))},e)}}function a(t,e,n){if(e.includes(":")){var i=n,r=e.split(":"),a=r[0].trim();e=r[1].trim(),n=function(t){for(var e=!1,n=t.target;n&&!(e=o(n,a));)n=n.parentNode;e&&(t.selectorTarget=n,i(t))}}return"addEventListener"in t?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):"attachEvent"in t?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):"on"in t?(t.on(e,n),{remove:function(){t.off&&t.off(e,n),t.removeListener&&t.removeListener(e,n)}}):void 0}function o(t,e){var n=["matches","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector"],i=!0,r=!1,a=void 0;try{for(var o,s=(0,u.default)(n);!(i=(o=s.next()).done);i=!0){var l=o.value;if(t[l]&&"function"==typeof t[l])return t[l](e)}}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.once=e.on=void 0;var s=n(35),u=i(s),l=n(55),c=i(l),f=n(66),d=i(f),h=n(128),v=i(h);e.debounce=r;var g=e.on=function t(e,n,i,r){if(!e||!n||!i)return void console.warn("arguments is invalid!",e,n,i);if("object"===(void 0===n?"undefined":(0,d.default)(n))){var o=null;return o="length"in n?n.map(function(n){return t(e,n,i,r)}):(0,c.default)(n).map(function(r){return t(e,n,n[r],i)}),{remove:function(){o.forEach(function(t){t&&t.remove&&t.remove()})}}}if(-1!==n.indexOf(",")){n=n.split(",");var s=n.map(function(n){return t(e,n,i,r)});return{remove:function(){s.forEach(function(t){t&&t.remove&&t.remove()})}}}return a(e,n,function(t){return i.call(r||e,t)})};e.once=function(t,e,n,i){var r=null,a=function(t){return function(){return r&&r.remove&&r.remove(),t.apply(this,arguments)}};return t&&e&&n?("object"===(void 0===e?"undefined":(0,d.default)(e))&&("length"in e?n=a(n):(0,c.default)(e).forEach(function(t){e[t]=a(e[t])})),-1!==e.indexOf(",")&&(e=e.split(","),n=a(n)),r=g(t,e,n,i)):void console.warn("arguments is invalid!",t,e,n)}},function(t,e,n){"use strict";function i(t,e){var n=0;return function(){var i=+new Date;if(i-n>e){n=i;for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];t.apply(this,a)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){return f||(f=new window.Worker(c),(0,o.default)(f,v)),f}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(178),u=i(s);e.default=r;var l=n(318),c=l(319),f=void 0,d=0,h=new u.default,v={send:function(t,e){return e&&(d+=1,h.set(d,e),t.cbId=d),this.postMessage(t),d},receive:function(t){var e=t.cbId;if(e){var n=h.get(e);h.delete(e),delete t.cbId,n&&n(t.result)}},onmessage:function(t){this.receive(t.data)},abort:function(t){h.delete(t)}}},function(t,e,n){"use strict";function i(t){return t.map(function(t){return{lat:t.lat,lng:t.lng,count:t.count}})}var r=n(65),a=r.getClusters;t.exports={getClusters:function(t){var e=t.data,n=t.sizeList;n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t,n){if(n){var i=r[n-1].clusters,o=[];i.forEach(function(e){o=o.concat(a(e.containing,t))}),r.push({size:t,clusters:o})}else r.push({size:t,clusters:a(e,t)})}),r.map(function(t){return{size:t.size,points:i(t.clusters)}})}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||(0,g.default)(t,n,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var i=e(e.s=ENTRY_MODULE);return i.default||i}function a(t){return(""+t).replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t){return!isNaN(1*t)}function s(t,e,i){var r={};r[i]=[];var s=e.toString(),u=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return r;for(var l=u[1],c=new RegExp("(\\\\n|\\W)"+a(l)+_,"g"),f=void 0;f=c.exec(s);)"dll-reference"!==f[3]&&r[i].push(f[3]);for(c=new RegExp("\\("+a(l)+'\\("(dll-reference\\s('+p+'))"\\)\\)'+_,"g");f=c.exec(s);)t[f[2]]||(r[i].push(f[1]),t[f[2]]=n(f[1]).m),r[f[2]]=r[f[2]]||[],r[f[2]].push(f[4]);for(var d=(0,h.default)(r),v=0;v<d.length;v++)for(var g=0;g<r[d[v]].length;g++)o(r[d[v]][g])&&(r[d[v]][g]=1*r[d[v]][g]);return r}function u(t){return(0,h.default)(t).reduce(function(e,n){return e||t[n].length>0},!1)}function l(t,e){for(var n={main:[e]},i={main:[]},r={main:{}};u(n);)for(var a=(0,h.default)(n),o=0;o<a.length;o++){var l=a[o],c=n[l],f=c.pop();if(r[l]=r[l]||{},!r[l][f]&&t[l][f]){r[l][f]=!0,i[l]=i[l]||[],i[l].push(f);for(var d=s(t,t[l][f],l),v=(0,h.default)(d),g=0;g<v.length;g++)n[v[g]]=n[v[g]]||[],n[v[g]]=n[v[g]].concat(d[v[g]])}}return i}var c=n(99),f=i(c),d=n(55),h=i(d),v=n(126),g=i(v),p="[\\.|\\-|\\+|\\w|/|@]+",_="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+p+").*?\\)";t.exports=function(t,e){e=e||{};var i={main:n.m},a=e.all?{main:(0,h.default)(i.main)}:l(i,t),o="";(0,h.default)(a).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;a[t][e];)e+=1;a[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",(0,f.default)(e))+")({"+a[t].map(function(e){return(0,f.default)(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),o=o+"new (("+r.toString().replace("ENTRY_MODULE",(0,f.default)(t))+")({"+a.main.map(function(t){return(0,f.default)(t)+": "+i.main[t].toString()}).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});return e.bare?s:(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s)}},function(t,e,n){"use strict";var i={HEAT:n(317)};t.exports=function(t){t.addEventListener("message",function(e){var n=e.data,r=n.type,a=n.cmd,o=n.params,s=n.cbId,u=null;i[r]&&(u=i[r][a].call(null,o)),t.postMessage({result:u,cbId:s})})}},function(t,e,n){t.exports={default:n(332),__esModule:!0}},function(t,e,n){t.exports={default:n(334),__esModule:!0}},function(t,e,n){t.exports={default:n(337),__esModule:!0}},function(t,e,n){t.exports={default:n(338),__esModule:!0}},function(t,e,n){t.exports={default:n(340),__esModule:!0}},function(t,e,n){t.exports={default:n(345),__esModule:!0}},function(t,e,n){t.exports={default:n(348),__esModule:!0}},function(t,e,n){t.exports={default:n(350),__esModule:!0}},function(t,e,n){t.exports={default:n(351),__esModule:!0}},function(t,e,n){t.exports={default:n(352),__esModule:!0}},function(t,e,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,a=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(331),r)i.regeneratorRuntime=a;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";function n(t,e,n,i){var a=e&&e.prototype instanceof r?e:r,o=Object.create(a.prototype),s=new h(i||[]);return o._invoke=l(t,n,s),o}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function a(){}function o(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(n,r,a,o){var s=i(t[n],t,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&m.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},o)}o(s.arg)}function n(t,n){function i(){return new Promise(function(i,r){e(t,n,i,r)})}return r=r?r.then(i,i):i()}var r;this._invoke=n}function l(t,e,n){var r=P;return function(a,o){if(r===C)throw new Error("Generator is already running");if(r===k){if("throw"===a)throw o;return g()}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===S)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===P)throw r=k,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=C;var l=i(t,e,n);if("normal"===l.type){if(r=n.done?k:w,l.arg===S)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=k,n.method="throw",n.arg=l.arg)}}}function c(t,e){var n=t.iterator[e.method];if(n===p){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=p,c(t,e),"throw"===e.method))return S;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var r=i(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,S;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=p),e.delegate=null,S):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function v(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=p,e.done=!0,e};return i.next=i}}return{next:g}}function g(){return{value:p,done:!0}}var p,_=Object.prototype,m=_.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",E=y.asyncIterator||"@@asyncIterator",A=y.toStringTag||"@@toStringTag",x="object"==typeof t,T=e.regeneratorRuntime;if(T)return void(x&&(t.exports=T));T=e.regeneratorRuntime=x?t.exports:{},T.wrap=n;var P="suspendedStart",w="suspendedYield",C="executing",k="completed",S={},R={};R[b]=function(){return this};var M=Object.getPrototypeOf,L=M&&M(M(v([])));L&&L!==_&&m.call(L,b)&&(R=L);var I=o.prototype=r.prototype=Object.create(R);a.prototype=I.constructor=o,o.constructor=a,o[A]=a.displayName="GeneratorFunction",T.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},T.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,A in t||(t[A]="GeneratorFunction")),t.prototype=Object.create(I),t},T.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[E]=function(){return this},T.AsyncIterator=u,T.async=function(t,e,i,r){var a=new u(n(t,e,i,r));return T.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},s(I),I[A]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},T.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},T.values=v,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return a.type="throw",a.arg=t,n.next=e,i&&(n.method="next",n.arg=p),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var o=m.call(r,"catchLoc"),s=m.call(r,"finallyLoc");if(o&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&m.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,S):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),S},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),S}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;d(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=p),S}}}(function(){return this}()||Function("return this")())},function(t,e,n){n(70),n(377),t.exports=n(10).Array.from},function(t,e,n){n(71),n(70),t.exports=n(375)},function(t,e,n){n(71),n(70),t.exports=n(376)},function(t,e,n){var i=n(10),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,n){n(108),n(70),n(71),n(379),n(396),n(395),n(394),t.exports=n(10).Map},function(t,e,n){n(380),t.exports=n(10).Math.fround},function(t,e,n){n(381),t.exports=Math.pow(2,-52)},function(t,e,n){n(382),t.exports=n(10).Number.isFinite},function(t,e,n){n(383),t.exports=n(10).Number.isNaN},function(t,e,n){n(384),t.exports=n(10).Object.assign},function(t,e,n){n(385);var i=n(10).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){n(386);var i=n(10).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){n(397),t.exports=n(10).Object.entries},function(t,e,n){n(387);var i=n(10).Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},function(t,e,n){n(388),t.exports=n(10).Object.getPrototypeOf},function(t,e,n){n(389),t.exports=n(10).Object.keys},function(t,e,n){n(390),t.exports=n(10).Object.setPrototypeOf},function(t,e,n){n(108),n(70),n(71),n(391),n(398),n(399),t.exports=n(10).Promise},function(t,e,n){n(392),n(108),n(400),n(401),t.exports=n(10).Symbol},function(t,e,n){n(70),n(71),t.exports=n(145).f("iterator")},function(t,e,n){n(108),n(71),n(393),n(403),n(402),t.exports=n(10).WeakMap},function(t,e){t.exports=function(){}},function(t,e,n){var i=n(67);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(51),r=n(106),a=n(373);t.exports=function(t){return function(e,n,o){var s,u=i(e),l=r(u.length),c=a(o,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(30),r=n(186),a=n(25)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var i=n(356);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(41).f,r=n(104),a=n(105),o=n(47),s=n(102),u=n(67),l=n(134),c=n(189),f=n(198),d=n(36),h=n(83).fastKey,v=n(87),g=d?"_s":"size",p=function(t,e){var n,i=h(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var c=t(function(t,i){s(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=i&&u(i,n,t[l],t)});return a(c.prototype,{clear:function(){for(var t=v(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var n=v(this,e),i=p(n,t);if(i){var r=i.n,a=i.p;delete n._i[i.i],i.r=!0,a&&(a.n=r),r&&(r.p=a),n._f==i&&(n._f=r),n._l==i&&(n._l=a),n[g]--}return!!i},forEach:function(t){v(this,e);for(var n,i=o(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!p(v(this,e),t)}}),d&&i(c.prototype,"size",{get:function(){return v(this,e)[g]}}),c},def:function(t,e,n){var i,r,a=p(t,e);return a?a.v=n:(t._l=a={i:r=h(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=a),i&&(i.n=a),t[g]++,"F"!==r&&(t._i[r]=a)),t},getEntry:p,setStrong:function(t,e,n){l(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){var i=n(103),r=n(354);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){"use strict";var i=n(105),r=n(83).getWeak,a=n(40),o=n(30),s=n(102),u=n(67),l=n(129),c=n(49),f=n(87),d=l(5),h=l(6),v=0,g=function(t){return t._l||(t._l=new p)},p=function(){this.a=[]},_=function(t,e){return d(t.a,function(t){return t[0]===e})};p.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,a){var l=t(function(t,i){s(t,l,e,"_i"),t._t=e,t._i=v++,t._l=void 0,void 0!=i&&u(i,n,t[a],t)});return i(l.prototype,{delete:function(t){if(!o(t))return!1;var n=r(t);return!0===n?g(f(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=r(t);return!0===n?g(f(this,e)).has(t):n&&c(n,this._i)}}),l},def:function(t,e,n){var i=r(a(e),!0);return!0===i?g(t).set(e,n):i[t._i]=n,t},ufstore:g}},function(t,e,n){"use strict";var i=n(41),r=n(85);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(69),r=n(137),a=n(84);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var o,s=n(t),u=a.f,l=0;s.length>l;)u.call(t,o=s[l++])&&e.push(o);return e}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var i=n(104),r=n(85),a=n(86),o={};n(50)(o,n(25)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(o,{next:r(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var i=n(366),r=Math.pow,a=r(2,-52),o=r(2,-23),s=r(2,127)*(2-o),u=r(2,-126),l=function(t){return t+1/a-1/a};t.exports=Math.fround||function(t){var e,n,r=Math.abs(t),c=i(t);return r<u?c*l(r/u/o)*u*o:(e=(1+o/a)*r,n=e-(e-r),n>s||n!=n?c*(1/0):c*n)}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var i=n(23),r=n(200).set,a=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,u="process"==n(81)(o);t.exports=function(){var t,e,n,l=function(){var i,r;for(u&&(i=o.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){o.nextTick(l)};else if(!a||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){r.call(i,l)};else{var f=!0,d=document.createTextNode("");new a(l).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(41),r=n(40),a=n(69);t.exports=n(36)?Object.defineProperties:function(t,e){r(t);for(var n,o=a(e),s=o.length,u=0;s>u;)i.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var i=n(51),r=n(191).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):r(i(t))}},function(t,e,n){var i=n(36),r=n(69),a=n(51),o=n(84).f;t.exports=function(t){return function(e){for(var n,s=a(e),u=r(s),l=u.length,c=0,f=[];l>c;)n=u[c++],i&&!o.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var i=n(30),r=n(40),a=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(47)(Function.call,n(136).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){var i=n(142),r=n(130);t.exports=function(t){return function(e,n){var a,o,s=String(r(e)),u=i(n),l=s.length;return u<0||u>=l?t?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536)}}},function(t,e,n){var i=n(142),r=Math.max,a=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):a(t,e)}},function(t,e,n){var i=n(23),r=i.navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var i=n(40),r=n(146);t.exports=n(10).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){var i=n(103),r=n(25)("iterator"),a=n(68);t.exports=n(10).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||a.hasOwnProperty(i(e))}},function(t,e,n){"use strict";var i=n(47),r=n(17),a=n(57),o=n(187),s=n(185),u=n(106),l=n(361),c=n(146);r(r.S+r.F*!n(188)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,f,d=a(t),h="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,p=void 0!==g,_=0,m=c(d);if(p&&(g=i(g,v>2?arguments[2]:void 0,2)),void 0==m||h==Array&&s(m))for(e=u(d.length),n=new h(e);e>_;_++)l(n,_,p?g(d[_],_):d[_]);else for(f=m.call(d),n=new h;!(r=f.next()).done;_++)l(n,_,p?o(f,g,[r.value,_],!0):r.value);return n.length=_,n}})},function(t,e,n){"use strict";var i=n(353),r=n(189),a=n(68),o=n(51);t.exports=n(134)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";var i=n(358),r=n(87);t.exports=n(182)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){var i=n(17);i(i.S,"Math",{fround:n(365)})},function(t,e,n){var i=n(17);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(17),r=n(23).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){var i=n(17);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(17);i(i.S+i.F,"Object",{assign:n(190)})},function(t,e,n){var i=n(17);i(i.S,"Object",{create:n(104)})},function(t,e,n){var i=n(17);i(i.S+i.F*!n(36),"Object",{defineProperty:n(41).f})},function(t,e,n){var i=n(51),r=n(136).f;n(138)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){var i=n(57),r=n(192);n(138)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(57),r=n(69);n(138)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(17);i(i.S,"Object",{setPrototypeOf:n(371).set})},function(t,e,n){"use strict";var i,r,a,o,s=n(82),u=n(23),l=n(47),c=n(103),f=n(17),d=n(30),h=n(80),v=n(102),g=n(67),p=n(199),_=n(200).set,m=n(367)(),y=n(135),b=n(194),E=n(374),A=n(195),x=u.TypeError,T=u.process,P=T&&T.versions,w=P&&P.v8||"",C=u.Promise,k="process"==c(T),S=function(){},R=r=y.f,M=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[n(25)("species")]=function(t){t(S,S)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(S)instanceof e&&0!==w.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(t){}}(),L=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var i=t._v,r=1==t._s,a=0;n.length>a;)!function(e){var n,a,o,s=r?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(r||(2==t._h&&N(t),t._h=1),!0===s?n=i:(c&&c.enter(),n=s(i),c&&(c.exit(),o=!0)),n===e.promise?l(x("Promise-chain cycle")):(a=L(n))?a.call(n,u,l):u(n)):l(i)}catch(t){c&&!o&&c.exit(),l(t)}}(n[a++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){_.call(u,function(){var e,n,i,r=t._v,a=F(t);if(a&&(e=b(function(){k?T.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=k||F(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){_.call(u,function(){var e;k?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},B=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw x("Promise can't be resolved itself");(e=L(t))?m(function(){var i={_w:n,_d:!1};try{e.call(t,l(B,i,1),l(D,i,1))}catch(t){D.call(i,t)}}):(n._v=t,n._s=1,I(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};M||(C=function(t){v(this,C,"Promise","_h"),h(t),i.call(this);try{t(l(B,this,1),l(D,this,1))}catch(t){D.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(105)(C.prototype,{then:function(t,e){var n=R(p(this,C));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new i;this.promise=t,this.resolve=l(B,t,1),this.reject=l(D,t,1)},y.f=R=function(t){return t===C||t===o?new a(t):r(t)}),f(f.G+f.W+f.F*!M,{Promise:C}),n(86)(C,"Promise"),n(198)("Promise"),o=n(10).Promise,f(f.S+f.F*!M,"Promise",{reject:function(t){var e=R(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!M),"Promise",{resolve:function(t){return A(s&&this===o?C:this,t)}}),f(f.S+f.F*!(M&&n(188)(function(t){C.all(t).catch(S)})),"Promise",{all:function(t){var e=this,n=R(e),i=n.resolve,r=n.reject,a=b(function(){var n=[],a=0,o=1;g(t,!1,function(t){var s=a++,u=!1;n.push(void 0),o++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--o||i(n))},r)}),--o||i(n)});return a.e&&r(a.v),n.promise},race:function(t){var e=this,n=R(e),i=n.reject,r=b(function(){g(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e,n){"use strict";var i=n(23),r=n(49),a=n(36),o=n(17),s=n(139),u=n(83).KEY,l=n(56),c=n(141),f=n(86),d=n(107),h=n(25),v=n(145),g=n(144),p=n(362),_=n(186),m=n(40),y=n(30),b=n(57),E=n(51),A=n(143),x=n(85),T=n(104),P=n(369),w=n(136),C=n(137),k=n(41),S=n(69),R=w.f,M=k.f,L=P.f,I=i.Symbol,O=i.JSON,F=O&&O.stringify,N=h("_hidden"),D=h("toPrimitive"),B={}.propertyIsEnumerable,U=c("symbol-registry"),G=c("symbols"),j=c("op-symbols"),z=Object.prototype,W="function"==typeof I&&!!C.f,H=i.QObject,V=!H||!H.prototype||!H.prototype.findChild,X=a&&l(function(){return 7!=T(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=R(z,e);i&&delete z[e],M(t,e,n),i&&t!==z&&M(z,e,i)}:M,Y=function(t){var e=G[t]=T(I.prototype);return e._k=t,e},K=W&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},q=function(t,e,n){return t===z&&q(j,e,n),m(t),e=A(e,!0),m(n),r(G,e)?(n.enumerable?(r(t,N)&&t[N][e]&&(t[N][e]=!1),n=T(n,{enumerable:x(0,!1)})):(r(t,N)||M(t,N,x(1,{})),t[N][e]=!0),X(t,e,n)):M(t,e,n)},Z=function(t,e){m(t);for(var n,i=p(e=E(e)),r=0,a=i.length;a>r;)q(t,n=i[r++],e[n]);return t},Q=function(t,e){return void 0===e?T(t):Z(T(t),e)},J=function(t){var e=B.call(this,t=A(t,!0));return!(this===z&&r(G,t)&&!r(j,t))&&(!(e||!r(this,t)||!r(G,t)||r(this,N)&&this[N][t])||e)},$=function(t,e){if(t=E(t),e=A(e,!0),t!==z||!r(G,e)||r(j,e)){var n=R(t,e);return!n||!r(G,e)||r(t,N)&&t[N][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=L(E(t)),i=[],a=0;n.length>a;)r(G,e=n[a++])||e==N||e==u||i.push(e);return i},et=function(t){for(var e,n=t===z,i=L(n?j:E(t)),a=[],o=0;i.length>o;)!r(G,e=i[o++])||n&&!r(z,e)||a.push(G[e]);return a};W||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===z&&e.call(j,n),r(this,N)&&r(this[N],t)&&(this[N][t]=!1),X(this,t,x(1,n))};return a&&V&&X(z,t,{configurable:!0,set:e}),Y(t)},s(I.prototype,"toString",function(){return this._k}),w.f=$,k.f=q,n(191).f=P.f=tt,n(84).f=J,C.f=et,a&&!n(82)&&s(z,"propertyIsEnumerable",J,!0),v.f=function(t){return Y(h(t))}),o(o.G+o.W+o.F*!W,{Symbol:I});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;nt.length>it;)h(nt[it++]);for(var rt=S(h.store),at=0;rt.length>at;)g(rt[at++]);o(o.S+o.F*!W,"Symbol",{for:function(t){return r(U,t+="")?U[t]:U[t]=I(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),o(o.S+o.F*!W,"Object",{create:Q,defineProperty:q,defineProperties:Z,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var ot=l(function(){C.f(1)});o(o.S+o.F*ot,"Object",{getOwnPropertySymbols:function(t){return C.f(b(t))}}),O&&o(o.S+o.F*(!W||l(function(){var t=I();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(y(e)||void 0!==t)&&!K(t))return _(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),i[1]=e,F.apply(O,i)}}),I.prototype[D]||n(50)(I.prototype,D,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){"use strict";var i,r=n(23),a=n(129)(0),o=n(139),s=n(83),u=n(190),l=n(360),c=n(30),f=n(87),d=n(87),h=!r.ActiveXObject&&"ActiveXObject"in r,v=s.getWeak,g=Object.isExtensible,p=l.ufstore,_=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(c(t)){var e=v(t);return!0===e?p(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(f(this,"WeakMap"),t,e)}},y=t.exports=n(182)("WeakMap",_,m,l,!0,!0);d&&h&&(i=l.getConstructor(_,"WeakMap"),u(i.prototype,m),s.NEED=!0,a(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];o(e,t,function(e,r){if(c(e)&&!g(e)){this._f||(this._f=new i);var a=this._f[t](e,r);return"set"==t?this:a}return n.call(this,e,r)})}))},function(t,e,n){n(196)("Map")},function(t,e,n){n(197)("Map")},function(t,e,n){var i=n(17);i(i.P+i.R,"Map",{toJSON:n(359)("Map")})},function(t,e,n){var i=n(17),r=n(370)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(17),r=n(10),a=n(23),o=n(199),s=n(195);i(i.P+i.R,"Promise",{finally:function(t){var e=o(this,r.Promise||a.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(17),r=n(135),a=n(194);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=a(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(144)("asyncIterator")},function(t,e,n){n(144)("observable")},function(t,e,n){n(196)("WeakMap")},function(t,e,n){n(197)("WeakMap")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(405);n.d(e,"hexbin",function(){return i.a})},function(t,e,n){"use strict";function i(t){return t[0]}function r(t){return t[1]}var a=Math.PI/3,o=[0,a,2*a,3*a,4*a,5*a];e.a=function(){function t(t){var e,n={},i=[],r=t.length;for(e=0;e<r;++e)if(!isNaN(o=+h.call(null,a=t[e],e,t))&&!isNaN(l=+v.call(null,a,e,t))){var a,o,l,c=Math.round(l/=u),f=Math.round(o=o/s-(1&c)/2),d=l-c;if(3*Math.abs(d)>1){var g=o-f,p=f+(o<f?-1:1)/2,_=c+(l<c?-1:1),m=o-p,y=l-_;g*g+d*d>m*m+y*y&&(f=p+(1&c?1:-1)/2,c=_)}var b=f+"-"+c,E=n[b];E?E.push(a):(i.push(E=n[b]=[a]),E.x=(f+(1&c)/2)*s,E.y=c*u)}return i}function e(t){var e=0,n=0;return o.map(function(i){var r=Math.sin(i)*t,a=-Math.cos(i)*t,o=r-e,s=a-n;return e=r,n=a,[o,s]})}var n,s,u,l=0,c=0,f=1,d=1,h=i,v=r;return t.hexagon=function(t){return"m"+e(null==t?n:+t).join("l")+"z"},t.centers=function(){for(var t=[],e=Math.round(c/u),i=Math.round(l/s),r=e*u;r<d+n;r+=u,++e)for(var a=i*s+(1&e)*s/2;a<f+s/2;a+=s)t.push([a,r]);return t},t.mesh=function(){var i=e(n).slice(0,4).join("l");return t.centers().map(function(t){return"M"+t+"m"+i}).join("")},t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(v=e,t):v},t.radius=function(e){return arguments.length?(n=+e,s=2*n*Math.sin(a),u=1.5*n,t):n},t.size=function(e){return arguments.length?(l=c=0,f=+e[0],d=+e[1],t):[f-l,d-c]},t.extent=function(e){return arguments.length?(l=+e[0][0],c=+e[0][1],f=+e[1][0],d=+e[1][1],t):[[l,c],[f,d]]},t.radius(1)}},function(t,e,n){"use strict";function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=a,t[11]=e[14],t[12]=r,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function a(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],d=e[10],h=e[11],v=e[12],g=e[13],p=e[14],_=e[15],m=n*s-i*o,y=n*u-r*o,b=n*l-a*o,E=i*u-r*s,A=i*l-a*s,x=r*l-a*u,T=c*g-f*v,P=c*p-d*v,w=c*_-h*v,C=f*p-d*g,k=f*_-h*g,S=d*_-h*p,R=m*S-y*k+b*C+E*w-A*P+x*T;return R?(R=1/R,t[0]=(s*S-u*k+l*C)*R,t[1]=(r*k-i*S-a*C)*R,t[2]=(g*x-p*A+_*E)*R,t[3]=(d*A-f*x-h*E)*R,t[4]=(u*w-o*S-l*P)*R,t[5]=(n*S-r*w+a*P)*R,t[6]=(p*b-v*x-_*y)*R,t[7]=(c*x-d*b+h*y)*R,t[8]=(o*k-s*w+l*T)*R,t[9]=(i*w-n*k-a*T)*R,t[10]=(v*A-g*b+_*m)*R,t[11]=(f*b-c*A-h*m)*R,t[12]=(s*P-o*C-u*T)*R,t[13]=(n*C-i*P+r*T)*R,t[14]=(g*y-v*E-p*m)*R,t[15]=(c*E-f*y+d*m)*R,t):null}function o(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],h=t[12],v=t[13],g=t[14],p=t[15];return(e*o-n*a)*(f*p-d*g)-(e*s-i*a)*(c*p-d*v)+(e*u-r*a)*(c*g-f*v)+(n*s-i*o)*(l*p-d*h)-(n*u-r*o)*(l*g-f*h)+(i*u-r*s)*(l*v-c*h)}function s(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=e[9],h=e[10],v=e[11],g=e[12],p=e[13],_=e[14],m=e[15],y=n[0],b=n[1],E=n[2],A=n[3];return t[0]=y*i+b*s+E*f+A*g,t[1]=y*r+b*u+E*d+A*p,t[2]=y*a+b*l+E*h+A*_,t[3]=y*o+b*c+E*v+A*m,y=n[4],b=n[5],E=n[6],A=n[7],t[4]=y*i+b*s+E*f+A*g,t[5]=y*r+b*u+E*d+A*p,t[6]=y*a+b*l+E*h+A*_,t[7]=y*o+b*c+E*v+A*m,y=n[8],b=n[9],E=n[10],A=n[11],t[8]=y*i+b*s+E*f+A*g,t[9]=y*r+b*u+E*d+A*p,t[10]=y*a+b*l+E*h+A*_,t[11]=y*o+b*c+E*v+A*m,y=n[12],b=n[13],E=n[14],A=n[15],t[12]=y*i+b*s+E*f+A*g,t[13]=y*r+b*u+E*d+A*p,t[14]=y*a+b*l+E*h+A*_,t[15]=y*o+b*c+E*v+A*m,t}function u(t,e,n){var i,r,a,o,s,u,l,c,f,d,h,v,g=n[0],p=n[1],_=n[2];return e===t?(t[12]=e[0]*g+e[4]*p+e[8]*_+e[12],t[13]=e[1]*g+e[5]*p+e[9]*_+e[13],t[14]=e[2]*g+e[6]*p+e[10]*_+e[14],t[15]=e[3]*g+e[7]*p+e[11]*_+e[15]):(i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=e[9],h=e[10],v=e[11],t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=d,t[10]=h,t[11]=v,t[12]=i*g+s*p+f*_+e[12],t[13]=r*g+u*p+d*_+e[13],t[14]=a*g+l*p+h*_+e[14],t[15]=o*g+c*p+v*_+e[15]),t}function l(t,e,n){var i=n[0],r=n[1],a=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(t,e,n,i){var r,a,o,s,u,l,c,f,d,h,v,g,p,_,m,b,E,A,x,T,P,w,C,k,S=i[0],R=i[1],M=i[2],L=Math.sqrt(S*S+R*R+M*M);return L<y.b?null:(L=1/L,S*=L,R*=L,M*=L,r=Math.sin(n),a=Math.cos(n),o=1-a,s=e[0],u=e[1],l=e[2],c=e[3],f=e[4],d=e[5],h=e[6],v=e[7],g=e[8],p=e[9],_=e[10],m=e[11],b=S*S*o+a,E=R*S*o+M*r,A=M*S*o-R*r,x=S*R*o-M*r,T=R*R*o+a,P=M*R*o+S*r,w=S*M*o+R*r,C=R*M*o-S*r,k=M*M*o+a,t[0]=s*b+f*E+g*A,t[1]=u*b+d*E+p*A,t[2]=l*b+h*E+_*A,t[3]=c*b+v*E+m*A,t[4]=s*x+f*T+g*P,t[5]=u*x+d*T+p*P,t[6]=l*x+h*T+_*P,t[7]=c*x+v*T+m*P,t[8]=s*w+f*C+g*k,t[9]=u*w+d*C+p*k,t[10]=l*w+h*C+_*k,t[11]=c*w+v*C+m*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function f(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+l*i,t[5]=o*r+c*i,t[6]=s*r+f*i,t[7]=u*r+d*i,t[8]=l*r-a*i,t[9]=c*r-o*i,t[10]=f*r-s*i,t[11]=d*r-u*i,t}function d(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r-l*i,t[1]=o*r-c*i,t[2]=s*r-f*i,t[3]=u*r-d*i,t[8]=a*i+l*r,t[9]=o*i+c*r,t[10]=s*i+f*r,t[11]=u*i+d*r,t}function h(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+l*i,t[1]=o*r+c*i,t[2]=s*r+f*i,t[3]=u*r+d*i,t[4]=l*r-a*i,t[5]=c*r-o*i,t[6]=f*r-s*i,t[7]=d*r-u*i,t}function v(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n+n,s=i+i,u=r+r,l=n*o,c=i*o,f=i*s,d=r*o,h=r*s,v=r*u,g=a*o,p=a*s,_=a*u;return t[0]=1-f-v,t[1]=c+_,t[2]=d-p,t[3]=0,t[4]=c-_,t[5]=1-l-v,t[6]=h+g,t[7]=0,t[8]=d+p,t[9]=h-g,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e,n,i,r,a,o){var s=1/(n-e),u=1/(r-i),l=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(r+i)*u,t[10]=(o+a)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*l,t[15]=0,t}function p(t,e,n,i,r){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(a=1/(i-r),t[10]=(r+i)*a,t[14]=2*r*i*a):(t[10]=-1,t[14]=-2*i),t}function _(t,e,n,i,r,a,o){var s=1/(e-n),u=1/(i-r),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*u,t[14]=(o+a)*l,t[15]=1,t}function m(t,e,n,r){var a,o,s,u,l,c,f,d,h,v,g=e[0],p=e[1],_=e[2],m=r[0],b=r[1],E=r[2],A=n[0],x=n[1],T=n[2];return Math.abs(g-A)<y.b&&Math.abs(p-x)<y.b&&Math.abs(_-T)<y.b?i(t):(f=g-A,d=p-x,h=_-T,v=1/Math.sqrt(f*f+d*d+h*h),f*=v,d*=v,h*=v,a=b*h-E*d,o=E*f-m*h,s=m*d-b*f,v=Math.sqrt(a*a+o*o+s*s),v?(v=1/v,a*=v,o*=v,s*=v):(a=0,o=0,s=0),u=d*s-h*o,l=h*a-f*s,c=f*o-d*a,v=Math.sqrt(u*u+l*l+c*c),v?(v=1/v,u*=v,l*=v,c*=v):(u=0,l=0,c=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=s,t[9]=c,t[10]=h,t[11]=0,t[12]=-(a*g+o*p+s*_),t[13]=-(u*g+l*p+c*_),t[14]=-(f*g+d*p+h*_),t[15]=1,t)}e.g=r,e.h=a,e.a=o,e.i=s,e.o=u,e.n=l,e.m=c,e.j=f,e.k=d,e.l=h,e.b=v,e.c=g,e.f=p,e.e=_,e.d=m;var y=n(72)},function(t,e,n){"use strict";function i(){var t=new g.a(4);return g.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function r(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function o(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=i*c+o*s+r*l-a*u,t[1]=r*c+o*u+a*s-i*l,t[2]=a*c+o*l+i*u-r*s,t[3]=o*c-i*s-r*u-a*l,t}function s(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*s,t[1]=r*u+a*s,t[2]=a*u-r*s,t[3]=o*u-i*s,t}function u(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u-a*s,t[1]=r*u+o*s,t[2]=a*u+i*s,t[3]=o*u-r*s,t}function l(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+r*s,t[1]=r*u-i*s,t[2]=a*u+o*s,t[3]=o*u-a*s,t}function c(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t}function f(t,e,n,i){var r,a,o,s,u,l=e[0],c=e[1],f=e[2],d=e[3],h=n[0],v=n[1],p=n[2],_=n[3];return a=l*h+c*v+f*p+d*_,a<0&&(a=-a,h=-h,v=-v,p=-p,_=-_),1-a>g.b?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-i)*r)/o,u=Math.sin(i*r)/o):(s=1-i,u=i),t[0]=s*l+u*h,t[1]=s*c+u*v,t[2]=s*f+u*p,t[3]=s*d+u*_,t}function d(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=a*s,t}function h(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function v(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var a=(r+1)%3,o=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*a+a]-e[3*o+o]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+r]+e[3*r+a])*n,t[o]=(e[3*o+r]+e[3*r+o])*n}return t}e.b=r,e.s=a,e.l=o,e.n=s,e.o=u,e.p=l,e.h=c,e.t=f,e.j=d,e.i=h,e.a=v,n.d(e,"r",function(){return y}),n.d(e,"g",function(){return b}),n.d(e,"q",function(){return E}),n.d(e,"e",function(){return A}),n.d(e,"k",function(){return x}),n.d(e,"c",function(){return T}),n.d(e,"d",function(){return P}),n.d(e,"m",function(){return w}),n.d(e,"f",function(){return C});var g=n(72),p=n(201),_=n(88),m=n(202),y=(m.a,m.b,m.c,m.d),b=m.e,E=m.f,A=m.g,x=m.h,T=m.i,P=m.j,w=m.k,C=(m.l,m.m,function(){var t=_.a(),e=_.b(1,0,0),n=_.b(0,1,0);return function(i,r,o){var s=_.c(r,o);return s<-.999999?(_.d(t,e,r),_.e(t)<1e-6&&_.d(t,n,r),_.f(t,t),a(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(_.d(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,w(i,i))}}());(function(){var t=i(),e=i()})(),function(){var t=p.a()}()},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){t.exports=n(411)},function(t,e,n){"use strict";t.exports={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},function(t,e,n){"use strict";(function(t){function i(){(0,r.installParameterDefinitions)(),console.log("luma.gl: WebGL debug support installed")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=n(412),a=n(485);(void 0!==t?t:window).WebGLDebug=a,console.log("luma.gl: WebGL debug support imported")}).call(e,n(63))},function(t,e,n){"use strict";function i(){}var r=n(273);Object.defineProperty(e,"__esModule",{value:!0}),e.installParameterDefinitions=i,e.TEXTURE_PARAMETERS=e.SAMPLER_PARAMETERS=e.RENDERBUFFER_PARAMETERS=e.PROGRAM_PARAMETERS=e.FRAMEBUFFER_STATUS=e.FRAMEBUFFER_ATTACHMENT_PARAMETERS=e.FENCE_SYNC_PARAMETERS=e.BUFFER_PARAMETERS=e.GLboolean=e.GLuint=e.GLint=e.GLfloat=e.GLenum=void 0;var a,o,s,u,l,c,f=r(n(264));e.GLenum="GLenum";e.GLfloat="GLfloat";e.GLint="GLint";e.GLuint="GLint";e.GLboolean="GLboolean";var d=(a={},(0,f.default)(a,34660,{webgl1:0}),(0,f.default)(a,34661,{webgl1:0}),a);e.BUFFER_PARAMETERS=d;var h=[37138,37140,37139,37141];e.FENCE_SYNC_PARAMETERS=h;var v=[36049,36048,36051,36050,33296,36052,33298,33299,33300,33301,33302,33303,33297];e.FRAMEBUFFER_ATTACHMENT_PARAMETERS=v;var g=(o={},(0,f.default)(o,36053,"Success. Framebuffer is correctly set up"),(0,f.default)(o,36054,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),(0,f.default)(o,36055,"Framebuffer has no attachment"),(0,f.default)(o,36057,"Framebuffer attachments do not have the same size"),(0,f.default)(o,36061,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),(0,f.default)(o,36182,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),o);e.FRAMEBUFFER_STATUS=g;var p=(s={},(0,f.default)(s,35712,{webgl1:0}),(0,f.default)(s,35714,{webgl1:0}),(0,f.default)(s,35715,{webgl1:0}),(0,f.default)(s,35717,{webgl1:0}),(0,f.default)(s,35721,{webgl1:0}),(0,f.default)(s,35718,{webgl1:0}),(0,f.default)(s,35967,{webgl2:0}),(0,f.default)(s,35971,{webgl2:0}),(0,f.default)(s,35382,{webgl2:0}),s);e.PROGRAM_PARAMETERS=p;var _=(u={},(0,f.default)(u,36162,{webgl1:0}),(0,f.default)(u,36163,{webgl1:0}),(0,f.default)(u,36164,{type:"GLenum",webgl1:32854}),(0,f.default)(u,36177,{webgl1:0}),(0,f.default)(u,36178,{webgl1:0}),(0,f.default)(u,36176,{webgl1:0}),(0,f.default)(u,36179,{webgl1:0}),(0,f.default)(u,36180,{webgl1:0}),(0,f.default)(u,36181,{webgl1:0}),(0,f.default)(u,36011,{webgl2:1}),u);e.RENDERBUFFER_PARAMETERS=_;var m=(l={},(0,f.default)(l,10240,{webgl2:!0}),(0,f.default)(l,10241,{webgl2:!0}),(0,f.default)(l,10242,{webgl2:!0}),(0,f.default)(l,10243,{webgl2:!0}),(0,f.default)(l,32882,{webgl2:!0}),(0,f.default)(l,33084,{webgl2:!0}),(0,f.default)(l,33085,{webgl2:!0}),(0,f.default)(l,34893,{webgl2:!0}),(0,f.default)(l,34892,{webgl2:!0}),(0,f.default)(l,33082,{webgl2:!0}),(0,f.default)(l,33083,{webgl2:!0}),l);e.SAMPLER_PARAMETERS=m;var y=(c={},(0,f.default)(c,10240,{type:"GLenum",webgl1:9729}),(0,f.default)(c,10241,{type:"GLenum",webgl1:9986}),(0,f.default)(c,10242,{type:"GLenum",webgl1:10497}),(0,f.default)(c,10243,{type:"GLenum",webgl1:10497}),(0,f.default)(c,32882,{type:"GLenum",webgl2:10497}),(0,f.default)(c,33084,{webgl2:0}),(0,f.default)(c,33085,{webgl2:1e3}),(0,f.default)(c,34893,{type:"GLenum",webgl2:515}),(0,f.default)(c,34892,{type:"GLenum",webgl2:0}),(0,f.default)(c,33082,{webgl2:-1e3}),(0,f.default)(c,33083,{webgl2:1e3}),(0,f.default)(c,4096,{webgl1:0}),(0,f.default)(c,4097,{webgl1:0}),c);e.TEXTURE_PARAMETERS=y},function(t,e,n){"use strict";function i(t){return[t+1&255,t+1>>8&255,t+1>>16&255]}function r(t){var e=n.i(o.a)(t,3);return e[0]+256*e[1]+65536*e[2]-1}function a(){return s}e.a=i,e.b=r,e.c=a;var o=n(31),s=new Uint8Array([0,0,0])},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),r=n(1),a=n(119),o=n(159),s=n(5),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.gl,a=e._cachePrograms,o=void 0!==a&&a;n.i(i.a)(this,t),n.i(s.a)(r),this.gl=r,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=o}return n.i(r.a)(t,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(t,e){n.i(s.a)("string"==typeof e),n.i(s.a)(this._compareContexts(t,this.gl));var i=this.vertexShaders[e];return i||(i=new a.b(t,e),this.vertexShaders[e]=i),i}},{key:"getFragmentShader",value:function(t,e){n.i(s.a)("string"==typeof e),n.i(s.a)(this._compareContexts(t,this.gl));var i=this.fragmentShaders[e];return i||(i=new a.c(t,e),this.fragmentShaders[e]=i),i}},{key:"getProgram",value:function(t,e){n.i(s.a)(this._compareContexts(t,this.gl)),n.i(s.a)("string"==typeof e.vs),n.i(s.a)("string"==typeof e.fs),n.i(s.a)("string"==typeof e.id);var i=this._getProgramKey(e),r=this.programs[i];return r?(this._resetProgram(r),r):(r=this._createNewProgram(t,e),this._cachePrograms&&this._checkProgramProp(r)&&(r._isCached=!0,this.programs[i]=r),r)}},{key:"_getProgramKey",value:function(t){return"".concat(t.id,"-").concat(t.vs,"-").concat(t.fs)}},{key:"_checkProgramProp",value:function(t){return!t.varyings}},{key:"_createNewProgram",value:function(t,e){var n=e.vs,i=e.fs,r=this.getVertexShader(t,n),a=this.getFragmentShader(t,i);return new o.a(this.gl,Object.assign({},e,{vs:r,fs:a}))}},{key:"_resetProgram",value:function(t,e){t.reset()}},{key:"_compareContexts",value:function(t,e){return(t.gl||t)===(e.gl||e)}}]),t}()},function(t,e,n){"use strict";function i(t){var e=t.vs,i=t.sourceTextureMap,r=t.targetTextureVarying,a=t.targetTexture,o=Object.keys(i),l=o.length,d=null,g={},p=e,_={};if(l>0||r){var m=p.split("\n"),y=m.slice();if(m.forEach(function(t,e,a){if(l>0){var o=u(t,i);if(o){var c=o.updatedLine,h=o.inject;y[e]=c,_=n.i(f.d)([_,h]),Object.assign(g,o.samplerTextureMap),l--}}r&&!d&&(d=s(t,r))}),r){c()(a);var b="".concat(h).concat(r),E="uniform vec2 ".concat(b,";\n"),A="     vec2 ".concat(v," = transform_getPos(").concat(b,");\n     gl_Position = vec4(").concat(v,", 0, 1.);\n"),x={"vs:#decl":E,"vs:#main-start":A};_=n.i(f.d)([_,x])}p=y.join("\n")}return{vs:p,targetTextureType:d,inject:_,samplerTextureMap:g}}function r(t){var e,n,i=t.sourceTextureMap,r=t.targetTextureVarying,a=t.targetTexture,o={};r&&(e=a.width,n=a.height,o["".concat(h).concat(r)]=[e,n]);for(var s in i){var u=i[s];e=u.width,n=u.height,o["".concat(h).concat(s)]=[e,n]}return o}function a(t){return n.i(f.e)(t,["attribute","in"])}function o(t){var e="".concat(d).concat(t),n="".concat(h).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}function s(t,e){var i=n.i(f.e)(t,["varying","out"]);return i&&i.name===e?i.type:null}function u(t,e){var i={},r=a(t);if(!r)return null;var s=r.type,u=r.name;if(u&&e[u]){var l="// ".concat(t," => Replaced by Transform with a sampler"),c=o(u),d=c.samplerName,h=c.sizeName,v=c.uniformDeclerations,g=n.i(f.f)(s),p="  ".concat(s," ").concat(u," = transform_getInput(").concat(d,", ").concat(h,").").concat(g,";\n");i[d]=u;return{updatedLine:l,inject:{"vs:#decl":v,"vs:#main-start":p},samplerTextureMap:i}}return null}e.b=i,e.a=r;var l=n(96),c=n.n(l),f=n(150),d="transform_uSampler_",h="transform_uSize_",v="transform_position"},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var i,r=n(0),a=n(1),o=n(18),s=n(89),u=n(46),l=n(91),c=n(92),f=n(161),d=n(151),h=n(150),v=n(7),g=n(5),p=n(6),_=n(415),m=(i={},n.i(o.a)(i,10241,9728),n.i(o.a)(i,10240,9728),n.i(o.a)(i,10242,33071),n.i(o.a)(i,10243,33071),i),y=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(r.a)(this,t),n.i(v.b)(e),this.gl=e,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._targetRefTexName=null,this._initialize(i),Object.seal(this)}return n.i(a.a)(t,null,[{key:"isSupported",value:function(t){return n.i(v.a)(t)}}]),n.i(a.a)(t,[{key:"delete",value:function(){for(var t in this._createdBuffers)this._createdBuffers[t].delete();this.model.delete()}},{key:"getBuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t?this.feedbackBuffers[this.currentIndex][t]:null;return e?e instanceof u.a?e:e.buffer:null}},{key:"_getTargetTexture",value:function(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,i=void 0===e?null:e,r=t.packed,a=void 0!==r&&r,o=this.getBuffer(i);if(o)return o.getData();n.i(g.a)(!i||i===this.targetTextureVarying);var s=this.framebuffers[this.currentIndex].readPixels();if(!a)return s;for(var u=s.constructor,l=n.i(h.a)(this.targetTextureType),c=new u(s.length*l/4),f=0,d=0;d<s.length;d+=4)for(var v=0;v<l;v++)c[f++]=s[d+v];return c}},{key:"getFramebuffer",value:function(){return this.framebuffers[this.currentIndex]}},{key:"_getInputs",value:function(){var t={},e=this.currentIndex,i=Object.assign({},this.sourceBuffers[e]);if(this.hasSourceTextures||this.targetTextureVarying){i.transform_elementID=this.elementIDBuffer;for(var r in this.samplerTextureMap){var a=this.samplerTextureMap[r];t[r]=this.sourceTextures[e][a]}this._setSourceTextureParameters();var o=n.i(_.a)({sourceTextureMap:this.sourceTextures[e],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[e]});Object.assign(t,o)}return{attributes:i,uniforms:t}}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getInputs(),i=e.attributes,r=e.uniforms;Object.assign(r,t.uniforms);var a=Object.assign({},t.parameters),o=t.clearRenderTarget,s=void 0===o||o,u=null,l=!0;this.renderingToTexture&&(l=!1,u=this.framebuffers[this.currentIndex],n.i(g.a)(u),a.viewport=[0,0,u.width,u.height],s&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(i),this.model.transform(Object.assign({},t,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:r,discard:l,framebuffer:u,parameters:a}))}},{key:"swapBuffers",value:function(){p.a.deprecated("swapBuffers()","swap()"),this.swap()}},{key:"swap",value:function(){n.i(g.a)(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.elementCount&&this._setElementCount(t.elementCount);var e=t.sourceBuffers,i=void 0===e?null:e,r=t.feedbackBuffers,a=void 0===r?null:r,o=this.currentIndex;if(i||a){for(var s in a)n.i(g.a)(a[s]instanceof u.a||a[s].buffer instanceof u.a);Object.assign(this.sourceBuffers[o],i),Object.assign(this.feedbackBuffers[o],a),this._createFeedbackBuffers({feedbackBuffers:a}),this.transformFeedbacks[o]&&this.transformFeedbacks[o].setBuffers(this.feedbackBuffers[o]),this._setupSwapBuffers()}var l=t._sourceTextures,c=t._targetTexture;(l||c)&&(Object.assign(this.sourceTextures[o],l),this._updateTargetTexture(c||this._targetRefTexName,o),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function(){var t=this.currentIndex;for(var e in this.sourceTextures[t])this.sourceTextures[t][e].setParameters(m)}},{key:"_setElementCount",value:function(t){this.elementCount!==t&&(this.elementCount<t&&this._updateElementIDBuffer(t),this.model.setVertexCount(t),this.elementCount=t)}},{key:"_updateTargetTexture",value:function(t,e){var i=this._buildTargetTexture(t);i&&(this.targetTextures[e]=i,this.framebuffers[e]&&(this.framebuffers[e].update({attachments:n.i(o.a)({},36064,this.targetTextures[e]),resizeAttachments:!1}),this.framebuffers[e].resize({width:i.width,height:i.height})))}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._validateProps(t),i=e.feedbackBuffers,r=e.feedbackMap,a=t.sourceBuffers,o=t.varyings,s=t._targetTexture,u=t._targetTextureVarying,l=t._swapTexture,c=o;r&&!Array.isArray(o)&&(c=Object.values(r)),this.varyingsArray=c,this.feedbackMap=r,this._swapTexture=l,s&&(this.targetTextureVarying=u,this.renderingToTexture=!0,n.i(g.a)(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:a,feedbackBuffers:i}),this._setupTextures(t),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},t,{id:t.id||"transform-model",drawMode:t.drawMode||0,varyings:c}))}},{key:"_validateProps",value:function(t){var e=t.feedbackBuffers,i=t.feedbackMap,r=t.destinationBuffers,a=t.sourceDestinationMap;r&&(p.a.deprecated("destinationBuffers","feedbackBuffers")(),e=e||r),a&&(p.a.deprecated("sourceDestinationMap","feedbackMap")(),i=i||a);var o=t.vs,s=t.elementCount,l=t.varyings,f=t._sourceTextures,d=t._targetTexture,h=t._targetTextureVarying,v=t._swapTexture;n.i(g.a)(o&&(l||i||d)&&s);for(var _ in e||{})n.i(g.a)(e[_]instanceof u.a||e[_].buffer instanceof u.a);for(var m in f||{})n.i(g.a)(f[m]instanceof c.a);return n.i(g.a)(!d||h),n.i(g.a)(!v||f[v]),{feedbackBuffers:e,feedbackMap:i}}},{key:"_setupBuffers",value:function(t){var e=t.sourceBuffers,n=void 0===e?null:e,i=t.feedbackBuffers,r=void 0===i?null:i;this.sourceBuffers[0]=Object.assign({},n),this.feedbackBuffers[0]=Object.assign({},r),this._createFeedbackBuffers({feedbackBuffers:r}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._sourceTextures,i=t._targetTexture;if(this.sourceTextures[0]=Object.assign({},e),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var r=this._buildTargetTexture(i);n.i(g.a)(r),this.targetTextures[0]=r,this.targetTextures[1]=null}}},{key:"_buildTargetTexture",value:function(t){var e;if(t instanceof c.a)return t;var i=this.sourceTextures[0][t];return i?(this._targetRefTexName=t,n.i(v.i)(i,{parameters:(e={},n.i(o.a)(e,10241,9728),n.i(o.a)(e,10240,9728),n.i(o.a)(e,10242,33071),n.i(o.a)(e,10243,33071),e),pixelStore:n.i(o.a)({},37440,!1)})):null}},{key:"_createFeedbackBuffers",value:function(t){var e=t.feedbackBuffers;if(this.feedbackMap){var n=this.currentIndex;for(var i in this.feedbackMap){var r=this.feedbackMap[i];if(!(r===this.targetTextureVarying||e&&e[r])){var a=this.sourceBuffers[n][i],o=a.bytes,s=a.type,l=a.usage,c=a.accessor,f=new u.a(this.gl,{bytes:o,type:s,usage:l,accessor:c});this._createdBuffers[r]&&this._createdBuffers[r].delete(),this._createdBuffers[r]=f,this.feedbackBuffers[n][r]=f}}}}},{key:"_createNewBuffer",value:function(t,e){var n=new u.a(this.gl,e);return this._createdBuffers[t]&&(this._createdBuffers[t].delete(),this._createdBuffers[t]=n),n}},{key:"_setupSwapBuffers",value:function(){if(this.feedbackMap){var t=this.currentIndex,e=(t+1)%2;Object.assign(this.sourceBuffers[e],this.sourceBuffers[t]),Object.assign(this.feedbackBuffers[e],this.feedbackBuffers[t]);for(var i in this.feedbackMap){var r=this.feedbackMap[i];r!==this.targetTextureVarying&&(this.sourceBuffers[e][i]=this.feedbackBuffers[t][r],this.feedbackBuffers[e][r]=this.sourceBuffers[t][i],n.i(g.a)(this.feedbackBuffers[e][r]instanceof u.a))}this.transformFeedbacks[e]&&this.transformFeedbacks[e].setBuffers(this.feedbackBuffers[e])}}},{key:"_setupSwapTextures",value:function(){if(this._swapTexture&&this.targetTextureVarying){var t=this.currentIndex,e=(t+1)%2;Object.assign(this.sourceTextures[e],this.sourceTextures[t]),this.sourceTextures[e][this._swapTexture]=this.targetTextures[t],this._updateTargetTexture(this.sourceTextures[t][this._swapTexture],e)}}},{key:"_buildModel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getShaders(t),n=e.vs,i=e.fs,r=e.modules,a=e.uniforms,o=e.inject,u=e.samplerTextureMap;this.model=new s.a(this.gl,Object.assign({},t,{vs:n,fs:i,vertexCount:t.elementCount,modules:r,uniforms:a,inject:o})),this.samplerTextureMap=u,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(t.elementCount)}},{key:"_setupTransformFeedback",value:function(){n.i(p.f)(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new f.a(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new f.a(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function(){if(this.renderingToTexture){var t=this.targetTextures[0],e=t.width,i=t.height;if(this.framebuffers[0]=new l.a(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:e,height:i,attachments:n.i(o.a)({},36064,this.targetTextures[0])}),this._swapTexture){var r=this.targetTextures[1];e=r.width,i=r.height,this.framebuffers[1]=new l.a(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:e,height:i,attachments:n.i(o.a)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function(t){if(this.hasSourceTextures||this.targetTextureVarying){var e=new Float32Array(t);e.forEach(function(t,e,n){n[e]=e}),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new u.a(this.gl,{data:e,size:1})}}},{key:"_getShaders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t.vs),i=e.vs,r=e.uniforms,a=e.targetTextureType,o=e.inject,s=e.samplerTextureMap,u=n.i(d.b)([t.inject||{},o]);return this.targetTextureType=a,{vs:i,fs:n.i(h.b)({version:n.i(v.j)(i),input:this.targetTextureVarying,inputType:a,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[h.c].concat(t.modules||[]):t.modules,uniforms:r,inject:u,samplerTextureMap:s}}},{key:"_processVertexShader",value:function(t){return n.i(_.b)({vs:t,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),t}()},function(t,e,n){"use strict";n.d(e,"c",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return h});var i=n(483),r=n.n(i),a=n(73),o={},s=function(t){o[t.id]||(o[t.id]=t,r.a.listItem("luma.gl",t.id))},u=function(t,e){if(r.a.isReady()&&!r.a.throttle("luma.gl:".concat(t.id),1e3)){var n=t.geometry?Object.assign({},t.geometry.attributes,t.attributes):t.attributes,i=Object.assign({},t.uniforms,e);r.a.multiUpdate("luma.gl",t.id,[{path:"objects.uniforms",data:i},{path:"objects.attributes",data:n}])}},l=function(t){delete o[t],r.a.deleteItem("luma.gl",t)},c=function t(e,n,i){e&&(n.length>1?t(e[n[0]],n.slice(1),i):e[n[0]]=i)},f=new Map,d=function(t,e,n){if(a.b.__SEER_INITIALIZED__){f.has(t)||f.set(t,new Map);f.get(t).set(e,n)}},h=function(t,e){if(a.b.__SEER_INITIALIZED__&&t){var n=f.get(t);n&&n.forEach(function(t,n){c(e,n,t)})}};r.a.listenFor("luma.gl",function(t){var e=o[t.itemKey];if(e&&"edit"===t.type&&"uniforms"===t.valuePath[0]){var n=t.valuePath.slice(1);d(t.itemKey,n,t.value);var i=e.getUniforms();c(i,n,t.value),e.setUniforms(i)}})},function(t,e,n){"use strict";function i(){}function r(t){return new u(t).sendAsync()}e.a=r;var a=n(0),o=n(1),s={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETED:4},u=function(){function t(e){var r=e.url,o=e.path,s=void 0===o?null:o,u=e.method,l=void 0===u?"GET":u,c=e.asynchronous,f=void 0===c||c,d=e.noCache,h=void 0!==d&&d,v=e.sendAsBinary,g=void 0!==v&&v,p=e.responseType,_=void 0!==p&&p,m=e.onProgress,y=void 0===m?i:m,b=e.onError,E=void 0===b?i:b,A=e.onAbort,x=void 0===A?i:A,T=e.onComplete,P=void 0===T?i:T;n.i(a.a)(this,t),this.url=s?s.join(s,r):r,this.method=l,this.async=f,this.noCache=h,this.sendAsBinary=g,this.responseType=_,this.req=new XMLHttpRequest,this.req.onload=function(t){return P(t)},this.req.onerror=function(t){return E(t)},this.req.onabort=function(t){return x(t)},this.req.onprogress=function(t){t.lengthComputable?y(t,Math.round(t.loaded/t.total*100)):y(t,-1)}}return n.i(o.a)(t,[{key:"setRequestHeader",value:function(t,e){return this.req.setRequestHeader(t,e),this}},{key:"sendAsync",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(n,i){try{var r=t.req,a=t.method,o=t.noCache,u=t.sendAsBinary,l=t.responseType,c=o?t.url+(t.url.indexOf("?")>=0?"&":"?")+Date.now():t.url;r.open(a,c,t.async),l&&(r.responseType=l),t.async&&(r.onreadystatechange=function(t){r.readyState===s.COMPLETED&&(200===r.status?n(r.responseType?r.response:r.responseText):i(new Error("".concat(r.status,": ").concat(c))))}),u?r.sendAsBinary(e):r.send(e),t.async||(200===r.status?n(r.responseType?r.response:r.responseText):i(new Error("".concat(r.status,": ").concat(c))))}catch(t){i(t)}})}}]),t}()},function(t,e,n){"use strict";var i=n(215);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return i.b}),n.d(e,"c",function(){return i.c});var r=n(216);n.d(e,"d",function(){return r.a}),n.d(e,"e",function(){return r.b}),n.d(e,"f",function(){return r.c}),n.d(e,"g",function(){return r.d}),n.d(e,"h",function(){return r.e}),n.d(e,"i",function(){return r.f}),n.d(e,"j",function(){return r.g})},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),r=n(1),a=n(409),o=(n.n(a),n(13)),s=n(226),u=function(){function t(){if(n.i(i.a)(this,t),this.canvas=document.createElement("canvas"),this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.gl=n.i(o.createGLContext)({canvas:this.canvas,opts:{premultipliedAlpha:!1}}),!this.gl)throw new Error("This browser does not support WebGL");this.texture=null,this.spareTexture=null,this.flippedModel=null}return n.i(r.a)(t,[{key:"installFiltersAsMethods",value:function(t){var e=this;for(var n in t)!function(n){"canvas"!==n&&(e[n]=function(i){return e.filter(t[n],i).bind(e)})}(n)}},{key:"setTexture",value:function(t){return this.texture=new o.Texture2D(this.gl,{pixels:t}),this.resize(this.gl,this.texture.width,this.texture.height),this}},{key:"resize",value:function(t,e,n){if(t.canvas.width!==e||t.canvas.height!==n){t.canvas.width=e,t.canvas.height=n;var i=Math.floor(e/1),r=Math.floor(n/1);t.canvas.style.width="".concat(i,"px"),t.canvas.style.height="".concat(r,"px"),t.viewport(0,0,e,n),this.width=i,this.height=r}}},{key:"replace",value:function(t){return t.parentNode.insertBefore(this.canvas,t),t.parentNode.removeChild(t),this}},{key:"draw",value:function(){return this.multiPassRenderer=new o._MultiPassRenderer(this.gl,[new o._ClearPass(this.gl),new o._TexturePass(this.gl,{texture:this.texture}),new o._CopyPass(this.gl,{screen:!0})]),this.multiPassRenderer.render(),this}},{key:"update",value:function(){return this.multiPassRenderer.render({}),this}},{key:"filter",value:function(t,e){return this.multiPassRenderer=new o._MultiPassRenderer(this.gl,[new o._ClearPass(this.gl),new o._TexturePass(this.gl,{texture:this.texture}),new s.a(this.gl,t,e),new o._CopyPass(this.gl,{screen:!0})]),this.multiPassRenderer.render(),this}},{key:"getPixelArray",value:function(){var t=this.gl,e=this.texture.width,n=this.texture.height,i=new Uint8Array(e*n*4);return this.texture.drawTo(function(){return t.readPixels(0,0,e,n,6408,5121,i)}),i}},{key:"_initialize",value:function(t,e){var n=this.gl,i=5121;if(this.gl.getExtension("OES_texture_float")&&n.getExtension("OES_texture_float_linear")){var r=new o.Texture2D(this.gl,{width:100,height:100,format:6408,type:5126});try{r.drawTo(function(){i=5126})}catch(t){}r.destroy()}this.spareTexture&&this.spareTexture.destroy(),this.width=t,this.height=e,this.texture=new o.Texture2D(this.gl,{width:t,height:e,format:6408,type:i}),this.spareTexture=new o.Texture2D(this.gl,{width:t,height:e,format:6408,type:i}),this.extraTexture=this.extraTexture||new o.Texture2D(this.gl,{width:0,height:0,format:6408,type:i}),this.flippedModel=this.flippedModel||new o.Model(this.gl,{vs:"attribute vec2 vertex;\nattribute vec2 _texCoord;\nvarying vec2 texCoord;\nvoid main() {\n  texCoord = _texCoord;\n  gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);\n}\n",fs:"uniform sampler2D texture;\nvarying vec2 texCoord;\nvoid main() {\n  gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\n}\n"}),this.isInitialized=!0}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(53),l=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(a.a)(this,n.i(o.a)(e).call(this,t,Object.assign({id:"clear-pass"},r)))}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"_renderPass",value:function(t){var e=t.gl,n=this.props.clearBits,i=void 0===n?16640:n;e.clear(i)}}]),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(221),l=n(53),c="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",f=function(t){function e(t){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),r=n.i(a.a)(this,n.i(o.a)(e).call(this,t,Object.assign({id:"copy-pass",swap:!0},s))),r.clipspace=new u.a(t,{id:"copy-pass",fs:c}),r}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"_renderPass",value:function(t){var e=t.inputBuffer,n=this.props.opacity,i=void 0===n?1:n;this.clipspace.draw({uniforms:{uDiffuseSampler:e,uOpacity:i},parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(l.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(149),l=n(225),c=function(t){function e(t,r){var s;return n.i(i.a)(this,e),r=Array.isArray(r)?{passes:r}:r,s=n.i(a.a)(this,n.i(o.a)(e).call(this,t,Object.assign({id:"multi-pass"},r))),s.renderState=new l.a(t,r),s}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"render",value:function(t){this.renderState.reset();var e=this.props.passes,n=void 0===e?[]:e,i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){o.value.render(this.renderState,t)}}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return this}}]),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(53),l=n(207),c=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(a.a)(this,n.i(o.a)(e).call(this,t,Object.assign({id:"picking-pass"},r)))}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"_renderPass",value:function(t){var e=t.gl,i=t.inputBuffer,r=t.animationProps,a=this.props,o=r?r._mousePosition:a.mousePosition,s=r?r.useDevicePixels:a.useDevicePixels;if(o){var u=n.i(l.a)(e,{models:this.props.models,position:o,useDevicePixels:s,framebuffer:i}),c=!0,f=!1,d=void 0;try{for(var h,v=this.props.models[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var g=h.value;if(u&&u.model===g){var p=u&&u.color||null;g.updateModuleSettings({pickingSelectedColor:p})}}}catch(t){f=!0,d=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw d}}}else{var _=!0,m=!1,y=void 0;try{for(var b,E=this.props.models[Symbol.iterator]();!(_=(b=E.next()).done);_=!0){b.value.updateModuleSettings({pickingSelectedColor:null})}}catch(t){m=!0,y=t}finally{try{_||null==E.return||E.return()}finally{if(m)throw y}}}}}]),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(53),l=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.i(i.a)(this,e),n.i(a.a)(this,n.i(o.a)(e).call(this,t,Object.assign({id:"render-pass"},r)))}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"_renderPass",value:function(t){var e=t.animationProps,n=this.props,i=n.models,r=void 0===i?[]:i,a=n.drawParams,o=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){l.value.draw(Object.assign({},a,{animationProps:e}))}}catch(t){s=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}}]),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(221),l=n(53),c="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",f=function(t){function e(t){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.i(i.a)(this,e),r=n.i(a.a)(this,n.i(o.a)(e).call(this,t,Object.assign({id:"texture-pass"},s)));var l=s.texture,f=s.opacity,d=void 0===f?1:f;return r.clipspace=new u.a(t,{id:"texture-pass",fs:c,uniforms:{uDiffuseSampler:l,uOpacity:d}}),r}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"_renderPass",value:function(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(l.a)},function(t,e,n){"use strict";function i(t){for(var e={},i={},a=Object.entries(t),o=0;o<a.length;o++){var s=n.i(f.a)(a[o],2),u=s[0],l=s[1],c=r(u,l);e[u]=c,i[u]=c.value}return{propTypes:e,defaultProps:i}}function r(t,e){switch(l(e)){case"object":return e=o(t,e),s(e);case"array":return a(t,e);case"boolean":return{name:t,type:"boolean",value:e};case"number":return u(t,e);case"function":return{name:t,type:"function",value:e};default:return{name:t,type:"unknown",value:e}}}function a(t,e){return!/color/i.test(t)||3!==e.length&&4!==e.length?{name:t,type:"array",value:e}:{name:t,type:"color",value:e}}function o(t,e){return"type"in e?Object.assign({name:t},e):"value"in e?Object.assign({name:t,type:l(e.value)},e):{name:t,type:"object",value:e}}function s(t){var e=t.type;d[e];return t}function u(t,e){var n=/radius|scale|width|height|pixel|size|miter/i.test(t)&&/^((?!scale).)*$/.test(t),i=n?100:1;return{name:t,type:"number",max:Math.max(e,i),min:Math.min(e,0),value:e}}function l(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":null===t?"null":n.i(c.a)(t)}e.a=i;var c=n(43),f=n(31),d={boolean:{validate:function(t,e){return!0}},number:{validateType:function(t,e){return"value"in e&&(!("max"in e)||Number.isFinite(e.max))&&(!("min"in e)||Number.isFinite(e.min))},validate:function(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}}}},function(t,e,n){"use strict";function i(t){switch(n.i(a.a)(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function r(t,e,i){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return n.i(a.b)(t,a.c.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),n.i(a.b)(t,a.c.GLSL_DERIVATIVES)&&n.i(a.d)(t,a.c.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),n.i(a.b)(t,a.c.GLSL_FRAG_DATA)&&n.i(a.d)(t,a.c.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),n.i(a.b)(t,a.c.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}e.a=i,e.b=r;var a=n(450)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(0),r=n(1),a=n(430),o=n(111),s=function(){function t(){n.i(i.a)(this,t),this.shaderModules={},this.defaultShaderModules=[]}return n.i(r.a)(t,[{key:"setDefaultShaderModules",value:function(t){this.defaultShaderModules=this.resolveModules(t)}},{key:"registerShaderModules",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ignoreMultipleRegistrations,i=void 0!==n&&n,r=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;this._registerShaderModule(l,i)}}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}}},{key:"getShaderModule",value:function(t){if(t instanceof a.a)return t;if("string"!=typeof t)return this._registerShaderModule(t,!0);var e=this.shaderModules[t];return e||n.i(o.a)(!1,"Unknown shader module ".concat(t)),e}},{key:"resolveModules",value:function(t){var e=this;return t.map(function(t){return e.getShaderModule(t)})}},{key:"_registerShaderModule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t instanceof a.a)return t;if(n.i(o.a)(t.name,"shader module has no name"),this.shaderModules[t.name]&&!e)throw new Error("shader module ".concat(t.name," already registered"));return t=new a.a(t),t.dependencies=this.resolveModules(t.dependencies),this.shaderModules[t.name]=t,this.shaderModules[t.name]}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(0),r=n(1),a=n(431),o=n(111),s=function(){function t(e){var r=e.name,a=e.vs,s=e.fs,u=e.dependencies,l=void 0===u?[]:u,c=e.getUniforms,f=void 0===c?function(){return{}}:c,d=e.deprecations,h=void 0===d?[]:d,v=e.vertexShader,g=e.fragmentShader;n.i(i.a)(this,t),n.i(o.a)("string"==typeof r),this.name=r,this.vs=a||v,this.fs=s||g,this.getModuleUniforms=f,this.dependencies=l,this.deprecations=this._parseDeprecationDefinitions(h)}return n.i(r.a)(t,[{key:"getModuleSource",value:function(t,e){var i;switch(t){case"vs":i=n.i(a.a)(this.vs||"",e,!0);break;case"fs":i=n.i(a.a)(this.fs||"",e,!1);break;default:n.i(o.a)(!1)}return"string"!=typeof i?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(i,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(t,e){return this.getModuleUniforms(t,e)}},{key:"checkDeprecations",value:function(t,e){this.deprecations.forEach(function(n){n.regex.test(t)&&(n.deprecated&&e?e.deprecated(n.old,n.new)():e&&e.removed(n.old,n.new)())})}},{key:"_parseDeprecationDefinitions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.forEach(function(t){switch(t.type){case"function":t.regex=new RegExp("\\b".concat(t.old,"\\("));break;default:t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}}),t}}]),t}()},function(t,e,n){"use strict";function i(t,e,n){switch(e){case 300:return n?r(t):a(t);case 100:return n?o(t):s(t);default:throw new Error("unknown GLSL version ".concat(e))}}function r(t){return t.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(")}function a(t){return t.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(")}function o(t){return t.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}function s(t){return t.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}e.a=i},function(t,e,n){"use strict";e.a="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n"},function(t,e,n){"use strict";e.a="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.fround(t),r=t-i;return e[n]=i,e[n+1]=r,e}function r(t){return t-Math.fround(t)}function a(t){for(var e=new Float32Array(32),n=0;n<4;++n)for(var r=0;r<4;++r){var a=4*n+r;i(t[4*r+n],e,2*a)}return e}e.a=i,e.b=r,e.c=a},function(t,e,n){"use strict";e.a="\n"},function(t,e,n){"use strict";e.a="precision highp float;\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\nuniform float reflection;\nuniform float refraction;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},function(t,e,n){"use strict";e.a="#define LIGHT_MAX 4\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform bool lighting_uEnableReflections;\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n"},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",r="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},function(t,e,n){"use strict";e.a="#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n\nuniform vec3 u_LightDirection;\nuniform vec3 u_LightColor;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\nuniform vec4 u_ScaleIBLAmbient;\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n  #ifdef MANUAL_SRGB\n  #ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n  #else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n  #endif\n  return vec4(linOut,srgbIn.w);;\n  #else\n  return srgbIn;\n  #endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n\n\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();\n  vec3 v = normalize(u_Camera - pbr_vPosition);\n  vec3 l = normalize(u_LightDirection);\n  vec3 h = normalize(l+v);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  float NdotL = clamp(dot(n, l), 0.001, 1.0);\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  float NdotH = clamp(dot(n, h), 0.0, 1.0);\n  float LdotH = clamp(dot(l, h), 0.0, 1.0);\n  float VdotH = clamp(dot(v, h), 0.0, 1.0);\n\n  PBRInfo pbrInputs = PBRInfo(\n    NdotL,\n    NdotV,\n    NdotH,\n    LdotH,\n    VdotH,\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor\n  );\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * NdotL * NdotV);\n  vec3 color = NdotL * u_LightColor * (diffuseContrib + specContrib);\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n  color = mix(color, F, u_ScaleFGDSpec.x);\n  color = mix(color, vec3(G), u_ScaleFGDSpec.y);\n  color = mix(color, vec3(D), u_ScaleFGDSpec.z);\n  color = mix(color, specContrib, u_ScaleFGDSpec.w);\n\n  color = mix(color, diffuseContrib, u_ScaleDiffBaseMR.x);\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n"},function(t,e,n){"use strict";e.a="varying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n"},function(t,e,n){"use strict";var i=n(442),r=n(440),a=n(439);e.a={name:"pbr",vs:r.a,fs:a.a,dependencies:[i.a]}},function(t,e,n){"use strict";var i=n(443);e.a={name:"project2",vs:i.a,fs:i.a}},function(t,e,n){"use strict";e.a="uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n"},function(t,e,n){"use strict";e.a={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(447),r=n(446),a={vs:i.a,fs:r.a,defaultUniforms:{}}},function(t,e,n){"use strict";e.a="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n"},function(t,e,n){"use strict";e.a="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n"},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="undefined"!=typeof window?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}e.a=i},function(t,e,n){"use strict";function i(t,e){e=Array.isArray(e)?e:[e];var i=t.replace(/^\s+/,"").split(/\s+/),r=n.i(u.a)(i,3),a=r[0],o=r[1],s=r[2];return e.includes(a)&&o&&s?{qualifier:a,type:o,name:s.split(";")[0]}:null}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,i=t.input,r=t.inputType,a=t.output;if(!i)return 300===n?d:f;var o=s(i,r);return 300===n?"#version 300 es\nin ".concat(r," ").concat(i,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(o,";\n}"):"varying ".concat(r," ").concat(i,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function a(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return c()(!1),null}}function o(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return c()(!1),null}}function s(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return c()(!1),null}}e.a=i,e.b=r,e.c=a,e.d=o;var u=n(31),l=n(96),c=n.n(l),f="void main() {}",d="#version 300 es\n".concat(f)},function(t,e,n){"use strict";function i(t){return Boolean(t&&("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||32874===f))}function r(t){var e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||d),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||h);return{gpuVendor:a(n,i),vendor:n,renderer:i,version:t.getParameter(v),shadingLanguageVersion:t.getParameter(g)}}function a(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}function o(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=p[e];if(n.i(c.a)(r,e),!n.i(l.a)(i))return!0;if(e in m)return m[e];var a=r[0],o=i.behavior||"enable",s="#extension GL_".concat(a," : ").concat(o,"\nvoid main(void) {}"),u=t.createShader(35633);t.shaderSource(u,s),t.compileShader(u);var f=t.getShaderParameter(u,35713);return t.deleteShader(u),m[e]=f,f}function s(t,e){var r=p[e];n.i(c.a)(r,e);var a=i(t)?r[1]||r[0]:r[0],o="string"==typeof a?Boolean(t.getExtension(a)):a;return n.i(c.a)(!1===o||!0===o),o}function u(t,e){return e=Array.isArray(e)?e:[e],e.every(function(e){return s(t,e)})}n.d(e,"c",function(){return _}),e.a=r,e.d=o,e.b=u;var l=n(448),c=n(111),f=32874,d=7936,h=7937,v=7938,g=35724,p={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},_={};Object.keys(p).forEach(function(t){_[t]=t});var m={}},function(t,e,n){"use strict";function i(t){return(!o||o.byteLength<t)&&(o=new ArrayBuffer(t)),o}function r(t,e){return new t(i(t.BYTES_PER_ELEMENT*e),0,e)}function a(t){for(var e=t.target,n=t.source,i=t.start,r=void 0===i?0:i,a=t.count,o=void 0===a?1:a,s=n.length,u=o*s,l=0,c=r;l<s;l++)e[c++]=n[l];for(;l<u;)l<u-l?(e.copyWithin(r+l,r,r+l),l*=2):(e.copyWithin(r+l,r,r+u-l),l=u);return e}e.a=r,e.b=a;var o=null},function(t,e,n){"use strict";function i(t,e){for(var n=e.maxElts,i=void 0===n?16:n,a=e.size,o=void 0===a?1:a,s="[",u=0;u<t.length&&u<i;++u)u>0&&(s+=",".concat(u%o==0?" ":"")),s+=r(t[u],e);var l=t.length>i?"...":"]";return"".concat(s).concat(l)}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isInteger,r=void 0!==n&&n;if(Array.isArray(t)||ArrayBuffer.isView(t))return i(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return r?"0":"0.";if(r)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var a=t.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}e.a=r},function(t,e,n){"use strict";(function(t){var i=n(43);e.a=function(){return"undefined"!=typeof window&&"object"===n.i(i.a)(window.process)&&"renderer"===window.process.type||(!(void 0===t||"object"!==n.i(i.a)(t.versions)||!Boolean(t.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":n.i(i.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}()}).call(e,n(62))},function(t,e,n){"use strict"},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";s[t]=s[t]||1;var e=s[t]++;return"".concat(t,"-").concat(e)}function r(t){return n.i(o.a)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function a(t){var e=!0;for(var n in t){e=!1;break}return e}e.a=i,e.b=r,e.c=a;var o=n(5),s={}},function(t,e,n){"use strict";function i(t){var e={},i="Accessors for ".concat(t.id),o=!0,s=!1,u=void 0;try{for(var l,c=t.attributeInfos[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;if(f){e["in ".concat(r(f))]=n.i(a.a)({},i,JSON.stringify(f.accessor))}}}catch(t){s=!0,u=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}var d=!0,h=!1,v=void 0;try{for(var g,p=t.varyingInfos[Symbol.iterator]();!(d=(g=p.next()).done);d=!0){var _=g.value;if(_){e["out ".concat(r(_))]=n.i(a.a)({},i,JSON.stringify(_.accessor))}}}catch(t){h=!0,v=t}finally{try{d||null==p.return||p.return()}finally{if(h)throw v}}return e}function r(t){var e=t.accessor,i=e.type,r=e.size,a=n.i(o.a)(i,r);return a?"".concat(a.name," ").concat(t.name):t.name}e.a=i;var a=n(18),o=n(90)},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.header,i=void 0===e?"Uniforms":e,a=t.program,l=t.uniforms,c=t.undefinedOnly,f=void 0!==c&&c;n.i(u.a)(a);var d=a._uniformSetters,h={},v=Object.keys(d).sort(),g=0,p=!0,_=!1,m=void 0;try{for(var y,b=v[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var E=y.value;E.match(".*_.*")||E.match(".*Matrix")||r({table:h,header:i,uniforms:l,uniformName:E,undefinedOnly:f})&&g++}}catch(t){_=!0,m=t}finally{try{p||null==b.return||b.return()}finally{if(_)throw m}}var A=!0,x=!1,T=void 0;try{for(var P,w=v[Symbol.iterator]();!(A=(P=w.next()).done);A=!0){var C=P.value;C.match(".*Matrix")&&r({table:h,header:i,uniforms:l,uniformName:C,undefinedOnly:f})&&g++}}catch(t){x=!0,T=t}finally{try{A||null==w.return||w.return()}finally{if(x)throw T}}var k=!0,S=!1,R=void 0;try{for(var M,L=v[Symbol.iterator]();!(k=(M=L.next()).done);k=!0){var I=M.value;h[I]||r({table:h,header:i,uniforms:l,uniformName:I,undefinedOnly:f})&&g++}}catch(t){S=!0,R=t}finally{try{k||null==L.return||L.return()}finally{if(S)throw R}}var O=0,F={};if(!f)for(var N in l){var D=l[N];h[N]||(O++,F[N]=n.i(o.a)({Type:"NOT USED: ".concat(D)},i,n.i(s.g)(D)))}return{table:h,count:g,unusedTable:F,unusedCount:O}}function r(t){var e=t.table,i=t.header,r=t.uniforms,u=t.uniformName,l=t.undefinedOnly,c=r[u],f=a(c);if(!l||!f){var d;return e[u]=(d={},n.i(o.a)(d,i,f?n.i(s.g)(c):"N/A"),n.i(o.a)(d,"Uniform Type",f?c:"NOT PROVIDED"),d),!0}return!1}function a(t){return void 0!==t&&null!==t}e.a=i;var o=n(18),s=n(6),u=n(5)},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vertexArray,n=t.header,i=void 0===n?"Attributes":n;if(!e.configuration)return{};var o={};e.elements&&(o.ELEMENT_ARRAY_BUFFER=r(e,e.elements,null,i));var s=e.values;for(var u in s){var l=e._getAttributeInfo(u);if(l){var c="".concat(u,": ").concat(l.name),f=e.accessors[l.location];f&&(c="".concat(u,": ").concat(a(l.name,f))),o[c]=r(e,s[u],f,i)}}return o}function r(t,e,i,r){var a,l,f,d,h=t.gl,v="NOT PROVIDED",g="N/A",p="N/A",_="N/A";if(i&&(v=i.type,g=i.size,v=String(v).replace("Array",""),l=-1!==v.indexOf("nt")),e instanceof s.a){var m,y=e,b=y.getDebugData(),E=b.data;f=b.modified?"*":"",d=E,_=y.byteLength,p=_/E.BYTES_PER_ELEMENT/g;var A;if(i){A="".concat(i.divisor>0?"I ":"P "," ").concat(p," (x").concat(g,"=").concat(_," bytes ").concat(n.i(u.d)(h,v),")")}else l=!0,A="".concat(_," bytes");return m={},n.i(o.a)(m,r,"".concat(f).concat(n.i(c.g)(d,{size:g,isInteger:l}))),n.i(o.a)(m,"Format ",A),m}return d=e,g=e.length,v=String(e.constructor.name).replace("Array",""),l=-1!==v.indexOf("nt"),a={},n.i(o.a)(a,r,"".concat(n.i(c.g)(d,{size:g,isInteger:l})," (constant)")),n.i(o.a)(a,"Format ","".concat(g,"x").concat(v," (constant)")),a}function a(t,e){var i=e.type,r=e.size,a=n.i(l.a)(i,r);return a?"".concat(t," (").concat(a.name,")"):t}e.a=i;var o=n(18),s=n(46),u=n(76),l=n(90),c=n(6)},function(t,e,n){"use strict";function i(t,e,i,o){for(var u=t.split(/\r?\n/),l={},c={},f=o||n.i(s.a)(e)||"(unnamed)",d="".concat(n.i(s.b)(i)," shader ").concat(f),h=0;h<u.length;h++){var v=u[h];if(!(v.length<=1)){var g=v.split(":"),p=g[0],_=parseInt(g[2],10);if(isNaN(_))throw new Error("GLSL compilation error in ".concat(d,": ").concat(t));"WARNING"!==p?l[_]=v:c[_]=v}}var m=a(e);return{shaderName:d,errors:r(l,m),warnings:r(c,m)}}function r(t,e){for(var n="",i=0;i<e.length;i++){var r=e[i];if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(r,"\n"),t[i+1])){var a=t[i+1],s=a.split(":",3),u=s[0],l=parseInt(s[1],10)||0,c=a.substring(s.join(":").length+1).trim();n+=o("^^^ ".concat(u,": ").concat(c,"\n\n"),l)}}return n}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map(function(t,i){var a=i+e,s=String(a).length;return o(a,r-s)+n+t})}function o(t,e){for(var n="",i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}e.a=i;var s=n(242)},function(t,e,n){"use strict";function i(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return n.i(a.a)(!1),0}}function r(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return n.i(a.a)(!1),0}}e.a=i,e.b=r;var a=n(5)},function(t,e,n){"use strict";function i(t){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function r(t){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}e.a=i,e.b=r},function(t,e,n){"use strict";function i(t){var e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}e.a=i},function(t,e,n){"use strict";n(464)},function(t,e,n){"use strict";(function(t){function e(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function i(t){return t&&!0}function r(t,e){return{webgl2:i(t),ext:t.getExtension(e)}}function a(t){t.luma.extensions={};var e=t.getSupportedExtensions()||[],n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.luma[s]=t.getExtension(s)}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}function o(t,n){var i=n.extension,r=n.target,a=n.target2,o=d[i];e(o);var s=o.meta,u=void 0===s?{}:s,l=u.suffix,c=void 0===l?"":l,f=t.getExtension(i);Object.keys(o).forEach(function(e){var n="".concat(e).concat(c),i=null;"meta"===e||"function"==typeof t[e]||(f&&"function"==typeof f[n]?i=function(){return f[n].apply(f,arguments)}:"function"==typeof o[e]&&(i=o[e].bind(r))),i&&(r[e]=i,a[e]=i)})}function s(t,e){var n=e.target,i=e.target2,r=d.OVERRIDES;Object.keys(r).forEach(function(e){if("function"==typeof r[e]){var a=t[e]?t[e].bind(t):function(){},o=r[e].bind(null,t,a);n[e]=o,i[e]=o}})}function u(t){if(t.luma=t.luma||{},a(t),!t.luma.polyfilled){for(var e in d)"overrides"!==e&&o(t,{extension:e,target:t.luma,target2:t});s(t,{target:t.luma,target2:t}),t.luma.polyfilled=!0}return t}var l,c=n(18),f=n(465),d=(l={},n.i(c.a)(l,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){e(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),n.i(c.a)(l,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(t,n){e(0===n,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),n.i(c.a)(l,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){e(!1)}}),n.i(c.a)(l,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){e(!1)},deleteQuery:function(){e(!1)},beginQuery:function(){e(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},queryCounter:function(){},getQueryObject:function(){}}),n.i(c.a)(l,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),n.i(c.a)(l,"OVERRIDES",{readBuffer:function(t,e,n){i(t)&&e(n)},getVertexAttrib:function(t,e,n,i){var a,o=r(t,"ANGLE_instanced_arrays"),s=o.webgl2,u=o.ext;switch(i){case 35069:a=!!s&&void 0;break;case 35070:a=s||u?void 0:0}return void 0!==a?a:e(n,i)},getProgramParameter:function(t,e,n,r){if(!i(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,a){if(!i(t))switch(a){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,a)},getTexParameter:function(t,e,n,i){switch(i){case 34046:var r=t.luma.extensions,a=r.EXT_texture_filter_anisotropic;i=a&&a.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:f.a,hint:function(t,e,n,i){return e(n,i)}}),l);(void 0!==t?t:window).polyfillContext=u}).call(e,n(63))},function(t,e,n){"use strict";function i(t){return t&&!0}function r(t,e,n){var i=u[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)}e.a=r;var a,o=n(18),s=function(t){return i(t)?void 0:0},u=(a={},n.i(o.a)(a,3074,function(t){return i(t)?void 0:36064}),n.i(o.a)(a,35723,function(t){return i(t)?void 0:4352}),n.i(o.a)(a,35977,s),n.i(o.a)(a,32937,s),n.i(o.a)(a,36795,function(t,e){var n=i(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0}),n.i(o.a)(a,37445,function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)}),n.i(o.a)(a,37446,function(t,e){var n=t.getExtension("WEBGL_debug_renderer_info");return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)}),n.i(o.a)(a,34047,function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),n.i(o.a)(a,32883,s),n.i(o.a)(a,35071,s),n.i(o.a)(a,37447,s),n.i(o.a)(a,36063,function(t,e){if(!i(t)){var n=t.getExtension("WEBGL_draw_buffers");return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),n.i(o.a)(a,35379,s),n.i(o.a)(a,35374,s),n.i(o.a)(a,35377,s),n.i(o.a)(a,34852,function(t){if(!i(t)){var e=t.getExtension("WEBGL_draw_buffers");return e?e.MAX_DRAW_BUFFERS_WEBGL:0}}),n.i(o.a)(a,36203,function(t){return t.getExtension("OES_element_index")?2147483647:65535}),n.i(o.a)(a,33001,function(t){return t.getExtension("OES_element_index")?16777216:65535}),n.i(o.a)(a,33e3,function(t){return 16777216}),n.i(o.a)(a,37157,s),n.i(o.a)(a,35373,s),n.i(o.a)(a,35657,s),n.i(o.a)(a,36183,s),n.i(o.a)(a,37137,s),n.i(o.a)(a,34045,s),n.i(o.a)(a,35978,s),n.i(o.a)(a,35979,s),n.i(o.a)(a,35968,s),n.i(o.a)(a,35376,s),n.i(o.a)(a,35375,s),n.i(o.a)(a,35659,s),n.i(o.a)(a,37154,s),n.i(o.a)(a,35371,s),n.i(o.a)(a,35658,s),n.i(o.a)(a,35076,s),n.i(o.a)(a,35077,s),n.i(o.a)(a,35380,s),a)},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n(0),r=n(1),a=n(4),o=n(2),s=n(3),u=n(27),l=n(42),c=n(7),f=n(157),d=function(t){function e(t,r){var s;return n.i(i.a)(this,e),n.i(c.b)(t),s=n.i(a.a)(this,n.i(o.a)(e).call(this,t,r)),s.promise=null,Object.seal(n.i(u.a)(n.i(u.a)(s))),s}return n.i(s.a)(e,t),n.i(r.a)(e,[{key:"wait",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.flags,n=void 0===e?0:e,i=t.timeout,r=void 0===i?-1:i;return this.gl.waitSync(this.handle,n,r),this}},{key:"clientWait",value:function(t){var e=t.flags,n=void 0===e?1:e,i=t.timeout,r=this.gl.clientWaitSync(this.handle,n,i);return r}},{key:"cancel",value:function(){f.a.cancelQuery(this)}},{key:"isSignaled",value:function(){return 37145===this.getParameter(37140)}},{key:"isResultAvailable",value:function(){return this.isSignaled()}},{key:"getResult",value:function(){return this.isSignaled()}},{key:"getParameter",value:function(t){return this.gl.getSyncParameter(this.handle,t)}},{key:"_createHandle",value:function(){return this.gl.fenceSync(37143,0)}},{key:"_deleteHandle",value:function(){f.a.deleteQuery(this),this.gl.deleteSync(this.handle)}}]),e}(l.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(0),r=n(1),a=n(116),o=n(7),s=n(90),u=function(){function t(e){n.i(i.a)(this,t),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return n.i(r.a)(t,[{key:"getAttributeInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfos[e]:this.attributeInfosByName[t]||null}},{key:"getAttributeLocation",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:"getAttributeAccessor",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:"getVaryingInfo",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:"getVaryingIndex",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:"getVaryingAccessor",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:"_readAttributesFromProgram",value:function(t){for(var e=t.gl,n=e.getProgramParameter(t.handle,35721),i=0;i<n;i++){var r=e.getActiveAttrib(t.handle,i),a=r.name,o=r.type,s=r.size,u=e.getAttribLocation(t.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort(function(t,e){return t.location-e.location})}},{key:"_readVaryingsFromProgram",value:function(t){var e=t.gl;if(n.i(o.a)(e)){for(var i=e.getProgramParameter(t.handle,35971),r=0;r<i;r++){var a=e.getTransformFeedbackVarying(t.handle,r),s=a.name,u=a.type,l=a.size;this._addVarying(r,s,u,l)}this.varyingInfos.sort(function(t,e){return t.location-e.location})}}},{key:"_addAttribute",value:function(t,e,i,r){var o=n.i(s.b)(i),u=o.type,l=o.components,c={type:u,size:r*l};this._inferProperties(t,e,c);var f={location:t,name:e,accessor:new a.a(c)};this.attributeInfos.push(f),this.attributeInfosByName[f.name]=f}},{key:"_inferProperties",value:function(t,e,n){/instance/i.test(e)&&(n.divisor=1)}},{key:"_addVarying",value:function(t,e,i,r){var o=n.i(s.b)(i),u=o.type,l=o.components,c=new a.a({type:u,size:r*l}),f={location:t,name:e,accessor:c};this.varyingInfos.push(f),this.varyingInfosByName[f.name]=f}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n(0),r=n(4),a=n(2),o=n(1),s=n(3),u=n(77),l=n(7),c=function(t){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};throw n.i(i.a)(this,e),n.i(r.a)(this,n.i(a.a)(e).call(this,t,o)),new Error("Texture2DArray not yet implemented")}return n.i(s.a)(e,t),n.i(o.a)(e,null,[{key:"isSupported",value:function(t){return n.i(l.a)(t)}}]),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(18),r=n(0),a=n(1),o=n(90),s=n(5),u=5126,l=5124,c=5125,f=function(){function t(e){var a;n.i(r.a)(this,t),this.layout={},this.size=0;for(var o in e)this._addUniform(o,e[o]);var s=new Float32Array(this.size);this.typedArray=(a={},n.i(i.a)(a,u,s),n.i(i.a)(a,l,new Int32Array(s.buffer)),n.i(i.a)(a,c,new Uint32Array(s.buffer)),a)}return n.i(a.a)(t,[{key:"getBytes",value:function(){return 4*this.size}},{key:"getData",value:function(){return this.typedArray[u]}},{key:"getSubData",value:function(t){var e,n;if(void 0===t)e=this.data,n=0;else{var i=this.offsets[t],r=i+this.sizes[t];e=this.data.subarray(i,r),n=4*i}return{data:e,offset:n}}},{key:"setUniforms",value:function(t){for(var e in t)this._setValue(e,t[e]);return this}},{key:"_setValue",value:function(t,e){var i=this.layout[t];n.i(s.a)(i,"UniformLayoutStd140 illegal argument");var r=this.typedArray[i.type];1===i.size?r[i.offset]=e:r.set(e,i.offset)}},{key:"_addUniform",value:function(t,e){var i=n.i(o.b)(e);n.i(s.a)(i,"UniformBufferLayout illegal argument");var r=i.type,a=i.components;this.size=this._alignTo(this.size,a);var u=this.size;this.size+=a,this.layout[t]={type:r,size:a,offset:u}}},{key:"_alignTo",value:function(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}}]),t}()},function(t,e,n){"use strict";var i=n(0),r=n(1),a=n(37);!function(){function t(e){n.i(i.a)(this,t),this.points=e,this.isClosed=n.i(a.a)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}n.i(r.a)(t,[{key:"getSignedArea",value:function(){var t=0;return this.forEachSegment(function(e,n){t+=(e[0]+n[0])*(e[1]-n[1])}),t/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(t){for(var e=this.points.length,n=0;n<e-1;n++)t(this.points[n],this.points[n+1],n,n+1);this.isPolygon&&!this.isClosed()&&t(this.points[e-1],this.points[0],e-1,0)}}])}()},function(t,e,n){"use strict";var i=n(64),r=n(0),a=n(1),o=n(4),s=n(2),u=n(3),l=n(94),c=n(251),f=n(37),d=n(165),h=n(78),v=n(201),g=n(147),p=n(88),_=[1,0,0,0,1,0,0,0,1];!function(t){function e(){for(var t,i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return n.i(r.a)(this,e),t=n.i(o.a)(this,n.i(s.a)(e).call(this)),Array.isArray(a[0])&&1===arguments.length?t.copy(a[0]):t.identity(),t}n.i(u.a)(e,t),n.i(a.a)(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return this[0]=t,this[1]=i,this[2]=o,this[3]=e,this[4]=r,this[5]=s,this[6]=n,this[7]=a,this[8]=u,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this[4]=r,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,n.i(i.a)(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[3*t+e]:this[3*e+t]}},{key:"setElement",value:function(t,e,i){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[3*t+e]=n.i(f.c)(i):this[3*e+t]=n.i(f.c)(i),this}},{key:"determinant",value:function(){return v.b(this)}},{key:"identity",value:function(){for(var t=0;t<_.length;++t)this[t]=_[t];return this.check()}},{key:"fromQuaternion",value:function(t){return v.c(this,t),this.check()}},{key:"transpose",value:function(){return v.d(this,this),this.check()}},{key:"invert",value:function(){return v.e(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return v.f(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return v.f(this,this,t),this.check()}},{key:"rotate",value:function(t){return v.g(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?v.h(this,this,t):v.h(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return v.i(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new d.a,g.c(e,t,this),n.i(c.a)(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new h.a,p.i(e,t,this),n.i(c.a)(e,3),e}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);default:throw new Error("Illegal vector")}}},{key:"ELEMENTS",get:function(){return 9}}])}(l.a)},function(t,e,n){"use strict";var i=n(0),r=n(1),a=n(164),o=n(78),s=n(250);!function(){function t(e){var r=e.x,a=void 0===r?0:r,u=e.y,l=void 0===u?0:u,c=e.z,f=void 0===c?0:c,d=e.roll,h=void 0===d?0:d,v=e.pitch,g=void 0===v?0:v,p=e.yaw,_=void 0===p?0:p,m=e.position,y=e.orientation;n.i(i.a)(this,t),Array.isArray(m)&&3===m.length?this.position=new o.a(m):this.position=new o.a(a,l,f),Array.isArray(y)&&4===y.length?this.orientation=new s.a(y,y[3]):this.orientation=new s.a(h,g,_,s.a.RollPitchYaw)}n.i(r.a)(t,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(t){return!!t&&(this.position.equals(t.position)&&this.orientation.equals(t.orientation))}},{key:"exactEquals",value:function(t){return!!t&&(this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation))}},{key:"getTransformationMatrix",value:function(){var t=Math.sin(this.roll),e=Math.sin(this.pitch),n=Math.sin(this.yaw),i=Math.cos(this.roll),r=Math.cos(this.pitch),o=Math.cos(this.yaw);return(new a.a).setRowMajor(o*r,-n*i+o*e*t,n*t+o*e*i,this.x,n*r,o*i+n*e*t,-o*t+n*e*i,this.y,-e,r*t,r*i,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(t){return(new a.a).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(t){return(new a.a).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(t){return this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){return this.position.y=t}},{key:"z",get:function(){return this.position.z},set:function(t){return this.position.z=t}},{key:"roll",get:function(){return this.orientation.roll},set:function(t){return this.orientation.roll=t}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(t){return this.orientation.pitch=t}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(t){return this.orientation.yaw=t}}])}()},function(t,e,n){"use strict";var i=n(31),r=n(0),a=n(1),o=n(37),s=n(78),u=n(88),l=6371e3;!function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.phi,a=e.theta,o=e.radius,s=e.bearing,u=e.pitch,c=(e.altitude,e.radiusScale),f=void 0===c?l:c;n.i(r.a)(this,t),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(i)||Number.isFinite(a)?(this.phi=i||0,this.theta=a||0):(Number.isFinite(s)||Number.isFinite(u))&&(this.bearing=s||0,this.pitch=u||0),this.radius=o||1,this.radiusScale=f||1,this.check()}n.i(a.a)(t,[{key:"toString",value:function(){return this.formatString(o.d)}},{key:"formatString",value:function(t){var e=t.printTypes,n=(t.printDegrees,o.e);return"".concat(e?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}},{key:"equals",value:function(t){return n.i(o.a)(this.radius,t.radius)&&n.i(o.a)(this.theta,t.theta)&&n.i(o.a)(this.phi,t.phi)}},{key:"exactEquals",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:"fromLngLatZ",value:function(t){var e=n.i(i.a)(t,3),r=e[0],a=e[1],s=e[2];this.radius=1+s/this.radiusScale,this.phi=n.i(o.f)(a),this.theta=n.i(o.f)(r)}},{key:"fromVector3",value:function(t){return this.radius=u.h(t),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(n.i(o.b)(t[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new s.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-n.i(o.g)(this.phi)},set:function(t){this.phi=Math.PI-n.i(o.f)(t)}},{key:"pitch",get:function(){return n.i(o.g)(this.theta)},set:function(t){this.theta=n.i(o.f)(t)}},{key:"longitude",get:function(){return n.i(o.g)(this.phi)}},{key:"latitude",get:function(){return n.i(o.g)(this.theta)}},{key:"lng",get:function(){return n.i(o.g)(this.phi)}},{key:"lat",get:function(){return n.i(o.g)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}])}()},function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
    var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=i(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)a.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(t,e,n){"use strict"},function(t,e,n){"use strict";function i(t){if(!t&&!n.i(a.a)())return"Node";if(n.i(o.a)(t))return"Electron";var e="undefined"!=typeof navigator?navigator:{},i=t||e.userAgent||"";if(i.indexOf("Edge")>-1)return"Edge";var s=-1!==i.indexOf("MSIE "),u=-1!==i.indexOf("Trident/");return s||u?"IE":r.d.chrome?"Chrome":r.d.safari?"Safari":r.d.mozInnerScreenX?"Firefox":"Unknown"}e.a=i;var r=n(166),a=n(167),o=n(168)},function(t,e,n){"use strict";n(61).b.probe={}},function(t,e,n){"use strict";var i=n(0),r=n(1),a=n(258),o=n(257);!function(){function t(e){var r=e.id;n.i(i.a)(this,t),this.id=r,this.time=n.i(a.a)(),this.counters={},Object.seal(this)}n.i(r.a)(t,[{key:"addCounter",value:function(t){return this._getCounter(t),this}},{key:"bump",value:function(t){var e=this._getCounter(t);return e.call++,e.count++,this}},{key:"increment",value:function(t,e){var n=this._getCounter(t);return n.call++,n.count+=e,this}},{key:"addTimer",value:function(t){return this._getCounter(t).time=0,this}},{key:"addTime",value:function(t,e){var n=this._getCounter(t);return n.time+=e,n.count++,this}},{key:"timeStart",value:function(t,e){this._getCounter(t)._startTime=n.i(a.a)()}},{key:"timeEnd",value:function(t,e){var i=this._getCounter(t);this.addTime(t,n.i(a.a)()-i._startTime)}},{key:"reset",value:function(){this.time=n.i(a.a)();for(var t in this.counters){var e=this.counters[t];e.count=0,e.time=0}return this}},{key:"hasTimeElapsed",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n.i(a.a)()-this.time>1e3}},{key:"getStats",value:function(){var t=(n.i(a.a)()-this.time)/1e3,e={};for(var i in this.counters){var r=this.counters[i];e[r.title]={total:r.count,fps:Math.round(r.count/t)},r.time&&(e[r.title].totalTime=n.i(o.c)(r.time),e[r.title].avgTime=n.i(o.c)(r.time/r.count))}return e}},{key:"getStatsTable",value:function(){var t=this.getStats();for(var e in t)0===t[e].total&&delete t[e];return t}},{key:"getStatNames",value:function(){return Object.keys(this.counters)}},{key:"get",value:function(t){return this._getCounter(t).count}},{key:"getCount",value:function(t){return this._getCounter(t).count}},{key:"getFPS",value:function(t){var e=this._getCounter(t),i=(n.i(a.a)()-this.time)/1e3;return Math.round(e.count/i)}},{key:"getTimeString",value:function(){return"".concat(this.id,":").concat(n.i(o.c)(this.time),"(").concat(this.count,")")}},{key:"oneSecondPassed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return this.hasTimeElapsed(t)}},{key:"_getCounter",value:function(t){var e=this.counters[t];return e||(e={title:t,unit:"",timer:!1,count:0,time:0,totalTime:0,averageTime:0},this.counters[t]=e),e}},{key:"_incrementTimer",value:function(t,e,n){t.count+=n,t.totalTime+=e,t.averageTime=t.totalTime/n}}])}()},function(t,e,n){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}e.a=i},function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=!0,a=!1,o=void 0;try{for(var s,u=i[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)!function(){var n=s.value;"function"==typeof t[n]&&(e.find(function(t){return n===t})||(t[n]=t[n].bind(t)))}()}catch(t){a=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}}e.a=i},function(t,e,n){"use strict";function i(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}n.d(e,"a",function(){return o});var r=n(0),a=n(1),o=function(){function t(e,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";n.i(r.a)(this,t),this.storage=i(o),this.id=e,this.config={},Object.assign(this.config,a),this._loadConfiguration()}return n.i(a.a)(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}()},function(t,e,n){"use strict";n(61)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="undefined"!=typeof window&&window.addEventListener,a=new Map,o=function(){return r&&window.__SEER_INITIALIZED__},s=function(t,e){var n=a.get(t),i=Date.now();return!!(n&&i-n<e)||(a.set(t,i),!1)},u=function(t){return function(e,n){if(!n||"object"!==(void 0===n?"undefined":i(n))||!t.has(n)){t.add(n);return Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}}},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r&&o()){var n=new Set,i=JSON.stringify(e,u(n));try{window.postMessage({type:t,payload:i,source:"seer-agent"},"*")}catch(t){if(s("seer-log",2e3))return;console.log(t)}}},c=new Map,f=function(t){if(t&&t.data&&"seer-core"===t.data.source){var e=t.data,n=e.type,i=e.payload,r=c.get(n);r&&r.forEach(function(t){return t(i)})}},d=function(){r&&!window.__SEER_LISTENER__&&(window.addEventListener("message",f),window.__SEER_LISTENER__=!0)},h=function(){r&&window.__SEER_LISTENER__&&(window.removeEventListener("message",f),delete window.__SEER_LISTENER__)},v=function(t,e){if(r){if(!t||!e)throw new Error("Please provide a type and callback");c.has(t)||c.set(t,[]),window.__SEER_LISTENER__||d(),c.get(t).push(e)}},g=function(t){c.forEach(function(e,n){c.set(n,e.filter(function(e){return e!==t}))})},p=function(t,e){return l("LIST",{key:t,data:e})},_=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l("LIST_ITEM",{key:t,itemKey:e,data:n})},m=function(t,e,n,i){return l("UPDATE_ITEM",{key:t,itemKey:e,path:n,data:i})},y=function(t,e,n){return l("MULTI_UPDATE_ITEM",{key:t,itemKey:e,array:n})},b=function(t,e){return l("DELETE_ITEM",{key:t,itemKey:e})},E=function(t,e,n){return l("ADD_LOG",{key:t,itemKey:e,msg:n})};e.default={send:l,throttle:s,isReady:o,list:p,listItem:_,updateItem:m,multiUpdate:y,deleteItem:b,addLog:E,listeners:c,listenFor:v,removeListener:g,init:d,clean:h}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){(function(e){WebGLDebugUtils=function(){function t(t){if(null==g){g={},p={};for(var e in t)"number"==typeof t[e]&&(g[t[e]]=e,p[e]=t[e])}}function n(){if(null==g)throw"WebGLDebugUtils.init(ctx) not called"}function i(t){return n(),void 0!==g[t]}function r(t){n();var e=g[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function a(t,e,n,i){var a=v[t];if(void 0!==a){var a=a[e];if(void 0!==a&&a[n]){if("object"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var o=a[n].enumBitwiseOr,s=0,u=[],l=0;l<o.length;++l){var c=p[o[l]];0!=(i&c)&&(s|=c,u.push(r(c)))}return s===i?u.join(" | "):r(i)}return r(i)}}return null===i?"null":void 0===i?"undefined":i.toString()}function o(t,e){for(var n="",i=e.length,r=0;r<i;++r)n+=(0==r?"":", ")+a(t,i,r,e[r]);return n}function s(t,e,n){t.__defineGetter__(n,function(){return e[n]}),t.__defineSetter__(n,function(t){e[n]=t})}function u(e,n,i,o){function l(t,e){return function(){i&&i(e,arguments);var r=t[e].apply(t,arguments),a=o.getError();return 0!=a&&(c[a]=!0,n(a,e,arguments)),r}}o=o||e,t(e),n=n||function(t,e,n){for(var i="",o=n.length,s=0;s<o;++s)i+=(0==s?"":", ")+a(e,o,s,n[s]);h("WebGL error "+r(t)+" in "+e+"("+i+")")};var c={},f={};for(var d in e)if("function"==typeof e[d])if("getExtension"!=d)f[d]=l(e,d);else{var v=l(e,d);f[d]=function(){var t=v.apply(e,arguments);return t?u(t,n,i,o):null}}else s(f,e,d);return f.getError=function(){for(var t in c)if(c.hasOwnProperty(t)&&c[t])return c[t]=!1,t;return e.NO_ERROR},f}function l(t){var e=!!t.createTransformFeedback;e&&t.bindVertexArray(null);var n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i);for(var r=0;r<n;++r)t.disableVertexAttribArray(r),t.vertexAttribPointer(r,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(r,0),e&&t.vertexAttribDivisor(r,0);t.deleteBuffer(i);for(var a=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r=0;r<a;++r)t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null),e&&(t.bindTexture(t.TEXTURE_2D_ARRAY,null),t.bindTexture(t.TEXTURE_3D,null),t.bindSampler(r,null));if(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),e){t.drawBuffers([t.BACK]),t.readBuffer(t.BACK),t.bindBuffer(t.COPY_READ_BUFFER,null),t.bindBuffer(t.COPY_WRITE_BUFFER,null),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindBuffer(t.PIXEL_UNPACK_BUFFER,null);for(var o=t.getParameter(t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS),r=0;r<o;++r)t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,r,null);for(var s=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS),r=0;r<s;++r)t.bindBufferBase(t.UNIFORM_BUFFER,r,null);t.disable(t.RASTERIZER_DISCARD),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,0),t.pixelStorei(t.UNPACK_SKIP_IMAGES,0),t.pixelStorei(t.UNPACK_ROW_LENGTH,0),t.pixelStorei(t.UNPACK_SKIP_ROWS,0),t.pixelStorei(t.UNPACK_SKIP_PIXELS,0),t.pixelStorei(t.PACK_ROW_LENGTH,0),t.pixelStorei(t.PACK_SKIP_ROWS,0),t.pixelStorei(t.PACK_SKIP_PIXELS,0),t.hint(t.FRAGMENT_SHADER_DERIVATIVE_HINT,t.DONT_CARE)}for(;t.getError(););}function c(t){function e(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}function n(){for(var t=Object.keys(x),e=0;e<t.length;++e)delete x[t[e]]}function i(){++b,_||y==b&&t.loseContext()}function r(t,e){var n=t[e];return function(){if(i(),!_){return n.apply(t,arguments)}}}function a(){for(var t=0;t<m.length;++t){var e=m[t];e instanceof WebGLBuffer?c.deleteBuffer(e):e instanceof WebGLFramebuffer?c.deleteFramebuffer(e):e instanceof WebGLProgram?c.deleteProgram(e):e instanceof WebGLRenderbuffer?c.deleteRenderbuffer(e):e instanceof WebGLShader?c.deleteShader(e):e instanceof WebGLTexture?c.deleteTexture(e):h&&(e instanceof WebGLQuery?c.deleteQuery(e):e instanceof WebGLSampler?c.deleteSampler(e):e instanceof WebGLSync?c.deleteSync(e):e instanceof WebGLTransformFeedback?c.deleteTransformFeedback(e):e instanceof WebGLVertexArrayObject&&c.deleteVertexArray(e))}}function o(t){return{statusMessage:t,preventDefault:function(){E=!0}}}function u(t){for(var e in t)"function"==typeof t[e]?d[e]=r(t,e):s(d,t,e);d.getError=function(){if(i(),!_)for(var t;t=c.getError();)x[t]=!0;for(var t in x)if(x[t])return delete x[t],t;return d.NO_ERROR};var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];h&&n.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var a=0;a<n.length;++a){var o=n[a];d[o]=function(e){return function(){if(i(),_)return null;var n=e.apply(t,arguments);return n.__webglDebugContextLostId__=p,m.push(n),n}}(t[o])}var u=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];h&&u.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var a=0;a<u.length;++a){var o=u[a];d[o]=function(e){return function(){return i(),_?null:e.apply(t,arguments)}}(d[o])}var l=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];h&&l.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var a=0;a<l.length;++a){var o=l[a];d[o]=function(e){return function(){return i(),!_&&e.apply(t,arguments)}}(d[o])}return d.checkFramebufferStatus=function(e){return function(){return i(),_?d.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(d.checkFramebufferStatus),d.getAttribLocation=function(e){return function(){return i(),_?-1:e.apply(t,arguments)}}(d.getAttribLocation),d.getVertexAttribOffset=function(e){return function(){return i(),_?0:e.apply(t,arguments)}}(d.getVertexAttribOffset),d.isContextLost=function(){return _},h&&(d.getFragDataLocation=function(e){return function(){return i(),_?-1:e.apply(t,arguments)}}(d.getFragDataLocation),d.clientWaitSync=function(e){return function(){return i(),_?d.WAIT_FAILED:e.apply(t,arguments)}}(d.clientWaitSync),d.getUniformBlockIndex=function(e){return function(){return i(),_?d.INVALID_INDEX:e.apply(t,arguments)}}(d.getUniformBlockIndex)),d}var c,d,h,v=[],g=[],d={},p=1,_=!1,m=[],y=0,b=0,E=!1,A=0,x={};t.getContext=function(e){return function(){var n=e.apply(t,arguments);if(n instanceof WebGLRenderingContext||f.WebGL2RenderingContext&&n instanceof WebGL2RenderingContext){if(n!=c){if(c)throw"got different context";h=f.WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,c=n,d=u(c)}return d}return n}}(t.getContext);var T=function(t){v.push(e(t))},P=function(t){g.push(e(t))};return function(t){var e=t.addEventListener;t.addEventListener=function(n,i,r){switch(n){case"webglcontextlost":T(i);break;case"webglcontextrestored":P(i);break;default:e.apply(t,arguments)}}}(t),t.loseContext=function(){if(!_){for(_=!0,y=0,++p;c.getError(););n(),x[c.CONTEXT_LOST_WEBGL]=!0;var e=o("context lost"),i=v.slice();setTimeout(function(){for(var n=0;n<i.length;++n)i[n](e);A>=0&&setTimeout(function(){t.restoreContext()},A)},0)}},t.restoreContext=function(){_&&g.length&&setTimeout(function(){if(!E)throw"can not restore. webglcontestlost listener did not call event.preventDefault";a(),l(c),_=!1,b=0,E=!1;for(var t=g.slice(),e=o("context restored"),n=0;n<t.length;++n)t[n](e)},0)},t.loseContextInNCalls=function(t){if(_)throw"You can not ask a lost contet to be lost";y=b+t},t.getNumCalls=function(){return b},t.setRestoreTimeout=function(t){A=t},t}var f;void 0===f&&(f=e);var d=function(t){f.console&&f.console.log&&f.console.log(t)},h=function(t){f.console&&f.console.error?f.console.error(t):d(t)},v={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},g=null,p=null;return{init:t,mightBeEnum:i,glEnumToString:r,glFunctionArgToString:a,glFunctionArgsToString:o,makeDebugContext:u,makeLostContextSimulatingCanvas:c,resetToInitialState:l}}(),t.exports=WebGLDebugUtils}).call(e,n(63))}]);